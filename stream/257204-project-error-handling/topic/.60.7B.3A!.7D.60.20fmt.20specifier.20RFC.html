<html>
<head><meta charset="utf-8"><title>`{:!}` fmt specifier RFC · project-error-handling · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/index.html">project-error-handling</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html">`{:!}` fmt specifier RFC</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="228020395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020395">(Feb 27 2021 at 01:04)</a>:</h4>
<p>So I think this idea is getting near the point where we should write an RFC. I had a call with <span class="user-mention" data-user-id="310399">@Mara</span> today where we talked a lot about the reporting ideas I was going to blog about and she largely convinced me that much of it possibly doesn't belong in std</p>



<a name="228020400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020400">(Feb 27 2021 at 01:04)</a>:</h4>
<p>im still re-evaluating</p>



<a name="228020459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020459">(Feb 27 2021 at 01:05)</a>:</h4>
<p>but there seems to be a minimal feature subset of the idea that we both agreed on completely, that I think could easily support the reporting hooks if it ends up making sense to include those in std</p>



<a name="228020465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020465">(Feb 27 2021 at 01:05)</a>:</h4>
<p>Heres the basic idea</p>



<a name="228020539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020539">(Feb 27 2021 at 01:06)</a>:</h4>
<p>add a <code>{:!}</code> specifier to the <code>fmt</code> grammar, this expects arguments to implement the <code>Error</code> trait, or possibly just deref / coerce to <code>&amp;dyn Error + 'static</code></p>



<a name="228020580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020580">(Feb 27 2021 at 01:06)</a>:</h4>
<p>when you print an error with this specifier it will actively utilize the <code>Error</code> trait interface to print the error, iterating over sources</p>



<a name="228020613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020613">(Feb 27 2021 at 01:07)</a>:</h4>
<p>the default format will be to do <code>error message: source error message: source source error message: ...</code></p>



<a name="228020632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020632">(Feb 27 2021 at 01:07)</a>:</h4>
<p>then <code>{:#!}</code> could do the multi line format similar to <code>eyre</code> /  <code>anyhow</code> and print the backtrace if one was captured</p>



<a name="228020720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020720">(Feb 27 2021 at 01:08)</a>:</h4>
<p>then we would specialize the <code>Termination</code> impl on <code>Result</code> to use this format specifier instead of <code>{:?}</code> when the error type impls <code>Error</code></p>



<a name="228020768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020768">(Feb 27 2021 at 01:09)</a>:</h4>
<p>additionally, we may want to specialize <code>unwrap</code> and <code>expect</code> to use this fmt specifier</p>



<a name="228020771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020771">(Feb 27 2021 at 01:09)</a>:</h4>
<p>One unanswered question:</p>



<a name="228020828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020828">(Feb 27 2021 at 01:10)</a>:</h4>
<p>I'd like to have the <code>{:!}</code> have special meaning when used in a <code>panic!</code> macro, where it includes the formatted string as the <code>Payload</code>, but also has the argument passed into <code>{:!}</code> preserved as the source error</p>



<a name="228020872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020872">(Feb 27 2021 at 01:10)</a>:</h4>
<p>assuming we've moved the error trait to core and added integration to <code>PanicInfo</code></p>



<a name="228020929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228020929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228020929">(Feb 27 2021 at 01:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228020539">said</a>:</p>
<blockquote>
<p>add a <code>{:!}</code> specifier to the <code>fmt</code> grammar, this expects arguments to implement the <code>Error</code> trait, or possibly just deref / coerce to <code>&amp;dyn Error + 'static</code></p>
</blockquote>
<p>That seems inconsistent with other kinds of formatting specifiers, why tie this to the <code>Error</code> trait rather than adding <code>fmt::Bang</code> or similar?</p>



<a name="228021047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021047">(Feb 27 2021 at 01:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228020929">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228020539">said</a>:</p>
<blockquote>
<p>add a <code>{:!}</code> specifier to the <code>fmt</code> grammar, this expects arguments to implement the <code>Error</code> trait, or possibly just deref / coerce to <code>&amp;dyn Error + 'static</code></p>
</blockquote>
<p>That seems inconsistent with other kinds of formatting kinds, why tie this to the <code>Error</code> trait rather than adding <code>fmt::Bang</code> or similar?</p>
</blockquote>
<p>because the <code>Error</code> trait is about providing structured access to the context that needs to be reported, the goal here is to provide a Reporter built into our fmt machinery that consumes the error trait and lays out a simple report</p>



<a name="228021061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021061">(Feb 27 2021 at 01:13)</a>:</h4>
<p>You mentioned the default format, but I don't see how one would override it with something else in absence of such a trait.</p>



<a name="228021078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021078">(Feb 27 2021 at 01:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228021061">said</a>:</p>
<blockquote>
<p>You mentioned the default format, but I don't see how one would override it with something else in absence of such a trait.</p>
</blockquote>
<p>via <code>Formatter</code> flags</p>



<a name="228021090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021090">(Feb 27 2021 at 01:13)</a>:</h4>
<p>the same way you can have an alt <code>Debug</code> format and a regular one with the same impl</p>



<a name="228021146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021146">(Feb 27 2021 at 01:14)</a>:</h4>
<p>you go <code>if f.alt() { // alternate formatting logic .. } else { // default formatting logic }</code></p>



<a name="228021157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021157">(Feb 27 2021 at 01:14)</a>:</h4>
<p>Right, but you can't customize how your type gets printed out via formatter flags. AFAICT you'd get A or B, where A and B are decided by libstd.</p>



<a name="228021175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021175">(Feb 27 2021 at 01:14)</a>:</h4>
<p>yea</p>



<a name="228021184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021184">(Feb 27 2021 at 01:14)</a>:</h4>
<p>this is just providing a minimal not customizable set of formats for errors</p>



<a name="228021219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021219">(Feb 27 2021 at 01:15)</a>:</h4>
<p>like if there was a <code>fmt::Bang</code> trait</p>



<a name="228021267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021267">(Feb 27 2021 at 01:16)</a>:</h4>
<p>I'm missing context to discuss this, I guess.</p>



<a name="228021301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021301">(Feb 27 2021 at 01:16)</a>:</h4>
<p>this would be like there was also a single type that implemented it, and it impls <code>fn new(error: &amp;dyn Error + 'static) -&gt; Bang&lt;'_&gt;</code> and every time you use a fmt macro it always wraps your error in the Bang and uses its Bang impl to print it</p>



<a name="228021318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021318">(Feb 27 2021 at 01:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228021267">said</a>:</p>
<blockquote>
<p>I'm missing context to discuss this, I guess.</p>
</blockquote>



<a name="228021346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021346">(Feb 27 2021 at 01:17)</a>:</h4>
<p>so the context is, if you print an error using <code>Display</code> or <code>Debug</code> you usually lose context</p>



<a name="228021355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021355">(Feb 27 2021 at 01:17)</a>:</h4>
<p>because it wont iterate through the sources for you</p>



<a name="228021385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021385">(Feb 27 2021 at 01:17)</a>:</h4>
<p>so we want to make it easy and encouraged to print sources</p>



<a name="228021475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021475">(Feb 27 2021 at 01:18)</a>:</h4>
<p>right now the common way to do that is have a type that just wraps the dyn error and implements debug, then inside its debug impl iterates over sources and prints the report the way you want</p>



<a name="228021501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021501">(Feb 27 2021 at 01:19)</a>:</h4>
<p><code>{:!}</code> acts as if it was implicitly wrapping the error in a reporting type like this</p>



<a name="228021521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021521">(Feb 27 2021 at 01:19)</a>:</h4>
<p>and implies "the format machinery will iterate over your sources and print this for you, using its pre-defined formats, with some customizability via format flags"</p>



<a name="228021599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021599">(Feb 27 2021 at 01:20)</a>:</h4>
<p>this wouldn't be the full story on error reporting, but the idea is that more complex runtime error reporting is usually specific to the kind of application you're writing</p>



<a name="228021603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021603">(Feb 27 2021 at 01:20)</a>:</h4>
<p>and hard to abstract over</p>



<a name="228021608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021608">(Feb 27 2021 at 01:21)</a>:</h4>
<p>so we want to leave that to libraries for now</p>



<a name="228021634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021634">(Feb 27 2021 at 01:21)</a>:</h4>
<p>so eyre would still exist, and would let you customize your report formats and would just use <code>Debug</code></p>



<a name="228021651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228021651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228021651">(Feb 27 2021 at 01:21)</a>:</h4>
<p>or actually it probably wouldn't but thats due to changes enabled by the new Try rfc</p>



<a name="228022598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228022598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228022598">(Feb 27 2021 at 01:33)</a>:</h4>
<p>My two primary concerns here are: As a developer I typically want to print my errors as</p>
<div class="codehilite"><pre><span></span><code>error: &lt;display&gt;
  caused by: &lt;display&gt;
  caused by: ...
</code></pre></div>
<p>rather than a single line (or anything else) so to me being able to change how things end up looking is important. With that in mind I would end up being unable to utilize <code>{:!}</code> as proposed, much like I cannot utilize the termination trait (for the same reasons).</p>
<p>On the rustc side of things, I find it somewhat weird to tie formatting machinery to an almost unrelated concept of error handling. On the other hand, I can see why you'd want the formatting machinery to be responsible for implementing the walking up the causation chain – if its left up to the user many will simply forget!</p>



<a name="228022938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228022938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228022938">(Feb 27 2021 at 01:37)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> <code>{:#!}</code> would look like the format you just mentioned</p>



<a name="228022941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228022941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228022941">(Feb 27 2021 at 01:37)</a>:</h4>
<p>I wonder if specialization could be a solution to the problem of people wanting to specify a custom format/print.</p>



<a name="228022991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228022991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228022991">(Feb 27 2021 at 01:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228022941">said</a>:</p>
<blockquote>
<p>I wonder if specialization could be a solution to the problem of people wanting to specify a custom format/print.</p>
</blockquote>
<p>if we want to customize it then I think we'd use the same solution <code>eyre</code> does</p>



<a name="228023005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023005">(Feb 27 2021 at 01:38)</a>:</h4>
<p>which is to have a trait that is called to do the iteration and printing</p>



<a name="228023020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023020">(Feb 27 2021 at 01:38)</a>:</h4>
<p><code>fn report(&amp;self, error: &amp;(dyn Error + 'static), f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result</code></p>



<a name="228023056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023056">(Feb 27 2021 at 01:39)</a>:</h4>
<p>then <code>{:!}</code> would just call this, and users could install their own reporter with a function like <code>set_hook</code> for panics</p>



<a name="228023065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023065">(Feb 27 2021 at 01:39)</a>:</h4>
<p>that was the original proposal</p>



<a name="228023130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023130">(Feb 27 2021 at 01:40)</a>:</h4>
<p>but <span class="user-mention" data-user-id="310399">@Mara</span> raised the point that the way you want to format it is often dependent upon the system you're using to report the error, and not necessarily universal across the application</p>



<a name="228023193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023193">(Feb 27 2021 at 01:41)</a>:</h4>
<p>so the default fmt machinery and panic might want to use some simple default formats, but <code>tracing</code> would probably have its own way of recording errors as structured data</p>



<a name="228023224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023224">(Feb 27 2021 at 01:42)</a>:</h4>
<p>and if you need to customize the output, then the right solution is probably to wrap it in another type that implements <code>Display</code></p>



<a name="228023282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228023282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228023282">(Feb 27 2021 at 01:42)</a>:</h4>
<p>and that type can have the customizing hooks if you want like eyre</p>



<a name="228028884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228028884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228028884">(Feb 27 2021 at 03:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC/near/228023224">said</a>:</p>
<blockquote>
<p>and if you need to customize the output, then the right solution is probably to wrap it in another type that implements <code>Display</code></p>
</blockquote>
<p>I've also sometimes seen this done as <code>fn something(&amp;self) -&gt; impl Display</code>, or whatever, instead of requiring passing the formatter to something.  Dunno if that fits what you're doing...</p>



<a name="228028937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228028937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228028937">(Feb 27 2021 at 03:26)</a>:</h4>
<p>yea</p>



<a name="228028948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228028948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228028948">(Feb 27 2021 at 03:26)</a>:</h4>
<p>thats pretty much how I'd recommend doing it in practice</p>



<a name="228028978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228028978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228028978">(Feb 27 2021 at 03:26)</a>:</h4>
<p>that impl Display would probably be <code>impl Display + '_</code> and store the <code>&amp;self</code> ref inside it</p>



<a name="228031046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031046">(Feb 27 2021 at 04:08)</a>:</h4>
<p>If we do this, we should <em>also</em> make a fmt::Bang trait in general, and then errors simply always implement that trait</p>



<a name="228031053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031053">(Feb 27 2021 at 04:08)</a>:</h4>
<p>oooo</p>



<a name="228031054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031054">(Feb 27 2021 at 04:08)</a>:</h4>
<p>yes</p>



<a name="228031060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031060">(Feb 27 2021 at 04:09)</a>:</h4>
<p>because then we can make some sort of convention such as "walk this" for bang</p>



<a name="228031073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031073">(Feb 27 2021 at 04:09)</a>:</h4>
<p>eg, iterators can now bang fmt if their items can fmt, and it just prints out the iterator steps</p>



<a name="228031274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031274">(Feb 27 2021 at 04:13)</a>:</h4>
<p>I'd want to call it <code>std::fmt::Report</code></p>



<a name="228031275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031275">(Feb 27 2021 at 04:13)</a>:</h4>
<p>however there's also already a bit of awkwardness between debug / display / the other formatters, so maybe we could sit down and fix that up, and then use a design that is compatible with the current edition and also with a potential break for a future edition (if the fix up plan requires a break)</p>



<a name="228031276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031276">(Feb 27 2021 at 04:13)</a>:</h4>
<p>rather than <code>Bang</code></p>



<a name="228031278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031278">(Feb 27 2021 at 04:13)</a>:</h4>
<p>oh</p>



<a name="228031280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031280">(Feb 27 2021 at 04:13)</a>:</h4>
<p>wait you mean <code>fmt</code> refactor?</p>



<a name="228031281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031281">(Feb 27 2021 at 04:13)</a>:</h4>
<p>or do you mean how they interact with the error trait</p>



<a name="228031343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031343" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031343">(Feb 27 2021 at 04:14)</a>:</h4>
<p>because in the other topic today I talked a bunch about how I think the new <code>Try</code> trait lets us impl <code>Error</code> on <code>AnyError</code> style types</p>



<a name="228031349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031349">(Feb 27 2021 at 04:14)</a>:</h4>
<p>and this has massive implications, including on how well the fmt impls for errors compose</p>



<a name="228031377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031377">(Feb 27 2021 at 04:15)</a>:</h4>
<p>so my problem with them is that all the non-{debug | display} traits are supposed to be the Display form of whatever they do, and then they secretly also combine with the <code>?</code> to get a Debug form of that thing, but end users can't easily get this, so you don't benefit from that unless you've derived</p>



<a name="228031385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031385">(Feb 27 2021 at 04:15)</a>:</h4>
<p>i dont follow</p>



<a name="228031511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031511">(Feb 27 2021 at 04:18)</a>:</h4>
<p>so, like, <code>{:x}</code> for LowerHex, but you can also write <code>{:x?}</code> and that's Debug (LowerHexMode), the <code>?</code> "wins". Except users writing their own Debug impls can't see that the format was an <code>x</code> and print the debug numbers in lower hex, so if you didn't derive the impl then you don't get this special behavior</p>



<a name="228031528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031528">(Feb 27 2021 at 04:18)</a>:</h4>
<p><code>{:!?}</code> wouldn't be valid</p>



<a name="228031542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031542">(Feb 27 2021 at 04:19)</a>:</h4>
<p>but what about <code>{:x!}</code></p>



<a name="228031551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031551">(Feb 27 2021 at 04:19)</a>:</h4>
<p>ignored</p>



<a name="228031564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031564">(Feb 27 2021 at 04:19)</a>:</h4>
<p>or maybe just not accepted in the grammar</p>



<a name="228031568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031568">(Feb 27 2021 at 04:19)</a>:</h4>
<p>mmmmmaybethat'sfineiguess</p>



<a name="228031570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031570">(Feb 27 2021 at 04:19)</a>:</h4>
<p>lol</p>



<a name="228031635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031635">(Feb 27 2021 at 04:20)</a>:</h4>
<p>i still think we would be best served if we took a little time to make sure that formatting overall, as a system, was staying cohesive, and that we were leaving ourselves the most open space for the future</p>



<a name="228031640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031640">(Feb 27 2021 at 04:21)</a>:</h4>
<p>fair</p>



<a name="228031661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031661">(Feb 27 2021 at 04:21)</a>:</h4>
<p>I can draft an initial RFC that doesn't focus on the fmt integration</p>



<a name="228031665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031665">(Feb 27 2021 at 04:21)</a>:</h4>
<p>but on providing a reporter to drive the error trait interface in the basic case</p>



<a name="228031670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031670">(Feb 27 2021 at 04:21)</a>:</h4>
<p>or</p>



<a name="228031673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031673">(Feb 27 2021 at 04:21)</a>:</h4>
<p>iunno</p>



<a name="228031723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031723">(Feb 27 2021 at 04:22)</a>:</h4>
<p>is someone actively working on the fmt overhaul?</p>



<a name="228031754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031754">(Feb 27 2021 at 04:22)</a>:</h4>
<p>we could do a much more minimal change</p>



<a name="228031781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031781">(Feb 27 2021 at 04:23)</a>:</h4>
<p>and add a <code>report()</code> method that is blanket impled for errors</p>



<a name="228031791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031791">(Feb 27 2021 at 04:23)</a>:</h4>
<p>on some new trait</p>



<a name="228031799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031799">(Feb 27 2021 at 04:23)</a>:</h4>
<p>that just creates a <code>Display</code> type that does the formatting described</p>



<a name="228031807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031807">(Feb 27 2021 at 04:24)</a>:</h4>
<p>so <code>println!("Error: {}", error.report());</code></p>



<a name="228031949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031949">(Feb 27 2021 at 04:26)</a>:</h4>
<p>It's a pet peeve of mine, but no one is working on it, because before today no one wanted to see any particular new stuff so i didn't feel pressed for time or anything.</p>



<a name="228031964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031964">(Feb 27 2021 at 04:26)</a>:</h4>
<p>this could just be a method couldnt it?</p>



<a name="228031974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031974">(Feb 27 2021 at 04:27)</a>:</h4>
<p>yeah it can just be a method that returns an <code>impl Display</code></p>



<a name="228031990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228031990" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228031990">(Feb 27 2021 at 04:27)</a>:</h4>
<p>if we require <code>: Sized</code></p>



<a name="228032001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032001">(Feb 27 2021 at 04:27)</a>:</h4>
<p>it could return...  &amp;dyn Display?</p>



<a name="228032006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032006">(Feb 27 2021 at 04:27)</a>:</h4>
<p>dont think so,</p>



<a name="228032009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032009">(Feb 27 2021 at 04:27)</a>:</h4>
<p>that would prevent temporaries</p>



<a name="228032057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032057">(Feb 27 2021 at 04:28)</a>:</h4>
<p>temporary whats?</p>



<a name="228032058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032058">(Feb 27 2021 at 04:28)</a>:</h4>
<p>wrappers that provide the Display impl</p>



<a name="228032065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032065">(Feb 27 2021 at 04:28)</a>:</h4>
<p>hm</p>



<a name="228032081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032081">(Feb 27 2021 at 04:29)</a>:</h4>
<p>i think making it <code>: Sized</code> is fine and possibly good</p>



<a name="228032088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032088">(Feb 27 2021 at 04:29)</a>:</h4>
<p>because we can still do a default impl that will work on dyn Errors</p>



<a name="228032092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032092">(Feb 27 2021 at 04:29)</a>:</h4>
<p>that returns the default <code>std::error::Report</code> type</p>



<a name="228032093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032093">(Feb 27 2021 at 04:29)</a>:</h4>
<p>that does the simple reporting via its Display impl</p>



<a name="228032392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032392">(Feb 27 2021 at 04:35)</a>:</h4>
<p>I think i prefer the <code>fmt</code> based solution though</p>



<a name="228032395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032395">(Feb 27 2021 at 04:35)</a>:</h4>
<p>because it more naturally leads to integration with the panic runtime</p>



<a name="228032461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032461">(Feb 27 2021 at 04:36)</a>:</h4>
<p>tho eeh</p>



<a name="228032463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228032463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228032463">(Feb 27 2021 at 04:36)</a>:</h4>
<p>honestly that feels half baked</p>



<a name="228055379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228055379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228055379">(Feb 27 2021 at 12:27)</a>:</h4>
<p>Making <code>!</code> a formatting flag rather than a separate specifier could be an option, which much like <code>fmt::Report</code> it would force users to carefully not miss implementing the walking of causation chain by themselves…</p>
<p>The <code>#</code> flag could be repurposed too, e.g. to say that conventionally display impls with <code>#</code> should also format in their cause-chain somehow (that way not requiring any changes other than to how <code>Display</code> impls are written)</p>



<a name="228292596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228292596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228292596">(Mar 01 2021 at 19:35)</a>:</h4>
<p>I just saw this topic this morning. I like the general idea of having a standard "format this as an error" (and I like the suggestion of making it a trait, as well).</p>



<a name="228292938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/%60%7B%3A%21%7D%60%20fmt%20specifier%20RFC/near/228292938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/.60.7B.3A!.7D.60.20fmt.20specifier.20RFC.html#228292938">(Mar 01 2021 at 19:38)</a>:</h4>
<p>I also wonder if <code>min_specialization</code> would be enough to be able to have specialized implementations for types that also implement <code>Error</code>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>backtrace stabilization · project-error-handling · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/index.html">project-error-handling</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html">backtrace stabilization</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="218128611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/218128611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#218128611">(Nov 27 2020 at 20:56)</a>:</h4>
<p><span class="user-mention" data-user-id="204346">@Ashley Mannix</span> am I correct in assuming that we need to resolve the merge conflicts in <a href="https://github.com/rust-lang/rust/pull/72981">https://github.com/rust-lang/rust/pull/72981</a> before we can actually merge the RFC, regardless of the recent comment by RFC bot?</p>



<a name="223281034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223281034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223281034">(Jan 19 2021 at 19:36)</a>:</h4>
<p>more on this <span class="user-mention" data-user-id="204346">@Ashley Mannix</span></p>



<a name="223281069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223281069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223281069">(Jan 19 2021 at 19:36)</a>:</h4>
<p>one thing im worried about is that I haven't actually taken the time yet to finish my proof of concept for backtrace in core</p>



<a name="223281086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223281086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223281086">(Jan 19 2021 at 19:36)</a>:</h4>
<p>and i want to make sure backtrace doesn't stabilize before that is finished</p>



<a name="223281093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223281093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223281093">(Jan 19 2021 at 19:36)</a>:</h4>
<p>that should be a blocker probably</p>



<a name="223281120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223281120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223281120">(Jan 19 2021 at 19:36)</a>:</h4>
<p>actually we should probably add that to the list on the tracking issue</p>



<a name="223313066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223313066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223313066">(Jan 19 2021 at 23:47)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> That’s fair. I think <span class="user-mention" data-user-id="143274">@Amanieu</span> was also hoping for a more complete implementation before merging. I’ll note that as a blocker. Would you like a hand with anything on the PoC?</p>



<a name="223313133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223313133" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223313133">(Jan 19 2021 at 23:48)</a>:</h4>
<p>the main issue right now is figuring out how to setup the hooks between core and std</p>



<a name="223313163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223313163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223313163">(Jan 19 2021 at 23:48)</a>:</h4>
<p>so any guidance on that would be the most helpful</p>



<a name="223313186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223313186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223313186">(Jan 19 2021 at 23:49)</a>:</h4>
<p>my impression is that the type of hooks that we want currently don't have any prior art</p>



<a name="223313202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223313202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223313202">(Jan 19 2021 at 23:49)</a>:</h4>
<p>and we'd need to add some new support in the compiler</p>



<a name="223313379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223313379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223313379">(Jan 19 2021 at 23:51)</a>:</h4>
<p>Ah ok. Have we run our ideas for how the backtrace hooks should work by <span class="user-group-mention" data-user-group-id="492">@T-compiler</span> already? I’m not really familiar with how we do hooks yet but somebody from there might have a good idea?</p>



<a name="223314160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314160">(Jan 20 2021 at 00:00)</a>:</h4>
<p>no, that could be the best next step</p>



<a name="223314300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314300">(Jan 20 2021 at 00:02)</a>:</h4>
<p>looking at the compiler team calendar rn <a href="https://calendar.google.com/calendar/u/0/embed?src=6u5rrtce6lrtv07pfi3damgjus@group.calendar.google.com">https://calendar.google.com/calendar/u/0/embed?src=6u5rrtce6lrtv07pfi3damgjus@group.calendar.google.com</a></p>



<a name="223314346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314346">(Jan 20 2021 at 00:02)</a>:</h4>
<p>maybe I should just attend their next triage meeting?</p>



<a name="223314365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314365">(Jan 20 2021 at 00:03)</a>:</h4>
<p>oh no</p>



<a name="223314370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314370">(Jan 20 2021 at 00:03)</a>:</h4>
<p>looks like steering meeting is what I want</p>



<a name="223314390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314390">(Jan 20 2021 at 00:03)</a>:</h4>
<p>which isn't for another week</p>



<a name="223314400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314400">(Jan 20 2021 at 00:03)</a>:</h4>
<p>ill just open an thread in their zulip channel</p>



<a name="223314985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314985">(Jan 20 2021 at 00:10)</a>:</h4>
<p>I went ahead and created a thread in the compilers stream</p>



<a name="223314987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223314987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223314987">(Jan 20 2021 at 00:10)</a>:</h4>
<p><a href="#narrow/stream/131828-t-compiler/topic/backtrace.20hooks.20in.20core">https://rust-lang.zulipchat.com/#narrow/stream/131828-t-compiler/topic/backtrace.20hooks.20in.20core</a></p>



<a name="223319109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223319109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223319109">(Jan 20 2021 at 01:03)</a>:</h4>
<p>looks like we can probably move forward with just adding lang_items like <code>eh_personality</code> and prove that that works</p>



<a name="223319162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223319162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223319162">(Jan 20 2021 at 01:04)</a>:</h4>
<p>then we can talk through further design concerns I've had around no_std and see if further prototyping is necessary</p>



<a name="223319201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223319201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223319201">(Jan 20 2021 at 01:04)</a>:</h4>
<p>but I think I've got enough for <span class="user-mention" data-user-id="281739">@oliver</span> and I to move forward</p>



<a name="223332453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/223332453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#223332453">(Jan 20 2021 at 04:56)</a>:</h4>
<p>Sounds good!</p>



<a name="224923730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224923730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224923730">(Feb 02 2021 at 19:33)</a>:</h4>
<p><span class="user-mention" data-user-id="204346">@Ashley Mannix</span> do you know off of the top of your head any examples of methods on core types in std?</p>



<a name="224923763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224923763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224923763">(Feb 02 2021 at 19:33)</a>:</h4>
<p>working on the core backtrace impl again and I don't know how to break the rules</p>



<a name="224924038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224924038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224924038">(Feb 02 2021 at 19:35)</a>:</h4>
<p>not in std, but we probably have things like impl ToOwned for str in liballoc I'd guess</p>



<a name="224924061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224924061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224924061">(Feb 02 2021 at 19:35)</a>:</h4>
<p>my guess is you're going to need to define a lang item</p>



<a name="224924184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224924184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224924184">(Feb 02 2021 at 19:36)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[lang = </span><span class="s">"str_alloc"</span><span class="cp">]</span><span class="w"></span>
<span class="cp">#[cfg(not(test))]</span><span class="w"></span>
<span class="k">impl</span><span class="w"> </span><span class="kt">str</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>



<a name="224924188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224924188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224924188">(Feb 02 2021 at 19:36)</a>:</h4>
<p>that tracks</p>



<a name="224925231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224925231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224925231">(Feb 02 2021 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> can you confirm  for me that its okay for us to use a lang item for backtrace?</p>



<a name="224925243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224925243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224925243">(Feb 02 2021 at 19:43)</a>:</h4>
<p>eddyb is a bit worried about using it on something other than a builtin type</p>



<a name="224926848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/224926848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#224926848">(Feb 02 2021 at 19:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="220273">Jane Lusby</span> <a href="#narrow/stream/257204-project-error-handling/topic/backtrace.20stabilization/near/224923730">said</a>:</p>
<blockquote>
<p>do you know off of the top of your head any examples of methods on core types in std?</p>
</blockquote>
<p><code>sort</code> on slices has historically been a weird one.</p>



<a name="225176097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225176097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225176097">(Feb 04 2021 at 15:38)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> can you say a bit more about what you'd be using the lang item for?</p>



<a name="225176151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225176151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225176151">(Feb 04 2021 at 15:39)</a>:</h4>
<p>should I just read this topic?</p>



<a name="225176299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225176299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225176299">(Feb 04 2021 at 15:40)</a>:</h4>
<p>Oh I have a quick summary I can link</p>



<a name="225176305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225176305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225176305">(Feb 04 2021 at 15:40)</a>:</h4>
<p>One second</p>



<a name="225176388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225176388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225176388">(Feb 04 2021 at 15:41)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/77384#issuecomment-772835929">https://github.com/rust-lang/rust/pull/77384#issuecomment-772835929</a></p>



<a name="225176413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225176413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225176413">(Feb 04 2021 at 15:41)</a>:</h4>
<p>So there are two lang items I'm eyeing now</p>



<a name="225200112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225200112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225200112">(Feb 04 2021 at 18:17)</a>:</h4>
<p>digging into this more im not sure I know what I'm talking about again, lol</p>



<a name="225200125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225200125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225200125">(Feb 04 2021 at 18:18)</a>:</h4>
<p>the global alloc stuff isn't done with lang items</p>



<a name="225200356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225200356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225200356">(Feb 04 2021 at 18:19)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">postprocess</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">krate</span>: <span class="kp">&amp;</span><span class="nc">ast</span>::<span class="n">Crate</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">inject_profiler_runtime</span><span class="p">(</span><span class="n">krate</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">inject_allocator_crate</span><span class="p">(</span><span class="n">krate</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">inject_panic_runtime</span><span class="p">(</span><span class="n">krate</span><span class="p">);</span><span class="w"></span>

<span class="w">        </span><span class="n">info</span><span class="o">!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span><span class="w"> </span><span class="n">CrateDump</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="n">cstore</span><span class="p">));</span><span class="w"></span>

<span class="w">        </span><span class="bp">self</span><span class="p">.</span><span class="n">report_unused_deps</span><span class="p">(</span><span class="n">krate</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="225200360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225200360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225200360">(Feb 04 2021 at 18:19)</a>:</h4>
<p>cool function</p>



<a name="225202492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225202492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225202492">(Feb 04 2021 at 18:34)</a>:</h4>
<p>_really wishing topics could exist in multiple streams_</p>



<a name="225202497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225202497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Ellis O&#x27;Riley Jr. <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225202497">(Feb 04 2021 at 18:34)</a>:</h4>
<p>What would you pass to this function and what does it do?  If I had to guess your passing a crate to it.</p>



<a name="225202765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225202765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225202765">(Feb 04 2021 at 18:36)</a>:</h4>
<p>not sure exactly because I'm just trying to figure this out myself, but this is a method on CrateLoader</p>



<a name="225202818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225202818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225202818">(Feb 04 2021 at 18:36)</a>:</h4>
<p>which is a piece of the compiler</p>



<a name="225202941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225202941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225202941">(Feb 04 2021 at 18:37)</a>:</h4>
<p>so in this case the crate being passed in is presumably the crate being compiled</p>



<a name="225203113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225203113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225203113">(Feb 04 2021 at 18:39)</a>:</h4>
<p>apparently the global allocator stuff is broken for dylibs</p>



<a name="225203142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225203142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225203142">(Feb 04 2021 at 18:39)</a>:</h4>
<p>eddyb is telling me that if we based the backtrace stuff on global alloc we'd probably end up with backtraces that dont work in rustc</p>



<a name="225203145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225203145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225203145">(Feb 04 2021 at 18:39)</a>:</h4>
<p>which seems bad</p>



<a name="225203147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225203147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225203147">(Feb 04 2021 at 18:39)</a>:</h4>
<p><span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="225203219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225203219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Ellis O&#x27;Riley Jr. <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225203219">(Feb 04 2021 at 18:39)</a>:</h4>
<p>I see</p>



<a name="225220247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225220247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225220247">(Feb 04 2021 at 20:48)</a>:</h4>
<p>pausing on this for the day soon but made some good progress</p>



<a name="225220287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225220287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225220287">(Feb 04 2021 at 20:49)</a>:</h4>
<p>using the <code>#[linkage]</code> feature rn which I think might not be supported on all platforms</p>



<a name="225220300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225220300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225220300">(Feb 04 2021 at 20:49)</a>:</h4>
<p>so i know that might need to be changed later</p>



<a name="225220359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225220359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225220359">(Feb 04 2021 at 20:49)</a>:</h4>
<p>but hopefully this will let me do the lib side of the backtrace move</p>



<a name="225220378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225220378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225220378">(Feb 04 2021 at 20:49)</a>:</h4>
<p>and then I can do the compiler side of making it all work after</p>



<a name="225229033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225229033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225229033">(Feb 04 2021 at 21:53)</a>:</h4>
<p>my current understanding is I wont be able to use a lang_item for the backtrace impl</p>



<a name="225229121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225229121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225229121">(Feb 04 2021 at 21:54)</a>:</h4>
<p>and will probably have to change the compiler to inject an extra dep if the backtrace hook symbols are never defined</p>



<a name="225229192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/225229192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#225229192">(Feb 04 2021 at 21:54)</a>:</h4>
<p>but for right now the linkage will hopefully let me work on the stuff I already understand while I figure out the compiler changes necessary</p>



<a name="229117085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117085">(Mar 06 2021 at 18:09)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> Is this complex enough that it might be worth considering just finishing build-std support instead?</p>



<a name="229117145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117145">(Mar 06 2021 at 18:10)</a>:</h4>
<p>(That isn't meant as a leading question; it's a genuine one.)</p>



<a name="229117287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117287">(Mar 06 2021 at 18:12)</a>:</h4>
<p>I don't think so but then I haven't had a ton of time to work on the backtrace move recently so there may be a lot more issues to resolve before I'm done</p>



<a name="229117309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117309">(Mar 06 2021 at 18:12)</a>:</h4>
<p>How much work would finishing build std support entail <span class="user-mention" data-user-id="239881">@Josh Triplett</span> ?</p>



<a name="229117600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117600">(Mar 06 2021 at 18:16)</a>:</h4>
<p>My understanding is that the primary remaining issue there is "how do we let rustc 1.x.y build std 1.x.y that uses nightly-only features without allowing version skew".</p>



<a name="229117614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117614">(Mar 06 2021 at 18:16)</a>:</h4>
<p>We'd need the source-equivalent of the sysroot, as the simplest thing.</p>



<a name="229117649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229117649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229117649">(Mar 06 2021 at 18:17)</a>:</h4>
<p>That plus a little more cargo work to integrate it would address the feature itself. Then we could start using feature flags in std, with care.</p>



<a name="229118010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229118010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229118010">(Mar 06 2021 at 18:22)</a>:</h4>
<p>That may or may not be easier than sorting out the issues you're running into.</p>



<a name="229120960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229120960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229120960">(Mar 06 2021 at 19:06)</a>:</h4>
<p>What do you mean by version skew?</p>



<a name="229121516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121516">(Mar 06 2021 at 19:14)</a>:</h4>
<p>build-std shouldn't allow building a a version of std other than the version that precisely matches the version of rustc.</p>



<a name="229121542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121542">(Mar 06 2021 at 19:15)</a>:</h4>
<p>If you have a specific nightly rustc, build-std should build that specific nightly's std.</p>



<a name="229121580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121580">(Mar 06 2021 at 19:15)</a>:</h4>
<p>So it should come from the Rust distribution (rustup or distro), via something like the sysroot.</p>



<a name="229121585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121585">(Mar 06 2021 at 19:15)</a>:</h4>
<p>Aah</p>



<a name="229121647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121647">(Mar 06 2021 at 19:16)</a>:</h4>
<p>What would be the follow up once we have build std setup</p>



<a name="229121651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121651">(Mar 06 2021 at 19:16)</a>:</h4>
<p>My understanding was that we then merge core and std</p>



<a name="229121675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121675">(Mar 06 2021 at 19:17)</a>:</h4>
<p>But that seems like a lot more work</p>



<a name="229121679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121679">(Mar 06 2021 at 19:17)</a>:</h4>
<p>That can happen over time; it doesn't have to happen immediately.</p>



<a name="229121690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121690">(Mar 06 2021 at 19:17)</a>:</h4>
<p>We can start adding features controlled by feature flags as soon as build-std works reliably.</p>



<a name="229121749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121749">(Mar 06 2021 at 19:18)</a>:</h4>
<p>Yea, I'm just wondering what feature flags we'd add here to help</p>



<a name="229121771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121771">(Mar 06 2021 at 19:18)</a>:</h4>
<p>Can we even feature flag part of a trait?</p>



<a name="229121774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121774">(Mar 06 2021 at 19:18)</a>:</h4>
<p>As in to disable the backtrace fn</p>



<a name="229121776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121776">(Mar 06 2021 at 19:19)</a>:</h4>
<p>Disable or stub out.</p>



<a name="229121777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121777">(Mar 06 2021 at 19:19)</a>:</h4>
<p>Or is there some simple solution I'm forgetting here</p>



<a name="229121797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121797">(Mar 06 2021 at 19:19)</a>:</h4>
<p>I've been assuming that for compatibility the backtrace function should exist and return an empty backtrace.</p>



<a name="229121804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121804">(Mar 06 2021 at 19:19)</a>:</h4>
<p>Yea</p>



<a name="229121816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121816">(Mar 06 2021 at 19:19)</a>:</h4>
<p>So then we would be future flagging alloc support inside of core?</p>



<a name="229121823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121823">(Mar 06 2021 at 19:19)</a>:</h4>
<p>So basically things would start moving from std into core and that's where we add the feature flags</p>



<a name="229121872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121872">(Mar 06 2021 at 19:20)</a>:</h4>
<p>Yeah. My assumption has been that we would slowly merge std and alloc <em>into</em> core (not the other way around), under feature flags, and re-export them from std and alloc.</p>



<a name="229121880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121880">(Mar 06 2021 at 19:20)</a>:</h4>
<p>And then core would be the new std essentially</p>



<a name="229121885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121885">(Mar 06 2021 at 19:20)</a>:</h4>
<p>Gotcha</p>



<a name="229121911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121911">(Mar 06 2021 at 19:20)</a>:</h4>
<p>I don't know much about how sysroots work, so I'll have to do some research</p>



<a name="229121915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121915">(Mar 06 2021 at 19:20)</a>:</h4>
<p>(naming bikesheds aside, because we might ultimately rename core to std when done)</p>



<a name="229121967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121967">(Mar 06 2021 at 19:21)</a>:</h4>
<p>We could open another topic (probably not under project-error-handling) and I could help with what I know about sysroots and the general plan here, if that'd help?</p>



<a name="229121968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121968">(Mar 06 2021 at 19:21)</a>:</h4>
<p>But I can start working on that if you think it would be the more fruitful approach</p>



<a name="229121971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121971">(Mar 06 2021 at 19:21)</a>:</h4>
<p>Sure</p>



<a name="229121974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229121974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229121974">(Mar 06 2021 at 19:21)</a>:</h4>
<p>So, I do <em>not</em> want to make the perfect the enemy of the good here. If you have a concrete idea for how to fix the backtrace issue without having to do this, and it seems doable, please by all means go for it.</p>



<a name="229122041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229122041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229122041">(Mar 06 2021 at 19:22)</a>:</h4>
<p>If, and only if, the backtrace issue seems stuck or painful (which it sounded above like it might be, given your mention of <code>#[linkage]</code> and platform-specifics), then this <em>might</em> be a fruitful path, and it'd be wildly helpful for many other purposes too.</p>



<a name="229123061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229123061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229123061">(Mar 06 2021 at 19:38)</a>:</h4>
<p><a href="#narrow/stream/122651-general/topic/build-std.2C.20sysroots.2C.20and.20backtrace">https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/build-std.2C.20sysroots.2C.20and.20backtrace</a></p>



<a name="229123065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229123065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229123065">(Mar 06 2021 at 19:38)</a>:</h4>
<p>Hope that helps.</p>



<a name="229905633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229905633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edmund Cape <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229905633">(Mar 11 2021 at 18:56)</a>:</h4>
<p>Hello Jane <em>et al</em>,  Is there a google meet link for the meeting at 2PM (5 min from now)?</p>



<a name="229907340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229907340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Edmund Cape <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229907340">(Mar 11 2021 at 19:07)</a>:</h4>
<p>... reading the posts from last week.  It looks like we are moving to every other week.  Until then, then :))</p>



<a name="229918054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229918054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229918054">(Mar 11 2021 at 20:14)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="229931988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/backtrace%20stabilization/near/229931988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/backtrace.20stabilization.html#229931988">(Mar 11 2021 at 21:46)</a>:</h4>
<p>do you have access to the libs calendar <span class="user-mention" data-user-id="388128">@Edmund Cape</span> ?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
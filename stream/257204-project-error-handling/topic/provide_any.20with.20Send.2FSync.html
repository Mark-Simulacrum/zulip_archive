<html>
<head><meta charset="utf-8"><title>provide_any with Send/Sync · project-error-handling · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/index.html">project-error-handling</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html">provide_any with Send/Sync</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268028158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028158">(Jan 14 2022 at 15:26)</a>:</h4>
<p>I've updated most of the provide-any proposal, but I'm feeling pretty unclear on the concurrent versions. I think we just need impls for dyn Tagged with Send/Sync just because of limitations on trait object impls and thus they're there mostly for completeness. But we've also discussed having Send/Sync versions of Requisition. That only seems useful if we have a version of Provider::provide with those bounds. But that seems unnecessary</p>



<a name="268028165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028165">(Jan 14 2022 at 15:26)</a>:</h4>
<p>Because</p>



<a name="268028426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028426">(Jan 14 2022 at 15:28)</a>:</h4>
<p>AIUI the concurrent use case is essentially that provide is implemented by getting a value from another thread via a channel or something, and for that to work, we wouldn't pass the requisition object to another thread, just pass the statically typed value, and pass it in to the requisition object on the 'getting' thread</p>



<a name="268028476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028476">(Jan 14 2022 at 15:28)</a>:</h4>
<p>Is there some other use case where the Requisition itself has to move threads?</p>



<a name="268028637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028637">(Jan 14 2022 at 15:30)</a>:</h4>
<p>And is there any reason for the Tagged trait objects to have Send/Sync variant impls? (Other than completeness in case somebody uses Tagged outside of the provider API, which is not an unreasonable thing to do)</p>



<a name="268028735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028735">(Jan 14 2022 at 15:30)</a>:</h4>
<p>Not that I can think of. Are there any forwards compatibility issues for the Send Sync stuff? As in, can we just add it later if a usecase comes up?</p>



<a name="268028861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268028861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268028861">(Jan 14 2022 at 15:31)</a>:</h4>
<p>I feel like, barring concrete usecases we should just outline how to add the support in the future but not actually do so.</p>



<a name="268029842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/provide_any%20with%20Send/Sync/near/268029842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/provide_any.20with.20Send.2FSync.html#268029842">(Jan 14 2022 at 15:38)</a>:</h4>
<p>I believe they can be added later, it was done for Any at some point</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
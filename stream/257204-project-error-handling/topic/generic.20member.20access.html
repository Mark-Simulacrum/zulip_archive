<html>
<head><meta charset="utf-8"><title>generic member access · project-error-handling · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/index.html">project-error-handling</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html">generic member access</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="248297870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248297870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248297870">(Aug 04 2021 at 00:38)</a>:</h4>
<p>I've been experimenting with the generic member access implementation in dyno. I think I have a similar but simpler API for the 'object provider' case. I think it handles the same requirements - no explicit type id comparison, supports references (at least those with a  lifetime bound by self) and ?Sized types, does not require Box, supports by value.</p>



<a name="248297889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248297889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248297889">(Aug 04 2021 at 00:38)</a>:</h4>
<p><a href="https://gist.github.com/nrc/293e88c0e796114ef181d1b2d5e1ac7e">https://gist.github.com/nrc/293e88c0e796114ef181d1b2d5e1ac7e</a></p>



<a name="248298033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248298033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248298033">(Aug 04 2021 at 00:40)</a>:</h4>
<p>One worry is casting too and from *mut u8, which I don't recall if that is sound or not. The other worry is that maintaining the lifetime of references is pretty fragile and I'm not convinced it's sound in all variance scenarios.</p>



<a name="248298045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248298045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248298045">(Aug 04 2021 at 00:40)</a>:</h4>
<p>Plus its probably wildly broken in ways I don't understand</p>



<a name="248298069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248298069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248298069">(Aug 04 2021 at 00:41)</a>:</h4>
<p>Anyway, please take a look and tell me what I screwed up!</p>



<a name="248302858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248302858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248302858">(Aug 04 2021 at 01:50)</a>:</h4>
<p>I’m not sure how it handles the closure use case for async runtimes</p>



<a name="248303629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248303629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248303629">(Aug 04 2021 at 02:04)</a>:</h4>
<p>I found one lifetime error already!</p>



<a name="248306091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248306091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248306091">(Aug 04 2021 at 02:59)</a>:</h4>
<p>Gist updated to address the lifetime issue and add some comments</p>



<a name="248307919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248307919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248307919">(Aug 04 2021 at 03:42)</a>:</h4>
<p>In terms of pros/cons, with dyno, the Tags are more first class, which means you can write your own for your types to support more complicated types such as &amp;'a Foo&lt;'b&gt; (my provider only supports &amp;'a Foo&lt;'static&gt;), however, the end user does have to write these tags and if you have to specify the generic type parameters, you have to specify the tag rather than the type. C.f., my proposal where the type is specified. E.g., err.context::&lt;TagType&gt;()</p>



<a name="248307935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248307935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248307935">(Aug 04 2021 at 03:43)</a>:</h4>
<p>Is your version of the provider API implemented ontop of Tag?</p>



<a name="248307938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248307938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248307938">(Aug 04 2021 at 03:43)</a>:</h4>
<p>Haven't had a chance yet to look at it in detail</p>



<a name="248307992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248307992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248307992">(Aug 04 2021 at 03:44)</a>:</h4>
<p>Looks like no</p>



<a name="248308572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248308572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248308572">(Aug 04 2021 at 03:59)</a>:</h4>
<p>No, it uses type tags, but they are not abstracted with a trait</p>



<a name="248517082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248517082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248517082">(Aug 05 2021 at 18:32)</a>:</h4>
<p>taking a look at the version you setup <span class="user-mention" data-user-id="256841">@Nick Cameron</span> it doesn't seem like it would still cover the futures executor case</p>



<a name="248517164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248517164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248517164">(Aug 05 2021 at 18:33)</a>:</h4>
<p>or at least i don't understand how it would if T: 'static</p>



<a name="248517328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248517328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248517328">(Aug 05 2021 at 18:34)</a>:</h4>
<p>ah i guess that's what you meant by "for the object provider case"</p>



<a name="248517352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/248517352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#248517352">(Aug 05 2021 at 18:34)</a>:</h4>
<p>seems like a reasonable option to include in the RFC</p>



<a name="249066589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066589">(Aug 11 2021 at 04:06)</a>:</h4>
<p>Thanks for looking it over! I've been on vacation for a few days, so sorry for the lack of response.</p>



<a name="249066630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066630">(Aug 11 2021 at 04:07)</a>:</h4>
<p>I talked to Nika last week and understand dyno a bit better now, in particular how it can support types with lifetimes by having the user write the Tag impls</p>



<a name="249066746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066746">(Aug 11 2021 at 04:10)</a>:</h4>
<p>Nice</p>



<a name="249066752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066752">(Aug 11 2021 at 04:10)</a>:</h4>
<p>Did she end up pushing some new versions of Dyno?</p>



<a name="249066758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066758">(Aug 11 2021 at 04:10)</a>:</h4>
<p>I think she did, but it may be on a branch</p>



<a name="249066762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066762">(Aug 11 2021 at 04:10)</a>:</h4>
<p>One sec</p>



<a name="249066778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066778">(Aug 11 2021 at 04:11)</a>:</h4>
<p><a href="https://github.com/mystor/dyno/tree/min_magic">https://github.com/mystor/dyno/tree/min_magic</a></p>



<a name="249066979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249066979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249066979">(Aug 11 2021 at 04:17)</a>:</h4>
<p>oh cool, I hadn't seen that</p>



<a name="249067126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067126">(Aug 11 2021 at 04:21)</a>:</h4>
<p><a href="/user_uploads/4715/lCPrniJuoCPJo-_7lHEKsXdL/Screenshot_20210810-2120172.png">Screenshot_20210810-212017~2.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/lCPrniJuoCPJo-_7lHEKsXdL/Screenshot_20210810-2120172.png" title="Screenshot_20210810-212017~2.png"><img src="/user_uploads/4715/lCPrniJuoCPJo-_7lHEKsXdL/Screenshot_20210810-2120172.png"></a></div>



<a name="249067179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067179" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067179">(Aug 11 2021 at 04:22)</a>:</h4>
<p>I also realized that last time I checked bevy had an identical crate</p>



<a name="249067181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067181">(Aug 11 2021 at 04:22)</a>:</h4>
<p>Trait*</p>



<a name="249067184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067184">(Aug 11 2021 at 04:22)</a>:</h4>
<p>That it uses for its own type erasure logic</p>



<a name="249067198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067198">(Aug 11 2021 at 04:22)</a>:</h4>
<p>I'm not sure if there's any significant benefit to having a common trait but it's definitely useful prior art</p>



<a name="249067258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067258">(Aug 11 2021 at 04:24)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="249067304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249067304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249067304">(Aug 11 2021 at 04:24)</a>:</h4>
<p><a href="https://docs.rs/bevy/0.5.0/bevy/ecs/system/trait.SystemParam.html">https://docs.rs/bevy/0.5.0/bevy/ecs/system/trait.SystemParam.html</a></p>



<a name="249071485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249071485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249071485">(Aug 11 2021 at 06:02)</a>:</h4>
<p>Actually it might be <a href="https://docs.rs/bevy/0.5.0/bevy/ecs/system/trait.SystemParamFetch.html">https://docs.rs/bevy/0.5.0/bevy/ecs/system/trait.SystemParamFetch.html</a></p>



<a name="249071529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249071529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249071529">(Aug 11 2021 at 06:02)</a>:</h4>
<p>And even then it's not the same</p>



<a name="249805106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249805106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249805106">(Aug 18 2021 at 04:01)</a>:</h4>
<p>Using the new dyno, I was able to get the best of both worlds: by adding specialised methods like provide_value and context_value, you can do the generic member access thing and in the common case never know anything about the whole Tag setup, but if you need to support complex cases (like closures for the async use case) then you can still define your own tags and use a generic method with an explicit tag</p>



<a name="249883287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/249883287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#249883287">(Aug 18 2021 at 17:25)</a>:</h4>
<p><span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="250308062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308062">(Aug 23 2021 at 03:48)</a>:</h4>
<p>Current version of the provider API I plan to propose is at <a href="https://github.com/nrc/provide-any">https://github.com/nrc/provide-any</a></p>



<a name="250308140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308140">(Aug 23 2021 at 03:50)</a>:</h4>
<p>It is based on Nika's dyno min-max branch, but modified a bit, in particular so that Error's API for common types is a bit more ergonomic, and to only support generic member access (downcasting based on type tags is kept as an internal detail, but could be exposed later)</p>



<a name="250308144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308144">(Aug 23 2021 at 03:50)</a>:</h4>
<p>I'm writing the RFC today</p>



<a name="250308234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308234">(Aug 23 2021 at 03:53)</a>:</h4>
<p>Any feedback on the API would be appreciated (I realise the code is a bit scruffy, will polish as I go along)</p>



<a name="250308240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308240">(Aug 23 2021 at 03:53)</a>:</h4>
<p>I expect to have an RFC draft this week</p>



<a name="250308242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308242">(Aug 23 2021 at 03:53)</a>:</h4>
<p>ready for review</p>



<a name="250308647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308647">(Aug 23 2021 at 04:03)</a>:</h4>
<p>Awesome</p>



<a name="250308656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250308656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250308656">(Aug 23 2021 at 04:03)</a>:</h4>
<p>I'll take a look at it first thing in the morning</p>



<a name="250309581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250309581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250309581">(Aug 23 2021 at 04:25)</a>:</h4>
<p>Thanks!</p>



<a name="250311151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250311151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250311151">(Aug 23 2021 at 05:01)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> other than adding context in anyhow (and Eyre) are you aware of any error libraries which have functionality similar to generic member access?</p>



<a name="250312095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250312095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250312095">(Aug 23 2021 at 05:17)</a>:</h4>
<p>There's traced error in the tracing error library that adds a span trace to an error that can be extracted through a dyn error via type erasure and downcast</p>



<a name="250312139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250312139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250312139">(Aug 23 2021 at 05:18)</a>:</h4>
<p>Which is kind of the inspiration for the whole generic member access thing or the workaround for the lack thereof</p>



<a name="250312140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250312140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250312140">(Aug 23 2021 at 05:18)</a>:</h4>
<p>It's kind of both</p>



<a name="250312373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250312373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250312373">(Aug 23 2021 at 05:24)</a>:</h4>
<p>thanks!</p>



<a name="250391327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391327">(Aug 23 2021 at 18:24)</a>:</h4>
<p>oh that blanket impl of Provider for Error types is nice</p>



<a name="250391349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391349">(Aug 23 2021 at 18:24)</a>:</h4>
<p>does that just work? I figured we wouldn't be able to add a new super trait</p>



<a name="250391440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391440">(Aug 23 2021 at 18:25)</a>:</h4>
<p>I feel like that could easily cause coherence issues later on if people wanted to be able to use the <code>Provider</code> trait separately</p>



<a name="250391464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391464">(Aug 23 2021 at 18:25)</a>:</h4>
<p>I'm imagining future incompatibility errors and or overlap</p>



<a name="250391553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391553">(Aug 23 2021 at 18:26)</a>:</h4>
<p>i guess that's only an issue in the crate that defines Provider maybe</p>



<a name="250391579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391579">(Aug 23 2021 at 18:26)</a>:</h4>
<p>and downstream they will always know if they impl Provider or Error</p>



<a name="250391711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391711">(Aug 23 2021 at 18:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="256841">Nick Cameron</span> <a href="#narrow/stream/257204-project-error-handling/topic/generic.20member.20access/near/250308140">said</a>:</p>
<blockquote>
<p>It is based on Nika's dyno min-max branch, but modified a bit, in particular so that Error's API for common types is a bit more ergonomic, and to only support generic member access (downcasting based on type tags is kept as an internal detail, but could be exposed later)</p>
</blockquote>
<p>Am I correct in understanding that the type tags being made an internal detail hasn't happened yet for the code you linked?</p>



<a name="250391739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391739">(Aug 23 2021 at 18:27)</a>:</h4>
<p>It seems to have a few pub APIs that expose the type tag interfaces atm</p>



<a name="250391968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250391968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250391968">(Aug 23 2021 at 18:29)</a>:</h4>
<p>overall looks good, I will have some comments about the code but I'll wait until you've polished it and got the RFC written and are ready for review</p>



<a name="250417819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417819">(Aug 23 2021 at 22:00)</a>:</h4>
<p>I think that if we add the trait and the impl at the same time, then it is OK. There would only be a coherence issue if someone wanted to implement Provider for their own Error type, which they should never need to do</p>



<a name="250417882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417882">(Aug 23 2021 at 22:01)</a>:</h4>
<p>type tags are exposed, but Tagged and related things are not</p>



<a name="250417902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417902">(Aug 23 2021 at 22:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="256841">Nick Cameron</span> <a href="#narrow/stream/257204-project-error-handling/topic/generic.20member.20access/near/250417819">said</a>:</p>
<blockquote>
<p>I think that if we add the trait and the impl at the same time, then it is OK. There would only be a coherence issue if someone wanted to implement Provider for their own Error type, which they should never need to do</p>
</blockquote>
<p>I'm not certain that's the only way this could cause issues</p>



<a name="250417909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417909">(Aug 23 2021 at 22:01)</a>:</h4>
<p>I think it is a nice compomise</p>



<a name="250417924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417924" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417924">(Aug 23 2021 at 22:01)</a>:</h4>
<p>imagine someone wants to have provider as a super trait the same way that <code>Error</code> does</p>



<a name="250417938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417938">(Aug 23 2021 at 22:01)</a>:</h4>
<p>and they add a blanket impl</p>



<a name="250417945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417945">(Aug 23 2021 at 22:02)</a>:</h4>
<p>super trait of what?</p>



<a name="250417988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250417988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250417988">(Aug 23 2021 at 22:02)</a>:</h4>
<p>of their own local trait</p>



<a name="250418003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418003">(Aug 23 2021 at 22:02)</a>:</h4>
<p>something where they want to add a <code>provide_context</code> method to some trait same as the Error trait does</p>



<a name="250418009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418009">(Aug 23 2021 at 22:02)</a>:</h4>
<p>im trying to imagine the ways this can cause overlap</p>



<a name="250418020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418020">(Aug 23 2021 at 22:02)</a>:</h4>
<p>but I want to make sure we don't run into issues like with From and Error</p>



<a name="250418039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418039">(Aug 23 2021 at 22:02)</a>:</h4>
<p>seems like its probably fine</p>



<a name="250418058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418058">(Aug 23 2021 at 22:03)</a>:</h4>
<p>I mean, they wouldn't be able to add impls of their trait for foreign types</p>



<a name="250418081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418081">(Aug 23 2021 at 22:03)</a>:</h4>
<p>there's an Error bound on the blanket impl, so it should be fine</p>



<a name="250418111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250418111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250418111">(Aug 23 2021 at 22:03)</a>:</h4>
<p>(they should have Provider and Error as super traits)</p>



<a name="250866621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250866621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250866621">(Aug 27 2021 at 01:51)</a>:</h4>
<p>Draft RFC is ready for review: <a href="https://github.com/nrc/rfcs/pull/1">https://github.com/nrc/rfcs/pull/1</a> It is not finished, though, still a couple of large TODOs in the reference section, but I doubt I'll address them for a few days so thought I'd ask for feedback now</p>



<a name="250866633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250866633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250866633">(Aug 27 2021 at 01:51)</a>:</h4>
<p>Anyone interested, please take a look!</p>



<a name="250866895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250866895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250866895">(Aug 27 2021 at 01:55)</a>:</h4>
<p>oh shiit</p>



<a name="250866897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250866897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250866897">(Aug 27 2021 at 01:55)</a>:</h4>
<p>taking a look now</p>



<a name="250866995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250866995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250866995">(Aug 27 2021 at 01:57)</a>:</h4>
<p>thanks!</p>



<a name="250868714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868714">(Aug 27 2021 at 02:08)</a>:</h4>
<p>suddenly a refresh button</p>



<a name="250868716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868716">(Aug 27 2021 at 02:08)</a>:</h4>
<p>lol</p>



<a name="250868870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868870">(Aug 27 2021 at 02:09)</a>:</h4>
<p>OK, that was a lie, I addressed one of the reference section TODOs. I won't manage the other before next week though</p>



<a name="250868955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868955">(Aug 27 2021 at 02:09)</a>:</h4>
<p>what was a lie?</p>



<a name="250868956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868956">(Aug 27 2021 at 02:09)</a>:</h4>
<p>ooh</p>



<a name="250868959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868959">(Aug 27 2021 at 02:09)</a>:</h4>
<p>the thing about the todos</p>



<a name="250868969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868969">(Aug 27 2021 at 02:09)</a>:</h4>
<p>yeah</p>



<a name="250868994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250868994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250868994">(Aug 27 2021 at 02:09)</a>:</h4>
<p>im almost done with the guide level seciton</p>



<a name="250869188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250869188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250869188">(Aug 27 2021 at 02:10)</a>:</h4>
<p>hah, then my update was just in time!</p>



<a name="250873656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250873656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250873656">(Aug 27 2021 at 02:29)</a>:</h4>
<p>posted my comments</p>



<a name="250873659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250873659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250873659">(Aug 27 2021 at 02:29)</a>:</h4>
<p>looks great btw</p>



<a name="250873991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250873991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250873991">(Aug 27 2021 at 02:35)</a>:</h4>
<p>thanks!</p>



<a name="250887908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250887908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250887908">(Aug 27 2021 at 06:10)</a>:</h4>
<blockquote>
<p>qq on <a href="https://github.com/nrc/provide-any">https://github.com/nrc/provide-any</a>, why is the TypeTag impl for Value <code>T: 'static</code> and not <code>T: ?Sized + 'static</code>? I know a <code>!Sized + 'static</code> object is pretty hard to come by (impossible?), but the code compiles fine with the looser bound</p>
</blockquote>
<p>edit: ignore me, it doesnt compile</p>



<a name="250962791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/250962791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Chen (he/him) <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#250962791">(Aug 27 2021 at 17:09)</a>:</h4>
<p>Wanted to also chime in and say that the RFC does a great job explaining the particulars of <code>provide_any</code>, which I was really struggling to wrap my head around when I was staring at the code. Great work <span class="user-mention" data-user-id="256841">@Nick Cameron</span> <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="251050653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/251050653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub Duchniewicz <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#251050653">(Aug 28 2021 at 11:52)</a>:</h4>
<p>I also went through the RFC, finally understood some details of how this should work. One thing that Jane already mentioned is how it will work with <code>any</code>? Should we strive to have these two side by side or somehow merge them?</p>



<a name="251097171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/251097171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#251097171">(Aug 29 2021 at 01:58)</a>:</h4>
<p>It's an excellent question! I've thought about  it a bit, but as far as I can tell, there  isn't a good solution. We can't change any because it's stable and widely used. We can't be closer to any because we are working around some pretty fundamental limitations of it. We could do something simple like nest provide_any inside any (I should add that as an alternative), but I can't think of anything more significant than that.</p>



<a name="259996707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/259996707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#259996707">(Nov 02 2021 at 13:45)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby [she/her]</span>  (and others) I have updated the generic member access RFC to address all the comments: <a href="https://github.com/nrc/rfcs/pull/1">https://github.com/nrc/rfcs/pull/1</a></p>



<a name="259996818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/259996818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#259996818">(Nov 02 2021 at 13:46)</a>:</h4>
<p>I've also improved documentation of the prototype implementation: <a href="https://github.com/nrc/provide-any">https://github.com/nrc/provide-any</a></p>



<a name="259996905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/259996905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#259996905">(Nov 02 2021 at 13:47)</a>:</h4>
<p>Let me know if you have further comments. I think I would like to improve the descriptions in the RFC a little before submitting, but otherwise I think it is good to go</p>



<a name="259997675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/259997675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#259997675">(Nov 02 2021 at 13:52)</a>:</h4>
<p>I'll check it out but I recommend posting it regardless, I can leave comments on the actual PR</p>



<a name="260214078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/260214078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#260214078">(Nov 04 2021 at 00:02)</a>:</h4>
<p><a href="https://github.com/nrc/provide-any/blob/main/src/tests.rs#L12-L18">https://github.com/nrc/provide-any/blob/main/src/tests.rs#L12-L18</a></p>
<p>Ah so that's what it's all about. We're basically providing a type-to-value map on-demand that the caller can sift through to find the bit they want and hand back to the original caller.</p>
<p>I'll have a play with this too from a logging context and see what it's like for trying to agree on standards like timestamps, errors, location info etc</p>



<a name="260214110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/260214110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#260214110">(Nov 04 2021 at 00:03)</a>:</h4>
<p>:D</p>



<a name="260257160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/generic%20member%20access/near/260257160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/generic.20member.20access.html#260257160">(Nov 04 2021 at 11:31)</a>:</h4>
<p>RFC posted: <a href="https://github.com/rust-lang/rfcs/pull/3192">https://github.com/rust-lang/rfcs/pull/3192</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Box  error requers Size · project-error-handling · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/index.html">project-error-handling</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html">Box  error requers Size</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261557533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261557533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261557533">(Nov 15 2021 at 20:55)</a>:</h4>
<p>In my library, I was trying to move from <code>Box&lt;dyn Error&gt;</code> to <code>T: Error</code>. Most users want to use <code>Box&lt;dyn Error&gt;</code>, but it is more flexible for thems that want a concrete error. But I keep hitting a problem because Box only impls Error, if <code>T</code> impls Error <em>and is sized</em>. <a href="https://doc.rust-lang.org/src/std/error.rs.html#499-513">Here</a>.</p>
<p>Is there a reason for that?</p>



<a name="261558612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261558612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261558612">(Nov 15 2021 at 21:03)</a>:</h4>
<p>At this point the only reason is backwards compatibility</p>



<a name="261558700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261558700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261558700">(Nov 15 2021 at 21:04)</a>:</h4>
<p>Would it be a breaking change to add <code>+ ?Sized</code>?</p>



<a name="261558718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261558718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261558718">(Nov 15 2021 at 21:04)</a>:</h4>
<p>The current plan to fix this is to introduce a thin box type that also has the feature of  making trait objects only one pointer wide,  and on this new type implement the correct error impl</p>



<a name="261558759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261558759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261558759">(Nov 15 2021 at 21:04)</a>:</h4>
<p>Yes, it would be a breaking change</p>



<a name="261558774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261558774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261558774">(Nov 15 2021 at 21:04)</a>:</h4>
<p>It would cause overlap with from e for box dyn error</p>



<a name="261558831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261558831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Chen (he/him) <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261558831">(Nov 15 2021 at 21:05)</a>:</h4>
<p><a href="https://stackoverflow.com/questions/65151237/why-doesnt-boxdyn-error-implement-error">https://stackoverflow.com/questions/65151237/why-doesnt-boxdyn-error-implement-error</a> gives some more context into this</p>



<a name="261559098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261559098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261559098">(Nov 15 2021 at 21:07)</a>:</h4>
<p>Can we add a comment to the code linking to the issue?</p>



<a name="261559237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261559237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261559237">(Nov 15 2021 at 21:08)</a>:</h4>
<p>( given how easy the fix looked, I knew I was missing something. )</p>



<a name="261559273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261559273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261559273">(Nov 15 2021 at 21:08)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="261564023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261564023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261564023">(Nov 15 2021 at 21:46)</a>:</h4>
<p>So to back out of my X-Y problem. My library takes a callback witch can return an error. Currently <code>Box&lt;dyn Error&gt;</code>. When my code calls the callback and it returns an error, we wrap it up in some information about why (<a href="https://github.com/pubgrub-rs/pubgrub/blob/dev/src/error.rs#L30">here</a>) and bubble it back out to the user of my library. It feels restrictive too require dynamic dispatch and allocations just to pass the error through my code. What is the current best practice here?</p>



<a name="261564871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261564871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261564871">(Nov 15 2021 at 21:53)</a>:</h4>
<p>I'm currently away from my computer so I am only giving like vague impression and haven't actually checked the code, but my default go to would be to have trait bounds that require that the return type impls from for your error types that you're going to use to add the extra context</p>



<a name="261564907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261564907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261564907">(Nov 15 2021 at 21:53)</a>:</h4>
<p>Wait no actually I think that's wrong</p>



<a name="261564976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261564976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261564976">(Nov 15 2021 at 21:54)</a>:</h4>
<p>Because presumably you would already have their error type before you would be contextualizing it with your own</p>



<a name="261564987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261564987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261564987">(Nov 15 2021 at 21:54)</a>:</h4>
<p>I'll take a look when I get home</p>



<a name="261565079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261565079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261565079">(Nov 15 2021 at 21:55)</a>:</h4>
<p>But I know I've run into this issue almost exactly when working with Tower in the past</p>



<a name="261577290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577290">(Nov 15 2021 at 23:42)</a>:</h4>
<p>okay so initial pass, you might be able to use <code>E: Into&lt;Box&lt;dyn Error&gt;&gt;</code> instead of <code>E: Error</code></p>



<a name="261577318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577318">(Nov 15 2021 at 23:42)</a>:</h4>
<p>which will at least cover both, though you're still working with Box&lt;dyn Error&gt; on your end</p>



<a name="261577381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577381">(Nov 15 2021 at 23:43)</a>:</h4>
<p><span class="user-mention" data-user-id="120179">@Eh2406</span> can you describe more why you want to switch from <code>Box&lt;dyn Error&gt;</code> to <code>T: Error</code>?</p>



<a name="261577631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577631">(Nov 15 2021 at 23:46)</a>:</h4>
<p>or do you have a diff showing the changes you're trying to make to the DependencyProvider trait?</p>



<a name="261577639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577639">(Nov 15 2021 at 23:46)</a>:</h4>
<p>I assume you're updating this method: <a href="https://github.com/pubgrub-rs/pubgrub/blob/717289be5722dd5caaa0d1f4ed13047d11a7f7fd/src/solver.rs#L256">https://github.com/pubgrub-rs/pubgrub/blob/717289be5722dd5caaa0d1f4ed13047d11a7f7fd/src/solver.rs#L256</a></p>



<a name="261577699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577699">(Nov 15 2021 at 23:47)</a>:</h4>
<p>Now I am on the road. I can reply after dinner. Thanks for the help.</p>



<a name="261577711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261577711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261577711">(Nov 15 2021 at 23:47)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="261582393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261582393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261582393">(Nov 16 2021 at 00:36)</a>:</h4>
<p>That method is a good example. All the methods from <code>DependencyProvider</code> have <code> -&gt; Result&lt; something , Box&lt;dyn Error&gt;&gt;;</code></p>



<a name="261582479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261582479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261582479">(Nov 16 2021 at 00:37)</a>:</h4>
<p>Errors should be rare, so maybe it doesn't matter very much. But it feels like I'm constraining the user.</p>



<a name="261582706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261582706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261582706">(Nov 16 2021 at 00:40)</a>:</h4>
<p>If there was an associated type <code>DependencyProvider::Error</code> and everything returned <code> -&gt; Result&lt; something , Self::Error&gt;;</code>,  then our users could pick their representation. Do they need an allocation, and dynamic dispatch?</p>



<a name="261582794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261582794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261582794">(Nov 16 2021 at 00:41)</a>:</h4>
<p>That would work, though you'd still need to be able to introduce your own error kinds right?</p>



<a name="261582854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261582854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261582854">(Nov 16 2021 at 00:42)</a>:</h4>
<p>Like a NoSolution error</p>



<a name="261583319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261583319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261583319">(Nov 16 2021 at 00:47)</a>:</h4>
<p>Right! We would still need our own error enum. But where it <a href="https://github.com/pubgrub-rs/pubgrub/blob/dev/src/error.rs#L30">now has</a> <code>Box&lt;dyn std::error::Error&gt;</code> it would have <code>DP::Error</code>.</p>



<a name="261583546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261583546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261583546">(Nov 16 2021 at 00:50)</a>:</h4>
<p>I'm wondering if you might be able to get away with adding a generic parameter to your error enum  so that users could specify how you wrap their errors</p>



<a name="261583587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261583587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261583587">(Nov 16 2021 at 00:50)</a>:</h4>
<p>And use that generic parameter instead of box dyn error</p>



<a name="261583809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261583809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261583809">(Nov 16 2021 at 00:53)</a>:</h4>
<p>I don't why last time I tried this I ended up constraining the parameter to be <code>E: Std:Error</code>, and fell down the rabbit hole of trying to figure out why <code>Box&lt;dyn Error&gt;</code> did not work as an instantiation.</p>



<a name="261584157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584157">(Nov 16 2021 at 00:56)</a>:</h4>
<p>Oh yeah, you might need to use a Deref bound or something instead of an Error bound to make it work for box and other error types</p>



<a name="261584170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584170">(Nov 16 2021 at 00:56)</a>:</h4>
<p>Not sure if errors implicitly Deref to a dyn Error <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="261584192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584192">(Nov 16 2021 at 00:57)</a>:</h4>
<p>This is where it always gets really annoying</p>



<a name="261584203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584203">(Nov 16 2021 at 00:57)</a>:</h4>
<p>And this is why I want to add thin box that just avoids this problem</p>



<a name="261584314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584314">(Nov 16 2021 at 00:58)</a>:</h4>
<p>Honestly, my recommendation would be to just use an error bound and possibly provide some sort of convenience function for converting box dyn errors  into something that implements error by just like wrapping it in a new type</p>



<a name="261584344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584344">(Nov 16 2021 at 00:58)</a>:</h4>
<p>Like box dyn error not implementing error was a mistake and you shouldn't let it constrain your API</p>



<a name="261584357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584357">(Nov 16 2021 at 00:59)</a>:</h4>
<p>It's not too hard for users to work around the issues themselves</p>



<a name="261584399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584399">(Nov 16 2021 at 00:59)</a>:</h4>
<p>Hopefully not steering you wrong</p>



<a name="261584405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584405">(Nov 16 2021 at 00:59)</a>:</h4>
<p>No promises though</p>



<a name="261584423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584423">(Nov 16 2021 at 00:59)</a>:</h4>
<p>That is fair.</p>



<a name="261584424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584424">(Nov 16 2021 at 00:59)</a>:</h4>
<p><span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="261584823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261584823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261584823">(Nov 16 2021 at 01:03)</a>:</h4>
<p>It's amazing how many ripples a mistake in STD has.</p>



<a name="261585390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261585390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261585390">(Nov 16 2021 at 01:10)</a>:</h4>
<p>:/</p>



<a name="261585426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261585426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261585426">(Nov 16 2021 at 01:11)</a>:</h4>
<p>hard to avoid in this case, the real cause of the issue was wanting to be able to use <code>?</code> with <code>Box&lt;dyn Error&gt;</code>, which seems clearly worth it in an abstract sense</p>



<a name="261585513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261585513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261585513">(Nov 16 2021 at 01:12)</a>:</h4>
<p>and the only reason we can really get away with not having the From impl now is because of the new Try trait which took a long ass time to get to the current state</p>



<a name="261585530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261585530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261585530">(Nov 16 2021 at 01:13)</a>:</h4>
<p>and even then it necessitates using multiple Result types which I'm still not convinced will be worth it</p>



<a name="261585551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261585551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261585551">(Nov 16 2021 at 01:13)</a>:</h4>
<p>Thanks for your expertise. I will give the refactor another try.</p>



<a name="261585597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257204-project-error-handling/topic/Box%20%20error%20requers%20Size/near/261585597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby [she/her] <a href="https://zulip-archive.rust-lang.org/stream/257204-project-error-handling/topic/Box.20.20error.20requers.20Size.html#261585597">(Nov 16 2021 at 01:14)</a>:</h4>
<p>my pleasure, let me know if I can help any more</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
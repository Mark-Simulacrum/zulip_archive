<html>
<head><meta charset="utf-8"><title>Positional Associated Types lang-team#126 · t-lang/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/index.html">t-lang/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html">Positional Associated Types lang-team#126</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261202116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261202116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261202116">(Nov 12 2021 at 01:14)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/lang-team/issues/126">Positional Associated Types #126</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="261202847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261202847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261202847">(Nov 12 2021 at 01:28)</a>:</h4>
<p>Hmm, I'm not sure how I feel about this one.  My instinct is that we should get <code>trait Fut&lt;T&gt; = Future&lt;Output=T&gt;;</code> stabilized before considering it.</p>



<a name="261203097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203097">(Nov 12 2021 at 01:33)</a>:</h4>
<p>Having a PAT on a trait basically means that it would be a breaking change to ever add a generic param (even if the restriction about not allowing PATs and generics was lifted you couldnt add a defaulted param backwards compatibly) That seems like sort of a huge commitment for std (and other crates I guess) to make just to save a bit of typing and because new users might take a while to figure out the difference between generics and associated types.</p>



<a name="261203503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203503">(Nov 12 2021 at 01:42)</a>:</h4>
<p><span class="user-mention" data-user-id="326176">@Boxy [she/her]</span> that is the reason for having PATs be opt-in by the trait definition.</p>



<a name="261203513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203513">(Nov 12 2021 at 01:42)</a>:</h4>
<p>right, but I'm not sure why you'd ever want to actually opt in</p>



<a name="261203520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203520">(Nov 12 2021 at 01:42)</a>:</h4>
<p>there is very little benefit in exchange for a huge back compatibility promise</p>



<a name="261203534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203534">(Nov 12 2021 at 01:43)</a>:</h4>
<p>I think for a trait like Iterator it is very very unlikely that we will ever want to add additional generics.</p>



<a name="261203590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203590">(Nov 12 2021 at 01:44)</a>:</h4>
<p>User traits would probably use this feature less often (if ever). TBH, I'm not even sure if we'd use an attribute for this. And if we did, it might be perma-unstable and only used by core.</p>



<a name="261203739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261203739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261203739">(Nov 12 2021 at 01:46)</a>:</h4>
<p>I do think trait aliases are pretty good solution to this, but they don't really help at all with the toe-stub "right, I need to type <code>Item=</code>".  And if anything, increase the mental burden for new users rather than decrease it.</p>



<a name="261241671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261241671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261241671">(Nov 12 2021 at 11:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222520">Sam Sartor</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261203590">said</a>:</p>
<blockquote>
<p>User traits would probably use this feature less often (if ever). TBH, I'm not even sure if we'd use an attribute for this. And if we did, it might be perma-unstable and only used by core.</p>
</blockquote>
<p>I do actually want to stabilize it, but I have no problem stabilizing the ability to invoke it before the ability to use the attribute yourself.</p>



<a name="261241689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261241689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261241689">(Nov 12 2021 at 11:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261202847">said</a>:</p>
<blockquote>
<p>Hmm, I'm not sure how I feel about this one.  My instinct is that we should get <code>trait Fut&lt;T&gt; = Future&lt;Output=T&gt;;</code> stabilized before considering it.</p>
</blockquote>
<p>I would personally prefer <code>Future&lt;T&gt;</code> over <code>Fut&lt;T&gt;</code>; I don't want to have to use an alias.</p>



<a name="261241726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261241726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261241726">(Nov 12 2021 at 11:51)</a>:</h4>
<p>Introducing a layer of indirection, where people look up <code>Fut</code> and see that it's an alias for <code>Future</code> and have to go look up <code>Future</code>, seems suboptimal.</p>



<a name="261241748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261241748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261241748">(Nov 12 2021 at 11:51)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1977">@T-lang</span>: Proposal <a href="https://github.com/rust-lang/lang-team/issues/126#issuecomment-967042801">#126</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>



<a name="261244662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261244662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261244662">(Nov 12 2021 at 12:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="261224">triagebot</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261241748">said</a>:</p>
<blockquote>
<p><span class="user-group-mention silent" data-user-group-id="1977">T-lang</span>: Proposal <a href="https://github.com/rust-lang/lang-team/issues/126#issuecomment-967042801">#126</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>
</blockquote>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> I want to highlight the "if no objections are raised" here. I'm seconding this because I'm in favor of it, but we should still talk about it.</p>



<a name="261263351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261263351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261263351">(Nov 12 2021 at 14:58)</a>:</h4>
<p>My own comments about this. First and foremost, I do share the feeling that having to spell out the associated type name can be cumbersome, sometimes, and that some help there. So I support the <em>rationale</em>, the <em>intent</em>. I remain skeptical of the suggest implementation / shape, however.</p>
<p>There are a reason "and a half" for that.</p>
<ul>
<li>The "half reason" —because it's not really a concrete one, but rather a feeling-based one—, is that I find the syntax conceptually contradictory, in the "traits are type-level functions" realm, to go from <code>Iterator: Self -&gt; Item</code> to <code>Iterator: (Self, Item) -&gt; ()</code>. But maybe that's just a first impression, that shall pass, and it's not impossible that I could grow used to it (<em>e.g.</em>, I still have very mixed feelings about <code>match</code> ergonomics, but I have to admit having relied on them, in some proc-macro code, out of sheer Sloth (a capital <code>syn</code>? <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span>)).</li>
<li>But the above half reason does lead to a more concrete one: it's a form of magic overloading, for the sake of sugar, and we should admit that that's something with which one has to be extremely careful. For instance, I wholeheartedly disagree that this kind of sugar will help beginners; quite the opposite! If the line between a generic parameter and an associated type is blurry for them, then removing the syntactic requirements that tell these two things apart will not help, I suspect: the <em>semantics</em> will remain different! If they see <code>-&gt; impl Iterator&lt;u8&gt;</code>, then it's only a matter of time before they try to write <code>impl Iterator&lt;u8&gt; for …</code> which will fail, and <em>that</em> would be quite inconsistent. Granted, this is only a hunch, and I'd thus be keen on hearing the opinion of ppl who have actual extensive experience in teaching Rust beginners (such as <span class="user-mention" data-user-id="116155">@Jake Goulding</span>?). Conceptually, however, the fact that this could be problematic, teaching-wise, should at the very least be <em>plausible</em>: sugar, by definition, hides (deemed-cumbersome) semantics, and hidden semantics don't help those that are not well acquainted with them. So it's a practical tradeoff, one which deserves more testing —in that regard, I'm not against experimenting with this MCP's implementation on <code>nightly</code>, provided it doesn't "status quo" its way into stable. But at the very least, the proposal should not be that confident upfront regarding its positive impact on beginners.</li>
</ul>
<p>So, on the one hand, we have explicit trait alias being cumbersome (as cumbersome as a type alias is, I'd say (<em>e.g.</em>, the pervasive <code>MyResult&lt;T&gt; = Result&lt;T, MyErr&gt;;</code>) which does indeed have some impact on the readability of the code, but I've always found it to be quite minimal), and on the other hand we have an extra feature to basically allow having a trait <code>Iterator&lt;Item = …&gt;</code> and its implicit alias <code>Iterator&lt;…&gt;</code> collide in the same name, which leads to the subtle implications <span class="user-mention" data-user-id="326176">@Boxy [she/her]</span> mentioned: what if default generic type parameters were added? In the explicit <code>trait alias</code> case, that can be handled, since we'd be forced to spell out the alias, and inside it, its type parameters).</p>



<a name="261263383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261263383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261263383">(Nov 12 2021 at 14:59)</a>:</h4>
<h1>A counter-proposal</h1>
<p>When thinking about this, however, I've seen a way to conciliate sugar and semantics, by going back to the conceptual level: if an "input type" is the only possible "input type" (for each choice of genuine input types), <em>and if we managed to make the compiler enforce so</em>, then, for all intents and purposes, we have an "output type", even if it appears in input position.</p>
<p>Indeed, if we had:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Factory</span><span class="o">&lt;</span><span class="n">Thing</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">make_another</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Thing</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>then it would be possible for a type to implement <code>Factory&lt;u8&gt;</code> and <code>Factory&lt;String&gt;</code>, and it would then be possible to have:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="kd">let</span><span class="w"> </span><span class="n">id1</span>: <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="n">make_another</span><span class="p">();</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">id2</span>: <span class="nb">String</span> <span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="n">make_another</span><span class="p">();</span><span class="w"></span>
<span class="kd">let</span><span class="w"> </span><span class="n">id3</span>: <span class="kt">u8</span> <span class="o">=</span><span class="w"> </span><span class="n">factory</span><span class="p">.</span><span class="n">make_another</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>which could be an unintended usage of <code>factory</code>'s state machine, leading to logic bugs. I'd say that's a good reason to have <code>Iterator</code> and <code>Future</code> use associated types (similar <code>self</code>-mutating API that yields a value whose type is chosen by the <code>impl</code>).</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="sd">/// With this definition, the above snippet would be impossible to have.</span>
<span class="k">trait</span><span class="w"> </span><span class="n">Factory</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Thing</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">make_another</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Thing</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>So, at this point we could imagine something like:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="sd">//! pseudo-code!</span>
<span class="k">trait</span><span class="w"> </span><span class="n">Factory</span><span class="o">&lt;</span><span class="cp">#[unique]</span><span class="w"> </span><span class="n">Thing</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>This looks horrendous, I'll admit (what is <code>#[unique]</code> about it? Semantics are not clear), but I believe there is an idea to explore there:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Factory</span><span class="o">&lt;</span><span class="n">Thing</span><span class="o">&gt;</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">Thing</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">Self</span>::<span class="n">Thing</span><span class="p">,</span><span class="w"> </span><span class="c1">// assuming type-equality constraints!</span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Thing</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>And then we could even make it default to <code>Self::Thing</code> so as to get sugar, and to be able to retro-apply such a change to traits such as <code>Iterator</code>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">Self</span>::<span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="cm">/* default instantiation when not provided */</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">Self</span>::<span class="n">Item</span><span class="p">,</span><span class="w"> </span><span class="cm">/* equality constraint (in case `Item` was explicitly provided) */</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
</code></pre></div>
<ul>
<li>which could even have a shorthand sugar: <code>trait Iterator&lt;Item == Self::Item&gt;</code></li>
</ul>
<p>This, incidentally, solves all of the other possible pitfalls, since we have that <code>Item</code> generic parameter explicitly spelled out, so it has a well-defined position there.</p>
<p>It would, for instance, still allow for:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="cm">/* … */</span><span class="w"> </span><span class="nb">Iterator</span><span class="w"> </span><span class="k">for</span><span class="w"></span>
</code></pre></div>
<p>as well as:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="cm">/* … */</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="kt">u8</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="cm">/* … */</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kt">u8</span><span class="p">;</span><span class="w"></span>
</code></pre></div>
<p>and for added default type parameters, one would just have to write those after the <code>==</code> one:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="bp">Self</span>::<span class="n">Item</span><span class="p">,</span><span class="w"> </span><span class="n">Dir</span><span class="w"> </span>: <span class="nc">Direction</span>::<span class="n">T</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Direction</span>::<span class="n">Forward</span><span class="o">&gt;</span><span class="w"></span>
</code></pre></div>
<p>It does mean that for a <code>Direction::Backward</code> impl, one would have to explicitly provide that <code>Item</code>:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="kt">u8</span><span class="p">,</span><span class="w"> </span><span class="n">Direction</span>::<span class="n">Backward</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"></span>
</code></pre></div>
<ul>
<li>(but would still allow for a future <code>impl Iterator&lt;Dir = Direction::Backward&gt; for</code> extension…)</li>
</ul>



<a name="261263723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261263723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261263723">(Nov 12 2021 at 15:00)</a>:</h4>
<blockquote>
<p>Granted, this is only a hunch, and I'd thus be keen on hearing the opinion of ppl who have actual extensive experience in teaching Rust beginners (such as @Jake Goulding?)</p>
</blockquote>
<p>That would indeed be why I responded with:</p>
<p><a href="/user_uploads/4715/WtVXmMuSuorpYeJO2iRB_adN/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/WtVXmMuSuorpYeJO2iRB_adN/image.png" title="image.png"><img src="/user_uploads/4715/WtVXmMuSuorpYeJO2iRB_adN/image.png"></a></div>



<a name="261264379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261264379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261264379">(Nov 12 2021 at 15:04)</a>:</h4>
<p>"Does <code>SomeTrait&lt;T&gt;</code> mean associated type or generic?" is a question I don't look forward to answering / explaining.</p>



<a name="261264426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261264426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261264426">(Nov 12 2021 at 15:04)</a>:</h4>
<p>I don't do as much teaching of absolute beginners lately, but the idea that I'd have to tell someone they can write <code>Iterator&lt;u8&gt;</code> in one place but not another is pretty unsettling.</p>



<a name="261265518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261265518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261265518">(Nov 12 2021 at 15:11)</a>:</h4>
<p>I was hoping maybe PATs could delay discussion of associated types until users get further into the world of custom traits and generics? But I can see what you mean about it potentially just feeling inconsistent at that point. I wonder if it is better or worse for PATs to be a rare exception for Future/lterator or a common shorthand for most core traits.</p>



<a name="261265553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261265553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261265553">(Nov 12 2021 at 15:11)</a>:</h4>
<p>I'd echo those sentiments, I'd love the more succinct syntax - having to write the name of many assoc types feels like boilerplate and there is cognitive overhead too (is it Item or Output?), but I feel like blurring the distinction on assoc types and generics, and how subtle the rules are for when you can use the shorthand will make things a lot harder for people learning/teaching</p>



<a name="261265608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261265608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261265608">(Nov 12 2021 at 15:11)</a>:</h4>
<p>I can't quite put it in words, but allowing <code>Foo&lt;Bar&gt;</code> to mean the same as <code>Foo&lt;Type = Bar&gt;</code> <strong>feels</strong> a lot like allowing <code>foo(&amp;self) -&gt; Iter</code> to mean <code>foo&lt;'a&gt;(&amp;'a self) -&gt; Iter&lt;'a&gt;</code>.</p>



<a name="261265997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261265997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261265997">(Nov 12 2021 at 15:13)</a>:</h4>
<p>I'll also add on that I agree with the underlying goal, especially addressing the "is it <code>Item</code> or <code>Output</code>"</p>



<a name="261266132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266132">(Nov 12 2021 at 15:14)</a>:</h4>
<p>Random alternate idea with all of 30 seconds of thinking: <code>impl Iterator&lt;_ = u8&gt;</code>.</p>



<a name="261266432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266432">(Nov 12 2021 at 15:16)</a>:</h4>
<p>The default argument counter proposal is an interesting use of type equality constraints, but I don't really see how it avoids any of the pitfalls TBH. In the end it seems to amount to the same thing, just at the type solver level not the parser level.</p>



<a name="261266839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266839">(Nov 12 2021 at 15:18)</a>:</h4>
<p>I do really like the the mental model of associated types as outputs, so I totally see where you're coming from. But in a way I'll have to think more about, I almost feel like that distinction goes away when you're using <code>impl/dyn Trait</code> a lot.</p>



<a name="261266840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266840">(Nov 12 2021 at 15:18)</a>:</h4>
<p>The major pitfall it avoids is that it maintains a syntactic difference between generic and associated types</p>



<a name="261266890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266890">(Nov 12 2021 at 15:19)</a>:</h4>
<p>whilst saving typing the assoc type name and thinking about the name</p>



<a name="261266919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266919">(Nov 12 2021 at 15:19)</a>:</h4>
<p>I certainly feel better about it at first blush</p>



<a name="261266989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261266989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261266989">(Nov 12 2021 at 15:19)</a>:</h4>
<p>At the technical level yes. But I think in practice it'll amount to the same thing to new users. And it almost seems like it would be harder to explain what is going on with the equality constraints, vs saying "oh the positional attribute makes this a special case".</p>



<a name="261267505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261267505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261267505">(Nov 12 2021 at 15:23)</a>:</h4>
<p>I'll mention that it should be easy to remove PATs over an edition if we ever change our minds about a particular trait having additional defaulted generics.</p>



<a name="261269808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261269808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261269808">(Nov 12 2021 at 15:40)</a>:</h4>
<p>Still thinking on the input/output distinction, but I am now wondering if PATs should be thought of as a feature of <code>impl/dyn Trait</code> not as a feature of the trait syntax in general. Because when you write</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">block_on</span><span class="o">&lt;</span><span class="n">F</span>: <span class="nc">Future</span><span class="o">&gt;</span><span class="p">(</span><span class="n">fut</span>: <span class="nc">F</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">F</span>::<span class="n">Output</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>It needs to be obvious that F outputs a particular "Output" type. But then the moment I write</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">print_on</span><span class="p">(</span><span class="n">fut</span>: <span class="nc">impl</span><span class="w"> </span><span class="n">Future</span><span class="o">&lt;</span><span class="k">impl</span><span class="w"> </span><span class="n">Display</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Technically the output types are still there, but because I am using <code>impl Trait</code> there is no actual way to access those type outputs. So anyone using impl/dyn is instead forced to _input_ constraints. They may be constraints on on those output types under the hood, but they are still being input by me the programmer right now. And I'm inputting them to the place where you usually input generic parameters (between the angle braces). IDK, might be a silly way of thinking about it since writting <code>F: Future&lt;Output=String&gt;</code> is mostly in the same boat.</p>



<a name="261271525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261271525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261271525">(Nov 12 2021 at 15:52)</a>:</h4>
<p>Trait&lt;_=Ty&gt; seems like a good way to simplify having to remember the associated type name while still having it be clearly an associated type.</p>



<a name="261271689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261271689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261271689">(Nov 12 2021 at 15:53)</a>:</h4>
<p>and if you need it as output, F::_ might work if there's just one associated type, which is the common case</p>



<a name="261272599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261272599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261272599">(Nov 12 2021 at 15:59)</a>:</h4>
<p>"And I'm inputting them to the place where you usually input generic parameters (between the angle braces)" - I wouldn't put too much weight on this, it is just somewhat arbitrary sugar, and I'm not sure it is the syntax I would choose if starting again today</p>



<a name="261272768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261272768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261272768">(Nov 12 2021 at 16:00)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222520">Sam Sartor</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261265518">said</a>:</p>
<blockquote>
<p>I was hoping maybe PATs could delay discussion of associated types until users get further into the world of custom traits and generics? But I can see what you mean about it potentially just feeling inconsistent at that point. I wonder if it is better or worse for PATs to be a rare exception for Future/lterator or a common shorthand for most core traits.</p>
</blockquote>
<p>I don't think this will, and even if it would I don't think that's necessarily a good idea. Sweeping the difference between <code>From&lt;T&gt;</code> and <code>Iterator&lt;T&gt;</code> under the rug is going to lead to a lot of confusion later. I'm a big fan of the <code>Iterator&lt;_ = T&gt;</code> syntax though, it only costs three characters over the proposed one and is much more clear</p>



<a name="261272795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261272795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261272795">(Nov 12 2021 at 16:00)</a>:</h4>
<p>(admittedly in the dyn case, it is sugar for something without any other surface syntax,)</p>



<a name="261273974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261273974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261273974">(Nov 12 2021 at 16:09)</a>:</h4>
<p>Thinking about it more, I think my complaint is better phrased like this: For teachability, I would consider a desirable goal to be that someone transitioning from beginner to advanced user of Rust not have to <em>unlearn</em> anything. This MCP seems in danger of violating that, where we are not just going to be sweeping the distinction between <code>Iterator&lt;T&gt;</code> and <code>From&lt;T&gt;</code> under the rug (which might even be fine), but we are liable to accidentally teach people that they are the same, which seems worse.</p>



<a name="261276086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261276086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261276086">(Nov 12 2021 at 16:24)</a>:</h4>
<p>I still think the positional syntax is conceptually justified for impl/dyn on traits a single AT, but it looks like I have an uphill battle there. I'd be will be willing to settle for <code>_ = T</code>. It is certainly shorter! I don't love that the additional characters are all symbols: it leaves a lot of the muddyness in place.</p>



<a name="261276392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261276392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261276392">(Nov 12 2021 at 16:26)</a>:</h4>
<p>Good point re: unlearning. I am not convinced that PATs violate that on the face, but I agree it is a serious hazard.</p>



<a name="261290536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261290536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261290536">(Nov 12 2021 at 18:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="256841">Nick Cameron</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261272599">said</a>:</p>
<blockquote>
<p>I wouldn't put too much weight on this, it is just somewhat arbitrary sugar, and I'm not sure it is the syntax I would choose if starting again today</p>
</blockquote>
<p>I've always thought about it as an arbitrary sugar for a type equality constraint like <code>where I::Item == i32</code>, but it doesn't seem like we'll allow clauses like that anytime in the near future, if ever. As a result I think just about any syntax would wind up saying "give the associated types as inputs", angle braces or no.</p>



<a name="261291778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261291778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261291778">(Nov 12 2021 at 18:23)</a>:</h4>
<p>And the more I think about it, the more I'm convinced that is a correct interpretation.</p>



<a name="261291931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261291931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261291931">(Nov 12 2021 at 18:24)</a>:</h4>
<p>Wait, I thought we did allow such where clauses (though not possible with dyn). Did I just imagine this?</p>



<a name="261292138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261292138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261292138">(Nov 12 2021 at 18:26)</a>:</h4>
<p>I thought they were available on nightly too, but it looks like no: <a href="https://github.com/rust-lang/rust/pull/87471">https://github.com/rust-lang/rust/pull/87471</a></p>



<a name="261292150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261292150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261292150">(Nov 12 2021 at 18:26)</a>:</h4>
<p>we allow <code>where I: Iterator&lt;Item = i32&gt;</code> which is basically the same I think</p>



<a name="261292224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261292224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261292224">(Nov 12 2021 at 18:26)</a>:</h4>
<p>Certainly if I have a type <code>struct MyType&lt;A&gt;</code> and an associated type <code>type B = Option&lt;A&gt;</code>, writing <code>MyType&lt;i32, B=Option&lt;i32&gt;&gt;</code> would be totally silly. There is no question that the parameter <code>A</code> is input and <code>B</code> is corresponding output.</p>



<a name="261292395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261292395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261292395">(Nov 12 2021 at 18:28)</a>:</h4>
<p>But I think <code>impl MyTrait&lt;A&gt;</code> or <code>dyn MyTrait&lt;A&gt;</code> don't have any specific output <code>B</code> in the same way, since each implementor of <code>MyTrait</code> might choose a different output type. So IMO it makes perfect since to treat <code>dyn MyTrait&lt;i32, B=Option&lt;i32&gt;&gt;</code> as having two inputs, which each constrain implementations in some way.</p>



<a name="261292578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261292578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261292578">(Nov 12 2021 at 18:29)</a>:</h4>
<p>One input parameter at the call site constrains an output type at the def site, which is weird. But it seems like a fair description of what is happening.</p>



<a name="261292984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261292984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261292984">(Nov 12 2021 at 18:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261292150">said</a>:</p>
<blockquote>
<p>we allow <code>where I: Iterator&lt;Item = i32&gt;</code> which is basically the same I think</p>
</blockquote>
<p>Maybe I'm playing games with words here. But rather than saying this is a alias for two where clauses, I'm trying to say it is a single clause produced by the type constraint constructor "Iterator&lt;Item = i32&gt;" where i32 is an input type.</p>



<a name="261293522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261293522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261293522">(Nov 12 2021 at 18:37)</a>:</h4>
<p>But please tell me if I'm going off the deep end.</p>



<a name="261293826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261293826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261293826">(Nov 12 2021 at 18:39)</a>:</h4>
<p><span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span> FWIW, for one of the problems you mentioned, I would solve that by making <code>impl Iterator&lt;T&gt; for ...</code> work. ;)</p>



<a name="261293840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261293840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261293840">(Nov 12 2021 at 18:39)</a>:</h4>
<p>I don't see why it shouldn't.</p>



<a name="261293919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261293919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261293919">(Nov 12 2021 at 18:40)</a>:</h4>
<p>I think the approach you mentioned, though, seems viable as well.</p>



<a name="261293976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261293976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261293976">(Nov 12 2021 at 18:40)</a>:</h4>
<p>Mapping from generic to associated.</p>



<a name="261294693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261294693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261294693">(Nov 12 2021 at 18:46)</a>:</h4>
<p>Note that even if <code>impl Iterator&lt;T&gt; for ...</code> works, it's still confusing in a bunch of other places.  For example, <code>impl Iterator&lt;&amp;T&gt; for ...</code> won't work, whereas <code>impl Add&lt;&amp;T&gt; for ...</code> <em>will</em>, because the distinction between input and output modes for generic arguments and associated types.</p>



<a name="261295045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261295045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261295045">(Nov 12 2021 at 18:50)</a>:</h4>
<p><code>Foo&lt;_ = T&gt;</code> seems like a semver hazard -- adding another associated type, even with a default, would make it ambiguous.</p>



<a name="261295600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261295600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261295600">(Nov 12 2021 at 18:54)</a>:</h4>
<p>you'd only be assigning the non-default type, and it could even warn if a second type were added</p>



<a name="261295645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261295645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261295645">(Nov 12 2021 at 18:55)</a>:</h4>
<p>adding a second non-default associated type is sv break anyway</p>



<a name="261311012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261311012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261311012">(Nov 12 2021 at 21:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261295045">said</a>:</p>
<blockquote>
<p><code>Foo&lt;_ = T&gt;</code> seems like a semver hazard -- adding another associated type, even with a default, would make it ambiguous.</p>
</blockquote>
<p>Wouldn't the same be true of the original positional associated types proposal?</p>



<a name="261312769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261312769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261312769">(Nov 12 2021 at 21:25)</a>:</h4>
<p>you could borrow the same positional aspect:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Example</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// type AddingHereIsBad;</span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Alpha</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="c1">// type AddingHereIsOk;</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261312922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261312922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261312922">(Nov 12 2021 at 21:26)</a>:</h4>
<p>There might be a way around this, but honestly I'm fine considering it a semvar hazard to add any new positional or associated types once one is positional.</p>



<a name="261312987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261312987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261312987">(Nov 12 2021 at 21:27)</a>:</h4>
<p>The user story here is pretty narrow in scope, mostly focusing on just a few core traits that people have to type a lot.</p>



<a name="261313850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261313850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261313850">(Nov 12 2021 at 21:35)</a>:</h4>
<p>Speaking of which, I am warming up to <span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span>'s version of this. I think it was edited  from when I first read it, but having the associated type explicitly spelled out in the definition line is nice. I do wonder if there is a way to reduce the grammar burden or otherwise get more bang for our buck out of a grammar change? But that getting into bikeshed color a bit.</p>



<a name="261320751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261320751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261320751">(Nov 12 2021 at 22:41)</a>:</h4>
<p>One key detail about an MCP: this is a proposal to solve a problem, not necessarily a commitment to a specific solution.</p>



<a name="261320798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261320798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261320798">(Nov 12 2021 at 22:42)</a>:</h4>
<p>So the syntax could change.</p>



<a name="261321846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261321846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261321846">(Nov 12 2021 at 22:55)</a>:</h4>
<p>I don't think my complaints are specifically about syntax, really.</p>
<p>The difference between generic types and associated types is important, that's why associated types were added in the first place &lt;<a href="https://rust-lang.github.io/rfcs/0195-associated-items.html#clearer-trait-matching">https://rust-lang.github.io/rfcs/0195-associated-items.html#clearer-trait-matching</a>&gt; and we don't just have <code>Add&lt;T, O&gt;</code> but <code>Add&lt;T, Output = O&gt;</code>.</p>
<p>It'd not obvious to me that "it may not be clear to incoming Rust programmers why" is a good reason to hide the difference <em>sometimes</em>, especially given Jake's comment.</p>
<p>I think that's especially the case if it's only for a few types and given we've accepted trait aliases as a thing.  If 90% of the terseness benefit can be gotten by putting <code>trait Fut&lt;T&gt; = Future&lt;Output = T&gt;;</code> in the futures crate prelude, it's not clear to me that it's worth a language feature.</p>
<p>(If <code>async fn</code> required mentioning <code>Future</code> I might feel differently, but it doesn't.  And similarly that implies that if we get generators, people won't have to write <code>-&gt; impl Iterator&lt;Output = T&gt;</code> for them either.)</p>



<a name="261322589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261322589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261322589">(Nov 12 2021 at 23:03)</a>:</h4>
<p>So, the <em>main</em> reason to hide it isn't for the benefit of new programmers, and I think it's worth doing even if it's just neutral for new programmers, because it's convenient.</p>



<a name="261322717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261322717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261322717">(Nov 12 2021 at 23:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125270">scottmcm</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261321846">said</a>:</p>
<blockquote>
<p>(If <code>async fn</code> required mentioning <code>Future</code> I might feel differently, but it doesn't.  And similarly that implies that if we get generators, people won't have to write <code>-&gt; impl Iterator&lt;Output = T&gt;</code> for them either.)</p>
</blockquote>
<p>That's actually exactly what motivated this proposal in the first place: a discussion about generators, in which we were talking about using the syntax <code>-&gt; impl Iterator&lt;Item = T&gt;</code>, and then thinking it'd be preferable to just write <code>-&gt; impl Iterator&lt;T&gt;</code>.</p>



<a name="261322773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261322773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261322773">(Nov 12 2021 at 23:05)</a>:</h4>
<p>(Also, I think you just demonstrated another reason to do this: people <em>really</em> don't care what the associated type is called, nor should they have to. The fact that <code>Iterator</code> calls it <code>Item</code>, not <code>Output</code>, is a fairly unimportant implementation detail.)</p>



<a name="261324408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261324408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261324408">(Nov 12 2021 at 23:25)</a>:</h4>
<p>I have seen a few new programmers stub their toes on <code>Future&lt;Output=T&gt;</code> long before needing deal with ATs directly. And optimistically asserted this could help new users when writing up the MCP. But I think the bar is just that we don't force anyone to unlearn misconceptions more than they already have to. I really just want to stop having to remember/type out AT names in these common cases.</p>



<a name="261324626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261324626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261324626">(Nov 12 2021 at 23:28)</a>:</h4>
<p>(running this by one friend today who had never seen <code>impl Iterator&lt;Item=T&gt;</code> syntax before, he guessed that "it iterates through a collection of i32 collections")</p>



<a name="261366675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261366675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261366675">(Nov 13 2021 at 15:48)</a>:</h4>
<blockquote>
<p>people really don't care what the associated type is called</p>
</blockquote>
<p>That's actually all that interests me in this proposal, and why the <code>&lt;_ = i32&gt;</code> straw man alternative came to mind.</p>



<a name="261366689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261366689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261366689">(Nov 13 2021 at 15:49)</a>:</h4>
<p>I also think that the proposed syntax of positional associated types doesn't pass the "code is written a few times, and read many times" test.</p>



<a name="261368441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261368441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261368441">(Nov 13 2021 at 16:28)</a>:</h4>
<p>I see what you mean, but I think it actually improves readability for iterators and futures specifically. The associated type name just adds noise to those.</p>



<a name="261369402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261369402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261369402">(Nov 13 2021 at 16:51)</a>:</h4>
<blockquote>
<p>improves readability for iterators and futures specifically</p>
</blockquote>
<p>This is probably technically true, but the particular reason here is relevant. Iterator and Future are traits that people write <em>all the time</em> and the only reason that the fact that their <code>T</code>s are associated and not generic is noise right now is because of their popularity. If you'd like to make an argument that we should special-case these two, I'd be sympathetic, but imo the reason that this might work for Iterator/Future is entirely inapplicable to the rest of the ecosystem</p>



<a name="261369482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261369482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261369482">(Nov 13 2021 at 16:53)</a>:</h4>
<p>Honestly, this all started with me and Josh wanting to special case the two (and probably also Stream once it is stable).</p>



<a name="261369488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261369488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261369488">(Nov 13 2021 at 16:53)</a>:</h4>
<p>And I'd still be fine with that if it came to it.</p>



<a name="261369494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261369494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261369494">(Nov 13 2021 at 16:53)</a>:</h4>
<p>But I wanted to at least try for a more general solution.</p>



<a name="261369867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261369867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261369867">(Nov 13 2021 at 17:01)</a>:</h4>
<p>I definitely think that's possible, but imo this isn't the one. I know <span class="user-mention" data-user-id="116155">@Jake Goulding</span> has said that <code>&lt;_ = i32&gt;</code> is not meant to be too serious a suggestion, but I genuinely like it</p>



<a name="261369922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261369922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261369922">(Nov 13 2021 at 17:02)</a>:</h4>
<p>I'm willing to settle for <code>&lt;_ = T&gt;</code> given that seems to have more support so far.</p>



<a name="261370118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261370118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261370118">(Nov 13 2021 at 17:07)</a>:</h4>
<p>But my option is still that: in the context of <code>impl/dyn Trait</code> there just isn't a meaningful difference between default type params and associated types, and so the <code>=</code> doesn't really add anything.</p>



<a name="261385572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261385572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261385572">(Nov 13 2021 at 23:13)</a>:</h4>
<p>Pondering: the <code>impl</code> is nearly as noisy as the <code>Item=</code>.</p>
<p>What if we could do <code>bikeshed Iter&lt;T&gt; = impl Iterator&lt;Item = T&gt;;</code>?  And then write code like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">it</span>: <span class="nc">Iter</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Iter</span><span class="o">&lt;</span><span class="kt">i64</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">it</span><span class="p">.</span><span class="n">map</span><span class="p">(</span><span class="nb">Into</span>::<span class="n">into</span><span class="p">)</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261385743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261385743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261385743">(Nov 13 2021 at 23:17)</a>:</h4>
<p>which kind of <code>impl Trait</code> does <code>it: Iter&lt;i32&gt;</code> correspond to here</p>



<a name="261385795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261385795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261385795">(Nov 13 2021 at 23:18)</a>:</h4>
<p>does the kind of <code>impl Trait</code> just depend on where we use <code>Iter</code></p>



<a name="261385834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261385834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261385834">(Nov 13 2021 at 23:19)</a>:</h4>
<p><code>macro Iter($t:ty) { impl Iterator&lt;Item = $t&gt; }</code>?</p>



<a name="261388018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261388018" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261388018">(Nov 14 2021 at 00:14)</a>:</h4>
<p><span class="user-mention" data-user-id="125270">@scottmcm</span> I don't mind the <code>impl</code> keyword personally, since I think it is important to notice when a function is generic over a trait. But I also just think that words add less noise than symbols.</p>



<a name="261388170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261388170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261388170">(Nov 14 2021 at 00:18)</a>:</h4>
<p>Interesting idea to write  <code>fn bar() -&gt; Iter!&lt;i32&gt;</code>. I like that it could potentially help with lifetime elision by adding a <code> + '_</code>. But something feels a little icky about it that I can't put my finger on yet.</p>



<a name="261393405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261393405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261393405">(Nov 14 2021 at 02:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="326176">Boxy [she/her]</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Positional.20Associated.20Types.20lang-team.23126/near/261385795">said</a>:</p>
<blockquote>
<p>does the kind of <code>impl Trait</code> just depend on where we use <code>Iter</code></p>
</blockquote>
<p>I guess?  This is not an idea thought about for a long time before posting, so it might be terrible :P</p>



<a name="261393487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261393487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261393487">(Nov 14 2021 at 02:34)</a>:</h4>
<p>fwiw I'd have expected <code>type Foo = impl Trait</code> to work the way you're describing <code>bikeshed</code> then</p>



<a name="261393492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261393492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Boxy [she/her] <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261393492">(Nov 14 2021 at 02:34)</a>:</h4>
<p>(it of course, does not behave that way, so oh well)</p>



<a name="261413967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261413967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261413967">(Nov 14 2021 at 12:05)</a>:</h4>
<p>Years ago, the plan for impl Trait was to drop the impl once we required dyn for trait objects, which we now do, so perhaps we could just do that rather than permit impl in aliases? Personally I’d prefer to do neither since I don’t mind the impl keyword, but I know I’m often on the wrong side of these discussion in the long run 😀</p>



<a name="261414997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261414997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261414997">(Nov 14 2021 at 12:31)</a>:</h4>
<p>The original RFC for <code>impl Trait</code> mentioned the possibility for <code>some MyTrait</code> and <code>any MyTrait</code> differenciating syntaxes to distinguish between the universal and existential aspects. As time goes by, I am more and more convinced this is a useful distinction to mark syntactically, not only teaching-wise, but also to allow for extra expressibility of the language:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">type</span> <span class="nc">Foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">some</span><span class="w"> </span><span class="n">MyTrait</span><span class="p">;</span><span class="w"> </span><span class="c1">// current existential semantics</span>
<span class="k">type</span> <span class="nc">Iter</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">any</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="n">Item</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="c1">// to handle the suggestion in this thread.</span>
</code></pre></div>
<p>Out-of-topic aside: it would also incidentally allow for existential input types, which would itself allow for the following pattern:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">returns_unboxed_slice</span><span class="p">(</span><span class="n">slot</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Slot</span><span class="o">&lt;</span><span class="n">some</span><span class="w"> </span><span class="nb">Sized</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">own</span><span class="w"> </span><span class="p">[</span><span class="kt">u8</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">slot</span><span class="p">.</span><span class="n">insert</span><span class="p">([</span><span class="mi">42</span><span class="p">,</span><span class="w"> </span><span class="mi">27</span><span class="p">])</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">returns_unboxed_trait_obj</span><span class="p">(</span><span class="n">slot</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">Slot</span><span class="o">&lt;</span><span class="n">some</span><span class="w"> </span><span class="nb">Sized</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kp">&amp;</span><span class="nc">own</span><span class="w"> </span><span class="nb">FnOnce</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">not_copy</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">String</span>::<span class="n">new</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="n">slot</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="o">||</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nb">drop</span><span class="p">(</span><span class="n">not_copy</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261703545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261703545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261703545">(Nov 16 2021 at 20:39)</a>:</h4>
<p>What do people think in general of syntax like this?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="nb">Iterator</span><span class="o">&lt;</span><span class="bp">Self</span>::<span class="n">Item</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261703594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261703594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261703594">(Nov 16 2021 at 20:39)</a>:</h4>
<p>(building on what <span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span>  is doing)</p>



<a name="261703812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261703812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261703812">(Nov 16 2021 at 20:41)</a>:</h4>
<p>I'm not sure how I feel about it indicate the ability to do stuff like </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">MyTrait</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261703854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261703854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261703854">(Nov 16 2021 at 20:41)</a>:</h4>
<p>Which I can't imagine any sane use-case for</p>



<a name="261704591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261704591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261704591">(Nov 16 2021 at 20:47)</a>:</h4>
<p>Hmmm, having the positional-ness encoded into the definition line would be best. But looking at it now, I think I'd prefer any of <code>_ = T</code>, trait aliases, or <code>#[positional]</code> more the version of that I wrote above.</p>



<a name="261717224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261717224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261717224">(Nov 16 2021 at 22:33)</a>:</h4>
<p>I personally would be entirely fine with a syntax like that at the trait declaration, in order to allow the simplified syntax at usage sites.</p>



<a name="261717811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/261717811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#261717811">(Nov 16 2021 at 22:38)</a>:</h4>
<p>I think this should be purely a sugar for the use site, I wouldn’t want to introduce a new class of associated types</p>



<a name="266281757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/266281757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#266281757">(Dec 28 2021 at 18:44)</a>:</h4>
<p>Okay, I finally added the comment that I promised long ago that summarizes the concerns raised at both lang team meeting and on this zulip thread. (This zulip thread was pretty clutch in helping me make sense of the lang team notes now.): <a href="https://github.com/rust-lang/lang-team/issues/126#issuecomment-1002233625">https://github.com/rust-lang/lang-team/issues/126#issuecomment-1002233625</a></p>



<a name="266288786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/266288786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#266288786">(Dec 28 2021 at 20:13)</a>:</h4>
<p>10/10 summary, thanks!</p>



<a name="266294710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/266294710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#266294710">(Dec 28 2021 at 21:39)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> Thanks for the summary!</p>



<a name="266294725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/266294725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#266294725">(Dec 28 2021 at 21:39)</a>:</h4>
<p>Shouldn't the mentions of <code>-&gt; Future&lt;...&gt;</code> be <code>-&gt; impl Future&lt;...&gt;</code>?</p>



<a name="266294749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/266294749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#266294749">(Dec 28 2021 at 21:39)</a>:</h4>
<p>oh probably. :)</p>



<a name="266294805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Positional%20Associated%20Types%20lang-team%23126/near/266294805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Positional.20Associated.20Types.20lang-team.23126.html#266294805">(Dec 28 2021 at 21:40)</a>:</h4>
<p>(fixed)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Support platforms with size_t != uintptr_t lang-team#125 · t-lang/major changes · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/index.html">t-lang/major changes</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html">Support platforms with size_t != uintptr_t lang-team#125</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259426954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259426954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259426954">(Oct 28 2021 at 17:51)</a>:</h4>
<p>A new proposal has been announced: <a href="https://github.com/rust-lang/lang-team/issues/125">Support platforms with size_t != uintptr_t #125</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>



<a name="259427815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259427815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259427815">(Oct 28 2021 at 17:57)</a>:</h4>
<p>Neither of the proposed solutions involve a new core type, which seems unfortunate.</p>



<a name="259428024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259428024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259428024">(Oct 28 2021 at 17:58)</a>:</h4>
<p>or maybe it could be said that <em>both</em> of the solutions involve a new core type and we're just picking which usize is and then either uptr or uindex is the one that usize isn't.</p>



<a name="259428334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259428334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259428334">(Oct 28 2021 at 18:00)</a>:</h4>
<p>Yeah. The intent is that it can be dealt with when there's a more clear idea of what way to progress, whether we get a new core language type or a <code>c_size_t</code> in either std::os:raw or even core::ffi (both of which are T-libs domain I believe).</p>



<a name="259435556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259435556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259435556">(Oct 28 2021 at 18:54)</a>:</h4>
<p>if we want to handle this properly, and they're really different sizes, then it probably shouldn't be just a C thing. rust in general would need to be much more aware of the difference, including the Index trait and such.</p>



<a name="259444422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259444422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259444422">(Oct 28 2021 at 20:03)</a>:</h4>
<p>Yeah, <em>if</em> we want to do this (which I'm not yet sure of), I do think we need a new type <code>uptr</code>.</p>



<a name="259445058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445058">(Oct 28 2021 at 20:08)</a>:</h4>
<p>This would be a massive, wide-sweeping change down either path, though.</p>



<a name="259445120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445120">(Oct 28 2021 at 20:09)</a>:</h4>
<p>Either everyone using <code>usize</code> as <code>size_t</code> needs to change their code, or everyone using <code>usize</code> as "integer big enough to hold and round-trip a pointer value" needs to change their code, or we declare the two equal and live with not supporting platforms that do otherwise.</p>



<a name="259445135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445135">(Oct 28 2021 at 20:09)</a>:</h4>
<p>None of those is a desirable outcome.</p>



<a name="259445225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445225">(Oct 28 2021 at 20:10)</a>:</h4>
<p>I personally feel that we should <em>not</em> have a thing named <code>usize</code> be something other than <code>size_t</code>; that's going to be incredibly confusing.</p>



<a name="259445233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445233" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445233">(Oct 28 2021 at 20:10)</a>:</h4>
<p>you don't even need <code>usize as size_t</code> now, because it's a direct type alias</p>



<a name="259445274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445274">(Oct 28 2021 at 20:10)</a>:</h4>
<p>Having <code>usize</code> be <code>size_t</code> and <code>uptr</code> be <code>uintptr_t</code> is at least understandable, though disruptive.</p>



<a name="259445345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259445345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259445345">(Oct 28 2021 at 20:11)</a>:</h4>
<p>Having <code>usize</code> be <code>uintptr_t</code> and something <em>else</em> be <code>size_t</code> seems deeply confusing and a source of many, many errors.</p>



<a name="259446161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259446161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259446161">(Oct 28 2021 at 20:17)</a>:</h4>
<blockquote>
<p>Having usize be uintptr_t and something else be size_t seems deeply confusing and a source of many, many errors.</p>
</blockquote>
<p>Maybe, but we've also promised (in RFCs and in other text) that <code>usize</code> was large enough to roundtrip a pointer. Going back on that promise really sucks IMO.</p>



<a name="259446266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259446266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259446266">(Oct 28 2021 at 20:18)</a>:</h4>
<p>Yeah. I mentioned that in the MCP and in the original IRLO pre-rfc. rfc 544 says explicitly it's the pointer-sized type.</p>



<a name="259446823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259446823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259446823">(Oct 28 2021 at 20:22)</a>:</h4>
<p>uindex/iindex ?</p>



<a name="259447189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259447189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259447189">(Oct 28 2021 at 20:25)</a>:</h4>
<p>Maybe those would be good names for <code>size_t</code> <code>ptrdiff_t</code>. However, that doesn't solve one of the larger issues with not making <code>usize</code>=<code>size_t</code>, which is the amount of code that relies on the type being equivalent to <code>size_t</code>, that's going to be broken, and isn't going to be noisly broken either. That was actually one of the main reasons that made me reconsider making <code>usize</code>=<code>size_t</code> and reversing the guarantee from RFC 544: in that case, at least the breakage is loud and obnoxious (though only with a lint until a new edition) instead of completely silent until such code is compiled on one of these platforms.</p>



<a name="259447760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259447760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259447760">(Oct 28 2021 at 20:30)</a>:</h4>
<p>The fact that they're named <code>size</code> but have the pointer semantics was even called out in the original RFC — <a href="https://github.com/nox/rust-rfcs/blob/master/text/0544-rename-int-uint.md#drawbacks-of-isizeusize">https://github.com/nox/rust-rfcs/blob/master/text/0544-rename-int-uint.md#drawbacks-of-isizeusize</a></p>



<a name="259447785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259447785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259447785">(Oct 28 2021 at 20:31)</a>:</h4>
<p>Yeah, indeed.</p>



<a name="259461631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259461631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259461631">(Oct 28 2021 at 22:42)</a>:</h4>
<p>… are there any platforms where <code>sizeof(size_t)</code> must be greater than <code>sizeof(uintptr_t)</code>?</p>



<a name="259461717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259461717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259461717">(Oct 28 2021 at 22:43)</a>:</h4>
<p>I don't necessarily see a conflict either way though, <code>usize</code> _could_ be <code>max(sizeof(size_t), sizeof(uintptr_t))</code>. That way it can both be suitable for indexing and for pointer roundtrips.</p>



<a name="259461831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259461831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259461831">(Oct 28 2021 at 22:44)</a>:</h4>
<p>then it's just not suitable for folks who <em>assume</em> <code>usize</code> is equal to those in FFI</p>



<a name="259461882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259461882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259461882">(Oct 28 2021 at 22:45)</a>:</h4>
<p>well, if both of them are different, <code>usize</code> can't possibly be equal to both, can it?</p>



<a name="259461904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259461904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259461904">(Oct 28 2021 at 22:45)</a>:</h4>
<p>no it can't</p>



<a name="259462053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259462053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259462053">(Oct 28 2021 at 22:46)</a>:</h4>
<p>So the assumption can't hold either way (well, for code that purports to be portable, anyway)</p>



<a name="259462136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259462136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259462136">(Oct 28 2021 at 22:47)</a>:</h4>
<p>it's a bad assumption, but <code>bindgen --size_t-is-usize</code> is a thing</p>



<a name="259462350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259462350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259462350">(Oct 28 2021 at 22:50)</a>:</h4>
<p>and <code>cbindgen</code> hardcodes a mapping for <code>usize =&gt; uintptr_t</code><br>
<a href="https://github.com/eqrion/cbindgen/blob/master/docs.md#std-types">https://github.com/eqrion/cbindgen/blob/master/docs.md#std-types</a></p>



<a name="259462751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259462751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259462751">(Oct 28 2021 at 22:54)</a>:</h4>
<p>hmm, and also a config option:</p>
<div class="codehilite"><pre><span></span><code># If this option is true `usize` and `isize` will be converted into `size_t` and `ptrdiff_t`
# instead of `uintptr_t` and `intptr_t` respectively.
usize_is_size_t = true
</code></pre></div>



<a name="259462871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259462871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259462871">(Oct 28 2021 at 22:55)</a>:</h4>
<p>Yes, this is not the only poor decision made by <code>cbindgen</code>; it focuses on convenience over correctness/pedantry at times.</p>



<a name="259462958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259462958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259462958">(Oct 28 2021 at 22:56)</a>:</h4>
<p>I don't see it as a particularly huge problem though; its something <code>cbindgen</code> could fix by releasing more versions and yanking some others.</p>



<a name="259463050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463050">(Oct 28 2021 at 22:57)</a>:</h4>
<p>the pedantic solution would be that <code>usize</code> and <code>isize</code> should not be used in FFI at all, right?</p>



<a name="259463131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463131">(Oct 28 2021 at 22:58)</a>:</h4>
<p>Yeah, except _maybe_ through type aliases?</p>



<a name="259463144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463144">(Oct 28 2021 at 22:58)</a>:</h4>
<p>(well, or in unportable code)</p>



<a name="259463173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463173">(Oct 28 2021 at 22:59)</a>:</h4>
<p>(Option 3 remains "usize is the size of size_t and of a pointer, which are required to be equal".)</p>



<a name="259463206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463206">(Oct 28 2021 at 22:59)</a>:</h4>
<p>If making usize not size_t is too painful, and making usize not round-trip a pointer is too painful, then that'd be what we're left with.</p>



<a name="259463210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463210">(Oct 28 2021 at 22:59)</a>:</h4>
<p>I also want to say that what C code I have read in the past, I haven't seen much of it that used <code>*size_t</code> and <code>*intptr_t</code> correctly either, so I see a lot of value in not having 2 types for this.</p>



<a name="259463276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463276">(Oct 28 2021 at 23:00)</a>:</h4>
<p>I've honestly never seen production code that used <code>uintptr_t</code> for <em>anything</em>.</p>



<a name="259463374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463374">(Oct 28 2021 at 23:00)</a>:</h4>
<p>All the systems I've seen that assumed there was a pointer-sized integer spelled it <code>unsigned long</code> (which is emphatically not portable, but works widely if you're not on Windows).</p>



<a name="259463434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463434">(Oct 28 2021 at 23:01)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> that Option 3 means saying "no" to the <code>$subject</code>, we can't support such platforms</p>



<a name="259463436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463436">(Oct 28 2021 at 23:01)</a>:</h4>
<p>but that is an option</p>



<a name="259463522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463522">(Oct 28 2021 at 23:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="138448">cuviper</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125/near/259463434">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> that Option 3 means saying "no" to the <code>$subject</code>, we can't support such platforms</p>
</blockquote>
<p>I realize that, yes.</p>



<a name="259463532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463532">(Oct 28 2021 at 23:02)</a>:</h4>
<p>Or rather, we can't support such platforms without some additional compromises.</p>



<a name="259463590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463590">(Oct 28 2021 at 23:03)</a>:</h4>
<p>For instance, using a less efficient size_t on 65c816.</p>



<a name="259463615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463615">(Oct 28 2021 at 23:03)</a>:</h4>
<p><em>we</em> don't get to choose <code>size_t</code></p>



<a name="259463874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463874">(Oct 28 2021 at 23:06)</a>:</h4>
<p>There isn't one single established standard ABI for that platform; the proposed Rust target is setting the sizes.</p>



<a name="259463885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463885">(Oct 28 2021 at 23:06)</a>:</h4>
<p>Last it heard, it sounded like it could set them differently.</p>



<a name="259463890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259463890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259463890">(Oct 28 2021 at 23:06)</a>:</h4>
<p>Yeah, this would implicate the C abi.</p>



<a name="259464002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259464002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259464002">(Oct 28 2021 at 23:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125/near/259463276">said</a>:</p>
<blockquote>
<p>I've honestly never seen production code that used <code>uintptr_t</code> for <em>anything</em>.</p>
</blockquote>
<p>it's... pretty common in my experience <a href="https://searchfox.org/mozilla-central/search?q=uintptr_t">https://searchfox.org/mozilla-central/search?q=uintptr_t</a></p>



<a name="259464072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259464072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259464072">(Oct 28 2021 at 23:09)</a>:</h4>
<p>i think CHERI is a bigger concern than w65, tbf, and it can't choose the sizes</p>



<a name="259464607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259464607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259464607">(Oct 28 2021 at 23:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125/near/259463885">said</a>:</p>
<blockquote>
<p>Last it heard, it sounded like it could set them differently.</p>
</blockquote>
<p>The abi I'm working on can in theory be changed, right up until the completion of the gcc fork. However, the question would end up being how that impacts the ability to generate reasonable code. integers of size&gt;2 have less than optimal abi when the maximum value in most cases for <code>size_t</code> is still 64k. The benchmark I've been using is cycle-counting the <code>mem*</code> functions.</p>



<a name="259469467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259469467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259469467">(Oct 29 2021 at 00:20)</a>:</h4>
<p><span class="user-mention" data-user-id="209168">@Thom Chiovoloni</span> FWIW, I wasn't doubting it was used; just noting that I hadn't seen it in any of the codebases I had encountered.</p>



<a name="259469521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/259469521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#259469521">(Oct 29 2021 at 00:21)</a>:</h4>
<p>And yes, I'm concerned about CHERI as well. I'm wondering what userspace and things like mmap look like on such a platform.</p>



<a name="261579779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/261579779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#261579779">(Nov 16 2021 at 00:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209168">Thom Chiovoloni</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125/near/259446161">said</a>:</p>
<blockquote>
<blockquote>
<p>Having usize be uintptr_t and something else be size_t seems deeply confusing and a source of many, many errors.</p>
</blockquote>
<p>Maybe, but we've also promised (in RFCs and in other text) that <code>usize</code> was large enough to roundtrip a pointer. Going back on that promise really sucks IMO.</p>
</blockquote>
<p>I think this is an instance where having future programmers go "why did they write this in such a confusing way? it's impossible to learn" would really suck. I'm not saying for sure that breaking our past commitments is acceptable here either, but if I had to pick one, it strikes me as by far the less bad of the two options.</p>



<a name="261580461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/261580461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#261580461">(Nov 16 2021 at 00:15)</a>:</h4>
<p>Breaking past commitments means peoples code can break in a rustc update, which we've been very careful to avoid because it strands people on old versions.</p>



<a name="261580532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/261580532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#261580532">(Nov 16 2021 at 00:16)</a>:</h4>
<p>In general, rust strives to have a good story around backwards compatibility, so breaking it here would be very unfortunate.</p>



<a name="261580619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/261580619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#261580619">(Nov 16 2021 at 00:17)</a>:</h4>
<p>The other direction means that as new targets that don't support this exist, then yeah, perhaps $lib doesn't support that target out of the box, but people on that target are likely going to be used to that at first, since many C libraries will be in that camp too.</p>



<a name="261585504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/261585504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#261585504">(Nov 16 2021 at 01:12)</a>:</h4>
<p>Yeah, the consideration isn't "Which change isn't breaking" it's "what change is the least breaking, and how can we do it the least problematically."</p>



<a name="261624027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/243200-t-lang/major%20changes/topic/Support%20platforms%20with%20size_t%20%21%3D%20uintptr_t%20lang-team%23125/near/261624027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/243200-t-lang/major-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125.html#261624027">(Nov 16 2021 at 10:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209168">Thom Chiovoloni</span> <a href="#narrow/stream/243200-t-lang.2Fmajor-changes/topic/Support.20platforms.20with.20size_t.20!.3D.20uintptr_t.20lang-team.23125/near/261580461">said</a>:</p>
<blockquote>
<p>Breaking past commitments means peoples code can break in a rustc update, which we've been very careful to avoid because it strands people on old versions.</p>
</blockquote>
<p>Well, if I understand correctly, only on new platforms. Which is not great, but I'd argue infinitely better than it breaking on existing platforms. Am I missing something?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
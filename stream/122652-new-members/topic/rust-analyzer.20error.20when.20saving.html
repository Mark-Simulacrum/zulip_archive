<html>
<head><meta charset="utf-8"><title>rust-analyzer error when saving · new members · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html">rust-analyzer error when saving</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269028223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269028223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269028223">(Jan 23 2022 at 17:11)</a>:</h4>
<p>Hey, when I open the whole compiler in VSCode like that:<br>
<a href="/user_uploads/4715/CX5yOUXEAtf5G9SHH3FgxT6V/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/CX5yOUXEAtf5G9SHH3FgxT6V/image.png" title="image.png"><img src="/user_uploads/4715/CX5yOUXEAtf5G9SHH3FgxT6V/image.png"></a></div><p>I get the following error, as soon as I save a change:</p>
<div class="codehilite"><pre><span></span><code>cargo check failed: Os { code: 193, kind: Uncategorized, message: &quot;%1 is not a valid Win32 application.&quot; }:
</code></pre></div>
<p>Any idea why I am getting this problem?</p>
<p>My config looks like that:<br>
<a href="/user_uploads/4715/Fp-6w6sKbDsJ_O_tY6cb6p-p/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/Fp-6w6sKbDsJ_O_tY6cb6p-p/image.png" title="image.png"><img src="/user_uploads/4715/Fp-6w6sKbDsJ_O_tY6cb6p-p/image.png"></a></div>



<a name="269030414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269030414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269030414">(Jan 23 2022 at 17:57)</a>:</h4>
<p>Does it work if you add <code>py</code> as command before <code>./x.py</code>?</p>



<a name="269031863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269031863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269031863">(Jan 23 2022 at 18:24)</a>:</h4>
<p>You mean like that?</p>
<div class="codehilite"><pre><span></span><code>&quot;rust-analyzer.checkOnSave.overrideCommand&quot;: [
        &quot;py ./x.py&quot;,
        &quot;check&quot;,
        &quot;--json-output&quot;
    ],
</code></pre></div>
<p>this leads to the following error: <br>
<code>cargo check failed: Os { code: 2, kind: NotFound, message: "The system cannot find the file specified." }:</code></p>



<a name="269033331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269033331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269033331">(Jan 23 2022 at 18:58)</a>:</h4>
<p>I mean</p>
<div class="codehilite" data-code-language="JSON"><pre><span></span><code><span class="nt">"rust-analyzer.checkOnSave.overrideCommand"</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">"py"</span><span class="p">,</span>
        <span class="s2">" ./x.py"</span><span class="p">,</span>
        <span class="s2">"check"</span><span class="p">,</span>
        <span class="s2">"--json-output"</span>
    <span class="p">],</span>
</code></pre></div>



<a name="269033959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269033959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269033959">(Jan 23 2022 at 19:11)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="s">"rust-analyzer.checkOnSave.overrideCommand"</span>: <span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s">"py"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">" ./x.py"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">"check"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">"--json-output"</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
</code></pre></div>
<p>This will still lead to: </p>
<div class="codehilite"><pre><span></span><code>cargo check failed: Os { code: 2, kind: NotFound, message: &quot;The system cannot find the file specified.&quot; }:
</code></pre></div>
<p>I also tried to do this:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="s">"rust-analyzer.checkOnSave.overrideCommand"</span>: <span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s">"py"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">" ./x.py"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">" check"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">" --json-output"</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
</code></pre></div>
<p>But it did not solve anything</p>



<a name="269049177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269049177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269049177">(Jan 24 2022 at 00:52)</a>:</h4>
<p>make sure to use whatever python is named for you, on windows its usually just <code>python</code>, not <code>py</code></p>



<a name="269087881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269087881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269087881">(Jan 24 2022 at 10:54)</a>:</h4>
<p><span class="user-mention" data-user-id="300586">@Lukas Wirth</span> </p>
<p>I think we are getting there. Indeed it is named python.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="s">"rust-analyzer.checkOnSave.overrideCommand"</span>: <span class="p">[</span><span class="w"></span>
<span class="w">        </span><span class="s">"python"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">" ./x.py"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">"check"</span><span class="p">,</span><span class="w"></span>
<span class="w">        </span><span class="s">"--json-output"</span><span class="w"></span>
<span class="w">    </span><span class="p">],</span><span class="w"></span>
</code></pre></div>
<p>Now I am getting the following error:<br>
<code>cargo check failed: Cargo watcher failed, the command produced no valid metadata (exit code: ExitStatus(ExitStatus(2)))</code></p>



<a name="269088876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269088876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lukas Wirth <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269088876">(Jan 24 2022 at 11:02)</a>:</h4>
<p>what do you get when running that manually?</p>



<a name="269090430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269090430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269090430">(Jan 24 2022 at 11:15)</a>:</h4>
<p>Weird, executing <code>C:\rust&gt;python ./x.py check</code> and <code>C:\rust&gt;python ./x.py check --json-output</code> via terminal succeed.</p>



<a name="269090581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269090581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269090581">(Jan 24 2022 at 11:17)</a>:</h4>
<p><a href="/user_uploads/4715/RsxktIIZmndSdKS1M3e40KJW/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/RsxktIIZmndSdKS1M3e40KJW/image.png" title="image.png"><img src="/user_uploads/4715/RsxktIIZmndSdKS1M3e40KJW/image.png"></a></div><p>And with additional json flag:</p>
<p><a href="/user_uploads/4715/XfavwbDOIH1oE9qiPdYMDbtn/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/XfavwbDOIH1oE9qiPdYMDbtn/image.png" title="image.png"><img src="/user_uploads/4715/XfavwbDOIH1oE9qiPdYMDbtn/image.png"></a></div>



<a name="269105864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/rust-analyzer%20error%20when%20saving/near/269105864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/rust-analyzer.20error.20when.20saving.html#269105864">(Jan 24 2022 at 13:38)</a>:</h4>
<p>Reinstalling VSCode fixed the issue.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
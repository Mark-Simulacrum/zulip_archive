<html>
<head><meta charset="utf-8"><title>Diverged branches on git · new members · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html">Diverged branches on git</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269257989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269257989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269257989">(Jan 25 2022 at 13:44)</a>:</h4>
<p>Hello, any idea how I can fix the following?</p>
<div class="codehilite"><pre><span></span><code>On branch master
Your branch and &#39;origin/master&#39; have diverged,
and have 45 and 6 different commits each, respectively.
  (use &quot;git pull&quot; to merge the remote branch into yours)

nothing to commit, working tree clean
</code></pre></div>
<p>I am a bit unsure because of Rusts no-merge policy.</p>
<div class="codehilite"><pre><span></span><code>git pull upstream master
</code></pre></div>
<p>Will result in:</p>
<div class="codehilite" data-code-language="from"><pre><span></span><code> * branch                    master     -&gt; FETCH_HEAD
Already up to date.
</code></pre></div>
<p><code>git pull</code></p>
<p>Ends with this error:</p>
<div class="codehilite"><pre><span></span><code>fatal: Not possible to fast-forward, aborting.
</code></pre></div>



<a name="269258317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269258317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Urgau <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269258317">(Jan 25 2022 at 13:45)</a>:</h4>
<p>I often do this <code>git pull --rebase upstream master</code></p>



<a name="269258364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269258364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269258364">(Jan 25 2022 at 13:46)</a>:</h4>
<p>You could try <code>git rebase upstream/master</code>.</p>



<a name="269258531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269258531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269258531">(Jan 25 2022 at 13:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/122652-new-members/topic/Diverged.20branches.20on.20git/near/269258364">said</a>:</p>
<blockquote>
<p>You could try <code>git rebase upstream/master</code>.</p>
</blockquote>
<p>I tried that already, it always leads to:</p>
<div class="codehilite"><pre><span></span><code>Current branch master is up to date.
</code></pre></div>
<p>But with </p>
<div class="codehilite"><pre><span></span><code>git status
</code></pre></div>
<p>I will still get:</p>
<div class="codehilite"><pre><span></span><code>On branch master
Your branch and &#39;origin/master&#39; have diverged,
and have 45 and 6 different commits each, respectively.
  (use &quot;git pull&quot; to merge the remote branch into yours)

nothing to commit, working tree clean
</code></pre></div>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span><br>
The same goes for <span class="user-mention" data-user-id="327095">@Urgau</span></p>



<a name="269258654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269258654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269258654">(Jan 25 2022 at 13:48)</a>:</h4>
<p>Is <code>origin</code> your own fork?</p>



<a name="269258718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269258718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269258718">(Jan 25 2022 at 13:49)</a>:</h4>
<p><a href="/user_uploads/4715/ihp_IZnKLyhGNIxIhvYAAXsh/image.png">image.png</a> <br>
Yes, indeed.</p>
<div class="message_inline_image"><a href="/user_uploads/4715/ihp_IZnKLyhGNIxIhvYAAXsh/image.png" title="image.png"><img src="/user_uploads/4715/ihp_IZnKLyhGNIxIhvYAAXsh/image.png"></a></div>



<a name="269258811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269258811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269258811">(Jan 25 2022 at 13:50)</a>:</h4>
<p>After a rebase you need to use <code>git push --force-with-lease</code> to push the changes to your fork.</p>



<a name="269259199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269259199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269259199">(Jan 25 2022 at 13:53)</a>:</h4>
<p>After <code>git rebase upstream/master</code> I used <code>git push --force</code> .</p>
<p>I have two branches on my fork, master and the one for the issue. Both are equal now. <br>
I was trying to solve the problem, that I included a merge in my PR. </p>
<p>Should I know still use:</p>
<p><code>git checkout master</code><br>
<code>git push --force-with-lease</code>?</p>



<a name="269259294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269259294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269259294">(Jan 25 2022 at 13:54)</a>:</h4>
<p>I don't think so.</p>



<a name="269259346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269259346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269259346">(Jan 25 2022 at 13:54)</a>:</h4>
<p>Which PR is it by the way?</p>



<a name="269259388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269259388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269259388">(Jan 25 2022 at 13:55)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/93283">https://github.com/rust-lang/rust/pull/93283</a> this one.</p>
<p>I accidentally merged a commit at the beginning, and now I struggle to rebase. I tried to follow the guide, but now my master branch has diverged.</p>



<a name="269259802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269259802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269259802">(Jan 25 2022 at 13:58)</a>:</h4>
<p>If you do <code>git rebase -i upstream/master</code> does it list the merge commit?</p>



<a name="269259946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269259946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269259946">(Jan 25 2022 at 13:59)</a>:</h4>
<p><a href="/user_uploads/4715/zVoFAIJhYhMWX2aUT4q5wq4w/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/zVoFAIJhYhMWX2aUT4q5wq4w/image.png" title="image.png"><img src="/user_uploads/4715/zVoFAIJhYhMWX2aUT4q5wq4w/image.png"></a></div><p>Does not seem so.<br>
The merge commit would be listed there as well serperately correct?</p>



<a name="269260173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260173">(Jan 25 2022 at 14:00)</a>:</h4>
<p>Could you try to exit vim (<code>:wq</code>) and then try <code>git push --force</code> again. You are still on the master branch, right?</p>



<a name="269260250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260250">(Jan 25 2022 at 14:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/122652-new-members/topic/Diverged.20branches.20on.20git/near/269260173">said</a>:</p>
<blockquote>
<p>Could you try to exit vim (<code>:wq</code>) and then try <code>git push --force</code> again. You are still on the master branch, right?</p>
</blockquote>
<p>I am still on the master branch, this is correct.</p>
<p>I will try that wait a second.</p>



<a name="269260404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260404">(Jan 25 2022 at 14:02)</a>:</h4>
<p>Looks like it worked.</p>



<a name="269260418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260418">(Jan 25 2022 at 14:02)</a>:</h4>
<p><a href="/user_uploads/4715/dpLLAVlK4gfOZF5Ruu6s6niP/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/dpLLAVlK4gfOZF5Ruu6s6niP/image.png" title="image.png"><img src="/user_uploads/4715/dpLLAVlK4gfOZF5Ruu6s6niP/image.png"></a></div><p>No error so far</p>



<a name="269260466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260466">(Jan 25 2022 at 14:02)</a>:</h4>
<p>Is the problem with the rebase in the initial commit now solved?</p>



<a name="269260503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260503">(Jan 25 2022 at 14:02)</a>:</h4>
<p><a href="/user_uploads/4715/Vl44zPnXQTlWk2gVo1lr6lKr/Screenshot-2022-01-25-at-15-02-23-Fix-for-localized-windows-editions-in-testcase-fn-read_link-Issue93211-by-m1guelperez-....png">Screenshot-2022-01-25-at-15-02-23-Fix-for-localized-windows-editions-in-testcase-fn-read_link-Issue93211-by-m1guelperez-....png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/Vl44zPnXQTlWk2gVo1lr6lKr/Screenshot-2022-01-25-at-15-02-23-Fix-for-localized-windows-editions-in-testcase-fn-read_link-Issue93211-by-m1guelperez-....png" title="Screenshot-2022-01-25-at-15-02-23-Fix-for-localized-windows-editions-in-testcase-fn-read_link-Issue93211-by-m1guelperez-....png"><img src="/user_uploads/4715/Vl44zPnXQTlWk2gVo1lr6lKr/Screenshot-2022-01-25-at-15-02-23-Fix-for-localized-windows-editions-in-testcase-fn-read_link-Issue93211-by-m1guelperez-....png"></a></div><p>looks like it</p>



<a name="269260600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269260600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269260600">(Jan 25 2022 at 14:03)</a>:</h4>
<p>I have absolutely no clue how you just fixed that. Would you maybe briefly explain what you just did?<br>
Sure with <code>git push --force</code> we forced the push obv. but how did you delete the merge commit?</p>



<a name="269261186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269261186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269261186">(Jan 25 2022 at 14:08)</a>:</h4>
<p>When rebasing against a version newer than what the merge commit merged in, the merge commit is removed by default.</p>
<div class="codehilite"><pre><span></span><code>upstream1 --- upstream2 --- upstream3(master)
 \             \
  my_change --- merge --- my_other_change(pr)
</code></pre></div>
<p>when rebasing on top of upstream3 turns into</p>
<div class="codehilite"><pre><span></span><code>upstream1 --- upstream2 --- upstream3(master)
                            \
                             my_change --- my_other_change(pr)
</code></pre></div>



<a name="269261306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/Diverged%20branches%20on%20git/near/269261306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Anon <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/Diverged.20branches.20on.20git.html#269261306">(Jan 25 2022 at 14:09)</a>:</h4>
<p>Thank you for the explanation! You saved my day and probably my first PR <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>BufRead::fill_buf with wrapping · new members · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/BufRead.3A.3Afill_buf.20with.20wrapping.html">BufRead::fill_buf with wrapping</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264922899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/BufRead%3A%3Afill_buf%20with%20wrapping/near/264922899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kamil Becmer <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/BufRead.3A.3Afill_buf.20with.20wrapping.html#264922899">(Dec 14 2021 at 20:47)</a>:</h4>
<p>Hi, Rust Team.<br>
I'm new here, trying to figure out the right way to implement a std lib feature I've developed.<br>
The Guide leads me here. Perhaps I could move further, but still not sure about some details.</p>
<p>So, the feature is a variation on the BufRead::fill_buf method. I would like to implement a new<br>
method:</p>
<p>BufRead::fill_buf_wrapping(&amp;mut self, at_least: usize) -&gt; Result&lt;&amp;[u8]&gt;</p>
<p>If there's less than at_least bytes left then it moves remaining bytes to the beginning of the<br>
buffer and fills buffer further. When at_least == 0 it behaves exactly the same as fill_buf.</p>
<p>This is a simple fix which allows to take advantage of existing buffer to process/parse input data<br>
with push-back-like functionality if decided to not consume any bytes. End-user solution based on<br>
read_exact method (and friends) doesn't has push-back functionality or has to handle intermediate<br>
buffer.</p>
<p>Does that sound good?<br>
Any suggestions for better method name?<br>
Should I proceed by creating a new RFC?</p>



<a name="264923509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/BufRead%3A%3Afill_buf%20with%20wrapping/near/264923509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/BufRead.3A.3Afill_buf.20with.20wrapping.html#264923509">(Dec 14 2021 at 20:51)</a>:</h4>
<p><a class="stream" data-stream-id="219381" href="/#narrow/stream/219381-t-libs">#t-libs</a> or <a class="stream" data-stream-id="122651" href="/#narrow/stream/122651-general">#general</a> would be good places to ask for initial feedback I think.</p>



<a name="264923625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/BufRead%3A%3Afill_buf%20with%20wrapping/near/264923625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kamil Becmer <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/BufRead.3A.3Afill_buf.20with.20wrapping.html#264923625">(Dec 14 2021 at 20:52)</a>:</h4>
<p>thanks!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>HIR IDs · new members · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/index.html">new members</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html">HIR IDs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268901250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hgm4 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901250">(Jan 21 2022 at 20:49)</a>:</h4>
<p>Is it expected that a HIR ID from a hir::PatKind::Struct's field is always valid? Doesn't seem to be the case. When trying to look up the given HIR ID in the map, using tcx.hir().get(fld.hir_id), we see "couldn't find hir id HirID in the HIR map". Why would this be? I'm @nightly-2021-11-01 so slightly out of date.</p>



<a name="268901351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901351">(Jan 21 2022 at 20:50)</a>:</h4>
<p>I believe all <code>HirId</code>s in the HIR should always be valid.</p>



<a name="268901400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hgm4 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901400">(Jan 21 2022 at 20:50)</a>:</h4>
<p>That's what I believed too :) Doesn't seem to be the case for whatever reason.</p>



<a name="268901632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901632">(Jan 21 2022 at 20:52)</a>:</h4>
<p>Which HirId are you trying?</p>



<a name="268901786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hgm4 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901786">(Jan 21 2022 at 20:54)</a>:</h4>
<p>The hir_id from a PatField.</p>



<a name="268901841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901841">(Jan 21 2022 at 20:54)</a>:</h4>
<p>Perhaps try clearing the build directory of the program you're compiling?</p>



<a name="268901915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901915">(Jan 21 2022 at 20:55)</a>:</h4>
<p>It's "normal" it's not in the HIR map, it's not inserted into it.  If it's required, you can add a variant to <code>hir::Node</code>, and the insertion code in <code>rustc_ast_lowering::index</code>.</p>



<a name="268901919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268901919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hgm4 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268901919">(Jan 21 2022 at 20:55)</a>:</h4>
<p>There isn't a build directory. It is running through a compiler plugin I wrote so the fault is most likely mine. Just trying to figure out why.</p>



<a name="268902073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122652-new%20members/topic/HIR%20IDs/near/268902073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hgm4 <a href="https://zulip-archive.rust-lang.org/stream/122652-new-members/topic/HIR.20IDs.html#268902073">(Jan 21 2022 at 20:57)</a>:</h4>
<p>Maybe I should explain what I'm looking to get instead if it isn't guaranteed to be in the HIR map. I have a PatKind::Struct and would like to obtain the type of each field if this is possible?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#55549 miri value visitor · t-compiler/const-eval · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/index.html">t-compiler/const-eval</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html">#55549 miri value visitor</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="136979614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136979614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136979614">(Nov 02 2018 at 08:01)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@Oli</span> I applied you <code>walk_array/visit_array</code> suggestion. I suppose I could do something similar for structs. Not sure yet whether I can reach the API you suggested.</p>



<a name="136980500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136980500" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136980500">(Nov 02 2018 at 08:14)</a>:</h4>
<p>I think you forgot to push</p>



<a name="136980798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136980798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136980798">(Nov 02 2018 at 08:19)</a>:</h4>
<p>not "forgot", still doing the 2nd half ;)</p>



<a name="136980813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136980813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136980813">(Nov 02 2018 at 08:19)</a>:</h4>
<p>:D</p>



<a name="136980815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136980815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136980815">(Nov 02 2018 at 08:19)</a>:</h4>
<p>kk</p>



<a name="136980909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136980909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136980909">(Nov 02 2018 at 08:20)</a>:</h4>
<p>do tell me once my suggestions are getting out of hand! You have a clearer picture of what it's needed for</p>



<a name="136981543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981543">(Nov 02 2018 at 08:30)</a>:</h4>
<p>I have no idea what I am doing^^</p>



<a name="136981565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981565">(Nov 02 2018 at 08:30)</a>:</h4>
<p>I originally thought I couldn't write a "normal" visitor</p>



<a name="136981577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981577">(Nov 02 2018 at 08:30)</a>:</h4>
<p>but that was before I had two traits (<code>Value</code> and <code>ValueVisitor</code>)</p>



<a name="136981604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981604">(Nov 02 2018 at 08:31)</a>:</h4>
<p>now that I do, it's getting better. But I still don't think I can do your <code>visit_array(impl Iterator)</code>. that's no loss though.</p>



<a name="136981608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981608">(Nov 02 2018 at 08:31)</a>:</h4>
<p>or maybe I can, but that will be one step further down the refactoring of this^^</p>



<a name="136981732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981732" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981732">(Nov 02 2018 at 08:33)</a>:</h4>
<p>it's at least compiling again now :)</p>



<a name="136981924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981924">(Nov 02 2018 at 08:36)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@Oli</span> pushed something</p>



<a name="136981935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981935">(Nov 02 2018 at 08:36)</a>:</h4>
<p>now to see if we can smuggle an iterator into there</p>



<a name="136981971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136981971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136981971">(Nov 02 2018 at 08:37)</a>:</h4>
<p>no reason to make that specific to arrays though, I think. <code>visit_aggregate(impl Iterator)</code> has a nice ring to it :D</p>



<a name="136984582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136984582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136984582">(Nov 02 2018 at 09:21)</a>:</h4>
<p>woah I have no idea why the borrow checker accepts this^^</p>



<a name="136984630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136984630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136984630">(Nov 02 2018 at 09:22)</a>:</h4>
<p>the iterator captures some data, but seemingly little enough that the lifetimes still work out. crazy.</p>



<a name="136985008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/136985008" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#136985008">(Nov 02 2018 at 09:28)</a>:</h4>
<p>hm. but for general aggregates I do not think I can make this work... the iterator may need to access memory to determine size&amp;align of a DST</p>



<a name="137007329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137007329" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137007329">(Nov 02 2018 at 12:28)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@Oli</span> I added a commit to this PR that is needed to make the visitor usable in miri where I need it... let me know if you want me to put that in a separate PR instead</p>



<a name="137007521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137007521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137007521">(Nov 02 2018 at 12:29)</a>:</h4>
<p>Nah, it's fine to include it here</p>



<a name="137010776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137010776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137010776">(Nov 02 2018 at 12:44)</a>:</h4>
<p><em>dang</em> I need a read-only visitor as well...</p>



<a name="137010868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137010868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137010868">(Nov 02 2018 at 12:45)</a>:</h4>
<p>or I need to make everything that might execute a <code>Deref</code> projection take <code>&amp;mut</code></p>



<a name="137010950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137010950" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137010950">(Nov 02 2018 at 12:45)</a>:</h4>
<p>isn't purely read-only hard because of <code>force_allocation</code>?</p>



<a name="137011064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011064">(Nov 02 2018 at 12:46)</a>:</h4>
<p>no it's also because I later want to write another visitor that actually changes stuff</p>



<a name="137011069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011069" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011069">(Nov 02 2018 at 12:46)</a>:</h4>
<p>anyway, you can do that by using a macro like in <code>intravisit</code></p>



<a name="137011097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011097">(Nov 02 2018 at 12:46)</a>:</h4>
<p>walks over a value and changes all the tag of pointers in there</p>



<a name="137011180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011180">(Nov 02 2018 at 12:46)</a>:</h4>
<p><code>force_allocation</code> is not even called any more</p>



<a name="137011201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011201" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011201">(Nov 02 2018 at 12:46)</a>:</h4>
<p>the other annoying one is <code>place_field</code></p>



<a name="137011427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011427" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011427">(Nov 02 2018 at 12:47)</a>:</h4>
<p>which needs <code>&amp;mut</code> because... okay I guess that's because <code>force_allocation</code>. the alternative would be for <code>Place::Local</code> to also have an offset or something similarly horrible</p>



<a name="137011626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011626" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011626">(Nov 02 2018 at 12:48)</a>:</h4>
<p>we used to have this... for a short time</p>



<a name="137011640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011640">(Nov 02 2018 at 12:48)</a>:</h4>
<p>let's not repeat that</p>



<a name="137011651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011651">(Nov 02 2018 at 12:48)</a>:</h4>
<p>^^</p>



<a name="137011670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011670">(Nov 02 2018 at 12:48)</a>:</h4>
<p>maybe you can only visit <code>OpTy</code> and <code>MPlaceTy</code> then. I dont want to also make THAT mut-polymorphic</p>



<a name="137011712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011712" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011712">(Nov 02 2018 at 12:49)</a>:</h4>
<p>just <code>force_allocate</code> if you want to visit a <code>PlaceTy</code></p>



<a name="137011740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137011740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137011740">(Nov 02 2018 at 12:49)</a>:</h4>
<p>(which retagging will do)</p>



<a name="137012191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137012191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137012191">(Nov 02 2018 at 12:50)</a>:</h4>
<p>makes sense</p>



<a name="137016625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137016625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137016625">(Nov 02 2018 at 13:10)</a>:</h4>
<p>okay pushed a mut-polymorphic version. it's not as bad as I thought  -- though it would be nicer if we could do it without macros</p>



<a name="137020871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137020871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137020871">(Nov 02 2018 at 13:25)</a>:</h4>
<p>I am getting a lifetime error that I dont understand at all... suddenly now that I use <code>'tcx</code>in argument position in the stacked borrow extension trait, it complains. but other extension traits do that, too...</p>



<a name="137021064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137021064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137021064">(Nov 02 2018 at 13:26)</a>:</h4>
<p>oh got it</p>



<a name="137021123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137021123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137021123">(Nov 02 2018 at 13:26)</a>:</h4>
<p>some of the other types had hidden lifetimes</p>



<a name="137021987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137021987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137021987">(Nov 02 2018 at 13:29)</a>:</h4>
<p>when are we getting mandatory <code>'_</code> again?^^</p>



<a name="137026696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137026696" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137026696">(Nov 02 2018 at 13:49)</a>:</h4>
<p>When I'm done cleaning up the compiler :P</p>



<a name="137035424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/%2355549%20miri%20value%20visitor/near/137035424" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/.2355549.20miri.20value.20visitor.html#137035424">(Nov 02 2018 at 14:24)</a>:</h4>
<p>okay, so never then :P</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
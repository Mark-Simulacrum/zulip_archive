<html>
<head><meta charset="utf-8"><title>miri update · t-compiler/const-eval · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/index.html">t-compiler/const-eval</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html">miri update</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="146043352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/miri%20update/near/146043352" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html#146043352">(Nov 05 2018 at 07:46)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@Oli</span> uh, miri shows strange compile failures even after renaming value to immediate...</p>
<div class="codehilite"><pre><span></span>error[E0277]: the trait bound `&amp;mut rustc_mir::interpret::EvalContext&lt;&#39;a, &#39;mir, &#39;tcx, Evaluator&lt;&#39;tcx&gt;&gt;: rustc_target::abi::HasDataLayout` is not satisfied
   --&gt; src/fn_call.rs:145:55
    |
145 |                 let size = self.read_scalar(args[0])?.to_usize(&amp;self)?;
    |                                                       ^^^^^^^^ the trait `rustc_target::abi::HasDataLayout` is not implemented for `&amp;mut rustc_mir::interpret::EvalContext&lt;&#39;a, &#39;mir, &#39;tcx, Evaluator&lt;&#39;tcx&gt;&gt;`
    |
    = help: the following implementations were found:
              &lt;rustc_mir::interpret::EvalContext&lt;&#39;a, &#39;mir, &#39;tcx, M&gt; as rustc_target::abi::HasDataLayout&gt;
</pre></div>



<a name="146043357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/miri%20update/near/146043357" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html#146043357">(Nov 05 2018 at 07:46)</a>:</h4>
<p>oh, <span class="user-mention" data-user-id="119009">@eddyb</span> broke it :P</p>



<a name="146043365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/miri%20update/near/146043365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html#146043365">(Nov 05 2018 at 07:47)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/55665" target="_blank" title="https://github.com/rust-lang/rust/pull/55665">https://github.com/rust-lang/rust/pull/55665</a></p>



<a name="146043867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/miri%20update/near/146043867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html#146043867">(Nov 05 2018 at 08:01)</a>:</h4>
<p>yeah just remove the <code>&amp;</code></p>



<a name="146043871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/miri%20update/near/146043871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html#146043871">(Nov 05 2018 at 08:01)</a>:</h4>
<p>cleanup!</p>



<a name="146784730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/miri%20update/near/146784730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/146212-t-compiler/const-eval/topic/miri.20update.html#146784730">(Nov 05 2018 at 09:29)</a>:</h4>
<p>and TONS of merge conflicts with <a href="https://github.com/rust-lang/rust/issues/55549" target="_blank" title="https://github.com/rust-lang/rust/issues/55549">#55549</a>^^</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
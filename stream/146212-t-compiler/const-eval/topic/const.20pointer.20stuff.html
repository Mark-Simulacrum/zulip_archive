<html>
<head><meta charset="utf-8"><title>const pointer stuff · t-compiler/const-eval · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/146212-t-compiler/const-eval/index.html">t-compiler/const-eval</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/146212-t-compiler/const-eval/topic/const.20pointer.20stuff.html">const pointer stuff</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="268228944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/const%20pointer%20stuff/near/268228944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> fee1-dead <a href="https://zulip-archive.rust-lang.org/stream/146212-t-compiler/const-eval/topic/const.20pointer.20stuff.html#268228944">(Jan 17 2022 at 05:17)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> said:</p>
<blockquote>
<p>I'm not sure about the second example either.... how can it be 32 bit if it's supposed to be the address of a static item which may be anywhere in the 64 bit space of the <code>x86_64</code> machine.</p>
</blockquote>
<p>My specific use case is for switching to long mode, therefore 64 bit addressing is not yet available. (the processor will zero extend the address) I am using naked functions therefore I couldn't call Rust code, and I can use statics or constants to pass to the <code>asm!</code> macro.</p>



<a name="268256328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/146212-t-compiler/const-eval/topic/const%20pointer%20stuff/near/268256328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/146212-t-compiler/const-eval/topic/const.20pointer.20stuff.html#268256328">(Jan 17 2022 at 11:09)</a>:</h4>
<p>Oh, that is a curious situation indeed. "Just allowing" casting won't help you here, the CTFE engine doesn't have operations to do what you want. This is tracked in <a href="https://github.com/rust-lang/rust/issues/87184">https://github.com/rust-lang/rust/issues/87184</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
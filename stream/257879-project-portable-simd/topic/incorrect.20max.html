<html>
<head><meta charset="utf-8"><title>incorrect max · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html">incorrect max</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274894638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274894638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274894638">(Mar 10 2022 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399416">Jorge Leitao</span> has marked this topic as unresolved.</p>



<a name="274894860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274894860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274894860">(Mar 10 2022 at 21:06)</a>:</h4>
<p>Hey, I am trying to solve this, but I am hitting a small issue. If we implement </p>
<div class="codehilite"><pre><span></span><code>impl&lt;T, const LANES: usize&gt; Simd&lt;T, LANES&gt;
where
    T: SimdElement + Ord,
    LaneCount&lt;LANES&gt;: SupportedLaneCount,
{
    #[must_use]
    #[inline]
    pub fn min(self, rhs: Self) -&gt; Self {
        self.lanes_gt(rhs).select(rhs, self)
    }

    #[must_use]
    #[inline]
    pub fn max(self, rhs: Self) -&gt; Self {
        self.lanes_lt(rhs).select(rhs, self)
    }
}
</code></pre></div>
<p>this won't compile because in the future it may collide with our current implementation of <code>min</code> and <code>max</code> for floats (i,e. if float ever gets <code>Ord</code>. Does anyone know a solution to this? </p>
<p>An alternative is to only implement this for base types (i8-i64,u8-u64)</p>



<a name="274894973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274894973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274894973">(Mar 10 2022 at 21:07)</a>:</h4>
<p>the solution (for now) is to only implement it for specific types, rather than generically</p>



<a name="274895080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895080">(Mar 10 2022 at 21:08)</a>:</h4>
<p>u8-u64,i8-i64,usize,isize</p>



<a name="274895105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895105">(Mar 10 2022 at 21:08)</a>:</h4>
<p>Aside: it should probably be <code>lanes_max</code> since <code>Simd::max</code> already works, getting the one from <code>Ord</code>.</p>



<a name="274895158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895158">(Mar 10 2022 at 21:09)</a>:</h4>
<p>This collision issue is one of the reasons I'm playing with the idea of separating float and integer vectors, which would allow the functions to be implemented generically</p>



<a name="274895184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895184">(Mar 10 2022 at 21:09)</a>:</h4>
<p>The eventual solution might be the negative-impls-in-coherence project, for which work is already ongoing.  Because then we'll add <code>impl !Ord for f32{}</code>, and the overlap rules will work out</p>



<a name="274895187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895187">(Mar 10 2022 at 21:09)</a>:</h4>
<p>imho we should call it <code>max</code> since people expect <code>Simd::max</code> to be the lanewise version and are surprised</p>



<a name="274895277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895277">(Mar 10 2022 at 21:10)</a>:</h4>
<p>I'm very tempted to not implement Ord on vectors with how many times people have gotten confused by it</p>



<a name="274895300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895300">(Mar 10 2022 at 21:10)</a>:</h4>
<p>(you could always use arrays)</p>



<a name="274895325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895325">(Mar 10 2022 at 21:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312331">Caleb Zulawski</span> <a href="#narrow/stream/257879-project-portable-simd/topic/incorrect.20max/near/274895300">said</a>:</p>
<blockquote>
<p>(you could always use arrays)</p>
</blockquote>
<p>That's what I was thinking, yeah.</p>
<p>Maybe not even <code>PartialEq</code>...</p>



<a name="274895350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895350">(Mar 10 2022 at 21:11)</a>:</h4>
<p>Yeah, both the Eq and Ord class of traits</p>



<a name="274895357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895357">(Mar 10 2022 at 21:11)</a>:</h4>
<p>imho vectors should be Ord, they should just also have functions that shadow Ord's functions</p>



<a name="274895384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895384">(Mar 10 2022 at 21:11)</a>:</h4>
<p>Yeah that's a possibility too. I'm not sure which is better, yet</p>



<a name="274895461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895461">(Mar 10 2022 at 21:12)</a>:</h4>
<p>since i don't want to always have to manually implement Ord whenever my type contains a Simd type</p>



<a name="274895462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895462">(Mar 10 2022 at 21:12)</a>:</h4>
<p>Shadowing them would make it less likely to use the wrong one probably, though we originally purposely avoided shadowing</p>



<a name="274895645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895645">(Mar 10 2022 at 21:13)</a>:</h4>
<p>Oh, and reminder <span class="user-mention" data-user-id="399416">@Jorge Leitao</span> that float vectors should probably get both max/min <em>and</em> <a href="https://doc.rust-lang.org/nightly/std/primitive.f32.html#method.maximum">maximum</a>/minimum.  (Yes, the naming is unfortunate.)</p>



<a name="274895869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274895869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274895869">(Mar 10 2022 at 21:15)</a>:</h4>
<p>yeah...thanks for that, ieee (though i know there wasn't 1 good option that covers all usecases)</p>



<a name="274898257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274898257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274898257">(Mar 10 2022 at 21:37)</a>:</h4>
<p>here it is: <a href="https://github.com/rust-lang/portable-simd/pull/260">https://github.com/rust-lang/portable-simd/pull/260</a> I limited it to one problem (integers).</p>



<a name="274911060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274911060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274911060">(Mar 10 2022 at 23:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="229517">Jacob Lifshay</span> <a href="#narrow/stream/257879-project-portable-simd/topic/incorrect.20max/near/274895869">said</a>:</p>
<blockquote>
<p>yeah...thanks for that, ieee</p>
</blockquote>
<p>I don't completely blame IEEE for that, actually.  <code>Option::min</code> has the same problem -- arguably even worse, since <code>Option::min</code> is like <code>minimum</code> (preserves a <code>None</code>) but <code>Option::max</code> is like <code>max</code> (ignores a single <code>None</code>).</p>



<a name="274911154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274911154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274911154">(Mar 10 2022 at 23:32)</a>:</h4>
<p>(This is why I wish <code>Option</code> wasn't <code>Ord</code>, but obviously it's way too late to change that.)</p>



<a name="274911854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274911854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274911854">(Mar 10 2022 at 23:40)</a>:</h4>
<p>I never even considered that Option was Ord and not just PartialOrd</p>



<a name="274911882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274911882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274911882">(Mar 10 2022 at 23:40)</a>:</h4>
<p>I think C++ uses the same ordering</p>



<a name="274912077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274912077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274912077">(Mar 10 2022 at 23:43)</a>:</h4>
<p>But yeah, <code>fold(None, cmp::min)</code> and <code>fold(None, cmp::max)</code> do <em>completely</em> different things, and that really annoys me.</p>



<a name="274912123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274912123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274912123">(Mar 10 2022 at 23:43)</a>:</h4>
<p>At least <code>fold(NAN, f32::min)</code> and <code>fold(NAN, f32::max)</code> are consistent.</p>



<a name="274925416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274925416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274925416">(Mar 11 2022 at 02:45)</a>:</h4>
<p>what if we had a "malicious" implementation of <code>PartialOrd</code></p>



<a name="274925600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274925600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274925600">(Mar 11 2022 at 02:49)</a>:</h4>
<p>what do you mean by that?</p>



<a name="274925871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274925871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274925871">(Mar 11 2022 at 02:54)</a>:</h4>
<p>I think <code>Simd&lt;T: Ord, N&gt;</code> should implement <code>Ord</code> lexicographically for ease of insertion in <code>BinaryHeap</code> and <code>BTree*</code> and <code>min</code>/<code>max</code>/<code>clamp</code>/etc. should be shadowed by inherent functions.</p>



<a name="274927204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274927204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274927204">(Mar 11 2022 at 03:18)</a>:</h4>
<p>Well okay.</p>



<a name="274927278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274927278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274927278">(Mar 11 2022 at 03:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="229517">Jacob Lifshay</span> <a href="#narrow/stream/257879-project-portable-simd/topic/incorrect.20max/near/274925600">said</a>:</p>
<blockquote>
<p>what do you mean by that?</p>
</blockquote>
<p>this was mostly a joke but it would be "just do elementwise <code>min</code> for <code>Ord::min</code> <span aria-label="smiling devil" class="emoji emoji-1f608" role="img" title="smiling devil">:smiling_devil:</span> " yes</p>



<a name="274927382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/274927382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#274927382">(Mar 11 2022 at 03:23)</a>:</h4>
<p>Straight to jail</p>



<a name="275034596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275034596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275034596">(Mar 11 2022 at 21:14)</a>:</h4>
<p>hahahaha.</p>



<a name="275127021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127021">(Mar 13 2022 at 01:48)</a>:</h4>
<p>incoming: <a href="https://github.com/rust-lang/rust/pull/94899">https://github.com/rust-lang/rust/pull/94899</a></p>



<a name="275127337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127337">(Mar 13 2022 at 01:58)</a>:</h4>
<p>I'm not sure we're really finished with dealing with this yet?  Right now Simd has both <code>lanes_eq</code> and <code>eq</code>, for example...</p>



<a name="275127362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127362">(Mar 13 2022 at 01:59)</a>:</h4>
<p>Technically that's on <code>PartialEq</code>, not <code>Ord</code>.</p>



<a name="275127507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127507">(Mar 13 2022 at 02:01)</a>:</h4>
<p>Right, I'm just suggesting we're in a pretty inconsistent state that might be even more confusing</p>



<a name="275127519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127519">(Mar 13 2022 at 02:01)</a>:</h4>
<p>We're in an <strong>eventually</strong> consistent state. <span aria-label="relieved" class="emoji emoji-1f60c" role="img" title="relieved">:relieved:</span></p>



<a name="275127656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127656">(Mar 13 2022 at 02:05)</a>:</h4>
<p>But I agree that we should try to fix up things sooner rather than later.</p>



<a name="275127773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127773">(Mar 13 2022 at 02:08)</a>:</h4>
<p>I'm just not sure we should be putting this particular state out for public consumption, explaining "sometimes you use <code>lanes_eq</code>, sometimes you use <code>eq</code>" probably isn't going to give anyone much confidence in the implementation</p>



<a name="275127923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275127923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275127923">(Mar 13 2022 at 02:13)</a>:</h4>
<p>The other reason I am pushing it atm is because <span class="user-mention" data-user-id="120791">@RalfJ</span> wants to run tests on the latest libstd with SIMD stuff with Miri, and that requires some of the patches he sent us to propagate.</p>



<a name="275129719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/incorrect%20max/near/275129719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/incorrect.20max.html#275129719">(Mar 13 2022 at 03:05)</a>:</h4>
<p>Ah right</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
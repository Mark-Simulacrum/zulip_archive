<html>
<head><meta charset="utf-8"><title>SimdPartialEq · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html">SimdPartialEq</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="277962876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277962876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277962876">(Apr 06 2022 at 00:47)</a>:</h4>
<p>Do you expect any SIMD vectors that are <code>Eq</code> but not <code>SimdPartialEq</code>? Can I use that trait's method to parallelize <code>PartialEq</code>'s <code>eq</code>?</p>



<a name="277962950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277962950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277962950">(Apr 06 2022 at 00:48)</a>:</h4>
<p>Nope, unfortunately there just isn't an easy way to ensure that in the type system</p>



<a name="277962989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277962989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277962989">(Apr 06 2022 at 00:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="341811">Sean Stangl</span> <a href="#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277962876">said</a>:</p>
<blockquote>
<p>Do you expect any SIMD vectors that are <code>Eq</code> but not <code>SimdPartialEq</code>?</p>
</blockquote>
<p>Doubtful, but if there was a type that had a weird story re: Eq/PartialEq, it would be pointers.</p>



<a name="277962991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277962991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277962991">(Apr 06 2022 at 00:49)</a>:</h4>
<p>I definitely think it's reasonable to implement <code>PartialEq: SimdPartialEq</code></p>



<a name="277962999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277962999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277962999">(Apr 06 2022 at 00:49)</a>:</h4>
<p>If that's specifically what you mean</p>



<a name="277963056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963056">(Apr 06 2022 at 00:50)</a>:</h4>
<p>Oh, what's special about pointer equality?</p>



<a name="277963063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963063">(Apr 06 2022 at 00:50)</a>:</h4>
<p>wait, no...<code>String</code> is <code>PartialEq</code>, but definitely not <code>SimdPartialEq</code></p>



<a name="277963068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963068">(Apr 06 2022 at 00:50)</a>:</h4>
<p>Yes but String is not a vector.</p>



<a name="277963072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963072">(Apr 06 2022 at 00:50)</a>:</h4>
<p><span class="user-mention" data-user-id="229517">@Jacob Lifshay</span> I meant on the impl on Simd</p>



<a name="277963077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963077">(Apr 06 2022 at 00:51)</a>:</h4>
<p>ah, ok</p>



<a name="277963080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963080">(Apr 06 2022 at 00:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="341811">Sean Stangl</span> <a href="#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963056">said</a>:</p>
<blockquote>
<p>Oh, what's special about pointer equality?</p>
</blockquote>
<p>Pointer equality was a mistake.</p>



<a name="277963084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963084">(Apr 06 2022 at 00:51)</a>:</h4>
<p>Lol</p>



<a name="277963102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963102">(Apr 06 2022 at 00:51)</a>:</h4>
<p>We can match how pointer equality works with SimdPartialEq easy</p>



<a name="277963120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963120">(Apr 06 2022 at 00:51)</a>:</h4>
<p>So I think there won't be any cases where we implement PartialEq without the SIMD version</p>



<a name="277963121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963121">(Apr 06 2022 at 00:52)</a>:</h4>
<p>Oh I was worried it was something like "Strict provenance means that tagged assumed-pointers-at-runtime compare not-equal with untagged pointers with the same numeric component"</p>



<a name="277963183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963183">(Apr 06 2022 at 00:52)</a>:</h4>
<p>imho pointer equality should be defined...you just have to know it's comparing addresses, not permissions to read/write</p>



<a name="277963184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963184">(Apr 06 2022 at 00:52)</a>:</h4>
<p>Yes Actually That Is What It Should Mean.</p>



<a name="277963192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963192">(Apr 06 2022 at 00:52)</a>:</h4>
<p>Uh-oh.</p>



<a name="277963195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963195">(Apr 06 2022 at 00:52)</a>:</h4>
<p>Well that's fine Jacob.</p>



<a name="277963236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963236">(Apr 06 2022 at 00:53)</a>:</h4>
<p>I think provenance is fine with pointer equality because provenance only actually comes into play when you dereference</p>



<a name="277963293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963293">(Apr 06 2022 at 00:54)</a>:</h4>
<p>Or modify the pointer</p>



<a name="277963297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963297">(Apr 06 2022 at 00:54)</a>:</h4>
<p>though, iirc pointer comparison in C is only defined for comparing pointers to the same allocation (or one past the end)</p>



<a name="277963328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963328">(Apr 06 2022 at 00:54)</a>:</h4>
<p>tl;dr <code>addr_eq</code> is a fine question to ask.</p>



<a name="277963340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963340">(Apr 06 2022 at 00:55)</a>:</h4>
<p>but is subtly different from "but are they EQUAL?"</p>



<a name="277963360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963360">(Apr 06 2022 at 00:55)</a>:</h4>
<p>I don't know about C but C++ doesn't care about the allocation when comparing, it's purely treated as an integer address</p>



<a name="277963425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963425">(Apr 06 2022 at 00:56)</a>:</h4>
<p>Are you talking about that in terms of implementations or in terms of The Rules.</p>



<a name="277963433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963433">(Apr 06 2022 at 00:56)</a>:</h4>
<p>They Are Subtly Different.</p>



<a name="277963443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963443">(Apr 06 2022 at 00:56)</a>:</h4>
<p>In the spec, you can compare any pointers of the same type</p>



<a name="277963451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963451">(Apr 06 2022 at 00:56)</a>:</h4>
<p>Oh okay.</p>



<a name="277963455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963455">(Apr 06 2022 at 00:56)</a>:</h4>
<p>iirc C++ has the same restriction...you have to use <code>std::less</code> to compare between allocations</p>



<a name="277963457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sean Stangl <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963457">(Apr 06 2022 at 00:56)</a>:</h4>
<p>Wait a second, isn't pointer equality broken with segmented memory in general?</p>



<a name="277963460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963460">(Apr 06 2022 at 00:56)</a>:</h4>
<p>YEAH KINDA</p>



<a name="277963466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963466">(Apr 06 2022 at 00:56)</a>:</h4>
<p>MANY MISTAKES WERE MADE</p>



<a name="277963479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Miguel Raz Guzmán Macedo <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963479">(Apr 06 2022 at 00:57)</a>:</h4>
<p>RIP 🪦</p>



<a name="277963503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963503">(Apr 06 2022 at 00:57)</a>:</h4>
<p>memory...the hard part of computing (though you wouldn't think so as a beginner)</p>



<a name="277963586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963586">(Apr 06 2022 at 00:58)</a>:</h4>
<blockquote>
<p>iirc C++ has the same restriction...you have to use <code>std::less</code> to compare between allocations</p>
</blockquote>
<p>Yeah I was just referring to equality, order is implementation defined</p>



<a name="277963600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963600">(Apr 06 2022 at 00:59)</a>:</h4>
<p>Ahhh yeah.</p>



<a name="277963604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963604">(Apr 06 2022 at 00:59)</a>:</h4>
<p>...</p>



<a name="277963607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963607">(Apr 06 2022 at 00:59)</a>:</h4>
<p>...oh man.</p>



<a name="277963617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963617">(Apr 06 2022 at 00:59)</a>:</h4>
<p>on 80286 with segmented memory, you can't convert a pointer to an address...like paging on modern cpus but we agree to conveniently ignore that...</p>



<a name="277963628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963628">(Apr 06 2022 at 01:00)</a>:</h4>
<p>That means in C++ you can have <code>ptr1 == ptr2</code> return true but <code>ptr1 &lt;= ptr2</code> can return false.</p>



<a name="277963695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963695">(Apr 06 2022 at 01:00)</a>:</h4>
<p>innit</p>



<a name="277963743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963743">(Apr 06 2022 at 01:00)</a>:</h4>
<p>or <code>ptr1 == prt2</code> returns true but <code>ptr1 &lt; ptr2</code> is also true.</p>



<a name="277963908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277963908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277963908">(Apr 06 2022 at 01:03)</a>:</h4>
<blockquote>
<p>or <code>ptr1 == prt2</code> returns true but <code>ptr1 &lt; ptr2</code> is also true.</p>
</blockquote>
<p>of course it does, cuz <code>ptr1</code> and <code>prt2</code> are at <code>0x1234</code> but <code>ptr2</code> is at <code>0x1248</code> :P</p>



<a name="277964023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277964023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277964023">(Apr 06 2022 at 01:05)</a>:</h4>
<p>standards are a pain when they're that ill-specified.</p>



<a name="277993254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/277993254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#277993254">(Apr 06 2022 at 08:50)</a>:</h4>
<p>And that's why <code>std::less</code> is specialized for pointers, not the same as <code>&lt;</code>.</p>



<a name="278041155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/278041155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#278041155">(Apr 06 2022 at 15:29)</a>:</h4>
<p>though every compiler i've seen just implements <code>std::less</code> for pointers using <code>&lt;</code>, which the compiler just defines to compare addresses numerically.</p>



<a name="278041457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/SimdPartialEq/near/278041457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/SimdPartialEq.html#278041457">(Apr 06 2022 at 15:30)</a>:</h4>
<p>(though iirc that was just gcc and clang with libstdc++ and libc++)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
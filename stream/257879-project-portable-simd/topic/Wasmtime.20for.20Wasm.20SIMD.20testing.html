<html>
<head><meta charset="utf-8"><title>Wasmtime for Wasm SIMD testing · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html">Wasmtime for Wasm SIMD testing</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="225399025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/225399025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#225399025">(Feb 06 2021 at 08:41)</a>:</h4>
<p>hmm. It looks like it might be possible to use Wasmtime for Wasm SIMD testing. An embedded API might be easier to maintain, or at least give an interesting comparison for results, vs. relying on a headless Chrome (which has caused a few errors).<br>
<a href="https://docs.rs/wasmtime/0.21.0/wasmtime/struct.Config.html#method.wasm_simd">https://docs.rs/wasmtime/0.21.0/wasmtime/struct.Config.html#method.wasm_simd</a><br>
<a href="https://docs.wasmtime.dev/examples-rust-hello-world.html">https://docs.wasmtime.dev/examples-rust-hello-world.html</a></p>



<a name="225639468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/225639468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#225639468">(Feb 09 2021 at 02:43)</a>:</h4>
<p>I'd be happy to look into this</p>



<a name="226557750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/226557750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#226557750">(Feb 16 2021 at 18:48)</a>:</h4>
<p>That would be lovely <span class="user-mention" data-user-id="204346">@Ashley Mannix</span>! <span aria-label="sparkling heart" class="emoji emoji-1f496" role="img" title="sparkling heart">:sparkling_heart:</span><br>
I pulled out an issue for it. <a href="https://github.com/rust-lang/stdsimd/issues/68">https://github.com/rust-lang/stdsimd/issues/68</a></p>



<a name="233860671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/233860671" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#233860671">(Apr 09 2021 at 17:25)</a>:</h4>
<p><a href="https://github.com/rust-lang/stdsimd/pull/89">https://github.com/rust-lang/stdsimd/pull/89</a> has made it more desirable to do this <strong>in addition</strong> to Chrome!</p>



<a name="234760914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234760914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234760914">(Apr 15 2021 at 21:58)</a>:</h4>
<p>All our tests are configured to work in browsers, so we're not actually testing Node.js here. Oof.</p>



<a name="234907497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234907497" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234907497">(Apr 16 2021 at 19:23)</a>:</h4>
<p>Supposedly tests will "just work" if we use <code>cargo wasi</code> or something?</p>



<a name="234907980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234907980" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234907980">(Apr 16 2021 at 19:27)</a>:</h4>
<p>I have brought our grievances directly to the Bytecode Alliance Zulip because eff my life.<br>
Nonetheless, <span class="user-mention" data-user-id="312331">@Caleb Zulawski</span>, I agree now with dropping wasm SIMD testing for the moment so we can get things out of the way. In retrospect it was very silly for me to propose to stall more, but I had not really grasped the enormity of the problem. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> and so <a href="https://github.com/rust-lang/stdsimd/pull/96">https://github.com/rust-lang/stdsimd/pull/96</a> taught me... much.</p>



<a name="234908180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234908180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234908180">(Apr 16 2021 at 19:28)</a>:</h4>
<p>Haha no problem.  Yeah, once I dug into the source of the problem I didn't really want to go into it more than that lol</p>



<a name="234909753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234909753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234909753">(Apr 16 2021 at 19:41)</a>:</h4>
<p>Your instincts were apparently completely right this time.</p>



<a name="234910044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234910044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234910044">(Apr 16 2021 at 19:44)</a>:</h4>
<blockquote>
<p>when you're overriding to trunk you're not pulling in the wasm-bindgen-cli binary itself compiled from trunk, you'd have to compile that from source</p>
</blockquote>



<a name="234910051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234910051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234910051">(Apr 16 2021 at 19:44)</a>:</h4>
<p>Ah.</p>



<a name="234910063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234910063" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234910063">(Apr 16 2021 at 19:44)</a>:</h4>
<p>so wasm-pack has to update.</p>



<a name="234910250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234910250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234910250">(Apr 16 2021 at 19:46)</a>:</h4>
<p>Ugh, this dependency chain is even deeper than I thought</p>



<a name="234910269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234910269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234910269">(Apr 16 2021 at 19:46)</a>:</h4>
<p>I thought it was going to be resolved with wasm-bingen</p>



<a name="234910345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Wasmtime%20for%20Wasm%20SIMD%20testing/near/234910345" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://rust-lang.github.io/zulip_archive/stream/257879-project-portable-simd/topic/Wasmtime.20for.20Wasm.20SIMD.20testing.html#234910345">(Apr 16 2021 at 19:47)</a>:</h4>
<p>Well, it's no rush so not a big deal</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>is it mature to switch to portable-simd? · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html">is it mature to switch to portable-simd?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261018409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261018409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261018409">(Nov 10 2021 at 16:52)</a>:</h4>
<p>Hey, we are users of packed_simd2, and someone is raising the idea of migrating to portable-simd. <a href="https://github.com/jorgecarleitao/arrow2/issues/580">https://github.com/jorgecarleitao/arrow2/issues/580</a> Is this something that you would recommend, or is it too soon? Some people use our lib in production. We are fine with backward incompatible changes, just not so much with unsoundness ^_^</p>



<a name="261019126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261019126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261019126">(Nov 10 2021 at 16:56)</a>:</h4>
<p>Hi!  I don't know if I would consider it "mature", but we are pretty confident about the soundness.  Since you are already using packed_simd in production I think it would probably be safe to use, as long as you are okay with occasional backwards-incompatible changes as we improve the API.</p>



<a name="261019427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261019427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261019427">(Nov 10 2021 at 16:58)</a>:</h4>
<p>It's worth noting that it will be available on nightly very soon as <code>std::simd</code> and we will be looking for people to try it out!</p>



<a name="261020510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261020510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261020510">(Nov 10 2021 at 17:05)</a>:</h4>
<p>Thanks for your pointers.</p>
<p>packed_simd2's API does not leak to our public API, so we do not care about breaking changes as they only affect our development.</p>
<p>We have a set of benchmarks and can identify regressions over some of the vertical and horizontal operations (including using .select), so that will probably be how we gauge. Do you consider performance degradations over packed_simd2 as regressions (that justify an issue on github?)</p>



<a name="261020979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261020979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261020979">(Nov 10 2021 at 17:08)</a>:</h4>
<p>feel free to open issues, idk if we'd consider them regressions or not tho, probably depends on the severity and difficulty of fixing</p>



<a name="261037266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261037266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261037266">(Nov 10 2021 at 18:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="399416">Jorge Leitao</span> <a href="#narrow/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F/near/261020510">said</a>:</p>
<blockquote>
<p>Thanks for your pointers.</p>
<p>packed_simd2's API does not leak to our public API, so we do not care about breaking changes as they only affect our development.</p>
<p>We have a set of benchmarks and can identify regressions over some of the vertical and horizontal operations (including using .select), so that will probably be how we gauge. Do you consider performance degradations over packed_simd2 as regressions (that justify an issue on github?)</p>
</blockquote>
<p>Strictly speaking: No.<br>
We do want to be aware of them, however.<br>
<code>portable-simd</code> is designed around a different view of constraints than <code>packed_simd</code> was.</p>



<a name="261037379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261037379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261037379">(Nov 10 2021 at 18:55)</a>:</h4>
<p>Namely: We no longer view "link directly against vendor intrinsics for each platform" as a good option. We might do so as an absolute last resort.</p>



<a name="261037780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261037780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261037780">(Nov 10 2021 at 18:58)</a>:</h4>
<p>I think to put it more simply, it's not a binary yes/no.  They are a regression to the extent that slow simd is useless.  If there is an instruction sequence that LLVM should be generating and it isn't, it is an issue, but we aren't necessarily considering it an issue with std::simd</p>



<a name="261037887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261037887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261037887">(Nov 10 2021 at 18:59)</a>:</h4>
<p>We're not taking on the responsibility of all codegen being perfectly optimized, but we are passing the issues down the line to LLVM when we find them</p>



<a name="261038159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261038159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261038159">(Nov 10 2021 at 19:01)</a>:</h4>
<p>Yeah. In certain niche cases, <code>packed_simd</code> likely has a better performance, at the cost of hardcoding each special architectural case into the library in a way that made it harder to maintain and use. We would still want to solve those problems, but ideally upstream in LLVM or something.</p>



<a name="261038265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261038265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261038265">(Nov 10 2021 at 19:01)</a>:</h4>
<p>there are also situations (comparisons in particular) where the codegen will be worse in the name of portable handling for e.g. nan/neg 0/etc. eventually something like "fast math" support might bridge the gap there.</p>



<a name="261054155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261054155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261054155">(Nov 10 2021 at 21:01)</a>:</h4>
<p>nice. <a href="https://github.com/jorgecarleitao/arrow2/issues/580#issuecomment-965728382">https://github.com/jorgecarleitao/arrow2/issues/580#issuecomment-965728382</a></p>
<blockquote>
<p>core_simd_sum 2^20 f32     time:   [174.18 us 174.37 us 174.59 us]<br>
packed_simd_sum 2^20 f32   time:   [183.91 us 184.10 us 184.33 us]<br>
nonsimd_sum 2^20 f32       time:   [193.12 us 194.76 us 197.03 us]<br>
naive_sum null 2^20 f32    time:   [1.6468 ms 1.6513 ms 1.6555 ms]</p>
</blockquote>



<a name="261096674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261096674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261096674">(Nov 11 2021 at 05:57)</a>:</h4>
<p>Ok, I summarized some of my findings here: <a href="https://github.com/DataEngineeringLabs/simd-benches">https://github.com/DataEngineeringLabs/simd-benches</a> . I am a bit surprised that not using packed nor core yields better results when nulls are involved (by 50%). I would be graceful If someone could help me understand whether I am using core_simd API incorrectly.</p>



<a name="261097061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261097061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261097061">(Nov 11 2021 at 06:04)</a>:</h4>
<p>what compiler options are you using, and what cpu do you have?</p>



<a name="261097831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261097831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261097831">(Nov 11 2021 at 06:21)</a>:</h4>
<p>dam, forgot about that. Was not using RUSTFLAGS. cpu: Intel(R) Xeon(R) Platinum 8171M CPU @ 2.60GHz . Added results for <code>-C target-cpu=native</code>, which did significantly improve on bitmap bench.</p>



<a name="261100448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261100448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261100448">(Nov 11 2021 at 07:03)</a>:</h4>
<p>well, i'm not at a computer to test portable-simd, but from reading your source, i'd guess <code>mask32x16::from_array</code> is the main culprit: proposed replacement implementation and current implementation of <code>from_array</code>: <a href="https://rust.godbolt.org/z/GdTx63axx">https://rust.godbolt.org/z/GdTx63axx</a></p>



<a name="261100546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261100546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261100546">(Nov 11 2021 at 07:05)</a>:</h4>
<p>Is that transmute valid?</p>



<a name="261100552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261100552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261100552">(Nov 11 2021 at 07:05)</a>:</h4>
<p>Might be a good way to go</p>



<a name="261100618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261100618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261100618">(Nov 11 2021 at 07:06)</a>:</h4>
<p>the transmute is valid since bool is always a single byte with 0 for false, 1 for true</p>



<a name="261100726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261100726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261100726">(Nov 11 2021 at 07:08)</a>:</h4>
<p>Ah so before 2018 the layout was not defined, which is what I was thinking of</p>



<a name="261100742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261100742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261100742">(Nov 11 2021 at 07:09)</a>:</h4>
<p>But yes it's valid now</p>



<a name="261101210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261101210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261101210">(Nov 11 2021 at 07:18)</a>:</h4>
<p><span class="user-mention" data-user-id="399416">@Jorge Leitao</span> bug <a href="https://github.com/rust-lang/portable-simd/issues/184">https://github.com/rust-lang/portable-simd/issues/184</a></p>



<a name="261103626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261103626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261103626">(Nov 11 2021 at 08:00)</a>:</h4>
<p>note: I added the bitmap case because we use the Apache Arrow in-memory format, which uses bitmaps to represent null values. Arrow uses bitmaps because AVX-512 uses them natively, and it was designed to hit those instructions (even though afaik we can't hit them yet).</p>



<a name="261103887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261103887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261103887">(Nov 11 2021 at 08:04)</a>:</h4>
<p>well...judging from the benchmarks, i'd guess <code>core_simd_sum bitmap</code> <em>is</em> using avx512</p>



<a name="261104027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261104027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261104027">(Nov 11 2021 at 08:06)</a>:</h4>
<p>cuz the bitmap benchmark is basically just as fast as the plain simd add benchmark</p>



<a name="261342527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261342527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261342527">(Nov 13 2021 at 05:55)</a>:</h4>
<p>Is the portable-simd still being published in crates, or we should adopt the latest nightly and follow it on the feature gate?</p>



<a name="261342583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261342583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261342583">(Nov 13 2021 at 05:57)</a>:</h4>
<p>We never published it as a crate, but yes you should use it from nightly.  It's not on nightly yet, but it did just merge to master, so it should be on nightly shortly.</p>



<a name="261342638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261342638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261342638">(Nov 13 2021 at 05:58)</a>:</h4>
<p>It should be available starting literally tomorrow.</p>



<a name="261342640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261342640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261342640">(Nov 13 2021 at 05:59)</a>:</h4>
<p>By "just" I mean within the hour, lol</p>



<a name="261344441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261344441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261344441">(Nov 13 2021 at 06:44)</a>:</h4>
<p>living on the moment! thanks; that will allow to use it on a published crate.</p>



<a name="261351252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261351252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261351252">(Nov 13 2021 at 09:38)</a>:</h4>
<p>Liiiittle longer looks like. Hours.</p>



<a name="261352519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261352519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ashley Mannix <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261352519">(Nov 13 2021 at 10:08)</a>:</h4>
<p><span aria-label="time" class="emoji emoji-1f557" role="img" title="time">:time:</span><span aria-label="eyes" class="emoji emoji-1f440" role="img" title="eyes">:eyes:</span></p>



<a name="261387519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261387519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261387519">(Nov 14 2021 at 00:03)</a>:</h4>
<p>Fixing the regression requires teaching <code>fn simd_cast</code> to not explode on <code>Simd&lt;isize, _&gt;</code>, it looks like.</p>



<a name="261388424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261388424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261388424">(Nov 14 2021 at 00:24)</a>:</h4>
<p>Is the performance still bad with the suggested fix?</p>



<a name="261389080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261389080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261389080">(Nov 14 2021 at 00:41)</a>:</h4>
<p><span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> The performance is good, but the suggested fix only works if you know your <code>Mask</code> isn't <code>Mask&lt;isize, _&gt;</code></p>



<a name="261390141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/is%20it%20mature%20to%20switch%20to%20portable-simd%3F/near/261390141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/is.20it.20mature.20to.20switch.20to.20portable-simd.3F.html#261390141">(Nov 14 2021 at 01:06)</a>:</h4>
<p>Oh right, I remember the issue now</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
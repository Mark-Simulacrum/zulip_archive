<html>
<head><meta charset="utf-8"><title>The matmul interpretation of swizzle · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/The.20matmul.20interpretation.20of.20swizzle.html">The matmul interpretation of swizzle</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="271347010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/The%20matmul%20interpretation%20of%20swizzle/near/271347010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/The.20matmul.20interpretation.20of.20swizzle.html#271347010">(Feb 09 2022 at 21:03)</a>:</h4>
<p>I have been staring at this and wondering if this would outperform <code>gather</code> for a temporary version of dynamic swizzles. <a href="https://en.wikipedia.org/wiki/Swizzling_(computer_graphics)">https://en.wikipedia.org/wiki/Swizzling_(computer_graphics)</a></p>



<a name="271347287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/The%20matmul%20interpretation%20of%20swizzle/near/271347287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/The.20matmul.20interpretation.20of.20swizzle.html#271347287">(Feb 09 2022 at 21:05)</a>:</h4>
<p>Probably only on small vectors.</p>



<a name="271348854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/The%20matmul%20interpretation%20of%20swizzle/near/271348854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/The.20matmul.20interpretation.20of.20swizzle.html#271348854">(Feb 09 2022 at 21:18)</a>:</h4>
<p>I think the shortest possible alternative is a sequence of comparisons and selects for each lane</p>



<a name="271483528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/The%20matmul%20interpretation%20of%20swizzle/near/271483528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/The.20matmul.20interpretation.20of.20swizzle.html#271483528">(Feb 10 2022 at 19:40)</a>:</h4>
<p>Yeah, that's what the matrix multiplication form effectively is, afaict.<br>
splatting each lane of the swizzled vector, iterating over the index vector to create ANDs of the splatted vectors, and then ORing the resulting masked vector together.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
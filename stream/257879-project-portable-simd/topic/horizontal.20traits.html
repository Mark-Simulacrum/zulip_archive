<html>
<head><meta charset="utf-8"><title>horizontal traits · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html">horizontal traits</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269770227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269770227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Goertzen <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269770227">(Jan 28 2022 at 17:23)</a>:</h4>
<p>Question: Can the <code>horizontal_xxx()</code> functions be traits?  <code>Add</code>,  <code>Mul</code>, and friends are very useful for writing generic simd functions, and having <code>horizontal_xxx()</code> would also be useful.  Use case: <a href="https://gist.github.com/goertzenator/9a47f2d1636a4724bf7d8038b5883a34">https://gist.github.com/goertzenator/9a47f2d1636a4724bf7d8038b5883a34</a></p>



<a name="269970344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269970344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269970344">(Jan 31 2022 at 01:30)</a>:</h4>
<p>That is an excellent question to which I believe no one has offered an answer firmly for or against.</p>



<a name="269970382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269970382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269970382">(Jan 31 2022 at 01:31)</a>:</h4>
<p>Even if we don't end up putting them in traits for whatever reason, I certainly imagine a crate could/should</p>



<a name="269972538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269972538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269972538">(Jan 31 2022 at 02:18)</a>:</h4>
<p><span class="user-mention silent" data-user-id="474881">Daniel Goertzen</span> <a href="#narrow/stream/257879-project-portable-simd/topic/horizontal.20traits/near/269770227">said</a>:</p>
<blockquote>
<p>[...] are very useful for writing generic simd functions</p>
</blockquote>
<p>Note that traits for <code>min</code> and <code>sqrt</code> and such would also be useful for generic scalar code, but <code>core</code> doesn't have them.  So it's not obvious to me that traits for horizontal stuff would be accepted.</p>
<p>That gives me an idea, though: Should <code>Simd</code> be <code>IntoIterator</code>, in such a way that it specializes some of the methods (like <code>sum</code> to <code>horizontal_sum</code>)?</p>



<a name="269972565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269972565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269972565">(Jan 31 2022 at 02:19)</a>:</h4>
<p>I guess iterator isn't quite the right thing, since the specialization would only work well so long as it hasn't been advanced.</p>



<a name="269973075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269973075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269973075">(Jan 31 2022 at 02:30)</a>:</h4>
<p>It's also not quite obvious how that would work. What happens if you turn it into an iterator, call <code>next</code>, and then sum it?</p>



<a name="269977176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269977176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269977176">(Jan 31 2022 at 03:56)</a>:</h4>
<p>Mask with the relevant identity?</p>



<a name="269980535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269980535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269980535">(Jan 31 2022 at 05:03)</a>:</h4>
<blockquote>
<p>Note that traits for min and sqrt and such would also be useful for generic scalar code, but core doesn't have them.</p>
</blockquote>
<p>Sounds like <code>core</code> should do that already.</p>



<a name="269980965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/269980965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#269980965">(Jan 31 2022 at 05:12)</a>:</h4>
<p>I think it would be hard to design. Certainly I don't think it should be one trait per operation...</p>



<a name="270873141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/270873141" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jorge Leitao <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#270873141">(Feb 06 2022 at 06:20)</a>:</h4>
<p>Rust stdlib does not do this for primitive types (e.g. i32, f32) - there is <code>num_traits</code> for this. If alignment with the rest of std is to be achieved, such traits should live in a separate crate?</p>



<a name="270873172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/horizontal%20traits/near/270873172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/horizontal.20traits.html#270873172">(Feb 06 2022 at 06:21)</a>:</h4>
<p>Apparently there has been some discussion about including something like <code>num_traits</code> in std, but in that case I think it would be best to coordinate that between scalars and simd types</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
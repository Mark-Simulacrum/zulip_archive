<html>
<head><meta charset="utf-8"><title>Bikeshedding typecast fn · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html">Bikeshedding typecast fn</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259149006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149006">(Oct 26 2021 at 19:31)</a>:</h4>
<p>Oh?</p>



<a name="259149069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149069">(Oct 26 2021 at 19:32)</a>:</h4>
<p>I think the name we pick should be very short, since it will be a common operation, hence why I suggested just plain <code>to</code></p>



<a name="259149109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149109">(Oct 26 2021 at 19:32)</a>:</h4>
<p>I don't like it because it's already a Simd, maybe not the same one, but the conversion is specifically the scalar inside</p>



<a name="259149163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149163">(Oct 26 2021 at 19:33)</a>:</h4>
<p>it should be easier to reach for than the equivalent bitcast</p>



<a name="259149168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149168">(Oct 26 2021 at 19:33)</a>:</h4>
<p>Simd is a type parameterized by that scalar tho'.</p>



<a name="259149187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149187">(Oct 26 2021 at 19:33)</a>:</h4>
<p>Plain <code>to</code> is maybe a little odd if you use type deduction and you just have <code>a = a.to()</code></p>



<a name="259149223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149223">(Oct 26 2021 at 19:33)</a>:</h4>
<p>like <code>x as _</code></p>



<a name="259149242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149242">(Oct 26 2021 at 19:33)</a>:</h4>
<p>Yeah it is, but that name implies you're turning something that isn't a Simd into a Simd, I think?</p>



<a name="259149338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149338">(Oct 26 2021 at 19:34)</a>:</h4>
<p>imho it implies your converting, <em>what</em> your converting is unsaid</p>



<a name="259149424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149424">(Oct 26 2021 at 19:35)</a>:</h4>
<p>remember <code>i32::into() -&gt; i64</code>? <code>to</code> can be similar</p>



<a name="259149603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149603">(Oct 26 2021 at 19:36)</a>:</h4>
<p>I mean,</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="fm">vec!</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">];</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">.</span><span class="n">to_vec</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="259149636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149636">(Oct 26 2021 at 19:36)</a>:</h4>
<p>I guess all I am getting at is that <code>to_int_unchecked</code> for example indicates that the scalar is changing</p>



<a name="259149637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149637" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149637">(Oct 26 2021 at 19:36)</a>:</h4>
<p>if you want to supply the target type: <code>Simd::&lt;f32, N&gt;::to::&lt;f64&gt;()</code></p>



<a name="259149685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149685">(Oct 26 2021 at 19:37)</a>:</h4>
<p>But fair.</p>



<a name="259149732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149732">(Oct 26 2021 at 19:37)</a>:</h4>
<p>I agree that it wouldn't be wrong, I just don't think that it's clear either</p>



<a name="259149757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149757">(Oct 26 2021 at 19:37)</a>:</h4>
<p>I don't think plain <code>to</code> is either</p>



<a name="259149833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149833">(Oct 26 2021 at 19:38)</a>:</h4>
<p><code>to</code> is cute but would wind up being a bit cryptic often, yeah.</p>



<a name="259149876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149876">(Oct 26 2021 at 19:38)</a>:</h4>
<p>I mean I guess we could just leave it to normal try_into/into conversions.</p>



<a name="259149884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149884">(Oct 26 2021 at 19:38)</a>:</h4>
<p>ugh no.</p>



<a name="259149900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259149900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259149900">(Oct 26 2021 at 19:38)</a>:</h4>
<p>I agree it's the same as <code>as _</code> but that's a commonly known pattern</p>



<a name="259150015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150015">(Oct 26 2021 at 19:39)</a>:</h4>
<p><code>into</code>, because it's a trait, makes it a pain to supply the target type, <code>to</code> you can just write <code>x.to::&lt;f32&gt;()</code></p>



<a name="259150019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150019">(Oct 26 2021 at 19:39)</a>:</h4>
<p>true.</p>



<a name="259150135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150135">(Oct 26 2021 at 19:40)</a>:</h4>
<p>we should split this off into a simd type conversions topic...</p>



<a name="259150159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150159">(Oct 26 2021 at 19:40)</a>:</h4>
<p>Eh it's relevant to this lol</p>



<a name="259150230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150230">(Oct 26 2021 at 19:41)</a>:</h4>
<p>it's relevant, but anyone looking for type conversions discussion will miss it</p>



<a name="259150256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150256">(Oct 26 2021 at 19:41)</a>:</h4>
<p>If there wasn't already a naming convention in rust I would just go with <code>cast</code></p>



<a name="259150547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150547">(Oct 26 2021 at 19:43)</a>:</h4>
<p>I dislike <code>cast</code> because it is ambiguous on the cost dimension.</p>



<a name="259150634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150634">(Oct 26 2021 at 19:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="229517">Jacob Lifshay</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn/near/259150135">said</a>:</p>
<blockquote>
<p>we should split this off into a simd type conversions topic...</p>
</blockquote>
<p>Done.</p>



<a name="259150772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150772">(Oct 26 2021 at 19:45)</a>:</h4>
<p>one other benefit of <code>to</code> over <code>into</code>: you only have to specify the target lane type, you don't have to write out the full target simd type</p>



<a name="259150778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150778">(Oct 26 2021 at 19:45)</a>:</h4>
<p>Yeah it is a little ambiguous, though the convention we have isn't really suitable for capturing the cost either</p>



<a name="259150812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150812">(Oct 26 2021 at 19:45)</a>:</h4>
<p>hm.</p>



<a name="259150872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150872">(Oct 26 2021 at 19:46)</a>:</h4>
<p>Technically this should be <code>into_</code> then I think, since integer casts are so inexpensive</p>



<a name="259150876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150876">(Oct 26 2021 at 19:46)</a>:</h4>
<p>We could just use separate functions.</p>



<a name="259150932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150932">(Oct 26 2021 at 19:46)</a>:</h4>
<p>I considered that.  It's much more explicit</p>



<a name="259150939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259150939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259150939">(Oct 26 2021 at 19:46)</a>:</h4>
<p>separate functions makes it a pain to use generically...</p>



<a name="259151049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151049">(Oct 26 2021 at 19:47)</a>:</h4>
<p>Yeah, I kind of agree, though it's no worse than <code>to_int_unchecked</code></p>



<a name="259151310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151310">(Oct 26 2021 at 19:49)</a>:</h4>
<p>I was thinking it would be split along the integer/float dimension.</p>



<a name="259151507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151507">(Oct 26 2021 at 19:51)</a>:</h4>
<p>I'm not exactly sure what you'd call the width conversions</p>



<a name="259151533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151533">(Oct 26 2021 at 19:51)</a>:</h4>
<p><code>resize</code>. :^)</p>



<a name="259151623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151623">(Oct 26 2021 at 19:52)</a>:</h4>
<p>idea:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">trait</span><span class="w"> </span><span class="n">SimdCast</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">cast</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="p">(</span><span class="n">v</span>: <span class="nc">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Simd</span><span class="o">&lt;</span><span class="bp">Self</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">to</span><span class="o">&lt;</span><span class="n">Tgt</span>: <span class="nc">SimdCast</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;&gt;</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Simd</span><span class="o">&lt;</span><span class="n">Tgt</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">SimdCast</span>::<span class="n">cast</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="259151922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151922">(Oct 26 2021 at 19:54)</a>:</h4>
<p>I think my fundamental issue is still that <code>x = x.to()</code> is nearly meaningless, though the implementation is good</p>



<a name="259151997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259151997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259151997">(Oct 26 2021 at 19:55)</a>:</h4>
<p>then write <code>x = x.to::&lt;f32&gt;()</code> ... much more obvious</p>



<a name="259152177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152177">(Oct 26 2021 at 19:56)</a>:</h4>
<p>imho any word we pick will have the same issue as <code>x = x.to()</code></p>



<a name="259152181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152181">(Oct 26 2021 at 19:56)</a>:</h4>
<p>I agree with Caleb that I don't want to trust people that much to not write bad code lol</p>



<a name="259152407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152407">(Oct 26 2021 at 19:57)</a>:</h4>
<p>it's quite similar to <code>x = x.into()</code> imho</p>



<a name="259152484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152484">(Oct 26 2021 at 19:58)</a>:</h4>
<p>Hmm that's bounded by each having an explicit implementation (even if it's often in terms of <code>From</code>).</p>



<a name="259152506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152506">(Oct 26 2021 at 19:58)</a>:</h4>
<p><code>Into</code>, like <code>as</code> are common though</p>



<a name="259152511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152511">(Oct 26 2021 at 19:58)</a>:</h4>
<p>So there's a search space.</p>



<a name="259152540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152540" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152540">(Oct 26 2021 at 19:58)</a>:</h4>
<p>You see a plain <code>into()</code> and know exactly what it's doing</p>



<a name="259152545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152545">(Oct 26 2021 at 19:58)</a>:</h4>
<p>Yeah.</p>



<a name="259152603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152603">(Oct 26 2021 at 19:59)</a>:</h4>
<p>ok, how about <code>str::parse</code> which has a nearly identical design?</p>



<a name="259152605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152605">(Oct 26 2021 at 19:59)</a>:</h4>
<p>"convert the type in a reasonable way" basically</p>



<a name="259152710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152710">(Oct 26 2021 at 19:59)</a>:</h4>
<p>That's always from str to something else.</p>



<a name="259152744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152744">(Oct 26 2021 at 20:00)</a>:</h4>
<p>Parse is a word that can be searched, and also guessed by knowing the what the word parse means</p>



<a name="259152820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152820">(Oct 26 2021 at 20:00)</a>:</h4>
<p>It's literally impossible to search the word "to"</p>



<a name="259152842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152842">(Oct 26 2021 at 20:00)</a>:</h4>
<p>yes.</p>



<a name="259152916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152916">(Oct 26 2021 at 20:00)</a>:</h4>
<p>k, name it <code>cast</code> then</p>



<a name="259152924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152924" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152924">(Oct 26 2021 at 20:00)</a>:</h4>
<p>my brain, throwing darts at a wall: <code>fn rescale</code></p>



<a name="259152962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259152962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259152962">(Oct 26 2021 at 20:01)</a>:</h4>
<p>I'm amenable to cast</p>



<a name="259153010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153010">(Oct 26 2021 at 20:01)</a>:</h4>
<p>I definitely have begun to see the merits of <code>fn cast</code>, though I want to swirl it around in my brain before agreeing outright.</p>



<a name="259153018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153018" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153018">(Oct 26 2021 at 20:01)</a>:</h4>
<p>It doesn't indicate cost but converting ints vs floats is totally different in cost anyway</p>



<a name="259153065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153065">(Oct 26 2021 at 20:01)</a>:</h4>
<p><code>rescale</code> makes me think of multiplying lanes by some scaling factor, like to_degrees</p>



<a name="259153109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153109">(Oct 26 2021 at 20:02)</a>:</h4>
<p>In a sense, it is, multiplying the bit count. :^)</p>



<a name="259153174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153174">(Oct 26 2021 at 20:02)</a>:</h4>
<p>e.g. <code>rescale</code> &lt;-&gt; <code>x * 3.456</code></p>



<a name="259153178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153178">(Oct 26 2021 at 20:02)</a>:</h4>
<p>It's also mostly a pun on "scalar" tho'.</p>



<a name="259153259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153259">(Oct 26 2021 at 20:03)</a>:</h4>
<p>And we have clearly hit the point where lobbing ideas from left field is not going to hurt.</p>



<a name="259153480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153480">(Oct 26 2021 at 20:04)</a>:</h4>
<p>i'd be happy if we used the <code>to</code> API I posted, but renamed to <code>cast</code></p>



<a name="259153527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153527">(Oct 26 2021 at 20:04)</a>:</h4>
<p>Yeah, I'd be okay with that too</p>



<a name="259153629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153629">(Oct 26 2021 at 20:05)</a>:</h4>
<p>We probably want to add a simd_cast_checked intrinsic for that</p>



<a name="259153667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153667">(Oct 26 2021 at 20:05)</a>:</h4>
<p>lol.</p>



<a name="259153668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153668">(Oct 26 2021 at 20:05)</a>:</h4>
<p>Well simd_saturating_cast might be more descriptive</p>



<a name="259153677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153677">(Oct 26 2021 at 20:05)</a>:</h4>
<p>yes.</p>



<a name="259153696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153696">(Oct 26 2021 at 20:06)</a>:</h4>
<p>Well.</p>



<a name="259153732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153732">(Oct 26 2021 at 20:06)</a>:</h4>
<p>...not quite.</p>



<a name="259153744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153744">(Oct 26 2021 at 20:06)</a>:</h4>
<p>wait, wait, <code>as</code> isn't checked...</p>



<a name="259153755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153755">(Oct 26 2021 at 20:06)</a>:</h4>
<p>It is now!</p>



<a name="259153774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153774">(Oct 26 2021 at 20:06)</a>:</h4>
<p>It's not checked, it's saturating</p>



<a name="259153787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153787">(Oct 26 2021 at 20:06)</a>:</h4>
<p>aaa why does std::arch have to be out-of-compiler.</p>



<a name="259153795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153795">(Oct 26 2021 at 20:06)</a>:</h4>
<p>makes it hard to coordinate.</p>



<a name="259153804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153804">(Oct 26 2021 at 20:06)</a>:</h4>
<p>sigh.</p>



<a name="259153813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153813">(Oct 26 2021 at 20:06)</a>:</h4>
<p>Well, we are too, pot, kettle</p>



<a name="259153821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153821">(Oct 26 2021 at 20:06)</a>:</h4>
<p>Lol</p>



<a name="259153849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153849">(Oct 26 2021 at 20:07)</a>:</h4>
<p>Eh the subtree will be simultaneously editable, which is what really matters.</p>



<a name="259153854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153854">(Oct 26 2021 at 20:07)</a>:</h4>
<p>saturating isn't checked...checked is panicking or returning result/option</p>



<a name="259153873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153873">(Oct 26 2021 at 20:07)</a>:</h4>
<p>trollpost: <code>simd_as</code></p>



<a name="259153906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153906">(Oct 26 2021 at 20:07)</a>:</h4>
<p>Yeah that's why I amended what I said</p>



<a name="259153941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259153941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259153941">(Oct 26 2021 at 20:07)</a>:</h4>
<p>Lol, it's dumb but I'm not totally opposed to that because it's... Accurate</p>



<a name="259154040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154040">(Oct 26 2021 at 20:08)</a>:</h4>
<p>also, saturating doesn't match <code>as</code> for int -&gt; int</p>



<a name="259154118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154118">(Oct 26 2021 at 20:08)</a>:</h4>
<p>Yes, I was partly saying it because that is what the <code>"platform-intrinsic"</code> should be named.</p>



<a name="259154205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154205">(Oct 26 2021 at 20:09)</a>:</h4>
<p>how about naming the intrinsic <code>simd_as</code> since it matches <code>as</code>'s behavior? Imho the public Simd method shouldn't be named <code>simd_as</code> tho</p>



<a name="259154222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154222">(Oct 26 2021 at 20:09)</a>:</h4>
<p>I'm okay with naming the platform intrinsic that lol</p>



<a name="259154227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154227">(Oct 26 2021 at 20:09)</a>:</h4>
<p>but tbh it's not a <em>terrible</em> name for the user fn</p>



<a name="259154244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154244">(Oct 26 2021 at 20:09)</a>:</h4>
<p>maybe <code>as_</code>?</p>



<a name="259154248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154248">(Oct 26 2021 at 20:10)</a>:</h4>
<p>CONSIDERING THE ALTERNATIVES</p>



<a name="259154321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154321">(Oct 26 2021 at 20:10)</a>:</h4>
<p><code>as_</code> in function names has a different implication, unfortunately</p>



<a name="259154329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154329">(Oct 26 2021 at 20:10)</a>:</h4>
<p>yeah.</p>



<a name="259154400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154400">(Oct 26 2021 at 20:11)</a>:</h4>
<p><code>lw_as</code> -- lanewise as</p>



<a name="259154403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154403">(Oct 26 2021 at 20:11)</a>:</h4>
<p>If there wasn't essentially a language-wide tendency away from <code>as</code>, I would seriously propose just implementing <code>as</code> for Simd.</p>



<a name="259154436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154436">(Oct 26 2021 at 20:11)</a>:</h4>
<p>Ohh, <code>lanes_as</code></p>



<a name="259154459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154459">(Oct 26 2021 at 20:11)</a>:</h4>
<p>Hmm that could work</p>



<a name="259154573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154573">(Oct 26 2021 at 20:12)</a>:</h4>
<p>I still don't love it, but I don't love <code>lanes_eq</code> either and I think it's the best name we've come up with</p>



<a name="259154618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154618">(Oct 26 2021 at 20:12)</a>:</h4>
<p>And the type it should be templated on is the scalar, of course</p>



<a name="259154650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154650">(Oct 26 2021 at 20:12)</a>:</h4>
<p>Ugh I've been writing too much C++</p>



<a name="259154656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154656">(Oct 26 2021 at 20:12)</a>:</h4>
<p>Generic over</p>



<a name="259154715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154715">(Oct 26 2021 at 20:13)</a>:</h4>
<p>there but for the grace of Ferris</p>



<a name="259154723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154723">(Oct 26 2021 at 20:13)</a>:</h4>
<p>same thing...:)</p>



<a name="259154773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154773">(Oct 26 2021 at 20:13)</a>:</h4>
<p><code>x.lanes_as::&lt;f32&gt;()</code> isn't too bad</p>



<a name="259154833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154833">(Oct 26 2021 at 20:14)</a>:</h4>
<p>It reads well</p>



<a name="259154872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154872">(Oct 26 2021 at 20:14)</a>:</h4>
<p>if only there was a shorter way to write <code>lanes_as</code>...</p>



<a name="259154930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154930" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154930">(Oct 26 2021 at 20:14)</a>:</h4>
<p>I don't think it needs to be shorter</p>



<a name="259154967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154967">(Oct 26 2021 at 20:15)</a>:</h4>
<p>8 characters is pretty reasonable to me</p>



<a name="259154996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259154996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259154996">(Oct 26 2021 at 20:15)</a>:</h4>
<p>trying to avoid beginners reaching for <code>into</code> or similar and getting bitcast by mistake...C stupidly made that the default</p>



<a name="259155110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155110">(Oct 26 2021 at 20:16)</a>:</h4>
<p>Luckily our bitcasts are very explicit</p>



<a name="259155146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155146">(Oct 26 2021 at 20:16)</a>:</h4>
<p><span class="user-mention" data-user-id="229517">@Jacob Lifshay</span> C made what huh?</p>



<a name="259155191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155191">(Oct 26 2021 at 20:17)</a>:</h4>
<p>in C, <code>a = (f32x4)b</code> does a bitcast</p>



<a name="259155207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155207">(Oct 26 2021 at 20:17)</a>:</h4>
<p>oh wild.</p>



<a name="259155245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155245">(Oct 26 2021 at 20:17)</a>:</h4>
<p>specifically only for SIMD types, scalars are more sane</p>



<a name="259155390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155390">(Oct 26 2021 at 20:18)</a>:</h4>
<p>simd casting is spelled <code>a = __builtin_convertvector(b, f32x4)</code></p>



<a name="259155438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155438">(Oct 26 2021 at 20:19)</a>:</h4>
<p>But wait, that is a GCC extension, innit</p>



<a name="259155457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155457">(Oct 26 2021 at 20:19)</a>:</h4>
<p>Yep</p>



<a name="259155469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155469">(Oct 26 2021 at 20:19)</a>:</h4>
<p>yup, plain C doesn't have simd at all</p>



<a name="259155479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155479">(Oct 26 2021 at 20:20)</a>:</h4>
<p>Yeah that's GCC's fault. :P</p>



<a name="259155527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155527">(Oct 26 2021 at 20:20)</a>:</h4>
<p>Perhaps also the arm specification, though, which is a C language extension</p>



<a name="259155610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155610">(Oct 26 2021 at 20:20)</a>:</h4>
<p><code>__builtin_convertvector</code> is actually a clang extension, gcc didn't have a target-generic way to do that for the longest time</p>



<a name="259155634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155634">(Oct 26 2021 at 20:21)</a>:</h4>
<p>oh wild.</p>



<a name="259155644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155644">(Oct 26 2021 at 20:21)</a>:</h4>
<p>Still GCC's fault.</p>



<a name="259155658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155658">(Oct 26 2021 at 20:21)</a>:</h4>
<p>yup!</p>



<a name="259155943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Bikeshedding%20typecast%20fn/near/259155943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Bikeshedding.20typecast.20fn.html#259155943">(Oct 26 2021 at 20:24)</a>:</h4>
<p>gcc didn't implement it till 2019!! <a href="https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85052">https://gcc.gnu.org/bugzilla/show_bug.cgi?id=85052</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
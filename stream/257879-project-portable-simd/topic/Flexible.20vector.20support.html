<html>
<head><meta charset="utf-8"><title>Flexible vector support · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html">Flexible vector support</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="253475062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253475062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253475062">(Sep 15 2021 at 19:39)</a>:</h4>
<p><span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> I don't believe that multiversioning will be required.</p>



<a name="253475342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253475342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253475342">(Sep 15 2021 at 19:41)</a>:</h4>
<p>It was one of the methods <span class="user-mention" data-user-id="229517">@Jacob Lifshay</span> suggested, I'm sure other methods are possible too. What are you thinking?</p>



<a name="253477292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253477292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253477292">(Sep 15 2021 at 19:55)</a>:</h4>
<p>We will have to encode a minimum length, probably.</p>



<a name="253477459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253477459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253477459">(Sep 15 2021 at 19:56)</a>:</h4>
<p>Are you suggesting an entirely different type which is unsized?</p>



<a name="253477560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253477560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253477560">(Sep 15 2021 at 19:57)</a>:</h4>
<p>Also, what would you have it do when you don't have SVE, but you do have AVX etc</p>



<a name="253477770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253477770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253477770">(Sep 15 2021 at 19:59)</a>:</h4>
<p>I believe RVV support, with a correct compiler, should be able to take our static-length API and unroll it into a correctly performing vector loop that uses the maximum size available, pretending that it is handling multiples of a vector length.</p>



<a name="253477851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253477851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253477851">(Sep 15 2021 at 19:59)</a>:</h4>
<p>SVE is a little more complicated.</p>



<a name="253477940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253477940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253477940">(Sep 15 2021 at 20:00)</a>:</h4>
<p>Ah, those are two different things</p>



<a name="253478041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253478041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253478041">(Sep 15 2021 at 20:00)</a>:</h4>
<p>That's why I suggested multiversioning--thats the most common interface</p>



<a name="253478199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253478199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253478199">(Sep 15 2021 at 20:01)</a>:</h4>
<p>It doesn't require a version per HW vector length tho'.</p>



<a name="253478372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253478372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253478372">(Sep 15 2021 at 20:02)</a>:</h4>
<p>Just to make sure we're on the same page--what are you calling flexible vectors?</p>



<a name="253478469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Flexible%20vector%20support/near/253478469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Flexible.20vector.20support.html#253478469">(Sep 15 2021 at 20:03)</a>:</h4>
<p>Other than the power of two limitation, I think our current API can take full advantage of RVV vectors?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
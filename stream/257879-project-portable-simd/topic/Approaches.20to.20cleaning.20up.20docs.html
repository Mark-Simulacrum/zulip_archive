<html>
<head><meta charset="utf-8"><title>Approaches to cleaning up docs · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html">Approaches to cleaning up docs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261436620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261436620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261436620">(Nov 14 2021 at 20:25)</a>:</h4>
<p>Right now, if someone looks at the docs, they see like a million versions of certain functions on <code>Simd&lt;T, L&gt;</code>. I have drafted the beginnings of a PR that offers a way out: <a href="https://github.com/rust-lang/portable-simd/pull/191">https://github.com/rust-lang/portable-simd/pull/191</a></p>



<a name="261436785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261436785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261436785">(Nov 14 2021 at 20:28)</a>:</h4>
<p>I'll have to take a closer look later, but this would require importing traits, correct?</p>



<a name="261436793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261436793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261436793">(Nov 14 2021 at 20:28)</a>:</h4>
<p>No.</p>



<a name="261436799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261436799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261436799">(Nov 14 2021 at 20:29)</a>:</h4>
<p>Works the same way Select does.</p>



<a name="261436940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261436940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261436940">(Nov 14 2021 at 20:32)</a>:</h4>
<p>Oh gotcha. Yeah, I like that.  Take a look at how I did lanes_eq etc, there's also the option of putting marker traits on the scalar like that</p>



<a name="261436948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261436948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261436948">(Nov 14 2021 at 20:32)</a>:</h4>
<p>Slight difference, but I think that might actually be preferable</p>



<a name="261437023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437023">(Nov 14 2021 at 20:34)</a>:</h4>
<p>Yeah, I will try to get rid of SimdSInt and just have SInt.</p>



<a name="261437046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437046">(Nov 14 2021 at 20:35)</a>:</h4>
<p>But the way I wound up muddling through last night with the type constraints, for some reason it worked more easily with SimdSInt still in play.</p>



<a name="261437051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437051">(Nov 14 2021 at 20:35)</a>:</h4>
<p>Makes sense</p>



<a name="261437119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437119">(Nov 14 2021 at 20:37)</a>:</h4>
<p>I think if we are doing marker traits on the scalars I might prefer doing them per-function, which would end up with more traits but also easier to extend in the future</p>



<a name="261437182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437182">(Nov 14 2021 at 20:38)</a>:</h4>
<p>Hm, so my thought was designing it around the category of type.</p>



<a name="261437191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437191">(Nov 14 2021 at 20:38)</a>:</h4>
<p>Yeah, my only concern with that is certain things may break that in the future</p>



<a name="261437193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437193">(Nov 14 2021 at 20:38)</a>:</h4>
<p>Hmm.</p>



<a name="261437207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437207">(Nov 14 2021 at 20:39)</a>:</h4>
<p>Like if we supported non-zero ints but we had a trait for all ints that already defined a <code>zero</code> fn, for example</p>



<a name="261437216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437216">(Nov 14 2021 at 20:39)</a>:</h4>
<p>Ah I see.</p>



<a name="261437232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437232">(Nov 14 2021 at 20:40)</a>:</h4>
<p>Instead we could implement Zero for all types except that, but implement Add for all of them</p>



<a name="261437273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437273">(Nov 14 2021 at 20:40)</a>:</h4>
<p>Something like that</p>



<a name="261437291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437291">(Nov 14 2021 at 20:40)</a>:</h4>
<p>It would be easy enough to make a crate that does categories on top of that if someone wants categories</p>



<a name="261437367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437367">(Nov 14 2021 at 20:42)</a>:</h4>
<p>I'm thinking we basically are implementing std::ops for simd</p>



<a name="261437373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437373">(Nov 14 2021 at 20:43)</a>:</h4>
<p>Yeah, I think we still want to incline towards natural categories somewhat but I understand what you mean now.</p>



<a name="261437387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437387">(Nov 14 2021 at 20:43)</a>:</h4>
<p>Yeah I think there's room for it in the future, but might be jumping the gun doing categories now (in std, I mean)</p>



<a name="261437437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437437">(Nov 14 2021 at 20:44)</a>:</h4>
<p>Maybe. I think it's an idea whose time has come at this point since, effectively, we now have this need to describe a scalar data type in a way that makes sense.</p>



<a name="261437455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437455">(Nov 14 2021 at 20:45)</a>:</h4>
<p>could we just do</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Add</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">Add</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">SimdElement</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="261437499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437499">(Nov 14 2021 at 20:46)</a>:</h4>
<p>Plausible.</p>



<a name="261437502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437502">(Nov 14 2021 at 20:46)</a>:</h4>
<p>I was thinking the markers would be super traits of SimdElement</p>



<a name="261437519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261437519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261437519">(Nov 14 2021 at 20:47)</a>:</h4>
<p>But yeah, that's basically what I was imagining</p>



<a name="261443174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261443174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261443174">(Nov 14 2021 at 23:04)</a>:</h4>
<p>I was thinking more about this, I think maybe we can group functionality, but should still divide it up more finely than the number category</p>



<a name="261443210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261443210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261443210">(Nov 14 2021 at 23:05)</a>:</h4>
<p>Like there can be a <code>Comparable</code> trait that gives you all of the <code>lanes_*</code> functions, <code>Arithmetic</code> can give you regular math, <code>BitArithmetic</code> can give you bitwise ops</p>



<a name="261443271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261443271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261443271">(Nov 14 2021 at 23:06)</a>:</h4>
<p>neg and abs probably belong in <code>SignedArithmetic</code> or something like that</p>



<a name="261443296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261443296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261443296">(Nov 14 2021 at 23:07)</a>:</h4>
<p>that's making some assumptions but much fewer</p>



<a name="261713512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261713512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261713512">(Nov 16 2021 at 22:03)</a>:</h4>
<p>Okay, pulled out <code>SimdSInt</code> trivially.<br>
tbqh I have no idea why I needed it before.</p>



<a name="261714172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261714172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261714172">(Nov 16 2021 at 22:09)</a>:</h4>
<p>One thing I realized, that could complicate this a bit, is that the integer and float versions of various functions might end up being fairly different and definitely need different docs</p>



<a name="261714198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261714198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261714198">(Nov 16 2021 at 22:09)</a>:</h4>
<p>Then throw pointers in there...</p>



<a name="261714349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261714349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261714349">(Nov 16 2021 at 22:10)</a>:</h4>
<p>Not necessarily a problem, but something to be aware of</p>



<a name="261714700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261714700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261714700">(Nov 16 2021 at 22:13)</a>:</h4>
<p>Well, that's why my initial intention was to simply impl <code>SInt</code>, <code>UInt</code>, and <code>Float</code>, <span class="user-mention" data-user-id="312331">@Caleb Zulawski</span>.</p>



<a name="261714736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261714736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261714736">(Nov 16 2021 at 22:13)</a>:</h4>
<p>So that functions with 10 versions now have 3, with 2 now have 1, with 8 now have 2.</p>



<a name="261715172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715172">(Nov 16 2021 at 22:17)</a>:</h4>
<p>Maybe I'm missing something, wouldn't there only be one neg function for example?</p>



<a name="261715186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715186" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715186">(Nov 16 2021 at 22:17)</a>:</h4>
<p>Even though it exists for both floats and integers</p>



<a name="261715481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715481">(Nov 16 2021 at 22:19)</a>:</h4>
<p>Well when we poke a float with <code>simd_neg</code>, we set the sign bit.<br>
When we poke a signed integer, we do a 2s complement flip, so 1 becomes -1, so e.g. <code>0b0000_0001u8 as i8</code> becomes <code>0b1111_1111u8 as i8</code>.</p>



<a name="261715601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715601">(Nov 16 2021 at 22:20)</a>:</h4>
<p>I'm not suggesting anything that deep</p>



<a name="261715623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715623">(Nov 16 2021 at 22:20)</a>:</h4>
<p>This is why my inclination was to define by type, because what this means is abs is abs arithmetically but not bit-operationally.</p>



<a name="261715675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715675">(Nov 16 2021 at 22:21)</a>:</h4>
<p>Neg is a bad example</p>



<a name="261715678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715678">(Nov 16 2021 at 22:21)</a>:</h4>
<p>And trying to abstract over that difference is actually a mistake, imo.</p>



<a name="261715684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715684">(Nov 16 2021 at 22:21)</a>:</h4>
<p>Take abs</p>



<a name="261715691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715691">(Nov 16 2021 at 22:21)</a>:</h4>
<p>It's a good example. :D</p>



<a name="261715710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715710">(Nov 16 2021 at 22:21)</a>:</h4>
<p>How can you have more than one function named abs?</p>



<a name="261715798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715798">(Nov 16 2021 at 22:22)</a>:</h4>
<p>You cannot.<br>
But it can have different implementations based on what you are interacting with.</p>



<a name="261715881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715881">(Nov 16 2021 at 22:22)</a>:</h4>
<p>Sure. So the documentation will be shared, which is what I was saying</p>



<a name="261715919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715919">(Nov 16 2021 at 22:23)</a>:</h4>
<p><em>headtilt</em></p>



<a name="261715987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261715987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261715987">(Nov 16 2021 at 22:23)</a>:</h4>
<p>Abs is different for floats and ints</p>



<a name="261716033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716033">(Nov 16 2021 at 22:24)</a>:</h4>
<p>...No, it won't be?</p>



<a name="261716052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716052">(Nov 16 2021 at 22:24)</a>:</h4>
<p>I...</p>



<a name="261716093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716093">(Nov 16 2021 at 22:24)</a>:</h4>
<p>They handle T::MAX differently no?</p>



<a name="261716139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716139">(Nov 16 2021 at 22:25)</a>:</h4>
<p>So, I am going to back up to my original design here and then implement that and we can subslice it further after we have it in front of us and can actually run <code>cargo doc --open</code> and see what we are talking about.</p>



<a name="261716171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716171">(Nov 16 2021 at 22:25)</a>:</h4>
<p>Is that okay?</p>



<a name="261716206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716206">(Nov 16 2021 at 22:25)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> might be interested in this conversation, since part of the issue is a rustdoc issue</p>



<a name="261716208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716208">(Nov 16 2021 at 22:25)</a>:</h4>
<p>Do you understand what I am saying?</p>



<a name="261716284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716284">(Nov 16 2021 at 22:26)</a>:</h4>
<p>I believe I do understand what you are saying.</p>



<a name="261716413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716413">(Nov 16 2021 at 22:27)</a>:</h4>
<p>I'm just saying that floats and ints will share documentation, and for some functions that will need to be addressed</p>



<a name="261716448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716448">(Nov 16 2021 at 22:27)</a>:</h4>
<p>The documentation will need to refer to both cases</p>



<a name="261716462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716462">(Nov 16 2021 at 22:27)</a>:</h4>
<p><em>head tilts</em></p>



<a name="261716561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716561">(Nov 16 2021 at 22:28)</a>:</h4>
<p><code>abs</code> will need to indicate it does something different for ints and floats</p>



<a name="261716602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716602">(Nov 16 2021 at 22:28)</a>:</h4>
<p>For example</p>



<a name="261716622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716622">(Nov 16 2021 at 22:28)</a>:</h4>
<p>...Yes, I am aware of this problem.</p>



<a name="261716648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716648">(Nov 16 2021 at 22:29)</a>:</h4>
<p>Okay that's all I was saying from the beginning</p>



<a name="261716666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261716666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261716666">(Nov 16 2021 at 22:29)</a>:</h4>
<p>It's something we need to be aware of</p>



<a name="261717523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261717523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261717523">(Nov 16 2021 at 22:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209168">Thom Chiovoloni</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs/near/261716206">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> might be interested in this conversation, since part of the issue is a rustdoc issue</p>
</blockquote>
<p>I don't have time to read the backscroll - I replied on <span class="user-mention silent" data-user-id="281757">Jubilee</span>'s PR, has anything changed since?</p>



<a name="261717635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261717635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261717635">(Nov 16 2021 at 22:36)</a>:</h4>
<p>I don't think so.</p>



<a name="261842845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261842845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261842845">(Nov 17 2021 at 20:20)</a>:</h4>
<p><span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> The ones which require an implementation on the vector are the ones which require static dispatch on Simd's type argument. The operation for each must be different. The intrinsics are not polymorphic over it, and it is questionable whether they should be or could be.</p>



<a name="261843378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261843378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261843378">(Nov 17 2021 at 20:24)</a>:</h4>
<p>As for the name and division of the trait bounds, I don't really care that much, but we have had libs members repeatedly express support to us for the idea of introducing trait-based categorization into std and the bound is convenient if implemented thusly. I can rename it to Bikeshed if you like and we can slice it apart later.</p>



<a name="261843558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261843558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261843558">(Nov 17 2021 at 20:25)</a>:</h4>
<p>With the latter part I think I already gave my concern that it's potentially an issue in the future if we try to add more scalar types</p>



<a name="261843646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261843646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261843646">(Nov 17 2021 at 20:26)</a>:</h4>
<p>The way this works really, really depends on all of our types being POD.</p>



<a name="261843670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261843670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261843670">(Nov 17 2021 at 20:26)</a>:</h4>
<p>With all bit values being valid.</p>



<a name="261843822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261843822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261843822">(Nov 17 2021 at 20:27)</a>:</h4>
<p>Yeah, which potentially makes sense, but I do think there's value to allowing things like non null pointers, and that pretty easily extends to non zero numbers etc</p>



<a name="261844007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261844007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261844007">(Nov 17 2021 at 20:29)</a>:</h4>
<p>But regardless, I mostly don't care much at the moment. I am trying to address a problem, now, that people can't even open the docs because it ships with over 5 megabytes of HTML, and if I can do this much refactoring in an afternoon, I am hard pressed to believe this is actually going to introduce problems down the line unless you are saying you want to stabilize the API tomorrow and make no changes.</p>



<a name="261844226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261844226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261844226">(Nov 17 2021 at 20:30)</a>:</h4>
<p>I'm not totally opposed, but I don't think changing the API purely to fix a documentation issue is necessarily correct, I'm also concerned about the inconsistency in how the traits are implemented</p>



<a name="261844409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261844409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261844409">(Nov 17 2021 at 20:32)</a>:</h4>
<p>It would also be totally legitimate for rustdoc to collapse all functions that have identical function signatures but different type parameters, and it would have the same effect but no added traits</p>



<a name="261844564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261844564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261844564">(Nov 17 2021 at 20:33)</a>:</h4>
<p>i also have some concerns about a rustdoc bug motivating changes in the api design, although i agree its important to address somehow</p>



<a name="261844573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261844573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261844573">(Nov 17 2021 at 20:33)</a>:</h4>
<p>Rustdoc could even provide an attribute to allow the functions to be collapsed optionally, rather than by default</p>



<a name="261846772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261846772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261846772">(Nov 17 2021 at 20:49)</a>:</h4>
<p>Collapsing would not fix this issue at all.</p>



<a name="261846987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261846987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261846987">(Nov 17 2021 at 20:51)</a>:</h4>
<p>I think you're misunderstanding what I mean by collapse</p>



<a name="261847062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847062">(Nov 17 2021 at 20:51)</a>:</h4>
<p>"merge"? Rustdoc could be changed to provide only one documentation section for all of the functions that have the same signature, but different type parameters</p>



<a name="261847135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847135">(Nov 17 2021 at 20:52)</a>:</h4>
<p>Joshua already said that he doesn't have any timetable for such a fix.</p>



<a name="261847192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847192">(Nov 17 2021 at 20:52)</a>:</h4>
<p>And you have already pushed a rather lot of decisions based on working with what we have, not with speculative future features.</p>



<a name="261847200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847200">(Nov 17 2021 at 20:52)</a>:</h4>
<p>I don't believe we should be comprising the API purely for an issue in rustdoc, regardless of the timetable in fixing it</p>



<a name="261847243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847243">(Nov 17 2021 at 20:52)</a>:</h4>
<p>Then I don't agree with our entire API.</p>



<a name="261847271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847271">(Nov 17 2021 at 20:53)</a>:</h4>
<p>Because it is compromised by bugs in rustc.</p>



<a name="261847292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847292">(Nov 17 2021 at 20:53)</a>:</h4>
<p>Like what? Other than a handful of scenarios I don't believe that's the case</p>



<a name="261847474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847474">(Nov 17 2021 at 20:54)</a>:</h4>
<p>I have argued <strong>vociferously</strong> and had to cave several times. That is precisely why I burned out and stopped working for several weeks over the summer. Just because you didn't notice, doesn't mean it didn't happen.</p>



<a name="261847555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847555">(Nov 17 2021 at 20:55)</a>:</h4>
<p>I think you're taking this personally when it's really not personal</p>



<a name="261847640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847640">(Nov 17 2021 at 20:55)</a>:</h4>
<p>I agree that the lane count limitations, for example, are a compromise because of rustc, but the alternative is not using generics at all which would be much more of a compromise</p>



<a name="261847641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847641">(Nov 17 2021 at 20:55)</a>:</h4>
<p>It involves human beings, it IS personal.</p>



<a name="261847733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847733">(Nov 17 2021 at 20:56)</a>:</h4>
<p>But I believe these traits complicate the API in a way that isn't desirable</p>



<a name="261847734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847734">(Nov 17 2021 at 20:56)</a>:</h4>
<p>Because it literally involves a person.</p>



<a name="261847763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847763">(Nov 17 2021 at 20:56)</a>:</h4>
<p>I don't think they do because users are not exposed to these implementation details and we can clean things up later.</p>



<a name="261847816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847816">(Nov 17 2021 at 20:57)</a>:</h4>
<p>And the idea that Rust should never expose a trait genericizing over i8, i16, i32, and i64 continues to be one of the biggest frustrations of users with Rust.</p>



<a name="261847820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847820">(Nov 17 2021 at 20:57)</a>:</h4>
<p>They are, though, they're in bounds of the function</p>



<a name="261847858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847858">(Nov 17 2021 at 20:57)</a>:</h4>
<p>Then we should group more of them.</p>



<a name="261847889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847889">(Nov 17 2021 at 20:57)</a>:</h4>
<p>But you can call these functions without having the traits in view.</p>



<a name="261847945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261847945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261847945">(Nov 17 2021 at 20:58)</a>:</h4>
<p>But you have been arguing against grouping them.</p>



<a name="261848080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848080">(Nov 17 2021 at 20:59)</a>:</h4>
<p>We <strong>could</strong> special case these during lowering but that involves complicating the entire compiler.</p>



<a name="261848142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848142">(Nov 17 2021 at 20:59)</a>:</h4>
<p>This solution is apparently acceptable for Select.</p>



<a name="261848303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848303">(Nov 17 2021 at 21:00)</a>:</h4>
<p>Select is generic over the scalar type, this is inspired by it but it's not really the same</p>



<a name="261848320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848320">(Nov 17 2021 at 21:00)</a>:</h4>
<p>I have argued for using more const evaluation features to minimize these sorts of cases, but we went with trait bounds.</p>



<a name="261848401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848401">(Nov 17 2021 at 21:00)</a>:</h4>
<p>I don't really think that Select's genericity is meaningful, to be quite honest.</p>



<a name="261848450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848450">(Nov 17 2021 at 21:01)</a>:</h4>
<p>I would have <strong>none</strong> of this, not Select, not LaneCount, if I had my druthers.</p>



<a name="261848464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848464">(Nov 17 2021 at 21:01)</a>:</h4>
<p>Just use math.</p>



<a name="261848565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848565">(Nov 17 2021 at 21:01)</a>:</h4>
<p>But const generics aren't that far along yet, and in this case we at least sometimes need to do the type dispatch.</p>



<a name="261848651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848651">(Nov 17 2021 at 21:02)</a>:</h4>
<p>I'm just saying that this isn't identical. The types that select is valid for is much more clear because it's independent of the scalar type and you don't need to track down implementations</p>



<a name="261848703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848703">(Nov 17 2021 at 21:02)</a>:</h4>
<p>Select only has a single implementation for Simd, and a single one for Mask</p>



<a name="261848707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848707">(Nov 17 2021 at 21:02)</a>:</h4>
<p>And we <strong>should</strong> have all of this defined by a trait that is inherently brought into view by working with the type of the correct parameter.</p>



<a name="261848794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848794">(Nov 17 2021 at 21:03)</a>:</h4>
<p>So that there can be a single implementation of that behavior for all the appropriate types.</p>



<a name="261848823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848823">(Nov 17 2021 at 21:03)</a>:</h4>
<p>With no additional overhead.</p>



<a name="261848845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848845">(Nov 17 2021 at 21:03)</a>:</h4>
<p>I'm not following</p>



<a name="261848859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848859">(Nov 17 2021 at 21:03)</a>:</h4>
<p>And no unintentional conflict with users.</p>



<a name="261848917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848917">(Nov 17 2021 at 21:04)</a>:</h4>
<p>Sigh. I am just talking about dreamlands things now.</p>



<a name="261848971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848971">(Nov 17 2021 at 21:04)</a>:</h4>
<p>Are you suggesting that the math be implemented in a trait, which is implemented on Simd, and you must <code>use</code> the trait?</p>



<a name="261848980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848980">(Nov 17 2021 at 21:04)</a>:</h4>
<p>Or did I totally invent that</p>



<a name="261848981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261848981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261848981">(Nov 17 2021 at 21:04)</a>:</h4>
<p>No.</p>



<a name="261849006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849006">(Nov 17 2021 at 21:04)</a>:</h4>
<p>Yeah, I'm not following what you're saying then</p>



<a name="261849011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849011">(Nov 17 2021 at 21:05)</a>:</h4>
<p>I am talking about starry-eyed things that don't exist yet.</p>



<a name="261849053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849053">(Nov 17 2021 at 21:05)</a>:</h4>
<p>And are barely proposed.<br>
The absence of which are things I view as bugs.</p>



<a name="261849077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849077">(Nov 17 2021 at 21:05)</a>:</h4>
<p>I have no idea what you're talking about, though</p>



<a name="261849112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849112">(Nov 17 2021 at 21:05)</a>:</h4>
<p>I rambled on, my apologies.</p>



<a name="261849354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849354">(Nov 17 2021 at 21:07)</a>:</h4>
<p>The main point: I regard the entire state of Rust library design to be shambolic, and I am proposing this as a temporary intermediary to fix some things up. I am not attached to the implementation details, because I want to burn those down, and I am willfully desirous of breaking users who depend on these impl details.</p>



<a name="261849384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849384">(Nov 17 2021 at 21:07)</a>:</h4>
<p>( "of core::simd?" "no just... of libraries." )</p>



<a name="261849829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849829">(Nov 17 2021 at 21:11)</a>:</h4>
<p>I would be happy to talk about my ideal state for this library and indeed libraries for Rust in general, but I have been told that it is unrealistic and should not be considered at all.</p>



<a name="261849844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849844">(Nov 17 2021 at 21:11)</a>:</h4>
<p>I think fundamentally what I am saying is that API should never be compromised for documentation, since documentation generation can always be fixed but at a certain point the API will be stable, and our goal is to write something that will be stable eventually.  Clarity and documentation aren't the same, if we can change this such that it's both clearer and produces better documentation that's great, but my opinion of this now is that it produces better documentation but a less clear API.</p>



<a name="261849870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261849870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261849870">(Nov 17 2021 at 21:11)</a>:</h4>
<p>It does not seem less clear to me.</p>



<a name="261850023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850023">(Nov 17 2021 at 21:13)</a>:</h4>
<p>Well, maybe that's where we disagree.  Right now you just need to look at which functions are implemented for which types, but in the PR you need to follow the traits, look at those implementations, and I think the inconsistency of the implementations makes it even worse</p>



<a name="261850076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850076">(Nov 17 2021 at 21:13)</a>:</h4>
<p>That is why I wanted to bound the implementations on type-associated traits (where possible).</p>



<a name="261850103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850103">(Nov 17 2021 at 21:13)</a>:</h4>
<p>So it can be intuitive and follow the natural categories.</p>



<a name="261850288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850288">(Nov 17 2021 at 21:15)</a>:</h4>
<p>Then I ran into the ones which require implementation dispatch.</p>



<a name="261850428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850428">(Nov 17 2021 at 21:16)</a>:</h4>
<p>Those are trickier.</p>



<a name="261850585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850585">(Nov 17 2021 at 21:17)</a>:</h4>
<p>If we back out the ones which require the special dispatch, would that be acceptable? It should still kill off something like 250kb.<br>
And we still have a lot more to win by simplifying the trait implementations for ops in general.</p>



<a name="261850690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850690">(Nov 17 2021 at 21:18)</a>:</h4>
<p>Defining them in the <code>impl Shr for Simd&lt;T, L&gt; where T: SimdElement + Shr</code> way.</p>



<a name="261850800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850800">(Nov 17 2021 at 21:19)</a>:</h4>
<p>I'm still on the fence even if they're more consistent</p>



<a name="261850881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850881">(Nov 17 2021 at 21:19)</a>:</h4>
<p>You run into the issue that if two completely different scalar types happen to have the same function name, they collide</p>



<a name="261850960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850960">(Nov 17 2021 at 21:20)</a>:</h4>
<p>Well, that's why SimdAbs follows the pattern it does.</p>



<a name="261850964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850964">(Nov 17 2021 at 21:20)</a>:</h4>
<p>Regardless of what specifically the traits are implemented on</p>



<a name="261850975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261850975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261850975">(Nov 17 2021 at 21:20)</a>:</h4>
<p>To block the collision.</p>



<a name="261851064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851064">(Nov 17 2021 at 21:21)</a>:</h4>
<p>That's not what I mean, I mean if u8 and *const T both have functions with the same name, but different signatures, you're out of luck</p>



<a name="261851074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851074">(Nov 17 2021 at 21:21)</a>:</h4>
<p>?</p>



<a name="261851085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851085">(Nov 17 2021 at 21:21)</a>:</h4>
<p><em>headtilts</em></p>



<a name="261851101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851101">(Nov 17 2021 at 21:21)</a>:</h4>
<p>Can you give a more particular example?</p>



<a name="261851139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851139">(Nov 17 2021 at 21:21)</a>:</h4>
<p>This isn't an issue right now, but for example, pointer <code>add</code> takes usize as the second argument</p>



<a name="261851142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851142">(Nov 17 2021 at 21:21)</a>:</h4>
<p>Right.</p>



<a name="261851202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851202">(Nov 17 2021 at 21:22)</a>:</h4>
<p>Everyone calls ops::Add tho' (on u8)</p>



<a name="261851212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851212" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851212">(Nov 17 2021 at 21:22)</a>:</h4>
<p>If we ever wanted to make a function on u8 called <code>add</code>, we wouldn't be able to do it</p>



<a name="261851254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851254">(Nov 17 2021 at 21:22)</a>:</h4>
<p>Of course we wouldn't want to, but that's the problem</p>



<a name="261851267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851267">(Nov 17 2021 at 21:22)</a>:</h4>
<p>Hm.</p>



<a name="261851349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851349">(Nov 17 2021 at 21:23)</a>:</h4>
<p>With this method you're saying that a particular function name has a particular meaning for all vectors, and then just gating it on the trait impl, as opposed to what we have now which allows them to be unrelated</p>



<a name="261851472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851472">(Nov 17 2021 at 21:24)</a>:</h4>
<p>Honestly, if something has to be a non-arithmetic SIMD type, we should probably reconsider using <code>Simd</code> for it.</p>



<a name="261851541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851541">(Nov 17 2021 at 21:24)</a>:</h4>
<p>I don't see any reason why a vector of pointers shouldn't be Simd, since the common operations all make sense for it</p>



<a name="261851582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851582">(Nov 17 2021 at 21:25)</a>:</h4>
<p>The common behaviors which in Rust are defined by traits, yes.</p>



<a name="261851596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851596">(Nov 17 2021 at 21:25)</a>:</h4>
<p><em>steeples fingers</em></p>



<a name="261851668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851668">(Nov 17 2021 at 21:25)</a>:</h4>
<p>But even then, you're suggesting that all signed, unsigned, and float operations have the exact same functions, which are then later gated on the element type, which I disagree with</p>



<a name="261851745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851745">(Nov 17 2021 at 21:26)</a>:</h4>
<p>And that's the fundamental difference between this and Select, all vectors, regardless of element type, can be selected</p>



<a name="261851914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261851914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261851914">(Nov 17 2021 at 21:27)</a>:</h4>
<p>This is why I think it should be legal to impl a trait which functionally appears as a type's body, tbh.</p>



<a name="261852068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852068">(Nov 17 2021 at 21:28)</a>:</h4>
<p>f64 and f32 should just have a single trait that describes their common behavior and is impl'd for them, and when you look at their type, you basically just see that trait as their body.</p>



<a name="261852132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852132">(Nov 17 2021 at 21:29)</a>:</h4>
<p>This has been batted around a few times as "inherent associated traits" or w/e.</p>



<a name="261852316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852316">(Nov 17 2021 at 21:30)</a>:</h4>
<p>No additional need to <code>use</code> them.</p>



<a name="261852354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852354">(Nov 17 2021 at 21:31)</a>:</h4>
<p>probably you've been over this a dozen times, but could portable introduce its own trait that does that? or use <code>num</code> or something?</p>



<a name="261852419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852419">(Nov 17 2021 at 21:31)</a>:</h4>
<p>We are in fact permitted to bring in our own traits, and libs has expressed <strong>enthusiasm</strong> for defining, finally, some kind of num-traits in core.</p>



<a name="261852428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852428">(Nov 17 2021 at 21:32)</a>:</h4>
<p>Even just a limited set of.</p>



<a name="261852615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852615">(Nov 17 2021 at 21:33)</a>:</h4>
<p>that seems like a good way to clean up both the documentation and reduce the number of impl blocks :)</p>



<a name="261852635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852635">(Nov 17 2021 at 21:33)</a>:</h4>
<p>But the question of what if we want to add <code>Simd&lt;NonZeroU8, LANES&gt;</code> is being held against that. Now, I found a way to drop the need for e.g. the associated constant for additive/multiplicative identity.</p>



<a name="261852806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852806">(Nov 17 2021 at 21:35)</a>:</h4>
<p>So <code>NonZeroU8</code> should not be a blocking issue for that anymore.</p>



<a name="261852911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261852911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261852911">(Nov 17 2021 at 21:36)</a>:</h4>
<p>Caleb would, as I understand it, prefer if we take a more function-oriented split rather than introducing <code>core::num_traits</code>.</p>



<a name="261853020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853020">(Nov 17 2021 at 21:36)</a>:</h4>
<p>However, I believe Caleb must have changed his mind since he said that, because now that seems to be too confusing.</p>



<a name="261853095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853095">(Nov 17 2021 at 21:37)</a>:</h4>
<p>I am not sure what's okay and what's not okay atm.</p>



<a name="261853223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853223">(Nov 17 2021 at 21:38)</a>:</h4>
<p>I fear introducing numeric traits into core will make this even more of a bikeshed than it would otherwise be</p>



<a name="261853272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853272">(Nov 17 2021 at 21:39)</a>:</h4>
<p>That's why I only wanted to introduce some salutary bounds and am happy to rename them Bikeshed tbh.</p>



<a name="261853274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853274">(Nov 17 2021 at 21:39)</a>:</h4>
<p>but maybe its unavoidable</p>



<a name="261853496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853496">(Nov 17 2021 at 21:40)</a>:</h4>
<p>imo "rustdoc generates such fat html that it is impossible to load" is a warning sign that the impl of our type is actually pretty high cognitive overhead.</p>



<a name="261853647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853647">(Nov 17 2021 at 21:42)</a>:</h4>
<p>I don't really think this reduces the cognitive load, since the API is largely functionally the same</p>



<a name="261853709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853709" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853709">(Nov 17 2021 at 21:42)</a>:</h4>
<p>similarly, I don't think the other types that have this same problem (<a href="https://doc.rust-lang.org/nightly/core/num/struct.Wrapping.html">https://doc.rust-lang.org/nightly/core/num/struct.Wrapping.html</a>, specifically) are high cognitive load</p>



<a name="261853727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853727">(Nov 17 2021 at 21:42)</a>:</h4>
<p>I do.</p>



<a name="261853740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853740">(Nov 17 2021 at 21:43)</a>:</h4>
<p>re: Wrapping.</p>



<a name="261853770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853770">(Nov 17 2021 at 21:43)</a>:</h4>
<p>hmm</p>



<a name="261853817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853817">(Nov 17 2021 at 21:43)</a>:</h4>
<p>You can't simply compartmentalize on a shared set of names between i32 and Wrapping&lt;i32&gt;, because they actually have subtly different impls.</p>



<a name="261853832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853832">(Nov 17 2021 at 21:43)</a>:</h4>
<p>Compartmentalization on a few markers allows reducing cognitive load.</p>



<a name="261853922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261853922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261853922">(Nov 17 2021 at 21:44)</a>:</h4>
<p>There is no trait that defines their common subset.</p>



<a name="261854516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261854516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261854516">(Nov 17 2021 at 21:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209168">Thom Chiovoloni</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs/near/261853223">said</a>:</p>
<blockquote>
<p>I fear introducing numeric traits into core will make this even more of a bikeshed than it would otherwise be</p>
</blockquote>
<p>you can somewhat avoid this by making the traits private</p>



<a name="261854694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261854694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261854694">(Nov 17 2021 at 21:48)</a>:</h4>
<p>Yeah, everything I have introduced is actually bounded on our SimdElement marker trait.</p>



<a name="261854708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261854708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261854708">(Nov 17 2021 at 21:48)</a>:</h4>
<p>and say "functions taking BikeshedTrait accept i8/16/32/64" instead of having it autogenerated on the trait page</p>



<a name="261854866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261854866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261854866">(Nov 17 2021 at 21:49)</a>:</h4>
<p>Which is <code>unsafe</code> to impl and sealed.</p>



<a name="261856131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856131">(Nov 17 2021 at 21:59)</a>:</h4>
<p>if we're so adamant on using traits for shared behavior, then why not just implement the arithmetic in traits and implement those traits for vectors, and you need to have those traits imported to use them?</p>



<a name="261856199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856199">(Nov 17 2021 at 21:59)</a>:</h4>
<p>and then you can tell what functions are implemented for which types the regular way--just look at what vectors the trait is implemented on</p>



<a name="261856203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856203">(Nov 17 2021 at 21:59)</a>:</h4>
<p>Because every time I propose that idea I am shot down with "requires an additional <code>use</code>" tbh.</p>



<a name="261856565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856565">(Nov 17 2021 at 22:01)</a>:</h4>
<p>well, in our current state, would we want to try that?</p>



<a name="261856651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856651">(Nov 17 2021 at 22:02)</a>:</h4>
<p>that would solidify the stance of "vectors are containers, these traits let you handle them as something more than a container"</p>



<a name="261856730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856730">(Nov 17 2021 at 22:03)</a>:</h4>
<p>I'm wary of the whole nonzero problem still, but in that situation you could just make a whole new <code>NonZeroInt</code> trait or whatever, and it would work fine</p>



<a name="261856899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856899" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856899">(Nov 17 2021 at 22:03)</a>:</h4>
<p>are there any functions that would be implemented on <code>u8</code>, for example, that wouldn't be implemented on <code>u64</code>?</p>



<a name="261856999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261856999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261856999">(Nov 17 2021 at 22:04)</a>:</h4>
<p>Uhh, maybe <code>widening_mul</code>.</p>



<a name="261857144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261857144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261857144">(Nov 17 2021 at 22:04)</a>:</h4>
<p>yeah, that's a good example</p>



<a name="261857206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261857206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261857206">(Nov 17 2021 at 22:04)</a>:</h4>
<p>In that case I should make the PR hacking apart <code>core_simd/src/ops.rs</code> first.</p>



<a name="261857215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261857215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261857215">(Nov 17 2021 at 22:04)</a>:</h4>
<p>that would cause a problem because it couldn't be part of the trait</p>



<a name="261857434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261857434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261857434">(Nov 17 2021 at 22:05)</a>:</h4>
<p>another hack, of course, would be something like implementing <code>Deref&lt;Target = SimdInt&gt;</code> for <code>Simd</code></p>



<a name="261857509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261857509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261857509">(Nov 17 2021 at 22:06)</a>:</h4>
<p>What. <em>laughing</em></p>



<a name="261857895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261857895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261857895">(Nov 17 2021 at 22:10)</a>:</h4>
<p>I think that gets blocked on coherence.</p>



<a name="261858413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261858413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261858413">(Nov 17 2021 at 22:14)</a>:</h4>
<p>Not that I think it's a good idea, but this: <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=3af665c5446635861cc966a146cab05e">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=3af665c5446635861cc966a146cab05e</a></p>



<a name="261858508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261858508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261858508">(Nov 17 2021 at 22:15)</a>:</h4>
<p>izzat really better than the proposed version that delegates inside a shared function?</p>



<a name="261858623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261858623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261858623">(Nov 17 2021 at 22:16)</a>:</h4>
<p>well, it still entirely separates functionality as opposed to implementing every function for every scalar type, gated by a trait</p>



<a name="261858675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261858675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261858675">(Nov 17 2021 at 22:17)</a>:</h4>
<p>but I think traits would probably still be better</p>



<a name="261858730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261858730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261858730">(Nov 17 2021 at 22:17)</a>:</h4>
<p>just need to work out what you do when a particular function doesn't fit in the trait</p>



<a name="261859106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859106">(Nov 17 2021 at 22:19)</a>:</h4>
<p>create a new trait?</p>



<a name="261859244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859244">(Nov 17 2021 at 22:20)</a>:</h4>
<p>yeah, you would need more traits, which is potentially fine but slightly annoying</p>



<a name="261859293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859293">(Nov 17 2021 at 22:21)</a>:</h4>
<p>I am concerned about a failure to elide the deref games, tbh.</p>



<a name="261859342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859342">(Nov 17 2021 at 22:21)</a>:</h4>
<p>Maybe I should not be? I don't know.</p>



<a name="261859350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859350">(Nov 17 2021 at 22:21)</a>:</h4>
<p>I think you shouldn't be, since then the entire language wouldn't work</p>



<a name="261859381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859381">(Nov 17 2021 at 22:21)</a>:</h4>
<p>but, it's still not necessarily a clear api</p>



<a name="261859557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859557">(Nov 17 2021 at 22:23)</a>:</h4>
<p>This is why I think the <code>where</code> bounds, while suboptimal, are preferable. They create a visible and upfront conditional.</p>



<a name="261859688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859688">(Nov 17 2021 at 22:24)</a>:</h4>
<p>I think it's less clear than just implementing a trait with all of the operations, at least</p>



<a name="261859749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859749">(Nov 17 2021 at 22:24)</a>:</h4>
<p>but, again, it has the fundamental issue that you can't implement something like <code>fn foo(self)</code> for <code>Simd&lt;u8, N&gt;</code> and <code>fn foo(self, usize)</code> for <code>Simd&lt;*const T, N&gt;</code> simultaneously</p>



<a name="261859789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859789">(Nov 17 2021 at 22:25)</a>:</h4>
<p>You mean the deref version shares that issue?</p>



<a name="261859808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859808">(Nov 17 2021 at 22:25)</a>:</h4>
<p>no, the deref version does not have that issue</p>



<a name="261859817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859817">(Nov 17 2021 at 22:25)</a>:</h4>
<p>Or just the where bound... ah.</p>



<a name="261859819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859819">(Nov 17 2021 at 22:25)</a>:</h4>
<p>it just has the issue of deref magic</p>



<a name="261859821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859821">(Nov 17 2021 at 22:25)</a>:</h4>
<p><em>shrug</em></p>



<a name="261859970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859970">(Nov 17 2021 at 22:27)</a>:</h4>
<p>I think it also doesn't really solve the problem of figuring out "I have a Simd&lt;u8, N&gt;, what are all the functions I can call"?</p>



<a name="261859989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261859989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261859989">(Nov 17 2021 at 22:27)</a>:</h4>
<p>you need to go through every single function and inspect the bounds</p>



<a name="261860031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261860031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261860031">(Nov 17 2021 at 22:27)</a>:</h4>
<p>I guess that's actually the same problem I was already describing, but phrased differently</p>



<a name="261860868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261860868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261860868">(Nov 17 2021 at 22:36)</a>:</h4>
<p>does rustdoc correctly show all the different deref impls if you implement deref in more than one way?</p>



<a name="261860941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261860941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261860941">(Nov 17 2021 at 22:37)</a>:</h4>
<p>oh wait, that's a good point, maybe what Jubilee was saying, you can't actually implement deref more than once</p>



<a name="261860978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261860978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261860978">(Nov 17 2021 at 22:37)</a>:</h4>
<p>I mean, you potentially could will some brilliant trait solver, but now you can't</p>



<a name="261861067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861067">(Nov 17 2021 at 22:38)</a>:</h4>
<p><code>impl Deref for Simd&lt;u8, ...&gt;</code> and <code>impl Deref for Simd&lt;f32, ...&gt;</code>... wonder if that works</p>



<a name="261861110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861110">(Nov 17 2021 at 22:39)</a>:</h4>
<p>oh true, that should work, not sure how it would be documented</p>



<a name="261861157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861157">(Nov 17 2021 at 22:39)</a>:</h4>
<p>though honestly, i think the multiple deref approach is too weird from a user perspective</p>



<a name="261861181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861181">(Nov 17 2021 at 22:39)</a>:</h4>
<p>yeah, I think it's too weird too, it was just a thought I had</p>



<a name="261861236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861236">(Nov 17 2021 at 22:40)</a>:</h4>
<p>a trait solves basically the same problem</p>



<a name="261861579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861579">(Nov 17 2021 at 22:44)</a>:</h4>
<p>We could paper over the multi-deref with manually documenting things, but the advantage of the <code>where</code> bounds is that it solves for generic programming issues and is machine-legible as well.</p>



<a name="261861711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861711">(Nov 17 2021 at 22:45)</a>:</h4>
<p>i like traits better than multi-deref, imho something like str::parse/FromStr situation is probably what we should aim for</p>



<a name="261861791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861791">(Nov 17 2021 at 22:46)</a>:</h4>
<p>That is somewhat what I was aiming for.</p>



<a name="261861826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861826">(Nov 17 2021 at 22:46)</a>:</h4>
<p>fromstr is the trait we put all the goodies on, str::parse is just for user friendliness</p>



<a name="261861884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261861884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261861884">(Nov 17 2021 at 22:47)</a>:</h4>
<p>I think that when bounds are correct, they should not be avoided, and if we can describe relationships in associated types and the like, that's of use to us. They should rarely be unclear in practice.</p>



<a name="261862229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862229">(Nov 17 2021 at 22:51)</a>:</h4>
<p>I'm still thinking the traits should contain the functions themselves and be imported, rather than put functions on the vector directly with bounds</p>



<a name="261862240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862240">(Nov 17 2021 at 22:51)</a>:</h4>
<p>if we are to go in any direction involving traits at all</p>



<a name="261862427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862427">(Nov 17 2021 at 22:53)</a>:</h4>
<p>And: The reason behind inclining towards fewer rather than more traits dividing on a per-function basis is because, while it's good for std::ops, that's because std::ops is describing, in truth, <strong>lexical operators</strong>, not "a behavior implemented by arithmetical entities." Most telling: <code>+</code> does not even have to commute!<br>
Anyways, I need to take care of other things.</p>



<a name="261862536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862536">(Nov 17 2021 at 22:54)</a>:</h4>
<p>( probably the integer types would implement more than literally one trait shared by types in the ints or uints category, like... a few. )</p>



<a name="261862543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862543">(Nov 17 2021 at 22:55)</a>:</h4>
<p>well, like I said, my concern lies more with implementing the functions directly on the vectors in this case, and less about having traits at all</p>



<a name="261862589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862589">(Nov 17 2021 at 22:55)</a>:</h4>
<p>with regular traits, you could always just add more traits if you have a problem with your old ones</p>



<a name="261862686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862686">(Nov 17 2021 at 22:56)</a>:</h4>
<p>tbh given we have functions that <code>Simd&lt;T, LANES&gt;</code> impls, I am not sure why that is an ish, but like fair ig?</p>



<a name="261862710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862710">(Nov 17 2021 at 22:57)</a>:</h4>
<p>because all of those functions right now apply to either all scalar types, or only one specifically</p>



<a name="261862736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862736">(Nov 17 2021 at 22:57)</a>:</h4>
<p>that's it, I just have a problem with the generic functions only applying to some but not all</p>



<a name="261862770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261862770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261862770">(Nov 17 2021 at 22:57)</a>:</h4>
<p>&lt;demon voice&gt;<strong>Let's fix this with specialization.</strong>&lt;/demon voice&gt;</p>



<a name="261863555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261863555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261863555">(Nov 17 2021 at 23:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs/near/261862770">said</a>:</p>
<blockquote>
<p>&lt;demon voice&gt;<strong>Let's fix this with specialization.</strong>&lt;/demon voice&gt;</p>
</blockquote>
<p>Jubilee wins. &lt;font face="dripping"&gt;<strong>SPECIALITY</strong>&lt;/font&gt;</p>



<a name="261863833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261863833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261863833">(Nov 17 2021 at 23:08)</a>:</h4>
<p>a special kind of winning</p>



<a name="261993889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261993889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261993889">(Nov 18 2021 at 21:31)</a>:</h4>
<p>I don't really want to "win" anything...<br>
I just want to make things better, and sometimes that means an intermediate fix.<br>
My long term fix I would like to see is inherent traits. Makes all the possible problems go away, basically.</p>



<a name="261994363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261994363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261994363">(Nov 18 2021 at 21:35)</a>:</h4>
<p>yay for inherent traits!</p>



<a name="261996050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261996050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261996050">(Nov 18 2021 at 21:50)</a>:</h4>
<p>Yeah, I think inherent traits may solve this problem</p>



<a name="261996109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261996109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261996109">(Nov 18 2021 at 21:50)</a>:</h4>
<p>Though I'm not especially opposed to requiring use imports right now</p>



<a name="261996669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261996669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261996669">(Nov 18 2021 at 21:54)</a>:</h4>
<p>we also could consider adding the trait as part of the prelude, which would avoid the need to use imports and keep it as a trait. if the trait is unstable, it might even be compatible with moving to other options in the future too</p>



<a name="261996734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261996734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261996734">(Nov 18 2021 at 21:55)</a>:</h4>
<p>I was wondering about it being part of the prelude, but was afraid of bringing it up lol</p>



<a name="261996900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261996900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261996900">(Nov 18 2021 at 21:56)</a>:</h4>
<p>Hm, <span class="user-mention" data-user-id="239881">@Josh Triplett</span> can we get a temperature check on that idea?</p>



<a name="261997032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997032" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997032">(Nov 18 2021 at 21:58)</a>:</h4>
<p>i don't think it's likely to cause problems since it's sealed, and imported <code>as _</code>, since it shouldn't cause inference issues for things that don't implement it (i think?)</p>



<a name="261997078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997078">(Nov 18 2021 at 21:58)</a>:</h4>
<p>It might weird out some error messages.</p>



<a name="261997109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997109">(Nov 18 2021 at 21:58)</a>:</h4>
<p>But I don't think it will introduce errors we weren't already hitting with e.g. Iterator.</p>



<a name="261997158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997158">(Nov 18 2021 at 21:59)</a>:</h4>
<p>iterator woudl be worse in several ways, since iterator gets implemented by user code, and gets extended by user code</p>



<a name="261997258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997258">(Nov 18 2021 at 21:59)</a>:</h4>
<p>Right, I am mostly noting that we hit spurious messages due to Iterator all the time.</p>



<a name="261997434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997434">(Nov 18 2021 at 22:00)</a>:</h4>
<p>i think this would be closer to SliceExt (which has been removed now), e.g. a trait that exists as a way to hack inherent methods on to something, and is only a trait in the prelude for technical reasons</p>



<a name="261997449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997449">(Nov 18 2021 at 22:00)</a>:</h4>
<p>Like, totally unrelated basically?<br>
But it doesn't kill anyone's usage entirely, it just makes people go "eh?" for a bit until a bug gets fixed.</p>



<a name="261997454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997454">(Nov 18 2021 at 22:00)</a>:</h4>
<p>Yeah.</p>



<a name="261997609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997609" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997609">(Nov 18 2021 at 22:01)</a>:</h4>
<p>Complete sidebar, but I want to back up for a second.  <span class="user-mention" data-user-id="281757">@Jubilee</span> was your problem with implementing some traits on the scalar and some on the vector related specifically to calling the intrinsics?  An nothing with the ability to write an API like in general</p>



<a name="261997638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997638">(Nov 18 2021 at 22:01)</a>:</h4>
<p>I want to at least completely understand that problem before moving on</p>



<a name="261997716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261997716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261997716">(Nov 18 2021 at 22:02)</a>:</h4>
<p>Sssortof.</p>



<a name="261998023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998023">(Nov 18 2021 at 22:04)</a>:</h4>
<p><span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> Some of the intrinsics we use are polymorphic over all our relevant scalar types.<br>
Some are not.</p>



<a name="261998240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998240">(Nov 18 2021 at 22:06)</a>:</h4>
<p>For those which are totally polymorphic, we can just call e.g. simd_add and it handles that appropriately.</p>



<a name="261998427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998427">(Nov 18 2021 at 22:08)</a>:</h4>
<p>For those which are not, we need to implement something ourselves.</p>



<a name="261998710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998710">(Nov 18 2021 at 22:10)</a>:</h4>
<p>abs was one of those, right?</p>



<a name="261998720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998720">(Nov 18 2021 at 22:10)</a>:</h4>
<p>Yes.</p>



<a name="261998739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998739">(Nov 18 2021 at 22:10)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=fb01b433b183c7184aeabbcc7c834b43">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=fb01b433b183c7184aeabbcc7c834b43</a></p>



<a name="261998747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998747">(Nov 18 2021 at 22:10)</a>:</h4>
<p>am I missing something here?</p>



<a name="261998799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998799">(Nov 18 2021 at 22:11)</a>:</h4>
<p><em>arches a brow</em></p>



<a name="261998836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998836">(Nov 18 2021 at 22:11)</a>:</h4>
<p>That... is a very strange way of handling it tbqh.</p>



<a name="261998936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998936">(Nov 18 2021 at 22:12)</a>:</h4>
<p>that's exactly how select is done, right now</p>



<a name="261998949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998949">(Nov 18 2021 at 22:12)</a>:</h4>
<p>well I suppose not exactly</p>



<a name="261998960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998960">(Nov 18 2021 at 22:12)</a>:</h4>
<p>but very similar</p>



<a name="261998972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261998972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261998972">(Nov 18 2021 at 22:12)</a>:</h4>
<p>But you are correct that that approach could be used, ig.</p>



<a name="261999023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999023">(Nov 18 2021 at 22:13)</a>:</h4>
<p>I assume the abs trait is sealed, and we can make the internal function unstable</p>



<a name="261999037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999037">(Nov 18 2021 at 22:13)</a>:</h4>
<p>Yes.</p>



<a name="261999161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999161" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999161">(Nov 18 2021 at 22:14)</a>:</h4>
<p>if we can do all marker traits on scalars, and not have that inconsistency, i'm much more on the fence again</p>



<a name="261999493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999493">(Nov 18 2021 at 22:15)</a>:</h4>
<p>im actually a fan of that</p>



<a name="261999511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999511">(Nov 18 2021 at 22:15)</a>:</h4>
<p>thats a lot like how stuff like str patterns work</p>



<a name="261999629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999629">(Nov 18 2021 at 22:17)</a>:</h4>
<p>this way is _probably_ less obtuse than implementing all of the operations in traits that you import, but it also means we're probably going to break from some conventions slightly from the regular primitive types, since we're going to make various things work for both floats and integers (and potentially pointers)</p>



<a name="261999707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999707">(Nov 18 2021 at 22:17)</a>:</h4>
<p>I'm guessing that we're never going to support something that isn't an integer, float, or pointer of some sort</p>



<a name="261999918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/261999918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#261999918">(Nov 18 2021 at 22:19)</a>:</h4>
<p>it's slightly complicated because we aren't going to have separate sections for pointer and number operations, we can put them in separate impl blocks but that's not necessarily that meaningful yet (but maybe in the future we'll be able to document the impl blocks)</p>



<a name="262000051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000051">(Nov 18 2021 at 22:20)</a>:</h4>
<p>actually... are the impl block docs shown somewhere?</p>



<a name="262000223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000223">(Nov 18 2021 at 22:22)</a>:</h4>
<p>I think so. I think that's actually part of why our HTML is so huge, which is why I am working rn on a different PR which just does trait simplification.</p>



<a name="262000782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000782">(Nov 18 2021 at 22:27)</a>:</h4>
<p>would you mind if I made my own branch with how I'm envisioning it with only scalar traits, and then we can compare them and work the differences and go from there?</p>



<a name="262000815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000815">(Nov 18 2021 at 22:27)</a>:</h4>
<p>i'm kinda hoping we eventually gain support for things like <code>Simd&lt;Simd&lt;f32, N&gt;, M&gt;</code>, so if possible I'd like to avoid assuming Simd element types are always float, int, or pointers</p>



<a name="262000889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000889">(Nov 18 2021 at 22:28)</a>:</h4>
<p>what would be the point of that?</p>



<a name="262000903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000903">(Nov 18 2021 at 22:28)</a>:</h4>
<p><code>Simd&lt;ComplexF32, N&gt;</code> too</p>



<a name="262000995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262000995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262000995">(Nov 18 2021 at 22:28)</a>:</h4>
<p>I think at a certain point, the wrappers need to be around <code>Simd</code> and not internal to it</p>



<a name="262001036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262001036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262001036">(Nov 18 2021 at 22:29)</a>:</h4>
<p>vectorizing code that already uses some vectors</p>



<a name="262001100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262001100" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262001100">(Nov 18 2021 at 22:30)</a>:</h4>
<p>SimpleV is planning on supporting vectors of vectors natively</p>



<a name="262001329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262001329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262001329">(Nov 18 2021 at 22:32)</a>:</h4>
<p>How does such a type differ from the same but as its ravel?</p>



<a name="262001435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262001435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262001435">(Nov 18 2021 at 22:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312331">Caleb Zulawski</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs/near/262000782">said</a>:</p>
<blockquote>
<p>would you mind if I made my own branch with how I'm envisioning it with only scalar traits, and then we can compare them and work the differences and go from there?</p>
</blockquote>
<p>Go for it ig.</p>



<a name="262003492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262003492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262003492">(Nov 18 2021 at 22:54)</a>:</h4>
<blockquote>
<p>How does such a type differ from the same but as its ravel?</p>
</blockquote>
<p>??? i'm not sure what you mean</p>



<a name="262004081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004081">(Nov 18 2021 at 23:00)</a>:</h4>
<p><span class="user-mention" data-user-id="229517">@Jacob Lifshay</span> How does SIMD[SIMD[f32;3]; 3] differ from SIMD[f32; 9]</p>



<a name="262004198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004198">(Nov 18 2021 at 23:00)</a>:</h4>
<p>it acts differently for things like swizzle, horizontal_sum, and others</p>



<a name="262004257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004257">(Nov 18 2021 at 23:01)</a>:</h4>
<p>on the one hand i've done stuff like this (in c++), on the other it seems like more trouble than its worth, and would be better off externalized</p>



<a name="262004404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004404">(Nov 18 2021 at 23:02)</a>:</h4>
<p><code>Simd::&lt;T, N&gt;::horizontal_sum() -&gt; T</code>, so for <code>T = Simd&lt;f32, 3&gt;</code> it returns <code>Simd&lt;f32, 3&gt;</code></p>



<a name="262004445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004445">(Nov 18 2021 at 23:02)</a>:</h4>
<p>If LLVM were to ever add intrinsics that do that, we can just add a new type that wraps it, if it were important enough</p>



<a name="262004564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004564">(Nov 18 2021 at 23:03)</a>:</h4>
<p>it's also handy for stuff like matrix operations</p>



<a name="262004624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004624">(Nov 18 2021 at 23:04)</a>:</h4>
<p>or tensor operations</p>



<a name="262004842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004842">(Nov 18 2021 at 23:06)</a>:</h4>
<p>i used it for stuff like strided SOA, e.g.  <code>Simd&lt;f32x8, 3&gt;</code>  as something like <code>{ xs: f32x8, ys: f32x8, zs: f32x8 }</code> for getting some of the benefits of SOA without giving up all of the convenience of AOS</p>



<a name="262004860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004860">(Nov 18 2021 at 23:06)</a>:</h4>
<p>that said you can still build that stuff on top</p>



<a name="262004939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262004939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262004939">(Nov 18 2021 at 23:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs/near/261996900">said</a>:</p>
<blockquote>
<p>Hm, <span class="user-mention silent" data-user-id="239881">Josh Triplett</span> can we get a temperature check on that idea?</p>
</blockquote>
<p>Generally positive towards inherent traits; somewhat negative towards adding a trait to the prelude as a substitute if it's primarily to provide methods for specific types, but not entirely opposed. Would like to understand better.</p>



<a name="262005164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262005164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262005164">(Nov 18 2021 at 23:09)</a>:</h4>
<p>I think I'm not fully understanding the proposal, though.</p>



<a name="262005251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262005251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262005251">(Nov 18 2021 at 23:10)</a>:</h4>
<p>In general, if someone proposed to implement inherent traits, I'd heavily cheer them on, and I think the entire lang team is completely in favor.</p>



<a name="262008478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262008478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262008478">(Nov 18 2021 at 23:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs/near/262004939">said</a>:</p>
<blockquote>
<p>Generally positive towards inherent traits; somewhat negative towards adding a trait to the prelude as a substitute if it's primarily to provide methods for specific types, but not entirely opposed. Would like to understand better.</p>
</blockquote>
<p>That would be ooonly as a temporary "until inherent methods" measure, basically, if we went that route.</p>



<a name="262009142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262009142" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262009142">(Nov 18 2021 at 23:52)</a>:</h4>
<p>...wow, the traits might be even more megabytes.</p>



<a name="262016840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262016840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262016840">(Nov 19 2021 at 01:30)</a>:</h4>
<p>Yeah, I just knocked several megabytes off by just implementing traits generically with only a <strong>mild</strong> hack.</p>



<a name="262016849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262016849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262016849">(Nov 19 2021 at 01:30)</a>:</h4>
<p>Woo!</p>



<a name="262016864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262016864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262016864">(Nov 19 2021 at 01:31)</a>:</h4>
<p>( A trait "Vector" with a single associated type "Scalar". )</p>



<a name="262016884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262016884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262016884">(Nov 19 2021 at 01:31)</a>:</h4>
<p>Hmmm and what's the purpose?</p>



<a name="262016904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262016904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262016904">(Nov 19 2021 at 01:32)</a>:</h4>
<p>We obviously used to have that, it just didn't come up after we went generic</p>



<a name="262016968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262016968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262016968">(Nov 19 2021 at 01:32)</a>:</h4>
<p>The trait solver can't recognize that</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">LANES</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Mul</span><span class="o">&lt;</span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">etc</span><span class="p">.</span><span class="w"> </span><span class="n">etc</span><span class="p">.</span><span class="w"></span>
</code></pre></div>
<p>doesn't break coherence because I control everything.</p>



<a name="262017002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017002">(Nov 19 2021 at 01:33)</a>:</h4>
<p>Ah</p>



<a name="262017009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017009">(Nov 19 2021 at 01:33)</a>:</h4>
<p>And we need lazy norm for inherent associated types.</p>



<a name="262017027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017027">(Nov 19 2021 at 01:33)</a>:</h4>
<p>Is there any chance an associated const would work?</p>



<a name="262017039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017039">(Nov 19 2021 at 01:33)</a>:</h4>
<p>Er, associated type</p>



<a name="262017090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017090">(Nov 19 2021 at 01:34)</a>:</h4>
<p>That's why trait yes.</p>



<a name="262017127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017127">(Nov 19 2021 at 01:34)</a>:</h4>
<p>This works fine and is only <strong>mildly</strong> horrifying:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">LANES</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">BitAnd</span><span class="o">&lt;</span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="o">&lt;</span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Vector</span><span class="o">&gt;</span>::<span class="n">Scalar</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">SimdElement</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span>: <span class="nc">BitAnd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">Output</span><span class="o">=</span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">LaneCount</span><span class="o">&lt;</span><span class="n">LANES</span><span class="o">&gt;</span>: <span class="nc">SupportedLaneCount</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="cp">#[inline]</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">bitand</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">rhs</span>: <span class="nc">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Output</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">rhs</span><span class="p">.</span><span class="n">bitand</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="262017180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017180">(Nov 19 2021 at 01:35)</a>:</h4>
<p>Oh, I mean using an inherent associated type instead of a trait</p>



<a name="262017183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017183">(Nov 19 2021 at 01:35)</a>:</h4>
<p>We are on nightly, after all</p>



<a name="262017239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017239">(Nov 19 2021 at 01:36)</a>:</h4>
<p>Do we really have so many op trait implementations that it's such a big deal?</p>



<a name="262017244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017244">(Nov 19 2021 at 01:36)</a>:</h4>
<p>In the absence of lazy norm I don't know if that's sound. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="262017264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017264">(Nov 19 2021 at 01:36)</a>:</h4>
<p>Yes, we really have entire megabytes of HTML generated from the trait op macros alone.</p>



<a name="262017267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017267">(Nov 19 2021 at 01:36)</a>:</h4>
<p>I imagine it's the exact same thing</p>



<a name="262017305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017305">(Nov 19 2021 at 01:37)</a>:</h4>
<p>The solution is identical since you're explicitly using the trait in the type, I think</p>



<a name="262017478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017478">(Nov 19 2021 at 01:40)</a>:</h4>
<div class="codehilite"><pre><span></span><code>warning: the feature `inherent_associated_types` is incomplete and may not be safe to use and/or cause compiler crashes
 --&gt; src/lib.rs:1:12
  |
1 | #![feature(inherent_associated_types)]
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: `#[warn(incomplete_features)]` on by default
  = note: see issue #8995 &lt;https://github.com/rust-lang/rust/issues/8995&gt; for more information
</code></pre></div>
<p>That would be a no.</p>



<a name="262017496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017496">(Nov 19 2021 at 01:40)</a>:</h4>
<p>Ah I didn't realize it was incomplete</p>



<a name="262017505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017505">(Nov 19 2021 at 01:40)</a>:</h4>
<p>Yeah, guess we can use the trait for now</p>



<a name="262017539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262017539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262017539">(Nov 19 2021 at 01:41)</a>:</h4>
<p>I'm just slightly concerned something somewhere may not work too well with type inference, since the op traits seem to give us so much trouble</p>



<a name="262019356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262019356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262019356">(Nov 19 2021 at 02:13)</a>:</h4>
<p>I don't think it will actually be that much issue tbh.<br>
All tests are passing rn and the documented html is 4 MB smaller.</p>



<a name="262019904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262019904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262019904">(Nov 19 2021 at 02:24)</a>:</h4>
<p>I was hoping it could be inverted with GATs (making the trait type the vector, not the scalar), but that doesn't seem to work since you can't then make it generic over the lane count because the scalar isn't constrained by it</p>



<a name="262020004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262020004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262020004">(Nov 19 2021 at 02:26)</a>:</h4>
<div class="codehilite"><pre><span></span><code>#![feature(associated_type_defaults)]

trait Add&lt;const LANES: usize&gt;: Sized {
    type Vector = Simd&lt;Self, LANES&gt;;
}

impl&lt;T, const LANES: usize&gt; core::ops::Add&lt;T::Vector&gt; for T where T: Add&lt;LANES&gt; {
    type Output = T::Vector;
    fn add(self, rhs: T::Vector) -&gt; Self::Output {
        unimplemented!()
    }
}
</code></pre></div>



<a name="262020007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262020007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262020007">(Nov 19 2021 at 02:26)</a>:</h4>
<p>even something like this would be nice but sadly not possible</p>



<a name="262021214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021214">(Nov 19 2021 at 02:53)</a>:</h4>
<p>Alright, let's try this again. <a href="https://github.com/rust-lang/portable-simd/pull/195">https://github.com/rust-lang/portable-simd/pull/195</a></p>



<a name="262021346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021346">(Nov 19 2021 at 02:56)</a>:</h4>
<p>without digging into the details yet, is gating the vector operation on the presence of the scalar operation the way we should go?</p>



<a name="262021356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021356">(Nov 19 2021 at 02:56)</a>:</h4>
<p>I'm aware that I already did it for PartialEq etc, but we never really discussed it</p>



<a name="262021375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021375">(Nov 19 2021 at 02:57)</a>:</h4>
<p>it's sound because SimdElement is sealed and we can ensure that's correct before we actually make anything valid to use in a vector</p>



<a name="262021426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021426">(Nov 19 2021 at 02:58)</a>:</h4>
<p>but is that going to come back to bite us in the future?</p>



<a name="262021440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021440">(Nov 19 2021 at 02:59)</a>:</h4>
<p>Hmm.</p>



<a name="262021445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021445">(Nov 19 2021 at 02:59)</a>:</h4>
<p>it makes sense for the semantic meaning of the op traits, but not necessarily valid for any arbitrary type implementing those of course, depending on what the intrinsics can monomorphize</p>



<a name="262021595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021595">(Nov 19 2021 at 03:01)</a>:</h4>
<p>Well, as I figured out more of the details, the impls started being gated on</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">where</span><span class="w"></span>
<span class="w">   </span><span class="n">T</span>: <span class="nc">SimdElement</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span>: <span class="nc">Op</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">Output</span><span class="o">=</span><span class="n">Simd</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;&gt;</span><span class="p">,</span><span class="w"></span>
<span class="n">etc</span><span class="p">.</span><span class="w"></span>
</code></pre></div>



<a name="262021653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021653">(Nov 19 2021 at 03:02)</a>:</h4>
<p>I think it's a little sketchy, imo, to have it go both ways for the non-commutative ops.</p>



<a name="262021724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021724">(Nov 19 2021 at 03:03)</a>:</h4>
<p>That is,<br>
I think</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="n">Simd</span>::<span class="n">from_array</span><span class="p">([</span><span class="mf">5.0</span><span class="p">,</span><span class="w"> </span><span class="mf">4.0</span><span class="p">,</span><span class="w"> </span><span class="mf">3.0</span><span class="p">,</span><span class="w"> </span><span class="mf">2.0</span><span class="p">])</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">1.0</span><span class="w"></span>
</code></pre></div>
<p>makes sense<br>
but I don't... really think so for the reverse.</p>



<a name="262021742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021742">(Nov 19 2021 at 03:03)</a>:</h4>
<p>well, id think for the reverse direction you could swap the order in the trait?</p>



<a name="262021747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021747">(Nov 19 2021 at 03:03)</a>:</h4>
<p>hmm</p>



<a name="262021780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021780">(Nov 19 2021 at 03:04)</a>:</h4>
<p>BUT</p>



<a name="262021790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021790">(Nov 19 2021 at 03:04)</a>:</h4>
<p>Yes, I have figured out all the shenanigans.</p>



<a name="262021809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021809">(Nov 19 2021 at 03:04)</a>:</h4>
<p>how about gating on a <code>SealedSimdOp&lt;Rhs, OpKind&gt; for Lhs</code> trait, currently implemented for all element types, but in the future it could be implemented for not all element types when we add something non-orthogonal</p>



<a name="262021816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021816">(Nov 19 2021 at 03:04)</a>:</h4>
<p>I would be happy if we decided that e.g. the "promotion" impls and the vector impls had to "stay as-is", that is, be actually explicit.</p>



<a name="262021896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021896">(Nov 19 2021 at 03:06)</a>:</h4>
<p><code>L: SealedSimdOp&lt;R, AddOp&gt; + Add&lt;R, Output=O&gt;</code></p>



<a name="262021918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021918">(Nov 19 2021 at 03:07)</a>:</h4>
<p>actually, I think it can be substantially simpler because none of our ops support different rhs or output types</p>



<a name="262021919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021919">(Nov 19 2021 at 03:07)</a>:</h4>
<p>As a lot of it is just generically "lifting" the impls.</p>



<a name="262021924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021924" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021924">(Nov 19 2021 at 03:07)</a>:</h4>
<p>Right.</p>



<a name="262021927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021927">(Nov 19 2021 at 03:07)</a>:</h4>
<p>so you could simply have a sealed <code>Add</code> trait, which enables all of the variations of the ops</p>



<a name="262021983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262021983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262021983">(Nov 19 2021 at 03:08)</a>:</h4>
<p>and of course it's sealed by virtue of <code>trait Add: SimdElement</code></p>



<a name="262022005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022005">(Nov 19 2021 at 03:08)</a>:</h4>
<p>sigh.</p>



<a name="262022014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022014">(Nov 19 2021 at 03:09)</a>:</h4>
<p>new types may support different rhs or output types, e.g. we decide to implement <code>Add&lt;Simd&lt;isize, N&gt;&gt; for Simd&lt;*const T, N&gt;</code></p>



<a name="262022099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022099">(Nov 19 2021 at 03:10)</a>:</h4>
<p>i think we wouldn't support the add operator on pointers</p>



<a name="262022104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022104">(Nov 19 2021 at 03:10)</a>:</h4>
<p>that is true, though it's worth noting that pointers don't implement Add</p>



<a name="262022118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022118">(Nov 19 2021 at 03:11)</a>:</h4>
<p>i feel like pointers not implementing ops::Add was deliberate and and the right call</p>



<a name="262022119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022119">(Nov 19 2021 at 03:11)</a>:</h4>
<p>if we ever had an asymmetric case come up you can always add a new marker trait for it</p>



<a name="262022120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022120">(Nov 19 2021 at 03:11)</a>:</h4>
<p>Anyway, most of the magic here works fine if we have some of the impls actually be explicit per type.</p>



<a name="262022136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022136">(Nov 19 2021 at 03:11)</a>:</h4>
<p>In fact all of it does on purpose basically</p>



<a name="262022220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022220">(Nov 19 2021 at 03:13)</a>:</h4>
<p>the thing with marker traits is we have to get all the ones we'll ever need when we stabilize, cuz otherwise generic user code would break or we couldn't impl new types cuz generic impl Add would overlap</p>



<a name="262022312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022312">(Nov 19 2021 at 03:14)</a>:</h4>
<p>yeah, actually that's true even without marker traits though right? isn't that true with just using the core::ops traits as markers?</p>



<a name="262022313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022313">(Nov 19 2021 at 03:14)</a>:</h4>
<p>maybe we should just make a SimdAdd trait, and impl Add for all SimdAdd</p>



<a name="262022344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022344">(Nov 19 2021 at 03:15)</a>:</h4>
<p>i'm not sure how that's different than this, or different from my suggestion of our own trait over scalars</p>



<a name="262022426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022426">(Nov 19 2021 at 03:17)</a>:</h4>
<p>I think I would rather be chewed out for writing lousy code explicitly than continue bikeshedding without referent.</p>



<a name="262022433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022433">(Nov 19 2021 at 03:17)</a>:</h4>
<p>people see the Add impl, but don't need to look at simdadd's impls so a mess is less of a concern? also simdadd would be on a different docs page, so that could help</p>



<a name="262022516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022516">(Nov 19 2021 at 03:18)</a>:</h4>
<p>simdadd could still have non-type-generic impls</p>



<a name="262022538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022538">(Nov 19 2021 at 03:19)</a>:</h4>
<p>I have to stress that we really<br>
really<br>
really<br>
do not actually gain much of anything at all by introducing an additional marker trait.</p>



<a name="262022567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022567">(Nov 19 2021 at 03:19)</a>:</h4>
<p>i'd be worried if SimdAdd actually showed up in the docs at all</p>



<a name="262022570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022570">(Nov 19 2021 at 03:19)</a>:</h4>
<p>that sounds like its confusing</p>



<a name="262022573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022573">(Nov 19 2021 at 03:19)</a>:</h4>
<p>it wouldn't be on the same page as the simdsub, simdmul, etc...so pages don't get as horrendously long</p>



<a name="262022580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022580">(Nov 19 2021 at 03:19)</a>:</h4>
<p>i think having extra simd ops traits in the docs page sounds bad</p>



<a name="262022618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022618">(Nov 19 2021 at 03:20)</a>:</h4>
<p>I am suggesting adding it purely for soundness</p>



<a name="262022638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022638">(Nov 19 2021 at 03:20)</a>:</h4>
<p>For soundness,<br>
I think we actually are better off implementing Add&lt;Self&gt; for Simd&lt;f32, LANES&gt; etc.</p>



<a name="262022644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022644">(Nov 19 2021 at 03:20)</a>:</h4>
<p>I'm not absolutely convinced that gating on the core::ops trait is sound and felt a little queasy when I first introduced it</p>



<a name="262022648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022648">(Nov 19 2021 at 03:21)</a>:</h4>
<p>what do you mean?</p>



<a name="262022651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022651">(Nov 19 2021 at 03:21)</a>:</h4>
<p>just that?</p>



<a name="262022659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022659">(Nov 19 2021 at 03:21)</a>:</h4>
<p>did we not already have that?</p>



<a name="262022716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022716">(Nov 19 2021 at 03:22)</a>:</h4>
<p>cuz all impls are strictly controlled and we don't have to worry about new core non-simd Add impls causing unsoundness accidentally due to interactions with simd's add impl</p>



<a name="262022734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022734">(Nov 19 2021 at 03:23)</a>:</h4>
<p>We did, and as I explored <a href="https://github.com/rust-lang/portable-simd/issues/195">portable-simd#195</a>, I used the relative route.</p>



<a name="262022737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022737">(Nov 19 2021 at 03:23)</a>:</h4>
<p>which introduced the trait bound.</p>



<a name="262022742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022742">(Nov 19 2021 at 03:24)</a>:</h4>
<p>like most of the weight is seriously in e.g. the ref ops.</p>



<a name="262022803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022803">(Nov 19 2021 at 03:25)</a>:</h4>
<p>okay let me clarify exactly what I'm getting at because I think everyone is talking past each other</p>



<a name="262022811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022811">(Nov 19 2021 at 03:25)</a>:</h4>
<div class="codehilite"><pre><span></span><code>impl&lt;T, const LANES: usize&gt; BitAnd for Simd&lt;T, LANES&gt;
where
    T: SimdElement + BitAnd&lt;Output = T&gt;,
    LaneCount&lt;LANES&gt;: SupportedLaneCount,
{
    type Output = Self;

    #[inline]
    fn bitand(self, rhs: Self) -&gt; Self::Output {
        unsafe { intrinsics::simd_and(self, rhs) }
    }
}
</code></pre></div>



<a name="262022812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022812">(Nov 19 2021 at 03:25)</a>:</h4>
<p>hmm, maybe we should leave out the ref versions? iirc there was a proposal to add autoderef to operators</p>



<a name="262022819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022819">(Nov 19 2021 at 03:25)</a>:</h4>
<p>Yes, I know.</p>



<a name="262022820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022820">(Nov 19 2021 at 03:25)</a>:</h4>
<p>That is also what I am talking about.</p>



<a name="262022826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022826">(Nov 19 2021 at 03:26)</a>:</h4>
<p>This bothers me, somewhat, because that's not _really_ what the T: BitAnd really means</p>



<a name="262022875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022875">(Nov 19 2021 at 03:26)</a>:</h4>
<p>And I agree that it is a concern and we should probably just use base impls then.</p>



<a name="262022888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022888">(Nov 19 2021 at 03:27)</a>:</h4>
<div class="codehilite"><pre><span></span><code>impl&lt;T, const LANES: usize&gt; BitAnd&lt;T&gt; for Simd&lt;T, LANES&gt;
where
    T: SimdElement + BitAnd&lt;Output = T&gt;,
    LaneCount&lt;LANES&gt;: SupportedLaneCount,
{
    type Output = Self;

    #[inline]
    fn bitand(self, rhs: T) -&gt; Self::Output {
        unsafe { intrinsics::simd_and(self, Simd::splat(rhs)) }
    }
}
</code></pre></div>
<p>this I think is completely fine if it were rewritten such that <code>Self: BitAnd</code> instead of <code>T: BitAnd</code>, and instead of calling the intrinsic, just used &amp; directly</p>



<a name="262022896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022896">(Nov 19 2021 at 03:27)</a>:</h4>
<p>Yeah.</p>



<a name="262022900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022900">(Nov 19 2021 at 03:27)</a>:</h4>
<p>and then, yeah, if you do the base impls, I think that's a good compromise</p>



<a name="262022901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022901">(Nov 19 2021 at 03:27)</a>:</h4>
<p>I can do that adjustment.</p>



<a name="262022948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022948">(Nov 19 2021 at 03:28)</a>:</h4>
<p>unfortunately the base impls still explode a bit, but it's only those</p>



<a name="262022952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022952">(Nov 19 2021 at 03:28)</a>:</h4>
<p>q: Does anyone else feel that <code>scalar.div(vector)</code> is kinda sus?</p>



<a name="262022954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022954">(Nov 19 2021 at 03:28)</a>:</h4>
<p>heh</p>



<a name="262022961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022961">(Nov 19 2021 at 03:28)</a>:</h4>
<p>it's no weirder than the other lhs splats</p>



<a name="262022968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022968">(Nov 19 2021 at 03:28)</a>:</h4>
<p>div just makes you question it more</p>



<a name="262022973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022973">(Nov 19 2021 at 03:29)</a>:</h4>
<p>no, some code needs to compute 1 / x, that's just the vector version</p>



<a name="262022977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262022977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262022977">(Nov 19 2021 at 03:29)</a>:</h4>
<p>to be fair, that's what <code>recip</code> is for</p>



<a name="262023047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023047">(Nov 19 2021 at 03:30)</a>:</h4>
<p>Yeah I kinda do not enjoy <code>1 / x</code> being an idiom. :P</p>



<a name="262023061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023061">(Nov 19 2021 at 03:30)</a>:</h4>
<p>I think if we have any automatic splatting, there's nothing wrong with the lhs being splatted for div</p>



<a name="262023062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023062">(Nov 19 2021 at 03:30)</a>:</h4>
<p>another example: vectorizing <code>for i in 1..n { sum += a / i as f32; }</code></p>



<a name="262023066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023066">(Nov 19 2021 at 03:31)</a>:</h4>
<p>Well okay.</p>



<a name="262023078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023078">(Nov 19 2021 at 03:31)</a>:</h4>
<p>I think <code>vector.div(scalar)</code> is fine tho', Jacob.</p>



<a name="262023089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023089">(Nov 19 2021 at 03:31)</a>:</h4>
<p>I agree that it's strange, just because div isn't commutitive</p>



<a name="262023093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023093">(Nov 19 2021 at 03:32)</a>:</h4>
<p>what about <code>1 - vec</code> though?</p>



<a name="262023176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023176">(Nov 19 2021 at 03:33)</a>:</h4>
<p>that would turn into, for i in 5 to 8: <code>sum += a / Simd::from_array([5., 6., 7., 8.])</code></p>



<a name="262023177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Approaches%20to%20cleaning%20up%20docs/near/262023177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Approaches.20to.20cleaning.20up.20docs.html#262023177">(Nov 19 2021 at 03:33)</a>:</h4>
<p>Yes, I satisfy this trait bound: <a href="https://www.youtube.com/watch?v=efHCdKb5UWc">https://www.youtube.com/watch?v=efHCdKb5UWc</a></p>
<div class="youtube-video message_inline_image"><a data-id="efHCdKb5UWc" href="https://www.youtube.com/watch?v=efHCdKb5UWc"><img src="https://uploads.zulipusercontent.net/0556a2a6d0e4c921cdc74f9635f6bc1b9fb7d94d/68747470733a2f2f692e7974696d672e636f6d2f76692f65664843644b62355557632f64656661756c742e6a7067"></a></div>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
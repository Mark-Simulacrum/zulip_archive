<html>
<head><meta charset="utf-8"><title>&quot;On nightly&quot; announcement · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html">&quot;On nightly&quot; announcement</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261564497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261564497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261564497">(Nov 15 2021 at 21:50)</a>:</h4>
<p>That's fine.</p>



<a name="261564873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261564873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261564873">(Nov 15 2021 at 21:53)</a>:</h4>
<p>let me know if you're happy with it and i'll open the PR</p>



<a name="261564980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261564980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261564980">(Nov 15 2021 at 21:54)</a>:</h4>
<p>Did you catch what I added at the tail?</p>



<a name="261565125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261565125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261565125">(Nov 15 2021 at 21:55)</a>:</h4>
<p>oh, about the macro?</p>



<a name="261565132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261565132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261565132">(Nov 15 2021 at 21:55)</a>:</h4>
<p>yeah, that's more accurate</p>



<a name="261565787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261565787" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261565787">(Nov 15 2021 at 22:00)</a>:</h4>
<p>the post with the link wasn't included in this topic, so reposting: <a href="https://hackmd.io/VGGIcV3VQjeUPcKwXZ1TBA">https://hackmd.io/VGGIcV3VQjeUPcKwXZ1TBA</a></p>



<a name="261570606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570606">(Nov 15 2021 at 22:41)</a>:</h4>
<p><span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> I made the example SSE2 function more correct. :^)</p>



<a name="261570789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570789">(Nov 15 2021 at 22:42)</a>:</h4>
<p>I don't think the function is unsafe, it would fail to compile anywhere else</p>



<a name="261570869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570869">(Nov 15 2021 at 22:42)</a>:</h4>
<p>I think you can just do <code>#[cfg(target_arch = "x86_64")]</code> at the top though</p>



<a name="261570881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570881">(Nov 15 2021 at 22:42)</a>:</h4>
<p>well okay. ;^)</p>



<a name="261570915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570915">(Nov 15 2021 at 22:42)</a>:</h4>
<p>that would be correct</p>



<a name="261570922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570922">(Nov 15 2021 at 22:42)</a>:</h4>
<p>ooh yes.</p>



<a name="261570937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261570937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261570937">(Nov 15 2021 at 22:42)</a>:</h4>
<p>and equally illustrative</p>



<a name="261571336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261571336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261571336">(Nov 15 2021 at 22:44)</a>:</h4>
<p>I wouldn't even add that <code>i686</code> thing because I think rust is wrong to include SSE2 on i686, if it does</p>



<a name="261571366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261571366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261571366">(Nov 15 2021 at 22:44)</a>:</h4>
<p>also you would need to change the <code>use std::arch</code></p>



<a name="261571367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261571367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261571367">(Nov 15 2021 at 22:44)</a>:</h4>
<p>Fair.</p>



<a name="261571555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261571555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261571555">(Nov 15 2021 at 22:46)</a>:</h4>
<p>I do insist on including the SAFETY note to promote good coding style. :^)</p>



<a name="261571658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261571658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261571658">(Nov 15 2021 at 22:48)</a>:</h4>
<p>yeah that's fine with me</p>



<a name="261572901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261572901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261572901">(Nov 15 2021 at 22:57)</a>:</h4>
<p>Yeah, I think we are good! ^_^ Thank you!</p>



<a name="261573214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261573214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261573214">(Nov 15 2021 at 23:00)</a>:</h4>
<p>proabbly just <code>#[cfg(target_feature = "sse2")]</code> is what i'd do for something like this. People use x86_64 and turn off sse2 support sometimes.</p>



<a name="261573224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261573224" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261573224">(Nov 15 2021 at 23:00)</a>:</h4>
<p>Oh lmao the comments</p>



<a name="261573309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261573309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261573309">(Nov 15 2021 at 23:00)</a>:</h4>
<p>portable_simd group, brought down by environment variables</p>



<a name="261573678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261573678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261573678">(Nov 15 2021 at 23:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="209168">Thom Chiovoloni</span> <a href="#narrow/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement/near/261573214">said</a>:</p>
<blockquote>
<p>proabbly just <code>#[cfg(target_feature = "sse2")]</code> is what i'd do for something like this. People use x86_64 and turn off sse2 support sometimes.</p>
</blockquote>
<p>sobbing noises.</p>



<a name="261574117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261574117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261574117">(Nov 15 2021 at 23:09)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=8afd26ee75ba0ebc2b38ea1690759dc0">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=8afd26ee75ba0ebc2b38ea1690759dc0</a> is how i'd write it for real</p>



<a name="261574305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261574305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261574305">(Nov 15 2021 at 23:10)</a>:</h4>
<p>If Caleb wants to make it that bad I am game. :3</p>



<a name="261574321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261574321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261574321">(Nov 15 2021 at 23:10)</a>:</h4>
<p>I just wanted to make it a <strong>minimum</strong> amount of pedantically correct.</p>



<a name="261574365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261574365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261574365">(Nov 15 2021 at 23:11)</a>:</h4>
<p>i mean the point of ours is it's better, so having the other one be realistically bad seems fair.</p>



<a name="261574379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261574379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261574379">(Nov 15 2021 at 23:11)</a>:</h4>
<p>but yeah, idrc</p>



<a name="261575035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575035">(Nov 15 2021 at 23:17)</a>:</h4>
<p>oh, should be _mm_loadu_ps also</p>



<a name="261575138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575138">(Nov 15 2021 at 23:18)</a>:</h4>
<p>so <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=dd8d9ce444e1f86808037cc3fb6c219e">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=dd8d9ce444e1f86808037cc3fb6c219e</a>. but that should be fixed either way. load_ps requires alignment.</p>



<a name="261575191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575191" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575191">(Nov 15 2021 at 23:18)</a>:</h4>
<p>omg</p>



<a name="261575270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575270">(Nov 15 2021 at 23:19)</a>:</h4>
<p>if you werent convinced std::simd is worth having before...</p>



<a name="261575407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575407">(Nov 15 2021 at 23:20)</a>:</h4>
<p>fuckin'</p>



<a name="261575615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575615">(Nov 15 2021 at 23:22)</a>:</h4>
<p>i also think we should change the #[cfg(target_arch = "x86_64")] to #[cfg(target_feature = "sse2")] even if we leave everything else (and ignore 32 bit processors), since people might copy the example...</p>



<a name="261575618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575618">(Nov 15 2021 at 23:22)</a>:</h4>
<p>but</p>



<a name="261575634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575634">(Nov 15 2021 at 23:22)</a>:</h4>
<p>Hmm okay.</p>



<a name="261575689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575689">(Nov 15 2021 at 23:23)</a>:</h4>
<p>err, target_feature, not target_arch</p>



<a name="261575832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261575832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261575832">(Nov 15 2021 at 23:24)</a>:</h4>
<p>right.</p>



<a name="261576262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261576262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261576262">(Nov 15 2021 at 23:29)</a>:</h4>
<p>There. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="261576432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261576432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261576432">(Nov 15 2021 at 23:31)</a>:</h4>
<p><span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> いい？</p>



<a name="261585834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261585834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261585834">(Nov 16 2021 at 01:18)</a>:</h4>
<p>I'm not at my computer right now but I read it over and it looks good, just 2 comments</p>



<a name="261585889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261585889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261585889">(Nov 16 2021 at 01:20)</a>:</h4>
<p>In the std::arch example, to be most correct I think you would want target_arch cfgs in addition to the target_feature</p>



<a name="261585952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261585952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261585952">(Nov 16 2021 at 01:20)</a>:</h4>
<p>Technically the sse2 should be enough but that might be more correct?</p>



<a name="261585988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261585988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261585988">(Nov 16 2021 at 01:21)</a>:</h4>
<p>The other thing, at the end I think "extension ISA" should just be "CPU feature" or something like that, since the rust verbiage is "feature"</p>



<a name="261586094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586094">(Nov 16 2021 at 01:22)</a>:</h4>
<p>read through it, generally lgtm</p>



<a name="261586265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586265">(Nov 16 2021 at 01:25)</a>:</h4>
<p>Fair.</p>



<a name="261586402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586402">(Nov 16 2021 at 01:27)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="cp">#[cfg(all(</span>
<span class="cp">    target_feature = </span><span class="s">"sse2"</span><span class="cp">,</span>
<span class="cp">    any(target_arch = </span><span class="s">"x86"</span><span class="cp">,</span>
<span class="cp">        target_arch = </span><span class="s">"x86_64"</span><span class="cp">)</span>
<span class="cp">))]</span><span class="w"></span>
</code></pre></div>
<p>this feels mean almost <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="261586512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586512">(Nov 16 2021 at 01:28)</a>:</h4>
<p>sse2 is enough, you don't need the other cfgs, but it might be more clear</p>



<a name="261586532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586532">(Nov 16 2021 at 01:29)</a>:</h4>
<p>Unless you happen to have another arch that defines an sse2 feature lol</p>



<a name="261586559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586559">(Nov 16 2021 at 01:29)</a>:</h4>
<p>it's not up to the arches, it's up to the rust project, this came up with the simd128 feature for wasm</p>



<a name="261586577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586577">(Nov 16 2021 at 01:29)</a>:</h4>
<p>nice!</p>



<a name="261586623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586623">(Nov 16 2021 at 01:30)</a>:</h4>
<p>i thought it was left up to llvm's feature flags</p>



<a name="261586641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586641">(Nov 16 2021 at 01:30)</a>:</h4>
<p>Yeah, I thought it was LLVM too</p>



<a name="261586674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586674">(Nov 16 2021 at 01:30)</a>:</h4>
<p>we already have some that don't map 1:1</p>



<a name="261586683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261586683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261586683">(Nov 16 2021 at 01:30)</a>:</h4>
<p>not that i know what those are</p>



<a name="261587374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261587374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261587374">(Nov 16 2021 at 01:41)</a>:</h4>
<p>umm, actually target features can collide <a href="https://rust.godbolt.org/z/o6P5Wfvox">https://rust.godbolt.org/z/o6P5Wfvox</a> ...aes is a feature for both aarch64 and x86_64</p>



<a name="261587604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261587604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261587604">(Nov 16 2021 at 01:45)</a>:</h4>
<p>so, pedantically, we probably need the x86/x86_64 cfgs</p>



<a name="261587673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261587673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261587673">(Nov 16 2021 at 01:46)</a>:</h4>
<p>gdi</p>



<a name="261587901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261587901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261587901">(Nov 16 2021 at 01:50)</a>:</h4>
<p>hmm, to make the stdarch code simpler, maybe we should only support x86_64 and have a comment saying x86 support can be added too if you feel like it</p>



<a name="261587970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261587970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261587970">(Nov 16 2021 at 01:51)</a>:</h4>
<p>nah. I am past remorse.</p>



<a name="261587986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261587986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261587986">(Nov 16 2021 at 01:51)</a>:</h4>
<p>"you were reluctant only 24 minutes ago" IT'S TIME TO ROCK</p>



<a name="261588065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261588065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261588065">(Nov 16 2021 at 01:52)</a>:</h4>
<p>the sse2 cfg can have a comment saying something like "there are x86_64 targets that don't include sse2, such as the linux kernel target"</p>



<a name="261588166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261588166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261588166">(Nov 16 2021 at 01:54)</a>:</h4>
<p>x86_64_unknown_none_linuxkernel</p>



<a name="261588219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261588219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261588219">(Nov 16 2021 at 01:55)</a>:</h4>
<p>Nah, that's TMI imo.</p>



<a name="261588226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261588226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261588226">(Nov 16 2021 at 01:55)</a>:</h4>
<p>k</p>



<a name="261590566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261590566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261590566">(Nov 16 2021 at 02:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/blog.rust-lang.org/pull/906">https://github.com/rust-lang/blog.rust-lang.org/pull/906</a> Opened PR.</p>



<a name="261592099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261592099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261592099">(Nov 16 2021 at 02:58)</a>:</h4>
<p>Thanks for opening it!</p>



<a name="261592122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261592122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261592122">(Nov 16 2021 at 02:59)</a>:</h4>
<p>yay!</p>



<a name="261592143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261592143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261592143">(Nov 16 2021 at 02:59)</a>:</h4>
<p>I imagine inside rust is the right place, but a few things made it to the main blog that I wouldn't expect</p>



<a name="261592300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261592300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261592300">(Nov 16 2021 at 03:01)</a>:</h4>
<p>from another discussion:</p>
<blockquote>
<p>Should this post be on the main blog, or on Inside Rust? Generally speaking, the way we've treated things historically is that the main blog is aimed at every user of Rust, and Inside Rust is for folks interested in Rust development, similar to other venues, like the users forum vs internals forum.</p>
</blockquote>



<a name="261593974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261593974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261593974">(Nov 16 2021 at 03:36)</a>:</h4>
<p>Yeah, I was thinking that our post wasn't really geared towards internal users necessarily</p>



<a name="261594067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/%22On%20nightly%22%20announcement/near/261594067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/.22On.20nightly.22.20announcement.html#261594067">(Nov 16 2021 at 03:37)</a>:</h4>
<p>i'm probably planning on telling phoronix about it in hopes they'll publish an article, so I think that probably qualifies as interesting to a wider audience</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Shifts · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html">Shifts</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272481477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272481477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272481477">(Feb 19 2022 at 01:23)</a>:</h4>
<p>Hi all, I'm trying to figure out how to do a logical shift right on an <code>i32x16</code> and finding it pretty difficult.  I understand that if I can convert to a <code>u32x16</code> and do the right shift it will be logical, but I can't figure out how to go from <code>i32x16</code> -&gt; <code>u32x16</code> -&gt; <code>i32x16</code> without going through a non-portable type like __mm512.  Am I missing an API?</p>



<a name="272481675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272481675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272481675">(Feb 19 2022 at 01:26)</a>:</h4>
<p>Separately, I know there has been recent discussions over whether to add scalar shifts or not.  From where I'm sitting that'd be really nice.  I'm doing a ton of scalar shifts in some generic code, and having to write <code>thing &lt;&lt; Simd::&lt;i32, LANES&gt;::splat(n)</code> instead of <code>thing &lt;&lt; n</code> is adding a lot of code noise.  I have checked on godbolt that LLVM removes the <code>splat</code>, but it's really a lot of noise in the source code.</p>



<a name="272482301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272482301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272482301">(Feb 19 2022 at 01:37)</a>:</h4>
<p>you want <code>Simd::cast</code> -- it's basically <code>as</code> for simd types</p>



<a name="272482309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272482309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272482309">(Feb 19 2022 at 01:37)</a>:</h4>
<p><a href="https://doc.rust-lang.org/nightly/std/simd/struct.Simd.html#method.cast">https://doc.rust-lang.org/nightly/std/simd/struct.Simd.html#method.cast</a></p>



<a name="272482410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272482410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272482410">(Feb 19 2022 at 01:38)</a>:</h4>
<p>Yep, I totally missed that.  Thanks <span class="user-mention" data-user-id="229517">@Jacob Lifshay</span> !</p>



<a name="272482447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272482447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272482447">(Feb 19 2022 at 01:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="457711">Dan Burkert</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272481675">said</a>:</p>
<blockquote>
<p>Separately, I know there has been recent discussions over whether to add scalar shifts or not.  From where I'm sitting that'd be really nice.  I'm doing a ton of scalar shifts in some generic code, and having to write <code>thing &lt;&lt; Simd::&lt;i32, LANES&gt;::splat(n)</code> instead of <code>thing &lt;&lt; n</code> is adding a lot of code noise.  I have checked on godbolt that LLVM removes the <code>splat</code>, but it's really a lot of noise in the source code.</p>
</blockquote>
<p>These were mostly removed because the initial implementation broke type inference for scalar code, so we do plan to readd them, more cautiously this time.</p>
<p>However, you should only have to write <code>Simd::splat(n)</code>, the rest should be inferred?</p>



<a name="272482526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272482526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272482526">(Feb 19 2022 at 01:40)</a>:</h4>
<blockquote>
<p>However, you should only have to write Simd::splat(n), the rest should be inferred?</p>
</blockquote>
<p>Quite possibly, I haven't tried that.  Will report back.</p>



<a name="272482539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272482539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272482539">(Feb 19 2022 at 01:40)</a>:</h4>
<p>logical shift: <a href="https://play.rust-lang.org/?version=nightly&amp;mode=release&amp;edition=2021&amp;gist=78f4bf12c87e1b0118e9dd0a2feb1300">https://play.rust-lang.org/?version=nightly&amp;mode=release&amp;edition=2021&amp;gist=78f4bf12c87e1b0118e9dd0a2feb1300</a></p>



<a name="272483042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483042">(Feb 19 2022 at 01:48)</a>:</h4>
<p><code>Simd::splat</code> does appear to work, thanks <span class="user-mention" data-user-id="281757">@Jubilee</span></p>



<a name="272483214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483214">(Feb 19 2022 at 01:50)</a>:</h4>
<p>maybe we should add <code>Simd::cast</code> as something that comes up in the docs if you search for <code>as</code>...</p>



<a name="272483344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483344">(Feb 19 2022 at 01:52)</a>:</h4>
<p>I was looking for a <code>From</code> impl FWIW, I think I subconsciously avoid <code>as</code> since it's such a footgun in other contexts</p>



<a name="272483479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483479">(Feb 19 2022 at 01:54)</a>:</h4>
<p>dunno if it'd be coherent, but something like <code>impl From&lt;Simd&lt;U; LANES&gt;&gt; for Simd&lt;T; LANES&gt; where U: SimdElement</code> was what I was expecting</p>



<a name="272483594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483594">(Feb 19 2022 at 01:56)</a>:</h4>
<p><span class="user-mention" data-user-id="457711">@Dan Burkert</span> Those aren't actually implemented for u32 to i32 and back.</p>



<a name="272483602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483602">(Feb 19 2022 at 01:56)</a>:</h4>
<p>we're not using <code>from</code> for all casting, cuz <code>from</code> is supposed to be value-preserving, not all casts preserve values</p>



<a name="272483614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483614">(Feb 19 2022 at 01:56)</a>:</h4>
<p>e.g. <code>3.4 as i32 == 3</code></p>



<a name="272483615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483615">(Feb 19 2022 at 01:56)</a>:</h4>
<p>oh of course</p>



<a name="272483622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483622">(Feb 19 2022 at 01:56)</a>:</h4>
<p>yep makes sense</p>



<a name="272483737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272483737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272483737">(Feb 19 2022 at 01:58)</a>:</h4>
<p>we should implement from for the value-preserving casts though, such as <code>i8</code> to <code>i32</code>. icr if we implemented those yet.</p>



<a name="272544363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/272544363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#272544363">(Feb 19 2022 at 21:38)</a>:</h4>
<p>We had not!</p>



<a name="273691586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273691586" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273691586">(Mar 01 2022 at 18:53)</a>:</h4>
<p>Re. casting, is there a safe way to go from (unaligned) <code>&amp;[u8]</code> to <code>Simd&lt;T, L&gt;</code>?  I.e. a safe wrapper around ptr::read_unaligned?</p>



<a name="273691872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273691872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273691872">(Mar 01 2022 at 18:54)</a>:</h4>
<p>or equivalent to <code>u64::from_be_bytes</code></p>



<a name="273692109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273692109">(Mar 01 2022 at 18:55)</a>:</h4>
<p>It won't be efficient, but you could use <code>from_*_bytes</code> and write each lane manually</p>



<a name="273692143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273692143">(Mar 01 2022 at 18:56)</a>:</h4>
<p>The compiler _might_ see through that and optimize it</p>



<a name="273692245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273692245">(Mar 01 2022 at 18:56)</a>:</h4>
<p>Ah - I don't need BE specifically, I actually want NE.  So right now I'm using unsafe ptr::read_unaligned (which works), but can't help but think there should be a safe function built in that does length checks</p>



<a name="273692387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273692387">(Mar 01 2022 at 18:57)</a>:</h4>
<p>The closest thing we have right now is you could use TryInto to convert the slice into an array, then convert the array into a vector</p>



<a name="273692432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273692432">(Mar 01 2022 at 18:57)</a>:</h4>
<p>it does seem like there should be a vectorized conversions between NE, BE, LE.  not sure if the instruction sets have that, or if it'd just be a fancy shuffle</p>



<a name="273692691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273692691">(Mar 01 2022 at 18:59)</a>:</h4>
<blockquote>
<p>The closest thing we have right now is you could use TryInto to convert the slice into an array, then convert the array into a vector</p>
</blockquote>
<p>hmm, what type would the array be?  I'm starting with an unaligned <code>&amp;[u8]</code> and want to end up with a <code>Simd&lt;u32, L&gt;</code></p>



<a name="273693316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273693316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273693316">(Mar 01 2022 at 19:02)</a>:</h4>
<p>For <code>[u8]</code> specifically, it'll probably be the safe-transmute work eventually, for <code>ne</code>.</p>



<a name="273693436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273693436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273693436">(Mar 01 2022 at 19:03)</a>:</h4>
<p>We have some byte conversion functions but they require beyond what's currently possible with stable const generics, since the size of the byte vector doesn't have the same length as the desired vector</p>



<a name="273693764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273693764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273693764">(Mar 01 2022 at 19:05)</a>:</h4>
<p>Hmm, for <code>i32</code> it could maybe work off <code>[u8; 4]</code>s, which you can get from a slice via <a href="https://doc.rust-lang.org/nightly/std/primitive.slice.html#method.as_chunks">https://doc.rust-lang.org/nightly/std/primitive.slice.html#method.as_chunks</a></p>



<a name="273693843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273693843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> scottmcm <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273693843">(Mar 01 2022 at 19:06)</a>:</h4>
<p>(I need to go try and push that method to stabilization...)</p>



<a name="273713286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273713286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273713286">(Mar 01 2022 at 21:29)</a>:</h4>
<p>Thanks for the thoughts <span class="user-mention" data-user-id="312331">@Caleb Zulawski</span> <span class="user-mention" data-user-id="125270">@scottmcm</span></p>



<a name="273713610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273713610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273713610">(Mar 01 2022 at 21:31)</a>:</h4>
<p>No problem</p>



<a name="273724173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273724173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273724173">(Mar 01 2022 at 22:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="457711">Dan Burkert</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273692245">said</a>:</p>
<blockquote>
<p>Ah - I don't need BE specifically, I actually want NE.  So right now I'm using unsafe ptr::read_unaligned (which works), but can't help but think there should be a safe function built in that does length checks</p>
</blockquote>



<a name="273726247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273726247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273726247">(Mar 01 2022 at 23:13)</a>:</h4>
<p>that would presumably still be unsafe, right?  It could be made safe if it was a <code>&amp;[u8] -&gt; Simd&lt;T, L&gt;</code> conversion that had length checks internally</p>



<a name="273726276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273726276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273726276">(Mar 01 2022 at 23:13)</a>:</h4>
<p>in my case the length checks get removed anyway since I do length checks all-at-once for an unrolled loop</p>



<a name="273726539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273726539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273726539">(Mar 01 2022 at 23:16)</a>:</h4>
<p>IMO I think there will probably never be a function that reads a slice of u8 as a vector of u32 since that's a pretty roundabout operation.  I expect safe transmute to eventually allow creation of a [u32; N] from a [u8; N * 4] though, which would solve this problem</p>



<a name="273726672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273726672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273726672">(Mar 01 2022 at 23:18)</a>:</h4>
<p>Reading from the pointer would still be unsafe, correct</p>



<a name="273731652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273731652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273731652">(Mar 02 2022 at 00:03)</a>:</h4>
<p>I see, I agree that'd solve the problem as well</p>



<a name="273731759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273731759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273731759">(Mar 02 2022 at 00:04)</a>:</h4>
<p>I'm surprised looking at the <code>bytemuck</code> API that it doesn't offer a way to do this, it seems like it would fit right in to the domain of <code>Pod</code>.  I suppose the author wants to limit it to just casts</p>



<a name="273731945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273731945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273731945">(Mar 02 2022 at 00:06)</a>:</h4>
<p><span class="user-mention" data-user-id="224471">@Lokathor</span></p>



<a name="273731952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273731952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273731952">(Mar 02 2022 at 00:06)</a>:</h4>
<p>Lol</p>



<a name="273732073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273732073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273732073">(Mar 02 2022 at 00:07)</a>:</h4>
<p>you can probably already do this with bytemuck</p>



<a name="273732168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273732168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273732168">(Mar 02 2022 at 00:08)</a>:</h4>
<p>oh, hm, maybe you'd need bytemuck2 for this i guess</p>



<a name="273732242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273732242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273732242">(Mar 02 2022 at 00:09)</a>:</h4>
<p>well if you want &amp;[u8] to T:Pod that's possible and maybe just not implemented</p>



<a name="273736607"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273736607" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273736607">(Mar 02 2022 at 00:56)</a>:</h4>
<p>&lt;<a href="https://github.com/Lokathor/bytemuck/pull/92">https://github.com/Lokathor/bytemuck/pull/92</a>&gt; I need someone who isn't me to double check this.</p>



<a name="273736815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273736815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273736815">(Mar 02 2022 at 00:59)</a>:</h4>
<p>I assume Pod implies all bit patterns are valid?</p>



<a name="273736820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273736820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273736820">(Mar 02 2022 at 01:00)</a>:</h4>
<p>It seems okay to me, then</p>



<a name="273737074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273737074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273737074">(Mar 02 2022 at 01:01)</a>:</h4>
<p>Maybe I'm crazy but couldn't you technically make that read any slice of <code>Pod</code>s into a different <code>Pod</code> type?</p>



<a name="273737081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273737081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273737081">(Mar 02 2022 at 01:01)</a>:</h4>
<p>Not just u8</p>



<a name="273737344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273737344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273737344">(Mar 02 2022 at 01:05)</a>:</h4>
<p>you could probably, but the API becomes more complicated that way I'd say, and &amp;[u8] is usually the common case. and that slice of pods can also already be cast to a slice of u8</p>



<a name="273737489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273737489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273737489">(Mar 02 2022 at 01:06)</a>:</h4>
<p>Good point</p>



<a name="273739231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273739231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273739231">(Mar 02 2022 at 01:26)</a>:</h4>
<p>&lt;<a href="https://docs.rs/bytemuck/latest/bytemuck/fn.pod_read_unaligned.html">https://docs.rs/bytemuck/latest/bytemuck/fn.pod_read_unaligned.html</a>&gt;</p>



<a name="273758388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273758388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273758388">(Mar 02 2022 at 05:34)</a>:</h4>
<p>hah wait did that just get added because of this thread?  Absolutely stellar, thanks Lokathor, Caleb</p>



<a name="273763454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273763454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273763454">(Mar 02 2022 at 06:53)</a>:</h4>
<p>As much as I do want everything in bytemuck to some day get blobbed into core for the benefit of all rustfolk (hi jwrenn!), being an outside crate does give me quite the edge on turn-around time.</p>



<a name="273895505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273895505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273895505">(Mar 02 2022 at 23:29)</a>:</h4>
<p>Re. casts (again) - I'm finding the lack of <code>Mask::cast</code> to be painful in some generic code where I've got a mask generated by <code>Simd&lt;T, L&gt;::lanes_eq</code>, where T is a type parameter to the function, and then using that to select from a <code>Simd&lt;f64&gt;</code>, e.g. a non-parameterized vector type</p>



<a name="273895595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273895595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273895595">(Mar 02 2022 at 23:30)</a>:</h4>
<p>I'm hoping I can use to_int + cast + from_int as a workaround</p>



<a name="273895776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273895776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273895776">(Mar 02 2022 at 23:30)</a>:</h4>
<p>I believe masks should all implement Into?</p>



<a name="273895798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273895798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273895798">(Mar 02 2022 at 23:30)</a>:</h4>
<p>Into the other various mask types, I mean</p>



<a name="273895956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273895956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273895956">(Mar 02 2022 at 23:32)</a>:</h4>
<p>It's not done via a blanket impl though</p>



<a name="273895976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273895976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273895976">(Mar 02 2022 at 23:32)</a>:</h4>
<p>So I could add some more type bounds on my function, but I'd like to keep it to just <code>where T: SimdElement</code></p>



<a name="273896025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896025">(Mar 02 2022 at 23:33)</a>:</h4>
<p>LMK if that's not clear - I can give a better example</p>



<a name="273896449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896449">(Mar 02 2022 at 23:38)</a>:</h4>
<p>into gives this error:</p>
<div class="codehilite"><pre><span></span><code>error[E0277]: the trait bound `std::simd::Mask&lt;i64, 8_usize&gt;: From&lt;std::simd::Mask&lt;&lt;T as SimdElement&gt;::Mask, 8_usize&gt;&gt;` is not satisfied
   --&gt; file.rs:136:101
    |
136 |             let mask: Mask&lt;i64, LANES&gt; = Simd::from(*values).lanes_eq(Simd::splat(v)).into();
    |                                                                                       ^^^^ the trait `From&lt;std::simd::Mask&lt;&lt;T as SimdElement&gt;::Mask, 8_usize&gt;&gt;` is not implemented for `std::simd::Mask&lt;i64, 8_usize&gt;`
    |
    = note: required because of the requirements on the impl of `Into&lt;std::simd::Mask&lt;i64, 8_usize&gt;&gt;` for `std::simd::Mask&lt;&lt;T as SimdElement&gt;::Mask, 8_usize&gt;`
help: consider introducing a `where` bound, but there might be an alternative better way to express this requirement
    |
111 | impl MyTrait for MyType where std::simd::Mask&lt;i64, 8_usize&gt;: From&lt;std::simd::Mask&lt;&lt;T as SimdElement&gt;::Mask, 8_usize&gt;&gt; {
    |                                      +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
...
</code></pre></div>



<a name="273896461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896461" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896461">(Mar 02 2022 at 23:38)</a>:</h4>
<p>Ahhh I see.</p>



<a name="273896510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896510">(Mar 02 2022 at 23:38)</a>:</h4>
<p>Thank you, yes we can probably add that.</p>



<a name="273896511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896511">(Mar 02 2022 at 23:38)</a>:</h4>
<p>BTW the to_int + cast + from_int workaround does work</p>



<a name="273896527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896527">(Mar 02 2022 at 23:38)</a>:</h4>
<p>I think because <code>cast</code> is generic</p>



<a name="273896538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896538">(Mar 02 2022 at 23:38)</a>:</h4>
<p>yeah that's probably what the inner implementation will look like. &lt;_&lt;</p>



<a name="273896568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273896568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dan Burkert <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273896568">(Mar 02 2022 at 23:39)</a>:</h4>
<p>yeah, I fully expect that will optimize out so not a huge deal</p>



<a name="273897257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273897257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273897257">(Mar 02 2022 at 23:45)</a>:</h4>
<p>tbh I am not sure our Mask implementation is actually enabling optimizations atm, but we don't have as many larger programs to bench/test on.</p>



<a name="273900929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273900929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273900929">(Mar 03 2022 at 00:18)</a>:</h4>
<p>Changing mask widths is not necessarily likely to optimize out</p>



<a name="273918954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273918954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273918954">(Mar 03 2022 at 03:59)</a>:</h4>
<p>ahhh, the bloody <code>From&lt;T&gt; for T</code> reflexive blanket impl conflicts with </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">N</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">From</span><span class="o">&lt;</span><span class="n">Mask</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Mask</span><span class="o">&lt;</span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">LaneCount</span><span class="o">&lt;</span><span class="n">N</span><span class="o">&gt;</span>: <span class="nc">SupportedLaneCount</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">U</span>: <span class="nc">MaskElement</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">from</span><span class="p">(</span><span class="n">value</span>: <span class="nc">Mask</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">N</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="bp">Self</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="mf">0.</span><span class="n">convert</span><span class="p">())</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="273920019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273920019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273920019">(Mar 03 2022 at 04:12)</a>:</h4>
<p>Oh yeah, I meant to say that earlier</p>



<a name="273920025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273920025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273920025">(Mar 03 2022 at 04:12)</a>:</h4>
<p>It wasn't possible to make a generic implementation</p>



<a name="273921262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921262">(Mar 03 2022 at 04:31)</a>:</h4>
<p><a href="https://github.com/rust-lang/portable-simd/pull/251">https://github.com/rust-lang/portable-simd/pull/251</a> Fortunately this still works.</p>



<a name="273921270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921270">(Mar 03 2022 at 04:31)</a>:</h4>
<p>And when it's a bitmask it's a no-op, so</p>



<a name="273921379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921379">(Mar 03 2022 at 04:33)</a>:</h4>
<p>I guess I don't understand why the generic bounds can't be specified with Into</p>



<a name="273921421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921421">(Mar 03 2022 at 04:34)</a>:</h4>
<p>hmm</p>



<a name="273921454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921454">(Mar 03 2022 at 04:35)</a>:</h4>
<p><code>Mask&lt;u64, N&gt;: Into&lt;Mask&lt;T::Mask, N&gt;&gt;</code></p>



<a name="273921457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921457">(Mar 03 2022 at 04:35)</a>:</h4>
<p>Something along those lines</p>



<a name="273921648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921648">(Mar 03 2022 at 04:38)</a>:</h4>
<p>i think the idea is users want to get out of having to specify 7 dozen trait bounds everywhere, the new method lets us get away with just the <code>T: MaskElement</code> one</p>



<a name="273921705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921705">(Mar 03 2022 at 04:39)</a>:</h4>
<p>yeah, the issue is satisfying</p>
<blockquote>
<p>error[E0277]: the trait bound <code>std::simd::Mask&lt;i64, 8_usize&gt;: From&lt;std::simd::Mask&lt;&lt;T as SimdElement&gt;::Mask, 8_usize&gt;&gt;</code> is not satisfied</p>
</blockquote>



<a name="273921850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921850">(Mar 03 2022 at 04:40)</a>:</h4>
<p>Imo that's like saying we just add an <code>add</code> function to the vector because you don't want to use an Add trait bound</p>



<a name="273921870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921870">(Mar 03 2022 at 04:41)</a>:</h4>
<p>I think reducing the bounds is a problem to be solved later, along with for scalars</p>



<a name="273921970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921970">(Mar 03 2022 at 04:42)</a>:</h4>
<p>That's the point of num-traits and I think we can put it off here, too</p>



<a name="273921986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273921986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273921986">(Mar 03 2022 at 04:42)</a>:</h4>
<p>Basically I'm not convinced that <code>Into</code> isn't the correct way to do it</p>



<a name="273922162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273922162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273922162">(Mar 03 2022 at 04:46)</a>:</h4>
<p>num-traits sucks though.</p>



<a name="273922178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273922178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273922178">(Mar 03 2022 at 04:46)</a>:</h4>
<p>it creates a giant ergonomic pitfall and everyone is just gonna describe this function anyways</p>



<a name="273923326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923326">(Mar 03 2022 at 05:02)</a>:</h4>
<p>Minimum I would say <code>cast</code> isn't the right word for this</p>



<a name="273923346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923346">(Mar 03 2022 at 05:03)</a>:</h4>
<p>Well okay.</p>



<a name="273923365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923365">(Mar 03 2022 at 05:03)</a>:</h4>
<p>retype?</p>



<a name="273923368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923368">(Mar 03 2022 at 05:03)</a>:</h4>
<p>I'm not saying we literally need to implement num-traits identically, I'm just saying this is certainly what Into is for</p>



<a name="273923421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923421">(Mar 03 2022 at 05:04)</a>:</h4>
<p>have an inherent <code>into</code> function?</p>



<a name="273923438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923438">(Mar 03 2022 at 05:04)</a>:</h4>
<p>Lol, that's not what I meant</p>



<a name="273923445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923445">(Mar 03 2022 at 05:04)</a>:</h4>
<p>yeah...i got that</p>



<a name="273923448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923448">(Mar 03 2022 at 05:04)</a>:</h4>
<p>I just meant that Into exists as a trait because then you can use it as a trait</p>



<a name="273923469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923469">(Mar 03 2022 at 05:05)</a>:</h4>
<p>i meant as a suggestion for what to rename <code>Mask::cast</code> to</p>



<a name="273923544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923544">(Mar 03 2022 at 05:06)</a>:</h4>
<p>I mean I am not sure how you are going to impl Into without that also conflicting.</p>



<a name="273923546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923546">(Mar 03 2022 at 05:06)</a>:</h4>
<p>because</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="w">    </span><span class="o">=</span><span class="w"> </span><span class="n">note</span>: <span class="nc">conflicting</span><span class="w"> </span><span class="n">implementation</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="k">crate</span><span class="w"> </span><span class="err">`</span><span class="n">core</span><span class="err">`</span>:
            <span class="o">-</span><span class="w"> </span><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="nb">Into</span><span class="o">&lt;</span><span class="n">U</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">T</span><span class="w"></span>
<span class="w">              </span><span class="k">where</span><span class="w"> </span><span class="n">U</span>: <span class="nb">From</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="273923968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273923968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273923968">(Mar 03 2022 at 05:13)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">LANES</span>: <span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="n">Mask</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">T</span>: <span class="nc">MaskElement</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">LaneCount</span><span class="o">&lt;</span><span class="n">LANES</span><span class="o">&gt;</span>: <span class="nc">SupportedLaneCount</span><span class="p">,</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">into</span><span class="o">&lt;</span><span class="n">U</span>: <span class="nc">MaskElement</span><span class="o">&gt;</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Mask</span><span class="o">&lt;</span><span class="n">U</span><span class="p">,</span><span class="w"> </span><span class="n">LANES</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Mask</span><span class="p">(</span><span class="bp">self</span><span class="p">.</span><span class="mf">0.</span><span class="n">convert</span><span class="p">())</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="273924038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924038">(Mar 03 2022 at 05:14)</a>:</h4>
<p>i don't know that naming it <code>into</code> is the best idea though...</p>



<a name="273924075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924075">(Mar 03 2022 at 05:15)</a>:</h4>
<p>resize?</p>



<a name="273924086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924086">(Mar 03 2022 at 05:15)</a>:</h4>
<p>sounds like the length changes...</p>



<a name="273924135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924135">(Mar 03 2022 at 05:16)</a>:</h4>
<p>on the bit level, I suppose.</p>



<a name="273924160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jacob Lifshay <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924160">(Mar 03 2022 at 05:16)</a>:</h4>
<p>yeah, i meant it's confusing because it sounds like the lane count changes rather than the lane type</p>



<a name="273924338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924338">(Mar 03 2022 at 05:19)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=8f471f3efa134d06426bec6abb257b87">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=8f471f3efa134d06426bec6abb257b87</a></p>



<a name="273924385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924385">(Mar 03 2022 at 05:20)</a>:</h4>
<p>Two different cases of using a generic mask with a particular mask</p>



<a name="273924395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Shifts/near/273924395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Shifts.html#273924395">(Mar 03 2022 at 05:20)</a>:</h4>
<p>I really don't think it's a big deal just using <code>Into</code></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
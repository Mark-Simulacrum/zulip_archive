<html>
<head><meta charset="utf-8"><title>Meeting 2021-04-12 · project-portable-simd · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/index.html">project-portable-simd</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html">Meeting 2021-04-12</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="234220376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234220376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234220376">(Apr 12 2021 at 19:57)</a>:</h4>
<p>Hello everyone!<br>
<a href="https://hackmd.io/cAW2WJISSYWOW5a3qlipGQ?both">https://hackmd.io/cAW2WJISSYWOW5a3qlipGQ?both</a> is up!</p>



<a name="234223788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234223788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234223788">(Apr 12 2021 at 20:21)</a>:</h4>
<p>We have two PRs open that are both kinda blocked on how we test wasm. I think that since wasm targets are "moving" in a much more significant sense, we should be comparing at least two with different implementations.</p>



<a name="234224600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234224600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234224600">(Apr 12 2021 at 20:27)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/89">#89</a> seems totally uncontroversial if it weren't for that?<br>
<a href="https://github.com/rust-lang/rust/issues/83">#83</a>, I should take a closer look at again, there were a few documentation nits.</p>



<a name="234224782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234224782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234224782">(Apr 12 2021 at 20:28)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span> did you see the issue I tagged you in?</p>



<a name="234224915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234224915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234224915">(Apr 12 2021 at 20:29)</a>:</h4>
<p>A little detail I left out, it looks like the wasm simd proposal has been finalized and the rust tooling has been updated to support it (but not wasm-bingen, yet)</p>



<a name="234224959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234224959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234224959">(Apr 12 2021 at 20:29)</a>:</h4>
<p>You mean <a href="https://github.com/rust-lang/rust/issues/92">#92</a>?</p>



<a name="234225067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225067">(Apr 12 2021 at 20:30)</a>:</h4>
<p>Yup that's the one</p>



<a name="234225256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225256">(Apr 12 2021 at 20:31)</a>:</h4>
<p>I think the most important thing to note is nothing broke in chrome, it's purely an outdated dependency</p>



<a name="234225261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225261">(Apr 12 2021 at 20:31)</a>:</h4>
<p>wasmparser? hm.</p>



<a name="234225303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225303">(Apr 12 2021 at 20:31)</a>:</h4>
<p>Uhmm...</p>



<a name="234225348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225348">(Apr 12 2021 at 20:32)</a>:</h4>
<p>...<em>blank stare into the distance</em> idgi,<br>
what actually provoked the error then?</p>



<a name="234225474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225474">(Apr 12 2021 at 20:32)</a>:</h4>
<p>It's a little silly, previous tests weren't actually exercising the simd comparison ops (we should probably add those)</p>



<a name="234225512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225512">(Apr 12 2021 at 20:32)</a>:</h4>
<p>But they're used in the classification functions which are tested</p>



<a name="234225611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225611">(Apr 12 2021 at 20:33)</a>:</h4>
<p>And the opcodes for those instructions aren't supported by the old version of wasmparser used by wasm-bingen</p>



<a name="234225691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225691">(Apr 12 2021 at 20:34)</a>:</h4>
<p>right but I mean...<br>
let me rephrase back down to really basics, since I lost track of what's going on:<br>
is the breakage at compile time or runtime?<br>
if it is at runtime, is it due to a compile time error in code emission?</p>



<a name="234225820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225820">(Apr 12 2021 at 20:34)</a>:</h4>
<p>Oh gotcha</p>



<a name="234225868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234225868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234225868">(Apr 12 2021 at 20:35)</a>:</h4>
<p>The error occurs because wasm-bingen parses the test module to some how massage it into something chrome can test</p>



<a name="234226005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226005">(Apr 12 2021 at 20:36)</a>:</h4>
<p>So it's not really runtime or compile time?  I think the closest analogy is probably link time?</p>



<a name="234226062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226062" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226062">(Apr 12 2021 at 20:36)</a>:</h4>
<p>I see.</p>



<a name="234226126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226126">(Apr 12 2021 at 20:36)</a>:</h4>
<p>As far as cargo is concerned it's while running the tests, if that answers your question a little better</p>



<a name="234226229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226229">(Apr 12 2021 at 20:37)</a>:</h4>
<p>Alright, so basically<br>
we hand a chunk of wasm to the test runner,<br>
which includes wasmparser in it somewhere, which yields the actual wasm ops to Chrome?</p>



<a name="234226273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226273">(Apr 12 2021 at 20:37)</a>:</h4>
<p>and _that_ errors?</p>



<a name="234226298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226298">(Apr 12 2021 at 20:38)</a>:</h4>
<p>I see.</p>



<a name="234226365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226365">(Apr 12 2021 at 20:38)</a>:</h4>
<p>Yeah basically.  It adds some extra testing apparatus to what cargo produces, and that step is erroring</p>



<a name="234226480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226480">(Apr 12 2021 at 20:39)</a>:</h4>
<p>Alright, now I am up to speed.</p>



<a name="234226493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226493">(Apr 12 2021 at 20:39)</a>:</h4>
<p>Hmmm...</p>



<a name="234226694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234226694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234226694">(Apr 12 2021 at 20:40)</a>:</h4>
<p>It's possible we'll miss stuff but I think we can generally ignore wasm at least for the time being</p>



<a name="234227380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234227380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234227380">(Apr 12 2021 at 20:45)</a>:</h4>
<p>Mm, I guess so.</p>



<a name="234227768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234227768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234227768">(Apr 12 2021 at 20:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="312331">Caleb Zulawski</span> <a href="#narrow/stream/257879-project-portable-simd/topic/Meeting.202021-04-12/near/234226694">said</a>:</p>
<blockquote>
<p>It's possible we'll miss stuff but I think we can generally ignore wasm at least for the time being</p>
</blockquote>
<p>I would prefer to know exactly what is breaking, so I think we should disable the relevant tests on wasm targets, then. Does that make sense?</p>



<a name="234228035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228035">(Apr 12 2021 at 20:50)</a>:</h4>
<p>Yeah I suppose we could try that, though there's actually quite a few opcodes that aren't supported</p>



<a name="234228054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228054">(Apr 12 2021 at 20:50)</a>:</h4>
<p>Not just comparisons</p>



<a name="234228123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228123">(Apr 12 2021 at 20:51)</a>:</h4>
<p>(also quite a few functions are affected by comparisons)</p>



<a name="234228292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228292">(Apr 12 2021 at 20:52)</a>:</h4>
<p>If we can spend a moment teasing apart the tests and isolate a specific subset that break, that would be nice, if we can't, that's fine too. It's more of a "try for 15 minutes" thing.</p>



<a name="234228617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228617">(Apr 12 2021 at 20:55)</a>:</h4>
<p>I think we should probably do biweekly meetings instead because we seem to accidentally miss the weekly now and then without much impact. <span aria-label="sleepy" class="emoji emoji-1f62a" role="img" title="sleepy">:sleepy:</span> and a smol group is already at risk of losing energy.</p>



<a name="234228667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228667">(Apr 12 2021 at 20:55)</a>:</h4>
<p>That or retry a scheduling thing.</p>



<a name="234228722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234228722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234228722">(Apr 12 2021 at 20:55)</a>:</h4>
<p>re: aarch64, I am much more uncomfortable with just shrugging off codegen/test failures, so I think switching to a lower lane limit was correct, but also lol?</p>



<a name="234229338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234229338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234229338">(Apr 12 2021 at 21:00)</a>:</h4>
<p>It seems like such an error is not likely to be caught at the current moment by LLVM upstream, in spite of being a relatively trivial exercise of SIMD-on-aarch64 codegen, compared to what I would expect. Or at least, compared to what LLVM has managed to do in the past without vomiting all over the floor.</p>



<a name="234230192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234230192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234230192">(Apr 12 2021 at 21:02)</a>:</h4>
<p>I am wondering if we shouldn't go even more sharply down and just focus on 16 lanes, even, so it's only 8 * 16, like Wasm did, and try to expand later. <span aria-label="weary" class="emoji emoji-1f629" role="img" title="weary">:weary:</span></p>



<a name="234232135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234232135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234232135">(Apr 12 2021 at 21:11)</a>:</h4>
<p>anyways, re: the trait thing, clearly we should go with FixedWidthSimd <em>nod</em></p>



<a name="234234476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234234476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234234476">(Apr 12 2021 at 21:31)</a>:</h4>
<p>Sorry, got pulled away</p>



<a name="234234612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234234612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234234612">(Apr 12 2021 at 21:32)</a>:</h4>
<p>My only thought with the wasm thing is that as we add more functionality and fix various things that were waiting on comparisons we'll be rejecting more and more tests and it'll just become a barrier to new PRs</p>



<a name="234234700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234234700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234234700">(Apr 12 2021 at 21:33)</a>:</h4>
<p>Regarding scheduling I'm open to biweekly or finding new times or whatever</p>



<a name="234234896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234234896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234234896">(Apr 12 2021 at 21:35)</a>:</h4>
<p>Regarding aarch64 I feel like it should be easy enough to fix but I can't actually figure out what was crashing the optimizer in the first place.</p>



<a name="234235038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234235038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234235038">(Apr 12 2021 at 21:36)</a>:</h4>
<p>Reducing the supported vector widths is definitely a hack</p>



<a name="234236547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236547">(Apr 12 2021 at 21:51)</a>:</h4>
<p>It's a hack, I'm just wondering if it isn't preferable to go "all the way" as it were, on our hack, and focus on a more releasable "product", and leave expanding to larger lanes to a future Jubilee, Caleb, etc.</p>



<a name="234236645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236645">(Apr 12 2021 at 21:52)</a>:</h4>
<p>Personally I don't feel like it's releasable at any lane count while that bug exists because I'm not really sure what's causing it <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="234236678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236678" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236678">(Apr 12 2021 at 21:53)</a>:</h4>
<p>lul</p>



<a name="234236691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236691">(Apr 12 2021 at 21:53)</a>:</h4>
<p>That's Fair.</p>



<a name="234236729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236729">(Apr 12 2021 at 21:53)</a>:</h4>
<p>But also I wouldn't want to go smaller than 32 lanes because AVX is mainstream and so is processing bytes</p>



<a name="234236797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236797">(Apr 12 2021 at 21:54)</a>:</h4>
<p>AVX512 we have a bit more leeway with</p>



<a name="234236832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236832">(Apr 12 2021 at 21:54)</a>:</h4>
<p>Okay, fair.</p>



<a name="234236848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236848">(Apr 12 2021 at 21:54)</a>:</h4>
<p>So we're drawing a hard line in the sand at 32 lanes.</p>



<a name="234236902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236902">(Apr 12 2021 at 21:55)</a>:</h4>
<p>If we absolutely had to we could shrink it further, but yes I think that's the practical minimum</p>



<a name="234236966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234236966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234236966">(Apr 12 2021 at 21:55)</a>:</h4>
<p>I for one would take up torches and pitchforks if we went below 16, tbh, I'd rather give up single-lane SIMD. <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> which is mostly there as a curiosity.</p>



<a name="234237195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234237195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234237195">(Apr 12 2021 at 21:58)</a>:</h4>
<p>Lol, yeah I think single lane simd is only useful to give scalar code a simd interface</p>



<a name="234237226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234237226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234237226">(Apr 12 2021 at 21:58)</a>:</h4>
<p>For generics</p>



<a name="234237242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234237242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234237242">(Apr 12 2021 at 21:58)</a>:</h4>
<p>I'm going to file that as an issue.<br>
"What use a single lane?"</p>



<a name="234237250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/257879-project-portable-simd/topic/Meeting%202021-04-12/near/234237250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Caleb Zulawski <a href="https://zulip-archive.rust-lang.org/stream/257879-project-portable-simd/topic/Meeting.202021-04-12.html#234237250">(Apr 12 2021 at 21:58)</a>:</h4>
<p>Lol</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Outstanding issues? · project-inline-asm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/index.html">project-inline-asm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html">Outstanding issues?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="197808722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808722">(May 16 2020 at 18:38)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> Are you aware of any outstanding unaddressed issues in the RFC? Either things that need adding to the text, or alternatives/concerns/etc that haven't been documented in the appropriate alternatives/etc sections?</p>



<a name="197808730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808730">(May 16 2020 at 18:38)</a>:</h4>
<p>Or have all open discussions on the RFC been addressed to the best of your knowledge?</p>



<a name="197808744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808744">(May 16 2020 at 18:38)</a>:</h4>
<p>I'm asking because I'm thinking of proposing FCP soon.</p>



<a name="197808747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808747">(May 16 2020 at 18:38)</a>:</h4>
<p>Not that I know of. I've tried to add every objection to the RFC text.</p>



<a name="197808749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808749">(May 16 2020 at 18:38)</a>:</h4>
<p>I've seen, and I really appreciate your thoroughness.</p>



<a name="197808756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808756">(May 16 2020 at 18:39)</a>:</h4>
<p>The only one that's still unresolved is whether we want to namespace the asm! macro</p>



<a name="197808765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808765">(May 16 2020 at 18:39)</a>:</h4>
<p>I'm fine leaving that one an unresolved question for now. I personally would find it quite inconvenient if we did, to the point that I suspect there will quickly arise a standard crate re-exporting it as a common name.</p>



<a name="197808822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808822">(May 16 2020 at 18:41)</a>:</h4>
<p>We could even do that ourselves in the standard library: provide <code>std::arch::x86_64::asm!</code> and <code>std::arch::x86::asm!</code> and similar, but re-export the one for the current target architecture under a common name.</p>



<a name="197808833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808833">(May 16 2020 at 18:41)</a>:</h4>
<p>That would defeat the point</p>



<a name="197808883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808883">(May 16 2020 at 18:42)</a>:</h4>
<p>Not necessarily. I could see value in being able to unambiguously reference one of the architecture-specific macros, perhaps.</p>



<a name="197808895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808895">(May 16 2020 at 18:43)</a>:</h4>
<p>But in any case, if the standard library doesn't provide it under a common name, a crate will. Nobody wants to write a giant tower of <code>#[cfg(...)] use std::arch::...::asm;</code> at the top of their code.</p>



<a name="197808972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197808972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197808972">(May 16 2020 at 18:45)</a>:</h4>
<p>Nonetheless, this isn't a question that needs resolving in the RFC. For now, your implementation provides it under a single name, and we can experiment with that in nightly, and if someone has a compelling argument for namespacing it they can make that argument based on real-world experience with nightly.</p>



<a name="197809028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809028">(May 16 2020 at 18:46)</a>:</h4>
<p>Fair enough</p>



<a name="197809133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809133">(May 16 2020 at 18:48)</a>:</h4>
<p>Also, same question for the PR: as far as you know, is the implementation of the new <code>asm!</code> completely done in terms of the specified behavior from the RFC, or are there any outstanding issues you still want to address?</p>



<a name="197809138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809138" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809138">(May 16 2020 at 18:49)</a>:</h4>
<p>(speaking of which, I'll start a new topic for the LLVM version/feature detection issue.)</p>



<a name="197809204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809204" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809204">(May 16 2020 at 18:50)</a>:</h4>
<p>All of the RFC is implemented, except the fallback to an external assembler for cranelift.</p>



<a name="197809277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809277">(May 16 2020 at 18:52)</a>:</h4>
<p>It seems reasonable to do that in a separate PR.</p>



<a name="197809284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809284" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809284">(May 16 2020 at 18:53)</a>:</h4>
<p>(Is the cranelift backend fully buildable from rust-lang/rust at this point, or does it still require an external tree?)</p>



<a name="197809351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809351" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809351">(May 16 2020 at 18:54)</a>:</h4>
<p>It's still external at this point.</p>



<a name="197809368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809368">(May 16 2020 at 18:55)</a>:</h4>
<p>Then in that case, that change <em>definitely</em> belongs in a follow-up PR.</p>



<a name="197809409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197809409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197809409">(May 16 2020 at 18:56)</a>:</h4>
<p>I got a WIP branch that integrates it into the rust build system. I am mostly waiting for how <code>git subtree</code> will work out before submitting a PR.</p>



<a name="197830890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197830890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197830890">(May 17 2020 at 05:01)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> On that note you might want follow up about that, I remember the Clippy team recently ran into issues with using <code>git subtree</code> but I don’t remember the outcome</p>



<a name="197839732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197839732" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197839732">(May 17 2020 at 09:28)</a>:</h4>
<p><span class="user-mention" data-user-id="219696">@XAMPPRocky</span> I have seen the discussion. I can't remember the outcome either though.</p>



<a name="197839743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197839743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> XAMPPRocky <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197839743">(May 17 2020 at 09:29)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="124288">@oli</span></p>



<a name="197964072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197964072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197964072">(May 18 2020 at 16:57)</a>:</h4>
<p>we're waiting on upstream git to merge the subtree patch. It has been finished according to the author and submitted: <a href="https://github.com/gitgitgadget/git/pull/493#issuecomment-626484834">https://github.com/gitgitgadget/git/pull/493#issuecomment-626484834</a></p>



<a name="197968065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216763-project-inline-asm/topic/Outstanding%20issues%3F/near/197968065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/216763-project-inline-asm/topic/Outstanding.20issues.3F.html#197968065">(May 18 2020 at 17:27)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> Thank you for getting the dialect preservation patch into upstream LLVM!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>[steering meeting] 2021-12-17 · t-compiler/meetings · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/index.html">t-compiler/meetings</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html">[steering meeting] 2021-12-17</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265294450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265294450" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265294450">(Dec 17 2021 at 13:21)</a>:</h4>
<p>I wrote up a doc to drive our discussion today of benchmark categorization: <a href="https://hackmd.io/@rust-compiler-team/rw-v-synth-dawn-of-benchmarks">https://hackmd.io/@rust-compiler-team/rw-v-synth-dawn-of-benchmarks</a></p>



<a name="265295139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265295139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265295139">(Dec 17 2021 at 13:28)</a>:</h4>
<p>(We will be meeting in about 92 minutes or so)</p>



<a name="265295150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265295150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265295150">(Dec 17 2021 at 13:28)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> ^</p>



<a name="265306681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265306681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265306681">(Dec 17 2021 at 15:01)</a>:</h4>
<p>hi <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> , lets get started; add a <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> to show you’re here</p>



<a name="265306697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265306697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265306697">(Dec 17 2021 at 15:01)</a>:</h4>
<p>and I want to ping <span class="user-mention" data-user-id="116122">@simulacrum</span> and <span class="user-mention" data-user-id="224872">@rylev</span> as well</p>



<a name="265306781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265306781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265306781">(Dec 17 2021 at 15:02)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> I'm around</p>



<a name="265306795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265306795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265306795">(Dec 17 2021 at 15:02)</a>:</h4>
<p>awesome</p>



<a name="265306896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265306896" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265306896">(Dec 17 2021 at 15:03)</a>:</h4>
<p>I figured we could start by taking maybe 10 or 15 minutes to read over the <a href="https://hackmd.io/@rust-compiler-team/rw-v-synth-dawn-of-benchmarks">doc</a> I posted above, and also everyone should look at <a href="https://perf.rust-lang.org">https://perf.rust-lang.org</a> itself, just to establish context.</p>



<a name="265306941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265306941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265306941">(Dec 17 2021 at 15:03)</a>:</h4>
<p>Lets see, what’s the right pattern for the emojis</p>



<a name="265307020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265307020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265307020">(Dec 17 2021 at 15:04)</a>:</h4>
<p>Click the <span aria-label="book" class="emoji emoji-1f4d6" role="img" title="book">:book:</span> when you start reading the <a href="https://hackmd.io/@rust-compiler-team/rw-v-synth-dawn-of-benchmarks">doc</a> (and leave it clicked). Click the <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span> when you are done reading.</p>



<a name="265307251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265307251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265307251">(Dec 17 2021 at 15:06)</a>:</h4>
<p>if you have questions about the text itself, you can use hackmd’s commenting system to highlight those parts. I’ll add a section at the very bottom, after the appendices, for people to post questions/topics they want to explicitly discuss here</p>



<a name="265307471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265307471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265307471">(Dec 17 2021 at 15:07)</a>:</h4>
<p>Hi folks!</p>



<a name="265307577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265307577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265307577">(Dec 17 2021 at 15:08)</a>:</h4>
<p>Okay, the <a href="https://hackmd.io/kOkd1YSNRWesWYogxL4pGw?both#Meeting-QuestionsTopics">place</a> to add explicit discussion points has now been added to the document. (Though, ha ha, the link doesn’t quite work as I expect from the non-two-column view…)</p>



<a name="265307938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265307938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265307938">(Dec 17 2021 at 15:10)</a>:</h4>
<p>Okay it looks like everyone has clicked both the <span aria-label="book" class="emoji emoji-1f4d6" role="img" title="book">:book:</span> and the <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span></p>



<a name="265307973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265307973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265307973">(Dec 17 2021 at 15:11)</a>:</h4>
<p>I see zero comments added via the hackmd interface</p>



<a name="265308019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308019">(Dec 17 2021 at 15:11)</a>:</h4>
<p>and the only meeting  question/topic was the one I added at the bottom.</p>



<a name="265308033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308033">(Dec 17 2021 at 15:11)</a>:</h4>
<p>I think an important question is less about how we categorize benchmarks, but how do we use the categorization to decide if a PR is acceptable perf-wise</p>



<a name="265308056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308056">(Dec 17 2021 at 15:11)</a>:</h4>
<p>okay lets add that to the bottoom</p>



<a name="265308182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308182">(Dec 17 2021 at 15:12)</a>:</h4>
<p>(on mobile, it's a bit hard to switch back and forth to the doc)</p>



<a name="265308211"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308211" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308211">(Dec 17 2021 at 15:12)</a>:</h4>
<p>no problem</p>



<a name="265308251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308251">(Dec 17 2021 at 15:12)</a>:</h4>
<p>A little off-topic - I think it would be good to be able to display changes in disk usage / artifact sizes, in the same way that we display changes in compilation time</p>



<a name="265308265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308265">(Dec 17 2021 at 15:12)</a>:</h4>
<p>E.g. a listing of percentage changes</p>



<a name="265308284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308284">(Dec 17 2021 at 15:13)</a>:</h4>
<p>lets maybe take a few minutes now: people, just feel free to say whatever you want about this topic here</p>



<a name="265308299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308299">(Dec 17 2021 at 15:13)</a>:</h4>
<p>Right now, the only way to see artifact size changes is to open each individual benchmark page</p>



<a name="265308321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308321">(Dec 17 2021 at 15:13)</a>:</h4>
<p>and we’ll collect it all into topics after you’re done purging</p>



<a name="265308339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308339">(Dec 17 2021 at 15:13)</a>:</h4>
<p>and there can often be trade-offs between compilation speed and disk usage</p>



<a name="265308370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308370">(Dec 17 2021 at 15:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265308299">said</a>:</p>
<blockquote>
<p>Right now, the only way to see artifact size changes is to open each individual benchmark page</p>
</blockquote>
<p>This is a well known limitation and has simply not been implemented. We'd love to implement it but just haven't had the time yet</p>



<a name="265308527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308527">(Dec 17 2021 at 15:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265308033">said</a>:</p>
<blockquote>
<p>I think an important question is less about how we categorize benchmarks, but how do we use the categorization to decide if a PR is acceptable perf-wise</p>
</blockquote>
<p>We in general leave it up to not-very-scientific heuristics on what is acceptable to merge or not. We'll likely want to decide what is acceptable for "important" benchmarks first and then decide how other categories differ.</p>



<a name="265308567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308567">(Dec 17 2021 at 15:15)</a>:</h4>
<p>Right now we use statistics extensively to hide what we consider to be irrelevant (right now only those that are within noise, I think?) changes in performance. I think it is important that we are careful to not hide what we consider synthetic benchmarks the same way.</p>



<a name="265308568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308568">(Dec 17 2021 at 15:15)</a>:</h4>
<p>On a similar topic: I think our current dashboard both shows too much (as in, too many benchmarks, or at least too many toy ones that are given equal prominence to real-world ones), but it also shows too little (having to switch between different metrics, rather than being able to see multiple metrics at once.</p>



<a name="265308813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308813">(Dec 17 2021 at 15:16)</a>:</h4>
<p>anyone else have any big picture discussion points to raise before we dive into them individually?</p>



<a name="265308816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265308816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265308816">(Dec 17 2021 at 15:16)</a>:</h4>
<p>We also need to take profile (e.g., release, debug, doc, etc.) and scenario (i.e., incremental comp with different changes and cache states) into account</p>



<a name="265309132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309132">(Dec 17 2021 at 15:18)</a>:</h4>
<p>Okay. So let me see</p>



<a name="265309275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309275">(Dec 17 2021 at 15:19)</a>:</h4>
<p>The topics I see here: I think both <span class="user-mention" data-user-id="232957">@Jack Huey</span> and <span class="user-mention" data-user-id="123586">@nagisa</span> ’s points can be combined into one: Assuming <em>some</em> (simple) classification, maybe a binary one, how would we <strong>use</strong> it to improve things?</p>



<a name="265309309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309309" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309309">(Dec 17 2021 at 15:19)</a>:</h4>
<p>does that sound like it captures both of your intents, <span class="user-mention" data-user-id="123586">@nagisa</span> and <span class="user-mention" data-user-id="232957">@Jack Huey</span> ?</p>



<a name="265309437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309437">(Dec 17 2021 at 15:20)</a>:</h4>
<p>and <span class="user-mention" data-user-id="125294">@Aaron Hill</span> ’s point I think can be combined with the one I added: what metrics should we gather and make prominent, by default, in our dashboard.</p>



<a name="265309440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309440">(Dec 17 2021 at 15:20)</a>:</h4>
<p>Seems close enough. I was kind of worried more about accidentally making things worse in certain scenarios, even if they get better in others.</p>



<a name="265309449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309449">(Dec 17 2021 at 15:20)</a>:</h4>
<p>Another thought: Thinking about the nofib section of the doc, I wonder if it's worth have a more extensive "real-world" collection of benchmarks that runs e.g. nightly but takes longer</p>



<a name="265309487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309487">(Dec 17 2021 at 15:20)</a>:</h4>
<p>That’s an interesting idea</p>



<a name="265309509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309509">(Dec 17 2021 at 15:20)</a>:</h4>
<p>Being able to add some benchmarks around projection caching would be great</p>



<a name="265309546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309546">(Dec 17 2021 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265309449">said</a>:</p>
<blockquote>
<p>Another thought: Thinking about the nofib section of the doc, I wonder if it's worth have a more extensive "real-world" collection of benchmarks that runs e.g. nightly but takes longer</p>
</blockquote>
<p>crater but for compiler performance</p>



<a name="265309660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309660">(Dec 17 2021 at 15:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265309449">said</a>:</p>
<blockquote>
<p>Another thought: Thinking about the nofib section of the doc, I wonder if it's worth have a more extensive "real-world" collection of benchmarks that runs e.g. nightly but takes longer</p>
</blockquote>
<p>I had a similar idea from the opposite end of the spectrum: Make the toy benchmarks not part of the default flow, but rather, a tool that developers would use when trying to dissect the root cause of some regression that was witnesssed.</p>



<a name="265309748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309748">(Dec 17 2021 at 15:22)</a>:</h4>
<p>so, okay, it sounds like <span class="user-mention" data-user-id="232957">@Jack Huey</span> ’s thought might be worthy of a separate topic</p>



<a name="265309789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309789">(Dec 17 2021 at 15:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265309660">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265309449">said</a>:</p>
<blockquote>
<p>Another thought: Thinking about the nofib section of the doc, I wonder if it's worth have a more extensive "real-world" collection of benchmarks that runs e.g. nightly but takes longer</p>
</blockquote>
<p>I had a similar idea from the opposite end of the spectrum: Make the toy benchmarks not part of the default flow, but rather, a tool that developers would use when trying to dissect the root cause of some regression that was witnesssed.</p>
</blockquote>
<p>What about regressions that only show up on "toy" benchmarks?</p>



<a name="265309839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309839">(Dec 17 2021 at 15:23)</a>:</h4>
<p>For example, I think some large CTFE regressions were only noticed on the 'stress' benchmarks</p>



<a name="265309868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309868">(Dec 17 2021 at 15:23)</a>:</h4>
<p>Would it make sense to have benchmarks run by default run only the subset that seems relevant to changed directories and stuff? Much like you wouldn't e.g. assign somebody from T-libs to review a LLVM change or vice versa.</p>



<a name="265309875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309875">(Dec 17 2021 at 15:23)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span>  So, that may get at the heart of my concern</p>



<a name="265309956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265309956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265309956">(Dec 17 2021 at 15:24)</a>:</h4>
<p>That would give us an opportunity to also benchmark not just the compiler but also libstd and stuff more readily</p>



<a name="265310006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310006">(Dec 17 2021 at 15:24)</a>:</h4>
<p>My concern would be that I often use perf runs when I don't know what the impact of a change is</p>



<a name="265310019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310019">(Dec 17 2021 at 15:24)</a>:</h4>
<p>and even when I think I do, there may be suprises</p>



<a name="265310027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310027">(Dec 17 2021 at 15:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265309868">said</a>:</p>
<blockquote>
<p>Would it make sense to have benchmarks run by default run only the subset that seems relevant to changed directories and stuff? Much like you wouldn't e.g. assign somebody from T-libs to review a LLVM change or vice versa.</p>
</blockquote>
<p>I’m not sure how easy it is to predict this ahead of time</p>



<a name="265310057"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310057" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310057">(Dec 17 2021 at 15:25)</a>:</h4>
<p>stdlib performance will probably also have an impact on compiler performance.</p>



<a name="265310210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310210">(Dec 17 2021 at 15:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265309789">said</a>:</p>
<blockquote>
<p>What about regressions that only show up on "toy" benchmarks?</p>
</blockquote>
<p>My thinking here is that we, at the very least, need to distinguish between “<em>important</em> toy benchmarks” and non-important ones. And then, non-important toy benchmarks should have a much higher threshold for when we care about a regression.</p>



<a name="265310261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310261">(Dec 17 2021 at 15:26)</a>:</h4>
<p>Right now, we rely on a lot of human intuition and group discussion to figure this out</p>



<a name="265310337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310337">(Dec 17 2021 at 15:27)</a>:</h4>
<p>(one might also reasonably argue that we shouldn’t be spending benchmarking cycles on non-important toys)</p>



<a name="265310348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310348">(Dec 17 2021 at 15:27)</a>:</h4>
<p>I'm not sure I fully understand what "important" benchmarks are. If they are unimportant, why do we have them?</p>



<a name="265310389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310389">(Dec 17 2021 at 15:27)</a>:</h4>
<p>Right. Do you think we ever go and remove benchmarks that we’ve decided do not reflect any stakeholder nor the community at large?</p>



<a name="265310409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310409">(Dec 17 2021 at 15:27)</a>:</h4>
<p>nor the community at large?</p>



<a name="265310473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310473">(Dec 17 2021 at 15:28)</a>:</h4>
<p>I don't think we've removed any benchmark in the last year at least</p>



<a name="265310499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310499" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310499">(Dec 17 2021 at 15:28)</a>:</h4>
<p>(nor has there been a discussion about this as far as I recall)</p>



<a name="265310505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310505">(Dec 17 2021 at 15:28)</a>:</h4>
<p>Yes. I suspect we tend to keep all of them. And its not like thats totally unjustified.</p>



<a name="265310532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310532">(Dec 17 2021 at 15:28)</a>:</h4>
<p>but it does complicate analysis</p>



<a name="265310621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310621" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310621">(Dec 17 2021 at 15:29)</a>:</h4>
<p>I'm not sure we have enough coverage to consider removing more than one or two benchmarks.</p>



<a name="265310660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310660">(Dec 17 2021 at 15:29)</a>:</h4>
<p>It seems like the importance of a benchmark is more like a multiplier on how much we care about the changes in it's performance: important benchmarks could be a 1x multiplier and non-important benchmarks a 0.5x multiplier. </p>
<p>If there's a large regression in a non-important benchmark then that's the circumstance in which we care about it, and the "value" of the regression will still be significant, the magnitude of the regression will make up for the multiplier. Similarly, if there's a smaller regression in a important benchmark (serde) or something, then the multiplier means that this has a larger "value" than the equivalent smaller regression in a non-important benchmark.</p>



<a name="265310780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310780">(Dec 17 2021 at 15:29)</a>:</h4>
<p>If we did have a more extensive set of benchmarks, we could learn what micro benches are most predictive of real benches</p>



<a name="265310942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310942">(Dec 17 2021 at 15:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265310780">said</a>:</p>
<blockquote>
<p>If we did have a more extensive set of benchmarks, we could learn what micro benches are most predictive of real benches</p>
</blockquote>
<p>Right, and this is where less-frequent runs could be important. I.e., we could be a lot more liberal about what benchmarks we include if the runs were only once-per-night.</p>



<a name="265310997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265310997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265310997">(Dec 17 2021 at 15:30)</a>:</h4>
<p>(and we would continue to have an important subset of those benchmarks run against every commit)</p>



<a name="265311162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311162">(Dec 17 2021 at 15:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116107">davidtwco</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265310660">said</a>:</p>
<blockquote>
<p>It seems like the importance of a benchmark is more like a multiplier on how much we care about the changes in it's performance: important benchmarks could be a 1x multiplier and non-important benchmarks a 0.5x multiplier. </p>
</blockquote>
<p>I agree with this (I might quibble with the specific numbers, but that’s minor). But I continue to think that the presentation should change as well</p>



<a name="265311181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311181">(Dec 17 2021 at 15:32)</a>:</h4>
<p>Yeah, the numbers are just for example's sake.</p>



<a name="265311229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311229">(Dec 17 2021 at 15:32)</a>:</h4>
<p>oh jeez I just realized that I don’t think <span class="user-mention" data-user-id="120989">@nnethercote</span> was pinged on this meeting, even though they are a clear stakeholder here.</p>



<a name="265311239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311239">(Dec 17 2021 at 15:32)</a>:</h4>
<p>We probably also would want a way to opt in to running all benchmarks for example when doing <code>@rust-timer queue</code>.</p>



<a name="265311243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311243">(Dec 17 2021 at 15:32)</a>:</h4>
<p>I am not too worried about more independent benchmarks; we can scale horizontally to more machines if necessary, it's "just" some relatively low amount of work. I think our impediment to more benchmarks has primarily been data-overload</p>



<a name="265311285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311285">(Dec 17 2021 at 15:32)</a>:</h4>
<p>It's 2am for him, I think he's probably not going to make this one <span aria-label="sleeping" class="emoji emoji-1f634" role="img" title="sleeping">:sleeping:</span></p>



<a name="265311298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311298">(Dec 17 2021 at 15:32)</a>:</h4>
<p>oh, right</p>



<a name="265311360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311360">(Dec 17 2021 at 15:33)</a>:</h4>
<p>(but yeah, we should definitely try to get feedback from him as well before making any substantial changes)</p>



<a name="265311376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311376">(Dec 17 2021 at 15:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265311243">said</a>:</p>
<blockquote>
<p>I am not too worried about more independent benchmarks; we can scale horizontally to more machines if necessary, it's "just" some relatively low amount of work</p>
</blockquote>
<p>Hmm, are we not concerned about variance between machines making the data harder to interpret?</p>



<a name="265311400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311400" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311400">(Dec 17 2021 at 15:33)</a>:</h4>
<p>I think we would pin benchmarks to machines</p>



<a name="265311404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311404">(Dec 17 2021 at 15:33)</a>:</h4>
<p>for some reason I thought that was a concern, but perhaps its outdated</p>



<a name="265311423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311423">(Dec 17 2021 at 15:34)</a>:</h4>
<p>right, yeah, pinning would be the solution tot hat.</p>



<a name="265311451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311451">(Dec 17 2021 at 15:34)</a>:</h4>
<p>okay</p>



<a name="265311486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311486">(Dec 17 2021 at 15:34)</a>:</h4>
<p>and at that point, one would just have to take (even more) care when comparing different benchmarks.</p>



<a name="265311513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311513">(Dec 17 2021 at 15:34)</a>:</h4>
<p>(and ideally being on near-equivalent hardware, too, though that may be a harder thing to do.)</p>



<a name="265311690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311690">(Dec 17 2021 at 15:36)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> , I think you and I would agree that we could get a lot of value out of revising the perf site to be able to display more one metric at once, in some manner. Does that sound right?</p>



<a name="265311706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311706">(Dec 17 2021 at 15:36)</a>:</h4>
<p>Question: do we have info from crater on how long it takes to build all the crates? <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="265311712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311712">(Dec 17 2021 at 15:36)</a>:</h4>
<p>It might be worth considering the "kind" of regression any given benchmark is written to try detect. Some benchmarks are just for general performance regression (we don't want serde to get slower in general, it isn't exercising any part of the compiler in particular), whereas others are more canary-in-the-coalmine type benchmarks to catch accidental non-linear regressions in specific circumstances/parts of the compiler. Perhaps this is just another way of framing "importance" or splitting that category up.</p>



<a name="265311760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311760">(Dec 17 2021 at 15:36)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> would you be willing to spend some time working with me to try to design+prototype alternative?</p>



<a name="265311798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311798">(Dec 17 2021 at 15:37)</a>:</h4>
<p>(anyone else is welcome to chime in there too. I just want to identify stakeholders who have both interest and time/resources)</p>



<a name="265311799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311799">(Dec 17 2021 at 15:37)</a>:</h4>
<p>Sure! (full disclosure, I have basically no experience with designing/prototyping web pages :))</p>



<a name="265311862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311862">(Dec 17 2021 at 15:38)</a>:</h4>
<p>Yeah, me either. My main experience here is with messing with gnuplot or latex to get graphs to align in a printed page</p>



<a name="265311955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265311955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265311955">(Dec 17 2021 at 15:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265311706">said</a>:</p>
<blockquote>
<p>Question: do we have info from crater on how long it takes to build all the crates? <span class="user-mention silent" data-user-id="116122">simulacrum</span></p>
</blockquote>
<p>Not readily available, but in theory could be extracted I think. Crater data is likely to be incredibly noisy though: the machines are seriously over-subscribed (e.g., 2-3x, I suspect, more threads than cores).</p>



<a name="265312033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312033">(Dec 17 2021 at 15:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265311799">said</a>:</p>
<blockquote>
<p>Sure! (full disclosure, I have basically no experience with designing/prototyping web pages :))</p>
</blockquote>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> and I have talked about this before. I welcome and applaud anyone else to take a dive into this. I've been really busy lately, but assuming that gets better, I'd be happy to help brainstorm ideas</p>



<a name="265312090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312090">(Dec 17 2021 at 15:39)</a>:</h4>
<p>I more am just curious, because in theory we could selection a "representative" subset of crates of various build times for a "real-world" suite</p>



<a name="265312101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312101">(Dec 17 2021 at 15:39)</a>:</h4>
<p>Yeah, I'm in a similar place in general in being open to discussion.</p>



<a name="265312271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312271">(Dec 17 2021 at 15:40)</a>:</h4>
<p>Okay</p>



<a name="265312322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312322">(Dec 17 2021 at 15:41)</a>:</h4>
<p>one really important take away I’m currently getting: Some people have definitely expressed concern with risk of hiding or obscuring currently visible benchmark data</p>



<a name="265312351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312351">(Dec 17 2021 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="315412">@jsha</span> is very busy but has a lot of experience designing UIs, you might be able to convince him to help</p>



<a name="265312365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312365">(Dec 17 2021 at 15:41)</a>:</h4>
<p>i.e. more than one person I think has relayed risk with just saying “toy benchmark =&gt; hide it from view and don’t include it in summary"</p>



<a name="265312547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312547">(Dec 17 2021 at 15:42)</a>:</h4>
<p>I think that if a benchmark is running during the main perf suite, there's a reason it's included and we shouldn't hide it</p>



<a name="265312705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312705">(Dec 17 2021 at 15:42)</a>:</h4>
<p>I’m not so convinced that’s universally true (i.e. I think some benchmarks might represent baggage that could be discarded)</p>



<a name="265312845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265312845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265312845">(Dec 17 2021 at 15:43)</a>:</h4>
<p>But I’m also willing to say there’s no reason to outright hide anything</p>



<a name="265313058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313058">(Dec 17 2021 at 15:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> that's not consistent with the current site though, it hides a <em>ton</em> of benchmarks that aren't significant</p>



<a name="265313185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313185" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313185">(Dec 17 2021 at 15:44)</a>:</h4>
<p>Maybe your position is more nuanced and you mean nothing should be hidden <em>unconditionally</em>?</p>



<a name="265313209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313209">(Dec 17 2021 at 15:44)</a>:</h4>
<p>yes that’s what I meant</p>



<a name="265313269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313269">(Dec 17 2021 at 15:44)</a>:</h4>
<p>I think the main problem is that the page requires a lot of background context to interpret meaningfully. Some users are trying to work on perf improvements and have that context (or are trying to acquire it) and other people just see that the perf bot left a comment on their PR, click through and have no idea what they're looking at. </p>
<p>Part of designing a better UI is likely going to have to take into account the UX of who is visiting the page and why.</p>



<a name="265313328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313328">(Dec 17 2021 at 15:44)</a>:</h4>
<p>Well, thinking about <span class="user-mention" data-user-id="116107">@davidtwco</span>'s comment on "muliplier", I think we could conceivably rank benchmark data not by the percentage of the benchmark itself, but by the expected percentage of change in "real-world" scenarios</p>



<a name="265313520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313520">(Dec 17 2021 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> I think that basically aligns with what <span class="user-mention" data-user-id="120989">@nnethercote</span> had proposed, though <span class="user-mention" data-user-id="120989">@nnethercote</span> ’s proposal was a simple two-level scheme</p>



<a name="265313690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313690">(Dec 17 2021 at 15:46)</a>:</h4>
<p>while it sounds like what <span class="user-mention" data-user-id="116107">@davidtwco</span> ’s multiplier and <span class="user-mention" data-user-id="232957">@Jack Huey</span> ’s "expected percentage of change in "real-world” scenarios” means would be a more dynamic selection of how to prioritize the output</p>



<a name="265313717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313717">(Dec 17 2021 at 15:46)</a>:</h4>
<p>i.e. sorting by impact</p>



<a name="265313727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313727">(Dec 17 2021 at 15:47)</a>:</h4>
<p>its a tough call</p>



<a name="265313754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313754">(Dec 17 2021 at 15:47)</a>:</h4>
<p>e.g. I’m a little hesitant to sort the benchmark graphs themselves by impact</p>



<a name="265313767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313767">(Dec 17 2021 at 15:47)</a>:</h4>
<p>because there is value in having consistency</p>



<a name="265313781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313781">(Dec 17 2021 at 15:47)</a>:</h4>
<p>when you are trying to compare today’s data against last weeks</p>



<a name="265313811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313811">(Dec 17 2021 at 15:47)</a>:</h4>
<p>fwiw, it's not clear to me whether prioritizing the output/impact is <em>quite</em> moving us toward better interface: I'm not sure that sorting is going to help the average user. My (perhaps wrong) assumption is that most people really don't know what to do with the 10-20 numbers, roughly, they may get from a perf run.</p>
<p>Sorting those numbers or showing <em>even more</em> metadata may not help</p>



<a name="265313822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313822">(Dec 17 2021 at 15:48)</a>:</h4>
<p>It's also true to think that not all real crates will be affected by different changes equally (it sounds obvious, but it's subtle)</p>



<a name="265313900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313900">(Dec 17 2021 at 15:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265313690">said</a>:</p>
<blockquote>
<p>while it sounds like what <span class="user-mention silent" data-user-id="116107">davidtwco</span> ’s multiplier and <span class="user-mention silent" data-user-id="232957">Jack Huey</span> ’s "expected percentage of change in "real-world” scenarios” means would be a more dynamic selection of how to prioritize the output</p>
</blockquote>
<p>It could also just be another column that acts as a numeric indicator of "how much you should care about this", making that context that some have explicit.</p>



<a name="265313938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313938">(Dec 17 2021 at 15:48)</a>:</h4>
<p>If there's a PR that makes 10% of crates 5x faster, but the remaning 10% slower, is that acceptable?</p>



<a name="265313961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313961">(Dec 17 2021 at 15:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265313811">said</a>:</p>
<blockquote>
<p>fwiw, it's not clear to me whether prioritizing the output/impact is <em>quite</em> moving us toward better interface: I'm not sure that sorting is going to help the average user. My (perhaps wrong) assumption is that most people really don't know what to do with the 10-20 numbers, roughly, they may get from a perf run.</p>
<p>Sorting those numbers or showing <em>even more</em> metadata may not help</p>
</blockquote>
<p>That is true too, and may speak in favor of <span class="user-mention" data-user-id="120989">@nnethercote</span> ’s proposal, in that if you just put the most important benchmarks in a section at the top, with a dedicated summary graph for <em>just</em> those benchmarks ...</p>



<a name="265313977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313977">(Dec 17 2021 at 15:49)</a>:</h4>
<p>(and that change could be explained by a single micro-benchmark)</p>



<a name="265313984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265313984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265313984">(Dec 17 2021 at 15:49)</a>:</h4>
<p>then that may be easier for the average person to interpret</p>



<a name="265314027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314027">(Dec 17 2021 at 15:49)</a>:</h4>
<p>i.e. they won’t know whether “externs regressed by 0.8%” is important</p>



<a name="265314058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314058">(Dec 17 2021 at 15:49)</a>:</h4>
<p>but seeing “diesel regressed by 0.8%” is hopefully more meaningful?</p>



<a name="265314220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314220">(Dec 17 2021 at 15:50)</a>:</h4>
<p>maybe? but it's still unclear to me -- if the expected action to such a regression is "go run cachegrind and improve performance on your PR", then it's not really different whether it's externs or diesel regressing</p>



<a name="265314222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314222">(Dec 17 2021 at 15:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265313938">said</a>:</p>
<blockquote>
<p>If there's a PR that makes 10% of crates 5x faster, but the remaning 10% slower, is that acceptable?</p>
</blockquote>
<p>Did you mean to say 90% for one of those two percentages?</p>



<a name="265314475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314475">(Dec 17 2021 at 15:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265314220">said</a>:</p>
<blockquote>
<p>maybe? but it's still unclear to me -- if the expected action to such a regression is "go run cachegrind and improve performance on your PR", then it's not really different whether it's externs or diesel regressing</p>
</blockquote>
<p>I guess I was more thinking along the lines of “will my PR be rejected based on performance concerns"</p>



<a name="265314541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314541">(Dec 17 2021 at 15:51)</a>:</h4>
<p>I.e. I don’t want people who only see a 0.8% regression on externs to spend any of their time thinking about performance investigation.</p>



<a name="265314673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314673">(Dec 17 2021 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265314541">said</a>:</p>
<blockquote>
<p>I.e. I don’t want people who only see a 0.8% regression on externs to spend any of their time thinking about performance investigation.</p>
</blockquote>
<p>this seems interesting to me</p>



<a name="265314688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314688">(Dec 17 2021 at 15:52)</a>:</h4>
<p>and that is where the tiered scheme matters to me</p>



<a name="265314730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314730">(Dec 17 2021 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265314673">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265314541">said</a>:</p>
<blockquote>
<p>I.e. I don’t want people who only see a 0.8% regression on externs to spend any of their time thinking about performance investigation.</p>
</blockquote>
<p>this seems interesting to me</p>
</blockquote>
<p>oh, you think someone <em>should</em> react to that, and do more performance investigation?</p>



<a name="265314737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314737">(Dec 17 2021 at 15:52)</a>:</h4>
<p>we can have higher thresholds for showing that data / separate toggle/section</p>



<a name="265314793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314793">(Dec 17 2021 at 15:52)</a>:</h4>
<p>but I <em>would</em> expect someone to justify the 0.8% statistically significant regression</p>



<a name="265314821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314821">(Dec 17 2021 at 15:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265314222">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265313938">said</a>:</p>
<blockquote>
<p>If there's a PR that makes 10% of crates 5x faster, but the remaning 10% slower, is that acceptable?</p>
</blockquote>
<p>Did you mean to say 90% for one of those two percentages?</p>
</blockquote>
<p>no, but I changed the wording a bit to be more clear</p>



<a name="265314841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314841">(Dec 17 2021 at 15:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265314793">said</a>:</p>
<blockquote>
<p>but I <em>would</em> expect someone to justify the 0.8% statistically significant regression</p>
</blockquote>
<p>Not me, not on that benchmark.</p>



<a name="265314873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314873">(Dec 17 2021 at 15:53)</a>:</h4>
<p>Not if that was the <em>only</em> significant regression</p>



<a name="265314894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314894">(Dec 17 2021 at 15:53)</a>:</h4>
<p>this is partly why I tried to tease apart the various properties in the doc.</p>



<a name="265314989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265314989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265314989">(Dec 17 2021 at 15:54)</a>:</h4>
<p>I guess what I would say: I expect <em>some</em> justification. It may be that for externs I'd expect 15 minutes of investigation, whereas diesel might suggest more time, though.</p>



<a name="265315043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315043">(Dec 17 2021 at 15:54)</a>:</h4>
<p>No first time contributor is going to come up with any useful data in 15 minutes</p>



<a name="265315085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315085">(Dec 17 2021 at 15:54)</a>:</h4>
<p>yeah I’m worried it ends up having an indavertant gate-keeping effect</p>



<a name="265315091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315091">(Dec 17 2021 at 15:54)</a>:</h4>
<p>And even experienced contributors will probably take a while unless it's very obvious</p>



<a name="265315096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315096">(Dec 17 2021 at 15:54)</a>:</h4>
<p>I'm not saying it's necessarily on the author</p>



<a name="265315148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315148">(Dec 17 2021 at 15:55)</a>:</h4>
<p>I think this is a core "indicator" for perf: At what point does someone need to justify or fix a perf "regression"</p>



<a name="265315163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315163">(Dec 17 2021 at 15:55)</a>:</h4>
<blockquote>
<p>I'm not saying it's necessarily on the author</p>
</blockquote>
<p>We should make that a <em>lot</em> more clear in the comment the bot leaves then</p>



<a name="265315205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315205">(Dec 17 2021 at 15:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265315096">said</a>:</p>
<blockquote>
<p>I'm not saying it's necessarily on the author</p>
</blockquote>
<p>Then whom? do you think its a good use of the weekly performance triage time?</p>



<a name="265315213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315213">(Dec 17 2021 at 15:55)</a>:</h4>
<p>I've seen at least one person spending hours to investigate a regression</p>



<a name="265315227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315227">(Dec 17 2021 at 15:55)</a>:</h4>
<p>reviewer, for example</p>



<a name="265315254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315254">(Dec 17 2021 at 15:55)</a>:</h4>
<p>I've been the reviewer on several PRs that have been held up for long times (sometimes months) over a perf regression of 2-3%</p>



<a name="265315334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315334">(Dec 17 2021 at 15:56)</a>:</h4>
<p>ultimately it's the reviewers call whether they deem more investigation is necessary before they r+</p>



<a name="265315363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315363">(Dec 17 2021 at 15:56)</a>:</h4>
<p>Mark does bring up a good point that we have different audiences - author, reviewer, perf team, compiler team, etc?</p>



<a name="265315686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315686">(Dec 17 2021 at 15:57)</a>:</h4>
<p>in general, I think if we don't care about triaging small regressions on these benchmarks, we will tend to regress (over time) in a not-small way on them. </p>
<p>it may be that the triage should be on perf team, compiler team, etc. -- not individual PR authors/reviewers -- but we also lack significant capacity on that side of things.</p>



<a name="265315797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315797">(Dec 17 2021 at 15:57)</a>:</h4>
<p>that may mean we just need to be "ok" with a slower compiler and that's fine, but I <em>do</em> think there's a tradeoff here.</p>



<a name="265315908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265315908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265315908">(Dec 17 2021 at 15:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265313984">said</a>:</p>
<blockquote>
<p>then that may be easier for the average person to interpret</p>
</blockquote>
<p>I have a bit of background doing UX work and typically the first thing I would start with is figuring out who your users (or your target users) are. Ideally this would actually involve talking to people who use perf.rlo now (which are some of us here). As pure conjecture, I would hypothesis we have two main groups of users: users who are trying to analyze compiler performance for a given change, probably working to improve it and casual users who got a notification their PR regressed performance somehow. (perf triage team may be a distinct 3rd group)</p>
<p>Once you know who your users are, you can begin to understand some facets of those users. For example, users in the first category likely want to see everything (or, at least, everything meaningful) and want to easily slice and analyze the data different ways. Users in the second category probably do not want to see a lot of data. A simplified categorization of the impact of their change on "real world" vs "artificial" code might be enough. However, they will probably want some kind of "call to action" as to what to do next. </p>
<p>Once we understand the behaviors of the users, then we can design a UI that is appropriate for each kind of user and a way to serve the correct UI to the proper set of users. </p>
<p>This is a lot of work but I have seen some really amazing results with this kind of methodology.</p>



<a name="265316307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265316307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265316307">(Dec 17 2021 at 15:58)</a>:</h4>
<p>So, we are almost out of time</p>



<a name="265316412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265316412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265316412">(Dec 17 2021 at 15:59)</a>:</h4>
<p>first off: this has been a great discussion. Lots of food for thought here</p>



<a name="265316513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265316513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265316513">(Dec 17 2021 at 15:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265315334">said</a>:</p>
<blockquote>
<p>ultimately it's the reviewers call whether they deem more investigation is necessary before they r+</p>
</blockquote>
<p>Ok, but this is usually not how it happens in practice. What usually happens is the author sees the regression, says "do I need to investigate this before landing", the reviewer says "sure if you have time" expecting it to take maybe an hour, and then the author spends ages on it. If the author gives up <em>and never reports back</em> then we don't even have a way to say "this is an unreasonable amount of time" - that happened to me on <a href="https://github.com/rust-lang/rust/issues/90323#issuecomment-962142791">https://github.com/rust-lang/rust/issues/90323#issuecomment-962142791</a>, the author spent something like <em>3 weeks</em> on the problem before I checked in on them and saw they had the wrong approach</p>



<a name="265316722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265316722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265316722">(Dec 17 2021 at 16:00)</a>:</h4>
<p>I think there’s more conversation/analyses that are remaining for us before we can make major (or even minor?) changes to the <em>default</em> UI for perf.rlo (or to the data we gather, the PR feedback from the bot, etc)</p>



<a name="265317016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317016">(Dec 17 2021 at 16:00)</a>:</h4>
<p>but the most immediate call to action would be to add some more abilities to slice-and-dice the data here</p>



<a name="265317165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317165">(Dec 17 2021 at 16:01)</a>:</h4>
<p>at least, I agree with <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> that I think that’s the thing that we, the compiler team, want the most right now</p>



<a name="265317231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317231">(Dec 17 2021 at 16:01)</a>:</h4>
<p>Regarding the nightly "real-world" extensive perf testing, what are people's thoughts? It seems like something orthogonal that can happen?</p>



<a name="265317289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317289">(Dec 17 2021 at 16:01)</a>:</h4>
<p>(we should also be thinking about the broader set of contributors, and how we can have perf.rlo better serve them too. But that’s longer term, I think…)</p>



<a name="265317389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317389">(Dec 17 2021 at 16:02)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> that’s a great point. these <em>are</em> potentially orthogonal items</p>



<a name="265317456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317456">(Dec 17 2021 at 16:02)</a>:</h4>
<p>I don't dispute that our methods for investigating regressions are major impediments, and we don't have great docs around them. I think doing more "user interviews" to improve that side of things, and work towards audiences Wesley is talking about, makes sense to me. <em>in general</em> perf triage can be an enormous time sink, since it's fairly unbounded. how to prevent people thinking they <em>must</em> find an answer when we leave comments and working on improving tooling to help them get quick answers both seem like great things to work on to me.</p>



<a name="265317523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317523">(Dec 17 2021 at 16:02)</a>:</h4>
<p>its possible there may be potential synergy, in terms of both systems being able to share the same underlying infrastructure, maybe.</p>



<a name="265317530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317530">(Dec 17 2021 at 16:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265317231">said</a>:</p>
<blockquote>
<p>Regarding the nightly "real-world" extensive perf testing, what are people's thoughts? It seems like something orthogonal that can happen?</p>
</blockquote>
<p>(although I'd like to push on it if there's interesting, I don't think I could do this alone, for lack of time and "infra")</p>



<a name="265317769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317769">(Dec 17 2021 at 16:03)</a>:</h4>
<p>Is there anyone else here who thinks they might have time/resources to work with <span class="user-mention" data-user-id="232957">@Jack Huey</span> on the nightly-extensive-perf thing?</p>



<a name="265317957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317957">(Dec 17 2021 at 16:03)</a>:</h4>
<p>(as I said above, I personally think I’ll be focusing on trying to work with <span class="user-mention" data-user-id="125294">@Aaron Hill</span> on adding ways to show multiple metrics at once)</p>



<a name="265317997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265317997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265317997">(Dec 17 2021 at 16:03)</a>:</h4>
<p>(partly, it is somewhat clear to me that we <strong>could</strong> expect first impressions in 15 minutes, I believe: it generally takes around that long for me to make a call as to whether a regression is likely to be readily fixable, and while I am likely on the upper-end of the spectrum of knowledge, I'm fairly confident in saying we could lower that knowledge for basic cases into code with extensive work.)</p>



<a name="265318213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318213">(Dec 17 2021 at 16:04)</a>:</h4>
<p>I don't think we should add more metrics (particularly differently-timed ones like nightly data) until we have better ways of dealing with existing ones, personally</p>



<a name="265318426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318426">(Dec 17 2021 at 16:05)</a>:</h4>
<p>(I'm not sure how much value we'd get either.)</p>



<a name="265318437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318437">(Dec 17 2021 at 16:05)</a>:</h4>
<p>I know we're over time already, but quick point: There's a shiny future where we can "automatically" analyze e.g. cachegrind data to figure out whether a regression is e.g. just inlining changes.</p>



<a name="265318506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318506">(Dec 17 2021 at 16:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265317231">said</a>:</p>
<blockquote>
<p>Regarding the nightly "real-world" extensive perf testing, what are people's thoughts? It seems like something orthogonal that can happen?</p>
</blockquote>
<p>I think this is important. A significant number of the compiler regressions we've had over the last year or two are perf ones and crater basically isn't able to catch them. At the same time, I don't think I have bandwidth to work on this right now <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="265318656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318656">(Dec 17 2021 at 16:06)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> maybe we back-burner this idea until after I have a chance to make progress with <span class="user-mention" data-user-id="125294">@Aaron Hill</span></p>



<a name="265318661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318661">(Dec 17 2021 at 16:06)</a>:</h4>
<p>?</p>



<a name="265318679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318679" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318679">(Dec 17 2021 at 16:06)</a>:</h4>
<p>i.e. I’d be happy to help with it, but I don’t want to be doing both things at once (in terms of time budget etc)</p>



<a name="265318740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318740">(Dec 17 2021 at 16:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265318426">said</a>:</p>
<blockquote>
<p>(I'm not sure how much value we'd get either.)</p>
</blockquote>
<p>Well, if it's extensive <em>enough</em>, then regressions like the projection caching issues would pop out</p>



<a name="265318794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318794">(Dec 17 2021 at 16:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265318656">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> maybe we back-burner this idea until after I have a chance to make progress with <span class="user-mention silent" data-user-id="125294">Aaron Hill</span></p>
</blockquote>
<p>That's fine</p>



<a name="265318986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265318986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265318986">(Dec 17 2021 at 16:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265318506">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265317231">said</a>:</p>
<blockquote>
<p>Regarding the nightly "real-world" extensive perf testing, what are people's thoughts? It seems like something orthogonal that can happen?</p>
</blockquote>
<p>I think this is important. A significant number of the compiler regressions we've had over the last year or two are perf ones and crater basically isn't able to catch them. At the same time, I don't think I have bandwidth to work on this right now <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>
</blockquote>
<p>When you say crater hasn't been able to catch them...have we looked? Does that just pop out as a build failure?</p>



<a name="265319296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265319296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265319296">(Dec 17 2021 at 16:10)</a>:</h4>
<p>I haven't personally looked into it but as <span class="user-mention" data-user-id="116122">@simulacrum</span> said, I suspect the variance between crater runs is high enough due to things like over subscription and leaky performance isolation from other guests on the same node that most of the perf regressions would have been lost in the noise.</p>



<a name="265319304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265319304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265319304">(Dec 17 2021 at 16:10)</a>:</h4>
<p>crater timeouts are too common, in general, for us to get much value I suspect -- maybe some kind of more intelligent retry scheme would help there, but there's not been a lot of time available for that kind of work.</p>



<a name="265319711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265319711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265319711">(Dec 17 2021 at 16:12)</a>:</h4>
<p>I think for something like compiler performance, we want to target a more narrow slice of the ecosystem than "every Rust repo we could find". Like, perhaps just the top 500/1000 crates on <a href="http://crates.io">crates.io</a> or something. Or those crates plus a set of crates which are consumers of those popular crates.</p>



<a name="265319757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265319757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265319757">(Dec 17 2021 at 16:12)</a>:</h4>
<p>Anyway, I don’t want to take more of anyone’s time. Thanks again for everyone in <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> for attending! Great meeting y’all.</p>



<a name="265320457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265320457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265320457">(Dec 17 2021 at 16:15)</a>:</h4>
<p>This discussion was super helpful!</p>



<a name="265340350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265340350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265340350">(Dec 17 2021 at 18:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232957">Jack Huey</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265317231">said</a>:</p>
<blockquote>
<p>Regarding the nightly "real-world" extensive perf testing, what are people's thoughts? It seems like something orthogonal that can happen?</p>
</blockquote>
<p>I think it would be useful to do a more controlled crater run to compare current to older rustc versions and obtain a set of crates that have regressed in performance that aren't reflected by any of the existing benchmarks. Maybe no such examples exist because users report serious regressions, but who knows.</p>



<a name="265340715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265340715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265340715">(Dec 17 2021 at 18:38)</a>:</h4>
<p>/me was scrolling through the thread... most of that has already been discussed.</p>



<a name="265360509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265360509" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265360509">(Dec 17 2021 at 21:07)</a>:</h4>
<p>I'm awake now and reading through this.</p>



<a name="265360654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265360654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265360654">(Dec 17 2021 at 21:08)</a>:</h4>
<p>My motivation is that there are typically many results on a page and I am mentally filtering them into primary/secondary, so it would be nice if I didn't have to do that, and if other people with less knowledge of the benchmark suite could do likewise.</p>



<a name="265360721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265360721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265360721">(Dec 17 2021 at 21:08)</a>:</h4>
<p>This is relevant not only for regressions. E.g. I improved match-stress-enum recently, and saw opportunity to improve it more, then I remembered that it's an artificial benchmark and not worth that much effort.</p>



<a name="265360883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265360883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265360883">(Dec 17 2021 at 21:10)</a>:</h4>
<p>In the past all the results for each benchmark were aggregated into a single line (in the text output) showing min/max/avg changes, and then you could click to expand and see all of them. At some point that was removed and now there is a lot more entries. I preferred the older style, TBH</p>



<a name="265361107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265361107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265361107">(Dec 17 2021 at 21:12)</a>:</h4>
<p>E.g. compare the screenshot in <a href="https://blog.mozilla.org/nnethercote/2019/07/25/the-rust-compiler-is-still-getting-faster/">https://blog.mozilla.org/nnethercote/2019/07/25/the-rust-compiler-is-still-getting-faster/</a> (moderately large) against the one in <a href="https://nnethercote.github.io/2021/11/12/the-rust-compiler-has-gotten-faster-again.html">https://nnethercote.github.io/2021/11/12/the-rust-compiler-has-gotten-faster-again.html</a> (enormous)</p>



<a name="265361386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265361386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265361386">(Dec 17 2021 at 21:14)</a>:</h4>
<p>On the latter one, I have to go down 27 entries to get to an entry that I consider important (serde check)</p>



<a name="265361647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265361647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265361647">(Dec 17 2021 at 21:16)</a>:</h4>
<p>So the use case of interest is explaining results to an interested non-expert. And the main problems are (a) OMG so many results, and (b) many of them fall into the "you can kind of ignore that one, it's not so important" category</p>



<a name="265361650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265361650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265361650">(Dec 17 2021 at 21:16)</a>:</h4>
<p>I consider helloworld check relevant because it gives a latency baseline for editors.</p>



<a name="265361836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265361836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265361836">(Dec 17 2021 at 21:18)</a>:</h4>
<p>As for some of the earlier points: I don't think a bigger suite is important. I think it's important to have a suite that can be run locally in a reasonable amount of time. I do that <em>all the time</em> and it's important. If you have to wait for a CI perf run every time to get feedback that slows things down massively</p>



<a name="265361948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265361948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265361948">(Dec 17 2021 at 21:19)</a>:</h4>
<p>I really like the significance filtering, BTW. It's a good way to reduce the number of results to consider.</p>



<a name="265362213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265362213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265362213">(Dec 17 2021 at 21:21)</a>:</h4>
<p>Anyway, to summarize and repeat myself, I think the guiding light here should be  "explaining results to an interested non-expert". That covers authors of PRs that unintentionally regressed, and also readers of blog posts explaining how compiler performance has changed over the past 6 months, for example.</p>



<a name="265362242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265362242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265362242">(Dec 17 2021 at 21:21)</a>:</h4>
<p>If nothing else changed, going back to the "one line per benchmark" would please me.</p>



<a name="265362404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265362404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265362404">(Dec 17 2021 at 21:23)</a>:</h4>
<p>One final thing on the primary/secondary split: <a href="https://perf.rust-lang.org/dashboard.html">https://perf.rust-lang.org/dashboard.html</a> already does this. It measures a subset of the benchmarks, I think it's just a handful of the biggest stable ones. But that's not labelled in any way</p>



<a name="265383748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bsteering%20meeting%5D%202021-12-17/near/265383748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bsteering.20meeting.5D.202021-12-17.html#265383748">(Dec 18 2021 at 01:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="330154">The 8472</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bsteering.20meeting.5D.202021-12-17/near/265361650">said</a>:</p>
<blockquote>
<p>I consider helloworld check relevant because it gives a latency baseline for editors.</p>
</blockquote>
<p>Also we are compiling dozens/hundreds/thousands of helloworlds when running rustc's test suite or doc-testing any crate.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
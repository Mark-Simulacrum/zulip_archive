<html>
<head><meta charset="utf-8"><title>[weekly] 2021-09-30 #54818 · t-compiler/meetings · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/index.html">t-compiler/meetings</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html">[weekly] 2021-09-30 #54818</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="255559419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255559419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255559419">(Sep 30 2021 at 11:54)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span>; the triage meeting will take place in about 2h<br>
<em>WG-prioritization</em> has done pre-triage in <a class="stream" data-stream-id="245100" href="/#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts">#t-compiler/wg-prioritization/alerts</a> and prepared the <a href="https://hackmd.io/eviBs_qISRC9mlDve0cSRQ?view">meeting agenda</a></p>
<p>Scheduled checkins from:<br>
<span class="user-group-mention" data-user-group-id="1123">@WG-self-profile</span>  by <span class="user-mention" data-user-id="124287">@mw</span>  and <span class="user-mention" data-user-id="125250">@Wesley Wiser</span>: anything to share?</p>



<a name="255578719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255578719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255578719">(Sep 30 2021 at 14:00)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> , triage meeting starting now. Leave a <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> to show you’re here! :)</p>



<a name="255578794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255578794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255578794">(Sep 30 2021 at 14:01)</a>:</h4>
<p>many thanks to <span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> for preparing the agenda</p>



<a name="255578889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255578889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255578889">(Sep 30 2021 at 14:01)</a>:</h4>
<p>happy to help , as always :-)</p>



<a name="255578902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255578902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255578902">(Sep 30 2021 at 14:02)</a>:</h4>
<p>lets start off with ~8 minutes for </p>
<h2>Announcements</h2>
<p>(including MCPs/FCPs and checkins)</p>



<a name="255579391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579391">(Sep 30 2021 at 14:04)</a>:</h4>
<ul>
<li>New MCPs (take a look, see if you like them!)<ul>
<li>"Make <code>-Z binary-dep-depinfo</code> the default behavior" [compiler-team#464]</li>
</ul>
</li>
</ul>



<a name="255579457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579457">(Sep 30 2021 at 14:04)</a>:</h4>
<ul>
<li>Old MCPs (not seconded, take a look)<ul>
<li>"rustdoc is using rustc_ast_pretty, would it be possible to make it somewhat "stable"?" <a href="https://github.com/rust-lang/compiler-team/issues/403">compiler-team#403</a> (last review activity: GH none, Zulip: +2months ago)</li>
<li>"CI should exercise (subset of) tests under --stage 1" <a href="https://github.com/rust-lang/compiler-team/issues/439">compiler-team#439</a> (last review activity: GH none, Zulip: about 1 month ago)</li>
<li>"Accept <code>pc</code> in place of <code>unknown</code> and <code>unknown</code> in place of <code>pc</code> for <code>x86_64</code> and <code>i?86</code> targets" <a href="https://github.com/rust-lang/compiler-team/issues/441">compiler-team#441</a> (last review activity: GH none, Zulip: about 1 week ago)</li>
<li>"Tier 3 target proposal: x86_64-unknown-none (freestanding/bare-metal x86-64)" <a href="https://github.com/rust-lang/compiler-team/issues/462">compiler-team#462</a> (last review activity: GH: 10 days ago, Zulip: about 4 days ago)</li>
</ul>
</li>
</ul>



<a name="255579662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579662">(Sep 30 2021 at 14:06)</a>:</h4>
<p>(I closed my <code>-Cprefer-dynamic=subset</code>MCP. I want to investigate the alternatives <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> has suggested.)</p>



<a name="255579727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579727">(Sep 30 2021 at 14:06)</a>:</h4>
<ul>
<li>Pending FCP requests (check your boxes!)<ul>
<li>"Write text output files to stdout if options like <code>-o -</code> or <code>--emit asm=-</code> are provided" <a href="https://github.com/rust-lang/compiler-team/issues/431">compiler-team#431</a></li>
</ul>
</li>
</ul>



<a name="255579746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579746">(Sep 30 2021 at 14:06)</a>:</h4>
<ul>
<li>Things in FCP (make sure you're good with it)<ul>
<li>No FCP requests this time.</li>
</ul>
</li>
</ul>



<a name="255579785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579785">(Sep 30 2021 at 14:06)</a>:</h4>
<ul>
<li>Accepted MCPs<ul>
<li>"Add <code>pie</code> relocation-model" <a href="https://github.com/rust-lang/compiler-team/issues/461">compiler-team#461</a></li>
</ul>
</li>
</ul>



<a name="255579806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579806">(Sep 30 2021 at 14:06)</a>:</h4>
<ul>
<li>Finalized FCPs (disposition merge)<ul>
<li>"Make *const (), *mut () okay for FFI" <a href="https://github.com/rust-lang/rust/pull/84267">rust#84267</a></li>
<li>"Make <code>#[derive(A, B, ...)]</code> cfg-eval its input only for <code>A, B, ...</code> and stabilize <code>feature(macro_attributes_in_derive_output)</code>" <a href="https://github.com/rust-lang/rust/pull/87220">rust#87220</a></li>
</ul>
</li>
</ul>



<a name="255579834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255579834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255579834">(Sep 30 2021 at 14:06)</a>:</h4>
<h3>WG checkins</h3>
<p>@_WG-self-profile_ by <span class="user-mention" data-user-id="124287">@mw</span> and <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> (<a href="https://hackmd.io/VNIxtjGBT8Owfkb92Vzt6w#WG-checkins">previous checkin</a>):</p>
<blockquote>
<p>@rylev and @mw have been working towards recording non-timestamp data like the sizes of files that the compiler emits – e.g. object files and incr. comp. on-disk data as part of the self-profile infrastructure. This hasn't quite landed yet, but significant progress has been made.</p>
</blockquote>
<blockquote>
<p>We've also introduced new apis that allow reading older versions of the on-disk data which will help perf.rlo work more smoothly as new versions are released.</p>
</blockquote>



<a name="255580085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580085">(Sep 30 2021 at 14:08)</a>:</h4>
<p>anyone have anything else to share?</p>



<a name="255580108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580108">(Sep 30 2021 at 14:08)</a>:</h4>
<p>Lets move on to backport nominations</p>



<a name="255580121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580121">(Sep 30 2021 at 14:08)</a>:</h4>
<h2>Backport nominations</h2>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p>



<a name="255580145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580145">(Sep 30 2021 at 14:08)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/4715/emoji/images/20717.png" title="beta"> "Disable the evaluation cache when in intercrate mode" <a href="https://github.com/rust-lang/rust/pull/88994">rust#88994</a><ul>
<li>beta nominated by <span class="user-mention" data-user-id="116122">@simulacrum</span> <a href="https://github.com/rust-lang/rust/pull/88994#issuecomment-921740736">to fix #88869</a>, a beta regresion</li>
<li><span class="user-mention" data-user-id="310399">@Mara</span> comments this causes the regression <a href="https://github.com/rust-lang/rust/pull/88994#issuecomment-923091128">rust#89119</a> now fixed by <a href="https://github.com/rust-lang/rust/pull/89125">rust#89125</a></li>
<li>seems to be perf neutral</li>
<li>should also <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a> be beta-backport nominated?</li>
</ul>
</li>
</ul>



<a name="255580213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580213">(Sep 30 2021 at 14:09)</a>:</h4>
<p>hi</p>



<a name="255580280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580280">(Sep 30 2021 at 14:09)</a>:</h4>
<p>Let me look at these linked issues</p>



<a name="255580407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580407">(Sep 30 2021 at 14:10)</a>:</h4>
<p>there's a couple of PRs filed which "fix" <a href="https://github.com/rust-lang/rust/issues/88969">https://github.com/rust-lang/rust/issues/88969</a> and I don't know what set is necessary to actually do so</p>



<a name="255580477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580477">(Sep 30 2021 at 14:10)</a>:</h4>
<p>if the first one backported, the second one should also be.</p>



<a name="255580493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580493">(Sep 30 2021 at 14:10)</a>:</h4>
<p>It's that PR, and another one</p>



<a name="255580502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580502">(Sep 30 2021 at 14:11)</a>:</h4>
<p>^</p>



<a name="255580638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580638">(Sep 30 2021 at 14:11)</a>:</h4>
<p>The first one didn't completely fix the issue with caching in intercrate mode</p>



<a name="255580700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580700">(Sep 30 2021 at 14:12)</a>:</h4>
<p>so I guess it turned out that its in fact <em>not</em>  <a href="https://github.com/rust-lang/rust/pull/88994#issuecomment-921348077">"obviously ‘correct' to just not cache”</a></p>



<a name="255580729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580729">(Sep 30 2021 at 14:12)</a>:</h4>
<blockquote>
<p>should also <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a> be beta-backport nominated?</p>
</blockquote>
<p>I think we should take <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a> as well. If we're going to backport this to fix a known issue, I don't think it makes a lot of sense to inject a different known issue.</p>



<a name="255580772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580772">(Sep 30 2021 at 14:12)</a>:</h4>
<p>Well, it is, but just not caching there doesn't do enough</p>



<a name="255580816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580816">(Sep 30 2021 at 14:12)</a>:</h4>
<p>I agree with <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> , in that we need to be talking about backporting both PR’s in tandem</p>



<a name="255580849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580849">(Sep 30 2021 at 14:13)</a>:</h4>
<p>so lets treat this nomination request as being about both PR's</p>



<a name="255580882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580882">(Sep 30 2021 at 14:13)</a>:</h4>
<p>My comment was more so say: "we can't introduce any soundness issues or such, because we just do more computation"</p>



<a name="255580891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255580891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255580891">(Sep 30 2021 at 14:13)</a>:</h4>
<p>So, both <a href="https://github.com/rust-lang/rust/issues/88994">rust#88994</a> <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a></p>



<a name="255581112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581112">(Sep 30 2021 at 14:14)</a>:</h4>
<p>There’s no tests on <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a></p>



<a name="255581200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581200">(Sep 30 2021 at 14:14)</a>:</h4>
<p>Unfortunately, I wasn't able to minimize a regression test</p>



<a name="255581250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581250">(Sep 30 2021 at 14:15)</a>:</h4>
<p>okay</p>



<a name="255581325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581325">(Sep 30 2021 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> lack of time, or is it really hard to minimize the <code>zvariant</code> example from <a href="https://github.com/rust-lang/rust/issues/89119">#89119</a> ?</p>



<a name="255581464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581464">(Sep 30 2021 at 14:16)</a>:</h4>
<p>anyway</p>



<a name="255581496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581496">(Sep 30 2021 at 14:16)</a>:</h4>
<p>I say backport approve on <a href="https://github.com/rust-lang/rust/issues/88994">#88994</a> and <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a></p>



<a name="255581522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581522">(Sep 30 2021 at 14:16)</a>:</h4>
<p>Some of both</p>



<a name="255581537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581537">(Sep 30 2021 at 14:16)</a>:</h4>
<p>and maybe add a needs-test to <a href="https://github.com/rust-lang/rust/issues/89119">#89119</a> ?</p>



<a name="255581568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581568" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581568">(Sep 30 2021 at 14:16)</a>:</h4>
<p>Incremental predicate issues are really hard to minimize</p>



<a name="255581627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581627">(Sep 30 2021 at 14:17)</a>:</h4>
<p>hmm okay</p>



<a name="255581689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581689">(Sep 30 2021 at 14:17)</a>:</h4>
<p>Should we reopen the issue too? For needs-test</p>



<a name="255581690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581690">(Sep 30 2021 at 14:17)</a>:</h4>
<p>I won’t reopen <a href="https://github.com/rust-lang/rust/issues/89119">#89119</a> immediately then</p>



<a name="255581711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581711">(Sep 30 2021 at 14:17)</a>:</h4>
<p><span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="255581727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581727">(Sep 30 2021 at 14:17)</a>:</h4>
<p>or rather… I know I cannot dedicate time to investigate making a regression test</p>



<a name="255581731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581731">(Sep 30 2021 at 14:17)</a>:</h4>
<p>Oh, wait, that was a non-incremental issue - it should be easier to minimize</p>



<a name="255581740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581740">(Sep 30 2021 at 14:17)</a>:</h4>
<p>Heh</p>



<a name="255581750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581750">(Sep 30 2021 at 14:17)</a>:</h4>
<p>okay then, lets reopen it</p>



<a name="255581810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581810">(Sep 30 2021 at 14:18)</a>:</h4>
<p>done</p>



<a name="255581838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581838">(Sep 30 2021 at 14:18)</a>:</h4>
<p>(and I already added the E-needs-test label to it)</p>



<a name="255581882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581882">(Sep 30 2021 at 14:18)</a>:</h4>
<p>next</p>



<a name="255581968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581968">(Sep 30 2021 at 14:18)</a>:</h4>
<blockquote>
<p>I say backport approve on <a href="https://github.com/rust-lang/rust/issues/88994">#88994</a> and <a href="https://github.com/rust-lang/rust/issues/89125">#89125</a></p>
</blockquote>
<p>so both beta-backport approved, correct?</p>



<a name="255581983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255581983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255581983">(Sep 30 2021 at 14:18)</a>:</h4>
<p>yes</p>



<a name="255582040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582040">(Sep 30 2021 at 14:19)</a>:</h4>
<p>they are both only nominated for beta backport, right?</p>



<a name="255582056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582056">(Sep 30 2021 at 14:19)</a>:</h4>
<p>yes</p>



<a name="255582058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582058">(Sep 30 2021 at 14:19)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/4715/emoji/images/20717.png" title="beta"> "2229: Mark insignificant dtor in stdlib" <a href="https://github.com/rust-lang/rust/pull/89144">rust#89144</a><ul>
<li>seems to be perf neutral</li>
<li>nominated by <span class="user-mention" data-user-id="116122">@simulacrum</span> to <a href="https://github.com/rust-lang/rust/pull/89144#issuecomment-925989791">have it for RFC2229</a></li>
</ul>
</li>
</ul>



<a name="255582305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582305">(Sep 30 2021 at 14:20)</a>:</h4>
<p>hmm</p>



<a name="255582333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582333">(Sep 30 2021 at 14:20)</a>:</h4>
<p>this is more internal machinery than I was expecting</p>



<a name="255582388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582388">(Sep 30 2021 at 14:21)</a>:</h4>
<p>this is basically an edition migration fix, though it is somewhat invasive</p>



<a name="255582395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582395">(Sep 30 2021 at 14:21)</a>:</h4>
<p>/me skims</p>



<a name="255582469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582469">(Sep 30 2021 at 14:21)</a>:</h4>
<p>without it the UX of migrations is pretty subpar, IMO, because we lint a lot more than necessary (e.g., on any vec)</p>



<a name="255582540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582540" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582540">(Sep 30 2021 at 14:21)</a>:</h4>
<p>Yeah, it sounds like a very similar analysis to dropck itself</p>



<a name="255582684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582684">(Sep 30 2021 at 14:22)</a>:</h4>
<p>vast bulk of diff is tests</p>



<a name="255582745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582745">(Sep 30 2021 at 14:22)</a>:</h4>
<p>I guess I’m comfortable with it. We need it for the edition, as you say</p>



<a name="255582965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582965">(Sep 30 2021 at 14:24)</a>:</h4>
<p>test 2229_closure_analysis/migrations/insignificant_drop.rs changed a lot</p>



<a name="255582974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255582974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255582974">(Sep 30 2021 at 14:24)</a>:</h4>
<p>Do we know what methodology was used to determine which types would be annotated?</p>



<a name="255583030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583030">(Sep 30 2021 at 14:24)</a>:</h4>
<p>I'm kind of curious why <code>Rc</code> is insignificant but <code>Arc</code> isn't ...</p>



<a name="255583060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583060">(Sep 30 2021 at 14:24)</a>:</h4>
<p>I guess I'm getting off topic.</p>



<a name="255583089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583089">(Sep 30 2021 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255582965">said</a>:</p>
<blockquote>
<p>test 2229_closure_analysis/migrations/insignificant_drop.rs changed a lot</p>
</blockquote>
<p>but it is of course part of this feature itself. So I guess its not risky. Just need to trust that its right.</p>



<a name="255583138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583138">(Sep 30 2021 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255583030">said</a>:</p>
<blockquote>
<p>I'm kind of curious why <code>Rc</code> is insignificant but <code>Arc</code> isn't ...</p>
</blockquote>
<p>maybe because <code>Arc</code> has a broader, non-local effect?</p>



<a name="255583185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583185" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583185">(Sep 30 2021 at 14:25)</a>:</h4>
<p>but yeah, understanding basis for policy here would be good</p>



<a name="255583352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583352">(Sep 30 2021 at 14:26)</a>:</h4>
<p>The 'significance' of a destructor only applies for edition migrations, right?</p>



<a name="255583353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583353">(Sep 30 2021 at 14:26)</a>:</h4>
<p>do we thinking leaving this for another week will improve anything?</p>



<a name="255583384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583384">(Sep 30 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255583352">said</a>:</p>
<blockquote>
<p>The 'significance' of a destructor only applies for edition migrations, right?</p>
</blockquote>
<p>that’s my understanding</p>



<a name="255583388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583388">(Sep 30 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255583352">said</a>:</p>
<blockquote>
<p>The 'significance' of a destructor only applies for edition migrations, right?</p>
</blockquote>
<p>correct, yes</p>



<a name="255583439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583439">(Sep 30 2021 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255583353">said</a>:</p>
<blockquote>
<p>do we thinking leaving this for another week will improve anything?</p>
</blockquote>
<p>my thinking is: We’re almost certain to beta-backport approve this at <em>some</em> point.</p>



<a name="255583473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583473">(Sep 30 2021 at 14:27)</a>:</h4>
<p>I don't think waiting a week helps</p>



<a name="255583483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583483">(Sep 30 2021 at 14:27)</a>:</h4>
<p>the only question is whether there’s any reason to wait</p>



<a name="255583502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583502">(Sep 30 2021 at 14:27)</a>:</h4>
<p>I think I would rather approve sooner than later.</p>



<a name="255583512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583512">(Sep 30 2021 at 14:27)</a>:</h4>
<p>and I don’t think it will.</p>



<a name="255583517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583517">(Sep 30 2021 at 14:27)</a>:</h4>
<p>okay</p>



<a name="255583565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583565">(Sep 30 2021 at 14:27)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/89144">rust#89144</a> beta backport approved</p>



<a name="255583573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583573">(Sep 30 2021 at 14:27)</a>:</h4>
<p>I'd rather have it in sooner for it to be bundled into the edition migration crater run (not sure when that's happening)</p>



<a name="255583604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583604">(Sep 30 2021 at 14:28)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/4715/emoji/images/20717.png" title="beta"> "[rfc 2229] Drop fully captured upvars in the same order as the regular drop code" <a href="https://github.com/rust-lang/rust/pull/89208">rust#89208</a><ul>
<li>Opened by <span class="user-mention" data-user-id="125250">@Wesley Wiser</span></li>
<li>We need this for Rust 2021</li>
</ul>
</li>
</ul>



<a name="255583731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583731">(Sep 30 2021 at 14:28)</a>:</h4>
<p>heck yeazh</p>



<a name="255583758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255583758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255583758">(Sep 30 2021 at 14:28)</a>:</h4>
<p>sorry I love this sort of change</p>



<a name="255584072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584072">(Sep 30 2021 at 14:30)</a>:</h4>
<p>backport <a href="https://github.com/rust-lang/rust/issues/89208">#89208</a> approved</p>



<a name="255584117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584117">(Sep 30 2021 at 14:30)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/4715/emoji/images/20717.png" title="beta"> "Don't normalize opaque types with escaping late-bound regions" <a href="https://github.com/rust-lang/rust/pull/89285">rust#89285</a><ul>
<li>Opened by <span class="user-mention" data-user-id="232957">@Jack Huey</span></li>
<li>Fixes a P-medium <a href="https://github.com/rust-lang/rust/issues/88862">rust#88862</a> causing a cargo build hang</li>
</ul>
</li>
</ul>



<a name="255584356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584356">(Sep 30 2021 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> what is long term plan here?</p>



<a name="255584358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584358">(Sep 30 2021 at 14:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255583758">said</a>:</p>
<blockquote>
<p>sorry I love this sort of change</p>
</blockquote>
<p>I have read the PR and the issue and I still have no idea what the previous behaviour was, what the new behaviour is and why is one better than the other, tbh.</p>



<a name="255584413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584413">(Sep 30 2021 at 14:32)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> before the drop order was dependant on how the fields were referenced in the lambda expressinm</p>



<a name="255584466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584466">(Sep 30 2021 at 14:33)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> that PR changes it so that you get a drop order that is defined by the declaration order, not by how the variables were used in the lambda expression</p>



<a name="255584503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584503">(Sep 30 2021 at 14:33)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> but maybe your point is that the test needs to be clearer?</p>



<a name="255584517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584517">(Sep 30 2021 at 14:33)</a>:</h4>
<p>uh two seconds, let me bring this into cache</p>



<a name="255584570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584570">(Sep 30 2021 at 14:33)</a>:</h4>
<p>Right, so, I mean long-term plan is lazy-normalization</p>



<a name="255584684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584684">(Sep 30 2021 at 14:34)</a>:</h4>
<p>here, it would be nice to not have to make the escaping late-bound regions case special, but seems like there's a perf impact (though we can other handle it fine)</p>



<a name="255584783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584783">(Sep 30 2021 at 14:35)</a>:</h4>
<p>Ah. Well, I'm quite surprised we still split out fully captured upvars into fields (if we do?) and if we don't I would love a codegen test at least that ensures we call the drop glue for the containing fully captured structure and not its fields.</p>



<a name="255584789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584789">(Sep 30 2021 at 14:35)</a>:</h4>
<p>Probably a missed cache somewhere; I tried to debug this but the log was so long it was really rough. I ran out of time.</p>



<a name="255584830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584830">(Sep 30 2021 at 14:35)</a>:</h4>
<p>But my point is basically that the change is way too complicated to look at quickly ^^</p>



<a name="255584846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584846">(Sep 30 2021 at 14:35)</a>:</h4>
<p><span class="user-mention" data-user-id="232957">@Jack Huey</span> okay thanks</p>



<a name="255584865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584865">(Sep 30 2021 at 14:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255584783">said</a>:</p>
<blockquote>
<p>Ah. Well, I'm quite surprised we still split out fully captured upvars into fields (if we do?) and if we don't I would love a codegen test at least that ensures we call the drop glue for the containing fully captured structure and not its fields.</p>
</blockquote>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> ^ thoughts on this?</p>



<a name="255584997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255584997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255584997">(Sep 30 2021 at 14:36)</a>:</h4>
<p>Niko and I talked about that when I started working on the PR but we felt this would be the simpler change to make at this time and (now that we've done this), we can always go back and do that later without changing behavior again.</p>



<a name="255585067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585067">(Sep 30 2021 at 14:37)</a>:</h4>
<p>fair.</p>



<a name="255585096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585096">(Sep 30 2021 at 14:37)</a>:</h4>
<p>Okay so I guess the point here is that we are still capturing upvars into individual fields (right?).</p>



<a name="255585103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585103">(Sep 30 2021 at 14:37)</a>:</h4>
<p>Yes</p>



<a name="255585121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585121" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585121">(Sep 30 2021 at 14:37)</a>:</h4>
<p>and I infer the main drawback to this is that it makes the closures larger than need be</p>



<a name="255585124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585124">(Sep 30 2021 at 14:37)</a>:</h4>
<p>right?</p>



<a name="255585183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585183">(Sep 30 2021 at 14:38)</a>:</h4>
<p>Uh</p>



<a name="255585241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585241">(Sep 30 2021 at 14:38)</a>:</h4>
<p>Wouldn't they be the same size?</p>



<a name="255585258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585258">(Sep 30 2021 at 14:38)</a>:</h4>
<p>The codegen is less efficient around drops, but the closures themselves should remain optimal.</p>



<a name="255585337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585337">(Sep 30 2021 at 14:38)</a>:</h4>
<p>Okay, as long as the two of you are happily communicating, then I won’t worry about what I misunderstand here.</p>



<a name="255585438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585438">(Sep 30 2021 at 14:39)</a>:</h4>
<p>I'm happy to discuss it more to make sure everyone is on board with the backport <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="255585480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585480">(Sep 30 2021 at 14:39)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="123586">@nagisa</span> sounds happy with the short term answer?</p>



<a name="255585496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585496">(Sep 30 2021 at 14:39)</a>:</h4>
<p>Sure, lets move on.</p>



<a name="255585557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585557">(Sep 30 2021 at 14:40)</a>:</h4>
<p>back to <a href="https://github.com/rust-lang/rust/issues/89285">rust#89285</a></p>



<a name="255585587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585587">(Sep 30 2021 at 14:40)</a>:</h4>
<p>I think it seems fine to backport <a href="https://github.com/rust-lang/rust/issues/89285">rust#89285</a></p>



<a name="255585612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585612">(Sep 30 2021 at 14:40)</a>:</h4>
<ul>
<li>No stable nominations for <code>T-compiler</code> this time.</li>
</ul>



<a name="255585648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585648">(Sep 30 2021 at 14:40)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p>
<ul>
<li><img alt=":beta:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/4715/emoji/images/20717.png" title="beta"> "Use the correct edition for syntax highlighting doctests" <a href="https://github.com/rust-lang/rust/pull/89277">rust#89277</a><ul>
<li>nominated by <span class="user-mention" data-user-id="116122">@simulacrum</span> as needed for 2021 edition</li>
<li>T-rustdoc (cc <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span>) is fine with the backport</li>
</ul>
</li>
</ul>



<a name="255585691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585691">(Sep 30 2021 at 14:40)</a>:</h4>
<p>Wait, hang on a second.</p>



<a name="255585708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585708">(Sep 30 2021 at 14:40)</a>:</h4>
<p>ok</p>



<a name="255585805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585805">(Sep 30 2021 at 14:41)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/89285">#89285</a> said it was effectively a partial revert of <a href="https://github.com/rust-lang/rust/issues/85499">#85499</a>. Does that mean it re-introduces the issues that PR fixed?</p>



<a name="255585954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585954">(Sep 30 2021 at 14:42)</a>:</h4>
<p>"While we technically can handle them fine, it doesn't change test output either way"</p>



<a name="255585958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585958">(Sep 30 2021 at 14:42)</a>:</h4>
<p>Oh, I see <a href="https://github.com/rust-lang/rust/issues/85499">#85499</a> also landed in 1.56.</p>



<a name="255585984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255585984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255585984">(Sep 30 2021 at 14:42)</a>:</h4>
<p>So, <a href="https://github.com/rust-lang/rust/issues/89285">#89285</a></p>



<a name="255586007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586007">(Sep 30 2021 at 14:42)</a>:</h4>
<p>So this won't introduce any behavior changes in this release.</p>



<a name="255586021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586021">(Sep 30 2021 at 14:42)</a>:</h4>
<p>It's only a partial revert for opaque types with escaping bound vars</p>



<a name="255586067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586067">(Sep 30 2021 at 14:43)</a>:</h4>
<p>we good?</p>



<a name="255586074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586074">(Sep 30 2021 at 14:43)</a>:</h4>
<p>Seems like the only issue that's popped up relates to TAIT</p>



<a name="255586079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586079" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586079">(Sep 30 2021 at 14:43)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="255586089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586089">(Sep 30 2021 at 14:43)</a>:</h4>
<p>Thanks!</p>



<a name="255586118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586118">(Sep 30 2021 at 14:43)</a>:</h4>
<p>okay</p>



<a name="255586155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586155">(Sep 30 2021 at 14:43)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p>
<ul>
<li><img alt=":beta:" class="emoji" src="https://zulip-avatars.s3.amazonaws.com/4715/emoji/images/20717.png" title="beta"> "Use the correct edition for syntax highlighting doctests" <a href="https://github.com/rust-lang/rust/pull/89277">rust#89277</a><ul>
<li>nominated by <span class="user-mention" data-user-id="116122">@simulacrum</span> as needed for 2021 edition</li>
<li>T-rustdoc (cc <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span>) is fine with the backport</li>
</ul>
</li>
</ul>



<a name="255586319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586319">(Sep 30 2021 at 14:44)</a>:</h4>
<p>Just to re-confirm: I'm okay with the backport</p>



<a name="255586334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586334">(Sep 30 2021 at 14:44)</a>:</h4>
<p>seeems fine ….</p>



<a name="255586594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586594">(Sep 30 2021 at 14:46)</a>:</h4>
<p>I’m not sure if I should be worried about there only being one small test in that PR (and no sign of changes to other tests)</p>



<a name="255586645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586645">(Sep 30 2021 at 14:46)</a>:</h4>
<p>but, <a href="https://github.com/rust-lang/rust/issues/89277">#89277</a> backport approved</p>



<a name="255586661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586661">(Sep 30 2021 at 14:46)</a>:</h4>
<p>a sec…</p>



<a name="255586695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586695">(Sep 30 2021 at 14:47)</a>:</h4>
<p>okay lets wait a moment</p>



<a name="255586700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586700">(Sep 30 2021 at 14:47)</a>:</h4>
<p>does this affect the parsing of the codeblocks at all? The test with the note suggests that it does?</p>



<a name="255586728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586728">(Sep 30 2021 at 14:47)</a>:</h4>
<p>parsing (i.e., to run the doctest) was already using the edition</p>



<a name="255586738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586738">(Sep 30 2021 at 14:47)</a>:</h4>
<p>Like</p>
<div class="codehilite"><pre><span></span><code>//~^^^ ERROR could not parse
//~| NOTE prefix `foo` is unknown
</code></pre></div>



<a name="255586780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586780">(Sep 30 2021 at 14:47)</a>:</h4>
<p>but the tokenization for the lint is affected (that's the purpose of the patch)</p>



<a name="255586880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586880">(Sep 30 2021 at 14:48)</a>:</h4>
<p>okay?</p>



<a name="255586891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586891">(Sep 30 2021 at 14:48)</a>:</h4>
<p>I think want a crater for this? It seems to me like this can affect building documentation for 2018 crates that previously built fine?</p>



<a name="255586922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586922">(Sep 30 2021 at 14:48)</a>:</h4>
<p>No, it by default continues to use the "crate edition"</p>



<a name="255586963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255586963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255586963">(Sep 30 2021 at 14:48)</a>:</h4>
<p>certainly migrating to 2021 can break your rustdoc invocation (we don't have a migration for this)</p>



<a name="255587001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587001">(Sep 30 2021 at 14:48)</a>:</h4>
<p>the effect is opted in by someone writing <code>edition2018</code> on their fence, right? but they could have already been doing that?</p>



<a name="255587067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587067" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587067">(Sep 30 2021 at 14:49)</a>:</h4>
<p>I <em>guess</em> it could change behavior for 2015 crates that had edition2018 on their doctest</p>



<a name="255587128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587128">(Sep 30 2021 at 14:49)</a>:</h4>
<p>but since this is just tokenizing, I don't think there's actually any breakage there -- edition2018 didn't change tokenization to add errors, only 2021 did that</p>



<a name="255587218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587218">(Sep 30 2021 at 14:50)</a>:</h4>
<p>Okay…</p>



<a name="255587261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587261">(Sep 30 2021 at 14:50)</a>:</h4>
<p>it seems okay to accept that potential breakage (which seems like it might not exist) in order to get the partial addressing of <a href="https://github.com/rust-lang/rust/issues/89135">#89135</a> ?</p>



<a name="255587361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587361">(Sep 30 2021 at 14:50)</a>:</h4>
<p>is this something where we again do not want to wait a week</p>



<a name="255587381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587381">(Sep 30 2021 at 14:51)</a>:</h4>
<p>because we’d prefer to get it sooner, for a edition crater run?</p>



<a name="255587414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587414">(Sep 30 2021 at 14:51)</a>:</h4>
<p>Hm, not sure, but I don't think we gain anything</p>



<a name="255587444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587444">(Sep 30 2021 at 14:51)</a>:</h4>
<p>I think I’m still okay beta-backport approving it</p>



<a name="255587463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587463">(Sep 30 2021 at 14:51)</a>:</h4>
<p>If we get an edition crater run either way I'm fine with  a backport.</p>



<a name="255587472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587472">(Sep 30 2021 at 14:51)</a>:</h4>
<p>okay</p>



<a name="255587490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587490">(Sep 30 2021 at 14:51)</a>:</h4>
<p>my concern is basically "lets get a crater run" anyway.</p>



<a name="255587504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587504">(Sep 30 2021 at 14:51)</a>:</h4>
<p>definitely</p>



<a name="255587506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587506">(Sep 30 2021 at 14:51)</a>:</h4>
<ul>
<li>No stable nominations for <code>T-rustdoc</code> this time.</li>
</ul>



<a name="255587527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587527">(Sep 30 2021 at 14:52)</a>:</h4>
<h2>PRs S-waiting-on-team</h2>
<p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p>
<ul>
<li>"On macOS, make strip="symbols" not pass any options to strip" <a href="https://github.com/rust-lang/rust/pull/88137">rust#88137</a><ul>
<li><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> has a note about asking if Alex has any insight into macOS</li>
</ul>
</li>
</ul>



<a name="255587601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587601">(Sep 30 2021 at 14:52)</a>:</h4>
<p>Lets keep waiting on alex for now</p>



<a name="255587634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587634">(Sep 30 2021 at 14:52)</a>:</h4>
<p>we have only 8 minutes left</p>



<a name="255587690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587690">(Sep 30 2021 at 14:52)</a>:</h4>
<p>Skimming hte agenda</p>



<a name="255587785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587785">(Sep 30 2021 at 14:53)</a>:</h4>
<p>I want to jump straight to a nominated issue first</p>



<a name="255587805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587805">(Sep 30 2021 at 14:53)</a>:</h4>
<ul>
<li>"Rust can't infer appropriate generics for function when it should" <a href="https://github.com/rust-lang/rust/issues/89242">rust#89242</a><ul>
<li>Issue opened by <span class="user-mention" data-user-id="386570">@TheRawMeatball</span></li>
<li>regression from stable to beta</li>
<li>Investigated by <span class="user-mention" data-user-id="232957">@Jack Huey</span>, <a href="https://github.com/rust-lang/rust/issues/89242#issuecomment-930760694">suggests ways to move forward</a></li>
</ul>
</li>
</ul>



<a name="255587965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587965">(Sep 30 2021 at 14:54)</a>:</h4>
<p>I guess, one more: do nothing</p>



<a name="255587977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255587977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255587977">(Sep 30 2021 at 14:54)</a>:</h4>
<p>(right now)</p>



<a name="255588014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588014">(Sep 30 2021 at 14:54)</a>:</h4>
<p>hmm, maybe we shouldn’t try to resolve this in 8 minutes</p>



<a name="255588025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588025">(Sep 30 2021 at 14:54)</a>:</h4>
<p>(6 now)</p>



<a name="255588076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588076" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588076">(Sep 30 2021 at 14:54)</a>:</h4>
<p>I'm OK letting this slip, particularly since we have no actual evidence this will hit anyone</p>



<a name="255588084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588084">(Sep 30 2021 at 14:54)</a>:</h4>
<p>I agree we should not revert <a href="https://github.com/rust-lang/rust/issues/85499">#85499</a> in service of this</p>



<a name="255588126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588126">(Sep 30 2021 at 14:55)</a>:</h4>
<p>and that we are not going to implement lazy normalizatino and backport it to beta</p>



<a name="255588128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588128">(Sep 30 2021 at 14:55)</a>:</h4>
<p>(the example in the issue is just "I'm experimenting on playground")</p>



<a name="255588244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588244">(Sep 30 2021 at 14:55)</a>:</h4>
<blockquote>
<p>3) Make <code>structurally_resolved_type</code> not need to select obligations where possible, or otherwise just skip <code>Unimplemented</code>. Not sure this will work. Just commenting out <code>select_where_possible</code> doesn't build core.</p>
</blockquote>
<p>I don’t fully understand this, in terms of how likely it is to yield fruit and/or how hard it will be to play with</p>



<a name="255588436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588436">(Sep 30 2021 at 14:56)</a>:</h4>
<p>Lazy norm seems like the correct solution here but that's work in progress. I'm also ok with this slip into 1.56 since the code was uncallable anyway.</p>



<a name="255588443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588443">(Sep 30 2021 at 14:56)</a>:</h4>
<p>Well, supposedly by resolving obligations (where possible) when resolving the type of a function call, that helps us later</p>



<a name="255588451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588451">(Sep 30 2021 at 14:57)</a>:</h4>
<p>I forget if we have precedent around this -- I recall discussion about a similar breakage/bugfix/feature that let you skip writing "impossible methods" or something like that in trait impls?</p>



<a name="255588482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588482">(Sep 30 2021 at 14:57)</a>:</h4>
<p>That does seem familiar yeah...</p>



<a name="255588567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588567" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588567">(Sep 30 2021 at 14:57)</a>:</h4>
<p>For 1.56, I assume a crater run is likely to tell us if we missed a case where this matter, right?</p>



<a name="255588603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588603">(Sep 30 2021 at 14:57)</a>:</h4>
<p>I'll also probably discuss this with <span class="user-mention" data-user-id="116009">@nikomatsakis</span> on Monday</p>



<a name="255588614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588614">(Sep 30 2021 at 14:58)</a>:</h4>
<p>okay</p>



<a name="255588617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588617">(Sep 30 2021 at 14:58)</a>:</h4>
<p>Crater didn't see it (or at least I didn't see evidence)</p>



<a name="255588655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588655">(Sep 30 2021 at 14:58)</a>:</h4>
<p>lets leave it alone then</p>



<a name="255588662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588662">(Sep 30 2021 at 14:58)</a>:</h4>
<p>He might have some insight I missed</p>



<a name="255588687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588687">(Sep 30 2021 at 14:58)</a>:</h4>
<p>I’ll leave it nominated for now</p>



<a name="255588703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588703">(Sep 30 2021 at 14:58)</a>:</h4>
<p>we can discuss again next week</p>



<a name="255588735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588735">(Sep 30 2021 at 14:58)</a>:</h4>
<p>for everything else on agenda</p>



<a name="255588785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588785">(Sep 30 2021 at 14:58)</a>:</h4>
<p>people can start reading from here: <a href="https://hackmd.io/eviBs_qISRC9mlDve0cSRQ?both#Oldest-PRs-waiting-for-review">https://hackmd.io/eviBs_qISRC9mlDve0cSRQ?both#Oldest-PRs-waiting-for-review</a></p>



<a name="255588801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588801">(Sep 30 2021 at 14:58)</a>:</h4>
<p>what I want to call out</p>



<a name="255588816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588816">(Sep 30 2021 at 14:59)</a>:</h4>
<p>is this:</p>



<a name="255588854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588854">(Sep 30 2021 at 14:59)</a>:</h4>
<h2>Performance logs</h2>
<blockquote>
<p><a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2021-09-28.md">triage logs for 2021-09-28</a></p>
</blockquote>
<p>The largest story for the week are the massive improvements that come from enabling the new pass manager in LLVM which leads to consistent 5% to 30% improvements across almost all test cases. The regressions were mostly minor with clear paths for addressing the ones that were not made with some specific trade off in mind.</p>
<p>Triage done by <strong>@rylev</strong>. Revision range: <a href="https://perf.rust-lang.org/?start=7743c9fadd64886d537966ba224b9c20e6014a59&amp;end=83f147b3baf21acfc367a6da1045d212cd3957e4&amp;absolute=false&amp;stat=instructions%3Au">7743c9fadd64886d537966ba224b9c20e6014a59..83f147b3baf21acfc367a6da1045d212cd3957e4</a></p>
<p>4 Regressions, 4 Improvements, 3 Mixed; 0 of them in rollups<br>
43 comparisons made in total</p>



<a name="255588894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588894">(Sep 30 2021 at 14:59)</a>:</h4>
<p>the new pass manager in LLVM sounds dope</p>



<a name="255588943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588943">(Sep 30 2021 at 14:59)</a>:</h4>
<p>but since I just celebrated</p>



<a name="255588962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588962">(Sep 30 2021 at 14:59)</a>:</h4>
<p>let me end meeting by being a Debbie Downer:</p>



<a name="255588965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255588965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255588965">(Sep 30 2021 at 14:59)</a>:</h4>
<h4>Regressions</h4>
<p>Revise never type fallback algorithm <a href="https://github.com/rust-lang/rust/issues/88804">#88804</a></p>
<ul>
<li>Large regression in <a href="https://perf.rust-lang.org/compare.html?start=2b862bed9889808b69629fd7246317189b9517a5&amp;end=900cf5e8905ba8a2a9c99a1dfc9cb2cf4754d77a&amp;stat=instructions:u">instruction counts</a> (up to 2.7% on <code>full</code> builds of <code>keccak</code>)</li>
</ul>
<p>Introduce <code>Rvalue::ShallowInitBox</code> <a href="https://github.com/rust-lang/rust/issues/89030">#89030</a></p>
<ul>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=218a96cae06ed1a47549a81c09c3655fbcae1363&amp;end=e9f29a851917a706c01b6f51331894df1d15770b&amp;stat=instructions:u">instruction counts</a> (up to 1.9% on <code>incr-patched: println</code> builds of <code>syn</code>)</li>
<li>Perf regression is happening in real-world optimized builds which we would expect if we're making LLVM do more work.</li>
<li>The author has an idea for how to reduce the pressure on LLVM and perhaps win back some of the perf, but was unsure if the regression was large enough to warrant that investigation.</li>
<li>Left a comment asking the author to think about prioritizing that <a href="https://github.com/rust-lang/rust/pull/89030#issuecomment-929187148">investigation</a>.</li>
</ul>
<p>Fix spacing of links in inline code. <a href="https://github.com/rust-lang/rust/issues/88343">#88343</a></p>
<ul>
<li>Large regression in <a href="https://perf.rust-lang.org/compare.html?start=9620f3a84b079decfdc2e557be007580b097fe43&amp;end=addb4da686a97da46159f0123cb6cdc2ce3d7fdb&amp;stat=instructions:u">instruction counts</a> (up to 2.1% on <code>incr-unchanged</code> builds of <code>webrender-wrench</code>)</li>
<li>This change is only in doc comments for the standard library so large regressions are quite surprising.</li>
<li>This has impacted the incr-unchanged scenario of only one benchmark. Perhaps the docs led to a change in how incremental cache was being stored which could have an impact?</li>
</ul>
<p>Suggest both of immutable and mutable trait implementations <a href="https://github.com/rust-lang/rust/issues/89263">#89263</a></p>
<ul>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=583437a6dd58ee266839d2dac940642a0752a6dd&amp;end=3e8f32e1c52ca493c862facb7a69e7c3f1f97a18&amp;stat=instructions:u">instruction counts</a> (up to 2.0% on <code>full</code> builds of <code>diesel</code>)</li>
<li>The regression occurs in <code>evaluate_obligation</code> which seems like it would be effected by this change, but the only impacted benchmark is diesel doc which doesn't trigger this diagnostic</li>
<li>The change is large enough though that it being noise would be quite surprising.</li>
<li>Left a <a href="https://github.com/rust-lang/rust/pull/89263#issuecomment-929511988">comment</a></li>
</ul>



<a name="255589132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589132">(Sep 30 2021 at 15:00)</a>:</h4>
<p>The triager left comments or thoughts for number of these</p>



<a name="255589216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589216">(Sep 30 2021 at 15:00)</a>:</h4>
<p>but nothing on <a href="https://github.com/rust-lang/rust/issues/88804">#88804</a> <a href="https://github.com/rust-lang/rust/pull/88804">https://github.com/rust-lang/rust/pull/88804</a></p>



<a name="255589241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589241">(Sep 30 2021 at 15:00)</a>:</h4>
<p>I'll take an opportunity to link <a href="#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/LLVM.20ir.20codegen.20quality/near/255074401">this</a> which sounds super interesting.</p>



<a name="255589412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589412">(Sep 30 2021 at 15:01)</a>:</h4>
<p>I have to go</p>



<a name="255589495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589495">(Sep 30 2021 at 15:02)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span></p>



<a name="255589506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589506">(Sep 30 2021 at 15:02)</a>:</h4>
<p>thanjs to all in <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span>  for attending! Great meeting all, sorry we didn’t get through more of the agenda together!</p>



<a name="255589789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255589789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255589789">(Sep 30 2021 at 15:03)</a>:</h4>
<p>Draft for next week's agenda available at:<br>
<a href="https://hackmd.io/IGePuIQTQqGzdwqVrN1IlA?view">https://hackmd.io/IGePuIQTQqGzdwqVrN1IlA?view</a></p>
<p>Scheduled checkins from:</p>
<ul>
<li>@_WG-async-foundations_ by <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="116883">@tmandry</span></li>
<li>@_WG-traits_ by <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="232957">@Jack Huey</span></li>
</ul>



<a name="255590541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255590541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255590541">(Sep 30 2021 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255586891">said</a>:</p>
<blockquote>
<p>I think want a crater for this? It seems to me like this can affect building documentation for 2018 crates that previously built fine?</p>
</blockquote>
<p>so, a few things:</p>
<ol>
<li>the lint is warn-by-default, so this won't outright break any project no matter what</li>
<li>crates won't see the new lint unless they opt-in to 2015 or 2021 parsing on the code block, this does not change the default behavior</li>
<li>before rustdoc was <em>completely ignoring</em> the edition, which just seems like an outright bug</li>
</ol>
<p>So I'm not sure why you think crater is necessary; I don't see this as different from fixing a bug in any other lint.</p>



<a name="255594022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255594022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255594022">(Sep 30 2021 at 15:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255586594">said</a>:</p>
<blockquote>
<p>I’m not sure if I should be worried about there only being one small test in that PR (and no sign of changes to other tests)</p>
</blockquote>
<p>none of the other tests were affected because it's very rare this actually changes anything, it only matters for 2021 edition because it introduced new lex errors</p>



<a name="255594339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255594339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255594339">(Sep 30 2021 at 15:31)</a>:</h4>
<p>so actually I think the only crates it could possibly fire for are ones that are using 2021 already, which isn't yet stable</p>



<a name="255600865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255600865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255600865">(Sep 30 2021 at 16:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255590541">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255586891">said</a>:</p>
<blockquote>
<p>I think want a crater for this? It seems to me like this can affect building documentation for 2018 crates that previously built fine?</p>
</blockquote>
<p>so, a few things:</p>
<ol>
<li>the lint is warn-by-default, so this won't outright break any project no matter what</li>
<li>crates won't see the new lint unless they opt-in to 2015 or 2021 parsing on the code block, this does not change the default behavior</li>
<li>before rustdoc was <em>completely ignoring</em> the edition, which just seems like an outright bug</li>
</ol>
<p>So I'm not sure why you think crater is necessary; I don't see this as different from fixing a bug in any other lint.</p>
</blockquote>
<p>If there are any program at all that could be written that no longer compiles with this PR applied, then IMO care needs to be taken. In that context lint being warn-by-default helps, but there's nothing that prevents somebody from denying it. Similarly users could have opted into specific edition mode or have written the doc comments under an assuption that edition is ignored (e.g. because the lint was firing when they were trying to write code for the crate edition).</p>



<a name="255600980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255600980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255600980">(Sep 30 2021 at 16:10)</a>:</h4>
<p>Doubly so because people don't generally test whether <code>cargo doc</code> runs successfully in their CI or locally in my experience.</p>



<a name="255601196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255601196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255601196">(Sep 30 2021 at 16:12)</a>:</h4>
<p>That said I guess there's a fair amount of pretext for breaking changes in rustdoc interface. E.g. we have renamed the lints a couple times over the past year which would cause errors to bubble up in certain scenarios.</p>



<a name="255626110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255626110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255626110">(Sep 30 2021 at 18:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125294">Aaron Hill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-09-30.20.2354818/near/255581200">said</a>:</p>
<blockquote>
<p>Unfortunately, I wasn't able to minimize a regression test</p>
</blockquote>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> I'll take care of this</p>



<a name="255633178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255633178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255633178">(Sep 30 2021 at 19:27)</a>:</h4>
<p>I'll make a test but this <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=f665e7e882059157e0f86cfb09c47187">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=f665e7e882059157e0f86cfb09c47187</a> reproduces the issue on nightly-2021-09-19</p>



<a name="255668564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255668564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255668564">(Oct 01 2021 at 00:00)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> but why single out this lint in particular? In general new lints are <em>not</em> considered breaking changes and get added all the time; why is rustdoc being held to a higher standard than the compiler itself?</p>



<a name="255668768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255668768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255668768">(Oct 01 2021 at 00:02)</a>:</h4>
<p>I think it's really dangerous to forbid new warnings because they might be emitted - yes! That's the whole point! Your code is broken and rustdoc is trying to tell you so!<br>
<a href="https://thephd.dev/your-c-compiler-and-standard-library-will-not-help-you">https://thephd.dev/your-c-compiler-and-standard-library-will-not-help-you</a></p>



<a name="255711373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255711373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255711373">(Oct 01 2021 at 08:53)</a>:</h4>
<p>This isn't a new lint though, is it? If somebody asked for a backport of a change to a compiler lint that already exists and potentially forbids more code, I would ask for a crater run too.</p>



<a name="255711858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255711858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255711858">(Oct 01 2021 at 08:57)</a>:</h4>
<p>New compiler lints that aren't related to backwards compatibility _are_ held to a standard of requiring an RFC to introduce, for what it is worth, or at least that's what I remember. Because people can and do have <code>#[deny(warnings)]</code>. There have been many cases where we did not accept a lint for that reason and why</p>



<a name="255712020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-09-30%20%2354818/near/255712020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-09-30.20.2354818.html#255712020">(Oct 01 2021 at 08:58)</a>:</h4>
<p>I don't see a request of running crater and having knowledge of the fallout (rather than a guess) being a particularly onerous one.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
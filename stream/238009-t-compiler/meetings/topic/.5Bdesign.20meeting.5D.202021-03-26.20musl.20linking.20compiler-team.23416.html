<html>
<head><meta charset="utf-8"><title>[design meeting] 2021-03-26 musl linking compiler-team#416 · t-compiler/meetings · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/index.html">t-compiler/meetings</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html">[design meeting] 2021-03-26 musl linking compiler-team#416</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="231967786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231967786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231967786">(Mar 26 2021 at 13:53)</a>:</h4>
<p>Design meeting for  Static vs dynamic linking defaults for MUSL targets <a href="https://github.com/rust-lang/compiler-team/issues/416">compiler-team#416</a> will be starting on this topic in about 7 minutes</p>



<a name="231967802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231967802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231967802">(Mar 26 2021 at 13:53)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> ^</p>



<a name="231967999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231967999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231967999">(Mar 26 2021 at 13:54)</a>:</h4>
<p>As I mentioned yesterday, I want to try a different opening to this meeting. Rather than opening with announcements, we’re going to allocate some time (maybe 5 to 8 minutes) to read the document that <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> has prepared</p>



<a name="231968098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231968098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231968098">(Mar 26 2021 at 13:55)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> and others <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="231968413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231968413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231968413">(Mar 26 2021 at 13:57)</a>:</h4>
<p>As a way of signalling if people are done reading, we’ll use the following protocol: On <em>this</em> message, when you <em>start</em> reading, click the <span aria-label="book" class="emoji emoji-1f4d6" role="img" title="book">:book:</span>  emoji. (And leave it turned on, so we know the total number of people who started). When you are <em>done</em> reading, click the <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span> emoji. That way, the two numbers match before the 8 minutes are up, then we’ll know we can start discussion early.</p>



<a name="231968900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231968900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231968900">(Mar 26 2021 at 14:00)</a>:</h4>
<p>i can link the HackMD if nobody else has it open :)</p>



<a name="231968971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231968971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231968971">(Mar 26 2021 at 14:00)</a>:</h4>
<blockquote>
<p>Currently (most of) these targets statically link to musl libc durle that can be desirable to build fully functional statically linked binaries, this creates issues for musl based Linux distros which want to dynamically link libc.</p>
</blockquote>
<p>did something get deleted from this sentence? the 'durle' feels like a chunk got cut out</p>



<a name="231969090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969090">(Mar 26 2021 at 14:01)</a>:</h4>
<p>Yeah, there were a few unintentional edits I think in the last revision so I just reverted those.</p>



<a name="231969099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969099">(Mar 26 2021 at 14:01)</a>:</h4>
<p>during</p>



<a name="231969156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969156">(Mar 26 2021 at 14:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231968900">said</a>:</p>
<blockquote>
<p>i can link the HackMD if nobody else has it open :)</p>
</blockquote>
<p>Oh yeah, I meant to link it: <a href="https://hackmd.io/YoAGSxUsRWumVvbRiHddrg?view">https://hackmd.io/YoAGSxUsRWumVvbRiHddrg?view</a></p>



<a name="231969180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969180">(Mar 26 2021 at 14:01)</a>:</h4>
<p>oh, hm, I guess there's another case of that for the second option's header</p>



<a name="231969203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969203">(Mar 26 2021 at 14:01)</a>:</h4>
<p>/me is wondering if we should turn off edit permissions or something</p>



<a name="231969258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969258">(Mar 26 2021 at 14:02)</a>:</h4>
<p>probably should now</p>



<a name="231969281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969281">(Mar 26 2021 at 14:02)</a>:</h4>
<p>but I’m not seeing the reverts</p>



<a name="231969527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969527">(Mar 26 2021 at 14:03)</a>:</h4>
<p>by the way, if you hit the <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span> , make sure you also have left the <span aria-label="book" class="emoji emoji-1f4d6" role="img" title="book">:book:</span> clicked as well</p>



<a name="231969540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969540" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969540">(Mar 26 2021 at 14:03)</a>:</h4>
<p>Did the revert work this time?</p>



<a name="231969641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969641">(Mar 26 2021 at 14:04)</a>:</h4>
<p>yes, seems to have</p>



<a name="231969648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969648">(Mar 26 2021 at 14:04)</a>:</h4>
<p>I've also reset the permissions</p>



<a name="231969699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969699">(Mar 26 2021 at 14:04)</a>:</h4>
<p>/msg nagisa</p>



<a name="231969713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969713">(Mar 26 2021 at 14:04)</a>:</h4>
<p>I'm around ^^</p>



<a name="231969732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969732">(Mar 26 2021 at 14:04)</a>:</h4>
<p>i pinged rich in irc</p>



<a name="231969751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969751">(Mar 26 2021 at 14:04)</a>:</h4>
<p>whoops, was going to PM you about my note regarding the two emojis</p>



<a name="231969923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969923">(Mar 26 2021 at 14:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231969527">said</a>:</p>
<blockquote>
<p>by the way, if you hit the <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span> , make sure you also have left the <span aria-label="book" class="emoji emoji-1f4d6" role="img" title="book">:book:</span> clicked as well</p>
</blockquote>
<p>(the intent is that the <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span> will eventually equal the <span aria-label="book" class="emoji emoji-1f4d6" role="img" title="book">:book:</span> but never exceed it</p>



<a name="231969927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231969927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231969927">(Mar 26 2021 at 14:06)</a>:</h4>
<p>Oh, I should've checked both.</p>



<a name="231970041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970041">(Mar 26 2021 at 14:06)</a>:</h4>
<p>also tweeted about it so hopefully rich notices it</p>



<a name="231970092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970092">(Mar 26 2021 at 14:06)</a>:</h4>
<p>for people joining late: We are reading the <a href="https://hackmd.io/YoAGSxUsRWumVvbRiHddrg?view">doc</a>; please record that you’ve started reading by following the instructions on <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231968413">this comment</a></p>



<a name="231970420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970420">(Mar 26 2021 at 14:08)</a>:</h4>
<p>okay, so i’ve hit my <span aria-label="checkered flag" class="emoji emoji-1f3c1" role="img" title="checkered flag">:checkered_flag:</span> now, and it looks like everyone who’s started reading has hit it as well</p>



<a name="231970458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970458">(Mar 26 2021 at 14:09)</a>:</h4>
<p>Lets start by seeing if there are any questions about the doc itself</p>



<a name="231970513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970513">(Mar 26 2021 at 14:09)</a>:</h4>
<p>I wanted to ask: the con for "Update existing musl targets to be dynamically linked” is "End users of rustc are impacted and would have to explicitly specify static linking, just like on glibc"</p>



<a name="231970542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970542">(Mar 26 2021 at 14:09)</a>:</h4>
<p>this may be obvious, but I wanted to just make it crystal clear: The end users would have to specify static linking <em>if that is what they want</em>, right?</p>



<a name="231970603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970603">(Mar 26 2021 at 14:10)</a>:</h4>
<p>(i.e. if they want to match the behavior on most other rust platforms)</p>



<a name="231970616"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970616" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970616">(Mar 26 2021 at 14:10)</a>:</h4>
<p>via <code>-Ctarget-feature=+crt-static</code>, yes.</p>



<a name="231970651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970651">(Mar 26 2021 at 14:10)</a>:</h4>
<p>its not like “they have to do this and nothing works if they don’t"</p>



<a name="231970705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970705">(Mar 26 2021 at 14:10)</a>:</h4>
<p>because… that wouldn’t make sense to ever propose that, right?</p>



<a name="231970730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970730">(Mar 26 2021 at 14:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231970603">said</a>:</p>
<blockquote>
<p>(i.e. if they want to match the behavior on most other rust platforms)</p>
</blockquote>
<p>this confuses me - the behavior on most other platforms is dynamic by default. are you saying they'd have to use <code>+crt-static</code> the same way you would on other platforms?</p>



<a name="231970753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970753">(Mar 26 2021 at 14:11)</a>:</h4>
<p>I think for some it will end up that way if they don't have musl toolchain.</p>



<a name="231970784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970784">(Mar 26 2021 at 14:11)</a>:</h4>
<p>Hm, well, that depends on whether they have musl in dynamic search path, right?</p>



<a name="231970932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231970932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231970932">(Mar 26 2021 at 14:12)</a>:</h4>
<p>(personally I think these sorts of questions would be better answered by changing this on nightly for a week and seeing how many bug reports we get <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> but I'm not on T-compiler so take my opinion with a grain of salt)</p>



<a name="231971130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971130">(Mar 26 2021 at 14:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231970730">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231970603">said</a>:</p>
<blockquote>
<p>(i.e. if they want to match the behavior on most other rust platforms)</p>
</blockquote>
<p>this confuses me - the behavior on most other platforms is dynamic by default. are you saying they'd have to use <code>+crt-static</code> the same way you would on other platforms?</p>
</blockquote>
<p>maybe <em>I’m</em> confused about this.</p>



<a name="231971253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971253">(Mar 26 2021 at 14:14)</a>:</h4>
<p>You would have to specify <code>+crt-static</code> to get the behaviour we have today.</p>



<a name="231971481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971481">(Mar 26 2021 at 14:15)</a>:</h4>
<p>“to get the behavior we have today” <em>on musl</em></p>



<a name="231971490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971490">(Mar 26 2021 at 14:15)</a>:</h4>
<p>Wow, "multiple independent copies of the libc linked into the program at runtime" actually makes my skin crawl. Has that created any runtime/compilation bugs yet, or is it just bloat?</p>



<a name="231971669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971669">(Mar 26 2021 at 14:16)</a>:</h4>
<p>It is a recurring problem with people attempting to link a static libc and depend on dynamic system libraries. This  typically just doesn't work (e.g. segfaults).</p>



<a name="231971762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971762">(Mar 26 2021 at 14:17)</a>:</h4>
<p>Another question about the doc, or about the proposal, I guess: The change is <em>just</em> about <code>libc</code>, not about other supporting libraries?</p>



<a name="231971770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971770">(Mar 26 2021 at 14:17)</a>:</h4>
<p>Outside of <code>musl</code> it ends up being apparent as to why it is happening. With <code>musl</code> the static linking behaviour is the default today so it isn't always obvious.</p>



<a name="231971798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971798">(Mar 26 2021 at 14:17)</a>:</h4>
<p>yes, it is about libc</p>



<a name="231971811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971811">(Mar 26 2021 at 14:17)</a>:</h4>
<p>there's no other libraries as part of musl itself</p>



<a name="231971829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971829">(Mar 26 2021 at 14:17)</a>:</h4>
<p>Okay.</p>



<a name="231971895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971895">(Mar 26 2021 at 14:18)</a>:</h4>
<p>we propose rust do whatever it normally does otherwise with other deps</p>



<a name="231971974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231971974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231971974">(Mar 26 2021 at 14:18)</a>:</h4>
<p>So overall it sounds like: The recommendation, of "update the existing musl targets to be dynamically linked.”, would both: 1. make our musl-targets more consistent with our other rust targets, and 2. make our musl-targets more consistent with what musl distributions want</p>



<a name="231972005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972005">(Mar 26 2021 at 14:19)</a>:</h4>
<p>Yeah, that's a good summary</p>



<a name="231972012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972012">(Mar 26 2021 at 14:19)</a>:</h4>
<p>and the main drawback is that it would change behavior for existing customers of the musl-targets ?</p>



<a name="231972022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972022">(Mar 26 2021 at 14:19)</a>:</h4>
<p>AFAIK no one has raised objections to that other than the breaking change, yeah</p>



<a name="231972083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972083">(Mar 26 2021 at 14:19)</a>:</h4>
<p>so <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> up above said “just do it in nightly and see who complains"</p>



<a name="231972149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972149">(Mar 26 2021 at 14:20)</a>:</h4>
<p>The recent to flip debuginfo default to <code>-Cdebug-info=packed</code> on macOS was one similar such a breaking change.</p>



<a name="231972158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972158">(Mar 26 2021 at 14:20)</a>:</h4>
<p>do we have any way of knowing how many <del>customers</del> users are solely on stable ?</p>



<a name="231972251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972251">(Mar 26 2021 at 14:21)</a>:</h4>
<p>Survey results seem to point at roughly 70%, but it's hard to say</p>



<a name="231972271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972271">(Mar 26 2021 at 14:21)</a>:</h4>
<p>I think this all sounds totally fine, personally, as long as we make it really clear hwo to bring back the old behavior.</p>



<a name="231972277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972277">(Mar 26 2021 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972158">said</a>:</p>
<blockquote>
<p>do we have any way of knowing how many <del>customers</del> users are solely on stable ?</p>
</blockquote>
<p>No telemetrics in rustc, so only a guess (by e.g. extrapolating from downloads and surveys)</p>



<a name="231972312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972312">(Mar 26 2021 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972251">said</a>:</p>
<blockquote>
<p>Survey results seem to point at roughly 70%, but it's hard to say</p>
</blockquote>
<p>sorry, I meant musl users in particular. does the survey provide that level of granularity?</p>



<a name="231972333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972333">(Mar 26 2021 at 14:21)</a>:</h4>
<p>I don't think so</p>



<a name="231972379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972379">(Mar 26 2021 at 14:21)</a>:</h4>
<p>yeah, our lack of telemetry really hurts us in cases like this. (Its something that <span class="user-mention" data-user-id="119031">@Esteban Küber</span> and I have been discussing)</p>



<a name="231972428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972428">(Mar 26 2021 at 14:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972083">said</a>:</p>
<blockquote>
<p>so <span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> up above said “just do it in nightly and see who complains"</p>
</blockquote>
<p>to expand on that: I feel like the stakeholders who are using static MUSL currently probably don't even know this discussion is happening and I'm slightly wary of a situation like <a href="https://github.com/pyca/cryptography/issues/5771">https://github.com/pyca/cryptography/issues/5771</a> where the first interaction people have is "my CI is broken and it's your fault"</p>



<a name="231972438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972438">(Mar 26 2021 at 14:22)</a>:</h4>
<p>I'm not sure any of our surveys have ever even asked about targeted platforms to that detail.</p>



<a name="231972479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972479">(Mar 26 2021 at 14:22)</a>:</h4>
<p>correct, i think aligning the rust behavior with that of other libcs is a win-win for everyone, because there are many situations where rust's <code>-musl</code> support is quite broken and results in problems</p>



<a name="231972530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972530" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972530">(Mar 26 2021 at 14:22)</a>:</h4>
<p>for example, you can't build a musl-linked firefox with musl rust as supplied through say, <code>rustup</code></p>



<a name="231972549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972549">(Mar 26 2021 at 14:23)</a>:</h4>
<p>We can likely land a future compatibility lint and slowly increase it, right?</p>



<a name="231972572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972572">(Mar 26 2021 at 14:23)</a>:</h4>
<p>Assuming we go with the the recommendation: What is the experience for a user who <em>doesn’t know about it</em> ?</p>



<a name="231972591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972591">(Mar 26 2021 at 14:23)</a>:</h4>
<p>I think someone mentioned landing a warning and then staging it rapidly upwards, yes.</p>



<a name="231972634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972634">(Mar 26 2021 at 14:23)</a>:</h4>
<p>what rust is doing <em>now</em> is broken.  it only works in the basic case.  if people are doing CI with Alpine, they are using our patched <code>rustc</code> which fixes everything anyway.</p>



<a name="231972640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972640">(Mar 26 2021 at 14:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972572">said</a>:</p>
<blockquote>
<p>Assuming we go with the the recommendation: What is the experience for a user who <em>doesn’t know about it</em> ?</p>
</blockquote>
<p>My impression is that with no work by us, likely a linker error at runtime?</p>



<a name="231972643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972643">(Mar 26 2021 at 14:23)</a>:</h4>
<p>They silently try to deploy a dynamically linked binary, and then … it always fails when they try to deploy it outside their developemnt environment?</p>



<a name="231972651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972651">(Mar 26 2021 at 14:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972572">said</a>:</p>
<blockquote>
<p>Assuming we go with the the recommendation: What is the experience for a user who <em>doesn’t know about it</em> ?</p>
</blockquote>
<p>oh err actually I think I use static musl and forgot about it <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> so I can report on this: the docker image would build fine, but all the people downloading my binary would get linker errors at runtime</p>



<a name="231972667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972667">(Mar 26 2021 at 14:23)</a>:</h4>
<p>cryptopgraphy's lesson is that warnings don't help – people don't read ci logs habitually.</p>



<a name="231972730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972730">(Mar 26 2021 at 14:24)</a>:</h4>
<p>I should note that even experienced Rust devs however are prone to expressing surprising that their code fails in CI all of a sudden... because they used <code>#![deny(warnings]</code> &lt;_&lt;;</p>



<a name="231972745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972745">(Mar 26 2021 at 14:24)</a>:</h4>
<p>(not to say that we shouldn't do it still)</p>



<a name="231972759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972759">(Mar 26 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972643">said</a>:</p>
<blockquote>
<p>They silently try to deploy a dynamically linked binary, and then … it always fails when they try to deploy it outside their developemnt environment?</p>
</blockquote>
<p>I expect there’s not much we can do to mitigate this.</p>



<a name="231972766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rasmus Thomsen <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972766">(Mar 26 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972634">said</a>:</p>
<blockquote>
<p>what rust is doing <em>now</em> is broken.  it only works in the basic case.  if people are doing CI with Alpine, they are using our patched <code>rustc</code> which fixes everything anyway.</p>
</blockquote>
<p>I think most users use rustup even on Alpine</p>



<a name="231972771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972771">(Mar 26 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972643">said</a>:</p>
<blockquote>
<p>They silently try to deploy a dynamically linked binary, and then … it always fails when they try to deploy it outside their developemnt environment?</p>
</blockquote>
<p>it likely won't work locally either, since they don't have musl in their dynamic search path, right?</p>



<a name="231972780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972780">(Mar 26 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972730">said</a>:</p>
<blockquote>
<p>I should note that even experienced Rust devs however are prone to expressing surprising that their code fails in CI all of a sudden... because they used <code>#![deny(warnings]</code> &lt;_&lt;;</p>
</blockquote>
<p>this is better than failing at runtime though</p>



<a name="231972831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972831">(Mar 26 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972771">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972643">said</a>:</p>
<blockquote>
<p>They silently try to deploy a dynamically linked binary, and then … it always fails when they try to deploy it outside their developemnt environment?</p>
</blockquote>
<p>it likely won't work locally either, since they don't have musl in their dynamic search path, right?</p>
</blockquote>
<p>I think "locally" is nebulous here: when I use static musl I only use it in CI</p>



<a name="231972873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972873">(Mar 26 2021 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="241202">Rasmus Thomsen</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972766">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972634">said</a>:</p>
<blockquote>
<p>what rust is doing <em>now</em> is broken.  it only works in the basic case.  if people are doing CI with Alpine, they are using our patched <code>rustc</code> which fixes everything anyway.</p>
</blockquote>
<p>I think most users use rustup even on Alpine</p>
</blockquote>
<p>from the CIs i have seen, a lot of them just do <code>apk add rust</code> and roll with it</p>



<a name="231972880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972880">(Mar 26 2021 at 14:25)</a>:</h4>
<p>Your CI is likely a glibc host, though, right? So you don't have musl there either?</p>



<a name="231972911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972911" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972911">(Mar 26 2021 at 14:25)</a>:</h4>
<p>I believe so, yes</p>



<a name="231972948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972948">(Mar 26 2021 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972771">said</a>:</p>
<blockquote>
<p>it likely won't work locally either, since they don't have musl in their dynamic search path, right?</p>
</blockquote>
<p>This is an important point. If its very likely to fail in development, before it ever hits production, then I’m a lot less worried here.</p>



<a name="231972962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972962">(Mar 26 2021 at 14:25)</a>:</h4>
<p>oh good point, if I ran the test suite it would fail</p>



<a name="231972967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972967">(Mar 26 2021 at 14:25)</a>:</h4>
<p>alpine is increasingly used in github actions</p>



<a name="231972969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231972969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231972969">(Mar 26 2021 at 14:25)</a>:</h4>
<p>I need to check if I do that for the musl target <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="231973116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973116">(Mar 26 2021 at 14:26)</a>:</h4>
<p>I want to better understand our ability to provide some kind of meaningful/helpful error when people see that linker error, I guess -- it feels pretty bad to just drop it on them</p>



<a name="231973148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973148">(Mar 26 2021 at 14:26)</a>:</h4>
<p>and I'm not sure a compiler warning at build time will help</p>



<a name="231973163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973163">(Mar 26 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231972780">said</a>:</p>
<blockquote>
<p>this is better than failing at runtime though</p>
</blockquote>
<p>Yeah, I'm just noting that in a sort of "people ask which Rust dev hates them before they remember that the Rust dev that hates them IS them" way. Trust no one not even your own self, etc.</p>



<a name="231973188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973188">(Mar 26 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973116">said</a>:</p>
<blockquote>
<p>I want to better understand our ability to provide some kind of meaningful/helpful error when people see that linker error, I guess -- it feels pretty bad to just drop it on them</p>
</blockquote>
<p>I feel this way about a <em>lot</em> of our linker errors.</p>



<a name="231973252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973252">(Mar 26 2021 at 14:27)</a>:</h4>
<p>at some points I wonder if we should invest in wrapper scripts to interpret the linker errors from the rust compiler’s point of view.</p>



<a name="231973278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973278">(Mar 26 2021 at 14:27)</a>:</h4>
<p>well, the linker error wouldn't be at compile time, right?</p>



<a name="231973281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973281" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973281">(Mar 26 2021 at 14:27)</a>:</h4>
<p>As someone coming to Rust from managed languages, linker errors are the worst part of Rust development.</p>



<a name="231973308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973308">(Mar 26 2021 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973278">said</a>:</p>
<blockquote>
<p>well, the linker error wouldn't be at compile time, right?</p>
</blockquote>
<p>oh, dynamic linker/loader error. Even better.</p>



<a name="231973319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973319">(Mar 26 2021 at 14:27)</a>:</h4>
<p>anyway, a deprecation warning seems like a good way to go.</p>



<a name="231973394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973394">(Mar 26 2021 at 14:28)</a>:</h4>
<p>Better than nothing, for sure.</p>



<a name="231973458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973458">(Mar 26 2021 at 14:28)</a>:</h4>
<p>Can users opt-in to the "right" future behavior today with a rustc flag? -Ctarget-feature=-crt-static?</p>



<a name="231973553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973553">(Mar 26 2021 at 14:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973319">said</a>:</p>
<blockquote>
<p>anyway, a deprecation warning seems like a good way to go.</p>
</blockquote>
<p>what is going to be the trigger for this warning? Are you suggesting we emit it universally for musl targets?</p>



<a name="231973633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973633">(Mar 26 2021 at 14:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973458">said</a>:</p>
<blockquote>
<p>Can users opt-in to the "right" future behavior today with a rustc flag? -Ctarget-feature=-crt-static?</p>
</blockquote>
<p>(testing this now)</p>



<a name="231973635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973635">(Mar 26 2021 at 14:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973458">said</a>:</p>
<blockquote>
<p>Can users opt-in to the "right" future behavior today with a rustc flag? -Ctarget-feature=-crt-static?</p>
</blockquote>
<p>(and if the users choose their opt-in now, in either direction, will that be way to silence the warning?)</p>



<a name="231973667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973667">(Mar 26 2021 at 14:29)</a>:</h4>
<p>If users can opt-in, then the trigger may be 'no explicit specification of crt-static', though I admit that feels pretty painful</p>



<a name="231973669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973669">(Mar 26 2021 at 14:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973553">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973319">said</a>:</p>
<blockquote>
<p>anyway, a deprecation warning seems like a good way to go.</p>
</blockquote>
<p>what is going to be the trigger for this warning? Are you suggesting we emit it universally for musl targets?</p>
</blockquote>
<p>non-musl rustc targeting a -musl target that is currently statically linked?</p>



<a name="231973748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973748">(Mar 26 2021 at 14:30)</a>:</h4>
<p>When this was originally proposed, it was "without <code>-Ctarget-feature=(+|-)crt-static)</code> specified"</p>



<a name="231973857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973857">(Mar 26 2021 at 14:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973458">said</a>:</p>
<blockquote>
<p>Can users opt-in to the "right" future behavior today with a rustc flag? -Ctarget-feature=-crt-static?</p>
</blockquote>
<p>The problem with "opt-in" is that the user has to explicitly know they're building for a musl based host and AIUI the rustflags don't always get passed down thru the build process right. But I dont have personal experience with this so I may be misunderstanding complains of users who've hit it</p>



<a name="231973873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973873">(Mar 26 2021 at 14:30)</a>:</h4>
<p>there is still the issue of "libc crate embeds a copy of musl" to attack</p>



<a name="231973874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973874">(Mar 26 2021 at 14:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973667">said</a>:</p>
<blockquote>
<p>If users can opt-in, then the trigger may be 'no explicit specification of crt-static', though I admit that feels pretty painful</p>
</blockquote>
<p>Is it that painful? It reflects that change is coming, and people should specify their intentions.</p>



<a name="231973885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973885">(Mar 26 2021 at 14:31)</a>:</h4>
<p>-crt-static should give the expected behaviour, yes.</p>



<a name="231973912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973912">(Mar 26 2021 at 14:31)</a>:</h4>
<p>i propose <code>-embmusl</code> for that specific usecase</p>



<a name="231973961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973961">(Mar 26 2021 at 14:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973873">said</a>:</p>
<blockquote>
<p>there is still the issue of "libc crate embeds a copy of musl" to attack</p>
</blockquote>
<p>This wasn’t in the doc, was it?</p>



<a name="231973966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973966">(Mar 26 2021 at 14:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973873">said</a>:</p>
<blockquote>
<p>there is still the issue of "libc crate embeds a copy of musl" to attack</p>
</blockquote>
<p>I haven't heard about this - how is this different from other targets?</p>



<a name="231973973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973973">(Mar 26 2021 at 14:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973873">said</a>:</p>
<blockquote>
<p>there is still the issue of "libc crate embeds a copy of musl" to attack</p>
</blockquote>
<p>Oh... I wasn't even aware of that one...</p>



<a name="231973998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231973998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231973998">(Mar 26 2021 at 14:31)</a>:</h4>
<p><span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="231974014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974014">(Mar 26 2021 at 14:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973961">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231973873">said</a>:</p>
<blockquote>
<p>there is still the issue of "libc crate embeds a copy of musl" to attack</p>
</blockquote>
<p>This wasn’t in the doc, was it?</p>
</blockquote>
<p>yeah that's round 2, baby steps :)</p>



<a name="231974148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974148">(Mar 26 2021 at 14:32)</a>:</h4>
<p>Okay, so as in, this is a separate follow-on change to propose or whatever</p>



<a name="231974176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974176">(Mar 26 2021 at 14:32)</a>:</h4>
<p>but its not something whose solution is implied or constrained by what we do here?</p>



<a name="231974189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974189">(Mar 26 2021 at 14:32)</a>:</h4>
<p>right?</p>



<a name="231974229"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974229" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974229">(Mar 26 2021 at 14:33)</a>:</h4>
<p>I'm not entirely sure</p>



<a name="231974260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974260">(Mar 26 2021 at 14:33)</a>:</h4>
<p>(we can certainly discuss it here, especially since I think we’re making great progress)</p>



<a name="231974284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974284">(Mar 26 2021 at 14:33)</a>:</h4>
<p>well both issues need to be fixed, but detangling the targets is the bigger one</p>



<a name="231974311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974311">(Mar 26 2021 at 14:33)</a>:</h4>
<p>if it tries to link this embedded musl (statically) when the target is dynamic, that will produce a very broken binary</p>



<a name="231974365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974365">(Mar 26 2021 at 14:33)</a>:</h4>
<p>So it feels like we have rough consensus that we do want to move towards dynamic-by-default, but have several open questions:</p>
<ul>
<li>Can we provide nice linker errors, particularly at dynamic library resolution (runtime)?</li>
<li>Is it easy to opt-in to the proposed future behavior today explicitly? Is it easy to opt-out of the future behavior?</li>
</ul>



<a name="231974597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974597" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974597">(Mar 26 2021 at 14:34)</a>:</h4>
<p>yes both of those issues are solvable (even with divorcing embedded musl from libc crate)</p>



<a name="231974661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974661">(Mar 26 2021 at 14:35)</a>:</h4>
<p>are we agreed that we <em>will</em> have a warning, triggered by a non-musl host cross-compiling to musl target without specificing linkage for crt?</p>



<a name="231974750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974750">(Mar 26 2021 at 14:35)</a>:</h4>
<p>I think at a minimum that's a good idea.</p>



<a name="231974775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974775">(Mar 26 2021 at 14:35)</a>:</h4>
<p>Hm, I am not sure about the cross-compilation piece -- should we not issue the warning on a musl host too? But it seems like a good start.</p>



<a name="231974801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974801" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974801">(Mar 26 2021 at 14:35)</a>:</h4>
<p>Re: errors, the only error if you try to run on a system that doesn't have dynamic linker is ENOENT. there's really no way to change this; it comes from the kernel</p>



<a name="231974804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974804" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974804">(Mar 26 2021 at 14:35)</a>:</h4>
<p>I think we should warn on all hosts.</p>



<a name="231974806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974806">(Mar 26 2021 at 14:35)</a>:</h4>
<p>Also, just so I’m clear: Why does the warning only have to be on non-musl hosts? Are we not also changing behavior for musl-hosts compiling to musl targets?</p>



<a name="231974825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974825">(Mar 26 2021 at 14:35)</a>:</h4>
<p>Heh <span class="user-mention" data-user-id="116122">@simulacrum</span> got there first</p>



<a name="231974882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974882">(Mar 26 2021 at 14:36)</a>:</h4>
<p>presumably, if they're on the musl host, they're targeting that musl host?</p>



<a name="231974889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974889">(Mar 26 2021 at 14:36)</a>:</h4>
<p>Who said cross-compile up above</p>



<a name="231974922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974922">(Mar 26 2021 at 14:36)</a>:</h4>
<p>I would want to not issue that warning without a clear, tested, path towards resolving it (i.e., by specifiying the crt-static flag perhaps)</p>



<a name="231974927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974927">(Mar 26 2021 at 14:36)</a>:</h4>
<p>I think I did</p>



<a name="231974961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231974961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231974961">(Mar 26 2021 at 14:36)</a>:</h4>
<p>AIUI musl-based hosts are already patching this behavior and don't have the warning</p>



<a name="231975001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975001">(Mar 26 2021 at 14:36)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231974806">said</a>:</p>
<blockquote>
<p>Also, just so I’m clear: Why does the warning only have to be on non-musl hosts? Are we not also changing behavior for musl-hosts compiling to musl targets?</p>
</blockquote>
<p>in practice, we (the distros) are already patching both the targets and the libc crate</p>



<a name="231975003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975003">(Mar 26 2021 at 14:36)</a>:</h4>
<p>so I don't think the change will be unexpected</p>



<a name="231975006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975006">(Mar 26 2021 at 14:36)</a>:</h4>
<p>With my assumption being that if you're already on a musl-host and you have rustc working, you probably know what you're doing.</p>



<a name="231975043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975043">(Mar 26 2021 at 14:37)</a>:</h4>
<p>Hmm.</p>



<a name="231975071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975071">(Mar 26 2021 at 14:37)</a>:</h4>
<p>Rust users often use <code>rustup</code>, since that is conventional on most hosts.</p>



<a name="231975084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975084">(Mar 26 2021 at 14:37)</a>:</h4>
<p>So the question is whether they are compiling for host target (no <code>--target</code> flag at all), or their <code>--target</code> flag just happens to match their host.</p>



<a name="231975174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975174">(Mar 26 2021 at 14:37)</a>:</h4>
<p>Former probably doesn't need to warn, but latter should regardless of what the host is.</p>



<a name="231975180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975180">(Mar 26 2021 at 14:37)</a>:</h4>
<p>are musl-hosts already using the (+|-)crt-static flag as it is?</p>



<a name="231975243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975243">(Mar 26 2021 at 14:38)</a>:</h4>
<p>They add new targets today, AFAIU. These targets AFAICT only differ in the option equivalent to that flag.</p>



<a name="231975311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975311">(Mar 26 2021 at 14:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231975071">said</a>:</p>
<blockquote>
<p>Rust users often use <code>rustup</code>, since that is conventional on most hosts.</p>
</blockquote>
<p>yes, so a warning makes sense for those users (and it also makes sense to align the behavior)</p>



<a name="231975401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975401" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975401">(Mar 26 2021 at 14:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231975243">said</a>:</p>
<blockquote>
<p>They add new targets today, AFAIU</p>
</blockquote>
<p>it's a mix; alpine and adelie add new targets.  void linux patches.  i don't know what the smaller distros are doing.</p>



<a name="231975454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975454">(Mar 26 2021 at 14:39)</a>:</h4>
<p>Yeah, in this case it <em>does</em> make sense to warn even if we're compiling from musl to musl <em>if</em> the user is using The Canonical Rust.</p>



<a name="231975471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975471">(Mar 26 2021 at 14:39)</a>:</h4>
<p>we all patch the libc crate though :)</p>



<a name="231975487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975487">(Mar 26 2021 at 14:39)</a>:</h4>
<p>as opposed to a fanonical one.</p>



<a name="231975504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975504">(Mar 26 2021 at 14:39)</a>:</h4>
<p>yup, because we can just patch the warning out</p>



<a name="231975514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975514">(Mar 26 2021 at 14:39)</a>:</h4>
<p>“fanonical” …?</p>



<a name="231975573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975573" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurent Bercot <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975573">(Mar 26 2021 at 14:39)</a>:</h4>
<p>"made by fans", as opposed to canonical.</p>



<a name="231975581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Síle Ekaterin Aman <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975581">(Mar 26 2021 at 14:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231975514">said</a>:</p>
<blockquote>
<p>“fanonical” …?</p>
</blockquote>
<p>unofficial/'fan'</p>



<a name="231975589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975589">(Mar 26 2021 at 14:40)</a>:</h4>
<p>patched compilers are fan fiction. :^) (specifically, "fix fic")</p>



<a name="231975591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975591">(Mar 26 2021 at 14:40)</a>:</h4>
<p>gotcha</p>



<a name="231975735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975735">(Mar 26 2021 at 14:40)</a>:</h4>
<p>Okay, so it sounds iike the Rust project itself can warn on all hosts (that target musl, i.e. where this behavior is going to change), and the warning is silenced by explicitly choosing (+|-)crt-static. If patchers want to cut the warning out, they can make that decision</p>



<a name="231975785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975785">(Mar 26 2021 at 14:40)</a>:</h4>
<p>is there anyone who sees a problem with that ?</p>



<a name="231975862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975862">(Mar 26 2021 at 14:41)</a>:</h4>
<p>Okay.</p>



<a name="231975868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975868">(Mar 26 2021 at 14:41)</a>:</h4>
<p>seems like a reasonable proposal, lets wait for Erico from void though</p>



<a name="231975880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975880">(Mar 26 2021 at 14:41)</a>:</h4>
<p>Is it <code>rustc</code> or <code>cargo</code> that prints a warning?</p>



<a name="231975923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975923">(Mar 26 2021 at 14:41)</a>:</h4>
<p>I was assuming it would be <code>rustc</code> but that is a good question.</p>



<a name="231975955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975955">(Mar 26 2021 at 14:41)</a>:</h4>
<p>it might even be a future-incompat warning.</p>



<a name="231975973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975973" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975973">(Mar 26 2021 at 14:41)</a>:</h4>
<p>I do wonder if we should do more. Like make the warning a hard error for a release and force current users to specify <code>(+|-)crt-static</code> before we switch the defaults.</p>



<a name="231975976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231975976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231975976">(Mar 26 2021 at 14:41)</a>:</h4>
<p>Cargo doesn't have the necessary information to reliably emit such a warning.</p>



<a name="231976069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976069">(Mar 26 2021 at 14:42)</a>:</h4>
<p>rustc doing the printing could get very noisy (since it's one for every crate), cargo printing it once at build time is smaller.</p>



<a name="231976073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976073">(Mar 26 2021 at 14:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231975955">said</a>:</p>
<blockquote>
<p>it might even be a future-incompat warning.</p>
</blockquote>
<p>(whcih cargo … either will, or does, treat specially)</p>



<a name="231976122"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976122" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976122">(Mar 26 2021 at 14:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396723">Érico Nogueira Rolim</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976069">said</a>:</p>
<blockquote>
<p>rustc doing the printing could get very noisy (since it's one for every crate), cargo printing it once at build time is smaller.</p>
</blockquote>
<p>right, a future-incompat warning is meant to address this, in theory</p>



<a name="231976131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976131">(Mar 26 2021 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> I think that hits the same problem <span class="user-mention" data-user-id="396976">@Rich Felker</span> was talking about that it's hard to pass flags to build scripts</p>



<a name="231976194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976194">(Mar 26 2021 at 14:43)</a>:</h4>
<p>ugh foiled again by build scripts</p>



<a name="231976202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976202">(Mar 26 2021 at 14:43)</a>:</h4>
<p>(but I don’t remember what the current state of the future-incompat diagnostic work is on the cargo side),</p>



<a name="231976234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976234">(Mar 26 2021 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396723">Érico Nogueira Rolim</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976069">said</a>:</p>
<blockquote>
<p>rustc doing the printing could get very noisy (since it's one for every crate), cargo printing it once at build time is smaller.</p>
</blockquote>
<p>I agree that cargo would be better at handling this, but <code>rustc</code> is capable of being used independently.</p>



<a name="231976236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976236">(Mar 26 2021 at 14:43)</a>:</h4>
<p>There needs to be some top-level build way to ensure that the output is static linked</p>



<a name="231976239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976239">(Mar 26 2021 at 14:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> it's implemented but you have to opt in explicitly</p>



<a name="231976317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976317">(Mar 26 2021 at 14:43)</a>:</h4>
<p>This has long been a problem with C build systems using libtool too, where you typically needed hacks like <code>LDFLAGS="-static --static -Wl,-static"</code></p>



<a name="231976323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976323">(Mar 26 2021 at 14:43)</a>:</h4>
<p>Well, I want to be clear that if we issue the warning, I think that warning absolutely must have tested paths for both directions (and instructions for what to do to get a dynamic musl, perhaps, at least on common glibc hosts)</p>



<a name="231976386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976386">(Mar 26 2021 at 14:44)</a>:</h4>
<p>(I really wish "reply" worked on mobile ...)</p>



<a name="231976533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976533">(Mar 26 2021 at 14:44)</a>:</h4>
<p>I'm not sure what the state of making that work on rust is</p>



<a name="231976557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976557">(Mar 26 2021 at 14:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976236">said</a>:</p>
<blockquote>
<p>There needs to be some top-level build way to ensure that the output is static linked</p>
</blockquote>
<p>you’re talking about this, right?</p>



<a name="231976594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976594">(Mar 26 2021 at 14:45)</a>:</h4>
<p>yes</p>



<a name="231976650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976650">(Mar 26 2021 at 14:45)</a>:</h4>
<p>“Top-level” to me makes it sound like a cargo issue.</p>



<a name="231976676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976676" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976676">(Mar 26 2021 at 14:45)</a>:</h4>
<p>but maybe you are concerned about non-cargo users of rust as well…?</p>



<a name="231976750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976750">(Mar 26 2021 at 14:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976533">said</a>:</p>
<blockquote>
<p>I'm not sure what the state of making that work on rust is</p>
</blockquote>
<p>I'm not entirely sure what those LDFLAGS are doing but you could pass them through to the linker with -Clink-args</p>



<a name="231976763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976763">(Mar 26 2021 at 14:46)</a>:</h4>
<p>I'm not sure. I haven't used rust and cargo enough to know</p>



<a name="231976839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976839">(Mar 26 2021 at 14:46)</a>:</h4>
<p>It sounds like there is a concern here that we might need to dig into, but I’m not sure if we need to do so in this meeting?</p>



<a name="231976870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976870">(Mar 26 2021 at 14:46)</a>:</h4>
<p>Problem with the rust flags passed through environment variables is that if you build with <code>--target</code>, cargo won't apply those flags for code that its building for the host (build scripts, procmacros etc).</p>



<a name="231976918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976918" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976918">(Mar 26 2021 at 14:47)</a>:</h4>
<p>i think rustc makes more sense for the warning anyway, it's better to spam the warning than not.</p>



<a name="231976925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976925">(Mar 26 2021 at 14:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976870">said</a>:</p>
<blockquote>
<p>Problem with the rust flags passed through environment variables is that if you build with <code>--target</code>, cargo won't apply those flags for code that its building for the host.</p>
</blockquote>
<p>this has been mentioned a few times now: I really think we should fix this in cargo, or at least add <em>some</em> way to pass flags to build scripts</p>



<a name="231976928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231976928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231976928">(Mar 26 2021 at 14:47)</a>:</h4>
<p>I want to make sure we resolve the open questions about both 1. the recommended proposal, and 2. this libc carrying embedded musl thing that <span class="user-mention" data-user-id="360752">@Ariadne Conill</span> mentioned.</p>



<a name="231977002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977002">(Mar 26 2021 at 14:47)</a>:</h4>
<p><span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> has said the same on github: <a href="https://github.com/rust-lang/rust/pull/82556#issuecomment-788324429">https://github.com/rust-lang/rust/pull/82556#issuecomment-788324429</a></p>



<a name="231977013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977013">(Mar 26 2021 at 14:47)</a>:</h4>
<p>so what does the libc-embedding-musl thing do exactly?</p>



<a name="231977039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurent Bercot <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977039">(Mar 26 2021 at 14:47)</a>:</h4>
<p>silly question: isn't there a verbosity setting that would silence the warning?</p>



<a name="231977047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977047" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977047">(Mar 26 2021 at 14:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976925">said</a>:</p>
<blockquote>
<p>this has been mentioned a few times now: I really think we should fix this in cargo, or at least add <em>some</em> way to pass flags to build scripts</p>
</blockquote>
<p>Yeah, it was a response in <code>-Clink-args</code> etc. Passing any flag like this is complicated by the limitation we have right now.</p>



<a name="231977052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977052">(Mar 26 2021 at 14:47)</a>:</h4>
<p>I'm bringing this up because, while I really want to solve the issue this meeting is for and make -musl targets behave like other ones and be dynamic-linked by default, if there's no working way for users to request static linking, we might break the ability of users to get static-linked binaries that was working for them before with musl</p>



<a name="231977087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977087">(Mar 26 2021 at 14:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231976918">said</a>:</p>
<blockquote>
<p>i think rustc makes more sense for the warning anyway, it's better to spam the warning than not.</p>
</blockquote>
<p>That's a fair point. A top level warning from cargo could still be missed.</p>



<a name="231977097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977097" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977097">(Mar 26 2021 at 14:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="400781">Laurent Bercot</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231977039">said</a>:</p>
<blockquote>
<p>silly question: isn't there a verbosity setting that would silence the warning?</p>
</blockquote>
<p>It would depend on the nature of the warning.</p>



<a name="231977137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977137">(Mar 26 2021 at 14:48)</a>:</h4>
<p>I think this is probably not a real issue except for possibly suboptimal UX requesting the static link but I'm not sure so I want to check and make sure it's possible to get static linking still.</p>



<a name="231977167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977167">(Mar 26 2021 at 14:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231977013">said</a>:</p>
<blockquote>
<p>so what does the libc-embedding-musl thing do exactly?</p>
</blockquote>
<p>when libc crate is linked, it links against <code>libc.a</code> directly.  we would want to change that to link against <code>libc.a</code> or <code>libc.so</code> at final link time.</p>



<a name="231977254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977254">(Mar 26 2021 at 14:48)</a>:</h4>
<p>(in fact this is what the patches do now)</p>



<a name="231977255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977255" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977255">(Mar 26 2021 at 14:48)</a>:</h4>
<p>what is the difference between "when the crate is linked" and "final link time"?</p>



<a name="231977287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977287">(Mar 26 2021 at 14:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="400781">Laurent Bercot</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231977039">said</a>:</p>
<blockquote>
<p>silly question: isn't there a verbosity setting that would silence the warning?</p>
</blockquote>
<p>(if you’re curious, I’m happy to follow-up with you after the meeting to discuss our systems with cap-lints and future-incompat warning summarys)</p>



<a name="231977290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977290">(Mar 26 2021 at 14:49)</a>:</h4>
<p>when the rust program is linked</p>



<a name="231977358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977358">(Mar 26 2021 at 14:49)</a>:</h4>
<p>e.g. <code>rustc hello.rs</code> or whatever</p>



<a name="231977393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977393">(Mar 26 2021 at 14:49)</a>:</h4>
<p>i.e. you want a crate to be able to schedule a linker flag for the future final binary</p>



<a name="231977457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977457">(Mar 26 2021 at 14:50)</a>:</h4>
<p>yes, depending on <code>+/-crt-static</code></p>



<a name="231977460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977460">(Mar 26 2021 at 14:50)</a>:</h4>
<p>Does that mean the system libc still gets used too, i.e. effectively <code>ld -o out foo.o my/libc.a bar.o -lc</code> ?</p>



<a name="231977479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977479">(Mar 26 2021 at 14:50)</a>:</h4>
<p>yep</p>



<a name="231977486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977486">(Mar 26 2021 at 14:50)</a>:</h4>
<p>If we want to give users actionable and directed suggestions on how to address the warning, I feel like there's no other way than to add some support to cargo too – users of cargo need different guidance than those who are using rustc directly.</p>



<a name="231977534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977534">(Mar 26 2021 at 14:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231977290">said</a>:</p>
<blockquote>
<p>when the rust program is linked</p>
</blockquote>
<p>right I get that - my point is that I don't think rustc runs the linker at <em>all</em> for dependencies</p>



<a name="231977558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977558">(Mar 26 2021 at 14:50)</a>:</h4>
<p>so I'm not sure what you mean by "when the crate is linked"</p>



<a name="231977572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977572">(Mar 26 2021 at 14:50)</a>:</h4>
<p>OK, that's highly broken. You can't be potentially linking 2 different libc's in the same program because libc is a big singleton with internal interface surface that's not stable across versions</p>



<a name="231977657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977657">(Mar 26 2021 at 14:51)</a>:</h4>
<p>I think what <span class="user-mention" data-user-id="360752">@Ariadne Conill</span> is trying to get at is that you can't put <code>libc.a</code> on the link command line. The only way to use an alt <code>libc.a</code> is to put it in the library path before the system lib path so that the final <code>-lc</code> picks it up.</p>



<a name="231977722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977722">(Mar 26 2021 at 14:51)</a>:</h4>
<p>(Or use <code>-nostdlib</code> or rust's equivalent to ensure the system libc never gets linked)</p>



<a name="231977728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977728">(Mar 26 2021 at 14:52)</a>:</h4>
<p>basically, we need this: <a href="https://git.alpinelinux.org/aports/tree/community/rust/link-musl-dynamically.patch">https://git.alpinelinux.org/aports/tree/community/rust/link-musl-dynamically.patch</a></p>



<a name="231977867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977867">(Mar 26 2021 at 14:52)</a>:</h4>
<p>i don't know how to explain what that does in rust terms, i just know it makes the embedded libc go away</p>



<a name="231977874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977874">(Mar 26 2021 at 14:52)</a>:</h4>
<p>ah hmm ok, libc is printing <code>cargo:rustc-link-lib=static=libc.a</code> or something</p>



<a name="231977909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231977909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231977909">(Mar 26 2021 at 14:53)</a>:</h4>
<p>which sort of "queues" the link arg for when the linker is run</p>



<a name="231978042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978042">(Mar 26 2021 at 14:53)</a>:</h4>
<p>that “static” vs “static-nobundle” distinction in the patch that <span class="user-mention" data-user-id="360752">@Ariadne Conill</span> seems relevant</p>



<a name="231978129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978129">(Mar 26 2021 at 14:54)</a>:</h4>
<p>i don't know what the patch does, i didn't write it :)</p>



<a name="231978144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978144">(Mar 26 2021 at 14:54)</a>:</h4>
<p>i am sure you all know what it does</p>



<a name="231978155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978155">(Mar 26 2021 at 14:54)</a>:</h4>
<p>Nope</p>



<a name="231978196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978196">(Mar 26 2021 at 14:54)</a>:</h4>
<p>Anyway: We’ve got five minutes left in the meeting, so I want to try to establish the action items and/or follow-up work, hopefully with owners</p>



<a name="231978230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978230">(Mar 26 2021 at 14:55)</a>:</h4>
<p>We have rough agreement on the proposal itself, I think.</p>



<a name="231978260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978260">(Mar 26 2021 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> do you think it should go through MCP process too?</p>



<a name="231978306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978306">(Mar 26 2021 at 14:55)</a>:</h4>
<p>I suspect we would be well-served by putting it up as an MCP</p>



<a name="231978307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978307">(Mar 26 2021 at 14:55)</a>:</h4>
<p>from what I can tell with the target changes the libc code to support musl can become the same as that for glibc (sans the exact set of libraries linked): <a href="https://github.com/rust-lang/libc/blob/master/src/unix/mod.rs#L305-L330">https://github.com/rust-lang/libc/blob/master/src/unix/mod.rs#L305-L330</a></p>



<a name="231978328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978328">(Mar 26 2021 at 14:55)</a>:</h4>
<p>Being pessimistic, any idea what we'd do if enabling this on nightly leads to a deluge of complaints?</p>



<a name="231978353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978353">(Mar 26 2021 at 14:55)</a>:</h4>
<p>I think that would be useful if for no other reason than to make sure we're all on the same page about the overall plan here.</p>



<a name="231978414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978414">(Mar 26 2021 at 14:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396723">Érico Nogueira Rolim</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231978328">said</a>:</p>
<blockquote>
<p>Being pessimistic, any idea what we'd do if enabling this on nightly leads to a deluge of complaints?</p>
</blockquote>
<p>I’d say we’d revert the PR and schedule another meetng.</p>



<a name="231978422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978422">(Mar 26 2021 at 14:56)</a>:</h4>
<p>I don't see it leading to complaints from people actually using the configurations in question</p>



<a name="231978465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978465">(Mar 26 2021 at 14:56)</a>:</h4>
<p>I think we should have an FCP, and potentially even a short blog post on <a href="http://blog.rust-lang.org">blog.rust-lang.org</a> once we're ready to move ahead with a warning, to give a heads up and guidance</p>



<a name="231978478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978478">(Mar 26 2021 at 14:56)</a>:</h4>
<p>presumably if there was some breakage, we would back out and decide how to solve it</p>



<a name="231978490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978490">(Mar 26 2021 at 14:56)</a>:</h4>
<p>okay, so an MCP with full team FCP check-off process.</p>



<a name="231978500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978500">(Mar 26 2021 at 14:56)</a>:</h4>
<p>If people have CI test stuff setup for systems they're not actually using and haven't actually done any real world tests on, it could plausibly break those, but they didn't know what they were testing to begin with.</p>



<a name="231978598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978598">(Mar 26 2021 at 14:57)</a>:</h4>
<p>who wants to own writing the MCP? it seems like it could be adapted from the doc for today, with some adjustments to clarify some of the points</p>



<a name="231978606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978606" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978606">(Mar 26 2021 at 14:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231978500">said</a>:</p>
<blockquote>
<p>If people have CI test stuff setup for systems they're not actually using and haven't actually done any real world tests on, it could plausibly break those, but they didn't know what they were testing to begin with.</p>
</blockquote>
<p>I think this describes a lot of CI though <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> I looked at my .github/workflows and it turns out I don't run tests on musl, just on glibc</p>



<a name="231978647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978647">(Mar 26 2021 at 14:57)</a>:</h4>
<blockquote>
<p>I think this describes a lot of CI though</p>
</blockquote>
<p>Absolutely. I've been dealing with this a lot lately..</p>



<a name="231978666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978666">(Mar 26 2021 at 14:57)</a>:</h4>
<p>personally I can fix the breakage easily but I'd expect it to be pretty common</p>



<a name="231978715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978715">(Mar 26 2021 at 14:58)</a>:</h4>
<p>what is an MCP?</p>



<a name="231978732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978732">(Mar 26 2021 at 14:58)</a>:</h4>
<p>a Major Change Proposal</p>



<a name="231978749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978749">(Mar 26 2021 at 14:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231978715">said</a>:</p>
<blockquote>
<p>what is an MCP?</p>
</blockquote>
<p><a href="https://forge.rust-lang.org/compiler/mcp.html">https://forge.rust-lang.org/compiler/mcp.html</a></p>



<a name="231978766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978766">(Mar 26 2021 at 14:58)</a>:</h4>
<p>its meant to be a lightweight alternative to our RFC process</p>



<a name="231978809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978809">(Mar 26 2021 at 14:58)</a>:</h4>
<p>Is this really a "major change"?</p>



<a name="231978828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978828">(Mar 26 2021 at 14:58)</a>:</h4>
<p>before we commit to MCP, it would be nice to hear from <span class="user-mention" data-user-id="116015">@Alex Crichton</span> first</p>



<a name="231978856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978856">(Mar 26 2021 at 14:59)</a>:</h4>
<p>I'm not familiar with how rust classifies this stuff but I would consider it a very minor one. And more akin to a bugfix.</p>



<a name="231978874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978874">(Mar 26 2021 at 14:59)</a>:</h4>
<p>There's also the automated binary generation that some projects do, and I doubt they get to test all of them.</p>



<a name="231978877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978877">(Mar 26 2021 at 14:59)</a>:</h4>
<p>In some ways, "minor change proposal" might be a more accurate name.</p>



<a name="231978891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978891">(Mar 26 2021 at 14:59)</a>:</h4>
<p>the idea is that the MCP is a proposal; it gives structure to getting feedback from stakeholders <em>like</em> <span class="user-mention" data-user-id="116015">@Alex Crichton</span></p>



<a name="231978898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978898">(Mar 26 2021 at 14:59)</a>:</h4>
<p>i would rather not start a huge bureaucratic process to have the original author come and object at the last moment</p>



<a name="231978902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231978902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231978902">(Mar 26 2021 at 14:59)</a>:</h4>
<p>I would not describe any breaking change as minor</p>



<a name="231979003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979003">(Mar 26 2021 at 14:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231978898">said</a>:</p>
<blockquote>
<p>i would rather not start a huge bureaucratic process to have the original author come and object at the last moment</p>
</blockquote>
<p>MCPs are specifically designed <em>not</em> to be huge and bureaucratic</p>



<a name="231979073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979073">(Mar 26 2021 at 15:00)</a>:</h4>
<p>you just open a github issue and it starts a zulip thread</p>



<a name="231979113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979113">(Mar 26 2021 at 15:00)</a>:</h4>
<p>Change proposals are just "hear ye, hear ye, this is what we're planning on doing, is there anyone who says aye?"</p>



<a name="231979128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979128">(Mar 26 2021 at 15:00)</a>:</h4>
<p>okay i will take your word on it :)</p>



<a name="231979131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979131">(Mar 26 2021 at 15:00)</a>:</h4>
<p><span class="user-mention" data-user-id="360752">@Ariadne Conill</span> are you offering to own creating an MCP after you talk to <span class="user-mention" data-user-id="116015">@Alex Crichton</span> ?</p>



<a name="231979169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979169">(Mar 26 2021 at 15:00)</a>:</h4>
<p>because while I agree with <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> that this is not a big bureaucratic thing</p>



<a name="231979204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979204">(Mar 26 2021 at 15:00)</a>:</h4>
<p>I also am happy to let people get whatever informal input they want</p>



<a name="231979228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979228">(Mar 26 2021 at 15:00)</a>:</h4>
<p>as long as they’re willing to follow-through</p>



<a name="231979252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979252">(Mar 26 2021 at 15:00)</a>:</h4>
<p>Well binutils has made changes to target link defaults (like <code>separate-code</code>) that are comparably "breaking" (very little, but possibly to some users with niche needs) with no big deal made over it whatsoever. So that's the standard I'm comparing to.</p>



<a name="231979294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979294">(Mar 26 2021 at 15:01)</a>:</h4>
<p>i feel like it would be nice to include his input before just blindsiding him with an announcement, but i think you all should do what you think is best :)</p>



<a name="231979335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979335">(Mar 26 2021 at 15:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231978856">said</a>:</p>
<blockquote>
<p>I'm not familiar with how rust classifies this stuff but I would consider it a very minor one. And more akin to a bugfix.</p>
</blockquote>
<p>I'm thinking of it as bug-compatible backward compatibility. At random, one project like <a href="https://github.com/lunaryorn/mdcat">https://github.com/lunaryorn/mdcat</a> uses musl targets to deliver self contained binaries you can drop anywhere and have them work. So if they don't do adequate testing and expect things to just chug along, they will be surprised</p>



<a name="231979358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979358">(Mar 26 2021 at 15:01)</a>:</h4>
<p>okay well the hour is up</p>



<a name="231979376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979376">(Mar 26 2021 at 15:01)</a>:</h4>
<p>on the other hand, there have been several meetings so :)</p>



<a name="231979422"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979422" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979422">(Mar 26 2021 at 15:01)</a>:</h4>
<p>the main two items I <em>wanted</em> to address were 1. creating an MCP, and 2. maybe having a follow-up meeting about this libc-embeds-musl thing</p>



<a name="231979528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979528">(Mar 26 2021 at 15:02)</a>:</h4>
<p>I think creating an MCP for the proposed plan and making sure <span class="user-mention" data-user-id="116015">@Alex Crichton</span> is aware of it is fine.</p>



<a name="231979579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979579">(Mar 26 2021 at 15:02)</a>:</h4>
<blockquote>
<p>So if they don't do adequate testing and expect things to just chug along, they will be surprised</p>
</blockquote>
<p>If they're not using a distro-patched rust though they probably already have Frankenstein libc linking mixing the host libc and libc crate tho, no? That would potentially have all kinds of silent breakage...</p>



<a name="231979600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979600">(Mar 26 2021 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="125250">@Wesley Wiser</span> How about if I write an MCP by adapting the text from the doc for today.</p>



<a name="231979615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979615">(Mar 26 2021 at 15:03)</a>:</h4>
<p>And if they are using a distro-patched rust they already have the new behavior.</p>



<a name="231979631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979631">(Mar 26 2021 at 15:03)</a>:</h4>
<p>That's great. Thanks <span class="user-mention" data-user-id="116083">@pnkfelix</span></p>



<a name="231979687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979687">(Mar 26 2021 at 15:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231979579">said</a>:</p>
<blockquote>
<blockquote>
<p>So if they don't do adequate testing and expect things to just chug along, they will be surprised</p>
</blockquote>
<p>If they're not using a distro-patched rust though they probably already have Frankenstein libc linking mixing the host libc and libc crate tho, no? That would potentially have all kinds of silent breakage...</p>
</blockquote>
<p>I am really unsure when and how two libcs would be linked into the same program. I think it would be helpful to come up with an MCVE</p>



<a name="231979714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979714">(Mar 26 2021 at 15:03)</a>:</h4>
<p>Please make sure <span class="user-mention" data-user-id="116015">@Alex Crichton</span> is explicitly pinged in the MCP though :)</p>



<a name="231979716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979716">(Mar 26 2021 at 15:03)</a>:</h4>
<p>if someone else wants to prpose a follow-up meeting about <code>libc</code>, feel free.</p>



<a name="231979800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979800">(Mar 26 2021 at 15:04)</a>:</h4>
<p>I will privmsg Alex to make sure he's aware once it's posted.</p>



<a name="231979843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979843">(Mar 26 2021 at 15:04)</a>:</h4>
<p>GH notifications get lost</p>



<a name="231979845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979845">(Mar 26 2021 at 15:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231979579">said</a>:</p>
<blockquote>
<blockquote>
<p>So if they don't do adequate testing and expect things to just chug along, they will be surprised</p>
</blockquote>
<p>If they're not using a distro-patched rust though they probably already have Frankenstein libc linking mixing the host libc and libc crate tho, no? That would potentially have all kinds of silent breakage...</p>
</blockquote>
<p>also I think this assumes you're building on musl? which I wouldn't expect CI to do most of the time</p>



<a name="231979856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979856">(Mar 26 2021 at 15:04)</a>:</h4>
<p>overall, thanks to everyone in <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> for attending! And also, thanks to everyone who helped make the doc, and to everyone for being willing to experiment with this “read then talk” thing that I adapted from Amazon procedures.</p>



<a name="231979866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979866">(Mar 26 2021 at 15:04)</a>:</h4>
<p>I don't think it is necessary, I think addressing libc makes sense as part of the initial MCP, since we already have an answer of how it should look.</p>



<a name="231979938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979938">(Mar 26 2021 at 15:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231979866">said</a>:</p>
<blockquote>
<p>I don't think it is necessary, I think addressing libc makes sense as part of the initial MCP, since we already have an answer of how it should look.</p>
</blockquote>
<p>I’m not prepared to make it part of any MCP that I write, because it wasn’t part of the original doc.</p>



<a name="231979957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979957">(Mar 26 2021 at 15:05)</a>:</h4>
<p>but I’m happy to get input on how to adapt it</p>



<a name="231979964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231979964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231979964">(Mar 26 2021 at 15:05)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> reproducer is pretty simple: have a DSO that depends on the dynamic libc and link the DSO into a program that embeds a static libc.</p>



<a name="231980005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980005">(Mar 26 2021 at 15:05)</a>:</h4>
<p>I think @nagisa is best qualified to provide that guidance</p>



<a name="231980065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980065">(Mar 26 2021 at 15:05)</a>:</h4>
<p>okay, I’ll circle back with <span class="user-mention" data-user-id="123586">@nagisa</span> to talk about it</p>



<a name="231980203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980203">(Mar 26 2021 at 15:06)</a>:</h4>
<p>I guess the main question I have is: Are the two things <em>coupled</em>, in the sense that it would be <strong>bad</strong> to land the change to the static/dynamic linking defaults without also addressing the libc thing at the <strong>same time</strong> ?</p>



<a name="231980251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980251">(Mar 26 2021 at 15:06)</a>:</h4>
<p>Just as a warning for next time, non US folks can be confused about DST-changes. I had scheduled the meeting as starting now :p</p>



<a name="231980260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980260">(Mar 26 2021 at 15:06)</a>:</h4>
<p>I had been assuming that the libc thing could wait for the other to land first.</p>



<a name="231980287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980287">(Mar 26 2021 at 15:06)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231979964">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> reproducer is pretty simple: have a DSO that depends on the dynamic libc and link the DSO into a program that embeds a static libc.</p>
</blockquote>
<p>Exactly. If you have a dynamic-linked program, you can't link any <code>libc.a</code> at all, ever. I'm actually looking into ways to diagnose this and prevent it at runtime.</p>



<a name="231980330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980330">(Mar 26 2021 at 15:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396723">Érico Nogueira Rolim</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231980251">said</a>:</p>
<blockquote>
<p>Just as a warning for next time, non US folks can be confused about DST-changes. I had scheduled the meeting as starting now :p</p>
</blockquote>
<p>sorry about that.</p>



<a name="231980355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurent Bercot <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980355">(Mar 26 2021 at 15:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396723">Érico Nogueira Rolim</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231980251">said</a>:</p>
<blockquote>
<p>Just as a warning for next time, non US folks can be confused about DST-changes. I had scheduled the meeting as starting now <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span></p>
</blockquote>
<p>It should be fine now; I don't know about BR, but EU honors DST starting on next Sunday</p>



<a name="231980382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980382">(Mar 26 2021 at 15:07)</a>:</h4>
<p>Our country is pretty broken in such surprising ways.</p>



<a name="231980414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980414">(Mar 26 2021 at 15:07)</a>:</h4>
<p>hello USG I'd like to file a bug report</p>



<a name="231980433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurent Bercot <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980433">(Mar 26 2021 at 15:07)</a>:</h4>
<p>suggestion: when scheduling international meetings, always use UTC time</p>



<a name="231980524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980524">(Mar 26 2021 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="400781">Laurent Bercot</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231980355">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="396723">Érico Nogueira Rolim</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231980251">said</a>:</p>
<blockquote>
<p>Just as a warning for next time, non US folks can be confused about DST-changes. I had scheduled the meeting as starting now :p</p>
</blockquote>
<p>It should be fine now; I don't know about BR, but EU honors DST starting on next Sunday</p>
</blockquote>
<p>We won't be having DST this year.</p>



<a name="231980528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980528">(Mar 26 2021 at 15:08)</a>:</h4>
<p>thanks everyone for working on this!</p>



<a name="231980531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980531">(Mar 26 2021 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231980287">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231979964">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> reproducer is pretty simple: have a DSO that depends on the dynamic libc and link the DSO into a program that embeds a static libc.</p>
</blockquote>
<p>Exactly. If you have a dynamic-linked program, you can't link any <code>libc.a</code> at all, ever. I'm actually looking into ways to diagnose this and prevent it at runtime.</p>
</blockquote>
<p>This makes it sound like the two items (the static/dynamic change and the libc-embeds-musl thing)  <strong>are</strong> very much coupled</p>



<a name="231980570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980570">(Mar 26 2021 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> can you confirm that understanding?</p>



<a name="231980681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ariadne Conill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980681">(Mar 26 2021 at 15:09)</a>:</h4>
<p>(static libc + dynamic libc only works on windows because msvcrt is a thin layer over ntdll)</p>



<a name="231980818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980818">(Mar 26 2021 at 15:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="360752">Ariadne Conill</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231980681">said</a>:</p>
<blockquote>
<p>(static libc + dynamic libc only works on windows because msvcrt is a thin layer over ntdll)</p>
</blockquote>
<p>Also because of Windows symbol binding semantics.</p>



<a name="231980904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980904" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980904">(Mar 26 2021 at 15:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span>  AFAICT the change to libc can happen even today without breaking any of the today's users while enabling the target change we're looking to make.</p>



<a name="231980956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231980956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231980956">(Mar 26 2021 at 15:10)</a>:</h4>
<p>… how could that change be made without breaking existing users?</p>



<a name="231981007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981007">(Mar 26 2021 at 15:10)</a>:</h4>
<p>I, too, am confused.</p>



<a name="231981049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981049">(Mar 26 2021 at 15:11)</a>:</h4>
<p>Oh, wait</p>



<a name="231981075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981075">(Mar 26 2021 at 15:11)</a>:</h4>
<p>the change would somehow conditionalized, right?</p>



<a name="231981111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981111">(Mar 26 2021 at 15:11)</a>:</h4>
<p>As in, make the change today, but its not that libc would stop embedding musl in <em>all</em> scenarios</p>



<a name="231981145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981145">(Mar 26 2021 at 15:11)</a>:</h4>
<p>but rather, it would stop embedding it solely when the crt is dynamically linked?</p>



<a name="231981148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981148">(Mar 26 2021 at 15:11)</a>:</h4>
<p>+crt-static works on <code>-gnu</code> targets, and <code>rustc --target=x86_64-unknown-linux-musl --print=cfg</code> specifies <code>+crt-static</code>.</p>



<a name="231981251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981251">(Mar 26 2021 at 15:12)</a>:</h4>
<p>so yes, we'd adjust the musl block to do a lot like what the glibc block does here: <a href="https://github.com/rust-lang/libc/blob/master/src/unix/mod.rs#L305-L330">https://github.com/rust-lang/libc/blob/master/src/unix/mod.rs#L305-L330</a></p>



<a name="231981305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981305">(Mar 26 2021 at 15:12)</a>:</h4>
<p>hm.</p>



<a name="231981308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981308">(Mar 26 2021 at 15:12)</a>:</h4>
<p>Okay. I’m willing to believe that this can be resolved in a robust way</p>



<a name="231981431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981431" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981431">(Mar 26 2021 at 15:13)</a>:</h4>
<p>I think its worthwhile to prototype the change(s) and see what happens – I haven't actually tried doing so myself.</p>



<a name="231981569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981569">(Mar 26 2021 at 15:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231981431">said</a>:</p>
<blockquote>
<p>I think its worthwhile to prototype the change(s) and see what happens – I haven't actually tried doing so myself.</p>
</blockquote>
<p>Isn't that kinda what the existing distro patches do? Or do you mean test the same changes in an upstream rust CI environment?</p>



<a name="231981677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231981677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231981677">(Mar 26 2021 at 15:15)</a>:</h4>
<p>Test the same changes in an upstream environment and see if today's use-cases that expect the embedding behaviour continue to work outside of musl hosts with <code>-Ctarget-feature=+crt-static</code> set explicitly.</p>



<a name="231982099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231982099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231982099">(Mar 26 2021 at 15:17)</a>:</h4>
<p>I'm pretty sure the current embedding behavior is buggy, but I'd have to see the command line that actually goes to the linker. Is there an easy way to see that?</p>



<a name="231982498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231982498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Érico Nogueira Rolim <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231982498">(Mar 26 2021 at 15:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="396976">Rich Felker</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416/near/231982099">said</a>:</p>
<blockquote>
<p>I'm pretty sure the current embedding behavior is buggy, but I'd have to see the command line that actually goes to the linker. Is there an easy way to see that?</p>
</blockquote>
<p><a href="https://github.com/leahneukirchen/extrace">https://github.com/leahneukirchen/extrace</a> :)</p>



<a name="231982636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231982636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231982636">(Mar 26 2021 at 15:20)</a>:</h4>
<p>Haha, okay, I can do that with <code>strace -f -e trace=exec</code>... I was hoping for something like <code>gcc -v</code> though.</p>



<a name="231982852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231982852" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231982852">(Mar 26 2021 at 15:21)</a>:</h4>
<p>hold on</p>



<a name="231982866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231982866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231982866">(Mar 26 2021 at 15:21)</a>:</h4>
<p>there is something simple for this</p>



<a name="231983112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231983112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231983112">(Mar 26 2021 at 15:23)</a>:</h4>
<p>Oh. I was thinking of <code>-Z print-link-args</code> : <span class="user-mention" data-user-id="396976">@Rich Felker</span> is nightly good enough for your purposes?</p>



<a name="231983260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231983260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231983260">(Mar 26 2021 at 15:23)</a>:</h4>
<p>Well I don't want to have to build. I'm hoping for something I can just run on a stock Debian system with rust installed to see what happens when I link something using the embedded libc package</p>



<a name="231983438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231983438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231983438">(Mar 26 2021 at 15:24)</a>:</h4>
<p><span class="user-mention" data-user-id="396976">@Rich Felker</span> you could <code>rustup update nightly</code>, if you use <code>rustup</code> ...</p>



<a name="231983455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231983455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231983455">(Mar 26 2021 at 15:24)</a>:</h4>
<p>but I take it you don't</p>



<a name="231983847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231983847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231983847">(Mar 26 2021 at 15:27)</a>:</h4>
<p>if it's easy to do in a new test user's ~ I could</p>



<a name="231983910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231983910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231983910">(Mar 26 2021 at 15:27)</a>:</h4>
<p>Hmm, there’s an <code>info!</code> invocation… does the default build include that</p>



<a name="231984104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231984104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231984104">(Mar 26 2021 at 15:28)</a>:</h4>
<p>bam!</p>



<a name="231984126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231984126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231984126">(Mar 26 2021 at 15:28)</a>:</h4>
<p><span class="user-mention" data-user-id="396976">@Rich Felker</span> here’s an easy way:</p>



<a name="231984165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231984165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231984165">(Mar 26 2021 at 15:28)</a>:</h4>
<p><code>RUSTC_LOG=rustc_codegen_ssa::back::link rustc hello.rs</code></p>



<a name="231984182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231984182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231984182">(Mar 26 2021 at 15:29)</a>:</h4>
<p>setting that environment variable works on stable</p>



<a name="231984198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231984198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231984198">(Mar 26 2021 at 15:29)</a>:</h4>
<p>(and everywhere else)</p>



<a name="231984647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231984647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Rich Felker <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231984647">(Mar 26 2021 at 15:31)</a>:</h4>
<p>thanks. i'll see what i can make work among these options.</p>



<a name="231992703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/231992703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#231992703">(Mar 26 2021 at 16:20)</a>:</h4>
<p><a href="https://www.one-tab.com/page/A_oMpuQiTHepfOT0Nunv8w">https://www.one-tab.com/page/A_oMpuQiTHepfOT0Nunv8w</a> Gathered the external links from this meeting into here. No reason, just a compulsion to assemble bibliographies.</p>



<a name="232033836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/232033836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vadim Petrochenkov <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#232033836">(Mar 26 2021 at 21:24)</a>:</h4>
<p>If you are interested in the "statically linked musl"/"embedded musl" case, you may be interested in implementing <a href="https://github.com/rust-lang/rust/issues/72274">https://github.com/rust-lang/rust/issues/72274</a> "Distribute libc.a as a separate library instead of bundling it into liblibc.rlib on musl and wasi", which is another longstanding issue related to musl targets.</p>
<p>(Bundling musl into <code>liblibc.rlib</code> was another ad hoc solution used to enable the specific "self-contained executable" use case that was the focus when introducing musl targets.)</p>



<a name="232759919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bdesign%20meeting%5D%202021-03-26%20musl%20linking%20compiler-team%23416/near/232759919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bdesign.20meeting.5D.202021-03-26.20musl.20linking.20compiler-team.23416.html#232759919">(Apr 01 2021 at 13:55)</a>:</h4>
<p>posted MCP: <a href="https://github.com/rust-lang/compiler-team/issues/422">https://github.com/rust-lang/compiler-team/issues/422</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
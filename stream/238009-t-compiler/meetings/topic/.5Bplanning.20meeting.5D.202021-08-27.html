<html>
<head><meta charset="utf-8"><title>[planning meeting] 2021-08-27 · t-compiler/meetings · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/index.html">t-compiler/meetings</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html">[planning meeting] 2021-08-27</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250936104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936104">(Aug 27 2021 at 14:02)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> , our planning meeting for the September cycle is starting now. Add a <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> to show you’re here.</p>



<a name="250936347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936347">(Aug 27 2021 at 14:04)</a>:</h4>
<p>So, it looks to me like we have no new meeting proposals.</p>



<a name="250936370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936370">(Aug 27 2021 at 14:04)</a>:</h4>
<p>In hindsight, I should have looked at that yesterday during the triage meeting. :)</p>



<a name="250936409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936409">(Aug 27 2021 at 14:04)</a>:</h4>
<p>But, we also had some people noting that our MCP backlog has grown quite a bit</p>



<a name="250936427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936427">(Aug 27 2021 at 14:04)</a>:</h4>
<p>So I suggest we do one of two things:</p>



<a name="250936481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936481">(Aug 27 2021 at 14:05)</a>:</h4>
<p>Either we: 1. use this hour to go over the MCP list, and see if we can find obvious candidates to close or second, or ...</p>



<a name="250936504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936504">(Aug 27 2021 at 14:05)</a>:</h4>
<ol start="2">
<li>alternatively, we schedule a Friday meeting in the future to do the above</li>
</ol>



<a name="250936544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936544">(Aug 27 2021 at 14:05)</a>:</h4>
<p>I’m personally inclined to just do 1.</p>



<a name="250936547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936547">(Aug 27 2021 at 14:05)</a>:</h4>
<p>Option 1 seems good to me.</p>



<a name="250936690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936690">(Aug 27 2021 at 14:06)</a>:</h4>
<p>Oh, actually, before we just in: Any announcements?</p>



<a name="250936707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936707">(Aug 27 2021 at 14:07)</a>:</h4>
<p>I’ll be on vacation next week. That’s my announcement. :)</p>



<a name="250936815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250936815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250936815">(Aug 27 2021 at 14:07)</a>:</h4>
<p>I’m going to create a hackmd as a shared space for us to take notes</p>



<a name="250937359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937359">(Aug 27 2021 at 14:12)</a>:</h4>
<p>Here’s the hackmd, adapted from <span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> ’s great agenda construction system</p>



<a name="250937368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937368">(Aug 27 2021 at 14:12)</a>:</h4>
<p><a href="https://hackmd.io/yQ8jefI0Q0mBwFMAjGKfQw">https://hackmd.io/yQ8jefI0Q0mBwFMAjGKfQw</a></p>



<a name="250937402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937402">(Aug 27 2021 at 14:12)</a>:</h4>
<p>or if you prefer, here is the <a href="https://github.com/rust-lang/compiler-team/issues?q=is%3Aissue+is%3Aopen+label%3Amajor-change+-label%3Afinal-comment-period+-label%3Aproposed-final-comment-period+sort%3Acreated-asc">same list via github</a></p>



<a name="250937479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937479">(Aug 27 2021 at 14:13)</a>:</h4>
<p>There are eight unseconded MCPs. Lets go through them oldest first. Here’s the whole list:</p>



<a name="250937494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937494">(Aug 27 2021 at 14:13)</a>:</h4>
<p>- "Add different entry points for x.py" <a href="https://github.com/rust-lang/compiler-team/issues/396">compiler-team#396</a><br>
  - "rustdoc is using rustc_ast_pretty, would it be possible to make it somewhat "stable"?" <a href="https://github.com/rust-lang/compiler-team/issues/403">compiler-team#403</a><br>
  - "Don't steal the resolver when lowering HIR; instead store an immutable resolver in TyCtxt" <a href="https://github.com/rust-lang/compiler-team/issues/437">compiler-team#437</a><br>
  - "CI should exercise (subset of) tests under --stage 1" <a href="https://github.com/rust-lang/compiler-team/issues/439">compiler-team#439</a><br>
  - "Accept <code>pc</code> in place of <code>unknown</code> and <code>unknown</code> in place of <code>pc</code> for <code>x86_64</code> and <code>i?86</code> targets" <a href="https://github.com/rust-lang/compiler-team/issues/441">compiler-team#441</a><br>
  - "Non exhaustive reachable patterns lint" <a href="https://github.com/rust-lang/compiler-team/issues/445">compiler-team#445</a><br>
  - "Add <code>TyKind::Const</code> and remove <code>GenericArgKind::Const</code>" <a href="https://github.com/rust-lang/compiler-team/issues/453">compiler-team#453</a><br>
  - "prefer-dynamic=subset" <a href="https://github.com/rust-lang/compiler-team/issues/455">compiler-team#455</a></p>



<a name="250937529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937529">(Aug 27 2021 at 14:13)</a>:</h4>
<p>So, first up:</p>



<a name="250937533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937533" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937533">(Aug 27 2021 at 14:13)</a>:</h4>
<h1>"Add different entry points for x.py" <a href="https://github.com/rust-lang/compiler-team/issues/396">compiler-team#396</a></h1>



<a name="250937698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937698">(Aug 27 2021 at 14:15)</a>:</h4>
<p>It seems like conversation about this has been somewhat ongoing, with activity in the <a class="stream-topic" data-stream-id="233931" href="/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20different.20entry.20points.20for.20x.2Epy.20compiler-team.23396">#t-compiler/major changes &gt; Add different entry points for x.py compiler-team#396</a> topic up until August 7th</p>



<a name="250937763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937763">(Aug 27 2021 at 14:15)</a>:</h4>
<p>I feel like it's difficult for me to judge if this is a good idea or not because it doesn't solve any problems I have with the build system. However, it sounds like this just calls the existing script, modifying the defaults so it shouldn't really add additional complexity to bootstrap.</p>



<a name="250937882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937882">(Aug 27 2021 at 14:16)</a>:</h4>
<p>I think the main worry was that we end up with random unclearly-maintained scripts lying around everywhere</p>



<a name="250937963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937963">(Aug 27 2021 at 14:17)</a>:</h4>
<p>So as a concrete example, <span class="user-mention" data-user-id="124288">@oli</span> made a great point that people end up maintaining their own local random script <em>locally</em></p>



<a name="250937971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937971">(Aug 27 2021 at 14:17)</a>:</h4>
<p>I know I certainly do</p>



<a name="250937993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250937993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250937993">(Aug 27 2021 at 14:17)</a>:</h4>
<p>But: Do I think I’m going to <em>stop</em> doing that? Probably not.</p>



<a name="250938056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938056">(Aug 27 2021 at 14:18)</a>:</h4>
<p>I don't... I just remember random invocations and forget them. If it's not commited to the repo, I will not use it (not as a choice, but because I lose/forget the script)</p>



<a name="250938108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938108" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938108">(Aug 27 2021 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> you said this will make things complex because it will add more modes of use of <code>x.py</code></p>



<a name="250938149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938149">(Aug 27 2021 at 14:18)</a>:</h4>
<p>solution <code>y.py</code> for per-dir <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="250938160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938160">(Aug 27 2021 at 14:18)</a>:</h4>
<p>is the proposal to actually <em>extend</em> the functionality of <code>x.py</code> itself? I was under impression that <code>x.py</code> would largely be unchanged by it; you’re just selecting certain option combinations</p>



<a name="250938177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938177">(Aug 27 2021 at 14:18)</a>:</h4>
<p>and giving them highlighted status</p>



<a name="250938178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938178">(Aug 27 2021 at 14:18)</a>:</h4>
<p>no?</p>



<a name="250938184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938184">(Aug 27 2021 at 14:18)</a>:</h4>
<p><span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> MCP author here</p>



<a name="250938201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938201">(Aug 27 2021 at 14:18)</a>:</h4>
<p>Hi <span class="user-mention" data-user-id="232545">@Joshua Nelson</span></p>



<a name="250938245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938245">(Aug 27 2021 at 14:19)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> kind of convinced me that this is not super helpful, because you have to remember to use the wrappers</p>



<a name="250938320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938320">(Aug 27 2021 at 14:19)</a>:</h4>
<p>Let me go reread the discussion</p>



<a name="250938346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938346">(Aug 27 2021 at 14:19)</a>:</h4>
<p>I think complexity comes not just from what can literally be done but also when there's different interfaces to the same thing, and x.py I think already suffers from that problem (e.g., which stage do you need to use, etc.)</p>
<p>If we were <em>replacing</em> x.py's rather complex interface with something simpler, it's possible this would help, but as is I think it doesn't really</p>



<a name="250938347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938347">(Aug 27 2021 at 14:19)</a>:</h4>
<p>I think there is some value in having just x.py and just in one place. making it's invocation context dependent seems quite confusing to me</p>



<a name="250938358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938358">(Aug 27 2021 at 14:20)</a>:</h4>
<p>I will admit one thing: the fact that they are all python scripts worry me</p>



<a name="250938404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938404">(Aug 27 2021 at 14:20)</a>:</h4>
<p>if they were shell scripts, and all like one line</p>



<a name="250938418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938418">(Aug 27 2021 at 14:20)</a>:</h4>
<p>(that each invokes <code>x.py</code>)</p>



<a name="250938424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938424">(Aug 27 2021 at 14:20)</a>:</h4>
<p>then I’d be more comfortable</p>



<a name="250938448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938448">(Aug 27 2021 at 14:20)</a>:</h4>
<p>about that preventing feature creep</p>



<a name="250938462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938462">(Aug 27 2021 at 14:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250938149">said</a>:</p>
<blockquote>
<p>solution <code>y.py</code> for per-dir <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>
</blockquote>
<p>nooooo. <code>y.py</code> is already reserved for cg_clif :P</p>



<a name="250938493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938493">(Aug 27 2021 at 14:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250938404">said</a>:</p>
<blockquote>
<p>if they were shell scripts, and all like one line</p>
</blockquote>
<p>sure, this seems fine</p>



<a name="250938497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938497">(Aug 27 2021 at 14:20)</a>:</h4>
<p><code>z.py</code></p>



<a name="250938517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938517">(Aug 27 2021 at 14:21)</a>:</h4>
<p>Anyway, maybe we should close this. The proposal as written is probably a no go</p>



<a name="250938525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938525">(Aug 27 2021 at 14:21)</a>:</h4>
<p>Yeah?</p>



<a name="250938547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938547">(Aug 27 2021 at 14:21)</a>:</h4>
<p>Though it wuold be good to collect <em>why</em> we’re not seconding it</p>



<a name="250938589"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938589" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938589">(Aug 27 2021 at 14:21)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> do you think you’d be willing to write a comment capturing the heart of the feedback about why its being closed?</p>



<a name="250938594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938594" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938594">(Aug 27 2021 at 14:21)</a>:</h4>
<p>I think we should make <em>some</em> improvement here, but I agree as-written this is probably not the best approach</p>



<a name="250938611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938611">(Aug 27 2021 at 14:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250938589">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> do you think you’d be willing to write a comment capturing the heart of the feedback about why its being closed?</p>
</blockquote>
<p>sure</p>



<a name="250938618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938618">(Aug 27 2021 at 14:21)</a>:</h4>
<p>Okay great</p>



<a name="250938629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938629">(Aug 27 2021 at 14:21)</a>:</h4>
<p>so lets plan to close that. I’ll assume <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> will take action there.</p>



<a name="250938712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938712">(Aug 27 2021 at 14:22)</a>:</h4>
<p>yes, writing up a comment now</p>



<a name="250938722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938722">(Aug 27 2021 at 14:22)</a>:</h4>
<p>next</p>



<a name="250938726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938726">(Aug 27 2021 at 14:22)</a>:</h4>
<h1>"rustdoc is using rustc_ast_pretty, would it be possible to make it somewhat "stable"?" <a href="https://github.com/rust-lang/compiler-team/issues/403">compiler-team#403</a></h1>



<a name="250938797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938797">(Aug 27 2021 at 14:22)</a>:</h4>
<p>I really like the idea of using rustfmt as a library instead that came up</p>



<a name="250938815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938815" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938815">(Aug 27 2021 at 14:23)</a>:</h4>
<p>but rustfmt only supports per-item formatting right now</p>



<a name="250938860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938860">(Aug 27 2021 at 14:23)</a>:</h4>
<p>(so e.g. you can't format a single expression)</p>



<a name="250938978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938978">(Aug 27 2021 at 14:24)</a>:</h4>
<p>the ##<strong>t-compiler/major changes&gt;rustdoc is using rustc_ast_pretty, would … <a href="https://github.com/rust-lang/compiler-team/issues/403">compiler-team#403</a></strong>  zulip stream specifically said the use-case is to display attributes and macros</p>



<a name="250938994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250938994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250938994">(Aug 27 2021 at 14:24)</a>:</h4>
<p>I'm not sure I understand what  "somewhat 'stabilize' it so that no unexpected and potentially breaking changes come up" is asking for. Is this about the rustc_ast_pretty api or the output?</p>



<a name="250939004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939004">(Aug 27 2021 at 14:24)</a>:</h4>
<p>the output</p>



<a name="250939033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939033">(Aug 27 2021 at 14:24)</a>:</h4>
<p>the API is fine to break since rustdoc is in-tree</p>



<a name="250939073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939073">(Aug 27 2021 at 14:24)</a>:</h4>
<p>Also what does it mean to "somewhat stabilize"? Is the output currently unstable in some way?</p>



<a name="250939090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939090">(Aug 27 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250938978">said</a>:</p>
<blockquote>
<p>the ##<strong>t-compiler/major changes&gt;rustdoc is using rustc_ast_pretty, would … <a href="https://github.com/rust-lang/compiler-team/issues/403">compiler-team#403</a></strong>  zulip stream specifically said the use-case is to display attributes and macros</p>
</blockquote>
<p>we've since added code to format macros ourselves I believe</p>



<a name="250939117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939117">(Aug 27 2021 at 14:25)</a>:</h4>
<p>Since the number of use cases seems … somewhat limited (attributes and macros), would it make sense to prioritize adding API to rustfmt for just those use cases?</p>



<a name="250939128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939128">(Aug 27 2021 at 14:25)</a>:</h4>
<p>but there's a weird combination of "rewrite it from scratch" and "depend on rustc_ast_pretty" which is not ... great</p>



<a name="250939192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939192">(Aug 27 2021 at 14:25)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250939073">said</a>:</p>
<blockquote>
<p>Also what does it mean to "somewhat stabilize"? Is the output currently unstable in some way?</p>
</blockquote>
<p>I think this came up from <span class="user-mention" data-user-id="124288">@oli</span> actually - <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> didn't link the PR unfortunately so I can't find it</p>



<a name="250939283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939283">(Aug 27 2021 at 14:26)</a>:</h4>
<p>but the gist was "some changes to rustc_ast_pretty break rustdoc tests, which is not expected and adds a barrier to changing it for compiler contributors"</p>



<a name="250939352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939352">(Aug 27 2021 at 14:26)</a>:</h4>
<p>can we instead make rustdoc tests blessable?</p>



<a name="250939377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939377" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939377">(Aug 27 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124288">oli</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250939352">said</a>:</p>
<blockquote>
<p>can we instead make rustdoc tests blessable?</p>
</blockquote>
<p>like src/test/rustdoc?</p>



<a name="250939403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939403">(Aug 27 2021 at 14:27)</a>:</h4>
<p>rustdoc-ui is already blessable</p>



<a name="250939439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939439">(Aug 27 2021 at 14:27)</a>:</h4>
<p>I think it would be very hard to make src/test/rustdoc blessable because there's no reference output</p>



<a name="250939451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939451">(Aug 27 2021 at 14:27)</a>:</h4>
<p>ok</p>



<a name="250939493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939493">(Aug 27 2021 at 14:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250939439">said</a>:</p>
<blockquote>
<p>I think it would be very hard to make src/test/rustdoc blessable because there's no reference output</p>
</blockquote>
<p>It's the least to be told...</p>



<a name="250939494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939494">(Aug 27 2021 at 14:27)</a>:</h4>
<p>So, if we accepted this MCP, what action would we take based on that? Adding new tests earlier in the pipeline to catch changes during development? Or is this just a pinky-promise that it's "stable"?</p>



<a name="250939539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939539">(Aug 27 2021 at 14:28)</a>:</h4>
<p>Pinky-promise doesn’t seem like it accomplishes much</p>



<a name="250939595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939595">(Aug 27 2021 at 14:28)</a>:</h4>
<p>So yeah, maybe <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> makes a good point here</p>



<a name="250939599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939599">(Aug 27 2021 at 14:28)</a>:</h4>
<p>Right, I'm just not sure what changes if we accept this.</p>



<a name="250939628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939628">(Aug 27 2021 at 14:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250939192">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250939073">said</a>:</p>
<blockquote>
<p>Also what does it mean to "somewhat stabilize"? Is the output currently unstable in some way?</p>
</blockquote>
<p>I think this came up from <span class="user-mention silent" data-user-id="124288">oli</span> actually - <span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> didn't link the PR unfortunately so I can't find it</p>
</blockquote>
<p>There was no PR iirc, an attempt at something that didn't end up in a PR, only started the discussion.</p>



<a name="250939657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939657">(Aug 27 2021 at 14:28)</a>:</h4>
<p>(I'm kind of in favor of seconding it but I want to know what we expect will change)</p>



<a name="250939662"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939662" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939662">(Aug 27 2021 at 14:28)</a>:</h4>
<p>Lets close this and say that the focus should be on the concrete mechanisms that we’ll use to enforce pseudo-stability?</p>



<a name="250939718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939718">(Aug 27 2021 at 14:29)</a>:</h4>
<p>I’m fine with the <em>idea</em> of trying to ensure that the output remains stable</p>



<a name="250939758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939758">(Aug 27 2021 at 14:29)</a>:</h4>
<p>Oh hi <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span></p>



<a name="250939766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939766">(Aug 27 2021 at 14:29)</a>:</h4>
<p>We have tests of the pretty print output already.</p>



<a name="250939849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939849">(Aug 27 2021 at 14:30)</a>:</h4>
<p>another related thing is it would be great to have a procedure for when it's ok to change rustc_ast_pretty for rustdoc</p>



<a name="250939872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939872" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939872">(Aug 27 2021 at 14:30)</a>:</h4>
<p>yeah but people just bless them, right <span class="user-mention" data-user-id="133247">@bjorn3</span> ?</p>



<a name="250939906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939906">(Aug 27 2021 at 14:30)</a>:</h4>
<p>Probably</p>



<a name="250939925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939925">(Aug 27 2021 at 14:30)</a>:</h4>
<p>e.g. <a href="https://github.com/rust-lang/rust/pull/86282/files#diff-1e815311d4f7eb352f335f0b8f5eb6533af70640631d75c5f985dd6af58b4d42R143">https://github.com/rust-lang/rust/pull/86282/files#diff-1e815311d4f7eb352f335f0b8f5eb6533af70640631d75c5f985dd6af58b4d42R143</a> kind of just slid in because I didn't know who to ask about it</p>



<a name="250939936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250939936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250939936">(Aug 27 2021 at 14:30)</a>:</h4>
<p>i.e. it sounds to me like part of the problem is that we have a culture of “just bless it”, but that technique doesn’t work for the rustdoc cases</p>



<a name="250940010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940010">(Aug 27 2021 at 14:31)</a>:</h4>
<p>So maybe we have a subset of teh pretty-print tests that are <em>not</em> blessable, and they focus just on the rustdoc needs: attributes and macros alone?</p>



<a name="250940025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940025">(Aug 27 2021 at 14:31)</a>:</h4>
<p>Depends which part, for rustdoc output itself, it's fine, for rustdoc generated content, it works less</p>



<a name="250940087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940087">(Aug 27 2021 at 14:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250940010">said</a>:</p>
<blockquote>
<p>So maybe we have a subset of teh pretty-print tests that are <em>not</em> blessable, and they focus just on the rustdoc needs: attributes and macros alone?</p>
</blockquote>
<p>rustdoc uses a lot more than attributes and macros</p>



<a name="250940105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940105">(Aug 27 2021 at 14:31)</a>:</h4>
<p>those were just the ones that happened to be broken at the time the MCP was opened</p>



<a name="250940175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940175">(Aug 27 2021 at 14:32)</a>:</h4>
<p>Oh, the number of uses for ast_pretty has grown beyond attributes and macros?</p>



<a name="250940197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940197">(Aug 27 2021 at 14:32)</a>:</h4>
<p>that wasn’t reflected in zulip conversation</p>



<a name="250940223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940223">(Aug 27 2021 at 14:32)</a>:</h4>
<p>oh hmm, maybe I'm just confused</p>
<p>&lt;details&gt;</p>
<div class="codehilite"><pre><span></span><code>&gt; rg rustc_ast_pretty src/librustdoc/
src/librustdoc/json/conversions.rs
42:            .map(rustc_ast_pretty::pprust::attribute_to_string)

src/librustdoc/lib.rs
33:extern crate rustc_ast_pretty;

src/librustdoc/doctest.rs
227:    use rustc_ast_pretty::pprust;

src/librustdoc/clean/utils.rs
575:    rustc_ast_pretty::pprust::tt_to_string(matcher)

src/librustdoc/html/render/mod.rs
46:use rustc_ast_pretty::pprust;
(bash@pop-os) ~/src/rust [09:32:05]
&gt; rg rustc_ast_pretty src/^C
(bash@pop-os) ~/src/rust [09:32:12]
&gt; rg pprust src/librustdoc/
src/librustdoc/json/conversions.rs
42:            .map(rustc_ast_pretty::pprust::attribute_to_string)

src/librustdoc/doctest.rs
227:    use rustc_ast_pretty::pprust;
247:                    opts.attrs.push(pprust::meta_list_item_to_string(item));

src/librustdoc/clean/utils.rs
575:    rustc_ast_pretty::pprust::tt_to_string(matcher)

src/librustdoc/html/render/mod.rs
46:use rustc_ast_pretty::pprust;
968:                Some(pprust::attribute_to_string(&amp;attr).replace(&quot;\n&quot;, &quot;&quot;).replace(&quot;  &quot;, &quot; &quot;))
</code></pre></div>
<p>&lt;/details&gt;</p>



<a name="250940255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940255" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940255">(Aug 27 2021 at 14:32)</a>:</h4>
<p>I remember trying to use it for something a while back, but maybe <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> succeeded in talking me out of it</p>



<a name="250940304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940304">(Aug 27 2021 at 14:33)</a>:</h4>
<p>Okay, well, what are teh right next steps here?</p>



<a name="250940327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940327">(Aug 27 2021 at 14:33)</a>:</h4>
<p>I think its clear that we aren’t seconding this MCP as written: Not because we dislike the idea</p>



<a name="250940348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940348">(Aug 27 2021 at 14:33)</a>:</h4>
<p>but because we think we need more detail about the reality of what’s going to happen</p>



<a name="250940359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940359" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940359">(Aug 27 2021 at 14:33)</a>:</h4>
<p>Does that sound right?</p>



<a name="250940412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940412">(Aug 27 2021 at 14:34)</a>:</h4>
<p><span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> how do you feel about taking another shot at identifying <em>how</em> you’d accomplish enforcement of the stability you want?</p>



<a name="250940437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940437">(Aug 27 2021 at 14:34)</a>:</h4>
<p>I would like to have</p>
<ul>
<li>procedures for when it's ok to change ast_pretty for rustdoc</li>
<li>for compiler contributors to not "bless away" changes to ast_pretty without asking the rustdoc team</li>
</ul>



<a name="250940490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940490">(Aug 27 2021 at 14:34)</a>:</h4>
<p>for the second, we could probably do that with an automatic ping, the same way subtrees get pinged</p>



<a name="250940519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940519">(Aug 27 2021 at 14:34)</a>:</h4>
<p>That all sounds reasonable to me</p>



<a name="250940551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940551">(Aug 27 2021 at 14:34)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250940412">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="210316">GuillaumeGomez</span> how do you feel about taking another shot at identifying <em>how</em> you’d accomplish enforcement of the stability you want?</p>
</blockquote>
<p>You mean besides relying on "text display"?</p>



<a name="250940605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940605" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940605">(Aug 27 2021 at 14:35)</a>:</h4>
<p>I don’t know what you mean by “relying on text display"</p>



<a name="250940645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940645">(Aug 27 2021 at 14:35)</a>:</h4>
<p>we print it and then compare the generated content with what we expect</p>



<a name="250940691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940691">(Aug 27 2021 at 14:35)</a>:</h4>
<p>(this is how it's done currently)</p>



<a name="250940722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oli <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940722">(Aug 27 2021 at 14:36)</a>:</h4>
<p>that sounds a lot like it could be blessable?</p>



<a name="250940792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940792">(Aug 27 2021 at 14:36)</a>:</h4>
<p><span class="user-mention" data-user-id="124288">@oli</span> no, we don't have the full .html file</p>



<a name="250940819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940819">(Aug 27 2021 at 14:36)</a>:</h4>
<p>if moved outside of <code>test/rustdoc</code>, yes</p>



<a name="250940829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940829">(Aug 27 2021 at 14:36)</a>:</h4>
<p>we can't make it blessable, it means it doesn't test anything at all</p>



<a name="250940836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940836">(Aug 27 2021 at 14:36)</a>:</h4>
<p>there'd be no point to the test</p>



<a name="250940837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940837">(Aug 27 2021 at 14:36)</a>:</h4>
<p>I’m personally getting confused about what we’re saying we do today, and how we test it, and what is affected by bless.</p>



<a name="250940884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940884">(Aug 27 2021 at 14:36)</a>:</h4>
<p>and I would kind of like to discuss the other MCPs</p>



<a name="250940925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940925">(Aug 27 2021 at 14:37)</a>:</h4>
<p>Okay. Maybe <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> you and <span class="user-mention" data-user-id="210316">@GuillaumeGomez</span> can have private chat later about ideas here</p>



<a name="250940944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940944">(Aug 27 2021 at 14:37)</a>:</h4>
<p>(or it doesn’t need to be private)</p>



<a name="250940963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940963">(Aug 27 2021 at 14:37)</a>:</h4>
<p>Sure</p>



<a name="250940968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250940968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250940968">(Aug 27 2021 at 14:37)</a>:</h4>
<p>(just, not now. We don’t need to resolve these questions here.)</p>



<a name="250941016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941016">(Aug 27 2021 at 14:37)</a>:</h4>
<p>and for now, we’ll close this MCP</p>



<a name="250941056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941056">(Aug 27 2021 at 14:38)</a>:</h4>
<p>next</p>



<a name="250941064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941064">(Aug 27 2021 at 14:38)</a>:</h4>
<h1>"Don't steal the resolver when lowering HIR; instead store an immutable resolver in TyCtxt" <a href="https://github.com/rust-lang/compiler-team/issues/437">compiler-team#437</a></h1>



<a name="250941234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941234">(Aug 27 2021 at 14:39)</a>:</h4>
<p>rustdoc really needs <em>something</em> to happen in this area. It doesn't need to be specifically this, but I know at least 5 different regressions related to this.</p>



<a name="250941320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941320">(Aug 27 2021 at 14:39)</a>:</h4>
<p>It seems from the <a class="stream-topic" data-stream-id="233931" href="/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Don.27t.20steal.20the.20resolver.20when.20lowering.20HI.E2.80.A6.20compiler-team.23437">#t-compiler/major changes &gt; Don't steal the resolver when lowering HI… compiler-team#437</a> zulip topic that <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> has pretty strong feelings on this subject.</p>



<a name="250941508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941508">(Aug 27 2021 at 14:40)</a>:</h4>
<p>I think I’d like for <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> and <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> to resolve the questions about the problems with the alternative implementation strategy before we second or close this</p>



<a name="250941551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941551">(Aug 27 2021 at 14:41)</a>:</h4>
<p>Ok. <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> would you have time for a video/audio call in the next few weeks?</p>



<a name="250941575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941575">(Aug 27 2021 at 14:41)</a>:</h4>
<p>(I need a few days to figure out where my code went, but after that it will be faster to talk live)</p>



<a name="250941590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941590">(Aug 27 2021 at 14:41)</a>:</h4>
<p>i.e. my gut feeling is that <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> is probably right, that the correct choice is indeed a lot of work, but its better than incurring more tech debt here.</p>



<a name="250941635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941635">(Aug 27 2021 at 14:42)</a>:</h4>
<p>I do not consider this tech debt. My understanding is we want to the resolver to be involved in incremental at some point <em>anyway</em></p>



<a name="250941649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941649">(Aug 27 2021 at 14:42)</a>:</h4>
<p>Though <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> makes good points about the different constraints that rustdoc has to deal with.</p>



<a name="250941707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941707">(Aug 27 2021 at 14:42)</a>:</h4>
<p>I'm just suggesting we do it sooner rather than later</p>



<a name="250941898"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941898" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941898">(Aug 27 2021 at 14:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Don't.20steal.20the.20resolver.20when.20lowering.20HI.E2.80.A6.20compiler-team.23437/near/243791243">said</a>:</p>
<blockquote>
<p>another possible alternative is to do this in the opposite order: store <em>only</em> a read-only resolver on TyCtxt, start tracking changes to it in the query system, and only then allow rustdoc to mutate it. That's a lot more time and effort, but it seems more correct and inline with the compiler's long-term goals</p>
</blockquote>



<a name="250941945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941945">(Aug 27 2021 at 14:44)</a>:</h4>
<p>are there more thoughts on this approach?</p>



<a name="250941994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250941994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250941994">(Aug 27 2021 at 14:44)</a>:</h4>
<p>I didn’t see any feedback from <span class="user-mention" data-user-id="123856">@Vadim Petrochenkov</span> on that idea</p>



<a name="250942036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942036">(Aug 27 2021 at 14:44)</a>:</h4>
<p>Okay well the point is, I don’t think we can make a decision about this MCP right now</p>



<a name="250942066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942066">(Aug 27 2021 at 14:45)</a>:</h4>
<p>and I think <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> knows whom they need to talk to. :)</p>



<a name="250942106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942106" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942106">(Aug 27 2021 at 14:45)</a>:</h4>
<p>lets move along then</p>



<a name="250942125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942125">(Aug 27 2021 at 14:45)</a>:</h4>
<h1>"CI should exercise (subset of) tests under --stage 1" <a href="https://github.com/rust-lang/compiler-team/issues/439">compiler-team#439</a></h1>



<a name="250942194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942194">(Aug 27 2021 at 14:45)</a>:</h4>
<p>Okay, lay it on me everyone: Why isn’t this seconded?</p>



<a name="250942259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942259">(Aug 27 2021 at 14:46)</a>:</h4>
<p>I don't think this is a _bad_ idea, but I do think approving different outputs in the first place was a bad idea</p>



<a name="250942273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942273">(Aug 27 2021 at 14:46)</a>:</h4>
<p>but that's harder to prevent automatically</p>



<a name="250942335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942335">(Aug 27 2021 at 14:46)</a>:</h4>
<p>“approving different outputs"</p>



<a name="250942351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942351">(Aug 27 2021 at 14:46)</a>:</h4>
<p>what do you mean by that? Allowing stage1 and stage2 codegen to differ?</p>



<a name="250942420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942420">(Aug 27 2021 at 14:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250942351">said</a>:</p>
<blockquote>
<p>what do you mean by that? Allowing stage1 and stage2 codegen to differ?</p>
</blockquote>
<p>the original reason you opened the issue is that rustdoc's stderr for a doctest was different for stage1 and stage2</p>



<a name="250942467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942467">(Aug 27 2021 at 14:47)</a>:</h4>
<p>and it caused you to get confused, because you'd never explicitly run rustdoc tests and you thought they weren't being run in CI</p>



<a name="250942505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942505">(Aug 27 2021 at 14:47)</a>:</h4>
<p>I'm saying that when I approved that change I made a mistake</p>



<a name="250942519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942519">(Aug 27 2021 at 14:47)</a>:</h4>
<p>okay I see</p>



<a name="250942663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942663">(Aug 27 2021 at 14:48)</a>:</h4>
<p>If we <em>did</em> do stage1 tests in CI</p>



<a name="250942682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942682">(Aug 27 2021 at 14:48)</a>:</h4>
<p>then that should have caught what you did, right <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> ?</p>



<a name="250942721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942721">(Aug 27 2021 at 14:48)</a>:</h4>
<p>or no</p>



<a name="250942744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942744">(Aug 27 2021 at 14:49)</a>:</h4>
<p>or yes?</p>



<a name="250942759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942759">(Aug 27 2021 at 14:49)</a>:</h4>
<p>/me has a lot of context to reload here</p>



<a name="250942776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942776">(Aug 27 2021 at 14:49)</a>:</h4>
<p>yes, I think so</p>



<a name="250942797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942797">(Aug 27 2021 at 14:49)</a>:</h4>
<p>I think we should discuss exactly <em>what</em> subset to run</p>



<a name="250942813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942813" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942813">(Aug 27 2021 at 14:49)</a>:</h4>
<p>but once we do that I'd be happy to second :)</p>



<a name="250942824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942824">(Aug 27 2021 at 14:49)</a>:</h4>
<p>That sounds fair</p>



<a name="250942869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942869">(Aug 27 2021 at 14:50)</a>:</h4>
<p>much like the “stablize ast_pretty”, I can believe this MCP is too light on detail for us to take action on it immediately</p>



<a name="250942943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942943">(Aug 27 2021 at 14:50)</a>:</h4>
<p>that’s the kind of feedback I need to make forward motion on it</p>



<a name="250942966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250942966" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250942966">(Aug 27 2021 at 14:50)</a>:</h4>
<p>Okay then, I know what I need to do then. Lets move along</p>



<a name="250943021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943021">(Aug 27 2021 at 14:50)</a>:</h4>
<h1>"Accept <code>pc</code> in place of <code>unknown</code> and <code>unknown</code> in place of <code>pc</code> for <code>x86_64</code> and <code>i?86</code> targets" <a href="https://github.com/rust-lang/compiler-team/issues/441">compiler-team#441</a></h1>



<a name="250943172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943172">(Aug 27 2021 at 14:51)</a>:</h4>
<p>There is some important feedback in <a class="stream-topic" data-stream-id="233931" href="/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Accept.20.02klzzwxh.3A0000.03.20in.20place.20of.20.02klzzwxh.3A0001.03.20and.20.60un.E2.80.A6.20compiler-team.23441">#t-compiler/major changes &gt; Accept <code>pc</code> in place of <code>unknown</code> and `un… compiler-team#441</a></p>



<a name="250943449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943449">(Aug 27 2021 at 14:53)</a>:</h4>
<p>in particular, I thought <span class="user-mention" data-user-id="120518">@Eric Huss</span> ’s note that " I really appreciate that rustc only uses a single canonical string for a target. “ is worthwhile</p>



<a name="250943523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943523">(Aug 27 2021 at 14:53)</a>:</h4>
<p>at the same time, I think it can make sense to be liberal in what we accpet, and still normalize to the current canonical forms...</p>



<a name="250943617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943617">(Aug 27 2021 at 14:54)</a>:</h4>
<p>How good are our error diagnostics here? Do we at least <em>suggest</em> the right thing when someone writes <code>pc</code> instead of <code>unknown</code> or vice versa?</p>



<a name="250943714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943714">(Aug 27 2021 at 14:54)</a>:</h4>
<p>Good diagnostics only help humans, I suppose; they may not help GNU autotools all that much</p>



<a name="250943822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943822">(Aug 27 2021 at 14:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250943617">said</a>:</p>
<blockquote>
<p>How good are our error diagnostics here? Do we at least <em>suggest</em> the right thing when someone writes <code>pc</code> instead of <code>unknown</code> or vice versa?</p>
</blockquote>
<div class="codehilite"><pre><span></span><code>error: Error loading target specification: Could not find specification for target &quot;x86_64-pc-linux-gnu&quot;. Run `rustc --print target-list` for a list of built-in targets
</code></pre></div>



<a name="250943858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943858">(Aug 27 2021 at 14:55)</a>:</h4>
<p>See, we could do a lot better there</p>



<a name="250943981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250943981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250943981">(Aug 27 2021 at 14:56)</a>:</h4>
<p>I’d be more inclined to spend our effort on something that, upon getting no hits for <code>x86_64-pc-linux-gnu</code>, did a fallback after <code>sed -s s/-pc-/-unknown-/</code> and then suggested the appropriate change</p>



<a name="250944072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944072">(Aug 27 2021 at 14:57)</a>:</h4>
<p>reading further along in the zulip discussion, <span class="user-mention" data-user-id="133247">@bjorn3</span> indicated that an RFC might be warranted here</p>



<a name="250944145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944145">(Aug 27 2021 at 14:57)</a>:</h4>
<p>I’m certainly not prepared to second this as written</p>



<a name="250944162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944162">(Aug 27 2021 at 14:57)</a>:</h4>
<p>The only question is whether to close it</p>



<a name="250944174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944174">(Aug 27 2021 at 14:58)</a>:</h4>
<p>From reading the IRLO thread this feels like it's potentially also a lang-team concern.</p>



<a name="250944288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944288">(Aug 27 2021 at 14:58)</a>:</h4>
<p>I have a vague recollection that lang team may have discussed and then punted back to compiler team. But that might have been about something else (maybe the vendor thing)</p>



<a name="250944453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944453">(Aug 27 2021 at 14:59)</a>:</h4>
<p>I guess I’m not prepared to close it yet either</p>



<a name="250944581"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944581" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944581">(Aug 27 2021 at 15:00)</a>:</h4>
<p>I think I need to talk to someone with more experience with autotools</p>



<a name="250944617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944617">(Aug 27 2021 at 15:00)</a>:</h4>
<p>to better understand the reality of how hard we are making life there</p>



<a name="250944692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944692">(Aug 27 2021 at 15:00)</a>:</h4>
<p>So okay, lets not take any action there yet</p>



<a name="250944713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944713">(Aug 27 2021 at 15:00)</a>:</h4>
<p>And with that, the hour is up</p>



<a name="250944757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944757">(Aug 27 2021 at 15:01)</a>:</h4>
<p>Hey, thanks to everyone in <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> for coming. This was super useful and fun</p>



<a name="250944842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/250944842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#250944842">(Aug 27 2021 at 15:01)</a>:</h4>
<p>(we got through 5 out of the 8 open MCP’s. That’s not bad!)</p>



<a name="251082916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/251082916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#251082916">(Aug 28 2021 at 21:17)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/250940490">said</a>:</p>
<blockquote>
<p>for the second, we could probably do that with an automatic ping, the same way subtrees get pinged</p>
</blockquote>
<p>But doesn't highfive only ping if the diff contained a change when the PR was opened? Often people don't bless until after the PR is open, because CI fails, and I think in that case we wouldn't get a ping.</p>



<a name="251091373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/251091373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#251091373">(Aug 28 2021 at 23:57)</a>:</h4>
<p>Then we should fix that bug, I've been meaning to do it for rustfmt anyway</p>



<a name="251091418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/251091418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#251091418">(Aug 28 2021 at 23:58)</a>:</h4>
<p>I haven't had as much time for open source as I'd like lately :(</p>



<a name="251095869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/251095869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#251095869">(Aug 29 2021 at 01:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bplanning.20meeting.5D.202021-08-27/near/251091373">said</a>:</p>
<blockquote>
<p>Then we should fix that bug, I've been meaning to do it for rustfmt anyway</p>
</blockquote>
<p>What do you mean by "for rustfmt"?</p>



<a name="251102063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bplanning%20meeting%5D%202021-08-27/near/251102063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bplanning.20meeting.5D.202021-08-27.html#251102063">(Aug 29 2021 at 03:35)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Noah Lev</span> <a href="https://github.com/rust-lang/highfive/issues/337">https://github.com/rust-lang/highfive/issues/337</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>[weekly] 2021-05-20 #54818 · t-compiler/meetings · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/index.html">t-compiler/meetings</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html">[weekly] 2021-05-20 #54818</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="239581118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239581118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239581118">(May 20 2021 at 12:24)</a>:</h4>
<p>Hi <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span>; the triage meeting will take place in about 1h30<br>
<em>WG-prioritization</em> has done pre-triage in <a class="stream" data-stream-id="245100" href="/#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts">#t-compiler/wg-prioritization/alerts</a> and prepared the <a href="https://hackmd.io/v-I1WY0JSSqpf6KxBhkc9Q">meeting agenda</a></p>
<p>Scheduled checkins from:</p>
<ul>
<li><span class="user-group-mention" data-user-group-id="1175">@WG-rfc-2229</span>  by <span class="user-mention" data-user-id="116009">@nikomatsakis</span>  <span class="user-mention" data-user-id="116118">@Matthew Jasper</span> </li>
<li><span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span>  by <span class="user-mention" data-user-id="133169">@matklad</span>  (anything to share?)</li>
</ul>



<a name="239581746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239581746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239581746">(May 20 2021 at 12:28)</a>:</h4>
<p>(agenda looks packed today <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> )</p>



<a name="239595903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239595903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239595903">(May 20 2021 at 14:00)</a>:</h4>
<p>hi <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> ; lets get started on this meeting! Add a <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> to show you're here</p>



<a name="239596059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596059">(May 20 2021 at 14:01)</a>:</h4>
<h3>Announcements</h3>



<a name="239596156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596156">(May 20 2021 at 14:01)</a>:</h4>
<p>I have an announcement to make: I'm happy to report that I recently joined the Rust team at Microsoft's developer division (the same team @Wesleywiser is on) -- which will allow me to spend a significant amount of time on Rust again <code>:)</code></p>



<a name="239596302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596302">(May 20 2021 at 14:02)</a>:</h4>
<p>I have a draft up for a blog post, on behalf of T-compiler, advocating that Rust developers try out the next beta: <a href="https://github.com/rust-lang/blog.rust-lang.org/pull/846">https://github.com/rust-lang/blog.rust-lang.org/pull/846</a></p>



<a name="239596339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596339">(May 20 2021 at 14:02)</a>:</h4>
<p>(feedback on post is very much welcome)</p>



<a name="239596503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596503">(May 20 2021 at 14:03)</a>:</h4>
<h3>MCPs/FCPs</h3>



<a name="239596532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596532">(May 20 2021 at 14:03)</a>:</h4>
<ul>
<li>New MCPs (take a look, see if you like them!)<ul>
<li>"Write text output files to stdout if options like <code>-o -</code> or <code>--emit asm=-</code> are provided" <a href="https://github.com/rust-lang/compiler-team/issues/431">compiler-team#431</a></li>
<li>"Introduce ty::WhereClause to align chalk and rustc dyn representation" <a href="https://github.com/rust-lang/compiler-team/issues/433">compiler-team#433</a></li>
</ul>
</li>
</ul>



<a name="239596553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596553">(May 20 2021 at 14:03)</a>:</h4>
<ul>
<li>Old MCPs (not seconded, take a look)<ul>
<li>"Add different entry points for x.py" <a href="https://github.com/rust-lang/compiler-team/issues/396">compiler-team#396</a></li>
<li>"rustdoc is using rustc_ast_pretty, would it be possible to make it somewhat "stable"?" <a href="https://github.com/rust-lang/compiler-team/issues/403">compiler-team#403</a></li>
<li>"LLVM plugin support in Rust" <a href="https://github.com/rust-lang/compiler-team/issues/419">compiler-team#419</a></li>
<li>"Rename -Cllvm-args to something backend agnostic" <a href="https://github.com/rust-lang/compiler-team/issues/421">compiler-team#421</a></li>
<li>"Promote <code>aarch64-apple-ios-sim</code> to Tier 2" <a href="https://github.com/rust-lang/compiler-team/issues/428">compiler-team#428</a></li>
</ul>
</li>
</ul>



<a name="239596566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596566">(May 20 2021 at 14:03)</a>:</h4>
<ul>
<li>Pending FCP requests (check your boxes!)<ul>
<li>No pending FCP requests this time.</li>
</ul>
</li>
</ul>



<a name="239596593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596593">(May 20 2021 at 14:03)</a>:</h4>
<ul>
<li>Things in FCP (make sure you're good with it)<ul>
<li>"Update the existing musl targets to be dynamically linked." <a href="https://github.com/rust-lang/compiler-team/issues/422">compiler-team#422</a></li>
<li>"A --temps-dir option for specifying where the intermediate files are written" <a href="https://github.com/rust-lang/compiler-team/issues/423">compiler-team#423</a></li>
<li>"Make <code>TypeFolder::fold_*</code> return <code>Result</code>" <a href="https://github.com/rust-lang/compiler-team/issues/432">compiler-team#432</a></li>
</ul>
</li>
</ul>



<a name="239596618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596618">(May 20 2021 at 14:03)</a>:</h4>
<ul>
<li>Accepted MCPs<ul>
<li>No new accepted proposals this time.</li>
</ul>
</li>
</ul>



<a name="239596639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596639">(May 20 2021 at 14:03)</a>:</h4>
<ul>
<li>Finalized FCPs (disposition merge)<ul>
<li>"Stabilize extended_key_value_attributes" <a href="https://github.com/rust-lang/rust/pull/83366">rust#83366</a></li>
<li>"Stabilize "RangeFrom" patterns" <a href="https://github.com/rust-lang/rust/pull/83918">rust#83918</a></li>
<li>"Uplift the invalid_atomic_ordering lint from clippy to rustc" <a href="https://github.com/rust-lang/rust/pull/84039">rust#84039</a></li>
<li>"rustdoc: Make "rust code block is empty" and "could not parse code block" warnings a lint (<code>INVALID_RUST_CODEBLOCKS</code>)" <a href="https://github.com/rust-lang/rust/pull/84587">rust#84587</a></li>
<li>"impl FromStr for proc_macro::Literal" <a href="https://github.com/rust-lang/rust/pull/84717">rust#84717</a></li>
<li>"FCP poll for ErrorKind::OutOfMemory" <a href="https://github.com/rust-lang/rust/issues/84916">rust#84916</a></li>
</ul>
</li>
</ul>



<a name="239596701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596701">(May 20 2021 at 14:04)</a>:</h4>
<blockquote>
<p>"Stabilize extended_key_value_attributes" <a href="https://github.com/rust-lang/rust/issues/83366">rust#83366</a><br>
"rustdoc: Make "rust code block is empty" and "could not parse code block" warnings a lint (INVALID_RUST_CODEBLOCKS)" <a href="https://github.com/rust-lang/rust/issues/84587">rust#84587</a></p>
</blockquote>
<p>these were merged :)</p>



<a name="239596707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596707">(May 20 2021 at 14:04)</a>:</h4>
<h3>WG checkins</h3>



<a name="239596739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596739">(May 20 2021 at 14:04)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1175">@WG-rfc-2229</span>  by <span class="user-mention" data-user-id="116009">@nikomatsakis</span>  <span class="user-mention" data-user-id="116118">@Matthew Jasper</span>:</p>
<ul>
<li>
<p>Overall improvement to closure diagnostics: we now point to part of the source code responsible for the capture kind associated with the error message.</p>
<ul>
<li>Some screenshots of diagnostics here:<a href="https://github.com/rust-lang/lang-team/issues/50">https://github.com/rust-lang/lang-team/issues/50</a></li>
</ul>
</li>
<li>
<p>We can now detect if the closure after enabling RFC 2229 will not meet Clone or any of the auto trait bounds and can provide migrations for it. These migrations are supported via rustfix as well.</p>
</li>
<li>
<p>We can annote drop implementations with <code>#[rustc_insignificant_dtor]</code> to avoid migrating in scenarios where drop order doesn't affect semantics of the program. We intend to use this attribute to annotate the stdlib to mark certain type as safe to be Drop reorded. eg: when a string gets dropped it would not affect the behavior of rest of the program.</p>
</li>
<li>
<p>We wrote an initial implementation for printing out the closure size before and after the feature. The implementation is somewhat incomplete, but was good enough for us to get some data on cargo and stdlib.<br>
Cargo and all depensices size data: <a href="https://docs.google.com/spreadsheets/d/1Irsj5O7HPPfomWat2jPTPdx_KPlsyYo5kRuQpNNuwsQ/edit?usp=sharing">https://docs.google.com/spreadsheets/d/1Irsj5O7HPPfomWat2jPTPdx_KPlsyYo5kRuQpNNuwsQ/edit?usp=sharing</a></p>
</li>
</ul>



<a name="239596768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596768">(May 20 2021 at 14:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239596553">said</a>:</p>
<blockquote>
<ul>
<li>Old MCPs (not seconded, take a look)<ul>
<li>"Rename -Cllvm-args to something backend agnostic" <a href="https://github.com/rust-lang/compiler-team/issues/421">compiler-team#421</a></li>
</ul>
</li>
</ul>
</blockquote>
<p>huh, I seconded this...</p>



<a name="239596838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596838">(May 20 2021 at 14:04)</a>:</h4>
<p><a href="https://github.com/rust-lang/compiler-team/issues/432">https://github.com/rust-lang/compiler-team/issues/432</a> was also seconded</p>



<a name="239596877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596877">(May 20 2021 at 14:05)</a>:</h4>
<p>Is this an artifact from how early in the week the agenda is constructed?</p>



<a name="239596889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596889">(May 20 2021 at 14:05)</a>:</h4>
<p>hmm .... I need to check how we filter MCP</p>



<a name="239596928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596928">(May 20 2021 at 14:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239596877">said</a>:</p>
<blockquote>
<p>Is this an artifact from how early in the week the agenda is constructed?</p>
</blockquote>
<p>Nope, that was seconded <strong>ages</strong> ago</p>



<a name="239596943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596943">(May 20 2021 at 14:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239596877">said</a>:</p>
<blockquote>
<p>Is this an artifact from how early in the week the agenda is constructed?</p>
</blockquote>
<p>for the merged PRs? I suspect so, yes</p>



<a name="239596965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596965">(May 20 2021 at 14:05)</a>:</h4>
<p>okay, we'll look into that.</p>



<a name="239596994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239596994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239596994">(May 20 2021 at 14:05)</a>:</h4>
<p>The -Cllvm-args one was even accepted 2 weeks ago. Who is on the hook for merging/closing/etc these?</p>



<a name="239597092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597092">(May 20 2021 at 14:06)</a>:</h4>
<p>I do (I think)</p>



<a name="239597131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597131">(May 20 2021 at 14:06)</a>:</h4>
<p>could we have rustbot close them automatically after the FCP?</p>



<a name="239597203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597203">(May 20 2021 at 14:07)</a>:</h4>
<p>Okay. I think we should split out this into a separate topic and move on.</p>



<a name="239597225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597225">(May 20 2021 at 14:07)</a>:</h4>
<p>I do think we should resolve these questions, but there are a ton of important backport ... yes, exactly</p>



<a name="239597305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597305" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597305">(May 20 2021 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="133169">@matklad</span> if there is a <span class="user-group-mention" data-user-group-id="1060">@WG-rls2.0</span> checkin, feel free to add it to the <a href="https://hackmd.io/v-I1WY0JSSqpf6KxBhkc9Q?both">agenda</a>; I'm going to move on to backport nominations to save time.</p>



<a name="239597326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597326">(May 20 2021 at 14:08)</a>:</h4>
<h2>Backport nominations</h2>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-compiler">T-compiler stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-compiler">T-compiler beta</a></p>



<a name="239597382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597382">(May 20 2021 at 14:08)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://uploads.zulipusercontent.net/281681cc2061954ec1285786f6c55d81e6530445/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731372e706e67" title="beta"> "Ensure TLS destructors run before thread joins in SGX" <a href="https://github.com/rust-lang/rust/pull/84409">rust#84409</a><ul>
<li>opened by "mzohreva"</li>
<li>r'ed by <span class="user-mention" data-user-id="119235">@David Tolnay</span> and <span class="user-mention" data-user-id="138938">@Jethro</span>, already merged</li>
<li>A bit of context in this <a href="https://github.com/rust-lang/rust/pull/83416#discussion_r617282907">comment</a></li>
</ul>
</li>
</ul>



<a name="239597610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597610">(May 20 2021 at 14:09)</a>:</h4>
<p>what tier is SGX ?</p>



<a name="239597646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597646">(May 20 2021 at 14:09)</a>:</h4>
<p>I think 3, maybe 2</p>



<a name="239597702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matklad <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597702">(May 20 2021 at 14:10)</a>:</h4>
<p>sadly, no check-in from WG-rls2.0 this time (unless <span class="user-mention" data-user-id="211727">@Jonas Schievink  [he/him]</span> wants to do one?) -- missed notification beforehand,  and a busy right now :(</p>



<a name="239597713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597713">(May 20 2021 at 14:10)</a>:</h4>
<p>(I skimmed forge but couldn't find it there.)</p>



<a name="239597740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597740">(May 20 2021 at 14:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133169">matklad</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239597702">said</a>:</p>
<blockquote>
<p>sadly, no check-in from WG-rls2.0 this time (unless <span class="user-mention silent" data-user-id="211727">Jonas Schievink  [he/him]</span> wants to do one?) -- missed notification beforehand,  and a busy right now :(</p>
</blockquote>
<p>not a problem, thanks!</p>



<a name="239597741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597741">(May 20 2021 at 14:10)</a>:</h4>
<p>tier 2 <br>
<a href="https://doc.rust-lang.org/nightly/rustc/platform-support.html">https://doc.rust-lang.org/nightly/rustc/platform-support.html</a></p>



<a name="239597784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597784">(May 20 2021 at 14:10)</a>:</h4>
<p>ah okay, not on forge</p>



<a name="239597809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597809">(May 20 2021 at 14:10)</a>:</h4>
<p>Jethro is the owner of the target, so I think we should just backport.</p>



<a name="239597821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597821">(May 20 2021 at 14:10)</a>:</h4>
<p>yeah lets just backport</p>



<a name="239597907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597907" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597907">(May 20 2021 at 14:11)</a>:</h4>
<p>(its also purely a libs-impl thing, right?)</p>



<a name="239597925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597925">(May 20 2021 at 14:11)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/84409">rust#84409</a>: backport approved</p>



<a name="239597949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239597949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239597949">(May 20 2021 at 14:11)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://uploads.zulipusercontent.net/281681cc2061954ec1285786f6c55d81e6530445/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731372e706e67" title="beta"> "Update LLVM submodule" <a href="https://github.com/rust-lang/rust/pull/85236">rust#85236</a><ul>
<li>opened by <span class="user-mention" data-user-id="133224">@Nikita Popov</span></li>
<li>approved by <span class="user-mention" data-user-id="138448">@cuviper</span></li>
<li>merges recent changes from the upstream LLVM 12 branch, should also fix <a href="https://github.com/rust-lang/rust/issues/84958">rustc#84958</a></li>
</ul>
</li>
</ul>



<a name="239598074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598074">(May 20 2021 at 14:12)</a>:</h4>
<p>I think we either need to backport that PR or disable mutable-noalias annotatons on beta</p>



<a name="239598103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598103">(May 20 2021 at 14:12)</a>:</h4>
<p>or both</p>



<a name="239598149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598149">(May 20 2021 at 14:13)</a>:</h4>
<p>yeah, non-exclusive or, I guess :)</p>



<a name="239598235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598235" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598235">(May 20 2021 at 14:13)</a>:</h4>
<p>on that issue, briansmith argued for disabling it</p>



<a name="239598264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598264" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598264">(May 20 2021 at 14:13)</a>:</h4>
<p>lets definitely backport the PR</p>



<a name="239598369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598369">(May 20 2021 at 14:14)</a>:</h4>
<p>where should we have the discussion of whether to disable the optimization on the beta (and thus on the 1.53 series? I guess a #t-compiler topic seems appropriate</p>



<a name="239598566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598566">(May 20 2021 at 14:15)</a>:</h4>
<p>Is there a good way for regression testing issues like this?</p>



<a name="239598722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598722">(May 20 2021 at 14:16)</a>:</h4>
<p>I don't think there's a good way of formally verifying the correctness of that optimization.</p>



<a name="239598723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598723">(May 20 2021 at 14:16)</a>:</h4>
<p>I opened up a separate topic</p>



<a name="239598776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598776">(May 20 2021 at 14:16)</a>:</h4>
<p><a class="stream-topic" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler/topic/should.20we.20disable.20mutable.20noalias.20in.201.2E53.20.28current.20beta.29">#t-compiler &gt; should we disable mutable noalias in 1.53 (current beta)</a></p>



<a name="239598853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598853">(May 20 2021 at 14:16)</a>:</h4>
<p>but yes, <a href="https://github.com/rust-lang/rust/issues/85236">rust#85236</a> backport approved.</p>



<a name="239598877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598877">(May 20 2021 at 14:17)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://uploads.zulipusercontent.net/281681cc2061954ec1285786f6c55d81e6530445/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731372e706e67" title="beta"> "Fix incorrect gating of nonterminals in key-value attributes" <a href="https://github.com/rust-lang/rust/pull/85445">rust#85445</a><ul>
<li>opened by <span class="user-mention" data-user-id="125294">@Aaron Hill</span></li>
<li>approved by <span class="user-mention" data-user-id="116107">@davidtwco</span></li>
<li>Fixes <a href="https://github.com/rust-lang/rust/issues/85432">rust#85432</a></li>
</ul>
</li>
</ul>



<a name="239598949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598949">(May 20 2021 at 14:17)</a>:</h4>
<p>^ this needs to be backported or there's no point in merging it</p>



<a name="239598967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239598967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239598967">(May 20 2021 at 14:17)</a>:</h4>
<p>the feature gate is completely gone on nightly</p>



<a name="239599143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599143">(May 20 2021 at 14:18)</a>:</h4>
<p>okay <a href="https://github.com/rust-lang/rust/issues/85445">rust#85445</a> backport approved.</p>



<a name="239599159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599159">(May 20 2021 at 14:18)</a>:</h4>
<p>what does that mean for users on current stable?</p>



<a name="239599228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599228">(May 20 2021 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> stable is not affected, only beta</p>



<a name="239599262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599262">(May 20 2021 at 14:19)</a>:</h4>
<p>on beta, this gives an incorrect error for code that used to compile</p>



<a name="239599378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599378">(May 20 2021 at 14:19)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://uploads.zulipusercontent.net/281681cc2061954ec1285786f6c55d81e6530445/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731372e706e67" title="beta"> "have on_completion record subcycles" <a href="https://github.com/rust-lang/rust/pull/85186">rust#85186</a><ul>
<li>Fixes <a href="https://github.com/rust-lang/rust/issues/83538">rust#83538</a>, a P-high issue with the trait evaluation cache</li>
<li>approved by <span class="user-mention" data-user-id="232957">@Jack Huey</span></li>
<li><a href="https://github.com/rust-lang/rust/pull/85186#issuecomment-840527579">comment</a>: perf comparison seems to indicate a tiny regression but the gain provided by this patch greatly make it worth</li>
<li>nominated by <span class="user-mention" data-user-id="116009">@nikomatsakis</span> because <a href="https://github.com/rust-lang/rust/pull/85186#issuecomment-840715095">these incremental failures are a big problem</a></li>
</ul>
</li>
</ul>



<a name="239599520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599520">(May 20 2021 at 14:20)</a>:</h4>
<p>I'm concerned about backporting this PR</p>



<a name="239599592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599592" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599592">(May 20 2021 at 14:20)</a>:</h4>
<p>the coinductive cycle logic is quite subtle</p>



<a name="239599670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599670">(May 20 2021 at 14:21)</a>:</h4>
<p>in practice we expect most of the incremental failures to be mitigated even without this, right?</p>



<a name="239599672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599672">(May 20 2021 at 14:21)</a>:</h4>
<p>and this PR affects all coinductive cycles (not just during incremental compilation</p>



<a name="239599686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599686">(May 20 2021 at 14:21)</a>:</h4>
<p>that's right</p>



<a name="239599727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599727">(May 20 2021 at 14:21)</a>:</h4>
<p>the main one seemed to be <code>predicates_of</code></p>



<a name="239599744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599744">(May 20 2021 at 14:21)</a>:</h4>
<p>Yeah, I'm mixed here on backporting</p>



<a name="239599767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599767">(May 20 2021 at 14:21)</a>:</h4>
<p>OTOH, this is a correctness fix regardless, right?</p>



<a name="239599798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599798">(May 20 2021 at 14:21)</a>:</h4>
<p>uh</p>



<a name="239599810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599810">(May 20 2021 at 14:21)</a>:</h4>
<p>I'm not certain</p>



<a name="239599835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599835">(May 20 2021 at 14:21)</a>:</h4>
<p>I don't think so</p>



<a name="239599844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599844">(May 20 2021 at 14:22)</a>:</h4>
<p>I <em>think</em> that without it, we would just use <code>EvaluatedToOkModuloRegions</code> in more places</p>



<a name="239599895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599895">(May 20 2021 at 14:22)</a>:</h4>
<p>yes</p>



<a name="239599933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599933">(May 20 2021 at 14:22)</a>:</h4>
<p>ok - then I think a backport is probably not necessary.</p>



<a name="239599954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599954">(May 20 2021 at 14:22)</a>:</h4>
<p>this doesn't cause a fingerprint failure?</p>



<a name="239599974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599974">(May 20 2021 at 14:22)</a>:</h4>
<p>it does</p>



<a name="239599980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239599980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239599980">(May 20 2021 at 14:22)</a>:</h4>
<p>sorry, let me clarify</p>



<a name="239600026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600026">(May 20 2021 at 14:23)</a>:</h4>
<p>without this PR, we use <code>EvaluatedToOkModuloRegions</code> in more places - with incremental compilation, this can lead to fingerprint issues</p>



<a name="239600045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600045" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600045">(May 20 2021 at 14:23)</a>:</h4>
<p>since whether or not we use <code>EvaluatedToOkModuloRegions</code> depends on global state</p>



<a name="239600072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600072">(May 20 2021 at 14:23)</a>:</h4>
<p>without incremental compilation, I think we just end up doing extra work</p>



<a name="239600089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600089">(May 20 2021 at 14:23)</a>:</h4>
<p>That's correct</p>



<a name="239600095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600095">(May 20 2021 at 14:23)</a>:</h4>
<p>in cases where we could have soundly returned <code>EvaluatedToOk</code></p>



<a name="239600146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600146" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600146">(May 20 2021 at 14:23)</a>:</h4>
<p>if we don't backport this, should we disable incr-comp the same way it is in stable?</p>



<a name="239600242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600242">(May 20 2021 at 14:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239600146">said</a>:</p>
<blockquote>
<p>if we don't backport this, should we disable incr-comp the same way it is in stable?</p>
</blockquote>
<p>I don't think one person can answer that - are you asking how frequently the fingerprint failures for predicates_of happen?</p>



<a name="239600247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600247">(May 20 2021 at 14:24)</a>:</h4>
<p>I'm trying to ask if we're going to see a bunch of fingerprint-related bug reports if we release beta as is without this backport</p>



<a name="239600376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600376">(May 20 2021 at 14:25)</a>:</h4>
<p>Is this particular fingerprint issue also a correctness issue? i.e. can it lead to miscompilations?</p>



<a name="239600414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600414">(May 20 2021 at 14:25)</a>:</h4>
<p><span class="user-mention" data-user-id="124287">@mw</span> no</p>



<a name="239600464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600464">(May 20 2021 at 14:25)</a>:</h4>
<p>the fingerprint ICE should prevent this from leading to miscompilations (if that would be possible for this issue)</p>



<a name="239600506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600506">(May 20 2021 at 14:25)</a>:</h4>
<p>since we panic as soon as we end up in a situation where there could be two different values of the same query in use</p>



<a name="239600545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600545">(May 20 2021 at 14:26)</a>:</h4>
<p>OK, then I'd say it's a question of how often this occurs in practice</p>



<a name="239600613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600613" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600613">(May 20 2021 at 14:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239600242">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239600146">said</a>:</p>
<blockquote>
<p>if we don't backport this, should we disable incr-comp the same way it is in stable?</p>
</blockquote>
<p>I don't think one person can answer that - are you asking how frequently the fingerprint failures for predicates_of happen?</p>
</blockquote>
<p>I tried to search for this just now but the <code>--remap-path-prefix</code> fix also manifested as "unstable fingerprints for <code>predicates_of</code>" so it's hard to tell which issues are actually related</p>



<a name="239600634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600634">(May 20 2021 at 14:26)</a>:</h4>
<p>and unfortunately we probably don't have good data about how often it occurs in practice</p>



<a name="239600640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Esteban Küber <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600640">(May 20 2021 at 14:26)</a>:</h4>
<p><span class="user-mention" data-user-id="125294">@Aaron Hill</span> re: your earlier comment, your concern is that this will result in slower compilations, not about correctness?</p>



<a name="239600645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600645">(May 20 2021 at 14:26)</a>:</h4>
<p>My opinion: it's indeed a subtle change, but I think both <span class="user-mention" data-user-id="116009">@nikomatsakis</span> and I feel pretty confident that it's correct</p>



<a name="239600655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600655">(May 20 2021 at 14:26)</a>:</h4>
<p>If the logic here is wrong, what is the usual effect? Is it that we compile invalid code without error or that we generate an error for valid code?</p>



<a name="239600685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600685">(May 20 2021 at 14:26)</a>:</h4>
<p>from what I'm seen, the perf impact is tiny</p>



<a name="239600703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600703">(May 20 2021 at 14:26)</a>:</h4>
<p>except on one <code>syn</code> benchmark for whatever reason</p>



<a name="239600764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600764" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600764">(May 20 2021 at 14:27)</a>:</h4>
<p>Well, I think invalid logic with coinductive cycles can definitely be a soundness issue</p>



<a name="239600767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600767">(May 20 2021 at 14:27)</a>:</h4>
<p>I don't have any performance concerns - I was just commenting about the (theortical) impact of not making this change, in the absence of incremental compilation</p>



<a name="239600779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600779">(May 20 2021 at 14:27)</a>:</h4>
<p>we've spent a lot of time on this - maybe it makes sense to delay the decision to next week?</p>



<a name="239600791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600791">(May 20 2021 at 14:27)</a>:</h4>
<p>Which is why the subtlety is important</p>



<a name="239600799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600799">(May 20 2021 at 14:27)</a>:</h4>
<p>that will give more time for any issues to pop up</p>



<a name="239600836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600836">(May 20 2021 at 14:27)</a>:</h4>
<p>sgtm</p>



<a name="239600837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600837" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600837">(May 20 2021 at 14:27)</a>:</h4>
<p>If we delay, we might not get this backported in time to make the crater run for <code>beta</code></p>



<a name="239600839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600839">(May 20 2021 at 14:27)</a>:</h4>
<p>The reason I want to resolve it is that we are planning to put out a blog post actively advertising people try out the beta</p>



<a name="239600849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600849" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600849">(May 20 2021 at 14:28)</a>:</h4>
<p>my view on these incremental bugs is that we should try to fix them 'incrementally'</p>



<a name="239600905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600905">(May 20 2021 at 14:28)</a>:</h4>
<p>specifically, in part, to catch <em>new</em> incr-comp bugs</p>



<a name="239600920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600920">(May 20 2021 at 14:28)</a>:</h4>
<p>we've found out that there were a lot of bugs in the incremental system</p>



<a name="239600934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600934">(May 20 2021 at 14:28)</a>:</h4>
<p>advertising a beta where <em>known bugs are not addressed</em></p>



<a name="239600947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600947">(May 20 2021 at 14:28)</a>:</h4>
<p>does not sound good to me</p>



<a name="239600960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600960">(May 20 2021 at 14:28)</a>:</h4>
<p>and I think we should avoid trying to rush fixes (especially for subtle issues</p>



<a name="239600968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600968">(May 20 2021 at 14:28)</a>:</h4>
<p>if many people use beta without the fix, we should know more about how often this still occurs, right?</p>



<a name="239600978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600978">(May 20 2021 at 14:28)</a>:</h4>
<p>beta is definitely going to be better than stable</p>



<a name="239600992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239600992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239600992">(May 20 2021 at 14:28)</a>:</h4>
<p>the question is just how much better</p>



<a name="239601042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601042">(May 20 2021 at 14:29)</a>:</h4>
<p>well, it should get lots of testing in the ~4 weeks between now and next release, and even more because of the blog post</p>



<a name="239601077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601077">(May 20 2021 at 14:29)</a>:</h4>
<p>we haven't yet fixed 100% of these bugs - there are still some PRs open</p>



<a name="239601092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601092">(May 20 2021 at 14:29)</a>:</h4>
<p>so no matter what, beta is going to have at least one incremental bug</p>



<a name="239601104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601104">(May 20 2021 at 14:29)</a>:</h4>
<p>Right. Okay so what I'm hearing is that we should not put out the blog post yet</p>



<a name="239601105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601105" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601105">(May 20 2021 at 14:29)</a>:</h4>
<p>but I think it would be reasonable to advertise it as better than stable</p>



<a name="239601135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601135">(May 20 2021 at 14:29)</a>:</h4>
<p>I don't think that's good enough</p>



<a name="239601137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601137">(May 20 2021 at 14:29)</a>:</h4>
<p>in particular, the <code>predicate_of</code> bug that lots of people seemded to be hitting</p>



<a name="239601150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601150">(May 20 2021 at 14:29)</a>:</h4>
<p>fair enough</p>



<a name="239601234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601234">(May 20 2021 at 14:30)</a>:</h4>
<p>I don't have a strong view on whether or not we should do a blog post, or what it shoukld say</p>



<a name="239601237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601237">(May 20 2021 at 14:30)</a>:</h4>
<p>Or at least, I'd rather plan to delay the blog post a bit longer</p>



<a name="239601268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601268">(May 20 2021 at 14:30)</a>:</h4>
<p>And work on resolving the remaining issues as best we can</p>



<a name="239601311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601311">(May 20 2021 at 14:30)</a>:</h4>
<p>I think for this particular PR, letting it sit on nightly for a bit longer is fine; but also fine to later beta backport</p>



<a name="239601367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601367">(May 20 2021 at 14:30)</a>:</h4>
<p>Okay. lets table the beta nomination of this PR to next week</p>



<a name="239601438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601438">(May 20 2021 at 14:31)</a>:</h4>
<p>(maybe we can delay the blog post by less than a week. I.e. time it so that the blog post comes out right after the last set of currently anticipated backports has landed)</p>



<a name="239601478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601478">(May 20 2021 at 14:31)</a>:</h4>
<ul>
<li><img alt=":stable:" class="emoji" src="https://uploads.zulipusercontent.net/2ad07b11f914f23d46d52fb16b528f0d1983b5df/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731362e706e67" title="stable"> "have on_completion record subcycles" <a href="https://github.com/rust-lang/rust/pull/85186">rust#85186</a><ul>
<li>(above isue nominated also for stable backport)</li>
</ul>
</li>
</ul>



<a name="239601501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601501">(May 20 2021 at 14:31)</a>:</h4>
<p>okay we clearly aren't going to talk about this now</p>



<a name="239601620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601620">(May 20 2021 at 14:32)</a>:</h4>
<p>(I suspect we will discuss next week, and I suspect we will decline to backport, <em>unless</em> there is a strong motivation <em>outside of</em> incr-comp)</p>



<a name="239601635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601635">(May 20 2021 at 14:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-libs-impl">T-libs-impl stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-libs-impl">T-libs-impl beta</a></p>



<a name="239601642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601642">(May 20 2021 at 14:32)</a>:</h4>
<p>(if we're going to backport anything to stable, I think we should backport --remap-path-prefix, since people were hitting that more often)</p>



<a name="239601685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601685">(May 20 2021 at 14:33)</a>:</h4>
<p>was that stable nominated ?</p>



<a name="239601742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601742">(May 20 2021 at 14:33)</a>:</h4>
<p>no, I'm saying it should have been</p>



<a name="239601782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601782">(May 20 2021 at 14:33)</a>:</h4>
<p>or at least, it's weird for on_completion to be stable nominated but not --remap-path-prefix</p>



<a name="239601836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601836">(May 20 2021 at 14:33)</a>:</h4>
<p>okay. I'm going to keep working through the existing queue</p>



<a name="239601866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601866">(May 20 2021 at 14:34)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-libs-impl">T-libs-impl stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-libs-impl">T-libs-impl beta</a></p>



<a name="239601929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239601929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239601929">(May 20 2021 at 14:34)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://uploads.zulipusercontent.net/281681cc2061954ec1285786f6c55d81e6530445/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731372e706e67" title="beta"> "remove InPlaceIterable marker from Peekable due to unsoundness" <a href="https://github.com/rust-lang/rust/pull/85340">rust#85340</a><ul>
<li>opened by <span class="user-mention" data-user-id="239181">@The 8472</span></li>
<li>approved  <span class="user-mention" data-user-id="220273">@Jane Lusby</span></li>
<li>perf run shows overall neutral</li>
<li>fixes a P-critical unsoundness (out of bounds access) <a href="https://github.com/rust-lang/rust/issues/85322">rust#85322</a></li>
</ul>
</li>
</ul>



<a name="239602110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602110">(May 20 2021 at 14:35)</a>:</h4>
<p>I see that two of the bencharmks had a <code>peekable()</code> called removed</p>



<a name="239602130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602130">(May 20 2021 at 14:35)</a>:</h4>
<p>does that mean that this is breaking change?</p>



<a name="239602144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602144" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Aaron Hill <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602144">(May 20 2021 at 14:35)</a>:</h4>
<p>or was there some other reason for that?</p>



<a name="239602171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602171">(May 20 2021 at 14:35)</a>:</h4>
<p>Okay, lets see: this is some unstable feature that has semantics that are observable from users of our stdlib...</p>



<a name="239602304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602304" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602304">(May 20 2021 at 14:36)</a>:</h4>
<p>I was assuming that they removed <code>peekable()</code> so that you continued to get in-place iteration</p>



<a name="239602348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602348">(May 20 2021 at 14:36)</a>:</h4>
<p>i.e. to avoid regressing the benchmarks' performance</p>



<a name="239602374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602374">(May 20 2021 at 14:36)</a>:</h4>
<p>but its a good question</p>



<a name="239602482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602482">(May 20 2021 at 14:37)</a>:</h4>
<p>I don't think its an invariant the users of the API are allowed to rely on.</p>



<a name="239602505"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602505" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602505">(May 20 2021 at 14:37)</a>:</h4>
<p>is <span class="user-mention" data-user-id="310399">@Mara</span> here? Or some other person from libs-impl ?</p>



<a name="239602508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602508">(May 20 2021 at 14:37)</a>:</h4>
<p>i.e. its an incidental particularity of the behaviour.</p>



<a name="239602538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602538">(May 20 2021 at 14:37)</a>:</h4>
<p>Is <code>InPlaceIterable</code> visible to stable users?</p>



<a name="239602603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602603" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602603">(May 20 2021 at 14:38)</a>:</h4>
<p>the same way as calling <code>let x = alloc(); let y = alloc(free(x)); assert_eq!(x, y)</code> might return same pointers.</p>



<a name="239602625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602625">(May 20 2021 at 14:38)</a>:</h4>
<p>Looks like it's an unstable trait</p>



<a name="239602636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602636">(May 20 2021 at 14:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239602538">said</a>:</p>
<blockquote>
<p>Is <code>InPlaceIterable</code> visible to stable users?</p>
</blockquote>
<p>I was assuming its not, based on <code>#[unstable(issue = "none", feature = "inplace_iteration")]</code></p>



<a name="239602710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602710">(May 20 2021 at 14:38)</a>:</h4>
<p>So I don't think the effect of this is visible to users.</p>



<a name="239602768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602768">(May 20 2021 at 14:39)</a>:</h4>
<p>its an implementation detail of specialization, so its viisble in terms of performance of certain code sequence and, as the benchmark suggests, reuse of backing storage.</p>



<a name="239602777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602777">(May 20 2021 at 14:39)</a>:</h4>
<p>I think we can and should backport  <a href="https://github.com/rust-lang/rust/issues/85340">rust#85340</a></p>



<a name="239602816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602816">(May 20 2021 at 14:39)</a>:</h4>
<p>backport approved</p>



<a name="239602851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602851">(May 20 2021 at 14:39)</a>:</h4>
<ul>
<li>No stable nominations for <code>T-libs-impl</code> this time.</li>
</ul>



<a name="239602874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602874">(May 20 2021 at 14:39)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Abeta-nominated+-label%3Abeta-accepted+label%3AT-rustdoc">T-rustdoc stable</a> / <a href="https://github.com/rust-lang/rust/issues?q=is%3Aall+label%3Astable-nominated+-label%3Astable-accepted+label%3AT-rustdoc">T-rustdoc beta</a></p>



<a name="239602893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239602893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239602893">(May 20 2021 at 14:40)</a>:</h4>
<ul>
<li><img alt=":beta:" class="emoji" src="https://uploads.zulipusercontent.net/281681cc2061954ec1285786f6c55d81e6530445/68747470733a2f2f7a756c69702d617661746172732e73332e616d617a6f6e6177732e636f6d2f343731352f656d6f6a692f696d616765732f32303731372e706e67" title="beta"> "rustdoc: Call <code>initSidebarItems</code> in root module of crate" <a href="https://github.com/rust-lang/rust/pull/85304">rust#85304</a><ul>
<li>opened by <span class="user-mention" data-user-id="230287">@Stu</span></li>
<li>approved by <span class="user-mention" data-user-id="315412">@jsha</span></li>
<li>Fixes <a href="https://github.com/rust-lang/rust/issues/85301">rust#85301</a></li>
</ul>
</li>
</ul>



<a name="239603043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603043" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603043">(May 20 2021 at 14:40)</a>:</h4>
<p>T-rustdoc?</p>



<a name="239603081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603081">(May 20 2021 at 14:41)</a>:</h4>
<p>Yeah we always look at rustdoc backport nominations</p>



<a name="239603167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603167">(May 20 2021 at 14:41)</a>:</h4>
<p>I think T-rustdoc is fine with this backport</p>



<a name="239603192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603192" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603192">(May 20 2021 at 14:41)</a>:</h4>
<p>the diff looks small enough...</p>



<a name="239603194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603194">(May 20 2021 at 14:41)</a>:</h4>
<p>I don't know anything about the development of its frontend code to make an informed decision here <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="239603214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603214">(May 20 2021 at 14:42)</a>:</h4>
<p>I think this should be a T-rustdoc decision personally</p>



<a name="239603263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603263">(May 20 2021 at 14:42)</a>:</h4>
<p>seems weird that T-compiler decides on backports</p>



<a name="239603316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603316" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603316">(May 20 2021 at 14:42)</a>:</h4>
<p>The issue is that historically T-rustdoc has not had suffiicent process to actually move on backports</p>



<a name="239603353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603353">(May 20 2021 at 14:42)</a>:</h4>
<p>that was why our team agreed to take on the responsibility</p>



<a name="239603355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> GuillaumeGomez <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603355">(May 20 2021 at 14:42)</a>:</h4>
<p>I also approve it</p>



<a name="239603364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603364">(May 20 2021 at 14:42)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> recently we've been pinging the team to check people are ok with it</p>



<a name="239603385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603385">(May 20 2021 at 14:43)</a>:</h4>
<p>do you want to open a separate thread for improving the process?</p>



<a name="239603414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603414">(May 20 2021 at 14:43)</a>:</h4>
<p>yes lets not derail the meeting to discuss that</p>



<a name="239603435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603435">(May 20 2021 at 14:43)</a>:</h4>
<p>but I really think no one in @_<em>T-compiler/meeting</em> has the context to make a decision</p>



<a name="239603440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603440">(May 20 2021 at 14:43)</a>:</h4>
<p>(I think I've said before that I'd love to get it off our regular agenda)</p>



<a name="239603483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603483">(May 20 2021 at 14:43)</a>:</h4>
<p>Anyway, backport approved</p>



<a name="239603490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603490">(May 20 2021 at 14:43)</a>:</h4>
<ul>
<li>No stable nominations for <code>T-rustdoc</code> this time.</li>
</ul>



<a name="239603504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603504" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603504">(May 20 2021 at 14:44)</a>:</h4>
<h2>PRs S-waiting-on-team</h2>
<p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-compiler">T-compiler</a></p>



<a name="239603543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603543">(May 20 2021 at 14:44)</a>:</h4>
<ul>
<li>"Remove unstable <code>--pretty</code> flag" <a href="https://github.com/rust-lang/rust/pull/83491">rust#83491</a></li>
</ul>



<a name="239603554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603554">(May 20 2021 at 14:44)</a>:</h4>
<p>I wrote my comment</p>



<a name="239603683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603683">(May 20 2021 at 14:44)</a>:</h4>
<p>at this point I guess if no one else speaks up, we should go ahead and let this PR land</p>



<a name="239603702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603702" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603702">(May 20 2021 at 14:44)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pulls?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AS-waiting-on-team+label%3AT-libs-impl">T-libs-impl</a></p>
<ul>
<li>No PRs waiting on <code>T-libs-impl</code> this time.</li>
</ul>



<a name="239603735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603735">(May 20 2021 at 14:45)</a>:</h4>
<h2>Issues of Note</h2>
<h3>Short Summary</h3>
<ul>
<li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical">3 T-compiler P-critical issues</a><ul>
<li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-critical+no%3Aassignee">2 of those are unassigned</a></li>
</ul>
</li>
<li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high">75 T-compiler P-high issues</a><ul>
<li><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AT-compiler+label%3AP-high+no%3Aassignee">49 of those are unassigned</a></li>
</ul>
</li>
<li><a href="https://github.com/rust-lang/rust/labels/regression-from-stable-to-beta">3 P-critical, 1 P-high, 3 P-medium, 0 P-low regression-from-stable-to-beta</a></li>
<li><a href="https://github.com/rust-lang/rust/labels/regression-from-stable-to-nightly">1 P-critical, 2 P-high, 1 P-medium, 0 P-low regression-from-stable-to-nightly</a></li>
<li><a href="https://github.com/rust-lang/rust/labels/regression-from-stable-to-stable">3 P-critical, 45 P-high, 85 P-medium, 11 P-low regression-from-stable-to-stable</a></li>
</ul>



<a name="239603778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603778">(May 20 2021 at 14:45)</a>:</h4>
<h3>P-critical</h3>
<p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-compiler">T-compiler</a></p>



<a name="239603791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603791">(May 20 2021 at 14:45)</a>:</h4>
<ul>
<li>"Unstable fingerprints - what to do on beta (and stable)" <a href="https://github.com/rust-lang/rust/issues/84970">rust#84970</a><ul>
<li>issue (and related ones) is being followed</li>
<li>anything new to discuss for this tracking issue?</li>
</ul>
</li>
</ul>



<a name="239603851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603851">(May 20 2021 at 14:45)</a>:</h4>
<p>(there is still work to be done, but I don't think we need to talk about it here.)</p>



<a name="239603928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239603928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239603928">(May 20 2021 at 14:46)</a>:</h4>
<ul>
<li>"Miscompilation on ARM-M with nightly-2021-04-23" <a href="https://github.com/rust-lang/rust/issues/85351">rust#85351</a><ul>
<li>regression from nightly <code>nightly-2021-04-23</code> (therefore <code>regression-from-stable-to-beta</code>) on 2 different Tier ARM targets (thumbv8m and thumbv7em)</li>
<li>issue reporter mentions that it could affect other targets</li>
<li>we don't have yet an mcve</li>
<li>in this <a href="https://github.com/rust-lang/rust/issues/85351#issuecomment-842579818">comment</a> "@yroux" mention is it indeed caused by LLVM 12 and will work on a patch</li>
</ul>
</li>
</ul>



<a name="239604054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604054">(May 20 2021 at 14:46)</a>:</h4>
<p>wg-llvm should probably be pinged on that <del>PR</del> issue</p>



<a name="239604387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604387">(May 20 2021 at 14:48)</a>:</h4>
<p>or is it icebreakers-llvm</p>



<a name="239604389"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604389" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604389">(May 20 2021 at 14:48)</a>:</h4>
<p>sigh</p>



<a name="239604411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604411">(May 20 2021 at 14:48)</a>:</h4>
<p>just llvm should work</p>



<a name="239604478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604478">(May 20 2021 at 14:49)</a>:</h4>
<p>jinx</p>



<a name="239604538"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604538" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604538">(May 20 2021 at 14:49)</a>:</h4>
<p>its a P-critical bug. No owner yet</p>



<a name="239604671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604671">(May 20 2021 at 14:50)</a>:</h4>
<p>but there is activity on it</p>



<a name="239604687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604687">(May 20 2021 at 14:50)</a>:</h4>
<p>lets see what happens over the next week.</p>



<a name="239604706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604706">(May 20 2021 at 14:50)</a>:</h4>
<ul>
<li>"Regression on nightly in AVX2 byte shift intrinsics" <a href="https://github.com/rust-lang/rust/issues/85446">rust#85446</a><ul>
<li>Unsoundness on byteshift on x86_64</li>
<li>Seems part of the fallout from PR <a href="https://github.com/rust-lang/rust/issues/85446#issuecomment-843508538">rustc#83278</a></li>
</ul>
</li>
</ul>



<a name="239604752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604752">(May 20 2021 at 14:50)</a>:</h4>
<p>has a fix</p>



<a name="239604758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604758">(May 20 2021 at 14:50)</a>:</h4>
<p>in queue</p>



<a name="239604775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604775">(May 20 2021 at 14:50)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-libs-impl">T-libs-impl</a></p>
<ul>
<li>No <code>P-critical</code> issues for <code>T-libs-impl</code> this time.</li>
</ul>
<p><a href="https://github.com/rust-lang/rust/issues?utf8=%E2%9C%93&amp;q=is%3Aopen+label%3AP-critical+label%3AT-rustdoc">T-rustdoc</a></p>
<ul>
<li>No <code>P-critical</code> issues for <code>T-rustdoc</code> this time.</li>
</ul>



<a name="239604797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604797">(May 20 2021 at 14:50)</a>:</h4>
<h3>P-high regressions</h3>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-beta+label%3AP-high+-label%3AT-infra+-label%3AT-libs+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">P-high beta regressions</a></p>



<a name="239604802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604802">(May 20 2021 at 14:51)</a>:</h4>
<ul>
<li>"Rustc beta/nightly appears to ignore <code>unsafe</code> blocks inside closure in some cases" <a href="https://github.com/rust-lang/rust/issues/85435">rust#85435</a></li>
</ul>



<a name="239604900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604900">(May 20 2021 at 14:51)</a>:</h4>
<p>oh this is worse than the title makes it sound</p>



<a name="239604972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239604972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239604972">(May 20 2021 at 14:52)</a>:</h4>
<p>I might argue this is P-critical? We cannot release with this bug, right?</p>



<a name="239605088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605088">(May 20 2021 at 14:52)</a>:</h4>
<p>well what the title says per-se sounds P-critical</p>



<a name="239605095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605095">(May 20 2021 at 14:52)</a>:</h4>
<p>(It sounds like there may be workarounds, such as refactoring your code so that you don't <em>have</em> unsafe code in closure bodies.)</p>



<a name="239605129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605129">(May 20 2021 at 14:52)</a>:</h4>
<p>huh, I'm surprised that this ... did not get caught by any tests etc</p>



<a name="239605165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605165">(May 20 2021 at 14:52)</a>:</h4>
<p>I'm going to self-assign this one and bump priority to P-critical</p>



<a name="239605178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605178">(May 20 2021 at 14:53)</a>:</h4>
<p>I think p-critical is right though</p>



<a name="239605232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605232" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605232">(May 20 2021 at 14:53)</a>:</h4>
<p>we can presumably at least revert the PR, that should be easy enough, it alleges only diagnostic changes</p>



<a name="239605248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605248">(May 20 2021 at 14:53)</a>:</h4>
<p>true dat</p>



<a name="239605267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605267">(May 20 2021 at 14:53)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3Aregression-from-stable-to-nightly+label%3AP-high+no%3Aassignee+-label%3AT-infra+-label%3AT-libs+-label%3AT-release+-label%3AT-rustdoc+-label%3AT-core">Unassigned P-high nightly regressions</a></p>
<ul>
<li>No unassigned <code>P-high</code> nightly regressions this time.</li>
</ul>



<a name="239605296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605296" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605296">(May 20 2021 at 14:53)</a>:</h4>
<h2>Performance logs</h2>
<blockquote>
<p><a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2021-05-18.md">triage logs for 2021-05-18</a></p>
</blockquote>
<p>A lot of noise in the benchmark results this week. We are discussing (<a href="https://zulip-archive.rust-lang.org/247081tcompilerperformance/06104coercionsdebugnoise.html">zulip archive</a>, <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/coercions-debug.20noise">live zulip</a>) how best to update the benchmark set to eliminate the noisy cases that are bouncing around. Beyond that, some large improvements to a few individual benchmarks.</p>
<p>The memory usage (<a href="https://perf.rust-lang.org/?start=2021-05-11&amp;end=2021-05-18&amp;absolute=true&amp;stat=max-rss">max-rss</a>) seemed largely flat. Except for an upward trend on <code>tuple-stess</code> that indicates 4% more memory from a week ago.</p>
<p>Triage done by <strong>@pnkfelix</strong>.</p>
<p>5 Regressions, 7 Improvements, 2 Mixed<br>
1 of them in rollups</p>



<a name="239605356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605356">(May 20 2021 at 14:54)</a>:</h4>
<h4>Regressions</h4>
<p>Reachable statics have reachable initializers <a href="https://github.com/rust-lang/rust/issues/84549">#84549</a></p>
<ul>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=747a5d2a5d6693f5e9426524b0dab34eb1587377&amp;end=f8e1e9238077a829ce1ac0cc1f2c7e0eaa4e679d&amp;stat=instructions:u">instruction counts</a> (up to 1.4% on <code>incr-unchanged</code> builds of <code>ctfe-stress-4-opt</code>)</li>
<li><code>ctfe-stress-4-debug</code> also saw a 1.2% regression in its <code>incr-unchanged</code> builds.</li>
<li>Other benchmarks were not significantly impacted.</li>
<li>The two regressions were <a href="https://github.com/rust-lang/rust/pull/84549#issuecomment-832760519">anticipated</a> from a perf run on the PR itself.</li>
</ul>



<a name="239605368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605368">(May 20 2021 at 14:54)</a>:</h4>
<h4>Improvements (summary)</h4>
<ul>
<li>have on_completion record subcycles <a href="https://github.com/rust-lang/rust/issues/85186">#85186</a></li>
<li>Store VariantIdx to distinguish enum variants <a href="https://github.com/rust-lang/rust/issues/85195">#85195</a></li>
<li>Do not allocate or unwind after fork <a href="https://github.com/rust-lang/rust/issues/81858">#81858</a></li>
</ul>



<a name="239605384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605384">(May 20 2021 at 14:54)</a>:</h4>
<h4>Mixed</h4>
<p>BTree: no longer copy keys and values before dropping them <a href="https://github.com/rust-lang/rust/issues/84904">#84904</a></p>
<ul>
<li>Moderate improvement in <a href="https://perf.rust-lang.org/compare.html?start=ba8d7e2cb7cfc87070585c17cd0aa4ae7f091a08&amp;end=5c029265465301fe9cb3960ce2a5da6c99b8dcf2&amp;stat=instructions:u">instruction counts</a> (up to -1.2% on <code>incr-unchanged</code> builds of <code>ctfe-stress-4-check</code> and <code>ctfe-stress-4-opt</code> and <code>ctfe-stress-4-debug</code>)</li>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=ba8d7e2cb7cfc87070585c17cd0aa4ae7f091a08&amp;end=5c029265465301fe9cb3960ce2a5da6c99b8dcf2&amp;stat=instructions:u">instruction counts</a> (up to 1.2% on <code>incr-patched: println</code> builds of <code>cargo-opt</code>)</li>
<li>These changes were <a href="https://github.com/rust-lang/rust/pull/84904#issuecomment-837892302">anticipated</a> from a perf run on the PR itself.</li>
</ul>
<p>rustc_codegen_ssa: only create backend <code>BasicBlock</code>s as-needed. <a href="https://github.com/rust-lang/rust/issues/84993">#84993</a></p>
<ul>
<li>Moderate improvement in <a href="https://perf.rust-lang.org/compare.html?start=fe72845f7bb6a77b9e671e6a4f32fe714962cec4&amp;end=a55748ffe94e71f841c7b1d752779b0db138b342&amp;stat=instructions:u">instruction counts</a> (up to -4.3% on <code>full</code> builds of <code>syn-opt</code>)</li>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=fe72845f7bb6a77b9e671e6a4f32fe714962cec4&amp;end=a55748ffe94e71f841c7b1d752779b0db138b342&amp;stat=instructions:u">instruction counts</a> (up to 1.8% on <code>full</code> builds of <code>deeply-nested-async-check</code>)</li>
<li>The improvement to <code>syn-opt</code> was <a href="https://github.com/rust-lang/rust/pull/84993#issuecomment-841687503">anticipated</a> from perf runs on the PR itself.</li>
<li>The regression on <code>deeply-nested-async-check</code> was not predicted by that run.</li>
</ul>



<a name="239605413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605413">(May 20 2021 at 14:54)</a>:</h4>
<h4>Suspicious Noise (summary)</h4>
<h5>coercions</h5>
<ul>
<li>rustc_driver cleanup <a href="https://github.com/rust-lang/rust/issues/83610">#83610</a></li>
<li>Add auto traits and clone trait migrations for RFC2229 <a href="https://github.com/rust-lang/rust/issues/84730">#84730</a></li>
<li>Provide ExitStatusError <a href="https://github.com/rust-lang/rust/issues/82973">#82973</a></li>
<li>Fix <code>--remap-path-prefix</code> not correctly remapping <code>rust-src</code> component paths and unify handling of path mapping with virtualized paths <a href="https://github.com/rust-lang/rust/issues/83813">#83813</a></li>
<li>Rollup of 5 pull requests <a href="https://github.com/rust-lang/rust/issues/85231">#85231</a></li>
<li>Rollup of 8 pull requests <a href="https://github.com/rust-lang/rust/issues/85414">#85414</a></li>
</ul>
<h5>html5ever</h5>
<ul>
<li>Add support for const operands and options to global_asm! <a href="https://github.com/rust-lang/rust/issues/84107">#84107</a></li>
<li>Update cc crate <a href="https://github.com/rust-lang/rust/issues/85190">#85190</a></li>
</ul>



<a name="239605539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605539">(May 20 2021 at 14:55)</a>:</h4>
<p>(the "suspicious noise" are cases where the benchmarks were bouncing up and down in the results. As noted in summary, it is a sign that we need to revise how they're handled on perf.rlo itself, which we are looking at.)</p>



<a name="239605551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605551">(May 20 2021 at 14:55)</a>:</h4>
<h4>Nags requiring follow up</h4>
<ul>
<li>Double-check whether regression to <code>deeply-nested-async-check</code> from <a href="https://github.com/rust-lang/rust/issues/84993">#84993</a> is noise or something real.</li>
<li>Look into the 4% <code>tuple-stress</code> regression. The first seems like gradual creep, plus a 3% jump that seems to be associated with <a href="https://github.com/rust-lang/rust/pull/84571">#84571</a>, "Parse unnamed fields of struct and union type." (Perhaps its inherent given the nature of that microbenchmark, but some other benchmarks also had their <a href="https://perf.rust-lang.org/compare.html?start=44ec846f4ea68ffa6d06e7d68f078bd3cc59d4ec&amp;end=9964284fed181676300aad693449f5b751e35ff2&amp;stat=max-rss">memory usage impacted</a>.</li>
</ul>



<a name="239605590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605590">(May 20 2021 at 14:55)</a>:</h4>
<h2>Nominated Issues</h2>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-nominated+label%3AT-compiler">T-compiler</a></p>



<a name="239605615"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605615" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605615">(May 20 2021 at 14:55)</a>:</h4>
<ul>
<li>"ICE: unwrap none error in compiler\rustc_mir\src\monomorphize\collector.rs" <a href="https://github.com/rust-lang/rust/issues/85447">rust#85447</a><ul>
<li>opened by "kocsis1david"</li>
<li>ICE on nightly 2021-05-09 on target <code>x86_64-pc-windows-msvc</code>, latest working version was stable 1.51</li>
<li><a href="https://github.com/rust-lang/rust/issues/85447#issuecomment-843614853">bisection comment</a> seems to point to <a href="https://github.com/rust-lang/rust/pull/81172">#81172</a></li>
<li>comment: It seems that this only occurs if the crate-type is <code>lib</code>. Even if I remove a <code>pub</code>, it can compile successfully.</li>
<li><span class="user-mention" data-user-id="219747">@Simon Sapin</span> did <a href="https://github.com/rust-lang/rust/issues/85447#issuecomment-843879967">some reduction and investigation</a>, asks for a bit more insights from someone more familiar with the compiler internals</li>
</ul>
</li>
</ul>



<a name="239605784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605784">(May 20 2021 at 14:56)</a>:</h4>
<p>what priority should we give this bug?</p>



<a name="239605974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239605974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239605974">(May 20 2021 at 14:57)</a>:</h4>
<p>I'm currently thinking P-high, and I will self-assign.</p>



<a name="239606054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606054">(May 20 2021 at 14:58)</a>:</h4>
<p>Maybe try to mentor or something</p>



<a name="239606119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606119">(May 20 2021 at 14:58)</a>:</h4>
<p>next</p>



<a name="239606124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606124">(May 20 2021 at 14:58)</a>:</h4>
<ul>
<li>"error: internal compiler error: unexpected panic: Failed to get crate data for crate21" <a href="https://github.com/rust-lang/rust/issues/85386">#85386</a><ul>
<li>opened by "T0mstone"</li>
<li>ICE on stable 1.52.1, beta 1.53.0-beta.2 and nightly 1.54</li>
<li>issue only occurs when compiling for <code>wasm32-unknown-unknown</code></li>
<li>A reduction is provided <a href="https://github.com/rust-lang/rust/issues/85386#issuecomment-842457820">in this comment</a></li>
<li><a href="https://github.com/rust-lang/rust/issues/85386#issuecomment-842487936">comment</a>: adding a call to <code>extern crate proc_macros</code> makes the issue disappear</li>
<li>perhaps related to <a href="https://github.com/rust-lang/rust/issues/56935">#56935</a>?</li>
<li>Question: would it be useful to have someone closer to the target <code>wasm32-unknown-unknown</code> evaliate this issue? We're not sure of its impact (maybe a P-high?)</li>
</ul>
</li>
</ul>



<a name="239606188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606188">(May 20 2021 at 14:58)</a>:</h4>
<p>I can provide further info on that</p>



<a name="239606225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606225">(May 20 2021 at 14:59)</a>:</h4>
<p>who are stakeholders for <code>wasm32-unknown-unknown</code> ?</p>



<a name="239606260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606260">(May 20 2021 at 14:59)</a>:</h4>
<p>I have to go now</p>



<a name="239606298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606298">(May 20 2021 at 14:59)</a>:</h4>
<p>lets leave this nominated for next week.</p>



<a name="239606323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606323">(May 20 2021 at 14:59)</a>:</h4>
<p>(you all are free to discuss in my absence, of course)</p>



<a name="239606330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606330">(May 20 2021 at 14:59)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-nominated+label%3AT-libs-impl">T-libs-impl</a></p>
<ul>
<li>No nominated issues for <code>T-libs-impl</code> this time.</li>
</ul>
<p><a href="https://github.com/rust-lang/rfcs/issues?q=is%3Aopen+label%3AI-nominated+label%3AT-compiler">RFC</a></p>
<ul>
<li>No nominated RFCs for <code>T-compiler</code> this time.</li>
</ul>



<a name="239606364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606364">(May 20 2021 at 15:00)</a>:</h4>
<p>Just to finish properly: Thanks to everyone in <span class="user-group-mention" data-user-group-id="897">@T-compiler/meeting</span> for attending!</p>



<a name="239606741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606741">(May 20 2021 at 15:01)</a>:</h4>
<p>So, any comments on <a href="https://github.com/rust-lang/rust/issues/85386">#85386</a>?<br>
( I can always gather here feedback and paste them in next week's agenda)</p>



<a name="239606746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239606746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239606746">(May 20 2021 at 15:01)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/56935">https://github.com/rust-lang/rust/issues/56935</a><br>
is a known bug with cross compilation of macros</p>
<p>what seems to cause the ice instead of an error (in a subset of test) is the import of two proc macros. When only one proc macro is imported, the compilation fails with found crates with colliding StableCrateId values.</p>



<a name="239607184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607184">(May 20 2021 at 15:04)</a>:</h4>
<blockquote>
<p>at this point I guess if no one else speaks up, we should go ahead and let this PR land</p>
</blockquote>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span>  Oh I thought this was waiting on me</p>



<a name="239607189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607189">(May 20 2021 at 15:04)</a>:</h4>
<p>Re: <a href="https://github.com/rust-lang/rust/issues/85386">#85386</a> I think there are two questions:</p>
<ul>
<li>whether this impacts also other targets</li>
<li>and how serious is that (I tend to assign a <code>P-high</code> since the code to reproduce seems simple)</li>
</ul>



<a name="239607214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607214">(May 20 2021 at 15:04)</a>:</h4>
<p>I have some half formed opinions I need to write up</p>



<a name="239607317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607317">(May 20 2021 at 15:05)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239606225">said</a>:</p>
<blockquote>
<p>who are stakeholders for <code>wasm32-unknown-unknown</code> ?</p>
</blockquote>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> been doing a ton of work on wasm</p>



<a name="239607398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607398">(May 20 2021 at 15:05)</a>:</h4>
<p>and I + <span class="user-mention" data-user-id="133247">@bjorn3</span> been reviewing a lot of it.</p>



<a name="239607510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607510">(May 20 2021 at 15:06)</a>:</h4>
<p>thanks for the info, I'll mention them both in the issue :-)</p>



<a name="239607583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607583">(May 20 2021 at 15:06)</a>:</h4>
<p>As far as I know this also impacts other cross compilation targets and is caused by the crate resolution<br>
For some reason the crate is imported twice with different ids</p>



<a name="239607688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607688">(May 20 2021 at 15:07)</a>:</h4>
<p>when using the explicit  <code>extern crate</code> the issue goes away</p>



<a name="239607700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607700">(May 20 2021 at 15:07)</a>:</h4>
<p><span class="user-mention" data-user-id="412622">@Dennis Kobert(TrueDoctor)</span> that sounds like the #5xxxx issue that was linked somewhere</p>



<a name="239607728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607728">(May 20 2021 at 15:07)</a>:</h4>
<p>It's a known bug in resolve</p>



<a name="239607888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607888">(May 20 2021 at 15:08)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/56935">https://github.com/rust-lang/rust/issues/56935</a><br>
yes, this issue</p>



<a name="239607952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239607952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239607952">(May 20 2021 at 15:08)</a>:</h4>
<p>Cool, so I think the wasm one should be closed as a duplicate</p>



<a name="239608072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239608072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239608072">(May 20 2021 at 15:09)</a>:</h4>
<p>The scenario described in there currently causes an error and not an ICE though, so there seem to have been some changes made</p>



<a name="239608167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239608167" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239608167">(May 20 2021 at 15:09)</a>:</h4>
<p><code>pub use proc_macros::{ToDiscriminant, TransitiveChild};</code> -&gt; ICE<br>
<code>pub use proc_macros::{ToDiscriminant};</code> -&gt; Error</p>



<a name="239608288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239608288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239608288">(May 20 2021 at 15:10)</a>:</h4>
<p>I also added a comment to the #5xx issue</p>



<a name="239608365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239608365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239608365">(May 20 2021 at 15:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202021-05-20.20.2354818/near/239607952">said</a>:</p>
<blockquote>
<p>Cool, so I think the wasm one should be closed as a duplicate</p>
</blockquote>
<p>I did get a second different ICE while debugging this</p>



<a name="239608610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239608610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239608610">(May 20 2021 at 15:12)</a>:</h4>
<div class="codehilite"><pre><span></span><code>error: internal compiler error: expansion entered force mode without producing any errors
 --&gt; core/editor/src/communication/document_action_handler.rs:7:1
  |
7 | #[impl_message(Message, Document)]
  | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |
  = note: delayed at compiler/rustc_expand/src/expand.rs:450:34

thread &#39;rustc&#39; panicked at &#39;no errors encountered even though `delay_span_bug` issued&#39;, compiler/rustc_errors/src/lib.rs:1013:13
stack backtrace:
</code></pre></div>
<p>Not sure if that is just noise though</p>



<a name="239608794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/238009-t-compiler/meetings/topic/%5Bweekly%5D%202021-05-20%20%2354818/near/239608794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dennis Kobert(TrueDoctor) <a href="https://zulip-archive.rust-lang.org/stream/238009-t-compiler/meetings/topic/.5Bweekly.5D.202021-05-20.20.2354818.html#239608794">(May 20 2021 at 15:13)</a>:</h4>
<p>But feel free to close the issue, this is all well above my league xD</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
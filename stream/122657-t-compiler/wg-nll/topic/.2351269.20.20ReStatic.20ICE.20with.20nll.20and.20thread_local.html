<html>
<head><meta charset="utf-8"><title>#51269  ReStatic ICE with nll and thread_local · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html">#51269  ReStatic ICE with nll and thread_local</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="134194772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134194772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134194772">(Sep 18 2018 at 21:27)</a>:</h4>
<p>so we decided to defer this... what is needed is someone to add a regression test I guess. Pretty easy, I suppose.</p>
<p>I am wondering if it is worth trying to make a more "comprehensive" set of regression tests around <code>static</code> and <code>static mut</code>. We definitely already have some, I suppose. But obviously at least one check-box on the matrix was not included.</p>



<a name="134194812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134194812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134194812">(Sep 18 2018 at 21:28)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> simple task but it'd be good to get it done</p>



<a name="134195165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134195165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134195165">(Sep 18 2018 at 21:34)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="134262880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134262880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134262880">(Sep 19 2018 at 19:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> about this task</p>



<a name="134262923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134262923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134262923">(Sep 19 2018 at 19:16)</a>:</h4>
<p>I see in the issue there are a bunch of possible tests</p>



<a name="134262931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134262931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134262931">(Sep 19 2018 at 19:16)</a>:</h4>
<p>is there one that sounds better to you?</p>



<a name="134263457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134263457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134263457">(Sep 19 2018 at 19:27)</a>:</h4>
<p>well, we could start with the original test in the issue</p>
<div class="codehilite"><pre><span></span><span class="cp">#![feature(nll)]</span><span class="w"></span>
<span class="cp">#![feature(thread_local)]</span><span class="w"></span>

<span class="cp">#[thread_local]</span><span class="w"> </span><span class="k">static</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="n">X1</span>:<span class="kt">u64</span> <span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"></span>

<span class="k">struct</span> <span class="nc">S1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">a</span>:<span class="kp">&amp;</span><span class="nb">&#39;static</span><span class="w"> </span><span class="k">mut</span><span class="w"> </span><span class="kt">u64</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="n">S1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">new</span><span class="p">(</span><span class="n">_x</span>:<span class="kt">u64</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">S1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">S1</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">a</span>:<span class="nc">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="n">X1</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">S1</span>::<span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="n">a</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>



<a name="134263464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134263464" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134263464">(Sep 19 2018 at 19:27)</a>:</h4>
<p>that's the minimum we should add I suppose</p>



<a name="134263515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134263515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134263515">(Sep 19 2018 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> it should be a "sibling" to this existing test, I think:</p>
<div class="codehilite"><pre><span></span>src/test/ui/borrowck/borrowck-thread-local-static-borrow-outlives-fn.rs
</pre></div>



<a name="134263523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134263523" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134263523">(Sep 19 2018 at 19:28)</a>:</h4>
<p>that one tests <strong>non</strong>-mut</p>



<a name="134267417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267417">(Sep 19 2018 at 20:41)</a>:</h4>
<p>ok</p>



<a name="134267433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267433">(Sep 19 2018 at 20:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> so this should compile on nll?</p>



<a name="134267487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267487">(Sep 19 2018 at 20:42)</a>:</h4>
<p>and in that case, don't remember when something compiles what to do on <code>ui</code> tests</p>



<a name="134267496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267496">(Sep 19 2018 at 20:42)</a>:</h4>
<p>or should I put it on <code>run-pass</code>?</p>



<a name="134267513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267513">(Sep 19 2018 at 20:42)</a>:</h4>
<p>you should put it in <code>ui/nll</code> or whatever I think</p>



<a name="134267517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267517" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267517">(Sep 19 2018 at 20:42)</a>:</h4>
<p>with a comment like <code>// run-pass</code></p>



<a name="134267520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267520">(Sep 19 2018 at 20:42)</a>:</h4>
<p>however, we should also add some explanatory comment</p>



<a name="134267524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267524">(Sep 19 2018 at 20:43)</a>:</h4>
<p>in particular, it passes <em>now</em> but it's not clear that it should</p>



<a name="134267531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267531">(Sep 19 2018 at 20:43)</a>:</h4>
<p>I should file an issue and you can put <code>FIXME(#12345)</code></p>



<a name="134267534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267534">(Sep 19 2018 at 20:43)</a>:</h4>
<p>let me write that issue :)</p>



<a name="134267549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267549">(Sep 19 2018 at 20:43)</a>:</h4>
<p>ahh right</p>



<a name="134267643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267643">(Sep 19 2018 at 20:45)</a>:</h4>
<p>done</p>



<a name="134267650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267650">(Sep 19 2018 at 20:45)</a>:</h4>
<p>well need to write a comment</p>



<a name="134267943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267943">(Sep 19 2018 at 20:50)</a>:</h4>
<p>you can tag it as FIXME(<a href="https://github.com/rust-lang/rust/issues/54366" target="_blank" title="https://github.com/rust-lang/rust/issues/54366">#54366</a>) <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span></p>



<a name="134267947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134267947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134267947">(Sep 19 2018 at 20:50)</a>:</h4>
<p>(just filed)</p>



<a name="134268024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268024">(Sep 19 2018 at 20:52)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="134268065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268065">(Sep 19 2018 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> should I reuse some text from the issue?</p>



<a name="134268069"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268069" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268069">(Sep 19 2018 at 20:52)</a>:</h4>
<p>for the comment, I meant</p>



<a name="134268091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268091">(Sep 19 2018 at 20:52)</a>:</h4>
<p>if you like. Probably don't have to copy too much. Maybe something like:</p>
<p>FIXME(<a href="https://github.com/rust-lang/rust/issues/54366" target="_blank" title="https://github.com/rust-lang/rust/issues/54366">#54366</a>) — We probably shouldn't allow <code>#[thread_local] static mut</code> to get a <code>'static</code> lifetime.</p>



<a name="134268282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268282">(Sep 19 2018 at 20:56)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/54367" target="_blank" title="https://github.com/rust-lang/rust/pull/54367">https://github.com/rust-lang/rust/pull/54367</a></p>



<a name="134268353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268353">(Sep 19 2018 at 20:57)</a>:</h4>
<p>ouch, I've added a Fixes statement</p>



<a name="134268376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268376">(Sep 19 2018 at 20:57)</a>:</h4>
<p>you want me to add FIXME(<a href="https://github.com/rust-lang/rust/issues/54366" target="_blank" title="https://github.com/rust-lang/rust/issues/54366">#54366</a>), right?</p>



<a name="134268380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268380">(Sep 19 2018 at 20:57)</a>:</h4>
<p>so it just references that issue</p>



<a name="134268393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268393">(Sep 19 2018 at 20:57)</a>:</h4>
<p>thought you were going to create an add regression test issue</p>



<a name="134268463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268463">(Sep 19 2018 at 20:58)</a>:</h4>
<p>updated to FIXME :)</p>



<a name="134268812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268812" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268812">(Sep 19 2018 at 21:04)</a>:</h4>
<blockquote>
<p>thought you were going to create an add regression test issue</p>
</blockquote>
<p>yeah well I suspect we have a lot of the tests I would want already but...</p>



<a name="134268822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134268822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134268822">(Sep 19 2018 at 21:05)</a>:</h4>
<p>at least we have the one around the lifetime of <code>#[thread_local] static</code></p>



<a name="134269242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2351269%20%20ReStatic%20ICE%20with%20nll%20and%20thread_local/near/134269242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2351269.20.20ReStatic.20ICE.20with.20nll.20and.20thread_local.html#134269242">(Sep 19 2018 at 21:13)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
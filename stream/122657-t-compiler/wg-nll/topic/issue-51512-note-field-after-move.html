<html>
<head><meta charset="utf-8"><title>issue-51512-note-field-after-move · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html">issue-51512-note-field-after-move</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="128386519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128386519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128386519">(Jun 20 2018 at 22:06)</a>:</h4>
<p>about <a href="https://github.com/rust-lang/rust/issues/51512" target="_blank" title="https://github.com/rust-lang/rust/issues/51512">https://github.com/rust-lang/rust/issues/51512</a></p>



<a name="128386536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128386536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128386536">(Jun 20 2018 at 22:07)</a>:</h4>
<p>will probably tackle it tomorrow, but just read it and I have a quick question</p>



<a name="128386543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128386543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128386543">(Jun 20 2018 at 22:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> you mentioned moi and from there we can get the place</p>



<a name="128386599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128386599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128386599">(Jun 20 2018 at 22:08)</a>:</h4>
<p>what I don't follow is that we get the moi from mois, so potentially we would get a lot of places, which one is the one we should use?</p>



<a name="128386690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128386690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128386690">(Jun 20 2018 at 22:10)</a>:</h4>
<p>we would like to show more than one note per place?</p>



<a name="128387126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128387126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128387126">(Jun 20 2018 at 22:23)</a>:</h4>
<p>I think this last phrase was confusing</p>



<a name="128387127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128387127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128387127">(Jun 20 2018 at 22:23)</a>:</h4>
<p>I meant, more than one note, one per place, do we want that?</p>



<a name="128391703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128391703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128391703">(Jun 21 2018 at 00:23)</a>:</h4>
<blockquote>
<p>what I don't follow is that we get the moi from mois, so potentially we would get a lot of places, which one is the one we should use?</p>
</blockquote>
<p>probably all of them, or maybe just the first — basically, there could be many prior points that have moved the value</p>



<a name="128391748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128391748" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128391748">(Jun 21 2018 at 00:24)</a>:</h4>
<p>e.g.,</p>
<div class="codehilite"><pre><span></span><span class="kd">let</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec</span><span class="o">!</span><span class="p">[];</span><span class="w"></span>
<span class="k">if</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">drop</span><span class="p">(</span><span class="n">v</span><span class="p">;)</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">drop</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="k">use</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"></span>
</pre></div>



<a name="128391769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128391769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128391769">(Jun 21 2018 at 00:24)</a>:</h4>
<p>here there are two <code>drop(v)</code> statements and either could have done it</p>



<a name="128391778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128391778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128391778">(Jun 21 2018 at 00:24)</a>:</h4>
<p>it seems reasonable to just show a label and info for the first thing in <code>mois</code> though</p>



<a name="128391779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128391779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128391779">(Jun 21 2018 at 00:24)</a>:</h4>
<p>any one would do</p>



<a name="128392172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128392172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128392172">(Jun 21 2018 at 00:34)</a>:</h4>
<p>ok</p>



<a name="128392173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128392173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128392173">(Jun 21 2018 at 00:34)</a>:</h4>
<p>will try with the first</p>



<a name="128397560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397560" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397560">(Jun 21 2018 at 03:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> to start discussing <a href="https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6" target="_blank" title="https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6">https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6</a></p>



<a name="128397565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397565">(Jun 21 2018 at 03:32)</a>:</h4>
<p>I need to change the stderr modifications better</p>



<a name="128397655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397655">(Jun 21 2018 at 03:34)</a>:</h4>
<p>it's a bit late here but giving this a quick glance</p>



<a name="128397658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397658">(Jun 21 2018 at 03:34)</a>:</h4>
<p>this src/test/ui/borrowck/borrowck-box-insensitivity.nll.stderr seems correct now</p>



<a name="128397673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397673">(Jun 21 2018 at 03:35)</a>:</h4>
<p>unsure about this src/test/ui/borrowck/issue-41962.stderr looks weird to me</p>



<a name="128397723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397723">(Jun 21 2018 at 03:37)</a>:</h4>
<p>and this one src/test/ui/moves-based-on-type-match-bindings.nll.stderr seems correct now</p>



<a name="128397725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128397725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128397725">(Jun 21 2018 at 03:37)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> ttyt</p>



<a name="128408363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128408363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128408363">(Jun 21 2018 at 09:16)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> <a href="https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6#r29446019" target="_blank" title="https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6#r29446019">take a look at my question here</a></p>



<a name="128408374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128408374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128408374">(Jun 21 2018 at 09:16)</a>:</h4>
<p>actually i'll just paste it in zulip:</p>



<a name="128408380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128408380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128408380">(Jun 21 2018 at 09:17)</a>:</h4>
<p>unrelated but I do wonder if we should break out of this loop after the first entry...</p>
<p>The following example on stable:</p>
<div class="codehilite"><pre><span></span><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">v</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">u32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">vec</span><span class="o">!</span><span class="p">[];</span><span class="w"></span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">drop</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">drop</span><span class="p">(</span><span class="n">v</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="n">v</span><span class="p">.</span><span class="n">len</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</pre></div>


<p>prints</p>
<div class="codehilite"><pre><span></span>error[E0382]: use of moved value: `v`
  --&gt; src/main.rs:10:5
   |
5  |         drop(v);
   |              - value moved here
...
10 |     v.len();
   |     ^ value used here after move
   |
   = note: move occurs because `v` has type `std::vec::Vec&lt;u32&gt;`, which does not implement the `Copy` trait
</pre></div>


<p>with NLL it prints:</p>
<div class="codehilite"><pre><span></span>error[E0382]: borrow of moved value: `v`
  --&gt; src/main.rs:12:5
   |
7  |         drop(v);
   |              - value moved here
8  |     } else {
9  |         drop(v);
   |              - value moved here
...
12 |     v.len();
   |     ^ value borrowed here after move
   |
   = note: move occurs because `v` has type `std::vec::Vec&lt;u32&gt;`, which does not implement the `Copy` trait
</pre></div>


<p>I'm not sure it's an improvement to print both.</p>



<a name="128419707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128419707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128419707">(Jun 21 2018 at 14:13)</a>:</h4>
<div class="codehilite"><pre><span></span>                if moved_lp.has_downcast() {
                    &quot;the value&quot;.to_string()
                } else {
                    format!(&quot;`{}`&quot;, self.loan_path_to_string(moved_lp))
                },
</pre></div>



<a name="128419711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128419711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128419711">(Jun 21 2018 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> this ^^^ is what you're talking about?</p>



<a name="128419974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128419974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128419974">(Jun 21 2018 at 14:19)</a>:</h4>
<p>sounds roughly right; I think we had some existing function for this too? I have to look around</p>



<a name="128419975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128419975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128419975">(Jun 21 2018 at 14:19)</a>:</h4>
<p>it might cover a few more cases</p>



<a name="128422510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128422510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128422510">(Jun 21 2018 at 15:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> ast code ends calling this <a href="https://github.com/rust-lang/rust/blob/master/src/librustc_borrowck/borrowck/mod.rs#L1351" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/librustc_borrowck/borrowck/mod.rs#L1351">https://github.com/rust-lang/rust/blob/master/src/librustc_borrowck/borrowck/mod.rs#L1351</a></p>



<a name="128423463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128423463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128423463">(Jun 21 2018 at 15:27)</a>:</h4>
<p>right, <code>librustc_borrowck</code> is the old borrow checker</p>



<a name="128423694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128423694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128423694">(Jun 21 2018 at 15:32)</a>:</h4>
<p>yes, but I meant, should we do something similar?</p>



<a name="128423698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128423698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128423698">(Jun 21 2018 at 15:32)</a>:</h4>
<p>all that code is in the old borrowck</p>



<a name="128423999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128423999" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128423999">(Jun 21 2018 at 15:39)</a>:</h4>
<p>we .. are doing something similar, aren't we?</p>



<a name="128424000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424000">(Jun 21 2018 at 15:40)</a>:</h4>
<p>do you mean, should we call the same helper fn?</p>



<a name="128424052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424052">(Jun 21 2018 at 15:40)</a>:</h4>
<p>oh I guess I see your question</p>



<a name="128424055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424055">(Jun 21 2018 at 15:40)</a>:</h4>
<p>well we don't have those data structures</p>



<a name="128424060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424060">(Jun 21 2018 at 15:40)</a>:</h4>
<p>let me look and see, I feel like there was a fn for this</p>



<a name="128424282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424282">(Jun 21 2018 at 15:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> so I was thinking of <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_mir/borrow_check/struct.MirBorrowckCtxt.html#method.describe_place" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_mir/borrow_check/struct.MirBorrowckCtxt.html#method.describe_place"><code>describe_place</code></a></p>



<a name="128424292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424292">(Jun 21 2018 at 15:45)</a>:</h4>
<p>however</p>



<a name="128424298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424298">(Jun 21 2018 at 15:45)</a>:</h4>
<p>it doesn't quite do what I think it should</p>



<a name="128424349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424349">(Jun 21 2018 at 15:46)</a>:</h4>
<p>in particular, <code>Downcast</code> doesn't seem to return <code>Err</code></p>



<a name="128424351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424351" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424351">(Jun 21 2018 at 15:46)</a>:</h4>
<p>but I think that's a bug in <code>describe_place</code></p>



<a name="128424365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424365">(Jun 21 2018 at 15:46)</a>:</h4>
<p>yeah, we are already calling <code>describe_place</code> in the code I've committed</p>



<a name="128424371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424371" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424371">(Jun 21 2018 at 15:46)</a>:</h4>
<p>yeah so maybe the bug is more <em>that</em> code</p>



<a name="128424392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424392">(Jun 21 2018 at 15:47)</a>:</h4>
<p>in particular <a href="https://doc.rust-lang.org/nightly/nightly-rustc/src/rustc_mir/borrow_check/error_reporting.rs.html#698" target="_blank" title="https://doc.rust-lang.org/nightly/nightly-rustc/src/rustc_mir/borrow_check/error_reporting.rs.html#698">this match arm seems wrong</a></p>



<a name="128424395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424395">(Jun 21 2018 at 15:47)</a>:</h4>
<p>I think it should return <code>Err</code></p>



<a name="128424478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128424478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128424478">(Jun 21 2018 at 15:48)</a>:</h4>
<p>I see</p>



<a name="128426055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128426055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128426055">(Jun 21 2018 at 16:20)</a>:</h4>
<p>(deleted)</p>



<a name="128427386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427386">(Jun 21 2018 at 16:53)</a>:</h4>
<p>did you try that?</p>



<a name="128427635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427635">(Jun 21 2018 at 16:58)</a>:</h4>
<p>let me paste the output</p>



<a name="128427641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427641">(Jun 21 2018 at 16:58)</a>:</h4>
<p><a href="https://gist.github.com/spastorino/6f29aa8772c5de988df8d73190233dee" target="_blank" title="https://gist.github.com/spastorino/6f29aa8772c5de988df8d73190233dee">https://gist.github.com/spastorino/6f29aa8772c5de988df8d73190233dee</a></p>



<a name="128427644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427644">(Jun 21 2018 at 16:58)</a>:</h4>
<p>well ... forget about the ones that are ICEing</p>



<a name="128427646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427646">(Jun 21 2018 at 16:58)</a>:</h4>
<p>need to ignore those</p>



<a name="128427655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427655">(Jun 21 2018 at 16:59)</a>:</h4>
<p>is that what you want?</p>



<a name="128427665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427665">(Jun 21 2018 at 16:59)</a>:</h4>
<div class="codehilite"><pre><span></span>-error[E0382]: use of moved value: `maybe.0` (Mir)
+error[E0382]: use of moved value: `_` (Mir)
</pre></div>



<a name="128427666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427666">(Jun 21 2018 at 16:59)</a>:</h4>
<p>is weird</p>



<a name="128427779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427779">(Jun 21 2018 at 17:01)</a>:</h4>
<p>that is most certainly not what we want :P</p>



<a name="128427835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427835">(Jun 21 2018 at 17:02)</a>:</h4>
<p>I would expect just "use of moved value" I think</p>



<a name="128427836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427836">(Jun 21 2018 at 17:02)</a>:</h4>
<p>:P</p>



<a name="128427847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427847">(Jun 21 2018 at 17:03)</a>:</h4>
<p>unsure why is that happening</p>



<a name="128427850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427850">(Jun 21 2018 at 17:03)</a>:</h4>
<p>let me investigate</p>



<a name="128427933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427933">(Jun 21 2018 at 17:04)</a>:</h4>
<p>so ...</p>



<a name="128427937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427937">(Jun 21 2018 at 17:04)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rust1 (error-note-field-after-move)]$ rustc +stage1 src/test/ui/borrowck/issue-41962.rs
warning: unused variable: `thing`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:21
   |
17 |         if let Some(thing) = maybe {
   |                     ^^^^^ help: consider using `_thing` instead
   |
   = note: #[warn(unused_variables)] on by default

error[E0382]: use of partially moved value: `maybe`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:30
   |
17 |         if let Some(thing) = maybe {
   |                     -----    ^^^^^ value used here after move
   |                     |
   |                     value moved here
   |
   = note: move occurs because the value has type `std::vec::Vec&lt;bool&gt;`, which does not implement the `Copy` trait

error[E0382]: use of moved value: `(maybe as std::prelude::v1::Some).0`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:21
   |
17 |         if let Some(thing) = maybe {
   |                     ^^^^^ value moved here in previous iteration of loop
   |
   = note: move occurs because the value has type `std::vec::Vec&lt;bool&gt;`, which does not implement the `Copy` trait

error: aborting due to 2 previous errors

For more information about this error, try `rustc --explain E0382`.
</pre></div>



<a name="128427943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427943">(Jun 21 2018 at 17:04)</a>:</h4>
<p>vs</p>



<a name="128427946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427946">(Jun 21 2018 at 17:04)</a>:</h4>
<div class="codehilite"><pre><span></span>[santiago@archlinux rust1 (error-note-field-after-move)]$ rustc +stage1 -Zborrowck=mir -Ztwo-phase-borrows src/test/ui/borrowck/issue-41962.rs
warning: unused variable: `thing`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:21
   |
17 |         if let Some(thing) = maybe {
   |                     ^^^^^ help: consider using `_thing` instead
   |
   = note: #[warn(unused_variables)] on by default

error[E0382]: use of moved value: `maybe`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:9
   |
17 |           if let Some(thing) = maybe {
   |           ^           ----- value moved here
   |  _________|
   | |
18 | |         }
   | |_________^ value used here after move
   |
   = note: move occurs because value has type `std::vec::Vec&lt;bool&gt;`, which does not implement the `Copy` trait

error[E0382]: borrow of moved value: `maybe`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:9
   |
17 |           if let Some(thing) = maybe {
   |           ^           ----- value moved here
   |  _________|
   | |
18 | |         }
   | |_________^ value borrowed here after move
   |
   = note: move occurs because value has type `std::vec::Vec&lt;bool&gt;`, which does not implement the `Copy` trait

error[E0382]: use of moved value: `maybe`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:16
   |
17 |         if let Some(thing) = maybe {
   |                ^^^^^-----^
   |                |    |
   |                |    value moved here
   |                value used here after move
   |
   = note: move occurs because value has type `std::vec::Vec&lt;bool&gt;`, which does not implement the `Copy` trait

error[E0382]: use of moved value: `_`
  --&gt; src/test/ui/borrowck/issue-41962.rs:17:21
   |
17 |         if let Some(thing) = maybe {
   |                     ^^^^^ value moved here in previous iteration of loop
   |
   = note: move occurs because value has type `std::vec::Vec&lt;bool&gt;`, which does not implement the `Copy` trait

error: aborting due to 4 previous errors

For more information about this error, try `rustc --explain E0382`.
</pre></div>



<a name="128427965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427965">(Jun 21 2018 at 17:05)</a>:</h4>
<p>NLL error displaying all that it's very confused</p>



<a name="128427969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427969">(Jun 21 2018 at 17:05)</a>:</h4>
<p>I think, I'm with you about just showing the first one</p>



<a name="128427971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427971">(Jun 21 2018 at 17:05)</a>:</h4>
<p>ok I'm prety confused</p>



<a name="128427974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427974">(Jun 21 2018 at 17:05)</a>:</h4>
<p>so, when you run in NLL mode,</p>



<a name="128427975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427975" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427975">(Jun 21 2018 at 17:05)</a>:</h4>
<p>anyway ... that's for another PR</p>



<a name="128427977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427977">(Jun 21 2018 at 17:05)</a>:</h4>
<p>it dumps 4 errors?</p>



<a name="128427979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427979">(Jun 21 2018 at 17:05)</a>:</h4>
<p>that's the first problem I guess</p>



<a name="128427980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427980">(Jun 21 2018 at 17:05)</a>:</h4>
<p>yes</p>



<a name="128427983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427983">(Jun 21 2018 at 17:05)</a>:</h4>
<p>I see, ok</p>



<a name="128427985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427985">(Jun 21 2018 at 17:05)</a>:</h4>
<p>yeah and there's a mix of spans</p>



<a name="128427988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128427988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128427988">(Jun 21 2018 at 17:05)</a>:</h4>
<p>some of which are just not great</p>



<a name="128428029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428029">(Jun 21 2018 at 17:06)</a>:</h4>
<p>well I agree that would be good to handle in follow up PRs</p>



<a name="128428037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428037">(Jun 21 2018 at 17:06)</a>:</h4>
<p>would you just get the first one?</p>



<a name="128428063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428063">(Jun 21 2018 at 17:07)</a>:</h4>
<p>probably</p>



<a name="128428064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428064">(Jun 21 2018 at 17:07)</a>:</h4>
<p>ideally with a different span</p>



<a name="128428068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428068">(Jun 21 2018 at 17:07)</a>:</h4>
<p>it's not great that we highlight the <code>if let</code></p>



<a name="128428073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428073">(Jun 21 2018 at 17:08)</a>:</h4>
<p>that will probably have to be tweaked in the MIR construction</p>



<a name="128428147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428147">(Jun 21 2018 at 17:09)</a>:</h4>
<p>I guess the problem happens here <a href="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/util/borrowck_errors.rs#L364" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/util/borrowck_errors.rs#L364">https://github.com/rust-lang/rust/blob/master/src/librustc_mir/util/borrowck_errors.rs#L364</a></p>



<a name="128428163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428163">(Jun 21 2018 at 17:09)</a>:</h4>
<p>moved_path is _</p>



<a name="128428225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428225">(Jun 21 2018 at 17:10)</a>:</h4>
<p>ahh I see</p>



<a name="128428240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428240">(Jun 21 2018 at 17:11)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/error_reporting.rs#L63" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/error_reporting.rs#L63">https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/error_reporting.rs#L63</a></p>



<a name="128428258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428258">(Jun 21 2018 at 17:11)</a>:</h4>
<p>should we use value there?</p>



<a name="128428267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128428267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128428267">(Jun 21 2018 at 17:11)</a>:</h4>
<p>ok, let me try something</p>



<a name="128430119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430119">(Jun 21 2018 at 17:51)</a>:</h4>
<blockquote>
<p>should we use value there?</p>
</blockquote>
<p>I think that fn should probably take an <code>Option</code>, so we can leave off the <code>:</code> etc altogether</p>



<a name="128430166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430166">(Jun 21 2018 at 17:52)</a>:</h4>
<p>that's exactly what I did</p>



<a name="128430174"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430174" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430174">(Jun 21 2018 at 17:52)</a>:</h4>
<p>I'm just compiling this thing</p>



<a name="128430177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430177">(Jun 21 2018 at 17:52)</a>:</h4>
<p>gonna send a diff when this finishes</p>



<a name="128430202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430202">(Jun 21 2018 at 17:53)</a>:</h4>
<p>this ...</p>



<a name="128430205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430205" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430205">(Jun 21 2018 at 17:53)</a>:</h4>
<div class="codehilite"><pre><span></span>diff --git a/src/librustc_borrowck/borrowck/mod.rs b/src/librustc_borrowck/borrowck/mod.rs
index 684fd10c8c..500903c1c3 100644
--- a/src/librustc_borrowck/borrowck/mod.rs
+++ b/src/librustc_borrowck/borrowck/mod.rs
@@ -680,7 +680,7 @@ impl&lt;&#39;a, &#39;tcx&gt; BorrowckCtxt&lt;&#39;a, &#39;tcx&gt; {
                 let mut err = self.cannot_act_on_moved_value(use_span,
                                                              verb,
                                                              msg,
-                                                             &amp;format!(&quot;{}&quot;, nl),
+                                                             Some(format!(&quot;{}&quot;, nl)),
                                                              Origin::Ast);
                 let need_note = match lp.ty.sty {
                     ty::TypeVariants::TyClosure(id, _) =&gt; {
diff --git a/src/librustc_mir/borrow_check/error_reporting.rs b/src/librustc_mir/borrow_check/error_reporting.rs
index 349e4ff933..0782d19d94 100644
--- a/src/librustc_mir/borrow_check/error_reporting.rs
+++ b/src/librustc_mir/borrow_check/error_reporting.rs
@@ -72,7 +72,7 @@ impl&lt;&#39;cx, &#39;gcx, &#39;tcx&gt; MirBorrowckCtxt&lt;&#39;cx, &#39;gcx, &#39;tcx&gt; {
                 span,
                 desired_action.as_noun(),
                 msg,
-                &amp;self.describe_place(place).unwrap_or(&quot;_&quot;.to_owned()),
+                self.describe_place(&amp;place),
                 Origin::Mir,
             );

@@ -706,6 +706,7 @@ impl&lt;&#39;cx, &#39;gcx, &#39;tcx&gt; MirBorrowckCtxt&lt;&#39;cx, &#39;gcx, &#39;tcx&gt; {
                     }
                     ProjectionElem::Downcast(..) =&gt; {
                         self.append_place_to_string(&amp;proj.base, buf, autoderef)?;
+                        return Err(());
                     }
                     ProjectionElem::Field(field, _ty) =&gt; {
                         autoderef = true;
diff --git a/src/librustc_mir/util/borrowck_errors.rs b/src/librustc_mir/util/borrowck_errors.rs
index d01b90ad26..a6dd32ce23 100644
--- a/src/librustc_mir/util/borrowck_errors.rs
+++ b/src/librustc_mir/util/borrowck_errors.rs
@@ -356,12 +356,14 @@ pub trait BorrowckErrors&lt;&#39;cx&gt;: Sized + Copy {
                                  use_span: Span,
                                  verb: &amp;str,
                                  optional_adverb_for_moved: &amp;str,
-                                 moved_path: &amp;str,
+                                 moved_path: Option&lt;String&gt;,
                                  o: Origin)
                                  -&gt; DiagnosticBuilder&lt;&#39;cx&gt;
     {
+        let moved_path = moved_path.map(|mp| format!(&quot;: `{}`&quot;, mp)).unwrap_or(&quot;&quot;.to_owned());
+
         let err = struct_span_err!(self, use_span, E0382,
-                                   &quot;{} of {}moved value: `{}`{OGN}&quot;,
+                                   &quot;{} of {}moved value{}{OGN}&quot;,
                                    verb, optional_adverb_for_moved, moved_path, OGN=o);

         self.cancel_if_wrong_origin(err, o)
</pre></div>



<a name="128430206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430206">(Jun 21 2018 at 17:53)</a>:</h4>
<p>is what I have for now</p>



<a name="128430213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430213" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430213">(Jun 21 2018 at 17:53)</a>:</h4>
<p>and I guess now it's right</p>



<a name="128430214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430214">(Jun 21 2018 at 17:53)</a>:</h4>
<p>let's see :)</p>



<a name="128430479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128430479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128430479">(Jun 21 2018 at 17:58)</a>:</h4>
<p>looks good :)</p>



<a name="128431135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431135">(Jun 21 2018 at 18:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/pull/51688" target="_blank" title="https://github.com/rust-lang/rust/pull/51688">https://github.com/rust-lang/rust/pull/51688</a></p>



<a name="128431468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431468">(Jun 21 2018 at 18:17)</a>:</h4>
<p>review: <a href="https://github.com/rust-lang/rust/pull/51688#pullrequestreview-130936085" target="_blank" title="https://github.com/rust-lang/rust/pull/51688#pullrequestreview-130936085">https://github.com/rust-lang/rust/pull/51688#pullrequestreview-130936085</a></p>



<a name="128431470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431470">(Jun 21 2018 at 18:17)</a>:</h4>
<p>had a question</p>



<a name="128431553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431553">(Jun 21 2018 at 18:18)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/51688#discussion_r197231795" target="_blank" title="https://github.com/rust-lang/rust/pull/51688#discussion_r197231795">https://github.com/rust-lang/rust/pull/51688#discussion_r197231795</a></p>



<a name="128431743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431743">(Jun 21 2018 at 18:22)</a>:</h4>
<p>ok, r+ -- so, we can now talk about the duplicate problems</p>



<a name="128431749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431749">(Jun 21 2018 at 18:22)</a>:</h4>
<p>I think just issuing the first error is what we want</p>



<a name="128431751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431751">(Jun 21 2018 at 18:22)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="128431760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431760">(Jun 21 2018 at 18:22)</a>:</h4>
<p>but it sounded to me like you thought this might arise from just not iterating over all the <code>mois</code> elements or something</p>



<a name="128431763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431763">(Jun 21 2018 at 18:22)</a>:</h4>
<p>if so, I think that's not the case</p>



<a name="128431774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431774" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431774">(Jun 21 2018 at 18:23)</a>:</h4>
<p>no no</p>



<a name="128431797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431797">(Jun 21 2018 at 18:23)</a>:</h4>
<p>just getting the first thing that matches <code>if span == move_span {</code></p>



<a name="128431840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431840">(Jun 21 2018 at 18:24)</a>:</h4>
<p>we need to break from the loop at that point</p>



<a name="128431882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431882">(Jun 21 2018 at 18:25)</a>:</h4>
<p>ok wait</p>



<a name="128431886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431886">(Jun 21 2018 at 18:25)</a>:</h4>
<p>maybe I am confused actually</p>



<a name="128431947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431947">(Jun 21 2018 at 18:26)</a>:</h4>
<p>so first off I think your PR is not quite right then</p>



<a name="128431972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431972" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431972">(Jun 21 2018 at 18:26)</a>:</h4>
<p>er, no, never mind</p>



<a name="128431978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431978">(Jun 21 2018 at 18:26)</a>:</h4>
<p>I think I don't quite get what you mean</p>



<a name="128431985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431985">(Jun 21 2018 at 18:26)</a>:</h4>
<p>do you mean breaking at this point:</p>



<a name="128431997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431997">(Jun 21 2018 at 18:27)</a>:</h4>
<p><a href="https://github.com/spastorino/rust/blob/fe264bb6f0aa7efb7be3432360edd1f8923c1f80/src/librustc_mir/borrow_check/error_reporting.rs#L88" target="_blank" title="https://github.com/spastorino/rust/blob/fe264bb6f0aa7efb7be3432360edd1f8923c1f80/src/librustc_mir/borrow_check/error_reporting.rs#L88">https://github.com/spastorino/rust/blob/fe264bb6f0aa7efb7be3432360edd1f8923c1f80/src/librustc_mir/borrow_check/error_reporting.rs#L88</a></p>



<a name="128431998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128431998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128431998">(Jun 21 2018 at 18:27)</a>:</h4>
<p>what I've said is wrong</p>



<a name="128432006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432006">(Jun 21 2018 at 18:27)</a>:</h4>
<p>we need to call err.span_label twice in the else</p>



<a name="128432009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432009">(Jun 21 2018 at 18:27)</a>:</h4>
<p>I think</p>



<a name="128432011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432011">(Jun 21 2018 at 18:27)</a>:</h4>
<p>I don't udnerstand</p>



<a name="128432012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432012">(Jun 21 2018 at 18:27)</a>:</h4>
<p>each time around the loop</p>



<a name="128432013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432013">(Jun 21 2018 at 18:27)</a>:</h4>
<p>adds just one "labeled thing" to the error</p>



<a name="128432015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432015" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432015">(Jun 21 2018 at 18:27)</a>:</h4>
<p>it is not responsible for printing 4 distinct errors</p>



<a name="128432068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432068">(Jun 21 2018 at 18:28)</a>:</h4>
<p>ok</p>



<a name="128432072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432072">(Jun 21 2018 at 18:28)</a>:</h4>
<p>that has to be handled at a higher level</p>



<a name="128432073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432073">(Jun 21 2018 at 18:28)</a>:</h4>
<p>maybe I'm not understanding :D</p>



<a name="128432095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432095">(Jun 21 2018 at 18:28)</a>:</h4>
<p>we want to not display those 4 distinct errors, right?</p>



<a name="128432098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432098" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432098">(Jun 21 2018 at 18:28)</a>:</h4>
<p>and just display one?</p>



<a name="128432102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432102">(Jun 21 2018 at 18:28)</a>:</h4>
<p>or did I get it wrong?</p>



<a name="128432119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432119">(Jun 21 2018 at 18:29)</a>:</h4>
<p>so earlier I wrote <a href="https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6#r29446019" target="_blank" title="https://github.com/spastorino/rust/commit/e42b78abc10e7e04f2aad2eb22ed1b446cc6d7d6#r29446019">this comment that gives an example where the loop has more than one iteration</a></p>



<a name="128432125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432125">(Jun 21 2018 at 18:29)</a>:</h4>
<blockquote>
<p>we want to not display those 4 distinct errors, right?</p>
</blockquote>
<p>correct</p>



<a name="128432132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432132">(Jun 21 2018 at 18:29)</a>:</h4>
<p>it's just that it's not that this <code>for moi in mois</code> loop is responsible for that</p>



<a name="128432136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432136">(Jun 21 2018 at 18:29)</a>:</h4>
<p>rather, the borrow check has an outer walk</p>



<a name="128432256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432256" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432256">(Jun 21 2018 at 18:31)</a>:</h4>
<p>checking all the accesses that occur in the MIR</p>



<a name="128432260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432260">(Jun 21 2018 at 18:31)</a>:</h4>
<p>and there are multiple cases that trigger an error here</p>



<a name="128432557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432557">(Jun 21 2018 at 18:37)</a>:</h4>
<p>hmm ok, need to check this then</p>



<a name="128432947"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432947" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432947">(Jun 21 2018 at 18:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> after checking I don't see an obvious way to break out of the loop</p>



<a name="128432951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128432951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128432951">(Jun 21 2018 at 18:45)</a>:</h4>
<p>isn't this called several times the visitors?</p>



<a name="128433000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433000">(Jun 21 2018 at 18:46)</a>:</h4>
<p>from what I've seen it all starts at visit_terminator_entry</p>



<a name="128433004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433004">(Jun 21 2018 at 18:46)</a>:</h4>
<p>I don't think this loop is relevant at all</p>



<a name="128433007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433007" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433007">(Jun 21 2018 at 18:46)</a>:</h4>
<p>I'm confused</p>



<a name="128433009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433009">(Jun 21 2018 at 18:46)</a>:</h4>
<p>wait, what loop are you talking about ? :)</p>



<a name="128433017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433017">(Jun 21 2018 at 18:46)</a>:</h4>
<p>regardless, I don't think we want to do any breaking to fix the multiple duplicate error problem</p>



<a name="128433023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433023">(Jun 21 2018 at 18:46)</a>:</h4>
<blockquote>
<p>and there are multiple cases that trigger an error here</p>
</blockquote>
<p>^^^</p>



<a name="128433027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433027">(Jun 21 2018 at 18:46)</a>:</h4>
<p>rather, I think we want to have some map (we have some already)</p>



<a name="128433034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433034">(Jun 21 2018 at 18:47)</a>:</h4>
<p>and when we would report an error, we check for an entry in this map that suggests we already reported a "similar" erro</p>



<a name="128433038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433038">(Jun 21 2018 at 18:47)</a>:</h4>
<p>if so, we do not report the new one</p>



<a name="128433040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433040">(Jun 21 2018 at 18:47)</a>:</h4>
<p>and just ignore it</p>



<a name="128433042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433042">(Jun 21 2018 at 18:47)</a>:</h4>
<p>I can show you some examples of this behavior</p>



<a name="128433044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433044">(Jun 21 2018 at 18:47)</a>:</h4>
<p>ahh ok</p>



<a name="128433050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433050">(Jun 21 2018 at 18:47)</a>:</h4>
<p>I feel though like there <em>should</em> be some consolidation possible here</p>



<a name="128433082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433082">(Jun 21 2018 at 18:48)</a>:</h4>
<p>so you want to change err.span_label calls to something that adds on a map?</p>



<a name="128433104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433104">(Jun 21 2018 at 18:48)</a>:</h4>
<p>and then on emit we do the right thing for this case?</p>



<a name="128433107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433107">(Jun 21 2018 at 18:48)</a>:</h4>
<p>e.g. we have <a href="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/mod.rs#L351-L364" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/mod.rs#L351-L364">these maps already</a></p>



<a name="128433118"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433118" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433118">(Jun 21 2018 at 18:48)</a>:</h4>
<p>and <a href="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/mod.rs#L365-L367" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/librustc_mir/borrow_check/mod.rs#L365-L367">this one too</a></p>



<a name="128433636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433636">(Jun 21 2018 at 18:59)</a>:</h4>
<p>ok</p>



<a name="128433933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433933">(Jun 21 2018 at 19:05)</a>:</h4>
<p><code>moved_error_reported</code> is never used</p>



<a name="128433937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128433937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128433937">(Jun 21 2018 at 19:05)</a>:</h4>
<p>I mean, only for debugging purposes</p>



<a name="128434013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128434013" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128434013">(Jun 21 2018 at 19:06)</a>:</h4>
<p>ok</p>



<a name="128434025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128434025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128434025">(Jun 21 2018 at 19:06)</a>:</h4>
<p>anyway, I can use it for my case, I guess</p>



<a name="128435758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128435758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128435758">(Jun 21 2018 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> about <a href="https://github.com/rust-lang/rust/pull/51688#issuecomment-399213060" target="_blank" title="https://github.com/rust-lang/rust/pull/51688#issuecomment-399213060">https://github.com/rust-lang/rust/pull/51688#issuecomment-399213060</a></p>



<a name="128435766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128435766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128435766">(Jun 21 2018 at 19:41)</a>:</h4>
<div class="codehilite"><pre><span></span>diff --git a/src/test/compile-fail/borrowck/borrowck-describe-lvalue.rs b/src/test/compile-fail/borrowck/borrowck-describe-lvalue.rs
index 3a7e4a1374..74a62566b1 100644
--- a/src/test/compile-fail/borrowck/borrowck-describe-lvalue.rs
+++ b/src/test/compile-fail/borrowck/borrowck-describe-lvalue.rs
@@ -77,7 +77,7 @@ fn main() {
         match e { //[mir]~ ERROR cannot use `e` because it was mutably borrowed
             Baz::X(value) =&gt; value
             //[ast]~^ ERROR cannot use `e.0` because it was mutably borrowed
-            //[mir]~^^ ERROR cannot use `e.0` because it was mutably borrowed
+            //[mir]~^^ ERROR cannot use `_` because it was mutably borrowed
         };
         drop(x);
     }
@@ -120,7 +120,7 @@ fn main() {
         match *e { //[mir]~ ERROR cannot use `*e` because it was mutably borrowed
             Baz::X(value) =&gt; value
             //[ast]~^ ERROR cannot use `e.0` because it was mutably borrowed
-            //[mir]~^^ ERROR cannot use `e.0` because it was mutably borrowed
+            //[mir]~^^ ERROR cannot use `_` because it was mutably borrowed
         };
         drop(x);
     }
@@ -201,12 +201,12 @@ fn main() {
         match e { //[mir]~ ERROR cannot use `e` because it was mutably borrowed
             E::A(ref ax) =&gt;
                 //[ast]~^ ERROR cannot borrow `e.0` as immutable because `e` is also borrowed as mutable
-                //[mir]~^^ ERROR cannot borrow `e.0` as immutable because it is also borrowed as mutable
+                //[mir]~^^ ERROR cannot borrow `_` as immutable because it is also borrowed as mutable
                 //[mir]~| ERROR cannot use `e` because it was mutably borrowed
                 println!(&quot;e.ax: {:?}&quot;, ax),
             E::B { x: ref bx } =&gt;
                 //[ast]~^ ERROR cannot borrow `e.x` as immutable because `e` is also borrowed as mutable
-                //[mir]~^^ ERROR cannot borrow `e.x` as immutable because it is also borrowed as mutable
+                //[mir]~^^ ERROR cannot borrow `_` as immutable because it is also borrowed as mutable
                 println!(&quot;e.bx: {:?}&quot;, bx),
         }
         drop(x);
diff --git a/src/test/ui/error-codes/E0657.stderr b/src/test/ui/error-codes/E0657.stderr
index 737ae3a163..df0234a766 100644
--- a/src/test/ui/error-codes/E0657.stderr
+++ b/src/test/ui/error-codes/E0657.stderr
@@ -10,6 +10,8 @@ error[E0657]: `impl Trait` can only capture lifetimes bound at the fn or impl le
 LL |         -&gt; Box&lt;for&lt;&#39;a&gt; Id&lt;impl Lt&lt;&#39;a&gt;&gt;&gt;
    |                                   ^^

+#0 [typeck_tables_of] processing `free_fn_capture_hrtb_in_impl_trait`
+#1 [type_of] processing `free_fn_capture_hrtb_in_impl_trait::{{exist-impl-Trait}}`
 error: aborting due to 2 previous errors

 For more information about this error, try `rustc --explain E0657`.
diff --git a/src/test/ui/impl_trait_projections.stderr b/src/test/ui/impl_trait_projections.stderr
index f6d58984ec..2802df1080 100644
--- a/src/test/ui/impl_trait_projections.stderr
+++ b/src/test/ui/impl_trait_projections.stderr
@@ -30,6 +30,7 @@ LL | fn projection_is_disallowed(x: impl Iterator) -&gt; &lt;impl Iterator&gt;::Item {
    |
    = note: specify the type using the syntax `&lt;impl std::iter::Iterator as Trait&gt;::Item`

+#0 [type_of] processing `projection_is_disallowed::{{exist-impl-Trait}}`
 error: aborting due to 5 previous errors

 Some errors occurred: E0223, E0667.
</pre></div>



<a name="128435834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128435834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128435834">(Jun 21 2018 at 19:42)</a>:</h4>
<p>and that would be wrong</p>



<a name="128435838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128435838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128435838">(Jun 21 2018 at 19:42)</a>:</h4>
<p>will check these side effects</p>



<a name="128437019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437019">(Jun 21 2018 at 20:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> well yeah, the return Err in the Downcast is making this work like that</p>



<a name="128437024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437024">(Jun 21 2018 at 20:08)</a>:</h4>
<p>unsure what we can do about this</p>



<a name="128437749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437749">(Jun 21 2018 at 20:24)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> hmm, yeah. I've always considered those errors pretty suboptimal</p>



<a name="128437756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437756">(Jun 21 2018 at 20:25)</a>:</h4>
<p>that is, they are displaying a path to the user that isn't something you could type</p>



<a name="128437762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437762">(Jun 21 2018 at 20:25)</a>:</h4>
<p>and there is no particular reason you should be able to guess what it means</p>



<a name="128437777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437777">(Jun 21 2018 at 20:25)</a>:</h4>
<p>so ... should I do the same?</p>



<a name="128437778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437778">(Jun 21 2018 at 20:25)</a>:</h4>
<p>I'm torn between saying "we should match AST borrowck" and "we should improve on it"</p>



<a name="128437785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437785">(Jun 21 2018 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> you don't happen to be around, do you? I'm curious as to your opinion there :)</p>



<a name="128437832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437832">(Jun 21 2018 at 20:26)</a>:</h4>
<p>well, I meant, what should I do then?</p>



<a name="128437842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437842">(Jun 21 2018 at 20:26)</a>:</h4>
<p>well first we should decide if we're trying to match AST or improve upon it :)</p>



<a name="128437845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437845">(Jun 21 2018 at 20:26)</a>:</h4>
<p>I guess that even if we were going to do the latter</p>



<a name="128437846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437846">(Jun 21 2018 at 20:26)</a>:</h4>
<p>I'm not sure if you were saying that the new behavior is wrong for this case or if I should ... ok</p>



<a name="128437850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437850">(Jun 21 2018 at 20:26)</a>:</h4>
<p>we'd probably prefer to do it in a separate PR</p>



<a name="128437853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437853">(Jun 21 2018 at 20:26)</a>:</h4>
<p>sounds like we should make two copies of that darn "describe-path" fn</p>



<a name="128437857"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437857" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437857">(Jun 21 2018 at 20:26)</a>:</h4>
<p>or have a parameter</p>



<a name="128437859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437859">(Jun 21 2018 at 20:26)</a>:</h4>
<p>ok</p>



<a name="128437860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437860">(Jun 21 2018 at 20:26)</a>:</h4>
<p>for how to treat downcasts</p>



<a name="128437862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437862">(Jun 21 2018 at 20:27)</a>:</h4>
<p>I'm not wild about that</p>



<a name="128437869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437869">(Jun 21 2018 at 20:27)</a>:</h4>
<p>but I think it's better</p>



<a name="128437873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128437873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128437873">(Jun 21 2018 at 20:27)</a>:</h4>
<p>and anyway if we are going to match the AST, it does not use paths in some of these cases</p>



<a name="128440545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128440545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128440545">(Jun 21 2018 at 21:21)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/pull/51688" target="_blank" title="https://github.com/rust-lang/rust/pull/51688">https://github.com/rust-lang/rust/pull/51688</a> force pushed, it's ugly :/</p>



<a name="128466152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128466152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128466152">(Jun 22 2018 at 10:28)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/pull/51688" target="_blank" title="https://github.com/rust-lang/rust/pull/51688">https://github.com/rust-lang/rust/pull/51688</a> force pushed, it's ugly :/</p>
</blockquote>
<p>specifically, you mean the <code>true</code>, <code>false</code>, business?</p>



<a name="128466885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128466885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128466885">(Jun 22 2018 at 10:48)</a>:</h4>
<p>(sorry <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> my PR has made yours conflict, I think because of its rustfmt commit)</p>



<a name="128467610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128467610" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128467610">(Jun 22 2018 at 11:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> I left a kind of <a href="https://github.com/rust-lang/rust/pull/51688#pullrequestreview-131147167" target="_blank" title="https://github.com/rust-lang/rust/pull/51688#pullrequestreview-131147167">"style nit" suggestion</a> — what do you think?</p>



<a name="128470469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128470469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128470469">(Jun 22 2018 at 12:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116113">@lqd</span> no worries, ya, that's the bad thing of committing rustfmt changes</p>



<a name="128470485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128470485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128470485">(Jun 22 2018 at 12:28)</a>:</h4>
<p>I'd like to be able to do something like <code>rustfmt file:88-100</code> or even <code>rustfmt file --git-diff-only</code></p>



<a name="128470566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128470566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128470566">(Jun 22 2018 at 12:30)</a>:</h4>
<blockquote>
<p>@Santiago Pastorino I left a kind of "style nit" suggestion — what do you think?</p>
</blockquote>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> makes sense</p>



<a name="128471910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128471910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128471910">(Jun 22 2018 at 13:06)</a>:</h4>
<blockquote>
<p>I'd like to be able to do something like <code>rustfmt file:88-100</code> or even <code>rustfmt file --git-diff-only</code></p>
</blockquote>
<p>I know @nrc was talking about adding the latter thing at some point.</p>



<a name="128471936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128471936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> qmx <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128471936">(Jun 22 2018 at 13:07)</a>:</h4>
<p>that would be a dream</p>



<a name="128472403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128472403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128472403">(Jun 22 2018 at 13:18)</a>:</h4>
<p>mostly I just want to rustfmt all of rustc</p>



<a name="128474239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128474239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128474239">(Jun 22 2018 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> let's do it now :P</p>



<a name="128474241"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128474241" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128474241">(Jun 22 2018 at 14:01)</a>:</h4>
<p>rustfmt everything and break all the PRs</p>



<a name="128474243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128474243" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128474243">(Jun 22 2018 at 14:01)</a>:</h4>
<p>:D</p>



<a name="128474306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128474306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128474306">(Jun 22 2018 at 14:02)</a>:</h4>
<p>or make bors do it on every merge commit</p>



<a name="128474704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128474704" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128474704">(Jun 22 2018 at 14:10)</a>:</h4>
<p>yes...</p>



<a name="128480960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128480960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128480960">(Jun 22 2018 at 16:29)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/51688" target="_blank" title="https://github.com/rust-lang/rust/pull/51688">https://github.com/rust-lang/rust/pull/51688</a> force pushed again</p>



<a name="128490116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128490116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128490116">(Jun 22 2018 at 19:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> ^^^ tests are green, unsure if you need to approve again or something</p>



<a name="128490677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128490677" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128490677">(Jun 22 2018 at 19:57)</a>:</h4>
<p>yes it needs to be r+'ed again any time a new commit is added, or the branch is force pushed</p>



<a name="128491866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move/near/128491866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/issue-51512-note-field-after-move.html#128491866">(Jun 22 2018 at 20:20)</a>:</h4>
<p>makes sense <span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#53172-nll-bootstrap · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html">#53172-nll-bootstrap</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="131068391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068391">(Aug 07 2018 at 20:52)</a>:</h4>
<p>I'm opening this topic to discuss <a href="https://github.com/rust-lang/rust/issues/53172" target="_blank" title="https://github.com/rust-lang/rust/issues/53172">#53172</a>. cc <span class="user-mention" data-user-id="125142">@Bernardo Meurer</span>, who is interested in doing some of the crates there.</p>



<a name="131068430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068430">(Aug 07 2018 at 20:53)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="116009">@nikomatsakis</span> ! I'm going to start with all the <code>liballoc</code> crates and see how it goes</p>



<a name="131068525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068525" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068525">(Aug 07 2018 at 20:54)</a>:</h4>
<p>surely start with librustc_mir <span class="emoji emoji-1f61b" title="mischievous">:mischievous:</span></p>



<a name="131068547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068547">(Aug 07 2018 at 20:55)</a>:</h4>
<p>Sure, but why do you say so?</p>



<a name="131068553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068553">(Aug 07 2018 at 20:55)</a>:</h4>
<p>because that is where the NLL implementation is, I suspect. =)</p>



<a name="131068556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068556">(Aug 07 2018 at 20:55)</a>:</h4>
<p>borrowckception!</p>



<a name="131068620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068620">(Aug 07 2018 at 20:56)</a>:</h4>
<p>Because it's the one I work on most</p>



<a name="131068664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068664" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068664">(Aug 07 2018 at 20:57)</a>:</h4>
<p>Ha! Alright!</p>



<a name="131068674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131068674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131068674">(Aug 07 2018 at 20:57)</a>:</h4>
<p>I think between the ice and other fixes and (I think) Matthew's PR, bootstrapping should probably go smoothly :)</p>



<a name="131069658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069658">(Aug 07 2018 at 21:16)</a>:</h4>
<p>hum btw do we just want the nll feature flag here, or just on stage1 as we did last time we tried ?</p>



<a name="131069681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069681">(Aug 07 2018 at 21:16)</a>:</h4>
<p>(or say, not stage 0)</p>



<a name="131069868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069868">(Aug 07 2018 at 21:20)</a>:</h4>
<p>ah <span class="user-mention" data-user-id="116113">@lqd</span> good point</p>



<a name="131069878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069878" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069878">(Aug 07 2018 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="125142">@Bernardo Meurer</span> you probably actually want <code>#![cfg_attr(not(stage0), feature(nll))]</code></p>



<a name="131069903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069903">(Aug 07 2018 at 21:21)</a>:</h4>
<p>I think that <a href="https://github.com/rust-lang/rust/issues/52810" target="_blank" title="https://github.com/rust-lang/rust/issues/52810">#52810</a> and <a href="https://github.com/rust-lang/rust/issues/52834" target="_blank" title="https://github.com/rust-lang/rust/issues/52834">#52834</a> are the only issues that will block bootstrapping on the stage 0 compile, I think they affect one crate each (actually, I think one only affects a dependency).</p>



<a name="131069953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069953">(Aug 07 2018 at 21:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> aren't both of them closed?</p>



<a name="131069960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069960">(Aug 07 2018 at 21:22)</a>:</h4>
<p>or are you saying "with stage0 builds"</p>



<a name="131069962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069962" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069962">(Aug 07 2018 at 21:22)</a>:</h4>
<p>They didn't make beta</p>



<a name="131069963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131069963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131069963">(Aug 07 2018 at 21:22)</a>:</h4>
<p>k</p>



<a name="131070003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070003">(Aug 07 2018 at 21:23)</a>:</h4>
<p>Just got the compiler to build :)</p>



<a name="131070089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070089">(Aug 07 2018 at 21:25)</a>:</h4>
<p>Hmm, do I need something else to run <code>x.py test</code>? Mine is failing with some missing files</p>



<a name="131070155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070155" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070155">(Aug 07 2018 at 21:26)</a>:</h4>
<p><a href="https://gist.github.com/bemeurer/fd38ae4df8ffcf610f4e663869d32f8a" target="_blank" title="https://gist.github.com/bemeurer/fd38ae4df8ffcf610f4e663869d32f8a">https://gist.github.com/bemeurer/fd38ae4df8ffcf610f4e663869d32f8a</a></p>



<a name="131070156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070156">(Aug 07 2018 at 21:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> do you usually try this with x.py check as I did ? Should be way faster for Bernardo if they're doing a crate at a time</p>



<a name="131070166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070166">(Aug 07 2018 at 21:26)</a>:</h4>
<p>definitely use <code>./x.py check</code> !</p>



<a name="131070182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070182">(Aug 07 2018 at 21:27)</a>:</h4>
<p>I have quite a lot of server power :P</p>



<a name="131070196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070196">(Aug 07 2018 at 21:27)</a>:</h4>
<p>wait, does <code>./x.py check</code> check also stage1 etc?</p>



<a name="131070267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070267">(Aug 07 2018 at 21:29)</a>:</h4>
<p>I updated <a href="https://github.com/rust-lang/rust/issues/53172#issue-348463765" target="_blank" title="https://github.com/rust-lang/rust/issues/53172#issue-348463765">https://github.com/rust-lang/rust/issues/53172#issue-348463765</a> with better instructions</p>



<a name="131070270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070270">(Aug 07 2018 at 21:29)</a>:</h4>
<p>What's stage0/stage1?</p>



<a name="131070277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070277" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070277">(Aug 07 2018 at 21:29)</a>:</h4>
<p>I happened to be doing this in the background so I don't remember :/ I did a lot of regular stage2 builds though, but no tests</p>



<a name="131070278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070278">(Aug 07 2018 at 21:29)</a>:</h4>
<p>I ran <code>./x.py clean</code>, <code>RUSTFLAGS_STAGE_NOT_0='...' ./x.py build</code>, not that I'd recommend it.</p>



<a name="131070282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070282">(Aug 07 2018 at 21:29)</a>:</h4>
<p><span class="user-mention" data-user-id="125142">@Bernardo Meurer</span> <a href="https://rust-lang-nursery.github.io/rustc-guide/how-to-build-and-run.html#running-xpy-and-building-a-stage1-compiler" target="_blank" title="https://rust-lang-nursery.github.io/rustc-guide/how-to-build-and-run.html#running-xpy-and-building-a-stage1-compiler">https://rust-lang-nursery.github.io/rustc-guide/how-to-build-and-run.html#running-xpy-and-building-a-stage1-compiler</a></p>



<a name="131070285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070285">(Aug 07 2018 at 21:29)</a>:</h4>
<p>take a look at that, which explains the background :)</p>



<a name="131070286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070286">(Aug 07 2018 at 21:29)</a>:</h4>
<p>Woohoo, check pass</p>



<a name="131070337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070337">(Aug 07 2018 at 21:30)</a>:</h4>
<p>I guess to be safe we can do <code>./x.py build --stage 1</code></p>



<a name="131070348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070348">(Aug 07 2018 at 21:30)</a>:</h4>
<p>um yeah</p>



<a name="131070350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070350">(Aug 07 2018 at 21:30)</a>:</h4>
<p>now that I think about it</p>



<a name="131070352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070352">(Aug 07 2018 at 21:30)</a>:</h4>
<p>oh yeah rustflags would fail for the dependencies</p>



<a name="131070355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070355">(Aug 07 2018 at 21:30)</a>:</h4>
<p><code>x.py check</code> doesn't produce an executable</p>



<a name="131070365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070365">(Aug 07 2018 at 21:30)</a>:</h4>
<p>so how could it possibly check stage1 =)</p>



<a name="131070370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070370">(Aug 07 2018 at 21:30)</a>:</h4>
<p>lol</p>



<a name="131070375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070375">(Aug 07 2018 at 21:31)</a>:</h4>
<p>heh</p>



<a name="131070383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070383">(Aug 07 2018 at 21:31)</a>:</h4>
<p>All our dependencies worked when I tried.</p>



<a name="131070392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070392">(Aug 07 2018 at 21:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> I was figuring we could add <code>#![feature]</code> gates so that we can actually commit them</p>



<a name="131070405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070405">(Aug 07 2018 at 21:31)</a>:</h4>
<p>but it's probably <em>worth</em> just trying the <code>RUSTFLAGS</code> thing and see what happens</p>



<a name="131070410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070410">(Aug 07 2018 at 21:31)</a>:</h4>
<p>maybe everything Just Works</p>



<a name="131070472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070472">(Aug 07 2018 at 21:33)</a>:</h4>
<p>don't need x.py test for sure though <span class="user-mention" data-user-id="125142">@Bernardo Meurer</span> in case you need a bit quicker turnaround</p>



<a name="131070482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070482">(Aug 07 2018 at 21:33)</a>:</h4>
<p>yes</p>



<a name="131070486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070486">(Aug 07 2018 at 21:33)</a>:</h4>
<p><code>./x.py build</code> or <code>./x.py build --stage 1</code> ought to suffice</p>



<a name="131070487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070487">(Aug 07 2018 at 21:33)</a>:</h4>
<p>but at this point I myself would add the flag to half the crates in one go</p>



<a name="131070537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070537">(Aug 07 2018 at 21:34)</a>:</h4>
<p>instead of waiting 5-10 mins for each (but I had less server power)</p>



<a name="131070630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070630" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070630">(Aug 07 2018 at 21:36)</a>:</h4>
<p>I'm compiling on server with 2x Intel(R) Xeon(R) CPU E5-2630 v4</p>



<a name="131070640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131070640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131070640">(Aug 07 2018 at 21:36)</a>:</h4>
<p>God bless companies that let you use stuff for personal projects!</p>



<a name="131071129"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071129" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071129">(Aug 07 2018 at 21:45)</a>:</h4>
<p>that reminds me that I wanted to try enabling parallel compilation</p>



<a name="131071166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071166">(Aug 07 2018 at 21:46)</a>:</h4>
<p>I feel like I tried it without success once, but if so, I should try again and figure out why</p>



<a name="131071247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071247">(Aug 07 2018 at 21:48)</a>:</h4>
<p>We don't have parallel compilation already?</p>



<a name="131071493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071493">(Aug 07 2018 at 21:54)</a>:</h4>
<p>nope</p>



<a name="131071497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071497">(Aug 07 2018 at 21:54)</a>:</h4>
<p>I mean across crates yes</p>



<a name="131071498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071498">(Aug 07 2018 at 21:54)</a>:</h4>
<p>but within one crate, not</p>



<a name="131071500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071500">(Aug 07 2018 at 21:54)</a>:</h4>
<p>there is experimental support for it though</p>



<a name="131071715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131071715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Bernardo Meurer <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131071715">(Aug 07 2018 at 21:59)</a>:</h4>
<p>That would be really, really nice</p>



<a name="131100320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131100320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131100320">(Aug 08 2018 at 10:45)</a>:</h4>
<p><span class="user-mention" data-user-id="125142">@Bernardo Meurer</span> how'd it go?</p>



<a name="131137393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131137393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131137393">(Aug 08 2018 at 22:54)</a>:</h4>
<p>Hey <span class="emoji emoji-1f44b" title="wave">:wave:</span> I'll build <code>librustc_metadata</code> tonight and report back :)</p>



<a name="131141337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131141337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131141337">(Aug 09 2018 at 00:37)</a>:</h4>
<p>The build was successful! Would a single PR for each indivdual crate be preferred, or would a PR with multiple commits, one per build passing crate, be acceptable after trying a few in succession? Next-up: <code>librustc_lint</code></p>



<a name="131143825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131143825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131143825">(Aug 09 2018 at 01:46)</a>:</h4>
<p><span class="user-mention" data-user-id="125246">@memoryruins</span> I'd probably just have one commit if there's no changes for all crates, and if a crate has changes then isolate it into its own commit</p>



<a name="131145498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131145498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131145498">(Aug 09 2018 at 02:33)</a>:</h4>
<p>Sounds good! stage1 successfully built with nll enabled on <code>librustc_lint</code> and <code>libgraphviz</code>.</p>



<a name="131145557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131145557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131145557">(Aug 09 2018 at 02:35)</a>:</h4>
<p>For the kicks and to try multiple at once while I sleep, I'll see if it builds with nll enabled on <code>liballoc</code>, <code>liballoc_jemalloc</code>, <code>liballoc_system</code>, <code>librustc_borrowck</code>, <code>librustc_codegen_llvm</code>, and <code>librustc_codegen_utils</code></p>



<a name="131149535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131149535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131149535">(Aug 09 2018 at 04:16)</a>:</h4>
<p>It hit an error while compiling stage1 of <code>librustc_codegen_llvm</code> <a href="https://gist.github.com/memoryruins/14a2aad7fc85d0429ae9e4240ec0dacb" target="_blank" title="https://gist.github.com/memoryruins/14a2aad7fc85d0429ae9e4240ec0dacb">https://gist.github.com/memoryruins/14a2aad7fc85d0429ae9e4240ec0dacb</a></p>



<a name="131149619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131149619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131149619">(Aug 09 2018 at 04:19)</a>:</h4>
<p>Trying the set again without the above.</p>



<a name="131152663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131152663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131152663">(Aug 09 2018 at 05:58)</a>:</h4>
<p>They built! Opened a PR <a href="https://github.com/rust-lang/rust/pull/53211" target="_blank" title="https://github.com/rust-lang/rust/pull/53211">https://github.com/rust-lang/rust/pull/53211</a></p>



<a name="131157838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131157838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131157838">(Aug 09 2018 at 08:21)</a>:</h4>
<p>more crates are building, didn't list these beforehand in here <a href="https://github.com/rust-lang/rust/pull/53214" target="_blank" title="https://github.com/rust-lang/rust/pull/53214">https://github.com/rust-lang/rust/pull/53214</a></p>



<a name="131161842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131161842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131161842">(Aug 09 2018 at 09:57)</a>:</h4>
<p><span class="user-mention" data-user-id="125246">@memoryruins</span> nice! I updated the tracking issue</p>



<a name="131165380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131165380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131165380">(Aug 09 2018 at 11:09)</a>:</h4>
<p>another chunk successfully builds locally :) <a href="https://github.com/rust-lang/rust/pull/53219" target="_blank" title="https://github.com/rust-lang/rust/pull/53219">https://github.com/rust-lang/rust/pull/53219</a></p>



<a name="131165936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131165936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131165936">(Aug 09 2018 at 11:22)</a>:</h4>
<p>now to try some of these larger crates: hello <code>librustc</code>, <code>libcore</code>, and <code>data_structures</code></p>



<a name="131166113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131166113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131166113">(Aug 09 2018 at 11:27)</a>:</h4>
<p>very nice</p>



<a name="131166168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131166168" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131166168">(Aug 09 2018 at 11:28)</a>:</h4>
<p>I'm wondering whether this will affect bootstrap time, and how much to worry about (cc <span class="user-mention" data-user-id="116122">@simulacrum</span>).</p>
<p>I guess the only real answer is "land it and see"</p>



<a name="131166188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131166188" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131166188">(Aug 09 2018 at 11:29)</a>:</h4>
<p>wasn't it only a month ago that the last bootstrap was filled with unused mut warnings? y'all have done some incredible work since then.</p>



<a name="131166324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131166324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131166324">(Aug 09 2018 at 11:32)</a>:</h4>
<p>I had that in mind as well, and so far the build times between stage0 and stage1 appear to be similar (no idea if thats a 'good' way to roughly judge it. first time i've built rustc haha)</p>



<a name="131168627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131168627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131168627">(Aug 09 2018 at 12:25)</a>:</h4>
<p><span class="user-mention" data-user-id="125246">@memoryruins</span> have you measured, or just "feels similar"?</p>



<a name="131168629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131168629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131168629">(Aug 09 2018 at 12:25)</a>:</h4>
<p>still, even the latter is good =)</p>



<a name="131169862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131169862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131169862">(Aug 09 2018 at 12:51)</a>:</h4>
<p>stage0 vs stage1 is a decent, if not great comparison. Stage 0 is usually faster IIRC for unknown reasons.</p>
<p>I'm not too worried about build times -- if we have perf down to ~5-10% over previous then realistically on Travis that moves the minimum up by ~2-3 minutes which we should be able to afford I think</p>



<a name="131169868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131169868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131169868">(Aug 09 2018 at 12:51)</a>:</h4>
<p>And it'll encourage us to optimize performance :)</p>



<a name="131170488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131170488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131170488">(Aug 09 2018 at 13:02)</a>:</h4>
<p>feels similar. the difference might end up more apparent when all of the crates are enabled altogether</p>



<a name="131171735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131171735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131171735">(Aug 09 2018 at 13:24)</a>:</h4>
<p><span class="user-mention" data-user-id="125246">@memoryruins</span> we should invetigate that one error</p>



<a name="131171758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131171758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131171758">(Aug 09 2018 at 13:24)</a>:</h4>
<p>/me looks</p>



<a name="131171784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131171784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131171784">(Aug 09 2018 at 13:25)</a>:</h4>
<p>This was the gist (for reference): <a href="https://gist.github.com/memoryruins/14a2aad7fc85d0429ae9e4240ec0dacb" target="_blank" title="https://gist.github.com/memoryruins/14a2aad7fc85d0429ae9e4240ec0dacb">https://gist.github.com/memoryruins/14a2aad7fc85d0429ae9e4240ec0dacb</a></p>



<a name="131171979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131171979" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131171979">(Aug 09 2018 at 13:28)</a>:</h4>
<p>I think the error is legit... <span class="user-mention" data-user-id="119009">@eddyb</span>, you around?</p>



<a name="131172017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172017" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172017">(Aug 09 2018 at 13:29)</a>:</h4>
<p>well wait</p>



<a name="131172038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172038">(Aug 09 2018 at 13:30)</a>:</h4>
<p>er, yes, I think it's legit, iiuc</p>



<a name="131172089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172089">(Aug 09 2018 at 13:30)</a>:</h4>
<p>an interesting example where enhanced error messages with more details would be quite nice</p>



<a name="131172090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172090" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172090">(Aug 09 2018 at 13:30)</a>:</h4>
<p>/me ponders trying to reduce it</p>



<a name="131172386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172386">(Aug 09 2018 at 13:35)</a>:</h4>
<p>I think the function called where the borrow is created (which I can't see the name of, and I can't check easily on a phone) has too strict a lifetime annotation on it. But it's an extern function written in C++, so I'm not completely sure.</p>



<a name="131172452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172452">(Aug 09 2018 at 13:36)</a>:</h4>
<p>reduced: <a href="https://play.rust-lang.org/?gist=6e22b15051f9a108d09f28a0b657f717&amp;version=nightly&amp;mode=debug&amp;edition=2015" target="_blank" title="https://play.rust-lang.org/?gist=6e22b15051f9a108d09f28a0b657f717&amp;version=nightly&amp;mode=debug&amp;edition=2015">https://play.rust-lang.org/?gist=6e22b15051f9a108d09f28a0b657f717&amp;version=nightly&amp;mode=debug&amp;edition=2015</a></p>



<a name="131172463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172463">(Aug 09 2018 at 13:36)</a>:</h4>
<p>yeah, I can't quite tell</p>



<a name="131172465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172465">(Aug 09 2018 at 13:36)</a>:</h4>
<p>there are Drops that free memory</p>



<a name="131172557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172557">(Aug 09 2018 at 13:38)</a>:</h4>
<p>also, the "in later iteration of loop" thing is totally wrong</p>



<a name="131172700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172700">(Aug 09 2018 at 13:41)</a>:</h4>
<p>adding a <code>take()</code> method would fix the error, I think, and <em>seems</em> safe...?</p>



<a name="131172703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172703">(Aug 09 2018 at 13:41)</a>:</h4>
<p><a href="https://play.rust-lang.org/?gist=64c20d529ad49d5871417c391a8dbcde&amp;version=nightly&amp;mode=debug&amp;edition=2015" target="_blank" title="https://play.rust-lang.org/?gist=64c20d529ad49d5871417c391a8dbcde&amp;version=nightly&amp;mode=debug&amp;edition=2015">https://play.rust-lang.org/?gist=64c20d529ad49d5871417c391a8dbcde&amp;version=nightly&amp;mode=debug&amp;edition=2015</a></p>



<a name="131172710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172710" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172710">(Aug 09 2018 at 13:41)</a>:</h4>
<p>like that <span class="emoji emoji-1f446" title="point up">:point_up:</span></p>



<a name="131172728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172728">(Aug 09 2018 at 13:42)</a>:</h4>
<p>I'm gonna file a bug</p>



<a name="131172879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131172879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131172879">(Aug 09 2018 at 13:44)</a>:</h4>
<p>filed <a href="https://github.com/rust-lang/rust/issues/53221" target="_blank" title="https://github.com/rust-lang/rust/issues/53221">https://github.com/rust-lang/rust/issues/53221</a></p>



<a name="131177390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177390" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177390">(Aug 09 2018 at 14:55)</a>:</h4>
<p>update -- the following crates build: <code>libcore</code>, <code>libprofiler_builtins</code>, <code>librustc</code>, <code>librustc_allocator</code>, <code>librustc_data_structures</code>, <code>libserialize</code>, <code>libsyntax</code>, and <code>libtest</code></p>



<a name="131177410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177410">(Aug 09 2018 at 14:55)</a>:</h4>
<p><code>libsyntax_ext</code> hits the following error <a href="https://gist.github.com/memoryruins/b5a05efbd217608ca010c1f2252ef5c6" target="_blank" title="https://gist.github.com/memoryruins/b5a05efbd217608ca010c1f2252ef5c6">https://gist.github.com/memoryruins/b5a05efbd217608ca010c1f2252ef5c6</a></p>



<a name="131177634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177634" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177634">(Aug 09 2018 at 14:59)</a>:</h4>
<p>Does it need to be mutable? a.k.a. is it a NLL bug or NLL improvement?</p>



<a name="131177723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177723" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177723">(Aug 09 2018 at 15:00)</a>:</h4>
<p>(you can usually tell by just removing the mut keyword)</p>



<a name="131177727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177727" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177727">(Aug 09 2018 at 15:00)</a>:</h4>
<p>it looks correct to me</p>



<a name="131177747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177747">(Aug 09 2018 at 15:01)</a>:</h4>
<p>but yes <span class="user-mention" data-user-id="116122">@simulacrum</span>'s test sounds like the right thing to do :)</p>



<a name="131177757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177757">(Aug 09 2018 at 15:01)</a>:</h4>
<p>That's an ambiguous answer <span class="user-mention" data-user-id="116009">@nikomatsakis</span>  ;-)</p>



<a name="131177765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177765">(Aug 09 2018 at 15:01)</a>:</h4>
<p>sorry, I mean NLL's warning looks correct</p>



<a name="131177768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177768">(Aug 09 2018 at 15:01)</a>:</h4>
<p>the mut is not needed</p>



<a name="131177867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131177867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131177867">(Aug 09 2018 at 15:02)</a>:</h4>
<p>Is it possible old borrowck might require mut, thus there's no code that works on both?</p>



<a name="131178111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131178111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131178111">(Aug 09 2018 at 15:06)</a>:</h4>
<p>one way to find out!</p>



<a name="131178125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131178125" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131178125">(Aug 09 2018 at 15:06)</a>:</h4>
<p><span class="user-mention" data-user-id="125246">@memoryruins</span> you gonna try removing those annotations?</p>



<a name="131178282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131178282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131178282">(Aug 09 2018 at 15:09)</a>:</h4>
<p>I'll remove them and try it out after this batch builds :)</p>



<a name="131193249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131193249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131193249">(Aug 09 2018 at 19:37)</a>:</h4>
<p>Removing the unnecessary mut annotation did the trick ^^ <a href="https://github.com/rust-lang/rust/pull/53230" target="_blank" title="https://github.com/rust-lang/rust/pull/53230">https://github.com/rust-lang/rust/pull/53230</a></p>



<a name="131193440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131193440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131193440">(Aug 09 2018 at 19:41)</a>:</h4>
<p>I think libstd_unicode can be removed from the bootstrap list since it's now in libcore</p>



<a name="131196102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131196102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131196102">(Aug 09 2018 at 20:40)</a>:</h4>
<p><span class="user-mention" data-user-id="125246">@memoryruins</span> so <span class="user-mention" data-user-id="119009">@eddyb</span> <a href="https://github.com/rust-lang/rust/issues/53221#issuecomment-411886906" target="_blank" title="https://github.com/rust-lang/rust/issues/53221#issuecomment-411886906">left a comment here</a> suggesting where the problem may be with the LLVM crate</p>



<a name="131196107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131196107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131196107">(Aug 09 2018 at 20:41)</a>:</h4>
<p>think you could try applying that diff and see if makes the LLVM crate build?</p>



<a name="131198321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131198321" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131198321">(Aug 09 2018 at 21:33)</a>:</h4>
<p>will do! If it builds, I'll add it to the part 4 PR</p>



<a name="131198327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131198327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131198327">(Aug 09 2018 at 21:33)</a>:</h4>
<p>since travis caught an unused mut anyway</p>



<a name="131198332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131198332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131198332">(Aug 09 2018 at 21:33)</a>:</h4>
<p>in one of the tests</p>



<a name="131198379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131198379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131198379">(Aug 09 2018 at 21:34)</a>:</h4>
<p>I should really figure out how to get x.py check compiling tests too (--all-targets)</p>



<a name="131204153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131204153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131204153">(Aug 09 2018 at 23:55)</a>:</h4>
<p>part 4 now passes on travis <span class="emoji emoji-1f980" title="crab">:crab:</span> <br>
codegen_llvm ran into an unused mut after eddy's suggestion (potentially progress)</p>
<div class="codehilite"><pre><span></span>error: variable does not need to be mutable
  --&gt; librustc_codegen_llvm\type_of.rs:92:25
92 |                     let mut llty = Type::named_struct(cx, name);
   |                         ----^^^^
</pre></div>


<p>I'll try building it again without the mut annotation and look into the last few crates tomorrow, unless if anyone wants to have a go at it while I'm away</p>



<a name="131204218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131204218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131204218">(Aug 09 2018 at 23:57)</a>:</h4>
<p><span class="user-mention" data-user-id="125142">@Bernardo Meurer</span> any luck with bootstrapping <code>librustc_mir</code>?</p>



<a name="131223571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131223571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131223571">(Aug 10 2018 at 08:12)</a>:</h4>
<p>let's try all the remaining crates all at once</p>



<a name="131223826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131223826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131223826">(Aug 10 2018 at 08:17)</a>:</h4>
<p>does the parent stdsimd have a <a href="http://lib.rs" target="_blank" title="http://lib.rs">lib.rs</a>? only one I saw was in the stdsimd/crates/stdsimd/src directory</p>



<a name="131223830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131223830" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131223830">(Aug 10 2018 at 08:18)</a>:</h4>
<p>not seeing a crate/lib.rs for libbacktrace, the directory is all .c/.h files. is the crate located elsewhere or would it be considered part of libstd's sys?</p>



<a name="131224028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224028">(Aug 10 2018 at 08:21)</a>:</h4>
<p>I'm not really familiar with those crates :(</p>



<a name="131224070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224070">(Aug 10 2018 at 08:22)</a>:</h4>
<p>libbacktrace might be just C code</p>



<a name="131224248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224248">(Aug 10 2018 at 08:26)</a>:</h4>
<p><a href="https://github.com/rust-lang/libc" target="_blank" title="https://github.com/rust-lang/libc">libc</a> and <a href="https://github.com/rust-lang-nursery/compiler-builtins" target="_blank" title="https://github.com/rust-lang-nursery/compiler-builtins">compiler-builtins</a> are both external crates, so I'm guessing we wouldnt be able to add the feature flag to those</p>



<a name="131224283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224283">(Aug 10 2018 at 08:27)</a>:</h4>
<p>that leaves codegen_llvm, librustc_mir, and libstd ^^ (building now)</p>



<a name="131224369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224369">(Aug 10 2018 at 08:29)</a>:</h4>
<p>no it looks like builtins has not(stage0) flags too</p>



<a name="131224373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224373">(Aug 10 2018 at 08:29)</a>:</h4>
<p>it would just need to be a separate PR right?</p>



<a name="131224689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224689">(Aug 10 2018 at 08:37)</a>:</h4>
<p>probably? builtins might be a bit special :)</p>



<a name="131224693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224693">(Aug 10 2018 at 08:37)</a>:</h4>
<p>it's probably good enough as is</p>



<a name="131224732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224732">(Aug 10 2018 at 08:38)</a>:</h4>
<p>at some point we'll swap the "default" flag for everything</p>



<a name="131224734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131224734" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131224734">(Aug 10 2018 at 08:38)</a>:</h4>
<p>the work you've already done gives me a lot of confidence this won't cause the compiler to fall over :)</p>



<a name="131229657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131229657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131229657">(Aug 10 2018 at 10:35)</a>:</h4>
<p>pushed some commits to part 4. libstd, librustc_mir, and librustc_codegen_llvm build! eddyb's suggestion on changing the signature solved the error. just to check, builtins also successfully built locally</p>



<a name="131229660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131229660" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131229660">(Aug 10 2018 at 10:35)</a>:</h4>
<p>now to see if it passes on travis and it should be good to go</p>



<a name="131836451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2353172-nll-bootstrap/near/131836451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> memoryruins <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2353172-nll-bootstrap.html#131836451">(Aug 10 2018 at 17:31)</a>:</h4>
<p>ayyy it passed</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
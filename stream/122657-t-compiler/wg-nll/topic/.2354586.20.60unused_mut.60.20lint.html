<html>
<head><meta charset="utf-8"><title>#54586 `unused_mut` lint · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html">#54586 `unused_mut` lint</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="135042963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135042963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135042963">(Oct 02 2018 at 15:21)</a>:</h4>
<p><span class="user-mention" data-user-id="128294">@blitzerr</span> I was thinking this would be a good "next PR"</p>



<a name="135043014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135043014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135043014">(Oct 02 2018 at 15:22)</a>:</h4>
<p>I <em>suspect</em> it's as simple as supressing the message if the variable in question is not marked as "user-defined"</p>



<a name="135043084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135043084" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135043084">(Oct 02 2018 at 15:23)</a>:</h4>
<p>Sure, I can take a look at that.</p>



<a name="135044170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044170" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044170">(Oct 02 2018 at 15:41)</a>:</h4>
<p>Varkor commented that his his pr will fix the issue. You are not convinced ?</p>



<a name="135044178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044178">(Oct 02 2018 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="135044184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044184">(Oct 02 2018 at 15:41)</a>:</h4>
<p>I am not convinced</p>



<a name="135044200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044200">(Oct 02 2018 at 15:41)</a>:</h4>
<p>I can check though; I'm not sure what <span class="user-mention" data-user-id="121053">@varkor</span> meant by that actually</p>



<a name="135044249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044249">(Oct 02 2018 at 15:42)</a>:</h4>
<p>I <em>think</em> they may have meant that they will be giving more errors earlier on but maybe I misunderstood them</p>



<a name="135044501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044501">(Oct 02 2018 at 15:46)</a>:</h4>
<p>oh, I am totally wrong :)</p>



<a name="135044515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044515" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044515">(Oct 02 2018 at 15:46)</a>:</h4>
<p><span class="user-mention" data-user-id="121053">@varkor</span> <em>did</em> include a fix, though it seems only semi-related to the rest of the PR</p>



<a name="135044549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044549">(Oct 02 2018 at 15:47)</a>:</h4>
<p>that said, the fix looks odd to me :)</p>



<a name="135044553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044553">(Oct 02 2018 at 15:47)</a>:</h4>
<p>but we should find another issue I guess</p>



<a name="135044671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135044671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135044671">(Oct 02 2018 at 15:48)</a>:</h4>
<p>left a comment; I also think we could make this particular change earlier</p>



<a name="135046937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135046937" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> blitzerr <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135046937">(Oct 02 2018 at 16:25)</a>:</h4>
<p>" I also think we could make this particular change earlier"<br>
I didn't get that part</p>



<a name="135047783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135047783" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135047783">(Oct 02 2018 at 16:39)</a>:</h4>
<p>sorry, only just seen these messages</p>



<a name="135047861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135047861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135047861">(Oct 02 2018 at 16:40)</a>:</h4>
<p>to summarise: I added a fix for that issue after it appeared as an issue in the uninhabitedness PR — it wasn't immediately related, but because at the time it hadn't been reported, I thought I'd quickly add a fix then and there</p>



<a name="135047870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135047870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135047870">(Oct 02 2018 at 16:41)</a>:</h4>
<p>I was also in a bit of a rush, so my "solution" was a bit hacky</p>



<a name="135047874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135047874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135047874">(Oct 02 2018 at 16:41)</a>:</h4>
<p>I'm testing an updated version now, which seems more like the correct fix</p>



<a name="135047948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135047948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135047948">(Oct 02 2018 at 16:42)</a>:</h4>
<p>didn't realise someone else wanted to look at this, sorry!</p>



<a name="135051261"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135051261" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135051261">(Oct 02 2018 at 17:42)</a>:</h4>
<p><span class="user-mention" data-user-id="121053">@varkor</span> do you plan to open a separate PR with the fix?</p>



<a name="135071162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135071162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135071162">(Oct 02 2018 at 23:43)</a>:</h4>
<p>it depends whether the uninhabited PR seems ready now / very soon — then it'd be slightly less work for bors<br>
I'm happy to split it out into a separate PR if that's clearer, though</p>



<a name="135071237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135071237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135071237">(Oct 02 2018 at 23:45)</a>:</h4>
<p>(I can do that tomorrow if so)</p>



<a name="135102394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2354586%20%60unused_mut%60%20lint/near/135102394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> varkor <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2354586.20.60unused_mut.60.20lint.html#135102394">(Oct 03 2018 at 13:15)</a>:</h4>
<p>I've split out the fix into <a href="https://github.com/rust-lang/rust/pull/54787" target="_blank" title="https://github.com/rust-lang/rust/pull/54787">https://github.com/rust-lang/rust/pull/54787</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>pr-52809-and-52793 · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html">pr-52809-and-52793</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="130719785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130719785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130719785">(Aug 01 2018 at 15:00)</a>:</h4>
<p>Just an FYI <span class="user-mention" data-user-id="116083">@pnkfelix</span> in case you've not noticed, I updated/responded to feedback on <a href="https://github.com/rust-lang/rust/issues/52809" target="_blank" title="https://github.com/rust-lang/rust/issues/52809">#52809</a> and <a href="https://github.com/rust-lang/rust/issues/52793" target="_blank" title="https://github.com/rust-lang/rust/issues/52793">#52793</a>.</p>



<a name="130719821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130719821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130719821">(Aug 01 2018 at 15:00)</a>:</h4>
<p>ah thanks for the ping</p>



<a name="130720345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130720345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130720345">(Aug 01 2018 at 15:06)</a>:</h4>
<p>Ah, I had no idea about <code>#[rustc_error]</code> - I'll need to remember that in future.</p>



<a name="130720762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130720762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130720762">(Aug 01 2018 at 15:13)</a>:</h4>
<p>that's good, because i just added a note asking you to use it on <a href="https://github.com/rust-lang/rust/issues/52793" target="_blank" title="https://github.com/rust-lang/rust/issues/52793">#52793</a>. :)</p>



<a name="130720839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130720839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130720839">(Aug 01 2018 at 15:14)</a>:</h4>
<p>(you shouldn't need to add an explicit use of NLL to the test, since <code>compare-mode=nll</code> will take care of that.)</p>



<a name="130720877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130720877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130720877">(Aug 01 2018 at 15:15)</a>:</h4>
<p>An alternative approach would be to use the <code>revisions:</code> system to encode all the various variants that one might want to test (AST-borrowck, NLL, 2008 edition migration mode, ...). But that is more effort than is probably warranted in this case.</p>



<a name="130720982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130720982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130720982">(Aug 01 2018 at 15:16)</a>:</h4>
<p>I wasn't sure if revisions was supported in <code>ui</code> tests.</p>



<a name="130720996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130720996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130720996">(Aug 01 2018 at 15:16)</a>:</h4>
<p>yeah they are</p>



<a name="130721009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721009">(Aug 01 2018 at 15:17)</a>:</h4>
<p>The interaction with <code>compare-mode=nll</code> can sometimes be tricky</p>



<a name="130721023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721023" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721023">(Aug 01 2018 at 15:17)</a>:</h4>
<p>but it basically ends up being something where you can have R*2 stderr files, where R is the number of revisions</p>



<a name="130721049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721049" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721049">(Aug 01 2018 at 15:18)</a>:</h4>
<p>file.rev1.err, file.rev2.err, ..., file.revN.err, file.rev1.nll.err, file.rev2.nll.err, ..., file.revN.nll.err</p>



<a name="130721083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721083">(Aug 01 2018 at 15:18)</a>:</h4>
<p>but we don't encounter that often</p>



<a name="130721089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721089" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721089">(Aug 01 2018 at 15:18)</a>:</h4>
<p>Fair enough.</p>



<a name="130721091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721091">(Aug 01 2018 at 15:18)</a>:</h4>
<p>and I actually added a way to opt out of compare-mode</p>



<a name="130721109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721109" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721109">(Aug 01 2018 at 15:18)</a>:</h4>
<p>in order to sidestep a nasty case where the revisions I wanted to encode were meant to inject their own <code>-Z borrowck</code> flag usage</p>



<a name="130721131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721131">(Aug 01 2018 at 15:19)</a>:</h4>
<p>You can see it in this test case here: <a href="https://github.com/pnkfelix/rust/blob/9f05f29e564c03a432df78f7c4b6421e4fb1a338/src/test/ui/borrowck/borrowck-migrate-to-nll.rs#L22" target="_blank" title="https://github.com/pnkfelix/rust/blob/9f05f29e564c03a432df78f7c4b6421e4fb1a338/src/test/ui/borrowck/borrowck-migrate-to-nll.rs#L22">https://github.com/pnkfelix/rust/blob/9f05f29e564c03a432df78f7c4b6421e4fb1a338/src/test/ui/borrowck/borrowck-migrate-to-nll.rs#L22</a></p>



<a name="130721215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721215">(Aug 01 2018 at 15:20)</a>:</h4>
<p>anyway, you really dont have to use revisions in this case. Its simpler and just as effective to let <code>compare-mode=nll</code> do the work.</p>



<a name="130721323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721323">(Aug 01 2018 at 15:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> test should be updated now.</p>



<a name="130721362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721362">(Aug 01 2018 at 15:23)</a>:</h4>
<p>oh great that was a lot quicker than I expected</p>



<a name="130721772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721772">(Aug 01 2018 at 15:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> added the comment.</p>



<a name="130721810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721810">(Aug 01 2018 at 15:31)</a>:</h4>
<p>sweet thanks!</p>



<a name="130721823"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793/near/130721823" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/pr-52809-and-52793.html#130721823">(Aug 01 2018 at 15:31)</a>:</h4>
<p>There may be an extra "output" word in there, but it might just still make sense.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
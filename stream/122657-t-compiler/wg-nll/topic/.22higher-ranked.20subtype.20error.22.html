<html>
<head><meta charset="utf-8"><title>&quot;higher-ranked subtype error&quot; · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html">&quot;higher-ranked subtype error&quot;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="200243475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200243475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200243475">(Jun 09 2020 at 15:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  These error messages are really bad and are one of the few things blocking moving to <code>-Zborrowck=mir</code> by default. I've managed to do better for cases where the error comes from subtyping with a bit of effort. However some of these errors come from constraints generated by canonical queries, where we have no way currently to transfer error information to the caller. Is there an existing plan for how to improve errors from queries?</p>



<a name="200249072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200249072" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200249072">(Jun 09 2020 at 15:46)</a>:</h4>
<p>Not really, I've thought a little about it, but not enough to have a firm plan.</p>



<a name="200249113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200249113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200249113">(Jun 09 2020 at 15:47)</a>:</h4>
<p>I think I was considering a few possibilities</p>



<a name="200249130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200249130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200249130">(Jun 09 2020 at 15:47)</a>:</h4>
<p>One of them was including error information in some form</p>



<a name="200249156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200249156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200249156">(Jun 09 2020 at 15:47)</a>:</h4>
<p>The other was to have some way to "repeat" the computation, but this time get the error information out</p>



<a name="200249171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200249171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200249171">(Jun 09 2020 at 15:47)</a>:</h4>
<p>That would be needed only as a perf optimization</p>



<a name="200256541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200256541" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200256541">(Jun 09 2020 at 16:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> btw I was going to push a test case to <a href="https://github.com/rust-lang/rust/issues/72493">#72493</a> as a kind of "drive-by" fix for <a href="https://github.com/rust-lang/rust/issues/57642">#57642</a></p>



<a name="200277104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200277104" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200277104">(Jun 09 2020 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> I just did a "r+" from you for the PR with that test, hope that's ok :)</p>



<a name="200277140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%22higher-ranked%20subtype%20error%22/near/200277140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.22higher-ranked.20subtype.20error.22.html#200277140">(Jun 09 2020 at 19:19)</a>:</h4>
<p>er actually I'm going to roll that back and do it as a separate PR</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#56477 closure constraint generation · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html">#56477 closure constraint generation</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="150870470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150870470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150870470">(Dec 04 2018 at 19:11)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> any updates on the build failure in <a href="https://github.com/rust-lang/rust/issues/56486" target="_blank" title="https://github.com/rust-lang/rust/issues/56486">#56486</a> ?</p>



<a name="150870484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150870484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150870484">(Dec 04 2018 at 19:11)</a>:</h4>
<p>looks like a pretty bad bug :)</p>



<a name="150870839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150870839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150870839">(Dec 04 2018 at 19:15)</a>:</h4>
<p>Failure is legit, but pretty easy to fix AFAICT (type_of shouldn't be called with a local tcx)</p>



<a name="150870854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150870854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150870854">(Dec 04 2018 at 19:15)</a>:</h4>
<p>Doing a local build now to check if there's further fallout</p>



<a name="150871131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150871131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150871131">(Dec 04 2018 at 19:19)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> question: <span class="user-mention" data-user-id="116015">@Alex Crichton</span> suggests we <em>could</em> do another build with this PR</p>



<a name="150871148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150871148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150871148">(Dec 04 2018 at 19:19)</a>:</h4>
<p>so the question is, would we rather try to get this in the release, or address via a patch release?</p>



<a name="150871158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150871158" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150871158">(Dec 04 2018 at 19:19)</a>:</h4>
<p>do you have a sense for that?</p>



<a name="150873083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150873083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150873083">(Dec 04 2018 at 19:43)</a>:</h4>
<p>I think this probably should be a patch to 1.31. It seems likely that <em>someone</em> will end up writing code that breaks from this.</p>



<a name="150876028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150876028" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150876028">(Dec 04 2018 at 20:19)</a>:</h4>
<p>OK, build should be green now.</p>



<a name="150878698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150878698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150878698">(Dec 04 2018 at 20:58)</a>:</h4>
<p>ok, thanks</p>



<a name="150878714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150878714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150878714">(Dec 04 2018 at 20:58)</a>:</h4>
<p>And it's testing now</p>



<a name="150879159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150879159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150879159">(Dec 04 2018 at 21:05)</a>:</h4>
<p>we <em>might</em> include this in the 1.31.0 release</p>



<a name="150879563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356477%20closure%20constraint%20generation/near/150879563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/.2356477.20closure.20constraint.20generation.html#150879563">(Dec 04 2018 at 21:11)</a>:</h4>
<p>Ok we've discussed on discord and plan to try to include this, we'll do our best!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>compare-mode notes · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html">compare-mode notes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="127206619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206619">(May 28 2018 at 13:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> <span class="user-mention" data-user-id="116013">@qmx</span> here are some notes on the <code>--compare-mode</code> parameter to <code>compiletest</code></p>



<a name="127206674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206674">(May 28 2018 at 13:52)</a>:</h4>
<p>the set of compare "modes" is here: <a href="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/common.rs#L100" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/common.rs#L100">https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/common.rs#L100</a></p>



<a name="127206680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206680">(May 28 2018 at 13:53)</a>:</h4>
<p>there's only one currently (<code>Nll</code>) but the intent is to let people add others as needed.</p>



<a name="127206725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206725">(May 28 2018 at 13:54)</a>:</h4>
<p>you can add the code to parse and print it immediately below the <code>enum</code> definition, using the pattern established for <code>"nll"</code></p>



<a name="127206798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206798">(May 28 2018 at 13:56)</a>:</h4>
<p>I <em>think</em> the only other thing you'd need to change is the code here: <a href="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L1728" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L1728">https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L1728</a></p>



<a name="127206803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206803">(May 28 2018 at 13:56)</a>:</h4>
<p>(which the compiler will tell you anyway once you've added the new variant for polonius)</p>



<a name="127206865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127206865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127206865">(May 28 2018 at 13:58)</a>:</h4>
<p>cool, thanks</p>



<a name="127216345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216345" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216345">(May 28 2018 at 18:23)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <span class="user-mention" data-user-id="116083">@pnkfelix</span>  so ... I'm going to do this now</p>



<a name="127216399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216399">(May 28 2018 at 18:24)</a>:</h4>
<p>I'm going to sit this code on top of previous PR, but I can't really prepare a proper PR until the other one lands, if I'm not wrong there's no way to do that</p>



<a name="127216494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216494">(May 28 2018 at 18:27)</a>:</h4>
<p>sounds fine</p>



<a name="127216507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216507" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216507">(May 28 2018 at 18:27)</a>:</h4>
<p>do we want to compare against nll then?</p>



<a name="127216544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216544">(May 28 2018 at 18:28)</a>:</h4>
<p>so to start talking with code</p>



<a name="127216550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216550">(May 28 2018 at 18:28)</a>:</h4>
<p>that would be ideal</p>



<a name="127216551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216551" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216551">(May 28 2018 at 18:28)</a>:</h4>
<p>I don't think that should be <em>too</em> hard</p>



<a name="127216554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216554">(May 28 2018 at 18:28)</a>:</h4>
<p>I guess we'd have to add some extra "per compare mode" data</p>



<a name="127216563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216563">(May 28 2018 at 18:29)</a>:</h4>
<p>to indicate the "base compare mode" (if any)</p>



<a name="127216571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216571">(May 28 2018 at 18:29)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a></p>



<a name="127216574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216574" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216574">(May 28 2018 at 18:29)</a>:</h4>
<p>yep</p>



<a name="127216576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216576" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216576">(May 28 2018 at 18:29)</a>:</h4>
<p>this PR compares against default</p>



<a name="127216577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216577">(May 28 2018 at 18:29)</a>:</h4>
<p>cool</p>



<a name="127216579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216579">(May 28 2018 at 18:29)</a>:</h4>
<p>anyway as a starting point is that what you wanted?</p>



<a name="127216580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216580">(May 28 2018 at 18:29)</a>:</h4>
<p>I edited the title to include <code>[WIP]</code> which will prevent it from being merged until we are ready :)</p>



<a name="127216583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216583">(May 28 2018 at 18:29)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="127216624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216624">(May 28 2018 at 18:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> does that PR modify compare-mode at all?</p>



<a name="127216627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216627">(May 28 2018 at 18:30)</a>:</h4>
<p>if so, I don't see the corresponding commit</p>



<a name="127216628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216628">(May 28 2018 at 18:30)</a>:</h4>
<p>maybe you didn't push it :)</p>



<a name="127216632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216632">(May 28 2018 at 18:31)</a>:</h4>
<p>:)</p>



<a name="127216633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216633">(May 28 2018 at 18:31)</a>:</h4>
<p>now is there</p>



<a name="127216642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216642">(May 28 2018 at 18:31)</a>:</h4>
<p>that looks right</p>



<a name="127216693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216693" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216693">(May 28 2018 at 18:33)</a>:</h4>
<p>ok, need to figure out how to compare against nll</p>



<a name="127216752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216752">(May 28 2018 at 18:34)</a>:</h4>
<p>so ... with this you can do <code>-Zborrowck=compare</code> and I guess it would compare all the cases against default?</p>



<a name="127216765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216765" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216765">(May 28 2018 at 18:35)</a>:</h4>
<p>if that's the case we want to swap default (current stable behavior) with nll</p>



<a name="127216767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216767">(May 28 2018 at 18:35)</a>:</h4>
<p>because we want default vs nll and nll vs polonius</p>



<a name="127216811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216811">(May 28 2018 at 18:36)</a>:</h4>
<p>I'm confused</p>



<a name="127216814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216814">(May 28 2018 at 18:36)</a>:</h4>
<p>are you saying, we would <em>also</em> modify the behavior of <code>borrowck=compare</code>?</p>



<a name="127216816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216816">(May 28 2018 at 18:36)</a>:</h4>
<p>if so, that seems like a separate thing, and I wouldn't worry about it</p>



<a name="127216883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216883" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216883">(May 28 2018 at 18:38)</a>:</h4>
<p>let me ask this better</p>



<a name="127216889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216889">(May 28 2018 at 18:39)</a>:</h4>
<p>how does compare-mode works from a user perspective?</p>



<a name="127216897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216897">(May 28 2018 at 18:39)</a>:</h4>
<p>you pass --compare-mode nll as flag and you get what exactly?</p>



<a name="127216948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216948">(May 28 2018 at 18:40)</a>:</h4>
<p>I guess it runs the whole test suite and compare nll vs default and gives diffs or something like that?</p>



<a name="127216958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216958" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216958">(May 28 2018 at 18:41)</a>:</h4>
<p>nope</p>



<a name="127216959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216959">(May 28 2018 at 18:41)</a>:</h4>
<p>:)</p>



<a name="127216961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216961">(May 28 2018 at 18:41)</a>:</h4>
<p>I mean, sort of</p>



<a name="127216963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216963">(May 28 2018 at 18:41)</a>:</h4>
<p>it runs the tests in NLL mode</p>



<a name="127216965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216965">(May 28 2018 at 18:41)</a>:</h4>
<p>for each test, it looks first for a <code>foo.nll.stderr</code> reference</p>



<a name="127216967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216967">(May 28 2018 at 18:41)</a>:</h4>
<p>if it finds one, it compares the output against that</p>



<a name="127216969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127216969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127216969">(May 28 2018 at 18:42)</a>:</h4>
<p>otherwise, it looks for <code>foo.stderr</code> (the normal output) and compares against <em>that</em></p>



<a name="127217009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217009">(May 28 2018 at 18:42)</a>:</h4>
<p>if the output doesn't match, it errors, as usual</p>



<a name="127217012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217012">(May 28 2018 at 18:42)</a>:</h4>
<p>the idea then is that — once everything is passing — you can search for <code>*.nll.stderr</code> and you see which tests have output in NLL mode that differs from the output in regular mode</p>



<a name="127217014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217014">(May 28 2018 at 18:42)</a>:</h4>
<p>so what we would do differently here is</p>



<a name="127217016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217016">(May 28 2018 at 18:42)</a>:</h4>
<p>in polonius mode we would first look for <code>foo.polonius.stderr</code></p>



<a name="127217019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217019">(May 28 2018 at 18:42)</a>:</h4>
<p>I see when in polonius we need to check foo.polonius.stderr otherwise foo.nll.stderr</p>



<a name="127217020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217020">(May 28 2018 at 18:42)</a>:</h4>
<p>?</p>



<a name="127217021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217021">(May 28 2018 at 18:43)</a>:</h4>
<p>if we fail to find that, we would look for <code>foo.nll.stderr</code></p>



<a name="127217022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217022">(May 28 2018 at 18:43)</a>:</h4>
<p>and .. yeah</p>



<a name="127217026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217026">(May 28 2018 at 18:43)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="127217029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217029">(May 28 2018 at 18:43)</a>:</h4>
<p>well, if no <code>foo.nll.stderr</code>, then look for <code>foo.stderr</code></p>



<a name="127217031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217031">(May 28 2018 at 18:43)</a>:</h4>
<p>ok</p>



<a name="127217033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217033">(May 28 2018 at 18:43)</a>:</h4>
<p>you can then run with <code>--bless</code> (I presume this is impl'd...) and it will create the <code>.polonius.stderr</code> files</p>



<a name="127217034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217034">(May 28 2018 at 18:43)</a>:</h4>
<p>so we can compare</p>



<a name="127217087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217087">(May 28 2018 at 18:45)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="127217088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217088">(May 28 2018 at 18:45)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/bootstrap/test.rs#L1126-L1139" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/bootstrap/test.rs#L1126-L1139">https://github.com/rust-lang/rust/blob/master/src/bootstrap/test.rs#L1126-L1139</a></p>



<a name="127217130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217130">(May 28 2018 at 18:46)</a>:</h4>
<p>it run the tests in the new mode and old mode?</p>



<a name="127217131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217131">(May 28 2018 at 18:46)</a>:</h4>
<p>or what's the first <code>try_run</code> doing?</p>



<a name="127217149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217149">(May 28 2018 at 18:47)</a>:</h4>
<p>I mean, seems like it runs both things but that contradicts what you say that it runs the mode you passed and just compare with the stderr file</p>



<a name="127217197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217197">(May 28 2018 at 18:49)</a>:</h4>
<p>I don't believe it runs both things</p>



<a name="127217198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217198" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217198">(May 28 2018 at 18:49)</a>:</h4>
<p>but let me check :)</p>



<a name="127217200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217200">(May 28 2018 at 18:49)</a>:</h4>
<p>well, also, you are looking at the wrong code...</p>



<a name="127217202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217202">(May 28 2018 at 18:49)</a>:</h4>
<p>:P</p>



<a name="127217248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217248" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217248">(May 28 2018 at 18:50)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L2894-L2907" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L2894-L2907">https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L2894-L2907</a></p>



<a name="127217249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217249">(May 28 2018 at 18:50)</a>:</h4>
<p>that is maybe more the relevant code</p>



<a name="127217253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217253">(May 28 2018 at 18:50)</a>:</h4>
<p>what does the compare-mode in the code I pasted means?</p>



<a name="127217260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217260">(May 28 2018 at 18:51)</a>:</h4>
<p>same thing probably, but that's the <code>x.py</code> sources</p>



<a name="127217265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217265" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217265">(May 28 2018 at 18:51)</a>:</h4>
<p>or not even</p>



<a name="127217268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217268">(May 28 2018 at 18:51)</a>:</h4>
<p>ok</p>



<a name="127217269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217269">(May 28 2018 at 18:51)</a>:</h4>
<p>it probably does run with both modes</p>



<a name="127217314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217314">(May 28 2018 at 18:52)</a>:</h4>
<p>if it runs in both modes I guess I need for polonius to run in polonius and nll</p>



<a name="127217318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217318">(May 28 2018 at 18:53)</a>:</h4>
<p>and not just changing the paths</p>



<a name="127217325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217325">(May 28 2018 at 18:54)</a>:</h4>
<p>no</p>



<a name="127217365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217365">(May 28 2018 at 18:54)</a>:</h4>
<p>we do not want to change the bootstrap sequence to run polonius :)</p>



<a name="127217366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217366">(May 28 2018 at 18:54)</a>:</h4>
<p>we just want to make it possible to run by hand ...</p>



<a name="127217368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217368" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217368">(May 28 2018 at 18:54)</a>:</h4>
<p>or maybe I don't follow?</p>



<a name="127217498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217498">(May 28 2018 at 18:58)</a>:</h4>
<p>hmm I see</p>



<a name="127217757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127217757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127217757">(May 28 2018 at 19:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I've pushed something, how to you test this you said?</p>



<a name="127221717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221717">(May 28 2018 at 21:20)</a>:</h4>
<p>seems like it would be useful to add <code>--compare-mode</code> as an argument to <code>x.py test</code></p>



<a name="127221720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221720">(May 28 2018 at 21:20)</a>:</h4>
<p>I could drop a few notes on how to do that <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> if you want</p>



<a name="127221778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221778">(May 28 2018 at 21:22)</a>:</h4>
<p>yes</p>



<a name="127221784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221784" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221784">(May 28 2018 at 21:23)</a>:</h4>
<p>sharing the output</p>



<a name="127221785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221785">(May 28 2018 at 21:23)</a>:</h4>
<p>your trick worked</p>



<a name="127221825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221825">(May 28 2018 at 21:24)</a>:</h4>
<p><code>test result: FAILED. 1389 passed; 57 failed; 19 ignored; 0 measured; 0 filtered out</code></p>



<a name="127221831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221831">(May 28 2018 at 21:24)</a>:</h4>
<p>if everything is right, this ^ is what's going on</p>



<a name="127221832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221832">(May 28 2018 at 21:24)</a>:</h4>
<p><a href="https://gist.github.com/spastorino/ed32ad31bb3f094aa86d103f5d9cc507" target="_blank" title="https://gist.github.com/spastorino/ed32ad31bb3f094aa86d103f5d9cc507">https://gist.github.com/spastorino/ed32ad31bb3f094aa86d103f5d9cc507</a></p>



<a name="127221980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127221980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127221980">(May 28 2018 at 21:29)</a>:</h4>
<p>I think there might be some issues with update-all-references</p>



<a name="127222127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127222127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127222127">(May 28 2018 at 21:33)</a>:</h4>
<p>cool can't look in depth now but if you wanted to add a <code>--compare-mode</code> option,</p>



<a name="127222132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127222132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127222132">(May 28 2018 at 21:33)</a>:</h4>
<p>I would edit this file I think <a href="https://github.com/rust-lang/rust/blob/master/src/bootstrap/flags.rs" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/bootstrap/flags.rs">https://github.com/rust-lang/rust/blob/master/src/bootstrap/flags.rs</a></p>



<a name="127222172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127222172" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127222172">(May 28 2018 at 21:34)</a>:</h4>
<p>trying to follow the model of <code>test-args</code></p>



<a name="127222237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127222237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127222237">(May 28 2018 at 21:36)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="127224482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127224482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127224482">(May 28 2018 at 22:59)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="116009">@nikomatsakis</span> I had some spare minutes and committed the thing</p>



<a name="127224483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127224483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127224483">(May 28 2018 at 22:59)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a></p>



<a name="127226230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226230">(May 29 2018 at 00:05)</a>:</h4>
<p>That sounds more complicated than what I was imagining</p>



<a name="127226268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226268">(May 29 2018 at 00:06)</a>:</h4>
<p>Note that today compare-mode does not <em>itself</em> do any comparison</p>



<a name="127226273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226273">(May 29 2018 at 00:06)</a>:</h4>
<p>It just provides a hook for feeding in an alternative set of expected diagnostics</p>



<a name="127226276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226276">(May 29 2018 at 00:06)</a>:</h4>
<p>what are you referring to <span class="user-mention" data-user-id="116083">@pnkfelix</span> by "that"?</p>



<a name="127226282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226282">(May 29 2018 at 00:07)</a>:</h4>
<p>“That” is <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> ‘s messages about employing -Zborrowck-mode=compare</p>



<a name="127226322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226322">(May 29 2018 at 00:08)</a>:</h4>
<p>ah, yes, agreed.</p>



<a name="127226327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226327">(May 29 2018 at 00:09)</a>:</h4>
<p>All I was picturing was revising the bit of code that currently decides what <code>.mode.stderr</code> file to fall back on</p>



<a name="127226373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226373">(May 29 2018 at 00:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> this is what <a href="https://github.com/rust-lang/rust/pull/51138/" target="_blank" title="https://github.com/rust-lang/rust/pull/51138/">https://github.com/rust-lang/rust/pull/51138/</a> does</p>



<a name="127226756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226756">(May 29 2018 at 00:25)</a>:</h4>
<p>Ah okay. That’s basically all I imagined we’d use for now.</p>



<a name="127226762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226762" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226762">(May 29 2018 at 00:25)</a>:</h4>
<p>not sure I follow</p>



<a name="127226802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226802">(May 29 2018 at 00:26)</a>:</h4>
<p>Though I too expected a more tabular approach. I considered a parent mapping, but I worry that could yield infinite loops if people set up bidirectional parent chain</p>



<a name="127226852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226852" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226852">(May 29 2018 at 00:28)</a>:</h4>
<p>seems like "don't do that" is an acceptable answer =)</p>



<a name="127226860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226860">(May 29 2018 at 00:29)</a>:</h4>
<p>My “table” was going to be a method on the enum that produces the &amp;[&amp;str]  of fallback strings to look for. Then it’s just a for loop; termination is self-evident.</p>



<a name="127226864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226864">(May 29 2018 at 00:29)</a>:</h4>
<p>seems also ok</p>



<a name="127226910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226910">(May 29 2018 at 00:30)</a>:</h4>
<p>I didn't understand quite correct, is the PR wrong in some way?</p>



<a name="127226913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226913">(May 29 2018 at 00:30)</a>:</h4>
<p>not wrong, just more hard-coded than expected; I left some comments</p>



<a name="127226914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226914">(May 29 2018 at 00:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> pr is not “wrong”</p>



<a name="127226915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226915">(May 29 2018 at 00:30)</a>:</h4>
<p>I’m just saying I agree with Niko’s nitpick</p>



<a name="127226922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226922" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226922">(May 29 2018 at 00:31)</a>:</h4>
<p>But that’s something we can revise later</p>



<a name="127226924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226924" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226924">(May 29 2018 at 00:31)</a>:</h4>
<p>what's the nitpick?</p>



<a name="127226925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226925">(May 29 2018 at 00:31)</a>:</h4>
<p>When we have more variants in the enum</p>



<a name="127226926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226926">(May 29 2018 at 00:31)</a>:</h4>
<p>I don't remember how the command-line options for compare-mode are specified</p>



<a name="127226927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226927">(May 29 2018 at 00:31)</a>:</h4>
<p>I think in my ideal world there would be some central "table" defined either using a macro or a constant</p>



<a name="127226928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226928">(May 29 2018 at 00:32)</a>:</h4>
<p>that lists each compare mode along with its command line options and parent mode(s) etc</p>



<a name="127226968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226968">(May 29 2018 at 00:32)</a>:</h4>
<p>Probably should just point to the comment on the PR</p>



<a name="127226970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226970">(May 29 2018 at 00:32)</a>:</h4>
<blockquote>
<p>what's the nitpick?</p>
</blockquote>
<p>see <a href="https://github.com/rust-lang/rust/pull/51138#pullrequestreview-123822693" target="_blank" title="https://github.com/rust-lang/rust/pull/51138#pullrequestreview-123822693">this comment</a> <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span></p>



<a name="127226971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226971">(May 29 2018 at 00:32)</a>:</h4>
<p>oh it sounds like Niko was going even further than I was with his thinking</p>



<a name="127226977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226977">(May 29 2018 at 00:33)</a>:</h4>
<p>ahhhh</p>



<a name="127226978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226978">(May 29 2018 at 00:33)</a>:</h4>
<p>sorry was with the phone and had no idea about those comments</p>



<a name="127226981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127226981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127226981">(May 29 2018 at 00:34)</a>:</h4>
<p>yes, definitely agree</p>



<a name="127227022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227022">(May 29 2018 at 00:34)</a>:</h4>
<p><code>Maybe it's not worth making a super general mechanism here, given that we'll hopefully be removing polonius and nll "soon".</code></p>



<a name="127227025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227025">(May 29 2018 at 00:34)</a>:</h4>
<p>this is basically why my code is kind of very specific and easy to remove</p>



<a name="127227033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227033" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227033">(May 29 2018 at 00:35)</a>:</h4>
<p>but yeah agree</p>



<a name="127227073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227073">(May 29 2018 at 00:36)</a>:</h4>
<p>I guess I can implement what Niko said</p>



<a name="127227074"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227074" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227074">(May 29 2018 at 00:36)</a>:</h4>
<p>at minimum a method defined on <code>CompareMode</code> seems fine</p>



<a name="127227075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227075">(May 29 2018 at 00:36)</a>:</h4>
<p>if you want that now</p>



<a name="127227078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227078">(May 29 2018 at 00:37)</a>:</h4>
<p>I'd prefer <em>something</em> more centralized, seems like a small diff</p>



<a name="127227081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227081">(May 29 2018 at 00:37)</a>:</h4>
<p>anyway, i'm going to bed :) we can chat tomorrow</p>



<a name="127227082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127227082" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127227082">(May 29 2018 at 00:37)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="+1">:+1:</span></p>



<a name="127261963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127261963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127261963">(May 29 2018 at 17:03)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> just force pushed this thing with your tiny suggestion</p>



<a name="127261971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127261971" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127261971">(May 29 2018 at 17:04)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a></p>



<a name="127262014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127262014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127262014">(May 29 2018 at 17:04)</a>:</h4>
<p>we can do that table also</p>



<a name="127262022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127262022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127262022">(May 29 2018 at 17:04)</a>:</h4>
<p>or if <span class="user-mention" data-user-id="116109">@Vytautas Astrauskas</span> is interested in doing it I'm more than happy to leave that up to him</p>



<a name="127262027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127262027" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127262027">(May 29 2018 at 17:04)</a>:</h4>
<p>let me know :)</p>



<a name="127264276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127264276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127264276">(May 29 2018 at 17:53)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> I would be interested, but I am not sure about my ability to look properly into it until tomorrow afternoon. (My train has been cancelled because of the obvious reasons and I am now somewhere in France <span class="emoji emoji-263a" title="relaxed">:relaxed:</span>.)</p>



<a name="127264514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127264514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127264514">(May 29 2018 at 17:59)</a>:</h4>
<p>more than happy to leave it up to you :)</p>



<a name="127264608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127264608" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127264608">(May 29 2018 at 18:00)</a>:</h4>
<p>we need this <a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a> merged</p>



<a name="127264720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127264720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127264720">(May 29 2018 at 18:03)</a>:</h4>
<p>OK, then I'll try to get it done. <span class="emoji emoji-263a" title="relaxed">:relaxed:</span></p>



<a name="127264772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127264772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127264772">(May 29 2018 at 18:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a> is ready for review, since the other one is already merged</p>



<a name="127264776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127264776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127264776">(May 29 2018 at 18:04)</a>:</h4>
<p>I guess as soon as CI says so it's ready to merge</p>



<a name="127265050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127265050" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127265050">(May 29 2018 at 18:10)</a>:</h4>
<p>code is wrong :)</p>



<a name="127269384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127269384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127269384">(May 29 2018 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a> should be good now, CI is running <code>mingw-check</code> is green so it will be good I guess :)</p>



<a name="127272997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127272997" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127272997">(May 29 2018 at 20:39)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a> this is now ready for review, CI is green</p>



<a name="127273185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273185" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273185">(May 29 2018 at 20:43)</a>:</h4>
<p>did you address <span class="user-mention" data-user-id="116009">@nikomatsakis</span> 's comment here <a href="https://github.com/rust-lang/rust/pull/51138/commits/3f137432558d891389e09459801a0ccc93c84721#r191282951" target="_blank" title="https://github.com/rust-lang/rust/pull/51138/commits/3f137432558d891389e09459801a0ccc93c84721#r191282951">https://github.com/rust-lang/rust/pull/51138/commits/3f137432558d891389e09459801a0ccc93c84721#r191282951</a> ?</p>



<a name="127273237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273237">(May 29 2018 at 20:44)</a>:</h4>
<p>hmm let me double check this</p>



<a name="127273247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273247">(May 29 2018 at 20:44)</a>:</h4>
<p>yep is the line here <a href="https://github.com/rust-lang/rust/pull/51138/commits/3f137432558d891389e09459801a0ccc93c84721#diff-d5384138c7b75a10635160076a792999R967" target="_blank" title="https://github.com/rust-lang/rust/pull/51138/commits/3f137432558d891389e09459801a0ccc93c84721#diff-d5384138c7b75a10635160076a792999R967">https://github.com/rust-lang/rust/pull/51138/commits/3f137432558d891389e09459801a0ccc93c84721#diff-d5384138c7b75a10635160076a792999R967</a></p>



<a name="127273254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273254" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273254">(May 29 2018 at 20:44)</a>:</h4>
<p>it wasn't going that</p>



<a name="127273473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273473">(May 29 2018 at 20:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> maybe you can just tell me in words: What did you do to respond to Niko's feedback on the x.py changes?</p>



<a name="127273487"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273487" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273487">(May 29 2018 at 20:49)</a>:</h4>
<p>because right now I'm having trouble inferring it from the github presentation</p>



<a name="127273663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273663">(May 29 2018 at 20:53)</a>:</h4>
<blockquote>
<p>it wasn't going that</p>
</blockquote>
<p>also  I do not understand what the above sentence means. :)</p>



<a name="127273706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273706">(May 29 2018 at 20:54)</a>:</h4>
<p>I don't either</p>



<a name="127273707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273707">(May 29 2018 at 20:54)</a>:</h4>
<p>lol</p>



<a name="127273714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273714">(May 29 2018 at 20:54)</a>:</h4>
<p>I tried to say that that line is changed</p>



<a name="127273720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273720">(May 29 2018 at 20:54)</a>:</h4>
<p>and it's doing what Niko suggest</p>



<a name="127273731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273731" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273731">(May 29 2018 at 20:55)</a>:</h4>
<blockquote>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> maybe you can just tell me in words: What did you do to respond to Niko's feedback on the x.py changes?</p>
</blockquote>
<p>what changes specifically?</p>



<a name="127273735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273735">(May 29 2018 at 20:55)</a>:</h4>
<p>oh, so is github just attaching an old comment of niko's to some new code?</p>



<a name="127273741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273741" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273741">(May 29 2018 at 20:55)</a>:</h4>
<p>exactly</p>



<a name="127273742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273742">(May 29 2018 at 20:55)</a>:</h4>
<p>goofy</p>



<a name="127273746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273746">(May 29 2018 at 20:55)</a>:</h4>
<p>I guess that's because Niko commented on a different line</p>



<a name="127273749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273749">(May 29 2018 at 20:55)</a>:</h4>
<p>okay I get it now</p>



<a name="127273752"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273752" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273752">(May 29 2018 at 20:55)</a>:</h4>
<p>for some reason I thought he was pointing you to make an edit somewhere further away</p>



<a name="127273754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273754">(May 29 2018 at 20:55)</a>:</h4>
<p>if about Niko's changes you mean the generalization, I was guessing that we were going to leave that for a followup PR</p>



<a name="127273794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273794">(May 29 2018 at 20:56)</a>:</h4>
<p>/me can't resist showing a screen shot</p>



<a name="127273819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273819">(May 29 2018 at 20:57)</a>:</h4>
<div class="message_inline_image"><a href="https://pasteboard.co/HntnegB.png" target="_blank" title="https://pasteboard.co/HntnegB.png"><img src="https://pasteboard.co/HntnegB.png"></a></div>



<a name="127273869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127273869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127273869">(May 29 2018 at 20:58)</a>:</h4>
<p>that image might explain why I was confusedly trying to identify what niko was asking you to do. :)</p>



<a name="127274297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274297" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274297">(May 29 2018 at 21:06)</a>:</h4>
<p>I see a broken thing</p>



<a name="127274312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274312">(May 29 2018 at 21:07)</a>:</h4>
<p>The actual link is : <a href="https://pasteboard.co/HntnegB.png" target="_blank" title="https://pasteboard.co/HntnegB.png">https://pasteboard.co/HntnegB.png</a></p>
<div class="message_inline_image"><a href="https://pasteboard.co/HntnegB.png" target="_blank" title="https://pasteboard.co/HntnegB.png"><img src="https://pasteboard.co/HntnegB.png"></a></div>



<a name="127274315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274315" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274315">(May 29 2018 at 21:07)</a>:</h4>
<p>got it by clicking and downloading</p>



<a name="127274320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274320">(May 29 2018 at 21:07)</a>:</h4>
<p>zulip wont render it inline</p>



<a name="127274324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274324">(May 29 2018 at 21:07)</a>:</h4>
<p>ahh yeah</p>



<a name="127274329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274329">(May 29 2018 at 21:07)</a>:</h4>
<p>that's why I was telling you</p>



<a name="127274334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274334">(May 29 2018 at 21:07)</a>:</h4>
<p>I think he commented on the other line</p>



<a name="127274335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274335">(May 29 2018 at 21:07)</a>:</h4>
<p>anyway yeah I was just confused by github</p>



<a name="127274380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274380">(May 29 2018 at 21:08)</a>:</h4>
<p>its been r+'ed now</p>



<a name="127274381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274381">(May 29 2018 at 21:08)</a>:</h4>
<p>he commented 968, instead of 967</p>



<a name="127274388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274388">(May 29 2018 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> cool, thanks</p>



<a name="127274398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127274398" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127274398">(May 29 2018 at 21:08)</a>:</h4>
<p><span class="user-mention" data-user-id="116109">@Vytautas Astrauskas</span> you can start the other part when <a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">this</a> is merged, it's now r+</p>



<a name="127342624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127342624" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127342624">(May 31 2018 at 03:20)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/51138" target="_blank" title="https://github.com/rust-lang/rust/pull/51138">https://github.com/rust-lang/rust/pull/51138</a> was merged</p>



<a name="127342625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127342625" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127342625">(May 31 2018 at 03:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116109">@Vytautas Astrauskas</span> ^^^</p>



<a name="127534488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127534488" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127534488">(Jun 04 2018 at 08:22)</a>:</h4>
<p>I have been working on this “table refactoring” and got something wrong. While debugging I noticed that all panics in <code>compiletest</code> seem to be silently ignored.</p>



<a name="127534575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127534575" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127534575">(Jun 04 2018 at 08:25)</a>:</h4>
<p>Could someone explain me why? Also, is it possible to disable this at least temporary?</p>



<a name="127534754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127534754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127534754">(Jun 04 2018 at 08:31)</a>:</h4>
<p>For example, if I change <a href="https://github.com/rust-lang/rust/blob/6232478d26b0feca02fd6660edbf78a5c6327ec5/src/tools/compiletest/src/runtest.rs#L2924" target="_blank" title="https://github.com/rust-lang/rust/blob/6232478d26b0feca02fd6660edbf78a5c6327ec5/src/tools/compiletest/src/runtest.rs#L2924">https://github.com/rust-lang/rust/blob/6232478d26b0feca02fd6660edbf78a5c6327ec5/src/tools/compiletest/src/runtest.rs#L2924</a> to</p>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="cp">#[allow(warnings)]</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">expected_output_path</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">kind</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">PathBuf</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">panic</span><span class="o">!</span><span class="p">();</span><span class="w"></span>
</pre></div>


<p>and run <code>./x.py test</code> I still get <code>Build completed successfully in 0:04:53</code>.</p>



<a name="127538742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127538742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127538742">(Jun 04 2018 at 10:35)</a>:</h4>
<p>I am unaware of the behavior that you describe... it sounds like a big bug to me</p>



<a name="127538749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127538749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127538749">(Jun 04 2018 at 10:35)</a>:</h4>
<p>(perhaps a bug in <code>x.py</code> or its related infrastructure?)</p>



<a name="127540871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540871">(Jun 04 2018 at 11:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> I tried to investigate; however, I do not understand how it works. More specifically, I have not managed to find a place where the panics are caught.</p>



<a name="127540880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540880">(Jun 04 2018 at 11:41)</a>:</h4>
<p>have you tried running <code>compiletest</code> directly rather than via <code>x.py</code> ?</p>



<a name="127540884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540884">(Jun 04 2018 at 11:41)</a>:</h4>
<p>if you do <code>x.py</code> with <code>--verbose</code>, then you'll see the actual command lines it is issuing</p>



<a name="127540885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540885">(Jun 04 2018 at 11:41)</a>:</h4>
<p>and then you can run one of those yourself</p>



<a name="127540929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540929">(Jun 04 2018 at 11:42)</a>:</h4>
<p>The idea here would be to isolate whether the panics are being supressed by the <code>compiletest</code> binary somehow, or if they are being caught by python, or something else.</p>



<a name="127540932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540932" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540932">(Jun 04 2018 at 11:42)</a>:</h4>
<blockquote>
<p>have you tried running <code>compiletest</code> directly rather than via <code>x.py</code> ?</p>
</blockquote>
<p>No, I did not. I will try this as soon as it finishes to compile.</p>



<a name="127540933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540933" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540933">(Jun 04 2018 at 11:42)</a>:</h4>
<p>(My hypothesis is that <code>x.py</code> is deliberately capturing the stderr and error exit code as part of its general approach, and then it fails to bubble it up in this case.)</p>



<a name="127540941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127540941" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127540941">(Jun 04 2018 at 11:43)</a>:</h4>
<p>One question: does <code>x.py</code> provide the set of test files to <code>compiletest</code>, or it collects them itself?</p>



<a name="127541002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541002">(Jun 04 2018 at 11:45)</a>:</h4>
<p>I believe <code>x.py</code> can (or must?) supply the root directories for <code>compiletest</code> to use</p>



<a name="127541003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541003">(Jun 04 2018 at 11:45)</a>:</h4>
<p>and then <code>compiletest</code> collects the files starting from those roots</p>



<a name="127541044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541044">(Jun 04 2018 at 11:46)</a>:</h4>
<p>The "can or must?" is a question for me just because I always supply the subset of the full directory set myself when I invoke <code>x.py test</code></p>



<a name="127541052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541052">(Jun 04 2018 at 11:46)</a>:</h4>
<p>I noticed that when I run with <code>--compare-mode nll</code> the version with the <code>panic</code> injected reports <code>test result: FAILED. 0 passed; 4 failed; 3016 ignored; 0 measured; 0 filtered out</code> (note that all tests were ignored).</p>



<a name="127541066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541066">(Jun 04 2018 at 11:47)</a>:</h4>
<p>I see. I will play around. Thanks!</p>



<a name="127541652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541652">(Jun 04 2018 at 12:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> Here is the gist: <a href="https://gist.github.com/vakaras/10f67d18817182c46cc670bcee7d392d" target="_blank" title="https://gist.github.com/vakaras/10f67d18817182c46cc670bcee7d392d">https://gist.github.com/vakaras/10f67d18817182c46cc670bcee7d392d</a></p>



<a name="127541653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541653">(Jun 04 2018 at 12:05)</a>:</h4>
<p>Aha</p>



<a name="127541657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541657" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541657">(Jun 04 2018 at 12:05)</a>:</h4>
<p>The ignored tests</p>



<a name="127541694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541694">(Jun 04 2018 at 12:06)</a>:</h4>
<p>It seems that the problem is in <code>compiletest</code>.</p>



<a name="127541696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541696">(Jun 04 2018 at 12:06)</a>:</h4>
<p>are usually from</p>



<a name="127541699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541699">(Jun 04 2018 at 12:06)</a>:</h4>
<p>the files that are touched</p>



<a name="127541700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541700">(Jun 04 2018 at 12:06)</a>:</h4>
<p>in a previous run</p>



<a name="127541701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541701">(Jun 04 2018 at 12:06)</a>:</h4>
<p>There are files that are stamped</p>



<a name="127541703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541703">(Jun 04 2018 at 12:06)</a>:</h4>
<p>on a given run</p>



<a name="127541706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541706">(Jun 04 2018 at 12:06)</a>:</h4>
<p>to avoid re-running tests unnecessarily</p>



<a name="127541708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541708" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541708">(Jun 04 2018 at 12:06)</a>:</h4>
<p>and I think the timestamp chekcs</p>



<a name="127541711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541711" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541711">(Jun 04 2018 at 12:06)</a>:</h4>
<p>are only compared to the <code>rustc</code> build's timestamp</p>



<a name="127541712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541712">(Jun 04 2018 at 12:06)</a>:</h4>
<p>and not (I think) to the <code>compiletest</code> time stamp</p>



<a name="127541718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541718">(Jun 04 2018 at 12:07)</a>:</h4>
<p>So this might not be a bug in <code>compiletest</code> itself</p>



<a name="127541721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541721">(Jun 04 2018 at 12:07)</a>:</h4>
<p>the way I would double check this</p>



<a name="127541722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541722">(Jun 04 2018 at 12:07)</a>:</h4>
<p>is remove the timestamp files</p>



<a name="127541775"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541775" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541775">(Jun 04 2018 at 12:08)</a>:</h4>
<p>Where can I find these timestamp files?</p>



<a name="127541778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541778">(Jun 04 2018 at 12:08)</a>:</h4>
<p>I was just finding the directory</p>



<a name="127541781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541781">(Jun 04 2018 at 12:08)</a>:</h4>
<p>look in your equivalent of:</p>



<a name="127541786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541786">(Jun 04 2018 at 12:09)</a>:</h4>
<p><code>build/x86_64-unknown-linux-gnu/test/</code></p>



<a name="127541996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127541996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127541996">(Jun 04 2018 at 12:14)</a>:</h4>
<p>So, after executing <code>rm -f build/x86_64-unknown-linux-gnu/test/ui/*/stamp</code>, I get <code>test result: ok. 504 passed; 0 failed; 982 ignored; 0 measured; 0 filtered out</code>.</p>



<a name="127542126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542126" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542126">(Jun 04 2018 at 12:18)</a>:</h4>
<p>Ok, I am confused. When I executed <code>./x.py test</code> again, I got many messages like this: <code>thread '[ui] ui/svh-change-type-static.rs' panicked at 'explicit panic', tools/compiletest/src/runtest.rs:2883:9</code>.</p>



<a name="127542318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542318">(Jun 04 2018 at 12:24)</a>:</h4>
<p>Sorry, I don't</p>



<a name="127542324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542324">(Jun 04 2018 at 12:24)</a>:</h4>
<p>I don't think there's enough info about the command sequence</p>



<a name="127542328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542328">(Jun 04 2018 at 12:24)</a>:</h4>
<p>for me to provide useful feedback</p>



<a name="127542334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542334">(Jun 04 2018 at 12:24)</a>:</h4>
<p>I guess keep your eye out for future seeming discrepancies, and if you can reproduce one reliably, then post the command sequence to a gist or something and share it</p>



<a name="127542336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542336">(Jun 04 2018 at 12:25)</a>:</h4>
<p>I think I finally got it. So, it seems that you were right.</p>



<a name="127542344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542344">(Jun 04 2018 at 12:25)</a>:</h4>
<p>but at this point the important thing is that you are now observing the panics.</p>



<a name="127542426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542426" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542426">(Jun 04 2018 at 12:27)</a>:</h4>
<p>I think repro steps are (still need to test):<br>
1. Clone repository.<br>
2. Run <code>./x.py build &amp;&amp; ./x.py test</code> – all tests should pass.<br>
3. Modify some of the <code>compiletest</code> files in a way that causes a panic.<br>
4. Run <code>./x.py test</code> – since <code>rustc</code> was not recompiled and all tests were already executed with it, all of them are ignored.</p>



<a name="127542579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542579">(Jun 04 2018 at 12:31)</a>:</h4>
<p>Right, so maybe the core problem here is that we are not comparing the file timestamp for <code>compiletest</code> itself to the timestamps of the tests, right?</p>



<a name="127542646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542646">(Jun 04 2018 at 12:33)</a>:</h4>
<p>I think so.</p>



<a name="127542655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542655">(Jun 04 2018 at 12:33)</a>:</h4>
<p>Would it be hard to implement such comparison?</p>



<a name="127542802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542802">(Jun 04 2018 at 12:37)</a>:</h4>
<p>Probably not. (Famous last words.)</p>



<a name="127542805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542805">(Jun 04 2018 at 12:37)</a>:</h4>
<p>But check if there's already a bug filed about this</p>



<a name="127542845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127542845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127542845">(Jun 04 2018 at 12:38)</a>:</h4>
<p>because sometimes when there is such a bug, there's also a record of previous attempts to fix (and where they went wrong or why it was harder than expected)</p>



<a name="127543061"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127543061" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127543061">(Jun 04 2018 at 12:45)</a>:</h4>
<p>I do not see any related issue in the issue tracker.</p>



<a name="127543258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/compare-mode%20notes/near/127543258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Vytautas Astrauskas [he/him] <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/compare-mode.20notes.html#127543258">(Jun 04 2018 at 12:51)</a>:</h4>
<p>I will try to fix this one once I have a free moment.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#56254 prohibit 2pb with existing borrows · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html">#56254 prohibit 2pb with existing borrows</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="159103998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159103998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159103998">(Feb 21 2019 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> <span class="user-mention" data-user-id="120791">@RalfJ</span> <span class="user-mention" data-user-id="116009">@nikomatsakis</span> What is the next step here after <a href="https://github.com/rust-lang/rust/issues/57609" target="_blank" title="https://github.com/rust-lang/rust/issues/57609">#57609</a> lands? Do we still want to try a crater run and make this a warning somehow?</p>



<a name="159104062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104062">(Feb 21 2019 at 21:02)</a>:</h4>
<p>I think so?</p>



<a name="159104067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104067">(Feb 21 2019 at 21:02)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> you mean for the 2PB restriction?</p>



<a name="159104070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104070">(Feb 21 2019 at 21:02)</a>:</h4>
<p>I think we do</p>



<a name="159104090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104090" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104090">(Feb 21 2019 at 21:02)</a>:</h4>
<p>After <a href="https://github.com/rust-lang/rust/issues/57609" target="_blank" title="https://github.com/rust-lang/rust/issues/57609">#57609</a> lands, presumably we can make it an error with relative ease, which would permit a crater run, right?</p>



<a name="159104101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104101">(Feb 21 2019 at 21:02)</a>:</h4>
<p><del>(issue number in topic seems wrong  FYI ...)</del> (fixed now)</p>



<a name="159104106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104106" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104106">(Feb 21 2019 at 21:02)</a>:</h4>
<p>The warning kind of comes for free with the NLL migration infrastructure, right?</p>



<a name="159104143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104143">(Feb 21 2019 at 21:03)</a>:</h4>
<p>Correct issue is <a href="https://github.com/rust-lang/rust/issues/56254" target="_blank" title="https://github.com/rust-lang/rust/issues/56254">#56254</a></p>



<a name="159104376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159104376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159104376">(Feb 21 2019 at 21:06)</a>:</h4>
<blockquote>
<p>The warning kind of comes for free with the NLL migration infrastructure, right?</p>
</blockquote>
<p>No, because it will be an error without NLL since there are no 2PB there.</p>



<a name="159105380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159105380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159105380">(Feb 21 2019 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> I see, interesting point</p>



<a name="159105384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159105384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159105384">(Feb 21 2019 at 21:20)</a>:</h4>
<p>well, let's start off with a hard error and do a crater run</p>



<a name="159159396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159159396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159159396">(Feb 22 2019 at 14:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> are you happy to r+ <a href="https://github.com/rust-lang/rust/issues/57609" target="_blank" title="https://github.com/rust-lang/rust/issues/57609">#57609</a> ?</p>



<a name="159159493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159159493" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159159493">(Feb 22 2019 at 14:20)</a>:</h4>
<p>yeah i'll do that now</p>



<a name="159274488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159274488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159274488">(Feb 24 2019 at 12:32)</a>:</h4>
<p><span class="user-mention" data-user-id="120791">@RalfJ</span> can you merge <a href="https://github.com/rust-lang/miri/pull/644" target="_blank" title="https://github.com/rust-lang/miri/pull/644">https://github.com/rust-lang/miri/pull/644</a> ?</p>



<a name="159279883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/159279883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> RalfJ <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#159279883">(Feb 24 2019 at 15:27)</a>:</h4>
<p>so this is not intended to compile any more? sure, will do.</p>



<a name="160728386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/160728386" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#160728386">(Mar 13 2019 at 21:22)</a>:</h4>
<p>okay <span class="user-mention" data-user-id="116118">@Matthew Jasper</span>, I've pushed the commits that turn the new reservation errors/warnings into instances of a lint diagnostic.</p>



<a name="161250970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/161250970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#161250970">(Mar 20 2019 at 14:14)</a>:</h4>
<p>I am sorry <span class="user-mention" data-user-id="116118">@Matthew Jasper</span> that it is taking the lang team so long to resolve the issues here.</p>



<a name="161251011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/161251011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#161251011">(Mar 20 2019 at 14:15)</a>:</h4>
<p>This morning I wondered if we should switch the lint to default to <code>#![allow]</code> just so we can <em>land the PR</em></p>



<a name="161251016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/161251016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#161251016">(Mar 20 2019 at 14:15)</a>:</h4>
<p>and delay the lang teams decision about defaults</p>



<a name="161251029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2356254%20prohibit%202pb%20with%20existing%20borrows/near/161251029" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2356254.20prohibit.202pb.20with.20existing.20borrows.html#161251029">(Mar 20 2019 at 14:15)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> do you have thoughts on the above idea? ^</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>profiling · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html">profiling</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="130269699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269699">(Jul 25 2018 at 11:37)</a>:</h4>
<p><span class="user-mention" data-user-id="116113">@lqd</span> so we were talking about profiling yesterday</p>



<a name="130269768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269768">(Jul 25 2018 at 11:38)</a>:</h4>
<p>I'm gathering the up-to-date crate timings (just before gathering the callgrind profile) now</p>



<a name="130269786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269786">(Jul 25 2018 at 11:39)</a>:</h4>
<p>I also have -Zverbosed html5ever and the &amp;str inside the tuples, were indeed of different regions, instead of 'static :/</p>



<a name="130269803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269803">(Jul 25 2018 at 11:40)</a>:</h4>
<p>yeah; we could maybe have some special case though for checking statics</p>



<a name="130269845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269845">(Jul 25 2018 at 11:40)</a>:</h4>
<p>where we don't make as many variables</p>



<a name="130269859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269859">(Jul 25 2018 at 11:40)</a>:</h4>
<p>or we do something else smart</p>



<a name="130269871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269871" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269871">(Jul 25 2018 at 11:40)</a>:</h4>
<blockquote>
<p>I'm gathering the up-to-date crate timings (just before gathering the callgrind profile) now</p>
</blockquote>
<p>where are those?</p>



<a name="130269881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269881">(Jul 25 2018 at 11:40)</a>:</h4>
<p><a href="https://hackmd.io/3r1ZnkUyRD2NMU-dnm_RPg" target="_blank" title="https://hackmd.io/3r1ZnkUyRD2NMU-dnm_RPg">https://hackmd.io/3r1ZnkUyRD2NMU-dnm_RPg</a></p>



<a name="130269884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269884">(Jul 25 2018 at 11:40)</a>:</h4>
<p>I was curious to try and get some sort of profile of e.g. <code>cargo</code></p>



<a name="130269902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269902">(Jul 25 2018 at 11:41)</a>:</h4>
<p>clap-rs and inflate remain stubbornly high, though I know that they are sort of "not master" versions</p>



<a name="130269923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269923">(Jul 25 2018 at 11:41)</a>:</h4>
<p>huh, wait, is NLL <em>faster</em> on html5ever?</p>



<a name="130269970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269970" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269970">(Jul 25 2018 at 11:42)</a>:</h4>
<p>also, we should add a ratio</p>



<a name="130269983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269983">(Jul 25 2018 at 11:42)</a>:</h4>
<p>hmm lemme check again my numbers I might have skipped a column :/</p>



<a name="130269984"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130269984" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130269984">(Jul 25 2018 at 11:42)</a>:</h4>
<p>(doing that now)</p>



<a name="130270037"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270037" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270037">(Jul 25 2018 at 11:44)</a>:</h4>
<p>(sentry-cli's deps are so long to build I had to skip it for now)</p>



<a name="130270044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270044">(Jul 25 2018 at 11:44)</a>:</h4>
<p>ok, I added some ratios</p>



<a name="130270046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270046">(Jul 25 2018 at 11:44)</a>:</h4>
<p>it's..actually looking pretty good</p>



<a name="130270054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270054">(Jul 25 2018 at 11:45)</a>:</h4>
<p>most of them are &lt;10% it seems?</p>



<a name="130270117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270117" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270117">(Jul 25 2018 at 11:46)</a>:</h4>
<p>yes it's not bad in many cases</p>



<a name="130270149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270149">(Jul 25 2018 at 11:47)</a>:</h4>
<p>I'm triyng to decide which would be good to dig into, or if we think we are "done" here</p>



<a name="130270151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270151">(Jul 25 2018 at 11:47)</a>:</h4>
<p>yeah it was 1.28 for html5ever instead of 1.88</p>



<a name="130270187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270187">(Jul 25 2018 at 11:48)</a>:</h4>
<p>hmm?</p>



<a name="130270201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270201">(Jul 25 2018 at 11:48)</a>:</h4>
<p>maybe update the chart? :)</p>



<a name="130270207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270207">(Jul 25 2018 at 11:48)</a>:</h4>
<p>yeah I did update it ;)</p>



<a name="130270246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270246">(Jul 25 2018 at 11:49)</a>:</h4>
<p>so NLL is 10% slower on it rather than faster as I had mistakenly written</p>



<a name="130270493"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270493" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270493">(Jul 25 2018 at 11:55)</a>:</h4>
<p>for html5ever it seems that phf switched from having an inner type wrapping the tuples, to using arrays/slices directly, and that makes all the difference</p>



<a name="130270593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270593" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270593">(Jul 25 2018 at 11:57)</a>:</h4>
<p>I wonder if the thing to do is to look at the older versions for optimizing</p>



<a name="130270595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270595" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270595">(Jul 25 2018 at 11:57)</a>:</h4>
<p>or the newer ones :)</p>



<a name="130270598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270598">(Jul 25 2018 at 11:57)</a>:</h4>
<p>it might be interesting to compare the clap-rs profiles (or inflate profiles) before/after</p>



<a name="130270651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270651">(Jul 25 2018 at 11:58)</a>:</h4>
<p>probably a mix of both old and new :)</p>



<a name="130270671"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270671" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270671">(Jul 25 2018 at 11:58)</a>:</h4>
<p>yeah after gathering those basic times I'll get some profiles, they'll probably be more informative rather than absolutely clear etc, but could be useful</p>



<a name="130270692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270692">(Jul 25 2018 at 11:59)</a>:</h4>
<p>but since it takes so long with valgrind I thought I'd do the easy timings first</p>



<a name="130270854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270854">(Jul 25 2018 at 12:02)</a>:</h4>
<p>that was indeed very helpful</p>



<a name="130270856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270856">(Jul 25 2018 at 12:02)</a>:</h4>
<p>particularly in giving an overall picture</p>



<a name="130270974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130270974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130270974">(Jul 25 2018 at 12:05)</a>:</h4>
<p>weirdly I can't build servo's script because of deps error, so maybe the deps are built without NLLs on perf.rlo and then the crate itself is built with NLLs.; that is, not using RUSTFLAGS. (and it's a complex build process, involving spidermonkey and all so I'm not sure I'll be able to build it at all ;)</p>



<a name="130282430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282430" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282430">(Jul 25 2018 at 15:32)</a>:</h4>
<p>ever do any detailed profiling <span class="user-mention" data-user-id="116113">@lqd</span> ?</p>



<a name="130282471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282471" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282471">(Jul 25 2018 at 15:33)</a>:</h4>
<p>I did manage to do a profile of the modern inflate with and without nll, but as expected callgrind's results are a bit harder for me to make a good use of</p>



<a name="130282518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282518" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282518">(Jul 25 2018 at 15:34)</a>:</h4>
<p>I was doing the older version now, to compare</p>



<a name="130282536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282536">(Jul 25 2018 at 15:34)</a>:</h4>
<p>I can upload them somewhere if you want</p>



<a name="130282556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282556">(Jul 25 2018 at 15:35)</a>:</h4>
<p>can you upload the text output?</p>



<a name="130282561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282561">(Jul 25 2018 at 15:35)</a>:</h4>
<p>I forget how that looks now</p>



<a name="130282692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282692">(Jul 25 2018 at 15:38)</a>:</h4>
<p>it's in a weird text format qcachegrind supports, like</p>
<div class="codehilite"><pre><span></span>version: 1
creator: callgrind-3.11.0
pid: 28740
cmd:  /home/lqd/work/rust/rust/build/x86_64-unknown-linux-gnu/stage2/bin/rustc --crate-name inflate src/lib.rs --crate-type lib --emit=dep-info,metadata -C debuginfo=2 -Zborrowck=mir -Ztwo-phase-borrows --cfg feature=&quot;default&quot; -C metadata=9957d65288bb6b74 -C extra-filename=-9957d65288bb6b74 --out-dir /mnt/d/work/rust/crater/inflate-0.4.3/target/debug/deps -L dependency=/mnt/d/work/rust/crater/inflate-0.4.3/target/debug/deps --extern adler32=/mnt/d/work/rust/crater/inflate-0.4.3/target/debug/deps/libadler32-f8bc9ddd0904ee51.rmeta
part: 1


desc: I1 cache:
desc: D1 cache:
desc: LL cache:

desc: Timerange: Basic block 0 - 380728636
desc: Trigger: Program termination

positions: line
events: Ir
summary: 2054956762


ob=(20) /home/lqd/work/rust/rust/build/x86_64-unknown-linux-gnu/stage2/lib/libproc_macro-a473a3a22af04081.so
fl=(112) ???
fn=(100614) 0x0000000000007fc0
0 9

fn=(100604) 0x0000000000008050
0 8
cob=(2) ???
cfi=(16) ???
cfn=(100610) 0x000000000b6c9f80
calls=1 0
0 63
0 1
cfn=(100614)
calls=1 0
0 9
0 3

fn=(550) 0x0000000000008090
0 17

ob=(35) /home/lqd/work/rust/rust/build/x86_64-unknown-linux-gnu/stage2/lib/librustc_incremental-b08fd497990db280.so
fl=(127) ???
fn=(100560) 0x000000000000d870
0 9

fn=(100550) 0x000000000000d900
0 8
cob=(2)
cfi=(16)
cfn=(100556) 0x0000000006282408
calls=1 0
0 63
0 1
cfn=(100560)
calls=1 0
0 9
0 3

fn=(730) 0x000000000000d940
0 17
</pre></div>



<a name="130282733"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282733" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282733">(Jul 25 2018 at 15:38)</a>:</h4>
<p>versus <a href="/user_uploads/4715/Gjha-N27C73g-ZC9CsbZxV4i/pasted_image.png" target="_blank" title="pasted_image.png">pasted image</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/Gjha-N27C73g-ZC9CsbZxV4i/pasted_image.png" target="_blank" title="pasted image"><img src="/user_uploads/4715/Gjha-N27C73g-ZC9CsbZxV4i/pasted_image.png"></a></div>



<a name="130282782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282782">(Jul 25 2018 at 15:39)</a>:</h4>
<p>I'm not sure I'm not wasting your time with this data :/</p>



<a name="130282786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282786">(Jul 25 2018 at 15:39)</a>:</h4>
<p>I remember there being some tool for outputting the data in text format</p>



<a name="130282791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282791">(Jul 25 2018 at 15:39)</a>:</h4>
<p>njn would know I'm sure</p>



<a name="130282845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282845">(Jul 25 2018 at 15:40)</a>:</h4>
<p>oh the callgrind annotator maybe</p>



<a name="130282891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282891">(Jul 25 2018 at 15:41)</a>:</h4>
<p>yeah I can't remember hmm</p>



<a name="130282902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282902">(Jul 25 2018 at 15:41)</a>:</h4>
<p>I think it was <code>cg_annotate</code>, yes</p>



<a name="130282996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130282996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130282996">(Jul 25 2018 at 15:43)</a>:</h4>
<p>oh it seems to work, I'll convert and upload them</p>



<a name="130283557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130283557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130283557">(Jul 25 2018 at 15:50)</a>:</h4>
<p><a href="https://www.dropbox.com/sh/xf1pq2saznk5eu1/AACapYRtyVQx1TKPzNuaN0Gpa?dl=0" target="_blank" title="https://www.dropbox.com/sh/xf1pq2saznk5eu1/AACapYRtyVQx1TKPzNuaN0Gpa?dl=0">here they are</a></p>
<div class="message_inline_ref"><a href="https://www.dropbox.com/sh/xf1pq2saznk5eu1/AACapYRtyVQx1TKPzNuaN0Gpa?dl=0" target="_blank" title="inflate"><img src="https://www.dropbox.com/static/images/spectrum-icons/generated/content/content-folder_dropbox-large.png"></a><div><div class="message_inline_image_title">inflate</div><desc class="message_inline_image_desc"></desc></div></div>



<a name="130283582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/profiling/near/130283582" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/122657-t-compiler/wg-nll/topic/profiling.html#130283582">(Jul 25 2018 at 15:50)</a>:</h4>
<p>inflate 0.1 is the one on perf.rlo, inflate 0.4.3 the latest release</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
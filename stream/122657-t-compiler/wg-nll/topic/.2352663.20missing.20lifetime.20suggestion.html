<html>
<head><meta charset="utf-8"><title>#52663 missing lifetime suggestion · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html">#52663 missing lifetime suggestion</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="135261686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135261686" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135261686">(Oct 05 2018 at 15:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> or <span class="user-mention" data-user-id="116083">@pnkfelix</span>: I'm looking at <a href="https://github.com/rust-lang/rust/issues/52663#issuecomment-409031734" target="_blank" title="https://github.com/rust-lang/rust/issues/52663#issuecomment-409031734">this comment</a>, the first linked test was tackled by a PR of mine a while ago. The second linked test is missing an error - is that correct or should I look into it? (<a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/issues/issue-13058.stderr" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/test/ui/issues/issue-13058.stderr">current AST</a>/<a href="https://github.com/rust-lang/rust/blob/master/src/test/ui/issues/issue-13058.nll.stderr" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/test/ui/issues/issue-13058.nll.stderr">current NLL</a>)</p>



<a name="135261991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135261991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135261991">(Oct 05 2018 at 15:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> hmm</p>



<a name="135261995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135261995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135261995">(Oct 05 2018 at 15:31)</a>:</h4>
<p>it's not obvious why the AST checker gets an error there to <em>me</em></p>



<a name="135261999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135261999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135261999">(Oct 05 2018 at 15:31)</a>:</h4>
<p>looking a bit more</p>



<a name="135262048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262048">(Oct 05 2018 at 15:32)</a>:</h4>
<p>oh, I .. guess I maybe see</p>



<a name="135262058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262058" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262058">(Oct 05 2018 at 15:32)</a>:</h4>
<p>curious</p>



<a name="135262094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262094" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262094">(Oct 05 2018 at 15:33)</a>:</h4>
<p>looks kind of like a bug to me</p>



<a name="135262192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262192">(Oct 05 2018 at 15:35)</a>:</h4>
<p>In NLL? We should be producing that error?</p>



<a name="135262256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262256">(Oct 05 2018 at 15:36)</a>:</h4>
<p>right, in NLL</p>



<a name="135262271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262271" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262271">(Oct 05 2018 at 15:36)</a>:</h4>
<p>feels like when we invoke <code>iter</code>, we have to infer the lifetime of the trait to be <code>'r</code></p>



<a name="135262287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262287" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262287">(Oct 05 2018 at 15:37)</a>:</h4>
<p>I think we should file a NLL-sound bug on this</p>



<a name="135262301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262301">(Oct 05 2018 at 15:37)</a>:</h4>
<p>and assign it to you, <span class="user-mention" data-user-id="116107">@davidtwco</span> :)</p>



<a name="135262305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262305" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262305">(Oct 05 2018 at 15:37)</a>:</h4>
<p>no good deed and all that</p>



<a name="135262363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262363">(Oct 05 2018 at 15:38)</a>:</h4>
<p><a href="https://play.rust-lang.org/?gist=bc0b3923ca1be86c74365f2e8874f3e8&amp;version=nightly&amp;mode=debug&amp;edition=2015" target="_blank" title="https://play.rust-lang.org/?gist=bc0b3923ca1be86c74365f2e8874f3e8&amp;version=nightly&amp;mode=debug&amp;edition=2015">https://play.rust-lang.org/?gist=bc0b3923ca1be86c74365f2e8874f3e8&amp;version=nightly&amp;mode=debug&amp;edition=2015</a></p>



<a name="135262364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262364">(Oct 05 2018 at 15:38)</a>:</h4>
<p>(I would be happy to help investigate; I think the first thing is we should check out the region constraints that get generaed)</p>



<a name="135262381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262381" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262381">(Oct 05 2018 at 15:38)</a>:</h4>
<p>Unless I've made a mistake, I think the error does come up after the type mismatch is fixed.</p>



<a name="135262397"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262397" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262397">(Oct 05 2018 at 15:39)</a>:</h4>
<p>ah, that..is plausible</p>



<a name="135262405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262405" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262405">(Oct 05 2018 at 15:39)</a>:</h4>
<p>we really should work on making rustc less "phase-y"</p>



<a name="135262408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262408">(Oct 05 2018 at 15:39)</a>:</h4>
<p>but anyway</p>



<a name="135262411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262411">(Oct 05 2018 at 15:39)</a>:</h4>
<p>probably the type mismatch can be removed</p>



<a name="135262414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262414">(Oct 05 2018 at 15:39)</a>:</h4>
<p>So there isn't an issue here, other than the test being strange?</p>



<a name="135262415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262415">(Oct 05 2018 at 15:39)</a>:</h4>
<p>I don't think it's imp't to the test per se?</p>



<a name="135262416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262416">(Oct 05 2018 at 15:39)</a>:</h4>
<p>yeah, I guess not</p>



<a name="135262418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262418" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262418">(Oct 05 2018 at 15:39)</a>:</h4>
<p>I can't see why it would be.</p>



<a name="135262424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262424" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262424">(Oct 05 2018 at 15:39)</a>:</h4>
<p>I guess I don't know what that is testing</p>



<a name="135262426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262426">(Oct 05 2018 at 15:39)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/13058" target="_blank" title="https://github.com/rust-lang/rust/issues/13058">#13058</a></p>



<a name="135262428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262428">(Oct 05 2018 at 15:40)</a>:</h4>
<p>(easier than browsing for that)</p>



<a name="135262483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262483" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262483">(Oct 05 2018 at 15:40)</a>:</h4>
<blockquote>
<p>For the input file below, the invocation of rustc that prompts with the "consider using an explicit lifetime parameter" hint is providing an erroneous signature.</p>
</blockquote>



<a name="135262486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262486">(Oct 05 2018 at 15:40)</a>:</h4>
<p>ok, seems like fixing the type mismatch error is "truer" to the intention of the test</p>



<a name="135262495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135262495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135262495">(Oct 05 2018 at 15:40)</a>:</h4>
<p>I'll submit a small PR for that.</p>



<a name="135265669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352663%20missing%20lifetime%20suggestion/near/135265669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352663.20missing.20lifetime.20suggestion.html#135265669">(Oct 05 2018 at 16:40)</a>:</h4>
<p>Submitted <a href="https://github.com/rust-lang/rust/issues/54853" target="_blank" title="https://github.com/rust-lang/rust/issues/54853">#54853</a>.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
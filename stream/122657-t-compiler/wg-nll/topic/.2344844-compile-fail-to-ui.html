<html>
<head><meta charset="utf-8"><title>#44844-compile-fail-to-ui · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html">#44844-compile-fail-to-ui</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="131094774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131094774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131094774">(Aug 08 2018 at 08:29)</a>:</h4>
<p>Is there anything blocking this happening? I should catch up with the conversation in <code>T-compiler</code> about this.</p>



<a name="131095239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131095239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131095239">(Aug 08 2018 at 08:40)</a>:</h4>
<p>not really</p>



<a name="131095240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131095240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131095240">(Aug 08 2018 at 08:40)</a>:</h4>
<p>afaik</p>



<a name="131095257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131095257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131095257">(Aug 08 2018 at 08:41)</a>:</h4>
<p>I could take a look at that today if nobody else is doing it already.</p>



<a name="131095544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131095544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131095544">(Aug 08 2018 at 08:49)</a>:</h4>
<p>afaik nobody is doing anything</p>



<a name="131097759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097759">(Aug 08 2018 at 09:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/issues/52531" target="_blank" title="https://github.com/rust-lang/rust/issues/52531">https://github.com/rust-lang/rust/issues/52531</a> might be problematic?</p>



<a name="131097776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097776">(Aug 08 2018 at 09:43)</a>:</h4>
<p>hmm yes</p>



<a name="131097779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097779" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097779">(Aug 08 2018 at 09:43)</a>:</h4>
<p>we should fix that I guess</p>



<a name="131097826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097826" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097826">(Aug 08 2018 at 09:44)</a>:</h4>
<p>would you like to know how to fix it? :)</p>



<a name="131097853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097853">(Aug 08 2018 at 09:45)</a>:</h4>
<p>Yeah, that would be helpful. <a href="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L2671-L2679" target="_blank" title="https://github.com/rust-lang/rust/blob/master/src/tools/compiletest/src/runtest.rs#L2671-L2679">I've spotted this</a> in the ui test code.</p>



<a name="131097946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097946">(Aug 08 2018 at 09:47)</a>:</h4>
<p>let's move to another topic..</p>



<a name="131097990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097990">(Aug 08 2018 at 09:48)</a>:</h4>
<p>I was already in the process of doing that.</p>



<a name="131097999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131097999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131097999">(Aug 08 2018 at 09:48)</a>:</h4>
<p>oh... just did :)</p>



<a name="131098008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131098008" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131098008">(Aug 08 2018 at 09:48)</a>:</h4>
<p>I guess this still works, since your topic is more specific to the <code>error-pattern</code> comments.</p>



<a name="131102645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131102645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131102645">(Aug 08 2018 at 11:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> These tests fail to compile in normal compare-mode but compile in nll compare-mode - I'm not sure if that is necessarily correct or not, should I just add <code>// ignore-compare-mode-nll</code>?</p>
<div class="codehilite"><pre><span></span>    [ui (nll)] ui/compile-fail-migration/associated-types-subtyping-1.rs
    [ui (nll)] ui/compile-fail-migration/borrow-tuple-fields.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-borrow-mut-object-twice.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-closures-two-mut.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-closures-unique-imm.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-closures-unique.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-issue-2657-1.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-lend-flow-if.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-lend-flow.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-loan-blocks-move-cc.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-loan-blocks-move.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-move-from-subpath-of-borrowed-path.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-move-mut-base-ptr.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-mut-borrow-of-mut-base-ptr.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-object-lifetime.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-overloaded-index-autoderef.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-swap-mut-base-ptr.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-union-borrow-nested.rs
    [ui (nll)] ui/compile-fail-migration/borrowck/borrowck-uniq-via-lend.rs
    [ui (nll)] ui/compile-fail-migration/cleanup-rvalue-scopes-cf.rs
    [ui (nll)] ui/compile-fail-migration/closure_promotion.rs
    [ui (nll)] ui/compile-fail-migration/hashmap-lifetimes.rs
    [ui (nll)] ui/compile-fail-migration/issue-28848.rs
    [ui (nll)] ui/compile-fail-migration/issue-5500-1.rs#ast
    [ui (nll)] ui/compile-fail-migration/method-self-arg-2.rs
    [ui (nll)] ui/compile-fail-migration/mut-cant-alias.rs
    [ui (nll)] ui/compile-fail-migration/regions-assoc-type-in-supertrait-outlives-container.rs
    [ui (nll)] ui/compile-fail-migration/regions-bounded-by-trait-requiring-static.rs
    [ui (nll)] ui/compile-fail-migration/regions-bounded-method-type-parameters.rs
    [ui (nll)] ui/compile-fail-migration/regions-free-region-ordering-caller.rs
    [ui (nll)] ui/compile-fail-migration/regions-implied-bounds-projection-gap-1.rs
    [ui (nll)] ui/compile-fail-migration/regions-infer-contravariance-due-to-decl.rs
    [ui (nll)] ui/compile-fail-migration/regions-infer-covariance-due-to-decl.rs
    [ui (nll)] ui/compile-fail-migration/regions-outlives-projection-container-wc.rs
    [ui (nll)] ui/compile-fail-migration/regions-outlives-projection-container.rs
    [ui (nll)] ui/compile-fail-migration/regions-variance-contravariant-use-covariant-in-second-position.rs
    [ui (nll)] ui/compile-fail-migration/regions-variance-contravariant-use-covariant.rs
    [ui (nll)] ui/compile-fail-migration/regions-variance-covariant-use-contravariant.rs
    [ui (nll)] ui/compile-fail-migration/regions-variance-invariant-use-contravariant.rs
    [ui (nll)] ui/compile-fail-migration/regions-variance-invariant-use-covariant.rs
    [ui (nll)] ui/compile-fail-migration/unboxed-closure-region.rs
    [ui (nll)] ui/compile-fail-migration/unboxed-closures-borrow-conflict.rs
    [ui (nll)] ui/compile-fail-migration/variance-cell-is-invariant.rs
    [ui (nll)] ui/compile-fail-migration/variance-contravariant-arg-trait-match.rs
    [ui (nll)] ui/compile-fail-migration/variance-contravariant-self-trait-match.rs
    [ui (nll)] ui/compile-fail-migration/variance-covariant-arg-trait-match.rs
    [ui (nll)] ui/compile-fail-migration/variance-covariant-self-trait-match.rs
    [ui (nll)] ui/compile-fail-migration/variance-invariant-arg-trait-match.rs
    [ui (nll)] ui/compile-fail-migration/variance-invariant-self-trait-match.rs
</pre></div>


<p>After that, all the compile-fail tests will be working as UI tests. (Then I'll look into moving them into the main <code>src/test/ui</code> folder rather than <code>src/test/ui/compile-fail-migration</code> and organizing them slightly as per <a href="https://github.com/rust-lang/rust/issues/46841" target="_blank" title="https://github.com/rust-lang/rust/issues/46841">#46841</a>).</p>



<a name="131102751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131102751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131102751">(Aug 08 2018 at 11:47)</a>:</h4>
<p>I should clarify, they pass in normal compare-mode, but they fail in NLL compare-mode because they compile successfully.</p>



<a name="131102920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131102920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131102920">(Aug 08 2018 at 11:50)</a>:</h4>
<p>There are some (like <code>issue-550-1.rs#ast</code>) that I can see are fine but others where I'm not sure if it is a NLL bug that they compile or if it is NLL being great.</p>



<a name="131103808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131103808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131103808">(Aug 08 2018 at 12:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> I think in such cases we did ignore the compare mode, yes -- or maybe we added <code>#[cfg_attr(nll, rustc_error)]</code> to the <code>main</code>, actually? <span class="user-mention" data-user-id="116083">@pnkfelix</span> would remember</p>



<a name="131104411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131104411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131104411">(Aug 08 2018 at 12:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> mentioned <code>// ignore-compare-mode-nll</code> to me <a href="#narrow/stream/122657-wg-nll/subject/pr-52809-and-52793/near/130721091" title="#narrow/stream/122657-wg-nll/subject/pr-52809-and-52793/near/130721091">here</a>. I just wasn't sure whether or not these tests were correct in compiling with NLL or whether that is a bug.</p>



<a name="131104426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131104426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131104426">(Aug 08 2018 at 12:19)</a>:</h4>
<p>Figured I'd need to check that before just marking them all as OK.</p>



<a name="131105603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105603" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105603">(Aug 08 2018 at 12:38)</a>:</h4>
<p>well</p>



<a name="131105604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105604">(Aug 08 2018 at 12:38)</a>:</h4>
<p>I can check if you want</p>



<a name="131105610"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105610" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105610">(Aug 08 2018 at 12:38)</a>:</h4>
<p>they might just need to be changed</p>



<a name="131105639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105639">(Aug 08 2018 at 12:40)</a>:</h4>
<p>OK so -- the <code>associated-types-sutyping-1.rs</code> I think can be fixed if you change from <code>let _: ...</code> to <code>let _c: .. = </code></p>



<a name="131105680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105680">(Aug 08 2018 at 12:40)</a>:</h4>
<p>or <code>let c</code></p>



<a name="131105692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105692">(Aug 08 2018 at 12:40)</a>:</h4>
<p>the problem is that the type annot is being ignored</p>



<a name="131105730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105730">(Aug 08 2018 at 12:41)</a>:</h4>
<p><code>borrow-tuple-fields.rs</code> needs to be changed to use the reference</p>



<a name="131105737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105737">(Aug 08 2018 at 12:41)</a>:</h4>
<p>so e.g.</p>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span>: <span class="p">(</span><span class="nb">Box</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">box</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">//~ ERROR cannot move out of `x` because it is borrowed</span>
</pre></div>


<p>becomes</p>
<div class="codehilite"><pre><span></span><span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span>: <span class="p">(</span><span class="nb">Box</span><span class="o">&lt;</span><span class="n">_</span><span class="o">&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">_</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="k">box</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">x</span><span class="p">.</span><span class="mi">0</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span><span class="w"> </span><span class="c1">//~ ERROR cannot move out of `x` because it is borrowed</span>
<span class="w">    </span><span class="n">drop</span><span class="p">(</span><span class="n">r</span><span class="p">);</span><span class="w"></span>
</pre></div>



<a name="131105759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105759" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105759">(Aug 08 2018 at 12:41)</a>:</h4>
<p>same with <code>borrowck-borrow-mut-object-twice.rs</code></p>



<a name="131105799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105799">(Aug 08 2018 at 12:42)</a>:</h4>
<p>ok, I'm going to stop there because I have to do something else, but maybe that helps <span class="user-mention" data-user-id="116107">@davidtwco</span> :)</p>



<a name="131105925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131105925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131105925">(Aug 08 2018 at 12:44)</a>:</h4>
<p>Thanks. I'll change those two and any others I can spot, otherwise I'll add an ignore comment to them in a separate commit so it's easy to differentiate the tests I changed due to this and everything else moving around.</p>



<a name="131106062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131106062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131106062">(Aug 08 2018 at 12:47)</a>:</h4>
<p>one possibility: open a tracking issue and dump them in a checklist</p>



<a name="131106065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131106065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131106065">(Aug 08 2018 at 12:47)</a>:</h4>
<p>they are almost certainly what <span class="user-mention" data-user-id="116083">@pnkfelix</span> calls "weak tests"</p>



<a name="131106151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131106151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131106151">(Aug 08 2018 at 12:48)</a>:</h4>
<p>Sounds good.</p>



<a name="131112926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131112926" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131112926">(Aug 08 2018 at 14:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> <a href="https://github.com/rust-lang/rust/issues/53196" target="_blank" title="https://github.com/rust-lang/rust/issues/53196">#53196</a></p>



<a name="131112928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131112928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131112928">(Aug 08 2018 at 14:48)</a>:</h4>
<p>It already has merge conflicts, which is annoying.</p>



<a name="131113228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131113228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131113228">(Aug 08 2018 at 14:54)</a>:</h4>
<p>lol</p>



<a name="131113238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131113238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131113238">(Aug 08 2018 at 14:54)</a>:</h4>
<p>It's _huge_.</p>



<a name="131113285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131113285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131113285">(Aug 08 2018 at 14:55)</a>:</h4>
<p>I'm not even sure how to keep this mergable - it'll get conflicts every day.</p>



<a name="131113506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131113506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131113506">(Aug 08 2018 at 14:59)</a>:</h4>
<p>well probably I'll r+ with p=10 or something</p>



<a name="131113893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131113893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131113893">(Aug 08 2018 at 15:06)</a>:</h4>
<p>Rebasing this is so very confusing.</p>



<a name="131114007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131114007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131114007">(Aug 08 2018 at 15:09)</a>:</h4>
<p>Yeah, I messed up a little and my "update NLL tests" commit has a bunch of deletions and the next commit has the additions.</p>



<a name="131114023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131114023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131114023">(Aug 08 2018 at 15:09)</a>:</h4>
<p>Where that commit should only have a handful (~40 or so) test/stderr changes.</p>



<a name="131114249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131114249" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131114249">(Aug 08 2018 at 15:14)</a>:</h4>
<p>I'm going to fix the commits in the PR before attempting to rebase it - should make it much simpler and it's kind-of required so that those tests that got the <code>ignore-compare-mode-nll</code> can be checked.</p>



<a name="131122590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131122590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131122590">(Aug 08 2018 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span>  hum, tidy looks for the compile-fail directory apparently</p>



<a name="131125644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2344844-compile-fail-to-ui/near/131125644" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2344844-compile-fail-to-ui.html#131125644">(Aug 08 2018 at 18:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116113">@lqd</span> I noticed, not had a chance to fix it yet.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#52742 · t-compiler/wg-nll · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/index.html">t-compiler/wg-nll</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html">#52742</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="130992688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992688" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992688">(Aug 06 2018 at 17:31)</a>:</h4>
<p>With the PR for <a href="https://github.com/rust-lang/rust/issues/52739" target="_blank" title="https://github.com/rust-lang/rust/issues/52739">#52739</a> approved, figured I'd open a new topic (instead of <code>issue-52739</code>) to discuss <a href="https://github.com/rust-lang/rust/issues/52742" target="_blank" title="https://github.com/rust-lang/rust/issues/52742">#52742</a>.</p>



<a name="130992694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992694">(Aug 06 2018 at 17:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="130992784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992784" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992784">(Aug 06 2018 at 17:33)</a>:</h4>
<p>+1</p>



<a name="130992798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992798">(Aug 06 2018 at 17:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> what error do we get with your branch?</p>



<a name="130992802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992802">(Aug 06 2018 at 17:33)</a>:</h4>
<p>for that example</p>



<a name="130992808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992808">(Aug 06 2018 at 17:33)</a>:</h4>
<p>can you paste it in there?</p>



<a name="130992821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992821">(Aug 06 2018 at 17:33)</a>:</h4>
<p>oh, actually, i'm going to guess it's the same?</p>



<a name="130992878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992878" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992878">(Aug 06 2018 at 17:34)</a>:</h4>
<p>probably we assume that all EarlyBound regions are named and not anonymous?</p>



<a name="130992884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992884">(Aug 06 2018 at 17:34)</a>:</h4>
<p>that strikes me as a bug in the "nice region error" code</p>



<a name="130992887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992887">(Aug 06 2018 at 17:34)</a>:</h4>
<p>Same as issue, yeah: <a href="https://gist.github.com/davidtwco/3f8c293d4455bbbc8de7988eabe53f55" target="_blank" title="https://gist.github.com/davidtwco/3f8c293d4455bbbc8de7988eabe53f55">https://gist.github.com/davidtwco/3f8c293d4455bbbc8de7988eabe53f55</a></p>



<a name="130992942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992942" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992942">(Aug 06 2018 at 17:35)</a>:</h4>
<p>I think <span class="user-mention" data-user-id="116107">@davidtwco</span> that <a href="https://github.com/rust-lang/rust/blob/27ede55414e01f13c6869a8763da207e544cc6ad/src/librustc/infer/error_reporting/nice_region_error/util.rs#L202-L212" target="_blank" title="https://github.com/rust-lang/rust/blob/27ede55414e01f13c6869a8763da207e544cc6ad/src/librustc/infer/error_reporting/nice_region_error/util.rs#L202-L212">this function</a> is wrong</p>



<a name="130992949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130992949" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130992949">(Aug 06 2018 at 17:35)</a>:</h4>
<p>in particular <a href="https://github.com/rust-lang/rust/blob/27ede55414e01f13c6869a8763da207e544cc6ad/src/librustc/infer/error_reporting/nice_region_error/util.rs#L209" target="_blank" title="https://github.com/rust-lang/rust/blob/27ede55414e01f13c6869a8763da207e544cc6ad/src/librustc/infer/error_reporting/nice_region_error/util.rs#L209">this line</a></p>



<a name="130993000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993000">(Aug 06 2018 at 17:36)</a>:</h4>
<p>I was just looking at that, then at <code>ReEarlyBound</code> to see if there were functions on it that would identify it as a <code>'_</code>.</p>



<a name="130993005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993005">(Aug 06 2018 at 17:36)</a>:</h4>
<p>we should check the <code>name</code>, yeah</p>



<a name="130993011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993011">(Aug 06 2018 at 17:36)</a>:</h4>
<p>when that code was written, <code>'_</code> was not a thing</p>



<a name="130993020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993020">(Aug 06 2018 at 17:36)</a>:</h4>
<p>I'll throw a branch together with that.</p>



<a name="130993021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993021">(Aug 06 2018 at 17:36)</a>:</h4>
<p>not sure what name we use there</p>



<a name="130993046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993046">(Aug 06 2018 at 17:37)</a>:</h4>
<p>I assume that other parts of our region inference error handling might make the same assumption about <code>ReEarlyBound</code> always being named.</p>



<a name="130993059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993059">(Aug 06 2018 at 17:37)</a>:</h4>
<p>it appears to be the result of this</p>
<div class="codehilite"><pre><span></span><span class="w">        </span><span class="kd">let</span><span class="w"> </span><span class="n">lifetime_name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">|</span><span class="n">def_id</span><span class="o">|</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">tcx</span><span class="p">.</span><span class="n">hir</span><span class="p">.</span><span class="n">name</span><span class="p">(</span><span class="n">tcx</span><span class="p">.</span><span class="n">hir</span><span class="p">.</span><span class="n">as_local_node_id</span><span class="p">(</span><span class="n">def_id</span><span class="p">).</span><span class="n">unwrap</span><span class="p">()).</span><span class="n">as_interned_str</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
</pre></div>



<a name="130993121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993121">(Aug 06 2018 at 17:38)</a>:</h4>
<p>I think we will use <code>keywords::UnderscoreLifetime.name().as_interned_str()</code> <span class="user-mention" data-user-id="116107">@davidtwco</span></p>



<a name="130993134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993134">(Aug 06 2018 at 17:38)</a>:</h4>
<p>i.e., that is what <code>name</code> will be for a <code>'_</code> or other anonymous lifetime</p>



<a name="130993137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993137">(Aug 06 2018 at 17:38)</a>:</h4>
<p>that appears in an impl header</p>



<a name="130993163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993163">(Aug 06 2018 at 17:39)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>



<a name="130993252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130993252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130993252">(Aug 06 2018 at 17:40)</a>:</h4>
<p>from here, in case you are curious (<a href="https://github.com/rust-lang/rust/blob/4b8089daf8046d7999310d44e5c68ccff4ab255a/src/librustc/hir/lowering.rs#L678-L684" target="_blank" title="https://github.com/rust-lang/rust/blob/4b8089daf8046d7999310d44e5c68ccff4ab255a/src/librustc/hir/lowering.rs#L678-L684">link to source</a>)</p>



<a name="130997829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130997829" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130997829">(Aug 06 2018 at 19:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> what do you think of <a href="https://github.com/rust-lang/rust/pull/53088#pullrequestreview-143719446" target="_blank" title="https://github.com/rust-lang/rust/pull/53088#pullrequestreview-143719446">these proposed changes to your PR</a>? (I'm sharing this topic because it seems relevant enough)</p>



<a name="130998067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998067">(Aug 06 2018 at 19:08)</a>:</h4>
<p>(deleted)</p>



<a name="130998091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998091" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998091">(Aug 06 2018 at 19:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> Both look good.</p>



<a name="130998128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998128">(Aug 06 2018 at 19:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116118">@Matthew Jasper</span> ok, cool...wasn't sure if you'd want to split out into a distinct PR</p>



<a name="130998182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998182">(Aug 06 2018 at 19:10)</a>:</h4>
<p>but I think it'll be simple enough</p>



<a name="130998534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998534">(Aug 06 2018 at 19:16)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> Submitted <a href="https://github.com/rust-lang/rust/issues/53124" target="_blank" title="https://github.com/rust-lang/rust/issues/53124">#53124</a> for <a href="https://github.com/rust-lang/rust/issues/52742" target="_blank" title="https://github.com/rust-lang/rust/issues/52742">#52742</a>.</p>



<a name="130998561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998561">(Aug 06 2018 at 19:17)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> great! that is more the message I expected; I wouldn't say it <em>fixes</em> 52742 though. More like "exposes" it</p>



<a name="130998613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998613">(Aug 06 2018 at 19:18)</a>:</h4>
<p>seems like good progress regardless</p>



<a name="130998623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998623">(Aug 06 2018 at 19:18)</a>:</h4>
<p>Should I change it to "Part of <a href="https://github.com/rust-lang/rust/issues/52742" target="_blank" title="https://github.com/rust-lang/rust/issues/52742">#52742</a>"?</p>



<a name="130998625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998625">(Aug 06 2018 at 19:18)</a>:</h4>
<p>one easy thing might be to fix the<code>&amp;self</code> handling to use the "pretty-printed type"</p>



<a name="130998626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998626" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998626">(Aug 06 2018 at 19:18)</a>:</h4>
<p>yeah</p>



<a name="130998640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998640">(Aug 06 2018 at 19:18)</a>:</h4>
<p>e.g., </p>
<div class="codehilite"><pre><span></span>error: unsatisfied lifetime constraints
  --&gt; $DIR/issue-52742.rs:25:9
   |
LL |     fn take_bar(&amp;mut self, b: Bar&lt;&#39;_&gt;) {
   |                 ---------         -- let&#39;s call this `&#39;1`
   |                 |
   |                 has type `&amp;mut Foo&lt;&#39;1, &#39;_&gt;`
LL |         self.y = b.z
   |         ^^^^^^^^^^^^ requires that `&#39;1` must outlive `&#39;2`
</pre></div>



<a name="130998650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998650">(Aug 06 2018 at 19:18)</a>:</h4>
<p>which would be better</p>



<a name="130998723"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998723" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998723">(Aug 06 2018 at 19:20)</a>:</h4>
<p>I think my ideal though might be to highlight the impl itself:</p>
<div class="codehilite"><pre><span></span>error: unsatisfied lifetime constraints
  --&gt; $DIR/issue-52742.rs:25:9
   |
LL |  impl Foo&lt;&#39;_, &#39;_&gt; {
  |            -- let&#39;s call this `&#39;2`
LL |     fn take_bar(&amp;mut self, b: Bar&lt;&#39;_&gt;) {
   |                                   -- let&#39;s call this `&#39;1`
LL |         self.y = b.z
   |         ^^^^^^^^^^^^ requires that `&#39;1` must outlive `&#39;2`
</pre></div>



<a name="130998745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998745">(Aug 06 2018 at 19:20)</a>:</h4>
<p>something like that</p>



<a name="130998753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998753">(Aug 06 2018 at 19:21)</a>:</h4>
<p>that would be a bit harder :)</p>



<a name="130998754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998754">(Aug 06 2018 at 19:21)</a>:</h4>
<p>thoughts?</p>



<a name="130998763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998763">(Aug 06 2018 at 19:21)</a>:</h4>
<p>I think I prefer annotating the function rather than the impl - the locality of it all helps I think - might just be me though.</p>



<a name="130998816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998816" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998816">(Aug 06 2018 at 19:22)</a>:</h4>
<p>yeah, I'm not entirely sure which I prefer</p>



<a name="130998827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998827">(Aug 06 2018 at 19:22)</a>:</h4>
<p>another interesting case is when you have a named lifetime</p>



<a name="130998830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998830">(Aug 06 2018 at 19:22)</a>:</h4>
<p>e.g., imagine</p>



<a name="130998844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998844">(Aug 06 2018 at 19:23)</a>:</h4>
<p>Are those parameters on the impl not intended to be inferred from the struct defn in future?</p>



<a name="130998848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998848">(Aug 06 2018 at 19:23)</a>:</h4>
<p>I’d kinda prefer if <code>'_</code>s were replaced in-place as well, it would make reading the error in-a-glance way easier. Don’t need to scan around for the “lets call this x”.</p>



<a name="130998849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998849">(Aug 06 2018 at 19:23)</a>:</h4>
<div class="codehilite"><pre><span></span>error: unsatisfied lifetime constraints
  --&gt; $DIR/issue-52742.rs:25:9
   |
LL |  impl Foo&lt;&#39;tcx, &#39;_&gt; {
  |            ----`&#39;tcx` declared here
LL |     fn take_bar(&amp;mut self, b: Bar&lt;&#39;_&gt;) {
   |                                   -- let&#39;s call this `&#39;1`
LL |         self.y = b.z
   |         ^^^^^^^^^^^^ requires that `&#39;1` must outlive `&#39;tcx`
</pre></div>



<a name="130998863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998863">(Aug 06 2018 at 19:23)</a>:</h4>
<blockquote>
<p>I’d kinda prefer if <code>'_</code>s were replaced in-place as well, it would make reading the error in-a-glance way easier. Don’t need to scan around for the “lets call this x”.</p>
</blockquote>
<p>I think this is an interesting idea -- editing the source txt -- but I'd prefer to hold off on it</p>



<a name="130998872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998872">(Aug 06 2018 at 19:23)</a>:</h4>
<p>in particular, we are working now on identifying the spans etc</p>



<a name="130998892"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998892" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998892">(Aug 06 2018 at 19:24)</a>:</h4>
<p>once we have the <em>labels</em> all working as we want, transitioning to editing the source text seems like an orthogonal step</p>



<a name="130998930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998930">(Aug 06 2018 at 19:24)</a>:</h4>
<p>yes, can always be implemented as a improvement once everything lands at all.</p>



<a name="130998948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998948">(Aug 06 2018 at 19:24)</a>:</h4>
<blockquote>
<p>Are those parameters on the impl not intended to be inferred from the struct defn in future?</p>
</blockquote>
<p>they are not inferred from the struct definition, no.. but they may not require explicit declarations</p>



<a name="130998953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998953" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998953">(Aug 06 2018 at 19:24)</a>:</h4>
<p>e.g., like my second example</p>



<a name="130998962"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998962" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998962">(Aug 06 2018 at 19:24)</a>:</h4>
<p>but that feature still hasn't gotten enough usage for me to feel confident about its fate</p>



<a name="130998971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998971">(Aug 06 2018 at 19:25)</a>:</h4>
<p>anyway, I'd be happy with either the "fully annotated self type" or "select the impl" version to start</p>



<a name="130998978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998978" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998978">(Aug 06 2018 at 19:25)</a>:</h4>
<p>but I'd like to get rid of all the "lifetime <code>'1</code> appears in foo" sort of messages at least</p>



<a name="130998980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130998980" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130998980">(Aug 06 2018 at 19:25)</a>:</h4>
<p>which are horribly unspecific</p>



<a name="130999084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999084" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999084">(Aug 06 2018 at 19:27)</a>:</h4>
<p>I reckon I could probably use the existing "has type" logic. I'd just need to detect when we are looking at <code>self</code> in the code where the "lifetime appears in" message logic and call that function.</p>



<a name="130999156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999156">(Aug 06 2018 at 19:28)</a>:</h4>
<p>right</p>



<a name="130999161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999161">(Aug 06 2018 at 19:28)</a>:</h4>
<p>I think right now what happens</p>



<a name="130999164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999164">(Aug 06 2018 at 19:28)</a>:</h4>
<p>is that we fail to "match" the <code>Ty&lt;'tcx&gt;</code> and the HIR type</p>



<a name="130999167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999167">(Aug 06 2018 at 19:28)</a>:</h4>
<p>I imagine we could — in this case — fallback to the "has type" sort of display</p>



<a name="130999169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999169">(Aug 06 2018 at 19:28)</a>:</h4>
<p>that was my intention, anyway</p>



<a name="130999187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999187">(Aug 06 2018 at 19:29)</a>:</h4>
<p>thinking a bit more about it, I think one appealing point about highlighting the <code>impl</code> is that -- if you wanted to change the lifetime in the <code>self</code> type -- it shows you the code you would have to edit to do so</p>



<a name="130999189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999189">(Aug 06 2018 at 19:29)</a>:</h4>
<p>I guess we could give both, too</p>



<a name="130999193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999193">(Aug 06 2018 at 19:29)</a>:</h4>
<p>anyway, changing the "fallback" to "has type" seems like a good step regardless</p>



<a name="130999195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999195">(Aug 06 2018 at 19:29)</a>:</h4>
<p>probably helps with some other cases</p>



<a name="130999251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999251">(Aug 06 2018 at 19:30)</a>:</h4>
<p>hybrid:</p>
<div class="codehilite"><pre><span></span>error: unsatisfied lifetime constraints
  --&gt; $DIR/issue-52742.rs:25:9
   |
LL |  impl Foo&lt;&#39;_, &#39;_&gt; {
  |            -- let&#39;s call this `&#39;2`
LL |     fn take_bar(&amp;mut self, b: Bar&lt;&#39;_&gt;) {
   |                 ---------         -- let&#39;s call this `&#39;1`
   |                 |
   |                 has type `&amp;mut Foo&lt;&#39;2, &#39;_&gt;`
LL |         self.y = b.z
   |         ^^^^^^^^^^^^ requires that `&#39;1` must outlive `&#39;2`
</pre></div>



<a name="130999265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999265">(Aug 06 2018 at 19:30)</a>:</h4>
<p>What's the best way to check if the <code>argument_hir_ty: &amp;hir::Ty</code> I have is <code>self</code>?</p>



<a name="130999270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999270">(Aug 06 2018 at 19:30)</a>:</h4>
<p>I don't think you need to do that actually</p>



<a name="130999305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999305" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999305">(Aug 06 2018 at 19:31)</a>:</h4>
<p>Just fallback to "has type" in all cases?</p>



<a name="130999309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999309" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999309">(Aug 06 2018 at 19:31)</a>:</h4>
<p>Or from some other criteria?</p>



<a name="130999313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999313" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999313">(Aug 06 2018 at 19:31)</a>:</h4>
<p>all cases</p>



<a name="130999321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999321">(Aug 06 2018 at 19:31)</a>:</h4>
<p>here is the function I am talking about <a href="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L172-L188" target="_blank" title="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L172-L188">link</a></p>



<a name="130999368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999368">(Aug 06 2018 at 19:32)</a>:</h4>
<p>you can see in my comment what I wanted it to look like :)</p>



<a name="130999399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999399" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999399">(Aug 06 2018 at 19:32)</a>:</h4>
<p>anyway, <a href="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L212-L215" target="_blank" title="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L212-L215">this is the fallback here</a></p>



<a name="130999420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999420">(Aug 06 2018 at 19:33)</a>:</h4>
<p>Ah, I was looking at <code>give_name_if_we_can_match_hir_ty_from_argument</code> because that has the message has "appears in this type" rather than "appears in this argument".</p>



<a name="130999695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999695">(Aug 06 2018 at 19:39)</a>:</h4>
<p>oh well maybe I am wrong too :)</p>



<a name="130999761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999761">(Aug 06 2018 at 19:40)</a>:</h4>
<p>oh hmm there is <a href="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L417-L423" target="_blank" title="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L417-L423">this fallback too</a>...</p>



<a name="130999767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999767">(Aug 06 2018 at 19:41)</a>:</h4>
<p>maybe I wound up with 'double fallback'? :)</p>



<a name="130999780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999780">(Aug 06 2018 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> I think that <a href="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L417-L423" target="_blank" title="https://github.com/rust-lang/rust/blob/b2397437530eecef72a1524a7e0a4b42034fa360/src/librustc_mir/borrow_check/nll/region_infer/error_reporting/region_name.rs#L417-L423">this code should return <code>None</code></a></p>



<a name="130999787"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999787" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999787">(Aug 06 2018 at 19:41)</a>:</h4>
<p>and then the "arguments code" I was talking about should be modified to use the "has type" formulation</p>



<a name="130999832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999832">(Aug 06 2018 at 19:42)</a>:</h4>
<p><span class="emoji emoji-1f44d" title="thumbs up">:thumbs_up:</span></p>



<a name="130999869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/130999869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#130999869">(Aug 06 2018 at 19:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> want me to hold off on <a href="https://github.com/rust-lang/rust/pull/53124" target="_blank" title="https://github.com/rust-lang/rust/pull/53124">https://github.com/rust-lang/rust/pull/53124</a> then? (i.e., try to make those changes in this PR?)</p>



<a name="131000016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131000016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131000016">(Aug 06 2018 at 19:46)</a>:</h4>
<p>Yeah, I'll hopefully get that in tonight <span class="user-mention" data-user-id="116009">@nikomatsakis</span></p>



<a name="131000064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131000064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131000064">(Aug 06 2018 at 19:46)</a>:</h4>
<p>ok</p>



<a name="131004463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004463">(Aug 06 2018 at 21:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> That's the fallback changed.</p>



<a name="131004506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004506">(Aug 06 2018 at 21:10)</a>:</h4>
<p>Interestingly, only affected that single case.</p>



<a name="131004546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004546" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004546">(Aug 06 2018 at 21:11)</a>:</h4>
<p>what is "that"?</p>



<a name="131004549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004549">(Aug 06 2018 at 21:11)</a>:</h4>
<p>did you update PR?</p>



<a name="131004593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004593" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004593">(Aug 06 2018 at 21:12)</a>:</h4>
<p>ah, I see</p>



<a name="131004595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004595">(Aug 06 2018 at 21:12)</a>:</h4>
<p>still, very nice</p>



<a name="131004598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004598">(Aug 06 2018 at 21:12)</a>:</h4>
<p>that mostly means we need more tests I guess ;)</p>



<a name="131004619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004619" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004619">(Aug 06 2018 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> if you are looking for more things to do =) <a href="https://github.com/rust-lang/rust/issues/51175" target="_blank" title="https://github.com/rust-lang/rust/issues/51175">https://github.com/rust-lang/rust/issues/51175</a> are kind of interesting</p>



<a name="131004621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004621" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004621">(Aug 06 2018 at 21:13)</a>:</h4>
<p>in each case, it seems like we pick a bad span to highlight</p>



<a name="131004623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004623">(Aug 06 2018 at 21:13)</a>:</h4>
<p>would have to dig in to see why</p>



<a name="131004625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004625">(Aug 06 2018 at 21:14)</a>:</h4>
<p>Sounds good, I'll assign it.</p>



<a name="131004704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthew Jasper <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004704">(Aug 06 2018 at 21:15)</a>:</h4>
<p>I think I have that fixed (or at least improved) locally (I was working on something else, which is why I didn't assign it)</p>



<a name="131004756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131004756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131004756">(Aug 06 2018 at 21:16)</a>:</h4>
<p>I'll unassign it.</p>



<a name="131009973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131009973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131009973">(Aug 06 2018 at 23:34)</a>:</h4>
<blockquote>
<p>maybe I wound up with 'double fallback'? :)</p>
</blockquote>
<p>Careful, if you get to triple fallback the processor will reset...</p>



<a name="131156051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131156051" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131156051">(Aug 09 2018 at 07:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> PR for this failed on merge testing in AppVeyor - not particularly sure why. I've seen it and will take a look.</p>



<a name="131161677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161677">(Aug 09 2018 at 09:53)</a>:</h4>
<p>So, I can reproduce the failure locally after a rebase.</p>



<a name="131161758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161758">(Aug 09 2018 at 09:55)</a>:</h4>
<p>Seems like it isn't really anything to do with this PR, something another PR has changed.</p>



<a name="131161822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161822">(Aug 09 2018 at 09:56)</a>:</h4>
<p>So I'm just going to do a <code>--bless</code> and push since I assume the output is intended given that the other PR that changed it got through review.</p>



<a name="131161849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161849">(Aug 09 2018 at 09:57)</a>:</h4>
<p>Even though it changes the test case for this change (and others) - the execution never seems to get to output this diagnostic this PR changed.</p>



<a name="131161906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161906">(Aug 09 2018 at 09:58)</a>:</h4>
<div class="codehilite"><pre><span></span> failures:
 ---- [ui] ui\nll\issue-52742.rs stdout ----
 diff of stderr:
<span class="gd">-   error: unsatisfied lifetime constraints</span>
<span class="gd">-     --&gt; $DIR/issue-52742.rs:25:9</span>
<span class="gi">+   error[E0106]: missing lifetime specifiers</span>
<span class="gi">+     --&gt; $DIR/issue-52742.rs:23:10</span>
3      |
<span class="gd">-   LL |     fn take_bar(&amp;mut self, b: Bar&lt;&#39;_&gt;) {</span>
<span class="gd">-      |                 ---------         -- let&#39;s call this `&#39;1`</span>
<span class="gd">-      |                 |</span>
<span class="gd">-      |                 has type `&amp;mut Foo&lt;&#39;_, &#39;2&gt;`</span>
<span class="gd">-   LL |         self.y = b.z</span>
<span class="gd">-      |         ^^^^^^^^^^^^ requires that `&#39;1` must outlive `&#39;2`</span>
<span class="gi">+   LL | impl Foo&lt;&#39;_, &#39;_&gt; {</span>
<span class="gi">+      |          ^^ expected 2 lifetime parameters</span>
10
11  error: aborting due to previous error
12
<span class="gi">+   For more information about this error, try `rustc --explain E0106`.</span>
13
</pre></div>


<p>This was the test case we specifically added to test <code>&amp;mut Foo&lt;'_, '2&gt;</code> - should we add another since it no longer does that?</p>



<a name="131161919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161919">(Aug 09 2018 at 09:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> see <a href="https://github.com/rust-lang/rust/pull/53124/files#r208872417" target="_blank" title="https://github.com/rust-lang/rust/pull/53124/files#r208872417">https://github.com/rust-lang/rust/pull/53124/files#r208872417</a></p>



<a name="131161924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131161924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131161924">(Aug 09 2018 at 09:59)</a>:</h4>
<p>Oh, thanks!</p>



<a name="131162114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131162114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131162114">(Aug 09 2018 at 10:04)</a>:</h4>
<p>Fixed that PR, passes locally. Should be good to <code>r+</code> again once Travis confirms.</p>



<a name="131169540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/122657-t-compiler/wg-nll/topic/%2352742/near/131169540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/122657-t-compiler/wg-nll/topic/.2352742.html#131169540">(Aug 09 2018 at 12:44)</a>:</h4>
<p>PR is all green again.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
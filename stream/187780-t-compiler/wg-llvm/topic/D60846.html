<html>
<head><meta charset="utf-8"><title>D60846 · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html">D60846</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="164672047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/164672047" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#164672047">(May 02 2019 at 01:13)</a>:</h4>
<p><span class="user-mention" data-user-id="133224">@Nikita Popov</span> what did you run to get the test failure due to the D60846 patch?</p>



<a name="164686023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/164686023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#164686023">(May 02 2019 at 07:17)</a>:</h4>
<p>Something like build/bin/llvm-lit test/Transforms/LICM</p>



<a name="164686235"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/164686235" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#164686235">(May 02 2019 at 07:22)</a>:</h4>
<p>Here's the diff over regenerated checks: <a href="https://gist.github.com/nikic/c446e525eb5968e1323ca756bf342ef0" target="_blank" title="https://gist.github.com/nikic/c446e525eb5968e1323ca756bf342ef0">https://gist.github.com/nikic/c446e525eb5968e1323ca756bf342ef0</a></p>



<a name="164761455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/164761455" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#164761455">(May 03 2019 at 02:00)</a>:</h4>
<p>Hmmm I must be doing something wrong... I didn't get that diff... I'll tinker some more</p>



<a name="164764288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/164764288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#164764288">(May 03 2019 at 03:08)</a>:</h4>
<p>Clean build seems to have done the trick. I get the same result you got from <code>opt</code> now</p>



<a name="165032388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/165032388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#165032388">(May 07 2019 at 00:46)</a>:</h4>
<p>Should I wait for spatel to re-review the patch before I commit it?</p>



<a name="165044322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/165044322" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luqman Aden <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#165044322">(May 07 2019 at 05:30)</a>:</h4>
<p>They did say "we should be set after that" and <span class="user-mention" data-user-id="133224">@Nikita Popov</span> has also already approved. I would also argue it isn't a particularly controversial change.</p>



<a name="165048855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/165048855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#165048855">(May 07 2019 at 07:21)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> Should be okay to commit.</p>



<a name="165061484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/165061484" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#165061484">(May 07 2019 at 11:11)</a>:</h4>
<p><span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="165282872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/165282872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#165282872">(May 09 2019 at 19:43)</a>:</h4>
<p>So, looks like this isn't as simple as it looked...</p>



<a name="165282954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/165282954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#165282954">(May 09 2019 at 19:44)</a>:</h4>
<p>I feel like there should be a way to make the phi threading in instsimplify miscompile independently of this patch (there are other things depending on the context instruction), but I can't really come up with anything.</p>



<a name="166392334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/166392334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#166392334">(May 23 2019 at 19:35)</a>:</h4>
<p><span class="user-mention" data-user-id="143663">@dlrobertson</span> Do you need help with fixing up the patch?</p>



<a name="166392416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/166392416" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#166392416">(May 23 2019 at 19:36)</a>:</h4>
<p><span class="user-mention" data-user-id="133224">@Nikita Popov</span> hey, I honestly haven't had time to work on it.</p>



<a name="166392457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/166392457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#166392457">(May 23 2019 at 19:36)</a>:</h4>
<p>I'm mostly not going to be around for another month or so</p>



<a name="166392510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/166392510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#166392510">(May 23 2019 at 19:37)</a>:</h4>
<p>Just started a new job and my wife is due this week <span aria-label="smile" class="emoji emoji-263a" role="img" title="smile">:smile:</span></p>



<a name="166392628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/166392628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dlrobertson <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#166392628">(May 23 2019 at 19:38)</a>:</h4>
<p>If we need to hand it off to someone else, in the meantime... I'm totally okay with that</p>



<a name="166400774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/D60846/near/166400774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/D60846.html#166400774">(May 23 2019 at 21:14)</a>:</h4>
<p>(Early) congrats <span class="user-mention" data-user-id="143663">@dlrobertson</span>!</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
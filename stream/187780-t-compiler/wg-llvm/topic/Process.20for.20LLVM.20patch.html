<html>
<head><meta charset="utf-8"><title>Process for LLVM patch · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Process.20for.20LLVM.20patch.html">Process for LLVM patch</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264682950"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Process%20for%20LLVM%20patch/near/264682950" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Process.20for.20LLVM.20patch.html#264682950">(Dec 13 2021 at 09:53)</a>:</h4>
<p>I have a patch for <a href="https://github.com/rust-lang/rust/issues/68262">#68262</a>, but that requires a small change to LLVMs C API. Can I just open a PR for this patch to Rust's LLVM fork while also submitting this patch to LLVM upstream? Or do I have to get this patch into LLVM upstream first and then wait until LLVM is bumped for Rust to have this change available in the Rust LLVM fork?</p>



<a name="264688107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Process%20for%20LLVM%20patch/near/264688107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Process.20for.20LLVM.20patch.html#264688107">(Dec 13 2021 at 10:43)</a>:</h4>
<p>Usually you send the patch upstream first for review, and then cherry-pick to the fork once it has landed.</p>



<a name="264689189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Process%20for%20LLVM%20patch/near/264689189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Process.20for.20LLVM.20patch.html#264689189">(Dec 13 2021 at 10:52)</a>:</h4>
<p>Is it possible to use the C++ api of LLVM instead and create our own C wrapper? This is already commonly done for a lot of things for which LLVM doesn't export a C api.</p>



<a name="264694346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Process%20for%20LLVM%20patch/near/264694346" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> flip1995 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Process.20for.20LLVM.20patch.html#264694346">(Dec 13 2021 at 11:41)</a>:</h4>
<blockquote>
<p>This is already commonly done for a lot of things for which LLVM doesn't export a C api.</p>
</blockquote>
<p>Are those the <code>LLVMRust*</code> functions in <code>rustc_llvm</code>?</p>



<a name="264697311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Process%20for%20LLVM%20patch/near/264697311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Process.20for.20LLVM.20patch.html#264697311">(Dec 13 2021 at 12:12)</a>:</h4>
<p>Yes</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
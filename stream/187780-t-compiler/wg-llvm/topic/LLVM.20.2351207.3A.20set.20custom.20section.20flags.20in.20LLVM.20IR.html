<html>
<head><meta charset="utf-8"><title>LLVM #51207: set custom section flags in LLVM IR · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html">LLVM #51207: set custom section flags in LLVM IR</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259147561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259147561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259147561">(Oct 26 2021 at 19:20)</a>:</h4>
<p>Where do we stand on <a href="https://bugs.llvm.org/show_bug.cgi?id=51207">this</a> LLVM regression? It's still a problem on LLVM <code>main</code>, and if I understand correctly we're only a couple of months from LLVM 14 starting to enter release testing?</p>



<a name="259147808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259147808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259147808">(Oct 26 2021 at 19:22)</a>:</h4>
<p>Let's get a bug filed for the changes need on the Rust side -- <span class="user-mention" data-user-id="123586">@nagisa</span>  or <span class="user-mention" data-user-id="133224">@Nikita Popov</span>, I think you both had a good understanding here, can you describe the issue and what we need to change?</p>



<a name="259156423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259156423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259156423">(Oct 26 2021 at 20:28)</a>:</h4>
<p>Yeah, let me open an issue</p>



<a name="259158119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259158119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259158119">(Oct 26 2021 at 20:43)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/90326">https://github.com/rust-lang/rust/issues/90326</a> look good?</p>



<a name="259161011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259161011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259161011">(Oct 26 2021 at 21:03)</a>:</h4>
<p>Yes, that's a huge help. Is anyone (to your knowledge) working on the fix, or should I try and nerdsnipe some memory safety enthusiasts?</p>



<a name="259167618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259167618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259167618">(Oct 26 2021 at 21:59)</a>:</h4>
<p>Don't think anyone's working on this yet.</p>



<a name="259168269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259168269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259168269">(Oct 26 2021 at 22:03)</a>:</h4>
<p>Alrighty, I'll see if I can rustle someone up, and if I do I'll drop a comment on the issue. Thanks!</p>



<a name="259208627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259208627" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259208627">(Oct 27 2021 at 08:46)</a>:</h4>
<p><span class="user-mention" data-user-id="316805">@durin42</span> By the way, it might be worth checking with your LLVM team whether there's interest in adding some first class IR support for section flags. That would really be the "proper" solution.</p>



<a name="259249659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/259249659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> durin42 <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#259249659">(Oct 27 2021 at 14:41)</a>:</h4>
<p>Will do.</p>



<a name="264210448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/LLVM%20%2351207%3A%20set%20custom%20section%20flags%20in%20LLVM%20IR/near/264210448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/LLVM.20.2351207.3A.20set.20custom.20section.20flags.20in.20LLVM.20IR.html#264210448">(Dec 08 2021 at 19:51)</a>:</h4>
<p>First half of the fix landed in <a href="https://github.com/rust-lang/rust/pull/91604">https://github.com/rust-lang/rust/pull/91604</a> and the second half (the hacky part) is at <a href="https://github.com/rust-lang/rust/pull/91654">https://github.com/rust-lang/rust/pull/91654</a>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
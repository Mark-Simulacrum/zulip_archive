<html>
<head><meta charset="utf-8"><title>Drop LLVM 9 · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html">Drop LLVM 9</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="230425630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230425630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230425630">(Mar 15 2021 at 22:01)</a>:</h4>
<p>Now that we're on LLVM 12, can we drop support for LLVM 9?</p>



<a name="230429637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230429637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230429637">(Mar 15 2021 at 22:18)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="138448">@cuviper</span></p>



<a name="230429709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230429709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230429709">(Mar 15 2021 at 22:19)</a>:</h4>
<p>What's the earliest supported version of RHEL these days?</p>



<a name="230429965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230429965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230429965">(Mar 15 2021 at 22:20)</a>:</h4>
<p>We don't have a set policy for maintaining old llvm releases. I personally consider 1 previous llvm to be plenty.</p>



<a name="230430105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430105">(Mar 15 2021 at 22:21)</a>:</h4>
<p>In the past we would motivate it basically on the grounds of maintainer burden</p>



<a name="230430188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430188">(Mar 15 2021 at 22:21)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="372582">@Sylvestre Ledru</span> as well, for Debian.</p>



<a name="230430300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430300">(Mar 15 2021 at 22:22)</a>:</h4>
<p>Distributions don't generally bump rustc version they ship within a distro cycle do they?</p>



<a name="230430476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430476">(Mar 15 2021 at 22:23)</a>:</h4>
<p>There are a few distro-related factors that would potentially affect how many versions of LLVM we'd need to support in Rust.</p>



<a name="230430565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430565">(Mar 15 2021 at 22:23)</a>:</h4>
<p>(perfect opportunity to make up a policy)</p>



<a name="230430576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430576" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430576">(Mar 15 2021 at 22:23)</a>:</h4>
<p>(agreed)</p>



<a name="230430618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430618" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430618">(Mar 15 2021 at 22:23)</a>:</h4>
<p>Rust is a build dependency of Firefox, and distributions do want to keep Firefox up to date.</p>



<a name="230430790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430790" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430790">(Mar 15 2021 at 22:24)</a>:</h4>
<p>Distributions don't always adopt newer versions of LLVM rapidly, and it'd be helpful to slightly decouple updating Rust from updating LLVM. (This might motivate supporting LLVM N-1, though not N-2 or N-3 I think.)</p>



<a name="230430885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430885">(Mar 15 2021 at 22:25)</a>:</h4>
<p>And then I think cuviper may have had some additional reasons related to RHEL.</p>



<a name="230430936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230430936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230430936">(Mar 15 2021 at 22:25)</a>:</h4>
<p>The de facto policy seems to be three LLVM releases, but I don't know how that came about and whether it's just an accident.</p>



<a name="230431099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431099">(Mar 15 2021 at 22:26)</a>:</h4>
<p>Personally, I'd be in favor of a policy to support latest and latest minus 1, but I don't maintain distro packages.</p>



<a name="230431163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431163">(Mar 15 2021 at 22:26)</a>:</h4>
<p>we actually keep up pretty closely on RHEL -- it's not considered an ABI-stable system library, so we rebase frequently</p>



<a name="230431237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431237">(Mar 15 2021 at 22:27)</a>:</h4>
<p>Fedora stays put on an LLVM version, but that's only about a year to support</p>



<a name="230431248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431248">(Mar 15 2021 at 22:27)</a>:</h4>
<p><span class="user-mention" data-user-id="138448">@cuviper</span> Interesting. Does that mean things depending on LLVM also need updating frequently, such as Mesa?</p>



<a name="230431489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431489" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431489">(Mar 15 2021 at 22:28)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> well we have two things -- an <code>llvm-private</code> package that mostly stays put, which mesa uses</p>



<a name="230431518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431518">(Mar 15 2021 at 22:28)</a>:</h4>
<p>Current n-2 state likely came about as an accident of sorts wherein nobody was bothered enough by adding an additional ifdef to support the older version vs dropping it.</p>



<a name="230431524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431524" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431524">(Mar 15 2021 at 22:28)</a>:</h4>
<p>and then an llvm-toolset collection that rebases for every version</p>



<a name="230431659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431659" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431659">(Mar 15 2021 at 22:29)</a>:</h4>
<p>my soft ask is "whatever the oldest supported Fedora has", which would be Fedora 32 with LLVM 10</p>



<a name="230431755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431755">(Mar 15 2021 at 22:30)</a>:</h4>
<p>I can mily recall a time where we might have supported just n-1. I feel like that bump was motivated by our use of some new llvm feature . I could see us doing the same for e.g. newpm</p>



<a name="230431874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431874">(Mar 15 2021 at 22:31)</a>:</h4>
<p>and Fedora 32 will be EOL in May, then Fedora 33 is my lowest with LLVM 11</p>



<a name="230431964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230431964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230431964">(Mar 15 2021 at 22:32)</a>:</h4>
<p>anyway, dropping 9 is fine with me now</p>



<a name="230432084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432084" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432084">(Mar 15 2021 at 22:33)</a>:</h4>
<p><span class="user-mention" data-user-id="138448">@cuviper</span> LLVM 10 is, today, N-1. LLVM 12 isn't released yet, so it isn't N yet.</p>



<a name="230432130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432130">(Mar 15 2021 at 22:33)</a>:</h4>
<p>yeah, well 12 is imminent</p>



<a name="230432187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432187">(Mar 15 2021 at 22:34)</a>:</h4>
<p>Sure. And yeah, it'll be out before May.</p>



<a name="230432257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432257">(Mar 15 2021 at 22:34)</a>:</h4>
<p>Does Fedora have a policy for how up-to-date they keep LLVM, or is it just "how well did Fedora's release line up with LLVM's release"?</p>



<a name="230432281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432281">(Mar 15 2021 at 22:35)</a>:</h4>
<p>And to what extent does Fedora need to be able to update Rust in stable releases?</p>



<a name="230432390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432390" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432390">(Mar 15 2021 at 22:36)</a>:</h4>
<p>Fedora usually jumps on even RCs for rawhide, but for release we stick with that version</p>



<a name="230432419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432419">(Mar 15 2021 at 22:36)</a>:</h4>
<p>I do need to keep rebasing Rust for Firefox's sake, at least, because we don't use ESR</p>



<a name="230432497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432497" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432497">(Mar 15 2021 at 22:37)</a>:</h4>
<p>/me doesn't actually know Firefox's requirement for MSRV.</p>



<a name="230432525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432525">(Mar 15 2021 at 22:37)</a>:</h4>
<p><a href="https://wiki.mozilla.org/Rust_Update_Policy_for_Firefox">https://wiki.mozilla.org/Rust_Update_Policy_for_Firefox</a></p>



<a name="230432544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432544">(Mar 15 2021 at 22:38)</a>:</h4>
<p>hmm, that hasn't been updated in a while</p>



<a name="230432699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432699">(Mar 15 2021 at 22:39)</a>:</h4>
<p>one relevant milestone is when a new ESR is issued, and what Rust that will require</p>



<a name="230432730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432730">(Mar 15 2021 at 22:39)</a>:</h4>
<p>it would be friendly to some distros if that Rust has a conservative LLVM requirement</p>



<a name="230432967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230432967" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230432967">(Mar 15 2021 at 22:41)</a>:</h4>
<p>looks like ESR 91 is next: <a href="https://wiki.mozilla.org/Release_Management/Calendar">https://wiki.mozilla.org/Release_Management/Calendar</a></p>



<a name="230433101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230433101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230433101">(Mar 15 2021 at 22:43)</a>:</h4>
<p>Thats quite few releases away, isn't it?</p>



<a name="230433121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230433121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230433121">(Mar 15 2021 at 22:43)</a>:</h4>
<p>86 being current it's in 5 months.</p>



<a name="230433123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230433123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230433123">(Mar 15 2021 at 22:43)</a>:</h4>
<p>I guess if that becomes beta on 2021-06-14, by policy they'll have chosen Rust 1.52</p>



<a name="230433388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/230433388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#230433388">(Mar 15 2021 at 22:46)</a>:</h4>
<p>I suggest we let 1.52 hang on to LLVM 9, then bump soon after</p>



<a name="231367276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231367276" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231367276">(Mar 22 2021 at 19:10)</a>:</h4>
<p>master is now 1.53, so here you go: <a href="https://github.com/rust-lang/rust/issues/83387">#83387</a></p>



<a name="231368937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231368937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231368937">(Mar 22 2021 at 19:21)</a>:</h4>
<p>Does ubuntu:18.04 have llvm-10? It might need a bump as well.</p>



<a name="231369370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231369370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231369370">(Mar 22 2021 at 19:23)</a>:</h4>
<p><span class="user-mention" data-user-id="352985">@tm</span> yes it does, but no higher</p>



<a name="231370650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231370650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231370650">(Mar 22 2021 at 19:28)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> did you take a close look at the <code>att_syntax</code> changes? I'm not fully confident that those assembly blocks are good for intel as-is</p>



<a name="231371133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231371133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231371133">(Mar 22 2021 at 19:31)</a>:</h4>
<p>I guess CI should tell</p>



<a name="231374133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231374133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231374133">(Mar 22 2021 at 19:50)</a>:</h4>
<p>Yeah they looked fine to me.</p>



<a name="231374228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231374228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231374228">(Mar 22 2021 at 19:51)</a>:</h4>
<p>Actually… I just looked at a few of them, not all of them, let me go though them again.</p>



<a name="231374446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231374446" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231374446">(Mar 22 2021 at 19:53)</a>:</h4>
<p>I suspect that SGX <code>lea</code> might need to be reversed</p>



<a name="231374470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231374470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231374470">(Mar 22 2021 at 19:53)</a>:</h4>
<p>oh, you just commented too, okay</p>



<a name="231375189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231375189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231375189">(Mar 22 2021 at 19:58)</a>:</h4>
<p>I updated the comments with the replacements for both.</p>



<a name="231375230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231375230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231375230">(Mar 22 2021 at 19:58)</a>:</h4>
<p>Had forgotten the <code>width ptr</code> before <code>[]</code> when first writing the comment.</p>



<a name="231375436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231375436" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231375436">(Mar 22 2021 at 20:00)</a>:</h4>
<p>FWIW I think it is fine to let the CI take care of verifying these assembly snippets, they will fail at compile time if they're wrong <span class="user-mention" data-user-id="138448">@cuviper</span></p>



<a name="231545374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231545374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sylvestre Ledru <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231545374">(Mar 23 2021 at 21:17)</a>:</h4>
<p><span class="user-mention" data-user-id="239881">@Josh Triplett</span> Yeah, we (Debian) trying to support the most recent versions of LLVM for Rustc . So, dropping support for 9 is fine from the Debian POV. The next Debian version will ship with LLVM 11 as default. </p>
<p>Note that a bigger pain point is that Rustc has patches applied to its in-tree LLVM tree. As we, in Debian, are relying on the LLVM packages, we might have differences ( <span class="user-mention" data-user-id="220510">@Mike Hommey</span> mentioned miscompilation to me) in the binary generated.</p>



<a name="231560530"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231560530" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231560530">(Mar 23 2021 at 23:39)</a>:</h4>
<p>I'm not sure if anything can be done on our end about our backporting of soundness fixes.</p>



<a name="231560687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231560687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231560687">(Mar 23 2021 at 23:41)</a>:</h4>
<p>in my memory very few of the soundness issues that were addressed through LLVM fixes could've been meaningfully addressed in rustc itself.</p>



<a name="231561484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231561484" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231561484">(Mar 23 2021 at 23:51)</a>:</h4>
<p><span class="user-mention" data-user-id="372582">@Sylvestre Ledru</span> In general, we don't tend to backport random changes or make Rust-specific changes that would make our version of LLVM unsuitable for general usage. So most of the time it'd be appropriate to apply Rust's LLVM patches (especially backports) to the system LLVM. Does that help?</p>



<a name="231561603"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Drop%20LLVM%209/near/231561603" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Drop.20LLVM.209.html#231561603">(Mar 23 2021 at 23:52)</a>:</h4>
<p><span class="user-mention" data-user-id="372582">@Sylvestre Ledru</span> What's the current procedure for shipping new versions of Firefox in stable (since that's an unusual procedure compared to Debian's usual stable security backports)?</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
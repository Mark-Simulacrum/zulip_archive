<html>
<head><meta charset="utf-8"><title>Tracking LLVM noalias support #54878 · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Tracking.20LLVM.20noalias.20support.20.2354878.html">Tracking LLVM noalias support #54878</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="209907697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Tracking%20LLVM%20noalias%20support%20%2354878/near/209907697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Charles Lew <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Tracking.20LLVM.20noalias.20support.20.2354878.html#209907697">(Sep 13 2020 at 01:02)</a>:</h4>
<p>Corresponding LLVM issue <a href="https://bugs.llvm.org/show_bug.cgi?id=39282">https://bugs.llvm.org/show_bug.cgi?id=39282</a> has made some progress. It was claimed that <a href="https://reviews.llvm.org/D68484">https://reviews.llvm.org/D68484</a> (not yet landed) has fixed the problem.</p>



<a name="212664232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Tracking%20LLVM%20noalias%20support%20%2354878/near/212664232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luqman Aden <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Tracking.20LLVM.20noalias.20support.20.2354878.html#212664232">(Oct 08 2020 at 09:13)</a>:</h4>
<p>I just realized that's a 27 patch series... I was wondering why it only seem to have doc changes xD</p>



<a name="248352082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Tracking%20LLVM%20noalias%20support%20%2354878/near/248352082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Tracking.20LLVM.20noalias.20support.20.2354878.html#248352082">(Aug 04 2021 at 13:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="219696">XAMPPRocky</span> <a href="#narrow/stream/241545-t-release/topic/noalias.20miscompilation.20.20on.20stable/near/248343459">said</a>:</p>
<blockquote>
<p><a href="https://twitter.com/CryZe107/status/1422896986865475584">https://twitter.com/CryZe107/status/1422896986865475584</a></p>
</blockquote>
<blockquote>
<p>“noalias causes miscompilation”</p>
</blockquote>
<p>(i haven’t confirmed the example directly, not yet.)</p>



<a name="248359516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Tracking%20LLVM%20noalias%20support%20%2354878/near/248359516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Tracking.20LLVM.20noalias.20support.20.2354878.html#248359516">(Aug 04 2021 at 14:42)</a>:</h4>
<p>Not again...</p>



<a name="248365436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Tracking%20LLVM%20noalias%20support%20%2354878/near/248365436" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/Tracking.20LLVM.20noalias.20support.20.2354878.html#248365436">(Aug 04 2021 at 15:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119224">CryZe</span> <a href="#narrow/stream/241545-t-release/topic/noalias.20miscompilation.20.20on.20stable/near/248360328">said</a>:</p>
<blockquote>
<p>Hi, so turns out that it's not directly noalias related. Apparently if you specify rustflags in .cargo/config (which I needed for specifying target-features for WASM) and also pass the RUSTFLAGS env var via the command line, cargo will completely silently ignore the .cargo/config. So me passing <code>-Z mutable-noalias=no</code> via the commandline silently turned off crucial target features and which made the whole thing correctly compile in the end. However while cargo completely misled me here, there is indeed a miscompilation going on, so I'm still investigating that one.</p>
</blockquote>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
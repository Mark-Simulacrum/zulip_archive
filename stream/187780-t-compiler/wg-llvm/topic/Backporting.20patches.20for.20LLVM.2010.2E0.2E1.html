<html>
<head><meta charset="utf-8"><title>Backporting patches for LLVM 10.0.1 · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html">Backporting patches for LLVM 10.0.1</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="198254419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198254419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198254419">(May 20 2020 at 20:40)</a>:</h4>
<p>We have several patches on top of LLVM 10, are these on the queue for backporting to LLVM 10.0.1?</p>



<a name="198256153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256153">(May 20 2020 at 20:55)</a>:</h4>
<p>Probably not :) I'll check what we carry and ask the RM.</p>



<a name="198256427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256427">(May 20 2020 at 20:58)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> Did we end up using the wasm bitcode section stuff, or did that get replaced by something else in the final implementation?</p>



<a name="198256445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256445">(May 20 2020 at 20:58)</a>:</h4>
<p>it all got dropped</p>



<a name="198256452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256452">(May 20 2020 at 20:58)</a>:</h4>
<p>in favor of llvm</p>



<a name="198256474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256474">(May 20 2020 at 20:58)</a>:</h4>
<p>in that there's no rust-specific wasm stuff in rustc for that</p>



<a name="198256556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256556">(May 20 2020 at 20:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> So we're using the functionality implemented in <a href="https://github.com/rust-lang/llvm-project/commit/899dc7255ad0ada1e709406bdbd65b715439a7c8">https://github.com/rust-lang/llvm-project/commit/899dc7255ad0ada1e709406bdbd65b715439a7c8</a> and <a href="https://github.com/rust-lang/llvm-project/commit/23bf20e3b4a969642c86cfbfe71dd2dc147584dc">https://github.com/rust-lang/llvm-project/commit/23bf20e3b4a969642c86cfbfe71dd2dc147584dc</a>?</p>



<a name="198256579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256579" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256579">(May 20 2020 at 20:59)</a>:</h4>
<p>correct</p>



<a name="198256641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198256641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198256641">(May 20 2020 at 21:00)</a>:</h4>
<p>Okay, thanks!</p>



<a name="198371453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198371453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198371453">(May 21 2020 at 20:17)</a>:</h4>
<p>Tom Stellard is my coworker -- let me know if I should raise anything to him</p>



<a name="198371473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198371473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198371473">(May 21 2020 at 20:17)</a>:</h4>
<p>but of course you're welcome to contact him yourself</p>



<a name="198810583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198810583" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198810583">(May 26 2020 at 19:34)</a>:</h4>
<p><span class="user-mention" data-user-id="138448">@cuviper</span> So here's the set of patches we carry that aren't in the LLVM 10.0.x release branch.</p>



<a name="198810690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198810690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198810690">(May 26 2020 at 19:35)</a>:</h4>
<p>I'm particularly interested in backporting <a href="https://github.com/llvm/llvm-project/commit/d1947abf64d42b5afce9c42c9e463be2c7cf8a1f">https://github.com/llvm/llvm-project/commit/d1947abf64d42b5afce9c42c9e463be2c7cf8a1f</a> and <a href="https://github.com/llvm/llvm-project/commit/f1a06bf905257cda240ad7d1050c47c813970465">https://github.com/llvm/llvm-project/commit/f1a06bf905257cda240ad7d1050c47c813970465</a> since they are used by the new inline asm.</p>



<a name="198810794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198810794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198810794">(May 26 2020 at 19:36)</a>:</h4>
<p>However I think the other patches are probably worth backporting too.</p>



<a name="198816771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198816771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198816771">(May 26 2020 at 20:23)</a>:</h4>
<p>FWIW I did mail Tom Stellard a list of potential backport candidates (including those two) a few days ago. Might have to create bugzilla issues if I don't get a response.</p>



<a name="198817552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198817552" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198817552">(May 26 2020 at 20:29)</a>:</h4>
<p>I'll check with Tom on that</p>



<a name="198818706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198818706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198818706">(May 26 2020 at 20:40)</a>:</h4>
<p>he says bugzilla is really the way to do it -- when people email, he just ends up filing a bug on their behalf</p>



<a name="198818749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198818749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198818749">(May 26 2020 at 20:40)</a>:</h4>
<p>a single bug for a group of commits is fine when they're interdependent</p>



<a name="198818826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198818826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198818826">(May 26 2020 at 20:41)</a>:</h4>
<p>Tom also says this script is the easiest way to submit requests: <a href="https://reviews.llvm.org/D79516">https://reviews.llvm.org/D79516</a></p>



<a name="198818936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/198818936" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#198818936">(May 26 2020 at 20:42)</a>:</h4>
<p>might be interesting if we make that part of our process when we merge PRs in rust-lang/llvm-project</p>



<a name="199963618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/199963618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#199963618">(Jun 06 2020 at 08:41)</a>:</h4>
<p>I've submitted <a href="https://bugs.llvm.org/show_bug.cgi?id=46223">https://bugs.llvm.org/show_bug.cgi?id=46223</a>, <a href="https://bugs.llvm.org/show_bug.cgi?id=46224">https://bugs.llvm.org/show_bug.cgi?id=46224</a>, <a href="https://bugs.llvm.org/show_bug.cgi?id=46225">https://bugs.llvm.org/show_bug.cgi?id=46225</a> now.</p>



<a name="199963675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/199963675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#199963675">(Jun 06 2020 at 08:42)</a>:</h4>
<p>And yeah, it would probably make sense to submit these directly whenever we merge something into our llvm fork.</p>



<a name="200755993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/Backporting%20patches%20for%20LLVM%2010.0.1/near/200755993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/Backporting.20patches.20for.20LLVM.2010.2E0.2E1.html#200755993">(Jun 13 2020 at 08:36)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> FYI the inline assembly fixes are now in LLVM 10.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
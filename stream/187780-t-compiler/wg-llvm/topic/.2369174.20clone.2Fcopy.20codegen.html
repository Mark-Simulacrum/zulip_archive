<html>
<head><meta charset="utf-8"><title>#69174 clone/copy codegen · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html">#69174 clone/copy codegen</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="229787682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/%2369174%20clone/copy%20codegen/near/229787682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html#229787682">(Mar 11 2021 at 03:30)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> I'm looking on this issue <a href="https://github.com/rust-lang/rust/issues/69174">https://github.com/rust-lang/rust/issues/69174</a> , could you show me the codegen logic location for a function in the codebase? thanks.</p>



<a name="229801979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/%2369174%20clone/copy%20codegen/near/229801979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html#229801979">(Mar 11 2021 at 06:37)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/blob/066f01d81bfbed746f6b6cf27a0426d829e8e832/compiler/rustc_codegen_ssa/src/mir/mod.rs#L131">https://github.com/rust-lang/rust/blob/066f01d81bfbed746f6b6cf27a0426d829e8e832/compiler/rustc_codegen_ssa/src/mir/mod.rs#L131</a></p>



<a name="229817781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/%2369174%20clone/copy%20codegen/near/229817781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html#229817781">(Mar 11 2021 at 09:15)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> how can I prevent the unused code being optimized away? the functions disappeared before <code>codgen_instance</code> as I couldn't find their symbols in <code>RUSTC_LOG=rustc_mir_build::mir</code>.</p>



<a name="229822697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/%2369174%20clone/copy%20codegen/near/229822697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html#229822697">(Mar 11 2021 at 09:56)</a>:</h4>
<p>-Clink-dead-code?</p>



<a name="229822735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/%2369174%20clone/copy%20codegen/near/229822735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html#229822735">(Mar 11 2021 at 09:56)</a>:</h4>
<p>Or maybe mir-opt-level=0</p>



<a name="229823606"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/%2369174%20clone/copy%20codegen/near/229823606" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> csmoe <a href="https://rust-lang.github.io/zulip_archive/stream/187780-t-compiler/wg-llvm/topic/.2369174.20clone.2Fcopy.20codegen.html#229823606">(Mar 11 2021 at 10:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/.2369174.20clone.2Fcopy.20codegen/near/229822697">said</a>:</p>
<blockquote>
<p>-Clink-dead-code?</p>
</blockquote>
<p>really thanks, this cfg works</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
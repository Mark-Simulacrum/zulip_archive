<html>
<head><meta charset="utf-8"><title>optimized i686 fails primal-sieve tests #94032 · t-compiler/wg-llvm · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/index.html">t-compiler/wg-llvm</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html">optimized i686 fails primal-sieve tests #94032</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272278633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272278633" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272278633">(Feb 17 2022 at 15:46)</a>:</h4>
<p>following up on discussion from T-compiler triage meeting here.</p>



<a name="272278811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272278811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272278811">(Feb 17 2022 at 15:47)</a>:</h4>
<p>(meeting discussion started here: <a href="#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202022-02-17.20.2354818/near/272275991">https://rust-lang.zulipchat.com/#narrow/stream/238009-t-compiler.2Fmeetings/topic/.5Bweekly.5D.202022-02-17.20.2354818/near/272275991</a> )</p>



<a name="272296140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272296140" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272296140">(Feb 17 2022 at 17:43)</a>:</h4>
<p>Per cuviper's remark, <a href="https://github.com/rust-lang/rust/issues/94032#issuecomment-1043162202">https://github.com/rust-lang/rust/issues/94032#issuecomment-1043162202</a> It looks like this is fixed by removing the <code>#[inline]</code> attribute, so that pretty much confirms it is based on a combination of inlining and pass ordering.</p>



<a name="272296526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272296526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272296526">(Feb 17 2022 at 17:46)</a>:</h4>
<p>Since it's confirmed to only be for x86 and not x86-64 and not other 32-bit targets, is disabling NewPM for that target only on the table?</p>



<a name="272297178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272297178" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272297178">(Feb 17 2022 at 17:50)</a>:</h4>
<p>That seems like a pretty big hammer with various side effects...</p>



<a name="272298259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272298259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272298259">(Feb 17 2022 at 17:58)</a>:</h4>
<p>We did that for s390x, but that's only tier-2. Plus that one was directly about inlining trouble with exponential growth, and might be better since we disabled deferred inlining anyway.</p>



<a name="272300202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272300202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272300202">(Feb 17 2022 at 18:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032/near/272297178">said</a>:</p>
<blockquote>
<p>That seems like a pretty big hammer with various side effects...</p>
</blockquote>
<p>It is, but doing it for only one target seems worth considering since "disable it entirely" was on the table before, unless that was implicitly the subject of the discussion of the meeting.</p>



<a name="272300756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272300756" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272300756">(Feb 17 2022 at 18:14)</a>:</h4>
<p>I also think it's reasonable to suggest that even if an s390x target is tier 2 and some i686 targets are tier 1, that the balance tilts more heavily in the direction of "keep code working" for i686 than "make sure it runs well".</p>
<p>A more surgical solution does seem ideal, but it seems thin on time and it might be target-specific.</p>



<a name="272301799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272301799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272301799">(Feb 17 2022 at 18:22)</a>:</h4>
<p><span class="user-mention" data-user-id="281757">@Jubilee</span> Complete agreement with i686 being more "keep it working".</p>



<a name="272301848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272301848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272301848">(Feb 17 2022 at 18:22)</a>:</h4>
<p>That's the only thing I had in mind there: disabling NewPM seemed like a substantially different code path, which might make it harder to maintain and debug.</p>



<a name="272301877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272301877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272301877">(Feb 17 2022 at 18:23)</a>:</h4>
<p>Performance wasn't my primary concern there. :)</p>



<a name="272302083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272302083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272302083">(Feb 17 2022 at 18:24)</a>:</h4>
<p>Ah, well, it's definitely kicking the can down the road a bit rather than allowing us to drop the old PM entirely, but it's also the devil we know better.</p>
<p><code>-Cllvm-args</code> effectively passes to <code>llc</code>, right? Or is it opt...?</p>



<a name="272302481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272302481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272302481">(Feb 17 2022 at 18:27)</a>:</h4>
<p>I think it affects both for library usage</p>



<a name="272302535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272302535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272302535">(Feb 17 2022 at 18:27)</a>:</h4>
<p><code>-inline-deferral</code> in particular matters for <code>opt</code> though</p>



<a name="272303002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272303002" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272303002">(Feb 17 2022 at 18:30)</a>:</h4>
<p>There isn't a convenient page or print option summarizing all the CLI arguments applicable thereby, is there?</p>



<a name="272303268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272303268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272303268">(Feb 17 2022 at 18:32)</a>:</h4>
<p>I just use <code>-help</code> and/or <code>-help-hidden</code></p>



<a name="272303310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272303310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272303310">(Feb 17 2022 at 18:33)</a>:</h4>
<p>or <code>--help-list</code> or <code>--help-list-hidden</code> -- I dunno, just mash them all</p>



<a name="272303356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272303356" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272303356">(Feb 17 2022 at 18:33)</a>:</h4>
<p>laughing at the absolute state</p>



<a name="272303395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272303395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272303395">(Feb 17 2022 at 18:34)</a>:</h4>
<p>Thank you. <span aria-label="sparkling heart" class="emoji emoji-1f496" role="img" title="sparkling heart">:sparkling_heart:</span></p>



<a name="272304685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272304685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272304685">(Feb 17 2022 at 18:43)</a>:</h4>
<p>looks like the actual difference in "list" is just that it doesn't group options into any categories, but that grouping is pretty minimal anyway. almost everything is under "General options".</p>



<a name="272304839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272304839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272304839">(Feb 17 2022 at 18:44)</a>:</h4>
<p>I'm starting to try to look into this more now</p>



<a name="272304923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272304923" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272304923">(Feb 17 2022 at 18:45)</a>:</h4>
<p>silly question over here: the <code>[llvm] targets</code> in <code>config.toml</code>, am I correct in inferring that <code>X86</code> there represents support for <em>both</em> i686 and x86_64 ?</p>



<a name="272304946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272304946" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272304946">(Feb 17 2022 at 18:45)</a>:</h4>
<p>yes</p>



<a name="272308299"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272308299" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272308299">(Feb 17 2022 at 19:11)</a>:</h4>
<p>(i've reproduced it and I'm working on reducing it, FYI)</p>



<a name="272308735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272308735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272308735">(Feb 17 2022 at 19:14)</a>:</h4>
<p><span class="user-mention silent" data-user-id="281757">Jubilee</span> <a href="#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032/near/272300202">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/187780-t-compiler.2Fwg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032/near/272297178">said</a>:</p>
<blockquote>
<p>That seems like a pretty big hammer with various side effects...</p>
</blockquote>
<p>It is, but doing it for only one target seems worth considering since "disable it entirely" was on the table before, unless that was implicitly the subject of the discussion of the meeting.</p>
</blockquote>
<p>Indeed, we didn't clarify this explicitly, but what was in my head during the earlier conversation was indeed "disable New PM across the board"</p>



<a name="272308814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272308814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272308814">(Feb 17 2022 at 19:15)</a>:</h4>
<p>I might be able to be talked into a more narrow "disable New PM by-default for <em>just</em> i686." But I really want to get a bit further in trying to isolate the root cause before applying that (somewhat more restricted) hammer.</p>



<a name="272310245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310245">(Feb 17 2022 at 19:26)</a>:</h4>
<p>if it helps, for <code>test --lib</code> you can remove the <code>primal-sieve</code> dev-dependencies on <code>primal</code> and <code>criterion</code>, just keeping <code>primal-slowsieve</code></p>



<a name="272310290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310290">(Feb 17 2022 at 19:27)</a>:</h4>
<p>yeah, I already just moved the single test into its own main function and stopped using the dev-dependencies at all (I think)</p>



<a name="272310338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310338">(Feb 17 2022 at 19:27)</a>:</h4>
<p>its just depending on the <code>primal-sieve</code> crate itself.  I haven't yet delved into its depths</p>



<a name="272310365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310365" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310365">(Feb 17 2022 at 19:27)</a>:</h4>
<p>hmm, I thought I tried that and it didn't reproduce anymore</p>



<a name="272310537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310537">(Feb 17 2022 at 19:28)</a>:</h4>
<p>but if that's working for you, all the better</p>



<a name="272310654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310654">(Feb 17 2022 at 19:29)</a>:</h4>
<p>current main looks like this: <a href="https://gist.github.com/pnkfelix/a2755c48ae1476c02f7b9f8a7d76ec62">https://gist.github.com/pnkfelix/a2755c48ae1476c02f7b9f8a7d76ec62</a></p>



<a name="272310674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310674">(Feb 17 2022 at 19:29)</a>:</h4>
<p>so its not like I've gotten it down to nothing</p>



<a name="272310687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310687">(Feb 17 2022 at 19:30)</a>:</h4>
<p>but I'm exploring removing as much as I can from the mod's now</p>



<a name="272310856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272310856" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272310856">(Feb 17 2022 at 19:31)</a>:</h4>
<p>ah, I had tried it as something under <code>tests/</code>, but that would be quite different in codegen units</p>



<a name="272311387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311387">(Feb 17 2022 at 19:35)</a>:</h4>
<p>you can cut out <code>folded_sum</code> and just <code>assert_eq!(manual_sum, 142913828922);</code></p>



<a name="272311449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311449">(Feb 17 2022 at 19:35)</a>:</h4>
<p>heh, i hadn't paid attention to which one was in error. :)</p>



<a name="272311457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311457">(Feb 17 2022 at 19:35)</a>:</h4>
<p>oh damn, that fails on x86_64 too!</p>



<a name="272311578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311578">(Feb 17 2022 at 19:36)</a>:</h4>
<p>hmm, I'm not seeing that, not yet at least</p>



<a name="272311663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311663">(Feb 17 2022 at 19:37)</a>:</h4>
<p>oh wait, there it is!</p>



<a name="272311681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311681" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311681">(Feb 17 2022 at 19:37)</a>:</h4>
<p>you're right, literally adding that change makes it fail. That's freaking wacky!</p>



<a name="272311831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272311831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272311831">(Feb 17 2022 at 19:38)</a>:</h4>
<p>stable too, so this is no longer a "new" regression</p>



<a name="272312111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272312111" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272312111">(Feb 17 2022 at 19:40)</a>:</h4>
<p>1.54.0 passes, 1.55.0 fails</p>



<a name="272313974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272313974" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272313974">(Feb 17 2022 at 19:57)</a>:</h4>
<p>since there's a heap of unsafe pointers in the wheel code, I'll note that miri is happy with the current <code>primal</code> master branch</p>



<a name="272314009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314009">(Feb 17 2022 at 19:57)</a>:</h4>
<p>(I recently pushed a fix for an issue there)</p>



<a name="272314251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314251">(Feb 17 2022 at 19:59)</a>:</h4>
<p>Oh, well.<br>
I think that makes disabling NewPM functionally pointless.</p>



<a name="272314349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314349">(Feb 17 2022 at 19:59)</a>:</h4>
<p>yeah i don't think we'll be doing that for this bug</p>



<a name="272314483"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314483" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314483">(Feb 17 2022 at 20:00)</a>:</h4>
<p>which to me means there's ... not as much rush? I mean, of course it'd be great to fix this</p>



<a name="272314640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314640">(Feb 17 2022 at 20:00)</a>:</h4>
<p>Yeah.<br>
If the regression is on stable, it's "too late" and there's nothing to be saved by reverting, really.</p>



<a name="272314651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314651">(Feb 17 2022 at 20:00)</a>:</h4>
<p>but I think the impact we're talking about , its really hard to predict impact, but the crucial point is that this is something already latent</p>



<a name="272314860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272314860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272314860">(Feb 17 2022 at 20:01)</a>:</h4>
<p>And we might as well continue to let regression reports roll in.</p>



<a name="272315021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272315021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272315021">(Feb 17 2022 at 20:01)</a>:</h4>
<p>yes, accumulating extra examples is a good thing</p>



<a name="272315287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272315287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272315287">(Feb 17 2022 at 20:02)</a>:</h4>
<p><code>cargo bisect-rustc</code> gives me a pass on <code>nightly-2021-07-05</code> and a fail on <code>nightly-2021-07-06</code></p>



<a name="272315330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272315330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272315330">(Feb 17 2022 at 20:02)</a>:</h4>
<p>but it seems we don't have CI builds cached anymore to drill further</p>



<a name="272315369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272315369" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272315369">(Feb 17 2022 at 20:03)</a>:</h4>
<div class="codehilite"><pre><span></span><code>  commit[0] 2021-07-04UTC: Auto merge of #86598 - yoshuawuyts:poll-method-docs, r=JohnTitor
  commit[1] 2021-07-04UTC: Auto merge of #86875 - JohnTitor:rollup-fuefamw, r=JohnTitor
  commit[2] 2021-07-05UTC: Auto merge of #86867 - JohnTitor:convert-to-actual-assert, r=jackh726
  commit[3] 2021-07-05UTC: Auto merge of #86282 - camelid:macro_rules-matchers, r=jyn514
  commit[4] 2021-07-05UTC: Auto merge of #86663 - fee1-dead:use-rustdoc-css, r=GuillaumeGomez
  commit[5] 2021-07-05UTC: Auto merge of #86861 - RalfJung:miri, r=RalfJung
  commit[6] 2021-07-05UTC: Auto merge of #84560 - cjgillot:inline-iter, r=m-ou-se
  commit[7] 2021-07-05UTC: Auto merge of #86674 - Aaron1011:new-querify-limits, r=michaelwoerister
  commit[8] 2021-07-05UTC: Auto merge of #86891 - JohnTitor:rollup-gy2gan9, r=JohnTitor
</code></pre></div>



<a name="272315730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272315730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272315730">(Feb 17 2022 at 20:06)</a>:</h4>
<p>I'll try a local git-bisect</p>



<a name="272322199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272322199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272322199">(Feb 17 2022 at 21:03)</a>:</h4>
<p>well that blames <a href="https://github.com/rust-lang/rust/issues/84560">#84560</a>, which is a single <code>#[inline]</code> addition</p>



<a name="272322253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272322253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272322253">(Feb 17 2022 at 21:03)</a>:</h4>
<p>I can see how that might perturb things here, but it's not a root cause</p>



<a name="272338245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272338245" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272338245">(Feb 17 2022 at 23:17)</a>:</h4>
<p>stepping through this on x86_64, I found that in <code>SievePrimes::advance_ones</code>, <code>self.limit</code> is getting clobbered by <code>self.ones = bits.ones_from(0);</code></p>



<a name="272338326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272338326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272338326">(Feb 17 2022 at 23:18)</a>:</h4>
<p><code>ones_from</code> is not inlined, but it's getting a pointer for the return location, and that overlaps the stack where <code>limit</code> is stored</p>



<a name="272338367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272338367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272338367">(Feb 17 2022 at 23:18)</a>:</h4>
<p>e.g. 0x7fffffffd7b8 where it should store 4 words, and <code>limit</code> is at 0x7fffffffd7c8</p>



<a name="272338743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272338743" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272338743">(Feb 17 2022 at 23:23)</a>:</h4>
<p>I added <code>dbg!(self.limit)</code> and the problem still reproduced, but <code>dbg!(&amp;self.limit)</code> makes the problem go away. So observation of the address matters, which is maybe SROA-related?</p>



<a name="272347927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272347927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272347927">(Feb 18 2022 at 01:19)</a>:</h4>
<p>hmm, it works without stack coloring</p>



<a name="272347938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272347938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272347938">(Feb 18 2022 at 01:19)</a>:</h4>
<p><code>-Cllvm-args=--no-stack-coloring</code></p>



<a name="272349757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272349757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272349757">(Feb 18 2022 at 01:47)</a>:</h4>
<p>I don't know if that means the llvm.lifetimes are wrong, or what</p>



<a name="272354684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272354684" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272354684">(Feb 18 2022 at 03:04)</a>:</h4>
<p>that's an interesting theory</p>



<a name="272428469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272428469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272428469">(Feb 18 2022 at 17:08)</a>:</h4>
<p>So I'm seeing two large frame allocation for the return values of <code>Sieve::primes_from</code> and <code>SievePrimes::advance_ones</code>, which then both copy into registers after the call, so that's the bounded lifetime of those allocs. This is what stack-coloring merges. The <code>limit</code> I mentioned comes from the first one.</p>



<a name="272428699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272428699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272428699">(Feb 18 2022 at 17:10)</a>:</h4>
<p>later, machine-sink moves that <code>limit</code> register load into the loop. But this is not valid, because <code>SievePrimes::advance_ones</code> will clobber that memory.</p>



<a name="272428951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272428951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272428951">(Feb 18 2022 at 17:12)</a>:</h4>
<p>sorry, actually <code>advance_ones</code> is inlined, but its call to <code>BitVec::ones_from</code> is what shares that alloc and clobbers the memory</p>



<a name="272429222"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272429222" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272429222">(Feb 18 2022 at 17:14)</a>:</h4>
<p>here's the LLVM IR I'm looking at: <a href="https://gist.github.com/cuviper/9271caacea861347a42d7d6384902779">https://gist.github.com/cuviper/9271caacea861347a42d7d6384902779</a></p>



<a name="272429289"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272429289" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272429289">(Feb 18 2022 at 17:15)</a>:</h4>
<p>and I'm crudely digging through <code>llc --print-after-all</code></p>



<a name="272429460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272429460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272429460">(Feb 18 2022 at 17:16)</a>:</h4>
<p>the <code>limit</code> field starts at IR <code>%25</code> in that</p>



<a name="272430529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272430529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272430529">(Feb 18 2022 at 17:26)</a>:</h4>
<p><span class="user-mention" data-user-id="133224">@Nikita Popov</span> is this enough that you could form a coherent LLVM bug report?</p>



<a name="272431148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272431148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272431148">(Feb 18 2022 at 17:31)</a>:</h4>
<p>(it does work with <code>--disable-machine-sink</code>)</p>



<a name="272694884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272694884" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272694884">(Feb 21 2022 at 14:26)</a>:</h4>
<p>I'll look into it.</p>



<a name="272709029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272709029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272709029">(Feb 21 2022 at 16:22)</a>:</h4>
<p>I believe that <code>MachineSinking::hasStoreBetween()</code> is skipping blocks based on an incorrect postdom check, though I haven't quite figured out the necessary CFG structure yet.</p>



<a name="272736886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272736886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272736886">(Feb 21 2022 at 21:30)</a>:</h4>
<p>have you all already created a single file reproducer, or should I keep working on mine (currently <a href="https://gist.github.com/pnkfelix/f45098bc69482dac920dcf384049b849">2kloc main.rs</a>, solely dep on libstd)? I couldn't tell if <span class="user-mention" data-user-id="138448">@cuviper</span> 's link was something that one could expect to execute</p>



<a name="272736960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272736960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272736960">(Feb 21 2022 at 21:31)</a>:</h4>
<p>let's see if clang can eat that.</p>



<a name="272737300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737300" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737300">(Feb 21 2022 at 21:36)</a>:</h4>
<div class="codehilite"><pre><span></span><code>usr/bin/ld: /tmp/example-499917.o: in function `core::ptr::drop_in_place&lt;primal_sieve::sieve::Sieve&gt;&#39;:
primal_sieve.88lhwwez-cgu.7:(.text+0x5): undefined reference to `&lt;smallvec::SmallVec&lt;A&gt; as core::ops::drop::Drop&gt;::drop&#39;
/usr/bin/ld: /tmp/example-499917.o: in function `primal_sieve::main&#39;:
primal_sieve.88lhwwez-cgu.7:(.text+0x30): undefined reference to `primal_sieve::sieve::Sieve::new&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0x5d): undefined reference to `primal_sieve::sieve::Sieve::primes_from&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0x8ea): undefined reference to `_ZN10primal_bit4iter43_$LT$impl$u20$primal_bit..inner..BitVec$GT$9ones_from17hd77672f93f894f10E.llvm.8265524964708006179&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xb45): undefined reference to `&lt;&amp;T as core::fmt::Display&gt;::fmt&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xb58): undefined reference to `core::fmt::num::imp::&lt;impl core::fmt::Display for u32&gt;::fmt&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xb78): undefined reference to `&lt;&amp;T as core::fmt::Display&gt;::fmt&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xb8c): undefined reference to `&lt;&amp;T as core::fmt::Debug&gt;::fmt&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xbd7): undefined reference to `std::io::stdio::_eprint&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xcae): undefined reference to `&lt;smallvec::SmallVec&lt;A&gt; as core::ops::drop::Drop&gt;::drop&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xce7): undefined reference to `core::panicking::assert_failed&#39;
/usr/bin/ld: /tmp/example-499917.o: in function `main&#39;:
primal_sieve.88lhwwez-cgu.7:(.text+0xd0a): undefined reference to `anon.680ffd87241aebf9ce6f32a91c875853.0.llvm.17403337492838527395&#39;
/usr/bin/ld: primal_sieve.88lhwwez-cgu.7:(.text+0xd14): undefined reference to `std::rt::lang_start_internal&#39;
/usr/bin/ld: /tmp/example-499917.o:(.eh_frame+0x57): undefined reference to `rust_eh_personality&#39;
/usr/bin/ld: /app/output.s: hidden symbol `_ZN12primal_sieve5sieve5Sieve11primes_from17hfb976e0a3c891bbaE&#39; isn&#39;t defined
/usr/bin/ld: final link failed: bad value
clang-15: error: linker command failed with exit code 1 (use -v to see invocation)
Execution build compiler returned: 1
</code></pre></div>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> Yeah cuviper's example fails linking, looks like.</p>



<a name="272737364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737364" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737364">(Feb 21 2022 at 21:37)</a>:</h4>
<p>right, mine was just one CGU</p>



<a name="272737366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737366">(Feb 21 2022 at 21:37)</a>:</h4>
<p>(of many)</p>



<a name="272737381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737381">(Feb 21 2022 at 21:37)</a>:</h4>
<p>it's the one that has the problem, but my goal wasn't to actually execute it</p>



<a name="272737446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737446">(Feb 21 2022 at 21:38)</a>:</h4>
<p>I just don't have a good mental model of what the bar is for LLVM developers to look at a reproducer on a bug</p>



<a name="272737448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737448">(Feb 21 2022 at 21:38)</a>:</h4>
<p>Yeah I figured that was going to be the case but I just wanted to confirm for the sake of demonstration.</p>



<a name="272737479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jubilee <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737479">(Feb 21 2022 at 21:39)</a>:</h4>
<p>LLVM devs largely don't know Rust and would like to see an LLIR file they can actually tinker with, it seems.</p>



<a name="272737503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272737503" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272737503">(Feb 21 2022 at 21:39)</a>:</h4>
<p>and then there's <span class="user-mention" data-user-id="133224">@Nikita Popov</span> -- seems like he's got a clue about this</p>



<a name="272742496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272742496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272742496">(Feb 21 2022 at 22:55)</a>:</h4>
<p>(in any case, there's a fair amount more reduction I can  still apply to my <a href="http://main.rs">main.rs</a>; currently gotten local copy down to 1167 loc)</p>



<a name="272831338"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187780-t-compiler/wg-llvm/topic/optimized%20i686%20fails%20primal-sieve%20tests%20%2394032/near/272831338" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/187780-t-compiler/wg-llvm/topic/optimized.20i686.20fails.20primal-sieve.20tests.20.2394032.html#272831338">(Feb 22 2022 at 16:48)</a>:</h4>
<p><span class="user-mention" data-user-id="133224">@Nikita Popov</span> D120330 does fix the problem for me, both for the x86_64 reproducer and all the way back to the original i686 test!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
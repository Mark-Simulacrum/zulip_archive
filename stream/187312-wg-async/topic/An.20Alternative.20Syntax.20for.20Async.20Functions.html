<html>
<head><meta charset="utf-8"><title>An Alternative Syntax for Async Functions · wg-async · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/index.html">wg-async</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html">An Alternative Syntax for Async Functions</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251601535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251601535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251601535">(Sep 01 2021 at 17:54)</a>:</h4>
<p>I've been thinking about the async fn in traits problem for a while, and I decided to flesh out by thoughts in writing. The basic idea is that <code>async fn foo() -&gt; usize;</code> would become <code>async fn foo() -&gt; impl Future&lt;Output = usize&gt;;</code>, which has numerous benefits: <a href="https://ibraheem.ca/writings/an-alternative-async-fn-syntax/">https://ibraheem.ca/writings/an-alternative-async-fn-syntax/</a></p>



<a name="251606291"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251606291" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251606291">(Sep 01 2021 at 18:25)</a>:</h4>
<p>All that being said, I doubt this change will happen, but after <span class="user-mention" data-user-id="116009">@nikomatsakis</span> said that implicit await was doable across an edition, I thought I'd put it out there :)</p>



<a name="251606599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251606599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251606599">(Sep 01 2021 at 18:27)</a>:</h4>
<p>One thing that convinced me against this is that <code>impl Trait</code> does not capture lifetimes by default, so it becomes actually reasonably awkward to write most functions.</p>



<a name="251608411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251608411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251608411">(Sep 01 2021 at 18:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/An.20Alternative.20Syntax.20for.20Async.20Functions/near/251606599">said</a>:</p>
<blockquote>
<p>One thing that convinced me against this is that <code>impl Trait</code> does not capture lifetimes by default, so it becomes actually reasonably awkward to write most functions.</p>
</blockquote>
<p><code>+ 'in</code> solves that</p>



<a name="251626656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251626656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kestrer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251626656">(Sep 01 2021 at 20:47)</a>:</h4>
<p>I just realized how weird it is that <code>impl Trait</code> does not capture input lifetimes by default, given that <a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=fb4aef6a488936fb5d141583a3f1747b">it does capture input types</a>. I wonder how breaking it would be to change that. It would certainly benefit this proposal.</p>



<a name="251634536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251634536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251634536">(Sep 01 2021 at 21:47)</a>:</h4>
<p>I agree that this is odd</p>



<a name="251634718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251634718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251634718">(Sep 01 2021 at 21:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="363998">Ibraheem Ahmed</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/An.20Alternative.20Syntax.20for.20Async.20Functions/near/251601535">said</a>:</p>
<blockquote>
<p>I've been thinking about the async fn in traits problem for a while, and I decided to flesh out by thoughts in writing. The basic idea is that <code>async fn foo() -&gt; usize;</code> would become <code>async fn foo() -&gt; impl Future&lt;Output = usize&gt;;</code>, which has numerous benefits: <a href="https://ibraheem.ca/writings/an-alternative-async-fn-syntax/">https://ibraheem.ca/writings/an-alternative-async-fn-syntax/</a></p>
</blockquote>
<p>I'd like to experiment with something like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">stuff</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">foo</span><span class="p">().</span><span class="k">await</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>where <code>async</code> can be combined with other effecting keywords like <code>box</code> and <code>try</code>. We're like one step removed from this, it's not a breaking change, and it benefits areas other than async.</p>



<a name="251634916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251634916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251634916">(Sep 01 2021 at 21:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116883">@tmandry</span> - is the syntax of that basically <code>fn $ident($param*) -&gt; $type = $block</code>?</p>



<a name="251634981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251634981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251634981">(Sep 01 2021 at 21:51)</a>:</h4>
<p>Could I also do this?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">bar</span>: <span class="nc">Bar</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">match</span><span class="w"> </span><span class="n">bar</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251635231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635231">(Sep 01 2021 at 21:53)</a>:</h4>
<p>Or even?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">one</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="kt">i32</span> <span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"></span>
</code></pre></div>



<a name="251635242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635242">(Sep 01 2021 at 21:53)</a>:</h4>
<p>no :)</p>



<a name="251635271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635271">(Sep 01 2021 at 21:53)</a>:</h4>
<p>I mean, in theory we could allow that, I just don't want to ;)</p>



<a name="251635283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635283">(Sep 01 2021 at 21:53)</a>:</h4>
<p>okay :)</p>



<a name="251635310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635310">(Sep 01 2021 at 21:53)</a>:</h4>
<p>or at least not to start</p>



<a name="251635317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635317" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635317">(Sep 01 2021 at 21:53)</a>:</h4>
<p>I actually kinda like the more general version (having thought about it for all of 30 seconds)</p>



<a name="251635374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635374">(Sep 01 2021 at 21:54)</a>:</h4>
<p>But you're right, it's easy to generalize in the future.</p>



<a name="251635409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635409">(Sep 01 2021 at 21:54)</a>:</h4>
<p>scala has this, I always found it hard to skim if the entire function + body was all on one line</p>



<a name="251635453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635453">(Sep 01 2021 at 21:54)</a>:</h4>
<p>which is why I'd prefer to only have blocks</p>



<a name="251635484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635484">(Sep 01 2021 at 21:55)</a>:</h4>
<p>but this is all my personal opinion of course</p>



<a name="251635498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635498">(Sep 01 2021 at 21:55)</a>:</h4>
<p>oh yeah, I guess <code>match</code> is an expression, not a block</p>



<a name="251635547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635547">(Sep 01 2021 at 21:55)</a>:</h4>
<p>I'm not as opposed to the <code>match</code> idea actually</p>



<a name="251635561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635561" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635561">(Sep 01 2021 at 21:56)</a>:</h4>
<p>I think that could be nice</p>



<a name="251635585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635585">(Sep 01 2021 at 21:56)</a>:</h4>
<p>What about?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="o">..</span><span class="p">.</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251635646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635646">(Sep 01 2021 at 21:56)</a>:</h4>
<p>well, that does fit the pattern of "effect-y block syntax"</p>



<a name="251635658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635658">(Sep 01 2021 at 21:56)</a>:</h4>
<p>Where that would be equivalent to </p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">unsafe</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="o">..</span><span class="p">.</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251635663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635663">(Sep 01 2021 at 21:56)</a>:</h4>
<p>the only drawback is that it could be easy for reviewers to miss</p>



<a name="251635810"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251635810" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251635810">(Sep 01 2021 at 21:58)</a>:</h4>
<p>true</p>



<a name="251639149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251639149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251639149">(Sep 01 2021 at 22:28)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116883">tmandry</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/An.20Alternative.20Syntax.20for.20Async.20Functions/near/251634718">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="363998">Ibraheem Ahmed</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/An.20Alternative.20Syntax.20for.20Async.20Functions/near/251601535">said</a>:</p>
<blockquote>
<p>I've been thinking about the async fn in traits problem for a while, and I decided to flesh out by thoughts in writing. The basic idea is that <code>async fn foo() -&gt; usize;</code> would become <code>async fn foo() -&gt; impl Future&lt;Output = usize&gt;;</code>, which has numerous benefits: <a href="https://ibraheem.ca/writings/an-alternative-async-fn-syntax/">https://ibraheem.ca/writings/an-alternative-async-fn-syntax/</a></p>
</blockquote>
<p>I'd like to experiment with something like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">stuff</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="n">Future</span><span class="o">&lt;</span><span class="n">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">()</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">   </span><span class="n">foo</span><span class="p">().</span><span class="k">await</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>where <code>async</code> can be combined with other effecting keywords like <code>box</code> and <code>try</code>. We're like one step removed from this, it's not a breaking change, and it benefits areas other than async.</p>
</blockquote>
<p>Yeah, that was brought up on internals as well.</p>



<a name="251639239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251639239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251639239">(Sep 01 2021 at 22:29)</a>:</h4>
<p><a href="https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/statements-expressions-operators/expression-bodied-members">C# has a very general version of this too</a></p>



<a name="251639307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251639307" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251639307">(Sep 01 2021 at 22:30)</a>:</h4>
<div class="codehilite" data-code-language="C#"><pre><span></span><code><span class="k">public</span> <span class="kt">int</span> <span class="nf">Foo</span><span class="p">()</span> <span class="p">=&gt;</span> <span class="m">1</span><span class="p">;</span>
</code></pre></div>



<a name="251639330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251639330" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251639330">(Sep 01 2021 at 22:30)</a>:</h4>
<p>I think it works a bit better for languages that have the return type before the function name.</p>



<a name="251639357"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251639357" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251639357">(Sep 01 2021 at 22:31)</a>:</h4>
<p><code>int foo() = 1;</code> vs <code>fn foo() -&gt; int = 1;</code></p>



<a name="251648495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251648495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias247 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251648495">(Sep 02 2021 at 00:18)</a>:</h4>
<p>Fun thing is that the <code>-&gt; Future</code> syntax is basically what C# and some other languages do, where the return type of the async function is the future or task state. </p>
<p>The downside is that it adds noise to function signatures. But then it allowed them to e.g. make async functions cheaper by allowing to return different "future-like" types (<code>Task</code> requiring a heap allocation vs <code>ValueTask</code> which doesn't if the value is already ready).</p>



<a name="251648750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251648750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias247 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251648750">(Sep 02 2021 at 00:22)</a>:</h4>
<p>If we do this, we can also add the new <code>Async/CompletionFuture</code> type by making people write explicitly returning it. That requires  no additional modifier or attribute, which seems like a plus</p>



<a name="251657901"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251657901" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251657901">(Sep 02 2021 at 02:39)</a>:</h4>
<p>Yes, I mentioned C# in the post, returning the future type explicitly opens up possibilities of all sorts of future extensions with clean integration.</p>



<a name="251657912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251657912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251657912">(Sep 02 2021 at 02:39)</a>:</h4>
<p>In general I think the current syntax is quite limiting.</p>



<a name="251658139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251658139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251658139">(Sep 02 2021 at 02:43)</a>:</h4>
<p>C# lets you return async iterators too.</p>



<a name="251658408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251658408" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251658408">(Sep 02 2021 at 02:47)</a>:</h4>
<p>Its less noisy for them, <code>Task&lt;T&gt;</code> vs. <code> impl Future&lt;Output = T&gt; + '_</code>, which is probably why it was the clear choice.</p>



<a name="251658742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251658742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251658742">(Sep 02 2021 at 02:52)</a>:</h4>
<p>(deleted)</p>



<a name="251666283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251666283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias247 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251666283">(Sep 02 2021 at 05:00)</a>:</h4>
<p>My guess is C# went for it, because their implementation of async/await requires functions to return objects to which the surrounding state-machine can attach continuations. If there would be an implicit conversion from <code>T</code> to <code>Task&lt;T&gt;</code>, the conversion would also always have involved a heap allocation. But with giving users the ability to explicitly return those <code>Task</code> objects, users can cache them. e.g.</p>
<div class="codehilite"><pre><span></span><code>static Task&lt;Foo&gt; alwaysFailing = Task.FromException(
    new Exception(&quot;this task object can be returned on all error path and only has to be allocated once&quot;)
);

async Task&lt;Foo&gt; doSomething(int a) {
    if (a != 777) {
       return alwaysFailing;
    }
}
</code></pre></div>
<p>The idea that async functions can return other objects which are awaitable (like <code>ValueTask</code>) came up only 5+ years later.</p>



<a name="251666467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251666467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias247 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251666467">(Sep 02 2021 at 05:03)</a>:</h4>
<p>The flexibility is definitely nice, and the fact that it keeps things consistent too.<br>
However both the current notation and <code>Task&lt;T&gt;</code> are a lot more pleasant to write than <code>impl Future&lt;Output = T&gt; + '_</code>. I fear there might not be a lot of love for requiring this as default.</p>



<a name="251677441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251677441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251677441">(Sep 02 2021 at 07:41)</a>:</h4>
<p>What about using a simple macro like <code>future!(T) =&gt; impl Future&lt;Output = T&gt; + '_</code>? It would solve the character count problem for the most part, although I have no idea what a good name would be, and using macros makes things more mysterious unless everyone learns it and knows that it is a simple macro</p>



<a name="251729056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251729056" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251729056">(Sep 02 2021 at 14:58)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">F</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span>: <span class="nc">Future</span><span class="o">&lt;</span><span class="n">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="p">,</span><span class="w"> </span><span class="n">Fut</span><span class="o">&gt;</span><span class="w"> </span><span class="n">F</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Fut</span><span class="w"> </span><span class="k">where</span><span class="w"> </span><span class="n">Fut</span>: <span class="nc">Future</span><span class="o">&lt;</span><span class="n">Output</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
</code></pre></div>



<a name="251729088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251729088" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251729088">(Sep 02 2021 at 14:58)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">impl</span><span class="w"> </span><span class="n">F</span><span class="o">&lt;</span><span class="kt">usize</span><span class="o">&gt;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">'</span><span class="na">in</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251729354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251729354" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251729354">(Sep 02 2021 at 15:00)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">bar</span>: <span class="kp">&amp;</span><span class="kt">str</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="kt">usize</span>  <span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="mi">1</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251729448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251729448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251729448">(Sep 02 2021 at 15:00)</a>:</h4>
<p>That's pretty close <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<a name="251825800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251825800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kestrer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251825800">(Sep 03 2021 at 05:44)</a>:</h4>
<p>what about using the async keyword for this?</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">async</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">async</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="mi">5</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251826266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251826266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mario Carneiro <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251826266">(Sep 03 2021 at 05:52)</a>:</h4>
<p>What about the other use cases mentioned in Ibraheem's post, like <code>impl Stream</code>? Or are you saying that this is just acting like a macro and you can also choose not to use it</p>



<a name="251826322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251826322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kestrer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251826322">(Sep 03 2021 at 05:53)</a>:</h4>
<p>yeah, it would be like a macro</p>



<a name="251826350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251826350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Kestrer <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251826350">(Sep 03 2021 at 05:53)</a>:</h4>
<p>kind of like how <code>async</code> in expression position is sugar for a future value, <code>async</code> in type position is sugar for a future type</p>



<a name="251897736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/251897736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#251897736">(Sep 03 2021 at 15:26)</a>:</h4>
<p>Repeating <code>async</code> twice is kind of weird.</p>



<a name="252109282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252109282" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Matthias247 <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252109282">(Sep 05 2021 at 23:29)</a>:</h4>
<p>See <code>requires requires</code> in C++ <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="252205888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252205888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252205888">(Sep 06 2021 at 17:50)</a>:</h4>
<p>Now that bare trait objects are a hard error in rust 2021, would it be plausible for <code>fn foo() -&gt; Trait</code> to mean <code>fn foo() -&gt; impl Trait</code>?</p>



<a name="252207189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252207189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252207189">(Sep 06 2021 at 18:03)</a>:</h4>
<p>I don't think we would want to change that; we now have an explicit indication of whether a trait is <code>impl</code> or <code>dyn</code>.</p>



<a name="252207286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252207286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252207286">(Sep 06 2021 at 18:04)</a>:</h4>
<p>(FWIW, though, I like the proposed async syntax with an explicit trait. If we're exploring a variant anyway because of potential trait changes, I think it's worth considering. I would personally prefer it.)</p>



<a name="252207631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252207631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252207631">(Sep 06 2021 at 18:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/An.20Alternative.20Syntax.20for.20Async.20Functions/near/252207189">said</a>:</p>
<blockquote>
<p>I don't think we would want to change that; we now have an explicit indication of whether a trait is <code>impl</code> or <code>dyn</code>.</p>
</blockquote>
<p>I agree, but I was just curious if that could be done without it being breaking change.</p>



<a name="252207814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252207814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252207814">(Sep 06 2021 at 18:11)</a>:</h4>
<p>I think it could be, I just don't think it should be.</p>



<a name="252207961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252207961" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252207961">(Sep 06 2021 at 18:12)</a>:</h4>
<p>Another argument in favor of the async syntax with an explicit return type: it would be consistent with having an explicit return type on try functions as well. I would be fine with having <code>try fn</code>, as long as the <code>Result</code> type is still present.</p>



<a name="252208010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208010">(Sep 06 2021 at 18:13)</a>:</h4>
<p>I wouldn't want to hide the <code>Result</code> there, and I think not hiding futures (whatever we end up representing them as) is similarly the right answer.</p>



<a name="252208145"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208145" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208145">(Sep 06 2021 at 18:15)</a>:</h4>
<p>(Someone understands, yes! <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span> )</p>



<a name="252208276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208276">(Sep 06 2021 at 18:16)</a>:</h4>
<p>It also means that the problems with complex bounds and such should be addressed at an impl Trait level, not just for async functions.</p>



<a name="252208383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208383">(Sep 06 2021 at 18:17)</a>:</h4>
<p>Like the <a href="https://smallcultfollowing.com/babysteps/blog/2019/10/26/async-fn-in-traits-are-hard/">suggested</a> <code>where DB: Database + async Send</code>, <code>Send</code> bounds don't only apply to futures, although that is probably the most common.</p>



<a name="252208403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208403">(Sep 06 2021 at 18:17)</a>:</h4>
<p>You more likely want to say that all return types of this trait are <code>Send</code>, or <code>Sync</code>.</p>



<a name="252208497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208497">(Sep 06 2021 at 18:18)</a>:</h4>
<p>Hmmm.. It might actually make sense for the <code>Send</code> bound in <code>F: Foo + Send</code> to be recursive, applying to all associated types.</p>



<a name="252208508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252208508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252208508">(Sep 06 2021 at 18:18)</a>:</h4>
<p>That would be breaking though.</p>



<a name="252218927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252218927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252218927">(Sep 06 2021 at 20:10)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">type</span> <span class="nc">Output</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Output</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="c1">// implies F::Output: Send</span>
<span class="k">fn</span> <span class="nf">foo_send</span><span class="o">&lt;</span><span class="n">F</span>: <span class="nc">Foo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>: <span class="nc">F</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="252218938"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252218938" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252218938">(Sep 06 2021 at 20:10)</a>:</h4>
<p>And you could use <code>?Send</code> to opt-out.</p>



<a name="252218943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252218943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252218943">(Sep 06 2021 at 20:10)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">foo_send_output_not_send</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">f</span>: <span class="nc">F</span><span class="p">)</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">F</span>: <span class="nc">Foo</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nb">Send</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">F</span>::<span class="n">Output</span>: <span class="o">?</span><span class="nb">Send</span><span class="w"></span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="252218976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252218976" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252218976">(Sep 06 2021 at 20:11)</a>:</h4>
<p>I wonder how breaking this would be.</p>



<a name="252219019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252219019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252219019">(Sep 06 2021 at 20:11)</a>:</h4>
<p>I don't think I've ever run into a case where I wanted the type to be send, but the output not to be, for futures at least.</p>



<a name="252219094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252219094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252219094">(Sep 06 2021 at 20:12)</a>:</h4>
<p>There should be some way to express this.</p>



<a name="252219143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252219143" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252219143">(Sep 06 2021 at 20:13)</a>:</h4>
<p><code>F: Foo + recursive Send</code>?</p>



<a name="252220058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252220058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252220058">(Sep 06 2021 at 20:25)</a>:</h4>
<p><span class="user-mention" data-user-id="363998">@Ibraheem Ahmed</span> At least the explicit <code>impl Trait</code> syntax makes this an orthogonal concern, since as you noted there are other places where people want bounds to propagate.</p>



<a name="252220065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252220065" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252220065">(Sep 06 2021 at 20:25)</a>:</h4>
<p>We may need a general mechanism for <code>X has SomeTrait if Y has SomeTrait</code> (where <code>SomeTrait</code> may be something like <code>Send</code>).</p>



<a name="252220638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252220638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252220638">(Sep 06 2021 at 20:31)</a>:</h4>
<p>For the "type and all associated types must be Send", <code>T: Trait&lt;_: Send&gt; + Send</code> might work.</p>



<a name="252220821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252220821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252220821">(Sep 06 2021 at 20:33)</a>:</h4>
<p>Maybe sugar for <code>T: Trait + Send, T::_: Send</code> with <code>feature(associated_type_bounds)</code></p>



<a name="252220945"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252220945" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252220945">(Sep 06 2021 at 20:34)</a>:</h4>
<blockquote>
<p>We may need a general mechanism for X has SomeTrait if Y has SomeTrait (where SomeTrait may be something like Send).</p>
</blockquote>
<p>HRTBs extended to type parameters would provide that: <code>for&lt;X: SomeTrait&gt; Y&lt;X&gt;: SomeTrait</code></p>



<a name="252220998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252220998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252220998">(Sep 06 2021 at 20:35)</a>:</h4>
<p>That and <code>T: Trait&lt;_: SomeTrait&gt;</code> might be enough.</p>



<a name="252224599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252224599" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252224599">(Sep 06 2021 at 21:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="363998">Ibraheem Ahmed</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/An.20Alternative.20Syntax.20for.20Async.20Functions/near/252220945">said</a>:</p>
<blockquote>
<blockquote>
<p>We may need a general mechanism for X has SomeTrait if Y has SomeTrait (where SomeTrait may be something like Send).</p>
</blockquote>
<p>HRTBs extended to type parameters would provide that: <code>for&lt;X: SomeTrait&gt; Y&lt;X&gt;: SomeTrait</code></p>
</blockquote>
<p>That looks promising to me.</p>



<a name="252231024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252231024" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252231024">(Sep 06 2021 at 23:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span>  mentioned that Chalk supports those types of bounds</p>



<a name="252238953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252238953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252238953">(Sep 07 2021 at 01:23)</a>:</h4>
<p>I was also thinking, now that HRTBs are going to be used much more with GATs, the elided lifetime could be used as sugar.</p>



<a name="252239038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252239038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252239038">(Sep 07 2021 at 01:24)</a>:</h4>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">trait</span><span class="w"> </span><span class="n">Foo</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">type</span> <span class="nc">Output</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">Self</span>::<span class="n">Output</span><span class="o">&lt;'</span><span class="nb">_</span><span class="o">&gt;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="o">&lt;</span><span class="n">F</span><span class="o">&gt;</span><span class="p">(</span><span class="n">foo</span>: <span class="nc">F</span><span class="p">)</span><span class="w"></span>
<span class="k">where</span><span class="w"></span>
<span class="w">    </span><span class="n">F</span>: <span class="nc">Foo</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">F</span>::<span class="n">Output</span><span class="o">&lt;'</span><span class="nb">_</span><span class="o">&gt;</span>: <span class="nb">Send</span>
    <span class="c1">// =&gt; for&lt;'a&gt; F::Output&lt;'a&gt;: Send</span>
<span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// ...</span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="252239066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252239066" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252239066">(Sep 07 2021 at 01:25)</a>:</h4>
<p><code>'_</code> isn't allowed there, so wouldn't be a breaking change.</p>



<a name="252239124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252239124" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252239124">(Sep 07 2021 at 01:26)</a>:</h4>
<p>and maybe <code>_</code> could be used similarlly for a HRTB with type parameters.</p>



<a name="252239673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/An%20Alternative%20Syntax%20for%20Async%20Functions/near/252239673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/An.20Alternative.20Syntax.20for.20Async.20Functions.html#252239673">(Sep 07 2021 at 01:37)</a>:</h4>
<p><a href="https://internals.rust-lang.org/t/hrtb-sugar/15293">Opened an internals thread for anyone interested.</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
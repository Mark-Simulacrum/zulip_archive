<html>
<head><meta charset="utf-8"><title>Async drop · wg-async · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/index.html">wg-async</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html">Async drop</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="230931463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230931463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Walton <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230931463">(Mar 18 2021 at 20:22)</a>:</h4>
<p>Is there a good place to look for the status of async drop?</p>



<a name="230936890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230936890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230936890">(Mar 18 2021 at 21:01)</a>:</h4>
<p><span class="user-mention" data-user-id="384014">@Patrick Walton</span> I think that the most recent proposal was <a href="https://github.com/rust-lang/rfcs/pull/2958">https://github.com/rust-lang/rfcs/pull/2958</a>, and that it is basically 'state of the art', but that there are some concerns. Why do you ask?</p>



<a name="230936929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230936929" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230936929">(Mar 18 2021 at 21:01)</a>:</h4>
<p>I would encourage you to open an issue or a PR describing what problems you are encountering that motivated this question</p>



<a name="230937102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Walton <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937102">(Mar 18 2021 at 21:02)</a>:</h4>
<p>There's no particular problem that motivates it, it's more just curiosity, wanting to understand the history of the async design in Rust better</p>



<a name="230937331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937331" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Walton <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937331">(Mar 18 2021 at 21:04)</a>:</h4>
<p>Thanks for the pointer :)</p>



<a name="230937347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937347">(Mar 18 2021 at 21:04)</a>:</h4>
<p>Oh, I have an example of a motivation on this tho ^^</p>



<a name="230937355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937355" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937355">(Mar 18 2021 at 21:04)</a>:</h4>
<p>Fooey. Well, then I encourage you to get folks in FB to participate regardless</p>



<a name="230937361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937361">(Mar 18 2021 at 21:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="123586">nagisa</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/Async.20drop/near/230937347">said</a>:</p>
<blockquote>
<p>Oh, I have an example of a motivation on this tho ^^</p>
</blockquote>
<p>now we're talking!</p>



<a name="230937383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937383" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937383">(Mar 18 2021 at 21:04)</a>:</h4>
<p>Where do I write it?</p>



<a name="230937423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937423" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937423">(Mar 18 2021 at 21:05)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> <a href="https://nikomatsakis.github.io/wg-async-foundations/vision/how_to_vision/status_quo.html#tldr">https://nikomatsakis.github.io/wg-async-foundations/vision/how_to_vision/status_quo.html#tldr</a></p>



<a name="230937448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937448">(Mar 18 2021 at 21:05)</a>:</h4>
<p>probably open an issue is the easiest way to start :)</p>



<a name="230937472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937472">(Mar 18 2021 at 21:05)</a>:</h4>
<p>the idea would be to describe the problem you are facing now</p>



<a name="230937495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230937495" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230937495">(Mar 18 2021 at 21:05)</a>:</h4>
<p>(not the <em>solution</em>, that comes later)</p>



<a name="230939203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230939203" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Walton <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230939203">(Mar 18 2021 at 21:17)</a>:</h4>
<p>So this grew out of a question of trying to make C++ senders/receivers work well with Rust futures</p>



<a name="230973239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Async%20drop/near/230973239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Patrick Walton <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Async.20drop.html#230973239">(Mar 19 2021 at 04:07)</a>:</h4>
<p>Now I know the issue: we want to call APIs that use the C++ equivalent of futures from Rust programs, but C++ futures must be polled to completion (it's undefined behavior to drop them), while Rust futures can be dropped at any time.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
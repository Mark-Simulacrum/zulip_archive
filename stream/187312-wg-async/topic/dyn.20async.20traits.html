<html>
<head><meta charset="utf-8"><title>dyn async traits · wg-async · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/index.html">wg-async</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html">dyn async traits</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260434123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260434123" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260434123">(Nov 05 2021 at 17:02)</a>:</h4>
<p>I've been playing with the idea of shadow traits as Niko laid out in the 6th blog post. It all seems to work rather well and I was pleasently surpised that even the coercion from e.g., &amp;SleepyRange to &amp;dyn DynAsyncIter works (surprising to me since there is not an impl of DynAsyncIter for SleepyRange)</p>



<a name="260434396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260434396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260434396">(Nov 05 2021 at 17:04)</a>:</h4>
<p>Anyway, istm that this is a really nice solution because the compiler/std doesn't need to be involved in derive_dyn (or whatever the macro is) and users could use different macros (or flags to the macro or whatever) to use alternatives to boxing</p>



<a name="260434542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260434542" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260434542">(Nov 05 2021 at 17:05)</a>:</h4>
<p>So, I was a bit surprised by the "I don’t really see this as a “long term solution”, but I would be interested to play with it." line in the blog post - <span class="user-mention" data-user-id="116009">@nikomatsakis</span> why don't you see it as a long term solution?</p>



<a name="260435064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260435064" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260435064">(Nov 05 2021 at 17:09)</a>:</h4>
<p>(I wonder if an attribute macro is optimal - perhaps the crate which specifies the async trait should not have to concern themselves with this, and a downstream crate should be able to use a macro to create the dynamic version of the trait and generate the impls. That would require a little more boilerplate (having to name the methods and sigs) or being able to pass the trait def to the macro somehow. But it means the user can decide whether they want to use Box or something else, and it seems like the user is likely to be the one more constrained</p>



<a name="260464785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464785">(Nov 05 2021 at 21:06)</a>:</h4>
<p><span class="user-mention" data-user-id="256841">@Nick Cameron</span> ooh, excited to hear that!</p>



<a name="260464800"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464800" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464800">(Nov 05 2021 at 21:06)</a>:</h4>
<p>I agree it works well and checks a lot of boxes</p>



<a name="260464826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464826">(Nov 05 2021 at 21:06)</a>:</h4>
<p>I've had on my list to write some follow-up blog posts, and try to lay out an impl plan for a crate called <code>dyner </code> to do the translation for you</p>



<a name="260464840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464840">(Nov 05 2021 at 21:06)</a>:</h4>
<p>but maybe you're ahead of me? That'd be aweseome :)</p>



<a name="260464916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464916">(Nov 05 2021 at 21:07)</a>:</h4>
<p>In any case, why don't I see it as a long-term solution:</p>
<p>I guess, tbh, I sort of do as well. I think there's going to be a desire to get control and this seems like a plausible way to do that. One thing I also kind of like is that, actually, these "dyn flavors" of traits can be done <em>outside</em> the crate where the trait was defined.</p>



<a name="260464944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464944">(Nov 05 2021 at 21:07)</a>:</h4>
<p>my main concern is that I'd like a 'convenient, easy' default</p>



<a name="260464960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260464960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260464960">(Nov 05 2021 at 21:08)</a>:</h4>
<p>otoh I think that dyn overall in rust is kind of painful</p>



<a name="260465001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260465001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260465001">(Nov 05 2021 at 21:08)</a>:</h4>
<p>anyway, I'd love to discuss more</p>



<a name="260696994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260696994" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260696994">(Nov 08 2021 at 18:15)</a>:</h4>
<p>I didn't try implementing a macro, only experimenting with what the generated code and user code would look like</p>



<a name="260697329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260697329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260697329">(Nov 08 2021 at 18:17)</a>:</h4>
<p>I guess it might be nice to have some crazy syntax like Box&lt;dyn async&lt;Box&gt; AsynIterator&gt;</p>



<a name="260697484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260697484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260697484">(Nov 08 2021 at 18:18)</a>:</h4>
<p>perhaps some kind of parametric build script for crates? I found it a bit hard to imagine how we could do the fully ergonomic thing without some kind of madness...</p>



<a name="260697500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260697500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260697500">(Nov 08 2021 at 18:18)</a>:</h4>
<p>more to think about...</p>



<a name="260734927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260734927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260734927">(Nov 08 2021 at 23:38)</a>:</h4>
<p>remote derives :-)</p>



<a name="260735201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260735201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260735201">(Nov 08 2021 at 23:42)</a>:</h4>
<p>since it doesn't have to be defined in the crate that defines the trait</p>



<a name="260735565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260735565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260735565">(Nov 08 2021 at 23:47)</a>:</h4>
<p>though you probably want to have a central crate where these are all defined so you can use the new dyn variants across multiple crates</p>



<a name="260735700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260735700" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260735700">(Nov 08 2021 at 23:48)</a>:</h4>
<p>which leads to the next crazy idea, which is defining these dyn variants "on demand" and considering them part of the dyn variant crate for coherence purposes</p>



<a name="260735969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260735969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260735969">(Nov 08 2021 at 23:52)</a>:</h4>
<p>so if I wind up with code naming <code>dyn&lt;UserBox&gt; Future</code>, the derive defining <code>UserBoxDynFuture</code> would happen automatically</p>



<a name="260742676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260742676" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260742676">(Nov 09 2021 at 01:17)</a>:</h4>
<p>To get past custom <code>DynAsyncIter</code>-esque fat pointers, what do y'all think of allowing dyner crates to write their own <code>Unsize</code> impls, so that <code>Bok&lt;impl MyTrait&gt; -&gt; Box&lt;dyn MyTrait&gt;</code> coercion can automatically add custom metadata? Something like:</p>
<div class="codehilite"><pre><span></span><code>impl&lt;T: AsyncIter&gt; Unsize&lt;dyn AsyncIter&gt; for T {
    const META: &amp;&#39;static AsyncIterVTable = dyn_async_iter_vtable();
}
</code></pre></div>



<a name="260742960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260742960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260742960">(Nov 09 2021 at 01:21)</a>:</h4>
<p>It works pretty well for slices too, although there is no reason users should be implementing those:</p>
<div class="codehilite"><pre><span></span><code>impl&lt;const N: usize, T&gt; Usize&lt;[T]&gt; for [T; N] {
    const META: usize = N;
}
</code></pre></div>



<a name="260963166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260963166" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260963166">(Nov 10 2021 at 09:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116883">tmandry</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/dyn.20async.20traits/near/260735565">said</a>:</p>
<blockquote>
<p>though you probably want to have a central crate where these are all defined so you can use the new dyn variants across multiple crates</p>
</blockquote>
<p>yeah, I've been pondering how important this is. My hypothesis is that for cross-crate compat people are more likely to use generics and trait objects are more likely to be used within a project.  My reasoning is that the reason to use a specific smart pointer is probably due to the specifics of a project's environment, rather than anything about either the trait or its impl</p>



<a name="260963197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260963197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260963197">(Nov 10 2021 at 09:20)</a>:</h4>
<p>then for compat between crates you'd need HKTs</p>



<a name="260963288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260963288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260963288">(Nov 10 2021 at 09:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116883">tmandry</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/dyn.20async.20traits/near/260735700">said</a>:</p>
<blockquote>
<p>which leads to the next crazy idea, which is defining these dyn variants "on demand" and considering them part of the dyn variant crate for coherence purposes</p>
</blockquote>
<p>I think this is the same idea as my "crazy syntax like Box&lt;dyn async&lt;Box&gt; AsynIterator&gt;" suggestion. I don't like it very much :-D</p>



<a name="260963399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260963399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260963399">(Nov 10 2021 at 09:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222520">Sam Sartor</span> <a href="#narrow/stream/187312-wg-async-foundations/topic/dyn.20async.20traits/near/260742676">said</a>:</p>
<blockquote>
<p>To get past custom <code>DynAsyncIter</code>-esque fat pointers, what do y'all think of allowing dyner crates to write their own <code>Unsize</code> impls, so that <code>Bok&lt;impl MyTrait&gt; -&gt; Box&lt;dyn MyTrait&gt;</code> coercion can automatically add custom metadata? Something like:</p>
<p><div class="codehilite"><pre><span></span><code>impl&lt;T: AsyncIter&gt; Unsize&lt;dyn AsyncIter&gt; for T {
    const META: &amp;&#39;static AsyncIterVTable = dyn_async_iter_vtable();
}
</code></pre></div><br>
</p>
</blockquote>
<p>I don't think you need this? With the right impls, unsizing coercions work out of the box for the dynamic traits</p>



<a name="260963429"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/260963429" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#260963429">(Nov 10 2021 at 09:23)</a>:</h4>
<p>I'm not clear what you mean by custom metadata though</p>



<a name="261036757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/261036757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#261036757">(Nov 10 2021 at 18:51)</a>:</h4>
<p><span class="user-mention" data-user-id="256841">@Nick Cameron</span> Assuming a dyn_derive crate wants to define its own vtable struct and fill it with custom wrapper functions, how does the coercion know the vtable instance for a given concrete type?</p>



<a name="261040496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/261040496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#261040496">(Nov 10 2021 at 19:19)</a>:</h4>
<p>It can be done simply by delegating from one trait impl to another without having to explicitly fiddle with vtables at all. It might be good to have some mechanism to eliminate the indirection by manipulating the vtable, but I can’t imagine an ergonomic solution</p>



<a name="261044833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/261044833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#261044833">(Nov 10 2021 at 19:51)</a>:</h4>
<p>Oh yah, because you are relying only on the coercion of the shadow trait. I'm sorta hung up on the fact that given <code>MyStruct&lt;T: AsyncIter&gt;</code>, a <code>MyStruct&lt;impl AsyncIter&gt;</code> can only coerce to <code>MyStruct&lt;dyn ErasedAsyncIter&gt;</code>if <code>ErasedAsyncIter: AsyncIter</code> and <code>dyn ErasedAsyncIter: AsyncIter</code>. But I suppose those problems shouldn't be too hard to solve vs exposing the vtable implementation directly?</p>



<a name="261045726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/261045726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#261045726">(Nov 10 2021 at 19:57)</a>:</h4>
<p>Edit: wait, I'm confused lol. Give me a bit to work through this.</p>



<a name="261047796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/261047796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Sam Sartor <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#261047796">(Nov 10 2021 at 20:11)</a>:</h4>
<p>I think I was just overthinking stuff. As long as you <code>impl AsyncIter for dyn ErasedAsyncIter</code> directly, it all does work well.</p>



<a name="261049767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/dyn%20async%20traits/near/261049767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nick Cameron <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/dyn.20async.20traits.html#261049767">(Nov 10 2021 at 20:25)</a>:</h4>
<p>Indeed, it’s kind of amazing that everything just works</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
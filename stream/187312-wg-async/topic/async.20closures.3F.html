<html>
<head><meta charset="utf-8"><title>async closures? · wg-async · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/index.html">wg-async</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html">async closures?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272327288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272327288" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272327288">(Feb 17 2022 at 21:39)</a>:</h4>
<p>How do you make a function generic over an "async closure"? ie a closure returning a future.<br>
This is an issue I've encountered a few times in the past, and every time I've ended up giving up. </p>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=ba243ad8871eda41fd8414c5a8d4d590">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=ba243ad8871eda41fd8414c5a8d4d590</a><br>
the issue is the <code>Fut</code> needs to be able to borrow the <code>&amp;mut Bus</code>, but as that's written now, it can't. It seems like I need something like <code>where F: for&lt;'a&gt; FnOnce(&amp;'a mut Bus) -&gt; Fut&lt;'a&gt;</code>, but I don't think such thing is possible.</p>
<p>I've asked around, everyone seems to suggest it's in fact impossible.</p>



<a name="272329092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272329092" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272329092">(Feb 17 2022 at 21:48)</a>:</h4>
<p>It is impossible currently</p>



<a name="272329164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272329164" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272329164">(Feb 17 2022 at 21:49)</a>:</h4>
<p>The correct bounds are not generated for closures</p>



<a name="272329227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272329227" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272329227">(Feb 17 2022 at 21:50)</a>:</h4>
<p>You can create a macro that desugars a closure into an anonymous function, and pass that in instead</p>



<a name="272329335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272329335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272329335">(Feb 17 2022 at 21:51)</a>:</h4>
<p>Perhaps we should add something to the vision doc about it? It seems like an incredibly basic thing. It comes up often when converting blocking code to async.</p>



<a name="272329376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272329376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272329376">(Feb 17 2022 at 21:51)</a>:</h4>
<p>Unless one of the planned improvements will solve this, but none does as far as I can tell</p>



<a name="272330236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272330236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272330236">(Feb 17 2022 at 21:59)</a>:</h4>
<p>Is this covered under the <a href="https://rust-lang.github.io/async-fundamentals-initiative/">async closures initiative</a>?</p>



<a name="272331322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272331322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272331322">(Feb 17 2022 at 22:09)</a>:</h4>
<p>oh huh, I guess yes? </p>
<p>That'd let me write <code>where F: AsyncFnOnce(&amp;mut Bus)</code> and then just <code>f(&amp;mut self.bus).await</code> ?</p>



<a name="272333554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272333554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272333554">(Feb 17 2022 at 22:27)</a>:</h4>
<p>what's exactly the missing Rust feature to make the "closure returning future" work though?</p>
<p>It's sort of workaroundable with a "callback" trait with a GAT: <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=1e9f4e419344113576d274a66d923603">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=1e9f4e419344113576d274a66d923603</a></p>
<p>it seems what we need is some kind of "generic generic param" to be able to do <code>where F: for&lt;'a&gt; FnOnce(&amp;'a mut Bus) -&gt; Fut&lt;'a&gt;</code> <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="272339063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272339063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272339063">(Feb 17 2022 at 23:26)</a>:</h4>
<p>You can get it working with async fns and HRTBs</p>



<a name="272461157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272461157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272461157">(Feb 18 2022 at 21:40)</a>:</h4>
<p>the syntax I have toyed with the the past was</p>
<div class="codehilite"><pre><span></span><code>where for&lt;&#39;a&gt; {
    F: FnOnce(&amp;&#39;a Thing) -&gt; Fut
    Fut: Future + &#39;a
}
</code></pre></div>
<p>I think the trait solver and borrowchecker can easily handle this, there is just no way to express it currently, <code>AsyncFn*</code> traits would be nice special cases but a general solution would be awesome too</p>



<a name="272478532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272478532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272478532">(Feb 19 2022 at 00:38)</a>:</h4>
<p>I confirm what <span class="user-mention" data-user-id="363998">@Ibraheem Ahmed</span> said:</p>
<ol>
<li>
<p>It can be expressed (<a href="https://docs.rs/async_fn_traits">https://docs.rs/async_fn_traits</a> offers a helper trait to express this quite succintly: <code>for&lt;'a&gt; F : AsyncFnOnce1&lt;&amp;'a Thing, Output = T&gt;</code>).</p>
</li>
<li>
<p>The issue is rather about <em>anonymous closures</em>, which don't get to meet these (correctly expressed) bounds.</p>
</li>
</ol>
<p>Only <code>async fn</code>s do, or boxed dyn future returning closures when using <a href="https://docs.rs/higher-order-closure">https://docs.rs/higher-order-closure</a>.</p>



<a name="272478719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272478719" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ibraheem Ahmed <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272478719">(Feb 19 2022 at 00:41)</a>:</h4>
<p>I have used a macro that desugars a closure to an anonymous function before</p>



<a name="272479334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272479334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272479334">(Feb 19 2022 at 00:50)</a>:</h4>
<p>Yeah, similar to having closire syntax for <code>extern fn</code> pointers; but in this instance the stateful aspect can be annoying.</p>
<p>In that regard, requiring a <code>(State, impl AsyncFnOnce(State, &amp;Thing) -&gt; T)</code> is the simplest way to circumvent all this in a zero-cost fashion, since then then macro you talk about can be used for this now-allowed-to-be-stateless closure</p>



<a name="272615841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272615841" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272615841">(Feb 20 2022 at 20:57)</a>:</h4>
<p>I see, thanks for confirming :(</p>



<a name="272615866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272615866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272615866">(Feb 20 2022 at 20:57)</a>:</h4>
<p>Hmmm, why doesn't this work? It feels very close<br>
<a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=a4b5cf6f5eab421bc45571b4d8013a5e">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=a4b5cf6f5eab421bc45571b4d8013a5e</a></p>



<a name="272615977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272615977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272615977">(Feb 20 2022 at 20:59)</a>:</h4>
<p>afaict it's what <span class="user-mention" data-user-id="257428">@Gus Wynn</span> 's syntax would desugar to (?)</p>



<a name="272616095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272616095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272616095">(Feb 20 2022 at 21:00)</a>:</h4>
<p>or what <code>where F: for&lt;'b&gt; FnOnce(&amp;'b mut Bus) -&gt; (impl Future&lt;Output=()&gt; + 'b)</code> would desugar to?</p>



<a name="272616116"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272616116" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272616116">(Feb 20 2022 at 21:00)</a>:</h4>
<p>fn trait bounds with the "fancy" syntax desugar to projections like that</p>



<a name="272616960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272616960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272616960">(Feb 20 2022 at 21:14)</a>:</h4>
<p>Wait <span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span>, are closures not meeting those bounds a bug?</p>



<a name="272617095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272617095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272617095">(Feb 20 2022 at 21:17)</a>:</h4>
<p>yep, it's this one <a href="https://github.com/rust-lang/rust/issues/70263">https://github.com/rust-lang/rust/issues/70263</a></p>



<a name="272617215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272617215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272617215">(Feb 20 2022 at 21:19)</a>:</h4>
<p>I looked a bit into it last friday. The issue is the compiler is "cheating" when inferring the types of closures. If you pass it directly to a fn with a bound like <code>F: for&lt;'a&gt; FnOnce(&amp;'a u8) -&gt; &amp;'a u8</code> then it makes it higher-ranked, and it doesn't otherwise</p>



<a name="272617280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272617280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272617280">(Feb 20 2022 at 21:20)</a>:</h4>
<p>and it can't see "through" the wrapper traits like <code>AsyncFnOnce1</code></p>



<a name="272617284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272617284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272617284">(Feb 20 2022 at 21:20)</a>:</h4>
<p>see thread: <a href="#narrow/stream/182449-t-compiler.2Fhelp/topic/closure.20type.20inference.20questions">https://rust-lang.zulipchat.com/#narrow/stream/182449-t-compiler.2Fhelp/topic/closure.20type.20inference.20questions</a></p>



<a name="272619197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272619197" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dario Nieuwenhuis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272619197">(Feb 20 2022 at 21:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="348152">Dario Nieuwenhuis</span> <a href="#narrow/stream/187312-wg-async/topic/async.20closures.3F/near/272615866">said</a>:</p>
<blockquote>
<p>Hmmm, why doesn't this work? It feels very close<br>
<a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=a4b5cf6f5eab421bc45571b4d8013a5e">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=a4b5cf6f5eab421bc45571b4d8013a5e</a></p>
</blockquote>
<p>I think this fails due to <a href="https://github.com/rust-lang/rust/issues/70263">#70263</a> as well. <br>
Reduced example: <a href="https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=5ccdcb93e851dcdf8d6e666a2ac61e60">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=5ccdcb93e851dcdf8d6e666a2ac61e60</a></p>



<a name="272619670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272619670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272619670">(Feb 20 2022 at 22:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257428">Gus Wynn</span> <a href="#narrow/stream/187312-wg-async/topic/async.20closures.3F/near/272616960">said</a>:</p>
<blockquote>
<p>Wait <span class="user-mention silent" data-user-id="232018">Daniel Henry-Mantilla</span>, are closures not meeting those bounds a bug?</p>
</blockquote>
<p>Well, it's kind of an unfortunate <em>feature</em> / mis-<em>feature</em>, more than a bug, since it's basically allowing lifetime <em>inference</em> to take precendence over lifetime higher-order promotion. I somehow always thought that the point of <code>async ||</code> (<em>true</em> async closures) was precisely that: to change such behavior to favor obtaining the higher-order signature that <code>async fn</code>s already have <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="272835647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272835647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272835647">(Feb 22 2022 at 17:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="348152">Dario Nieuwenhuis</span> <a href="#narrow/stream/187312-wg-async/topic/async.20closures.3F/near/272617095">said</a>:</p>
<blockquote>
<p>yep, it's this one <a href="https://github.com/rust-lang/rust/issues/70263">https://github.com/rust-lang/rust/issues/70263</a></p>
</blockquote>
<p>lmao I posted on this issue once lol</p>



<a name="272835850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272835850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272835850">(Feb 22 2022 at 17:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232018">Daniel Henry-Mantilla</span> <a href="#narrow/stream/187312-wg-async/topic/async.20closures.3F/near/272619670">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="257428">Gus Wynn</span> <a href="#narrow/stream/187312-wg-async/topic/async.20closures.3F/near/272616960">said</a>:</p>
<blockquote>
<p>Wait <span class="user-mention silent" data-user-id="232018">Daniel Henry-Mantilla</span>, are closures not meeting those bounds a bug?</p>
</blockquote>
<p>Well, it's kind of an unfortunate <em>feature</em> / mis-<em>feature</em>, more than a bug, since it's basically allowing lifetime <em>inference</em> to take precendence over lifetime higher-order promotion. I somehow always thought that the point of <code>async ||</code> (<em>true</em> async closures) was precisely that: to change such behavior to favor obtaining the higher-order signature that <code>async fn</code>s already have <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>
</blockquote>
<p>very unfortunate <em>mis-feature</em> then, as I would prefer async closures aren't special-cased around it <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span></p>



<a name="272835900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/async%20closures%3F/near/272835900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Gus Wynn <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/async.20closures.3F.html#272835900">(Feb 22 2022 at 17:16)</a>:</h4>
<p>is it a breaking change to favor the higher-order promotion or something?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
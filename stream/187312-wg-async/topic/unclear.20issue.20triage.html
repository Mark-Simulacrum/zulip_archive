<html>
<head><meta charset="utf-8"><title>unclear issue triage · wg-async · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/index.html">wg-async</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html">unclear issue triage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="168958328"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958328" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958328">(Jun 25 2019 at 17:27)</a>:</h4>
<p>We have <a href="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AAsyncAwait-Unclear" target="_blank" title="https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AAsyncAwait-Unclear">https://github.com/rust-lang/rust/issues?q=is%3Aopen+is%3Aissue+label%3AAsyncAwait-Unclear</a></p>



<a name="168958449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958449">(Jun 25 2019 at 17:28)</a>:</h4>
<p>Ah yes. We should probably go over those next time -- or maybe a bit async</p>



<a name="168958458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958458" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958458">(Jun 25 2019 at 17:28)</a>:</h4>
<p>I'll start off a topic?</p>



<a name="168958460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958460">(Jun 25 2019 at 17:28)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/61798" target="_blank" title="https://github.com/rust-lang/rust/issues/61798">https://github.com/rust-lang/rust/issues/61798</a> feels like something <span class="user-mention" data-user-id="121053">@varkor</span> could have a look at</p>



<a name="168958536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958536">(Jun 25 2019 at 17:29)</a>:</h4>
<p>Potentially, yes. I can sort of imagine how this happens</p>



<a name="168958549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958549" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958549">(Jun 25 2019 at 17:29)</a>:</h4>
<p>there is probably some stuff in the desugaring that follows the <code>await</code></p>



<a name="168958553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958553" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958553">(Jun 25 2019 at 17:29)</a>:</h4>
<p>which (indeed) is dead code</p>



<a name="168958555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958555">(Jun 25 2019 at 17:29)</a>:</h4>
<p>probably something wrong with uninhabited analysis going on in the desugaring which doesn't care about await</p>



<a name="168958563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958563" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958563">(Jun 25 2019 at 17:29)</a>:</h4>
<p>we could probably suppress the lint by looking at the sppan</p>



<a name="168958626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958626">(Jun 25 2019 at 17:30)</a>:</h4>
<p>yeah that seems like a good idea</p>



<a name="168958641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958641">(Jun 25 2019 at 17:30)</a>:</h4>
<p>but we'd have to be a <em>bit</em> careful</p>



<a name="168958656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958656">(Jun 25 2019 at 17:30)</a>:</h4>
<p>i.e., you want <code>return; foo.await;</code> to still lint :)</p>



<a name="168958687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958687">(Jun 25 2019 at 17:30)</a>:</h4>
<p>seems like a decent mentoring opportunity, too</p>



<a name="168958819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958819" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958819">(Jun 25 2019 at 17:32)</a>:</h4>
<p>I do not consider this blocking</p>



<a name="168958828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958828" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958828">(Jun 25 2019 at 17:32)</a>:</h4>
<p>Yeah, seems marginal</p>



<a name="168958873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168958873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168958873">(Jun 25 2019 at 17:33)</a>:</h4>
<blockquote>
<p>Broken MIR: generator contains type std::vec::Vec&lt;()&gt; <a href="https://github.com/rust-lang/rust/issues/62025" target="_blank" title="https://github.com/rust-lang/rust/issues/62025">#62025</a></p>
</blockquote>



<a name="168959042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168959042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168959042">(Jun 25 2019 at 17:35)</a>:</h4>
<p>maybe a dup of the other ICEs...</p>



<a name="168959054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168959054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168959054">(Jun 25 2019 at 17:35)</a>:</h4>
<p>aww; that one in particular has the disadvantage of dependencies</p>



<a name="168959073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168959073" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168959073">(Jun 25 2019 at 17:35)</a>:</h4>
<p>would have easily reduced the thing otherwise</p>



<a name="168959083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168959083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168959083">(Jun 25 2019 at 17:35)</a>:</h4>
<p>in the playground</p>



<a name="168959590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168959590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168959590">(Jun 25 2019 at 17:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> does <a href="https://github.com/rust-lang/rust/issues/61949" target="_blank" title="https://github.com/rust-lang/rust/issues/61949">https://github.com/rust-lang/rust/issues/61949</a> get addressed by your PR perhaps?</p>



<a name="168960004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168960004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> centril <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168960004">(Jun 25 2019 at 17:44)</a>:</h4>
<p>That issue seems like it can have forward compat hazards since if you return <code>x: Foo&lt;'static&gt;</code> instead and the compiler accepts it now, and we change the return type to <code>Foo&lt;'a&gt;</code> then if <code>Foo</code> is contra/invariant wrt. the lifetime parameter then it shouldn't borrowck...?</p>



<a name="168962886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/unclear%20issue%20triage/near/168962886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/unclear.20issue.20triage.html#168962886">(Jun 25 2019 at 18:16)</a>:</h4>
<p>I hadn't seen that issue before -- I don't think it's addressed by my PR per se. If I understand what's going on, seems like it is indeed a dup of <a href="https://github.com/rust-lang/rust/issues/53613" target="_blank" title="https://github.com/rust-lang/rust/issues/53613">https://github.com/rust-lang/rust/issues/53613</a> (and hence orthogonal to async-await). You may be correct that a fix could be a breaking change.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Triage meeting 2022-02-28 · wg-async · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/index.html">wg-async</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html">Triage meeting 2022-02-28</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273516249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273516249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273516249">(Feb 28 2022 at 16:31)</a>:</h4>
<p>Hello <span class="user-group-mention" data-user-group-id="1172">@WG-async-foundations</span>! It's time for our weekly triage meeting</p>



<a name="273516372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273516372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273516372">(Feb 28 2022 at 16:32)</a>:</h4>
<p>Go ahead and give a <span aria-label="wave" class="emoji emoji-1f44b" role="img" title="wave">:wave:</span> to show you're here</p>



<a name="273516475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273516475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273516475">(Feb 28 2022 at 16:33)</a>:</h4>
<p>Here's the agenda for today:</p>
<ul>
<li>Announcements and introductions<br>
    - Sprint planning meeting this week</li>
<li>New issue <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">triage</a></li>
<li>Discussion on progress/blockers around sprint bugs</li>
</ul>



<a name="273517014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517014" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517014">(Feb 28 2022 at 16:36)</a>:</h4>
<p>Oh good, someone else it here :)</p>



<a name="273517075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517075" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517075">(Feb 28 2022 at 16:37)</a>:</h4>
<p>Hi :)</p>



<a name="273517103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517103">(Feb 28 2022 at 16:37)</a>:</h4>
<p>I don't have much in the way of announcements today, but I did want to remind people to check the <a href="https://hackmd.io/gPgXC4fsTZOgOnd-Bwhoag?both#2022-02-03">sprint planning doc</a> before this week's sprint planning meeting.</p>



<a name="273517246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517246">(Feb 28 2022 at 16:38)</a>:</h4>
<p>If there are no other announcements, we can move on to triage.</p>



<a name="273517253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517253">(Feb 28 2022 at 16:38)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> end-topic</p>



<a name="273517258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517258">(Feb 28 2022 at 16:38)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="273517314"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517314" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517314">(Feb 28 2022 at 16:38)</a>:</h4>
<p>It looks like we have <a href="https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues">no new issues</a>!</p>



<a name="273517325"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517325" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517325">(Feb 28 2022 at 16:38)</a>:</h4>
<p>I was away wed-fri last week, so no real updates here</p>



<a name="273517353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517353">(Feb 28 2022 at 16:39)</a>:</h4>
<p>still catching up on the 222+ unread zulip messages and so forth</p>



<a name="273517380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517380">(Feb 28 2022 at 16:39)</a>:</h4>
<p>I'm impressed you only have 222+ :)</p>



<a name="273517418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517418" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517418">(Feb 28 2022 at 16:39)</a>:</h4>
<p>I have lots more, but if I read all of them then I'd have less...</p>



<a name="273517454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517454">(Feb 28 2022 at 16:39)</a>:</h4>
<p>Anyway, that does it for triage.<br>
<span class="user-mention" data-user-id="261224">@triagebot</span> end-topic</p>



<a name="273517455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517455">(Feb 28 2022 at 16:39)</a>:</h4>
<p>Does anyone have something to add on the current topic?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if not.</p>



<a name="273517456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517456">(Feb 28 2022 at 16:39)</a>:</h4>
<p>I made that number up</p>



<a name="273517510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517510">(Feb 28 2022 at 16:40)</a>:</h4>
<p>Ah</p>



<a name="273517557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517557" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517557">(Feb 28 2022 at 16:40)</a>:</h4>
<p>it is both too high (I don't actually have 222 privmsgs) and too low (streams I ostensibly track is more like thousands) =)</p>



<a name="273517628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517628" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517628">(Feb 28 2022 at 16:40)</a>:</h4>
<p>Ah, that's more like I would have expected :)</p>



<a name="273517722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517722" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517722">(Feb 28 2022 at 16:41)</a>:</h4>
<p>Anyway, the last topic is discussing progress on sprint bugs</p>



<a name="273517799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517799">(Feb 28 2022 at 16:42)</a>:</h4>
<p>I finished up the stuff we were doing on <a href="https://github.com/rust-lang/rust/issues/57017">#57017</a> and put up a PR for it</p>



<a name="273517811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517811">(Feb 28 2022 at 16:42)</a>:</h4>
<p>oh, nice!</p>



<a name="273517817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517817">(Feb 28 2022 at 16:42)</a>:</h4>
<p>Let me find it...</p>



<a name="273517825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517825">(Feb 28 2022 at 16:42)</a>:</h4>
<p>I'm curious about the refactoring we were talking about</p>



<a name="273517853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517853">(Feb 28 2022 at 16:42)</a>:</h4>
<p>where we eliminate the "visitor" entirely in favor of the <code>ExprUseVisitor</code></p>



<a name="273517882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517882">(Feb 28 2022 at 16:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273517817">said</a>:</p>
<blockquote>
<p>Let me find it...</p>
</blockquote>
<p><a href="https://github.com/rust-lang/rust/pull/94309">https://github.com/rust-lang/rust/pull/94309</a></p>



<a name="273517886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517886">(Feb 28 2022 at 16:42)</a>:</h4>
<p>Yeah, I think that could clean things up a lot</p>



<a name="273517893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517893" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517893">(Feb 28 2022 at 16:42)</a>:</h4>
<p>Yup, that's it!</p>



<a name="273517905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517905">(Feb 28 2022 at 16:43)</a>:</h4>
<p>we should file an issue for that cleanup work</p>



<a name="273517914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517914" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517914">(Feb 28 2022 at 16:43)</a>:</h4>
<p>I think it would be a good goal</p>



<a name="273517926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517926">(Feb 28 2022 at 16:43)</a>:</h4>
<p>(but we should land the increment changes first, of course)</p>



<a name="273517942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517942" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517942">(Feb 28 2022 at 16:43)</a>:</h4>
<p>Good idea. I'll file an issue.</p>



<a name="273517981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517981">(Feb 28 2022 at 16:43)</a>:</h4>
<p>side note:</p>



<a name="273517989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273517989" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273517989">(Feb 28 2022 at 16:43)</a>:</h4>
<p>once this + the generator work lands</p>



<a name="273518005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518005" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518005">(Feb 28 2022 at 16:43)</a>:</h4>
<p>I think it'd be cool to write a blog post showcasing how things work better</p>



<a name="273518026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518026" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518026">(Feb 28 2022 at 16:43)</a>:</h4>
<p>I'd put it on <a href="http://blog.rust-lang.org">blog.rust-lang.org</a> (not Inside Rust)</p>



<a name="273518077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518077">(Feb 28 2022 at 16:44)</a>:</h4>
<p>Ah, good idea!</p>



<a name="273518130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518130" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518130">(Feb 28 2022 at 16:44)</a>:</h4>
<p>giving some before/after examples and maybe "just enough" details about how the compiler works that people think they understand =)</p>



<a name="273518149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518149">(Feb 28 2022 at 16:44)</a>:</h4>
<p>I've been trying to get myself to blog more (read: at all), so this seems like a good way to do it.</p>



<a name="273518156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518156">(Feb 28 2022 at 16:44)</a>:</h4>
<p>(even though they don't)</p>



<a name="273518263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518263" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518263">(Feb 28 2022 at 16:45)</a>:</h4>
<p>So on <a href="https://github.com/rust-lang/rust/issues/94309">#94309</a>, there were two changes I made to make things work but I'm not 100% sure about them.</p>



<a name="273518411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518411" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518411">(Feb 28 2022 at 16:46)</a>:</h4>
<p>The first was I added a separate <code>copy</code> callback to <code>expr_use_visitor::Delegate</code>, to distinguish borrows and copies treated as borrows. I added a default impl so most users can just use the borrow callback as before.</p>



<a name="273518510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518510" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518510">(Feb 28 2022 at 16:47)</a>:</h4>
<p>I seem to recall us deciding that was necessary, yes</p>



<a name="273518514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518514">(Feb 28 2022 at 16:47)</a>:</h4>
<p>In the generator_interior implementation of copy, it works just like borrow, but doesn't add the value to the borrowed_temporaries list.</p>



<a name="273518521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518521">(Feb 28 2022 at 16:47)</a>:</h4>
<p>I left a review suggestion for a comment</p>



<a name="273518585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518585">(Feb 28 2022 at 16:47)</a>:</h4>
<p>(Though writing it made me wonder if even the current code is being too conservative... but I think those changes can wait until the EUV. i.e., ideally, I think we would not care about "temporaries" except when we see the borrow callback)</p>



<a name="273518638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518638">(Feb 28 2022 at 16:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273518521">said</a>:</p>
<blockquote>
<p>I left a review suggestion for a comment</p>
</blockquote>
<p>Thanks!</p>



<a name="273518750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518750">(Feb 28 2022 at 16:49)</a>:</h4>
<p>I didn't have time to write detailed comment, but I feel the changes that consider mutation as borrows in <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>, are somewhat too conservative. AFAIK ExprUseVisitor considers both assignments and let expressions to be mutations, so effectively all locals are considered borrowed now.</p>



<a name="273518785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518785">(Feb 28 2022 at 16:49)</a>:</h4>
<p>Do the "temporaries" matter if I do something like <code>foo(something, something_else.await)</code>?</p>



<a name="273518844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518844">(Feb 28 2022 at 16:49)</a>:</h4>
<p>I don't think temporaries ever matter unless they are borrowed-- it is the <em>borrowing</em> that creates the temporary, essentially</p>



<a name="273518860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518860">(Feb 28 2022 at 16:49)</a>:</h4>
<p>the borrow may be an auto-ref or an explicit <code>&amp;</code></p>



<a name="273518944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518944" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518944">(Feb 28 2022 at 16:50)</a>:</h4>
<p>in the case of <code>foo(something, something_else.await)</code>, the value produced by <code>something</code> is considered by its parent (the call) -- and the <code>await</code> is within that parent</p>



<a name="273518960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273518960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273518960">(Feb 28 2022 at 16:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273518750">said</a>:</p>
<blockquote>
<p>I didn't have time to write detailed comment, but I feel the changes that consider mutation as borrows in <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>, are somewhat too conservative. AFAIK ExprUseVisitor considers both assignments and let expressions to be mutations, so effectively all locals are considered borrowed now.</p>
</blockquote>
<p>sounds plausible</p>



<a name="273519078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519078" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519078">(Feb 28 2022 at 16:51)</a>:</h4>
<p>it seems like the "next big thing" to attack is distinguishing borrows a bit more to put a cap on how long they could possibly last, which unfortunately also intersects unsafe code rules and the like (but we can probably carve it up)</p>



<a name="273519086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519086">(Feb 28 2022 at 16:51)</a>:</h4>
<p>I would say it requires the EUV refactor too</p>



<a name="273519154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519154" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519154">(Feb 28 2022 at 16:51)</a>:</h4>
<p>In general the way we have to be conservative around borrows bothers me. I'd like to make that more precise. Bu yeah, hopefully we can do that with the EUV refactor.</p>



<a name="273519283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519283">(Feb 28 2022 at 16:52)</a>:</h4>
<p>EUV?</p>



<a name="273519319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519319">(Feb 28 2022 at 16:52)</a>:</h4>
<p>also hi :)</p>



<a name="273519347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tmandry <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519347">(Feb 28 2022 at 16:53)</a>:</h4>
<p>oh</p>



<a name="273519362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519362">(Feb 28 2022 at 16:53)</a>:</h4>
<p>The other change I made in <a href="https://github.com/rust-lang/rust/issues/94309">#94309</a> was to add an <code>is_autoref</code> flag to the borrow callback. I needed both of these to fully account for copies.</p>



<a name="273519373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519373">(Feb 28 2022 at 16:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116883">tmandry</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519283">said</a>:</p>
<blockquote>
<p>EUV?</p>
</blockquote>
<p><code>ExprUseVisitor</code></p>



<a name="273519385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519385">(Feb 28 2022 at 16:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116883">tmandry</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519319">said</a>:</p>
<blockquote>
<p>also hi :)</p>
</blockquote>
<p>hi!</p>



<a name="273519558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519558" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519558">(Feb 28 2022 at 16:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273518750">said</a>:</p>
<blockquote>
<p>I didn't have time to write detailed comment, but I feel the changes that consider mutation as borrows in <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>, are somewhat too conservative. AFAIK ExprUseVisitor considers both assignments and let expressions to be mutations, so effectively all locals are considered borrowed now.</p>
</blockquote>
<p>I'm a little surprised "all locals are considered borrowed" doesn't show up in the tests. We probably have some gaps here.</p>



<a name="273519591"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519591" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519591">(Feb 28 2022 at 16:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519362">said</a>:</p>
<blockquote>
<p>The other change I made in <a href="https://github.com/rust-lang/rust/issues/94309">#94309</a> was to add an <code>is_autoref</code> flag to the borrow callback. I needed both of these to fully account for copies.</p>
</blockquote>
<p>I saw that and wondered about it</p>



<a name="273519636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519636">(Feb 28 2022 at 16:55)</a>:</h4>
<p>I presume it was triggered by test failures?</p>



<a name="273519650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519650">(Feb 28 2022 at 16:55)</a>:</h4>
<p><code>is_autoref</code> is the part I'm kind of unsure of...</p>



<a name="273519725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519725">(Feb 28 2022 at 16:55)</a>:</h4>
<p>ok, let me look more closely</p>



<a name="273519738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519738">(Feb 28 2022 at 16:55)</a>:</h4>
<p>Yeah, I couldn't get the issue-57017 test case we added to pass without it. There were two <code>&amp;Client</code> borrow events that showed up, so I needed to filter out both of them.</p>



<a name="273519818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519818">(Feb 28 2022 at 16:56)</a>:</h4>
<p>btw, last week I put in some time editing the <a href="https://hackmd.io/@tmandry/rJjUyZdJ9">RPITIDT doc</a> -- RPIT in dyn trait</p>



<a name="273519836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519836">(Feb 28 2022 at 16:56)</a>:</h4>
<p><span class="user-mention" data-user-id="116883">@tmandry</span> <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="273519873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519873">(Feb 28 2022 at 16:56)</a>:</h4>
<p>I was trying to turn it into something readable</p>



<a name="273519897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519897" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519897">(Feb 28 2022 at 16:56)</a>:</h4>
<p>kind of forget how far I got</p>



<a name="273519985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273519985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273519985">(Feb 28 2022 at 16:57)</a>:</h4>
<p>I've also been reading into CML and planning a blog post this week comparing it to async-await in rust :)</p>



<a name="273520000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520000">(Feb 28 2022 at 16:57)</a>:</h4>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519558">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273518750">said</a>:</p>
<blockquote>
<p>I didn't have time to write detailed comment, but I feel the changes that consider mutation as borrows in <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>, are somewhat too conservative. AFAIK ExprUseVisitor considers both assignments and let expressions to be mutations, so effectively all locals are considered borrowed now.</p>
</blockquote>
<p>I'm a little surprised "all locals are considered borrowed" doesn't show up in the tests. We probably have some gaps here.</p>
</blockquote>
<p>Test checking that drop tracking improves precision is still ignored (src/test/ui/generator/drop-control-flow.rs).</p>



<a name="273520201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520201" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520201">(Feb 28 2022 at 16:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273520000">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519558">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273518750">said</a>:</p>
<blockquote>
<p>I didn't have time to write detailed comment, but I feel the changes that consider mutation as borrows in <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>, are somewhat too conservative. AFAIK ExprUseVisitor considers both assignments and let expressions to be mutations, so effectively all locals are considered borrowed now.</p>
</blockquote>
<p>I'm a little surprised "all locals are considered borrowed" doesn't show up in the tests. We probably have some gaps here.</p>
</blockquote>
<p>Test checking that drop tracking improves precision is still ignored (src/test/ui/generator/drop-control-flow.rs).</p>
</blockquote>
<p>Oh, that explains it. I thought we had added the <code>-Zdrop-tracking</code> flag on that test.</p>



<a name="273520214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520214">(Feb 28 2022 at 16:58)</a>:</h4>
<p>Guess I'll add that today.</p>



<a name="273520286"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520286" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520286">(Feb 28 2022 at 16:59)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519985">said</a>:</p>
<blockquote>
<p>I've also been reading into CML and planning a blog post this week comparing it to async-await in rust :)</p>
</blockquote>
<p>What's CML?</p>



<a name="273520712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520712">(Feb 28 2022 at 17:00)</a>:</h4>
<p>Ah, I have another meeting now, so I'm going to go ahead and wrap this one up.</p>



<a name="273520717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520717">(Feb 28 2022 at 17:00)</a>:</h4>
<p><span class="user-mention" data-user-id="261224">@triagebot</span> end-meeting</p>



<a name="273520720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520720">(Feb 28 2022 at 17:00)</a>:</h4>
<p>Does anyone have something to bring up?<br>
React with <span aria-label="working on it" class="emoji emoji-1f6e0" role="img" title="working on it">:working_on_it:</span> if you have something to say.<br>
React with <span aria-label="all good" class="emoji emoji-2705" role="img" title="all good">:all_good:</span> if you're ready to end the meeting.</p>



<a name="273520728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520728">(Feb 28 2022 at 17:00)</a>:</h4>
<p>CML= Concurrent ML</p>



<a name="273520739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520739">(Feb 28 2022 at 17:00)</a>:</h4>
<p>didn't you go to CMU, <span class="user-mention" data-user-id="421986">@eholk</span>? For shame!</p>



<a name="273520829"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520829" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520829">(Feb 28 2022 at 17:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273520739">said</a>:</p>
<blockquote>
<p>didn't you go to CMU, <span class="user-mention silent" data-user-id="421986">eholk</span>? For shame!</p>
</blockquote>
<p>I went to IU, most of the other Rust Interns went to CMU. Still, I feel bad I forgot what CML was already :)</p>



<a name="273520845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520845">(Feb 28 2022 at 17:01)</a>:</h4>
<p>Oh dear</p>



<a name="273520847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520847">(Feb 28 2022 at 17:01)</a>:</h4>
<p><a href="https://en.wikipedia.org/wiki/Concurrent_ML">https://en.wikipedia.org/wiki/Concurrent_ML</a></p>



<a name="273520940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520940" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520940">(Feb 28 2022 at 17:02)</a>:</h4>
<p>Anyway I happened to be reading one of the papers for fun and I thought it'd make a nice blog post to compare it to async-await</p>



<a name="273520952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520952">(Feb 28 2022 at 17:02)</a>:</h4>
<p>lots of similarities, some interesting differences</p>



<a name="273520978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273520978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273520978">(Feb 28 2022 at 17:02)</a>:</h4>
<p>Yeah, I'd be interested to see that</p>



<a name="273571409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273571409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273571409">(Feb 28 2022 at 23:50)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116009">nikomatsakis</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273517905">said</a>:</p>
<blockquote>
<p>we should file an issue for that cleanup work</p>
</blockquote>
<p>I filed <a href="https://github.com/rust-lang/rust/issues/94463">#94463</a> for this.</p>



<a name="273571484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/187312-wg-async/topic/Triage%20meeting%202022-02-28/near/273571484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eholk <a href="https://zulip-archive.rust-lang.org/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28.html#273571484">(Feb 28 2022 at 23:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273520201">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273520000">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="421986">eholk</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273519558">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/187312-wg-async/topic/Triage.20meeting.202022-02-28/near/273518750">said</a>:</p>
<blockquote>
<p>I didn't have time to write detailed comment, but I feel the changes that consider mutation as borrows in <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>, are somewhat too conservative. AFAIK ExprUseVisitor considers both assignments and let expressions to be mutations, so effectively all locals are considered borrowed now.</p>
</blockquote>
<p>I'm a little surprised "all locals are considered borrowed" doesn't show up in the tests. We probably have some gaps here.</p>
</blockquote>
<p>Test checking that drop tracking improves precision is still ignored (src/test/ui/generator/drop-control-flow.rs).</p>
</blockquote>
<p>Oh, that explains it. I thought we had added the <code>-Zdrop-tracking</code> flag on that test.</p>
</blockquote>
<p>I opened <a href="https://github.com/rust-lang/rust/issues/94460">#94460</a> which re-enables the tests and fixes the regresses introduced by <a href="https://github.com/rust-lang/rust/issues/94068">#94068</a>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>final stretch to landing · t-compiler/wg-polymorphization · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/index.html">t-compiler/wg-polymorphization</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html">final stretch to landing</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204109838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204109838" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204109838">(Jul 16 2020 at 16:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> ping me here with updates, ideally</p>



<a name="204109862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204109862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204109862">(Jul 16 2020 at 16:40)</a>:</h4>
<p>will do</p>



<a name="204119239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204119239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204119239">(Jul 16 2020 at 17:56)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> I've replied to your comments and pushed commits without rebasing them into the original commits as I intend to - easier to drop them that way if we don't want any individual change.</p>



<a name="204120055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204120055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204120055">(Jul 16 2020 at 18:02)</a>:</h4>
<p>(I resolved the comments that I believe I've addressed, not sure if you prefer doing that, obviously feel free to unresolve)</p>



<a name="204123619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204123619" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204123619">(Jul 16 2020 at 18:30)</a>:</h4>
<p>looks like one of those commits caused test failures that I didn't see locally when running ui tests</p>



<a name="204130377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204130377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204130377">(Jul 16 2020 at 19:21)</a>:</h4>
<p>after rebasing, I cannot reproduce the test failures that CI is seeing..</p>



<a name="204177409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204177409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204177409">(Jul 17 2020 at 07:26)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> ugh sorry I caused the CI failure</p>



<a name="204177465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204177465" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204177465">(Jul 17 2020 at 07:27)</a>:</h4>
<p>I forgot how your debuginfo change that handles parameters works (i.e. only when they're not actually layout-relevant, just present in e.g. closure type substs)</p>



<a name="204177534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204177534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204177534">(Jul 17 2020 at 07:28)</a>:</h4>
<p>so the <code>impl_self_ty</code> check is still needed</p>



<a name="204180334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204180334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204180334">(Jul 17 2020 at 08:04)</a>:</h4>
<p>I’ll drop that commit - I don’t understand why I couldn’t reproduce locally, even after clearing the build directory.</p>



<a name="204180731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204180731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204180731">(Jul 17 2020 at 08:09)</a>:</h4>
<p>maybe you weren't building enough to trigger it?</p>



<a name="204180738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204180738" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204180738">(Jul 17 2020 at 08:09)</a>:</h4>
<p>or not running debuginfo tests? UI tests likely can't repro</p>



<a name="204181109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181109">(Jul 17 2020 at 08:15)</a>:</h4>
<p>Wasn’t it the UI tests which failed on CI?</p>



<a name="204181168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181168">(Jul 17 2020 at 08:16)</a>:</h4>
<p>Are you otherwise happy with the changes (should I squash them)?</p>



<a name="204181195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181195">(Jul 17 2020 at 08:16)</a>:</h4>
<p>maybe you have some odd settings in <code>config.toml</code>?</p>



<a name="204181200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181200">(Jul 17 2020 at 08:16)</a>:</h4>
<p>it does seem like the UI tests built with debuginfo are the ones it failed for</p>



<a name="204181303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181303">(Jul 17 2020 at 08:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> yeah, modulo comments I left since. I guess I should check what you pushed more recently. there's really only the bit set issue left IMO</p>



<a name="204181307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181307">(Jul 17 2020 at 08:18)</a>:</h4>
<p>Can’t think of anything I’ve got set which would cause that.</p>



<a name="204181311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181311" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181311">(Jul 17 2020 at 08:18)</a>:</h4>
<p>since it was really just a quick hack</p>



<a name="204181321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181321">(Jul 17 2020 at 08:18)</a>:</h4>
<p>well, anything to do with debuginfo?</p>



<a name="204181339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181339" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181339">(Jul 17 2020 at 08:18)</a>:</h4>
<p><a href="https://github.com/davidtwco/veritas/blob/master/nix/shells/rustc.nix">https://github.com/davidtwco/veritas/blob/master/nix/shells/rustc.nix</a></p>



<a name="204181364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181364">(Jul 17 2020 at 08:19)</a>:</h4>
<p>you can use <code>./configure</code>, you never need to write a <code>config.toml</code> yourself :P</p>



<a name="204181374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181374">(Jul 17 2020 at 08:19)</a>:</h4>
<p>(on phone or I’d link the right part, but <code>config.toml</code> is in there)</p>



<a name="204181390"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181390" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181390">(Jul 17 2020 at 08:19)</a>:</h4>
<p>(it has arbitrary TOML injection for the situations where it doesn't have a nice flag)</p>



<a name="204181458"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181458" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181458">(Jul 17 2020 at 08:20)</a>:</h4>
<p>I like being able to write the <code>config.toml</code> in the Nix shell and have bootstrap pick it up automatically now - not sure how I’d do the same with <code>./configure</code>.</p>



<a name="204181490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181490">(Jul 17 2020 at 08:20)</a>:</h4>
<p>I guess the problem is executing it? since it does basically the same thing, just more conveniently</p>



<a name="204181495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181495">(Jul 17 2020 at 08:20)</a>:</h4>
<p>There were a handful of comments that I didn’t address last night in addition to the bit set changes.</p>



<a name="204181513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204181513" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204181513">(Jul 17 2020 at 08:21)</a>:</h4>
<p>okay I don't see how any of that would hide the problem huh</p>



<a name="204182178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204182178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204182178">(Jul 17 2020 at 08:31)</a>:</h4>
<p>ughhhh beta promotion got me all distracted because it broke NixOS</p>



<a name="204182185"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204182185" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204182185">(Jul 17 2020 at 08:31)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> whatever you do, don't rebase :P</p>



<a name="204182192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204182192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204182192">(Jul 17 2020 at 08:31)</a>:</h4>
<p>or at least don't rebase on top of the PR that landed an hour ago</p>



<a name="204182277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204182277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204182277">(Jul 17 2020 at 08:32)</a>:</h4>
<p>looking at the comments I can find:</p>
<ul>
<li>bitset wrapper for <code>u64</code> (I just thought of <code>FiniteBitSet&lt;u64&gt;</code> as the type name) <a href="https://github.com/rust-lang/rust/pull/69749#discussion_r456295452">https://github.com/rust-lang/rust/pull/69749#discussion_r456295452</a></li>
<li>mono item terminology issue <a href="https://github.com/rust-lang/rust/pull/69749#discussion_r455909581">https://github.com/rust-lang/rust/pull/69749#discussion_r455909581</a></li>
<li>moving early exits into the recursive visit methods <a href="https://github.com/rust-lang/rust/pull/69749#discussion_r455918993">https://github.com/rust-lang/rust/pull/69749#discussion_r455918993</a></li>
</ul>



<a name="204187645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187645" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187645">(Jul 17 2020 at 09:39)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> regarding the <code>rustfmt</code> stuff: we've seen this before, comments in between two patterns (with <code>|</code> between them) of a <code>match</code> arm results in <code>rustfmt</code> not being able to reformat the entire <code>match</code></p>



<a name="204187661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187661">(Jul 17 2020 at 09:39)</a>:</h4>
<p>what I was noting is that you removed such a comment which led to rustfmt working again, thus the formatting changes</p>



<a name="204187769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187769">(Jul 17 2020 at 09:41)</a>:</h4>
<p>do you want me to re-add the comment?</p>



<a name="204187782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187782" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187782">(Jul 17 2020 at 09:41)</a>:</h4>
<p>nono</p>



<a name="204187791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187791">(Jul 17 2020 at 09:41)</a>:</h4>
<p>was just very confused then noted what had happened</p>



<a name="204187799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187799" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187799">(Jul 17 2020 at 09:41)</a>:</h4>
<p>ah, alright</p>



<a name="204187946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187946">(Jul 17 2020 at 09:42)</a>:</h4>
<p>also more random stuff: can't believe we actually stuck with "polymorphization" when "partial monomorphization" is <em>technically</em> more accurate</p>



<a name="204187964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187964">(Jul 17 2020 at 09:43)</a>:</h4>
<p>OTOH how have we not shortened it to "polymorph" yet?</p>



<a name="204187969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187969">(Jul 17 2020 at 09:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> r- until you change the flag to <code>-Z polymorph</code></p>



<a name="204187995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204187995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204187995">(Jul 17 2020 at 09:43)</a>:</h4>
<p>these are things that I can change</p>



<a name="204188047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204188047" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204188047">(Jul 17 2020 at 09:44)</a>:</h4>
<p>(ftr I'm kidding, I'd only do it if other people wanted it too)</p>



<a name="204197000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204197000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204197000">(Jul 17 2020 at 11:54)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> should have addressed those last few comments</p>



<a name="204198007"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204198007" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204198007">(Jul 17 2020 at 12:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> review done, I think</p>



<a name="204206701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204206701" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204206701">(Jul 17 2020 at 13:40)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> fixed the comments again</p>



<a name="204207617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207617">(Jul 17 2020 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> are you joking about the space or not?</p>



<a name="204207633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207633">(Jul 17 2020 at 13:48)</a>:</h4>
<p>I'm not?</p>



<a name="204207658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207658" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207658">(Jul 17 2020 at 13:48)</a>:</h4>
<p><a href="/user_uploads/4715/SNzmXVopT55iVr3LWSVwya7e/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/SNzmXVopT55iVr3LWSVwya7e/image.png" title="image.png"><img src="/user_uploads/4715/SNzmXVopT55iVr3LWSVwya7e/image.png"></a></div>



<a name="204207664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207664">(Jul 17 2020 at 13:48)</a>:</h4>
<p>This is what I see? <a href="/user_uploads/4715/O4dQtVc88452tOx7eAx9b-mO/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/O4dQtVc88452tOx7eAx9b-mO/image.png" title="image.png"><img src="/user_uploads/4715/O4dQtVc88452tOx7eAx9b-mO/image.png"></a></div>



<a name="204207668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207668">(Jul 17 2020 at 13:49)</a>:</h4>
<p>I also do not see the space</p>



<a name="204207720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207720">(Jul 17 2020 at 13:49)</a>:</h4>
<p>wat</p>



<a name="204207729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207729" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207729">(Jul 17 2020 at 13:49)</a>:</h4>
<p>I can copy it and it's there</p>



<a name="204207742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207742">(Jul 17 2020 at 13:49)</a>:</h4>
<p>wait it's not</p>



<a name="204207744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207744">(Jul 17 2020 at 13:49)</a>:</h4>
<p>I checked locally just in case too.</p>



<a name="204207765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207765">(Jul 17 2020 at 13:49)</a>:</h4>
<p><a href="/user_uploads/4715/7ztPRgP2EBHhHVqyC9nlCYkW/Screenshot-from-2020-07-17-15-49-32.png">Screenshot-from-2020-07-17-15-49-32.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/7ztPRgP2EBHhHVqyC9nlCYkW/Screenshot-from-2020-07-17-15-49-32.png" title="Screenshot-from-2020-07-17-15-49-32.png"><img src="/user_uploads/4715/7ztPRgP2EBHhHVqyC9nlCYkW/Screenshot-from-2020-07-17-15-49-32.png"></a></div>



<a name="204207777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207777">(Jul 17 2020 at 13:49)</a>:</h4>
<p>oh it's 3 &gt; not 2</p>



<a name="204207825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207825" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207825">(Jul 17 2020 at 13:50)</a>:</h4>
<p>okay so it's a clientside rendering bug for me</p>



<a name="204207917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207917">(Jul 17 2020 at 13:50)</a>:</h4>
<p>it might be a ligature thing</p>



<a name="204207948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204207948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204207948">(Jul 17 2020 at 13:51)</a>:</h4>
<p>okay, all resolved <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="204208663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204208663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204208663">(Jul 17 2020 at 13:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> I hope nobody minds what I just did</p>



<a name="204208791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204208791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204208791">(Jul 17 2020 at 13:58)</a>:</h4>
<p>so do I</p>



<a name="204209002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209002">(Jul 17 2020 at 14:00)</a>:</h4>
<p>IIRC njn asked for another perf run before r+ ?</p>



<a name="204209127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209127">(Jul 17 2020 at 14:01)</a>:</h4>
<p>hmm</p>



<a name="204209148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209148">(Jul 17 2020 at 14:01)</a>:</h4>
<p>feel free to handle my r+ as a r=me :P</p>



<a name="204209244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209244" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209244">(Jul 17 2020 at 14:02)</a>:</h4>
<p>I have a few other things to take care of</p>



<a name="204209474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209474" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209474">(Jul 17 2020 at 14:04)</a>:</h4>
<p>Why don't we do that perf run before landing it? <span aria-label="slight smile" class="emoji emoji-1f642" role="img" title="slight smile">:slight_smile:</span></p>



<a name="204209535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209535" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209535">(Jul 17 2020 at 14:04)</a>:</h4>
<p>Sorry <span class="user-mention" data-user-id="116107">@davidtwco</span> I know you're probably anxious to see it merged</p>



<a name="204209547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209547" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209547">(Jul 17 2020 at 14:05)</a>:</h4>
<p>that's fine, I get it</p>



<a name="204209602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209602" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209602">(Jul 17 2020 at 14:05)</a>:</h4>
<p>There's only one try build commit in the perf queue so hopefully this shouldn't take too long.</p>



<a name="204209689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209689">(Jul 17 2020 at 14:06)</a>:</h4>
<p>Alright, queued that up</p>



<a name="204209709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209709">(Jul 17 2020 at 14:06)</a>:</h4>
<p>It was so close..</p>



<a name="204209746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209746">(Jul 17 2020 at 14:06)</a>:</h4>
<p>I'm sorry <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="204209791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204209791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204209791">(Jul 17 2020 at 14:07)</a>:</h4>
<p>I think as as long as the perf results look similar to the last ones, we should feel free to r+ it again.</p>



<a name="204211093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204211093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204211093">(Jul 17 2020 at 14:19)</a>:</h4>
<p>I think I found a problem here <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="204211213"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204211213" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204211213">(Jul 17 2020 at 14:20)</a>:</h4>
<p>see PR comments</p>



<a name="204211894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204211894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204211894">(Jul 17 2020 at 14:25)</a>:</h4>
<p>does pushing changes interrupt the try/perf?</p>



<a name="204211935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204211935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204211935">(Jul 17 2020 at 14:26)</a>:</h4>
<p>I think not. It requires us to manually start perf though</p>



<a name="204212103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204212103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204212103">(Jul 17 2020 at 14:27)</a>:</h4>
<p>so perf doesn't start once the try build is complete if we push additional commits after starting it (or only in case we rebased, not completely sure)</p>



<a name="204213317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204213317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204213317">(Jul 17 2020 at 14:36)</a>:</h4>
<p>If you push before perf starts, then we just need to <code>try</code> again lol</p>



<a name="204213476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204213476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204213476">(Jul 17 2020 at 14:37)</a>:</h4>
<p>we can just use <code>@rust-timer build &lt;prev-try-commit-hash&gt;</code> and ignore the new commits (I don't think fixing the issue I found will influence perf)</p>



<a name="204216842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204216842" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204216842">(Jul 17 2020 at 15:04)</a>:</h4>
<p>Pushed a fix for those two - well spotted.</p>



<a name="204217180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204217180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204217180">(Jul 17 2020 at 15:07)</a>:</h4>
<p>Is there a specific reason why oob elements are <code>true</code> instead of <code>false</code> by default?</p>



<a name="204217350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204217350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204217350">(Jul 17 2020 at 15:08)</a>:</h4>
<p>I felt like that was a reasonable default for the data structure - as much as the opposite is desirable in polymorphisation, that's only because the set represents unused params and we want the excess params to be used.</p>



<a name="204217453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204217453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204217453">(Jul 17 2020 at 15:09)</a>:</h4>
<p>This shouldn't prevent this PR from landing, but I personally think that having <code>false</code> as a default is more natural (and safer here)</p>



<a name="204217555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204217555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204217555">(Jul 17 2020 at 15:10)</a>:</h4>
<p>I'm not going to make another change just for that but I don't mind if it gets changed later.</p>



<a name="204218246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204218246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204218246">(Jul 17 2020 at 15:15)</a>:</h4>
<p>What about <code>Option&lt;bool&gt;</code>? That prevents any ambiguity.</p>



<a name="204218293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204218293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204218293">(Jul 17 2020 at 15:15)</a>:</h4>
<p>That would also work, I suppose I'll change that in a moment.</p>



<a name="204219935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204219935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204219935">(Jul 17 2020 at 15:28)</a>:</h4>
<p>I mean, it's a set that cannot contain values outside of <code>0..DOMAIN_SIZE</code></p>



<a name="204222681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204222681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204222681">(Jul 17 2020 at 15:48)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-dev-guide/pull/803">https://github.com/rust-lang/rustc-dev-guide/pull/803</a></p>



<a name="204224491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204224491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204224491">(Jul 17 2020 at 16:00)</a>:</h4>
<p>Alright, I've fixed <code>FiniteBitSet::contains</code> in the PR.</p>



<a name="204238867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204238867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204238867">(Jul 17 2020 at 18:04)</a>:</h4>
<p>When did that PR get a merge conflict?</p>



<a name="204242476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204242476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204242476">(Jul 17 2020 at 18:36)</a>:</h4>
<p>Fixed it</p>



<a name="204259513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204259513" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204259513">(Jul 17 2020 at 21:09)</a>:</h4>
<p><a href="https://perf.rust-lang.org/compare.html?start=c2dbebd3d4ad21e80ef4e7535dd1e868aaad7e50&amp;end=bcc129994eb5e74186bdd0853540882aeab82516">https://perf.rust-lang.org/compare.html?start=c2dbebd3d4ad21e80ef4e7535dd1e868aaad7e50&amp;end=bcc129994eb5e74186bdd0853540882aeab82516</a> weird</p>



<a name="204259516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204259516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204259516">(Jul 17 2020 at 21:09)</a>:</h4>
<p>Yeah</p>



<a name="204259579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204259579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204259579">(Jul 17 2020 at 21:10)</a>:</h4>
<p>Looks like the improvements are gone and the losses are still present</p>



<a name="204259684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204259684" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204259684">(Jul 17 2020 at 21:11)</a>:</h4>
<p>I wonder if it's because of improvements in other PRs since the previous perf run, rather than losses in this PR negating the previous expected gains</p>



<a name="204259785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204259785" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204259785">(Jul 17 2020 at 21:12)</a>:</h4>
<p>or if the partitioning issue snuck in the previous run</p>



<a name="204259870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204259870" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204259870">(Jul 17 2020 at 21:13)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> <span class="user-mention" data-user-id="125250">@Wesley Wiser</span> any thoughts?</p>



<a name="204260045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204260045" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204260045">(Jul 17 2020 at 21:14)</a>:</h4>
<p>Most of the losses don't actually seem that bad and are mostly confined to our "insert <code>println!()</code> somewhere" incremental tests.</p>



<a name="204260140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204260140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204260140">(Jul 17 2020 at 21:15)</a>:</h4>
<p>There's some pretty consistent <code>max-rss</code> improvements on the full tests as well.</p>



<a name="204260274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204260274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204260274">(Jul 17 2020 at 21:16)</a>:</h4>
<p>Interesting, the old perf results had pretty poor max-rss results IIRC.</p>



<a name="204260300"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204260300" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204260300">(Jul 17 2020 at 21:17)</a>:</h4>
<p>I mean the max metrics still take a hit but those again seem to be mostly the incremental builds</p>



<a name="204260818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204260818" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204260818">(Jul 17 2020 at 21:21)</a>:</h4>
<p>idk I think we should still land it. It's not quite as compelling as the last set of results but I think that has less to do with this code and more to do with our partitioning logic certainly not being optimized for the kind of code we hand off to LLVM now. This PR is a step toward fixing some of the long standing issues we know we have and even if the benchmarks don't bear that out right now, I think we're better off for having it.</p>



<a name="204260882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204260882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204260882">(Jul 17 2020 at 21:21)</a>:</h4>
<p>If we really can't live with these regressions, we can always flip the default for <code>-Zpolymorphize</code> later</p>



<a name="204261282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204261282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204261282">(Jul 17 2020 at 21:24)</a>:</h4>
<p>one'd expect to also see some improvements by looking at the mono item graph and cargo llvm-lines output</p>



<a name="204278888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204278888" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204278888">(Jul 18 2020 at 02:16)</a>:</h4>
<p>okay but where did the improvements go, can we track that down somehow? I guess 2-3 months is a while</p>



<a name="204280525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204280525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204280525">(Jul 18 2020 at 03:01)</a>:</h4>
<p>btw if anyone has Fira Code installed and wants to see the freaky bug I hit before, open this in Firefox:<br>
<code>data:text/html,&lt;div style="font-family:Fira Code"&gt;&lt;span&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span&gt;&amp;gt;&lt;/span&gt;</code></p>



<a name="204310512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204310512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204310512">(Jul 18 2020 at 17:51)</a>:</h4>
<p>I’ve been trying to do some benchmarking locally again today - but the changes to the script-servo benchmark in perf mean that I need to update my Nix shell again and that’s slowing me down.</p>



<a name="204310598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204310598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204310598">(Jul 18 2020 at 17:52)</a>:</h4>
<p>Wait...</p>



<a name="204310613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204310613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204310613">(Jul 18 2020 at 17:53)</a>:</h4>
<p>Could it just be that the benchmark has changed?</p>



<a name="204310675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204310675" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204310675">(Jul 18 2020 at 17:54)</a>:</h4>
<p>script-servo was updated 19 days ago - it’s possible that the opportunities for polymorphisation just aren’t there now?</p>



<a name="204310683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204310683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204310683">(Jul 18 2020 at 17:54)</a>:</h4>
<p>I don’t know how old the version that was there before was.</p>



<a name="204311015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204311015" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204311015">(Jul 18 2020 at 18:01)</a>:</h4>
<p>(for reference <a href="https://github.com/rust-lang/rustc-perf/issues/664">rust-lang/rustc-perf#664</a> made the change - after upstream had made a patch which reduced the llvm they generate!)</p>



<a name="204311162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204311162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204311162">(Jul 18 2020 at 18:04)</a>:</h4>
<blockquote>
<p>762368 (7.5%)   5956 (2.1%)  mozjs::panic::wrap_panic::{{closure}}</p>
</blockquote>
<p>Afaict they extracted that closure</p>



<a name="204311163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204311163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204311163">(Jul 18 2020 at 18:04)</a>:</h4>
<p>given that I've not been able to get the new benchmark compiling under NixOS, going to check out an older commit to see if I can reproduce the earlier perf improvements with this version - that'll confirm my above hypothesis</p>



<a name="204311176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204311176" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204311176">(Jul 18 2020 at 18:05)</a>:</h4>
<p>which probably explained the perf gains from polymorphization</p>



<a name="204311354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204311354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204311354">(Jul 18 2020 at 18:09)</a>:</h4>
<p>Yeah, that’s my thinking.</p>



<a name="204314700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204314700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204314700">(Jul 18 2020 at 19:38)</a>:</h4>
<p>Benchmarks that I've done locally don't particularly clear things up (though I've not studied the data too much) - <a href="https://www.dropbox.com/s/jr322yx0uhy8gb1/polymorphisation-2020-07-18.tar.gz?dl=0">self-profile data is here</a>. That's probably all I'll look into today.</p>
<div class="message_inline_ref"><a href="https://www.dropbox.com/s/jr322yx0uhy8gb1/polymorphisation-2020-07-18.tar.gz?dl=0" title="polymorphisation-2020-07-18.tar.gz"><img src="https://www.dropbox.com/static/images/spectrum-icons/generated/content/content-zip-large.png"></a><div><div class="message_inline_image_title">polymorphisation-2020-07-18.tar.gz</div><desc class="message_inline_image_desc"></desc></div></div>



<a name="204323906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204323906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204323906">(Jul 19 2020 at 00:17)</a>:</h4>
<p>why would we change a benchmark on perf? that seems antithetical to what perf does</p>



<a name="204323914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204323914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204323914">(Jul 19 2020 at 00:17)</a>:</h4>
<p>e.g. <code>inflate</code> is not what people will get when they add the crate as a dependency nowadays, but rather a bloated version</p>



<a name="204323986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204323986" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204323986">(Jul 19 2020 at 00:19)</a>:</h4>
<p>left a comment on the change</p>



<a name="204324034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204324034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204324034">(Jul 19 2020 at 00:20)</a>:</h4>
<p>IMO we should revert it while the damage is minimal, and maybe void the past 20 days or so of data for it?</p>



<a name="204324038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204324038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204324038">(Jul 19 2020 at 00:20)</a>:</h4>
<p>since we've had no <code>script-servo</code> data for 20 days</p>



<a name="204324042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204324042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204324042">(Jul 19 2020 at 00:20)</a>:</h4>
<p>only some unrelated new thing</p>



<a name="204324123"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204324123" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204324123">(Jul 19 2020 at 00:23)</a>:</h4>
<p>we can rename the old version to <code>-bloated</code> or w/e (which we should with <code>inflate</code> and <code>clap-rs</code>, neither of which are indicative of the current versions of those crates, tbh) if we don't want to give the wrong impression about the crates <em>shrug</em></p>



<a name="204324195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204324195" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204324195">(Jul 19 2020 at 00:25)</a>:</h4>
<p>yeah, the benchmarks on perf should not be changed, but rather replaced at best. (that is, add a new benchmark with a different name and _maybe_ remove the old one)</p>



<a name="204324258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204324258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204324258">(Jul 19 2020 at 00:27)</a>:</h4>
<p>To be fair, that is what happened, the new benchmark is named script-servo-2 and the original script-servo was removed - I just don’t think any of us noticed that in the p.r-l.o results initially.</p>



<a name="204325621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204325621" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204325621">(Jul 19 2020 at 01:11)</a>:</h4>
<p>okay so we're just missing data, but it's not improperly labelled. I also didn't notice the -2</p>



<a name="204339038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204339038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204339038">(Jul 19 2020 at 08:24)</a>:</h4>
<p>Is there anything else I should be looking into locally or are we able to land this again?</p>



<a name="204401471"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204401471" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204401471">(Jul 20 2020 at 09:19)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> ^</p>



<a name="204401536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204401536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204401536">(Jul 20 2020 at 09:20)</a>:</h4>
<p><em>shrug</em>, it would've been nice to have the old benchmark but feel free to r=me or w/e</p>



<a name="204401556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204401556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204401556">(Jul 20 2020 at 09:20)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116107">davidtwco</span> <a href="#narrow/stream/216091-t-compiler.2Fwg-polymorphization/topic/progress.20updates/near/204314700">said</a>:</p>
<blockquote>
<p>Benchmarks that I've done locally don't particularly clear things up (though I've not studied the data too much) - <a href="https://www.dropbox.com/s/jr322yx0uhy8gb1/polymorphisation-2020-07-18.tar.gz?dl=0">self-profile data is here</a>. That's probably all I'll look into today.</p>
</blockquote>
<p>this is from the old benchmark</p>



<a name="204401651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204401651" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204401651">(Jul 20 2020 at 09:21)</a>:</h4>
<p>I ran the old benchmark with polymorphization on/off and with/without one codegen unit in check, debug and opt but only for the full run (not incr).</p>



<a name="204401727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204401727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204401727">(Jul 20 2020 at 09:22)</a>:</h4>
<p>(using the try build that perf used)</p>



<a name="204401839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204401839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204401839">(Jul 20 2020 at 09:24)</a>:</h4>
<p>let's land it <span aria-label="rocket" class="emoji emoji-1f680" role="img" title="rocket">:rocket:</span></p>



<a name="204406081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204406081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204406081">(Jul 20 2020 at 10:21)</a>:</h4>
<p>Why does the universe object to this landing so much?</p>



<a name="204406146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204406146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204406146">(Jul 20 2020 at 10:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116107">@davidtwco</span> seems like the test codegen-units/polymorphization/unused_type_parameters.rs requires some expectations to be updated, failing the build</p>



<a name="204406154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204406154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204406154">(Jul 20 2020 at 10:22)</a>:</h4>
<p>ah you've seen it already</p>



<a name="204406163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204406163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204406163">(Jul 20 2020 at 10:22)</a>:</h4>
<p>I noticed, I'm wondering if it is platform dependent but I'll check locally first.</p>



<a name="204406202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204406202" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204406202">(Jul 20 2020 at 10:23)</a>:</h4>
<p>the universe likes its monomorphizations too damn much</p>



<a name="204407444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204407444" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204407444">(Jul 20 2020 at 10:40)</a>:</h4>
<p>I can't reproduce this locally w/ or w/out using <code>--target i686-unknown-linux-gnu</code></p>



<a name="204407477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204407477" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204407477">(Jul 20 2020 at 10:41)</a>:</h4>
<p>this is the <code>i686-gnu-nopt</code> builder, <code>nopt</code> seems like it might be relevant</p>



<a name="204416575"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204416575" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204416575">(Jul 20 2020 at 12:38)</a>:</h4>
<p>alright, reproduced with <code>rust.optimize-tests = false</code> in <code>config.toml</code></p>



<a name="204417349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204417349" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204417349">(Jul 20 2020 at 12:46)</a>:</h4>
<p>Pushed a fix</p>



<a name="204456667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204456667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204456667">(Jul 20 2020 at 18:17)</a>:</h4>
<p>Now a platform specific error.</p>



<a name="204456679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204456679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204456679">(Jul 20 2020 at 18:17)</a>:</h4>
<p>I feel this test is going to fail on all smaller builders</p>



<a name="204456763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204456763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204456763">(Jul 20 2020 at 18:18)</a>:</h4>
<p>probably wasm here ?</p>



<a name="204457105"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204457105" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204457105">(Jul 20 2020 at 18:21)</a>:</h4>
<p>(will the <code>std::sys[0]::unix[0]::process[0]</code> expectation also work on windows btw?)</p>



<a name="204457359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204457359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204457359">(Jul 20 2020 at 18:23)</a>:</h4>
<p>no - I'll need to find a way to remove that from the test</p>



<a name="204457719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204457719" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204457719">(Jul 20 2020 at 18:26)</a>:</h4>
<p>making the test a lib without a main ?</p>



<a name="204457872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204457872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204457872">(Jul 20 2020 at 18:27)</a>:</h4>
<p>yeah - maybe that + <code>print-mono-items=eager</code> will be enough</p>



<a name="204457934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204457934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204457934">(Jul 20 2020 at 18:28)</a>:</h4>
<p>or maybe that + make them public</p>



<a name="204458246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204458246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204458246">(Jul 20 2020 at 18:30)</a>:</h4>
<p>worth a shot :) (this feature of printing the mono items with a specific collection mode, actually changing the collection mode is always a bit scary to me)</p>



<a name="204458334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204458334" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204458334">(Jul 20 2020 at 18:31)</a>:</h4>
<p>(like I think it conflicts with the link dead code codegen option)</p>



<a name="204458819"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204458819" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204458819">(Jul 20 2020 at 18:36)</a>:</h4>
<p>alright, fixed that</p>



<a name="204517070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204517070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204517070">(Jul 21 2020 at 06:58)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="204517821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204517821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204517821">(Jul 21 2020 at 07:15)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="204521418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204521418" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> davidtwco <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204521418">(Jul 21 2020 at 08:09)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="204534668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204534668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204534668">(Jul 21 2020 at 11:06)</a>:</h4>
<p>Congratulations!</p>



<a name="204538462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204538462" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204538462">(Jul 21 2020 at 11:58)</a>:</h4>
<p>Congrats <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="204833466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/216091-t-compiler/wg-polymorphization/topic/final%20stretch%20to%20landing/near/204833466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://rust-lang.github.io/zulip_archive/stream/216091-t-compiler/wg-polymorphization/topic/final.20stretch.20to.20landing.html#204833466">(Jul 23 2020 at 18:15)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>lintcheck · t-compiler/wg-rustc-dev-guide · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/index.html">t-compiler/wg-rustc-dev-guide</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html">lintcheck</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="221219922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221219922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221219922">(Dec 30 2020 at 15:23)</a>:</h4>
<p>Is <code>mdbook build</code> supposed to work in a freshly cloned copy of the repo? I get the following error:<br>
<code>2020-12-30 16:22:26 [ERROR] (mdbook::renderer): The command `../../ci/linkcheck.sh` wasn't found,</code></p>



<a name="221220016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220016" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220016">(Dec 30 2020 at 15:24)</a>:</h4>
<p>The path <code>../../ci/linkcheck.sh</code> looks suspicious to me</p>



<a name="221220081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220081">(Dec 30 2020 at 15:25)</a>:</h4>
<p>That's what it is in the book.toml. It also looks suspicious to me. Unfortunately, changing it to "./ci/linkcheck.sh" yields the same error</p>



<a name="221220132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220132">(Dec 30 2020 at 15:26)</a>:</h4>
<p>I thought I'd check here before diving into the error too deep</p>



<a name="221220774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220774">(Dec 30 2020 at 15:36)</a>:</h4>
<p>I'm hitting the same error</p>



<a name="221220807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220807">(Dec 30 2020 at 15:36)</a>:</h4>
<p>Maybe I need to <code>cd</code> into <code>src</code>?</p>



<a name="221220827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220827">(Dec 30 2020 at 15:37)</a>:</h4>
<p>Or update <code>mdbook</code></p>



<a name="221220832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220832">(Dec 30 2020 at 15:37)</a>:</h4>
<p>I'll try updating first</p>



<a name="221220855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220855">(Dec 30 2020 at 15:37)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> did you just <code>cargo install mdbook mdbook-linkcheck</code>?</p>



<a name="221220975"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221220975" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221220975">(Dec 30 2020 at 15:39)</a>:</h4>
<p>Yes and then I made sure I had the versions used in CI</p>



<a name="221221026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221221026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221221026">(Dec 30 2020 at 15:40)</a>:</h4>
<p>Can you try <code>cd src</code> and build?</p>



<a name="221221321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221221321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221221321">(Dec 30 2020 at 15:45)</a>:</h4>
<p>That's the relative path the git hook uses</p>



<a name="221221363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221221363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221221363">(Dec 30 2020 at 15:46)</a>:</h4>
<p>Seems strange that it's showing up normally</p>



<a name="221231990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221231990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221231990">(Dec 30 2020 at 17:57)</a>:</h4>
<p><code>mdbook</code> uses the same book.toml locally as it does in CI so they would have to be the same</p>



<a name="221232015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221232015" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221232015">(Dec 30 2020 at 17:57)</a>:</h4>
<p>Do others ever build locally or do people usually just make changes and push them to GitHub to be built by CI?</p>



<a name="221232070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221232070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221232070">(Dec 30 2020 at 17:58)</a>:</h4>
<p>No, I pretty much never build the book locally</p>



<a name="221232085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221232085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221232085">(Dec 30 2020 at 17:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">Léo Lanteri Thauvin</span> <a href="#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/lintcheck/near/221221026">said</a>:</p>
<blockquote>
<p>Can you try <code>cd src</code> and build?</p>
</blockquote>
<p>This doesn't work:</p>
<div class="codehilite"><pre><span></span><code>2020-12-30 18:54:59 [ERROR] (mdbook::utils): Error: Couldn&#39;t open SUMMARY.md
2020-12-30 18:54:59 [ERROR] (mdbook::utils):    Caused By: No such file or directory (os error 2)
</code></pre></div>



<a name="221232246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221232246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221232246">(Dec 30 2020 at 18:00)</a>:</h4>
<p>The travis.yml config seems to just be invoking mdbook from the repo root...</p>



<a name="221233372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221233372" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221233372">(Dec 30 2020 at 18:15)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> I normally just comment out the <code>[output.linkcheck]</code> from book.toml when working locally.  I don't know how the <code>../../ci</code> relative path works on Travis, because it looks broken to me.</p>



<a name="221262467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck/near/221262467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/lintcheck.html#221262467">(Dec 31 2020 at 01:48)</a>:</h4>
<p>FWIW, I opened <a href="https://github.com/rust-lang/mdBook/pull/1418">https://github.com/rust-lang/mdBook/pull/1418</a> and <a href="https://github.com/rust-lang/rust/pull/80537">https://github.com/rust-lang/rust/pull/80537</a> after investigating the oddities with the weird <code>../../ci</code> relative path.  <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
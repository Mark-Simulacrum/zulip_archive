<html>
<head><meta charset="utf-8"><title>toolstate · t-compiler/wg-rustc-dev-guide · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/index.html">t-compiler/wg-rustc-dev-guide</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html">toolstate</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="193816855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193816855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193816855">(Apr 13 2020 at 20:23)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1380">@WG-rustc-dev-guide</span> so our toolstate seems to be in a constant state of breakage these days. The original intent of adding rustc-dev-guide to toolstate was to get more advanced warning that links are going to break soon and to have a way to track them back to the PRs that broke them</p>



<a name="193816965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193816965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193816965">(Apr 13 2020 at 20:24)</a>:</h4>
<p>However, we are seeing a lot of 429 errors from github and between that and caching and the fact that updating the submodule takes a long time sometimes, it's not clear that it's actually serving its purpose</p>



<a name="193816987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193816987" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193816987">(Apr 13 2020 at 20:24)</a>:</h4>
<p>So the question now is: should we remove/disable it?</p>



<a name="193817051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817051">(Apr 13 2020 at 20:25)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="120518">@Eric Huss</span> and <span class="user-mention" data-user-id="121055">@Pietro Albini</span> too (who have been involved in the past)</p>



<a name="193817524"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817524" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817524">(Apr 13 2020 at 20:30)</a>:</h4>
<p>we are checking the same in our ci, right?</p>



<a name="193817596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817596">(Apr 13 2020 at 20:30)</a>:</h4>
<p>sort of</p>



<a name="193817611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817611">(Apr 13 2020 at 20:30)</a>:</h4>
<p>We run the same linkchecker in our CI</p>



<a name="193817614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817614">(Apr 13 2020 at 20:30)</a>:</h4>
<p>maybe we should just update the submodule more frequently or at least close to the release and remove rustc-dev-guide from toolstate then?</p>



<a name="193817655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817655">(Apr 13 2020 at 20:31)</a>:</h4>
<p>But when we run in our CI it is because the book changed; when we run in toolstate it is because something else changed</p>



<a name="193817698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817698">(Apr 13 2020 at 20:31)</a>:</h4>
<p>We do run a cron job every day on travis</p>



<a name="193817882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817882" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817882">(Apr 13 2020 at 20:32)</a>:</h4>
<p>We could try making the linkcheck cache expire more quickly so that we hopefully catch links sooner</p>



<a name="193817934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193817934" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193817934">(Apr 13 2020 at 20:33)</a>:</h4>
<p>Btw, if we don't run toolstate, is there any good reason to have a submodule at all?</p>



<a name="193833352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193833352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193833352">(Apr 13 2020 at 23:11)</a>:</h4>
<p>Spurious and frequent toolstate change may also be noisy on other PRs :/ If we couldn't harden that, I'd +1 for removing/disabling.</p>



<a name="193863310"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193863310" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193863310">(Apr 14 2020 at 08:16)</a>:</h4>
<p>hmm, do you have examples of such failures?</p>



<a name="193863399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193863399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193863399">(Apr 14 2020 at 08:17)</a>:</h4>
<p>429 is github rate limiting us, we could implement a specialized version of linkchecker for github links that use the API to verify their existence (and with graphql that gives us basically infinite queries)</p>



<a name="193901228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193901228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193901228">(Apr 14 2020 at 14:01)</a>:</h4>
<p><span class="user-mention" data-user-id="121055">@Pietro Albini</span> this one: <a href="https://github.com/rust-lang/rust/pull/70873" title="https://github.com/rust-lang/rust/pull/70873">https://github.com/rust-lang/rust/pull/70873</a></p>



<a name="193901526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193901526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193901526">(Apr 14 2020 at 14:03)</a>:</h4>
<p><span class="user-mention silent" data-user-id="121055">Pietro Albini</span> <a href="#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/toolstate/near/193863399" title="#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/toolstate/near/193863399">said</a>:</p>
<blockquote>
<p>429 is github rate limiting us, we could implement a specialized version of linkchecker for github links that use the API to verify their existence (and with graphql that gives us basically infinite queries)</p>
</blockquote>
<p>works for me</p>



<a name="193901750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193901750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193901750">(Apr 14 2020 at 14:04)</a>:</h4>
<p>hmm, we have a lot of kinds of links though</p>



<a name="193901760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193901760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193901760">(Apr 14 2020 at 14:04)</a>:</h4>
<p>i.e. they're not all "PR 12345"</p>



<a name="193902585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193902585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Pietro Albini <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193902585">(Apr 14 2020 at 14:10)</a>:</h4>
<p>if y'all are already running linkcheck on the rustc dev guide repository I don't see much point in running it for every rustc PR tbh</p>



<a name="193905204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193905204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193905204">(Apr 14 2020 at 14:25)</a>:</h4>
<p>yeah, I feel it's an easier way to enhance rustc-dev-guide CI</p>



<a name="193933231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193933231" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193933231">(Apr 14 2020 at 17:45)</a>:</h4>
<p>I think almost all of the links are to various things on github, but they are all to github pages iiuc (mainly to the rustdocs for the compiler)</p>



<a name="193980881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/193980881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tshepang Lekhonkhobe <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#193980881">(Apr 15 2020 at 03:13)</a>:</h4>
<p>gh pages hosts compiler docs?</p>



<a name="194298805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/194298805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Paul Faria <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#194298805">(Apr 16 2020 at 12:56)</a>:</h4>
<p>I think quite a few are links to the code itself on gh. That was my experience when reviewing the waterfall of 429's when running locally.</p>



<a name="194316680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/194316680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#194316680">(Apr 16 2020 at 14:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119529">Tshepang Lekhonkhobe</span> <a href="#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/toolstate/near/193980881" title="#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/toolstate/near/193980881">said</a>:</p>
<blockquote>
<p>gh pages hosts compiler docs?</p>
</blockquote>
<p>I believe so, but I might be mixing things up... I think it goes through some weird mechanism to end up on docs.rlo, but I might be completely wrong... I would be pleasantly surprised if it was not so</p>



<a name="195786414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195786414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195786414">(Apr 30 2020 at 00:18)</a>:</h4>
<p>This is still a major annoyance...</p>



<a name="195786451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195786451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195786451">(Apr 30 2020 at 00:19)</a>:</h4>
<p>There is a spurious failure every day</p>



<a name="195894115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195894115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195894115">(Apr 30 2020 at 20:05)</a>:</h4>
<p>can't we disable from our current infraestructure and maybe have a more lightweight way of checking if links are working</p>



<a name="195895220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195895220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195895220">(Apr 30 2020 at 20:14)</a>:</h4>
<p>even maybe having a bot posting a message whenever there's something failing or something like that</p>



<a name="195898352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195898352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195898352">(Apr 30 2020 at 20:41)</a>:</h4>
<p>Umm... isn't that what toolstate is?</p>



<a name="195898407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195898407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195898407">(Apr 30 2020 at 20:41)</a>:</h4>
<p>I am starting to be strongly in favor of disabling toolstate, though</p>



<a name="195898424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195898424" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195898424">(Apr 30 2020 at 20:42)</a>:</h4>
<p>but I don't know what would be a better replacement</p>



<a name="195905716"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195905716" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195905716">(Apr 30 2020 at 21:43)</a>:</h4>
<p>yes but github pings really bother imo</p>



<a name="195905750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195905750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195905750">(Apr 30 2020 at 21:43)</a>:</h4>
<p>and you end being subscribed to issues</p>



<a name="195905767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195905767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195905767">(Apr 30 2020 at 21:43)</a>:</h4>
<p>opening a zulip topic without a ping or anything like that would bother less</p>



<a name="195905773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195905773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195905773">(Apr 30 2020 at 21:43)</a>:</h4>
<p>anyway +1 on disabling it</p>



<a name="195905789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195905789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195905789">(Apr 30 2020 at 21:43)</a>:</h4>
<p>I meant, whatever is ok in my opinion</p>



<a name="195905854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195905854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195905854">(Apr 30 2020 at 21:44)</a>:</h4>
<p>I'd prefer to avoid these github pings</p>



<a name="195918875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195918875" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195918875">(May 01 2020 at 00:23)</a>:</h4>
<p>I personally prefer gh, but I think I'm very much in the minority in this...</p>



<a name="195918889"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195918889" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195918889">(May 01 2020 at 00:23)</a>:</h4>
<p>ok, i will try to get around to making a PR to disable it at some point...</p>



<a name="195918915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195918915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195918915">(May 01 2020 at 00:24)</a>:</h4>
<p>(unless someone else wants to)</p>



<a name="195918967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/195918967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#195918967">(May 01 2020 at 00:24)</a>:</h4>
<p>do we want to replace it with something else? and should we keep the submodule around?</p>



<a name="198904715"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198904715" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198904715">(May 27 2020 at 15:02)</a>:</h4>
<p>Michael prepared a workaround on the mdbook-linkcheck to avoid 429 errors: <a href="https://github.com/rust-lang/rustc-dev-guide/pull/721#issuecomment-634642834">https://github.com/rust-lang/rustc-dev-guide/pull/721#issuecomment-634642834</a></p>



<a name="198946686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198946686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198946686">(May 27 2020 at 20:14)</a>:</h4>
<p>This seems like a worthwhile thing to try...</p>



<a name="198946750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198946750" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198946750">(May 27 2020 at 20:15)</a>:</h4>
<p>Indeed, it would be interesting if some sort of retry-with-backoff mechanism could be built in to linkcheck, but I guess that would be future work</p>



<a name="198946886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198946886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mark-i-m <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198946886">(May 27 2020 at 20:16)</a>:</h4>
<p>Is anyone up to make a PR for this?</p>



<a name="198950717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198950717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198950717">(May 27 2020 at 20:44)</a>:</h4>
<p>problems are due to github rate limit?</p>



<a name="198950821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198950821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198950821">(May 27 2020 at 20:45)</a>:</h4>
<p>have been playing with that and have code that reads the failures, sleep and retry</p>



<a name="198950838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198950838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198950838">(May 27 2020 at 20:45)</a>:</h4>
<p>but I'm not sure if that's what Michael has also done</p>



<a name="198950910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198950910" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198950910">(May 27 2020 at 20:46)</a>:</h4>
<p>in any case, if someone is up to work on a PR for this let me know and I can share some code</p>



<a name="198981545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198981545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Bryan <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198981545">(May 28 2020 at 04:24)</a>:</h4>
<p>The way linkcheck schedules the checking of web links is currently quite naive. It takes a stream of links and tries to resolve N links at a time. If it returns a non-successful status code (e.g. 4xx) then we'll assume it's broken and keep going (<a href="https://github.com/Michael-F-Bryan/linkcheck/blob/2f353b90e286cf6d881e42a5eb63e35c9ae096b2/src/validation/mod.rs#L62">https://github.com/Michael-F-Bryan/linkcheck/blob/2f353b90e286cf6d881e42a5eb63e35c9ae096b2/src/validation/mod.rs#L62</a>)</p>



<a name="198981632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198981632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Bryan <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198981632">(May 28 2020 at 04:26)</a>:</h4>
<p>I'd like to look into a smarter mechanism with things like retries or some sort of leaky bucket rate limiting mechanism which makes sure we don't hammer a single domain to rapidly</p>



<a name="198981695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate/near/198981695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Michael Bryan <a href="https://zulip-archive.rust-lang.org/stream/196385-t-compiler/wg-rustc-dev-guide/topic/toolstate.html#198981695">(May 28 2020 at 04:29)</a>:</h4>
<p>Mdbook-linkcheck also lets you attach headers to requests sent to certain domains, and the header itself can use environment variables... The thinking being you'd generate an API token for the CI server and that'd let you send more requests to the GitHub public site</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
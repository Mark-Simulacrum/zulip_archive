<html>
<head><meta charset="utf-8"><title>The stages in rustc-dev-guide are wrong · t-compiler/wg-rustc-dev-guide · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/index.html">t-compiler/wg-rustc-dev-guide</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html">The stages in rustc-dev-guide are wrong</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="204603480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603480">(Jul 21 2020 at 21:12)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> I figured out why so many people think <code>stage0</code> means beta:</p>
<p><a href="https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html?highlight=config.toml#bootstrapping">https://rustc-dev-guide.rust-lang.org/building/how-to-build-and-run.html?highlight=config.toml#bootstrapping</a></p>
<blockquote>
<p>Stage 0: the stage0 compiler is usually (you can configure x.py to use something else) the current beta rustc compiler</p>
</blockquote>



<a name="204603519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603519">(Jul 21 2020 at 21:13)</a>:</h4>
<p>I'll make a PR fixing it</p>



<a name="204603537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603537">(Jul 21 2020 at 21:13)</a>:</h4>
<p>I mean our terminology has been loose for ages</p>



<a name="204603649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603649">(Jul 21 2020 at 21:14)</a>:</h4>
<p>"the stage0 compiler" is technically ambiguous and could be used to mean "the compiler that compiles all of stage0"</p>



<a name="204603683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603683">(Jul 21 2020 at 21:14)</a>:</h4>
<p>rather than anything built at stage0</p>



<a name="204603762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603762">(Jul 21 2020 at 21:14)</a>:</h4>
<p>so it's not "simply wrong", it's misleadingly ambiguous :P</p>



<a name="204603788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603788">(Jul 21 2020 at 21:15)</a>:</h4>
<p>I mean, I would prefer it mean 'the thing I get when I run <code>x.py build --stage 0 src/rustc</code></p>



<a name="204603794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603794">(Jul 21 2020 at 21:15)</a>:</h4>
<p>if you go looking you'll probably find stuff like that everywhere</p>



<a name="204603821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603821">(Jul 21 2020 at 21:15)</a>:</h4>
<p>sure but that's not inherent in "stage N compiler"</p>



<a name="204603837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603837">(Jul 21 2020 at 21:15)</a>:</h4>
<p>you have to be more specific either way IMO</p>



<a name="204603847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603847">(Jul 21 2020 at 21:15)</a>:</h4>
<p>that's how people think of it though</p>



<a name="204603905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603905" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603905">(Jul 21 2020 at 21:16)</a>:</h4>
<p>"the compiler produced at/by X" vs "the compiler that compiles X"</p>



<a name="204603929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603929">(Jul 21 2020 at 21:16)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> it's not guaranteed which means we shouldn't use that phrasing IMO</p>



<a name="204603940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603940">(Jul 21 2020 at 21:16)</a>:</h4>
<p>at least not in documentation</p>



<a name="204603985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204603985" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204603985">(Jul 21 2020 at 21:17)</a>:</h4>
<p>some formulations just don't distinguish input from output clearly. and that's a "feature" of natural languages</p>



<a name="204604063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604063" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604063">(Jul 21 2020 at 21:18)</a>:</h4>
<p>I think we should clarify we mean 'the compiler used to build stage0' then</p>



<a name="204604068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604068" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604068">(Jul 21 2020 at 21:18)</a>:</h4>
<p>although I believe it's rather common for "the X Yer" to mean "the Y who Ys X" so the situation may be more ambiguous than you think</p>



<a name="204604076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604076">(Jul 21 2020 at 21:18)</a>:</h4>
<p>leaving it ambiguous almost seems malicious :P</p>



<a name="204604132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604132">(Jul 21 2020 at 21:19)</a>:</h4>
<p>I'd argue against even keeping the ambiguous phrasing unless it comes as a note that this may be how it's sometimes referred and a warning that it's ambiguous</p>



<a name="204604182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604182">(Jul 21 2020 at 21:19)</a>:</h4>
<p>an example for what I was saying above: "the truck driver" means "the driver who drives the truck"</p>



<a name="204604301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604301">(Jul 21 2020 at 21:20)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> specifically what I think would be ideal is that the main language we use is unambiguous and anything else is an "aside" rather than go "ambiguous thing (i.e. unambiguous explanation)"</p>



<a name="204604316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604316">(Jul 21 2020 at 21:21)</a>:</h4>
<p>well the docs certainly aren't using it in that sense</p>



<a name="204604324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604324" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604324">(Jul 21 2020 at 21:21)</a>:</h4>
<p>because they mention 'stage3'</p>



<a name="204604330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604330">(Jul 21 2020 at 21:21)</a>:</h4>
<blockquote>
<p>(Optional) Stage 3: to sanity check our new compiler, we can build the libraries with the stage2 compiler. The result ought to be identical to before, unless something has broken.</p>
</blockquote>



<a name="204604347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604347">(Jul 21 2020 at 21:21)</a>:</h4>
<p>so they're using it in both senses :)</p>



<a name="204604367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204604367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204604367">(Jul 21 2020 at 21:21)</a>:</h4>
<p>or are confused. or both!</p>



<a name="204617005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204617005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204617005">(Jul 21 2020 at 23:58)</a>:</h4>
<p>Could someone move this topic to wg-rustc-dev-guide? Maybe <span class="user-mention" data-user-id="116122">@simulacrum</span> ?</p>



<a name="204617022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204617022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204617022">(Jul 21 2020 at 23:58)</a>:</h4>
<p>This topic was moved here from <a class="stream-topic" data-stream-id="233931" href="/#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong">#t-compiler/major changes &gt; The stages in rustc-dev-guide are wrong</a> by <span class="user-mention silent" data-user-id="116122">simulacrum</span></p>



<a name="204617231"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204617231" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204617231">(Jul 22 2020 at 00:01)</a>:</h4>
<p>actually it looks like the info is correct in <code># Stages of Bootstrap</code></p>



<a name="204617252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204617252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204617252">(Jul 22 2020 at 00:02)</a>:</h4>
<p>in the wall of text nobody reads :P</p>



<a name="204617414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204617414" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204617414">(Jul 22 2020 at 00:04)</a>:</h4>
<p>what do people think about removing the mention of stages in 'how to build in run' almost entirely, linking instead to # Stages of Bootstrap, and then rewriting the wall of text?</p>



<a name="204617815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204617815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204617815">(Jul 22 2020 at 00:11)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1380">@WG-rustc-dev-guide</span> <span aria-label="innocent" class="emoji emoji-1f607" role="img" title="innocent">:innocent:</span></p>



<a name="204618760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204618760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204618760">(Jul 22 2020 at 00:27)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> it gets worse, what does <code>// ignore-stage1</code> mean? according to the current guide it means "don't build with the stage1 compiler", but the guide actually referring to the stage0 compiler here. Is the syntax wrong, should it be <code>// ignore-stage0</code>? Or is it referring to the compiler it's <em>linked</em> to?</p>



<a name="204618883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204618883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204618883">(Jul 22 2020 at 00:30)</a>:</h4>
<p>ok yes, <code>Config</code> in <code>compiletest::common</code> says it's the stage <em>being built</em></p>



<a name="204619316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619316">(Jul 22 2020 at 00:38)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> well, at least this one is easy: a <code>// ignore-stage1</code> test doesn't get tested when  you do <code>./x.py test --stage 1</code></p>



<a name="204619342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619342" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619342">(Jul 22 2020 at 00:39)</a>:</h4>
<p>does <code>test --stage 1</code> run using <code>stage1</code> rustc?</p>



<a name="204619358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619358" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619358">(Jul 22 2020 at 00:39)</a>:</h4>
<p>err sorry - does it run using the second rustc you build (<code>stage1</code>) or the first (<code>stage0</code>)?</p>



<a name="204619426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619426">(Jul 22 2020 at 00:40)</a>:</h4>
<p>according to <code>--dry-run -v</code> it uses stage1</p>



<a name="204619442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619442">(Jul 22 2020 at 00:41)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> it's what you're supposed to use for dev. it only depends on building rustc once</p>



<a name="204619457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619457">(Jul 22 2020 at 00:41)</a>:</h4>
<p>it's the counterpart to <code>./x.py build --stage 1 src/libstd</code></p>



<a name="204619460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619460" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619460">(Jul 22 2020 at 00:41)</a>:</h4>
<p>oh that's confusing <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="204619469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619469">(Jul 22 2020 at 00:41)</a>:</h4>
<p>although it probably only works for some test suites</p>



<a name="204619470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619470">(Jul 22 2020 at 00:41)</a>:</h4>
<p>so it does <em>less</em> work than <code>build --stage 1</code>?</p>



<a name="204619494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619494">(Jul 22 2020 at 00:42)</a>:</h4>
<p>well, depends whether you let it run "fulldeps" stuff or not I guess</p>



<a name="204619526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619526" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619526">(Jul 22 2020 at 00:42)</a>:</h4>
<p>so I should've been more precise</p>



<a name="204619536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619536">(Jul 22 2020 at 00:42)</a>:</h4>
<p>what are fulldeps?</p>



<a name="204619542"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619542" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619542">(Jul 22 2020 at 00:42)</a>:</h4>
<p><code>./x.py test --stage 1 src/test/ui</code> only depends on <code>./x.py build --stage 1 src/libstd</code></p>



<a name="204619552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619552" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619552">(Jul 22 2020 at 00:43)</a>:</h4>
<p>(I'd say <code>src/libtest</code> for accuraccy but that's kinda folded into <code>src/libstd</code> nowadays :P)</p>



<a name="204619571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619571">(Jul 22 2020 at 00:43)</a>:</h4>
<p>fulldeps is mostly "this needs to use <code>librustc_*</code> or some compiler dependency"</p>



<a name="204619578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619578" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619578">(Jul 22 2020 at 00:43)</a>:</h4>
<p>got it, they need to be linked to the compiler</p>



<a name="204619588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619588" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619588">(Jul 22 2020 at 00:43)</a>:</h4>
<p>are those <em>built with</em> stage1 or only <em>linked to</em> it?</p>



<a name="204619635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619635">(Jul 22 2020 at 00:44)</a>:</h4>
<p>to be clear, <code>test --stage N</code> will never look at <code>stageN+1</code> anything</p>



<a name="204619653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619653">(Jul 22 2020 at 00:44)</a>:</h4>
<p>right, but <code>stage1</code> is the second compiler built <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="204619660"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619660" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619660">(Jul 22 2020 at 00:44)</a>:</h4>
<p>"built with stage1" is IMO ambiguous. there's building <em>at</em> or <em>during</em> a stage</p>



<a name="204619672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619672" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619672">(Jul 22 2020 at 00:44)</a>:</h4>
<p>when I say 'built with stage1' assume I mean 'stage1 rustc'</p>



<a name="204619684"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619684" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619684">(Jul 22 2020 at 00:45)</a>:</h4>
<p>"stage1 rustc" is ambiguous</p>



<a name="204619689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619689">(Jul 22 2020 at 00:45)</a>:</h4>
<p>in that it's not clear you mean input or output</p>



<a name="204619690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619690">(Jul 22 2020 at 00:45)</a>:</h4>
<p>ugh not this again <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="204619695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619695">(Jul 22 2020 at 00:45)</a>:</h4>
<p>I'm very serious</p>



<a name="204619700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619700">(Jul 22 2020 at 00:45)</a>:</h4>
<p>I mean the thing made by <code>build --stage 1 src/rustc</code></p>



<a name="204619702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619702">(Jul 22 2020 at 00:45)</a>:</h4>
<p>yes I know</p>



<a name="204619704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619704">(Jul 22 2020 at 00:45)</a>:</h4>
<p>that's how we got into this mess in the first place</p>



<a name="204619726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619726">(Jul 22 2020 at 00:45)</a>:</h4>
<p>okay so that's output. the libraries it's made up of are used only by fulldeps tests</p>



<a name="204619732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619732" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619732">(Jul 22 2020 at 00:45)</a>:</h4>
<p>the actual <em>executable</em> is never used</p>



<a name="204619788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619788">(Jul 22 2020 at 00:46)</a>:</h4>
<p>got it, so stage0 compiles the fulldeps tests and links them to stage1 (numbering by outputs)</p>



<a name="204619795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619795">(Jul 22 2020 at 00:46)</a>:</h4>
<p>thanks :)</p>



<a name="204619803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619803">(Jul 22 2020 at 00:46)</a>:</h4>
<p>i.e. the executable that ends up in <code>stage2/bin/rustc</code> will never be executed by pretty much any commands that contain <code>--stage 1</code></p>



<a name="204619812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619812" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619812">(Jul 22 2020 at 00:46)</a>:</h4>
<p>at most it will be linked together</p>



<a name="204619833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619833">(Jul 22 2020 at 00:47)</a>:</h4>
<p>btw if you want to be precise you can just say <code>stage1-rustc</code></p>



<a name="204619842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619842" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619842">(Jul 22 2020 at 00:47)</a>:</h4>
<p>because I know exactly what that means</p>



<a name="204619850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619850" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619850">(Jul 22 2020 at 00:47)</a>:</h4>
<p>in prose it would need a few more words than that though :P</p>



<a name="204619912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619912">(Jul 22 2020 at 00:48)</a>:</h4>
<p>ah nice, that's helpful</p>



<a name="204619914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619914">(Jul 22 2020 at 00:48)</a>:</h4>
<p>anyway yeah most test suites only depend on <code>stageN-std</code> (for <code>x.py test --stage N</code>), and I wish we pushed towards making <code>x.py test</code> do what I do with a very long command</p>



<a name="204619924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619924">(Jul 22 2020 at 00:48)</a>:</h4>
<p>you mean have <code>src/test/ui</code> be the default filter?</p>



<a name="204619930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619930">(Jul 22 2020 at 00:48)</a>:</h4>
<p>I wish =))</p>



<a name="204619940"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619940" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619940">(Jul 22 2020 at 00:49)</a>:</h4>
<p><code>./x.py test --no-fail-fast --stage 1 src/test/{rustdoc,rustdoc-ui,mir-opt,codegen,codegen-units,incremental,pretty,debuginfo,compile-fail,run-make,ui}</code></p>



<a name="204619946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619946">(Jul 22 2020 at 00:49)</a>:</h4>
<p>and that's missing tidy I guess</p>



<a name="204619959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619959">(Jul 22 2020 at 00:49)</a>:</h4>
<p><em>oof</em></p>



<a name="204619969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619969">(Jul 22 2020 at 00:49)</a>:</h4>
<p><code>--no-fail-fast</code> means one test suite having an error won't stop the whole thing (I basically want to treat it like a monolith)</p>



<a name="204619976"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619976" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619976">(Jul 22 2020 at 00:49)</a>:</h4>
<p>I don't know that that should be the default</p>



<a name="204619992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204619992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204619992">(Jul 22 2020 at 00:49)</a>:</h4>
<p>(and anyway we're getting off-topic, we should move back to the MCP)</p>



<a name="204620100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620100" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620100">(Jul 22 2020 at 00:51)</a>:</h4>
<p>anyway my point is, the "correct" maximal filter that doesn't need to start building <code>stage1-rustc</code>, is long</p>



<a name="204620112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620112" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620112">(Jul 22 2020 at 00:51)</a>:</h4>
<p>and I wish fulldeps tests were "optional"</p>



<a name="204620117"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620117" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620117">(Jul 22 2020 at 00:51)</a>:</h4>
<p>also I'm not running any libstd tests as you can see</p>



<a name="204620131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620131">(Jul 22 2020 at 00:51)</a>:</h4>
<p>(and I probably should)</p>



<a name="204620137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620137">(Jul 22 2020 at 00:51)</a>:</h4>
<p>I think there's very few people running the full (-fulldeps -std) test suite though</p>



<a name="204620181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620181" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620181">(Jul 22 2020 at 00:52)</a>:</h4>
<p>that takes like 15 minutes on my machine</p>



<a name="204620188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620188">(Jul 22 2020 at 00:52)</a>:</h4>
<p>yeah but we don't want people to run <em>just</em> UI</p>



<a name="204620192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620192">(Jul 22 2020 at 00:52)</a>:</h4>
<p>because there's a lot of important stuff that's relatively tiny compared to <code>src/test/ui</code></p>



<a name="204620196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620196">(Jul 22 2020 at 00:52)</a>:</h4>
<p>why not? CI will catch the rest</p>



<a name="204620198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620198" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620198">(Jul 22 2020 at 00:52)</a>:</h4>
<p>I mean, CI catches it, but it can be a waste of time</p>



<a name="204620237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620237">(Jul 22 2020 at 00:53)</a>:</h4>
<p>it just sucks that people have to either waste a lot of time or do the silly thing I did</p>



<a name="204620254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620254">(Jul 22 2020 at 00:53)</a>:</h4>
<p>also, like, that's my build command. I almost never run any command other than that</p>



<a name="204620257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620257" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620257">(Jul 22 2020 at 00:53)</a>:</h4>
<p>I feel like it's pretty uncommon to have your change cause <em>unrelated</em> failures <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="204620374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620374">(Jul 22 2020 at 00:55)</a>:</h4>
<p>ugh even the wall of text is wrong lol</p>



<a name="204620375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620375">(Jul 22 2020 at 00:55)</a>:</h4>
<p>but that's why we have tests :P</p>



<a name="204620431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620431">(Jul 22 2020 at 00:56)</a>:</h4>
<blockquote>
<p>Note that the convention x.py uses is that:</p>
</blockquote>
<ul>
<li>A "stage N artifact" is an artifact that is produced by the stage N compiler.</li>
<li>The "stage (N+1) compiler" is assembled from "stage N artifacts".</li>
<li>A --stage N flag means build with stage N.</li>
</ul>



<a name="204620447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620447">(Jul 22 2020 at 00:56)</a>:</h4>
<p>only the third point is arguably wrong</p>



<a name="204620464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620464">(Jul 22 2020 at 00:56)</a>:</h4>
<p>like it's using "stage N compiler" to mean "the compiler that compiles stage N"</p>



<a name="204620488"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620488" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620488">(Jul 22 2020 at 00:57)</a>:</h4>
<p>that's a really confusing way to word it though :/</p>



<a name="204620500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620500" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620500">(Jul 22 2020 at 00:57)</a>:</h4>
<p>and I think the third point shows that's not the intended use in the first two points</p>



<a name="204620502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620502">(Jul 22 2020 at 00:57)</a>:</h4>
<p>"build with stage N" OTOH doesn't feel like it can be wrangled into meaning anything without conflating "stage N" with "stage N compiler"</p>



<a name="204620513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620513" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620513">(Jul 22 2020 at 00:57)</a>:</h4>
<p>errr</p>



<a name="204620552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620552" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620552">(Jul 22 2020 at 00:58)</a>:</h4>
<p>sorry, half of that sentence lost its meaning</p>



<a name="204620593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620593" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620593">(Jul 22 2020 at 00:59)</a>:</h4>
<p>the convention I'm going to use is 'stageN rustc' belongs to stageN</p>



<a name="204620598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620598">(Jul 22 2020 at 00:59)</a>:</h4>
<p>does that sound reasonable and accurate?</p>



<a name="204620604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620604">(Jul 22 2020 at 00:59)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> basically I doubt anything is referring to <code>stageN-rustc</code> by "stage N compiler"</p>



<a name="204620613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620613">(Jul 22 2020 at 00:59)</a>:</h4>
<p>maybe "stage N rustc" but not "compiler"</p>



<a name="204620624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620624">(Jul 22 2020 at 00:59)</a>:</h4>
<p>the distinction matters even if it's technically ambiguous and I think it should be replaced</p>



<a name="204620633"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620633" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620633">(Jul 22 2020 at 01:00)</a>:</h4>
<p>well I'm replacing it now :P</p>



<a name="204620677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620677">(Jul 22 2020 at 01:00)</a>:</h4>
<p>(it matters to picking what to replace it with without tearing everything down and rebuilding from scratch)</p>



<a name="204620697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620697">(Jul 22 2020 at 01:00)</a>:</h4>
<p>basically just mass-replace "stage N compiler" with "the compiler used to compile stage N" and then rephrase where possible</p>



<a name="204620701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620701" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620701">(Jul 22 2020 at 01:00)</a>:</h4>
<p>we can keep all the same behavior and numbering while changing the terminology in the guide, and I think we should</p>



<a name="204620717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620717" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620717">(Jul 22 2020 at 01:00)</a>:</h4>
<p>don't just shift numbers around or change "N" to "N-1" because that doesn't remove the ambiguity</p>



<a name="204620737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620737">(Jul 22 2020 at 01:01)</a>:</h4>
<p>here I'll make a WIP PR so you can see the changes</p>



<a name="204620742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620742">(Jul 22 2020 at 01:01)</a>:</h4>
<p>(it's not just N -&gt; N-1)</p>



<a name="204620753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620753">(Jul 22 2020 at 01:01)</a>:</h4>
<p>I would also not use "stageN rustc" to refer to <code>stageN-rustc</code></p>



<a name="204620769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620769">(Jul 22 2020 at 01:01)</a>:</h4>
<p>like I would use more words just so it's not misunderstandable as <code>stageN/bin/rustc</code></p>



<a name="204620828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204620828" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204620828">(Jul 22 2020 at 01:02)</a>:</h4>
<p>sure, I'm doing that</p>



<a name="204621098"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204621098" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204621098">(Jul 22 2020 at 01:07)</a>:</h4>
<p><span class="user-mention" data-user-id="119009">@eddyb</span> <a href="https://github.com/rust-lang/rustc-dev-guide/pull/807">https://github.com/rust-lang/rustc-dev-guide/pull/807</a></p>



<a name="204622332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622332">(Jul 22 2020 at 01:30)</a>:</h4>
<p>I guess the problem with my wording is there's not a simple word for 'the compiler used to compile stage N'</p>



<a name="204622351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622351" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622351">(Jul 22 2020 at 01:31)</a>:</h4>
<p>but I still think that's better than having any two of 'stage0 compiler', 'stage0 rustc', or <code>stage0-rustc</code> be different</p>



<a name="204622706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622706" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622706">(Jul 22 2020 at 01:40)</a>:</h4>
<p>you don't need to use single words</p>



<a name="204622711"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622711" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622711">(Jul 22 2020 at 01:40)</a>:</h4>
<p>this is documentation, it can be long-winded</p>



<a name="204622713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622713">(Jul 22 2020 at 01:40)</a>:</h4>
<p>anyway I left my own wall of text</p>



<a name="204622718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622718" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622718">(Jul 22 2020 at 01:40)</a>:</h4>
<p>I really need to not get too distracted by this though :(</p>



<a name="204622721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622721">(Jul 22 2020 at 01:40)</a>:</h4>
<p>I could spend weeks on this stuff</p>



<a name="204622724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204622724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204622724">(Jul 22 2020 at 01:41)</a>:</h4>
<p>just workshopping phrasings and things</p>



<a name="204623131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623131">(Jul 22 2020 at 01:51)</a>:</h4>
<p>I don't want to say 'the compiler that's part of stageN' every  time I currently use 'stage N compiler' though :/</p>



<a name="204623135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623135" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623135">(Jul 22 2020 at 01:51)</a>:</h4>
<p>like that's fine the first time but after the 5th time your eyes just glaze over</p>



<a name="204623141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623141">(Jul 22 2020 at 01:51)</a>:</h4>
<p>maybe <span class="user-mention" data-user-id="116122">@simulacrum</span> has ideas since he works a lot on bootstrap</p>



<a name="204623197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623197" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623197">(Jul 22 2020 at 01:52)</a>:</h4>
<p>/me has never had much success with explaining stages</p>



<a name="204623220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623220">(Jul 22 2020 at 01:53)</a>:</h4>
<p>well, if you could glance over <a href="https://github.com/rust-lang/rustc-dev-guide/pull/807">https://github.com/rust-lang/rustc-dev-guide/pull/807</a> anyway I'd appreciate it :)</p>



<a name="204623272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623272">(Jul 22 2020 at 01:54)</a>:</h4>
<p>really what I want to do is make <code>stage0-rustc</code>, 'stage0 rustc' and 'stage0 compiler' mean the same thing</p>



<a name="204623275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623275">(Jul 22 2020 at 01:54)</a>:</h4>
<p>anything else is just too confusing</p>



<a name="204623377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623377">(Jul 22 2020 at 01:56)</a>:</h4>
<p>or I guess the other alternative is to rename <code>build/stageN</code> to <code>build/stageN-compiler</code>, so that you can see visually 'rustc' and 'compiler' means different things</p>



<a name="204623380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204623380" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204623380">(Jul 22 2020 at 01:56)</a>:</h4>
<p>but that still seems confusing to me</p>



<a name="204624136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204624136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204624136">(Jul 22 2020 at 02:13)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> you can't <em>make</em> "stage N compiler" mean something</p>



<a name="204624182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204624182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204624182">(Jul 22 2020 at 02:14)</a>:</h4>
<p>it's going to confuse <em>someone</em> as long as we use fundamentally ambiguous language</p>



<a name="204624189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204624189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204624189">(Jul 22 2020 at 02:14)</a>:</h4>
<p>you can only assume it means something and hope the reader picks up on it or has it memorized</p>



<a name="204625020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625020">(Jul 22 2020 at 02:36)</a>:</h4>
<blockquote>
<p>it's going to confuse <em>someone</em> as long as we use fundamentally ambiguous language</p>
</blockquote>
<p>But people really want to say 'stageN compiler', whether they mean it as the input or output :/</p>
<p>Maybe we can instead disambiguate what <code>--stage</code> means? <code>--stage-artifact</code> implies that you're building the artifacts <em>from</em> <code>build/stageN</code></p>



<a name="204625163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625163">(Jul 22 2020 at 02:41)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> people saying it in informal conversation doesn't mean we have to use it in the docs</p>



<a name="204625243"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625243" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625243">(Jul 22 2020 at 02:43)</a>:</h4>
<p>Ok, how about this: we decide against ascribing meaning to 'stage' at all and only describe things in terms of the build directories <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="204625247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625247" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625247">(Jul 22 2020 at 02:43)</a>:</h4>
<p>that could work</p>



<a name="204625248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625248">(Jul 22 2020 at 02:43)</a>:</h4>
<p>(only half kidding)</p>



<a name="204625252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625252">(Jul 22 2020 at 02:43)</a>:</h4>
<p>although it might be useful to rename <code>stageN</code> dirs to <code>stageN-sysroot</code></p>



<a name="204625260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625260" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625260">(Jul 22 2020 at 02:43)</a>:</h4>
<p>or my favorite, <code>stage(N-1)toN</code></p>



<a name="204625307"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625307" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625307">(Jul 22 2020 at 02:44)</a>:</h4>
<p>Sure, if 'stage' doesn't have a meaning it makes sense not to have a directory with that name either</p>



<a name="204625401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625401" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625401">(Jul 22 2020 at 02:45)</a>:</h4>
<p><code>rustc0/release/rustc</code> getting linked into <code>sysroot1/bin/rustc</code>,</p>



<a name="204625408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625408">(Jul 22 2020 at 02:45)</a>:</h4>
<p>actually this might be closer to what GCC builds do lol</p>



<a name="204625415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625415">(Jul 22 2020 at 02:45)</a>:</h4>
<p>So <code>build --stage N</code> means 'use <code>build/stageN</code> to create <code>build/stageN-component</code>'</p>



<a name="204625453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625453">(Jul 22 2020 at 02:46)</a>:</h4>
<p>(in terms of just adding numbers or letters to things instead of something more verbose)</p>



<a name="204625462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625462" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625462">(Jul 22 2020 at 02:46)</a>:</h4>
<p>This doesn't sound <em>too</em> bad</p>



<a name="204625470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625470">(Jul 22 2020 at 02:46)</a>:</h4>
<p>we could also use "toolchain" instead of "sysroot"</p>



<a name="204625473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625473" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625473">(Jul 22 2020 at 02:47)</a>:</h4>
<p>Yeah I like toolchain</p>



<a name="204625481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625481">(Jul 22 2020 at 02:47)</a>:</h4>
<p>For analogy with <code>rustup toolchain link</code></p>



<a name="204625485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625485">(Jul 22 2020 at 02:47)</a>:</h4>
<p>right</p>



<a name="204625578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625578" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625578">(Jul 22 2020 at 02:49)</a>:</h4>
<p>But now <code>build --stage N</code> means use <code>stageN-toolchain</code> to build stageN-component which is confusing again :/</p>



<a name="204625623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625623">(Jul 22 2020 at 02:50)</a>:</h4>
<p>It seems like you should have the component already</p>



<a name="204625648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625648">(Jul 22 2020 at 02:50)</a>:</h4>
<p>Oh wait I confused myself - stage1 libstd <em>is</em> part of the toolchain for stage1-toolchain</p>



<a name="204625665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625665">(Jul 22 2020 at 02:51)</a>:</h4>
<p>Otherwise the stage1 rustc can't build programs that use std</p>



<a name="204625679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625679">(Jul 22 2020 at 02:51)</a>:</h4>
<p>And now the only thing confusing is <code>build --stage N src/rustc</code></p>



<a name="204625683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204625683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204625683">(Jul 22 2020 at 02:51)</a>:</h4>
<p>Well, I guess it's an improvement</p>



<a name="204626467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204626467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204626467">(Jul 22 2020 at 03:11)</a>:</h4>
<p>described this in more detail here: <a href="https://github.com/rust-lang/rustc-dev-guide/pull/807#issuecomment-662216183">https://github.com/rust-lang/rustc-dev-guide/pull/807#issuecomment-662216183</a></p>



<a name="204626724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204626724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204626724">(Jul 22 2020 at 03:17)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I have a PR for you that doesn't require thinking about stages :P <a href="https://github.com/rust-lang/rustc-dev-guide/pull/808">https://github.com/rust-lang/rustc-dev-guide/pull/808</a></p>



<a name="204639837"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204639837" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204639837">(Jul 22 2020 at 08:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/196385-t-compiler.2Fwg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong/near/204625648">said</a>:</p>
<blockquote>
<p>Oh wait I confused myself - stage1 libstd <em>is</em> part of the toolchain for stage1-toolchain</p>
</blockquote>
<p>eh I think more like it's made available through the sysroot, just to simplify the build process. we could probably do something else instead</p>



<a name="204664534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204664534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204664534">(Jul 22 2020 at 13:27)</a>:</h4>
<p>I'm just trying to document what we currently have :/</p>



<a name="204664549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The%20stages%20in%20rustc-dev-guide%20are%20wrong/near/204664549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/196385-t-compiler/wg-rustc-dev-guide/topic/The.20stages.20in.20rustc-dev-guide.20are.20wrong.html#204664549">(Jul 22 2020 at 13:27)</a>:</h4>
<p>do you have a suggestion that's less confusing?</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
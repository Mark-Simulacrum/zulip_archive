<html>
<head><meta charset="utf-8"><title>#90286 regression: rustc suggests `.as_ref()` at incorrect … · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html">#90286 regression: rustc suggests `.as_ref()` at incorrect …</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="259030612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259030612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259030612">(Oct 25 2021 at 22:44)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/90286">#90286</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="259176447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259176447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259176447">(Oct 26 2021 at 23:35)</a>:</h4>
<p>I'd say <code>P-high</code>.</p>



<a name="259176585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259176585" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259176585">(Oct 26 2021 at 23:36)</a>:</h4>
<p>It seems likely that the change causing this regression <a href="https://github.com/rust-lang/rust/issues/90286#issuecomment-952409369">significantly regressed debuginfo</a>, and some of the new spans are IMO <a href="https://github.com/rust-lang/rust/issues/90286#issuecomment-952407320">very confusing</a>.</p>



<a name="259176612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259176612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259176612">(Oct 26 2021 at 23:37)</a>:</h4>
<p>(Note that this is a stable-to-beta [1.57.0] regression.)</p>



<a name="259202833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259202833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259202833">(Oct 27 2021 at 07:43)</a>:</h4>
<p>after staring for a while at the wrong suggestion, I can't really decide if I would assign P-high or p-medium</p>



<a name="259202912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259202912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259202912">(Oct 27 2021 at 07:44)</a>:</h4>
<p>if no one else chimes in with further opinions, I'll assign P-high</p>



<a name="259298905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259298905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259298905">(Oct 27 2021 at 20:06)</a>:</h4>
<p>The reason I said <code>P-high</code> is that I think beginners (and experienced users too) are fairly likely to run into this suggestion, and it suggesting invalid code could be extremely confusing.</p>



<a name="259376559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2390286%20regression%3A%20rustc%20suggests%20%60.as_ref%28%29%60%20at%20incorrect%20%E2%80%A6/near/259376559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2390286.20regression.3A.20rustc.20suggests.20.60.2Eas_ref().60.20at.20incorrect.20.E2.80.A6.html#259376559">(Oct 28 2021 at 11:56)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/90286">#90286</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
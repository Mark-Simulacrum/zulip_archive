<html>
<head><meta charset="utf-8"><title>#91633 ICE for broken MIR in 1.57.0, beta and nightly · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html">#91633 ICE for broken MIR in 1.57.0, beta and nightly</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="266132001"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266132001" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266132001">(Dec 26 2021 at 22:59)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/91633">#91633</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="266167163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266167163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266167163">(Dec 27 2021 at 11:56)</a>:</h4>
<p>Another case of an ICE instead of printing the error. By reading <a href="https://github.com/rust-lang/rust/issues/91633#issuecomment-988321976">this comment</a>, I get the idea that it's a regression due to a new behaviour introduced long ago.</p>
<p>I think perhaps <code>P-medium</code> or since it's always been there maybe even less?</p>



<a name="266230132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266230132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266230132">(Dec 28 2021 at 04:29)</a>:</h4>
<p>I'd go with <code>P-medium</code> on general principle.</p>



<a name="266230223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266230223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266230223">(Dec 28 2021 at 04:31)</a>:</h4>
<p>It's an ICE before an error is generated on code that isn't obviously invalid.</p>



<a name="266243520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266243520" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266243520">(Dec 28 2021 at 09:11)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/91633">#91633</a>'s prioritization request has been removed.</p>



<a name="266301881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266301881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266301881">(Dec 28 2021 at 23:35)</a>:</h4>
<p>Sorry, I've been busy so I haven't had the time to chime in.<br>
The error has been around for a while, but while it was weird to hit in the past (no need to write <code>where [T] : Index...</code> bounds before), I believe that nowadays it will be a more recurring error: while there was no real reason to write such a bound before, now there is, given the possibility to write custom <code>Index&lt;MyIdx&gt;</code> impls for <code>[T]</code>. <strong>This in turn, makes <code>usize</code> indexing impossible for <code>[T]</code></strong> (inherent indexing operation shadowed by that of the trait) <strong>which is what leads to ppl writing that bound</strong> (the <code>where [T] : Index&lt;usize&gt;</code>, expressing "where <code>[T]</code> can be indexed by a <code>usize</code> <em>and I don't care what the return type is</em>". Granted, I showcased a "nicer ice error msg" by providing that <code>U</code> name for the indexing operation's output, but even then, <code>U</code>, or the unnamed type, should just be assumed to be <code>T</code>, <strong>and cause no error</strong> (not even a compiler error, I mean). <em>The fact it ices is thus genuinely concerning</em>.</p>
<p>I think something between medium and high makes sense, so there is no need, necessarily, to change it, but I just wanted to make sure that the idea that this is a genuine "valid code"-hindering concern, one which will happen, 100% of the time, every time somebody tries to implement their custom indexing for slices (which is the very rare but not unheard of thing).</p>



<a name="266370886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266370886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266370886">(Dec 29 2021 at 19:12)</a>:</h4>
<p><span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span> thank you so much for stopping by and providing this great explaination!</p>



<a name="266406980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391633%20ICE%20for%20broken%20MIR%20in%201.57.0%2C%20beta%20and%20nightly/near/266406980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391633.20ICE.20for.20broken.20MIR.20in.201.2E57.2E0.2C.20beta.20and.20nightly.html#266406980">(Dec 30 2021 at 06:41)</a>:</h4>
<p>Thank you people for taking care of all these prioritizations <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
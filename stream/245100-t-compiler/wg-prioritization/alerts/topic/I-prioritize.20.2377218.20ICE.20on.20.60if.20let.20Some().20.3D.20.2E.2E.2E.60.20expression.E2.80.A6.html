<html>
<head><meta charset="utf-8"><title>I-prioritize #77218 ICE on `if let Some() = ...` expression… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html">I-prioritize #77218 ICE on `if let Some() = ...` expression…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="211359153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359153">(Sep 26 2020 at 13:03)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/77218">#77218</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="211359268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359268">(Sep 26 2020 at 13:06)</a>:</h4>
<p>Looks <code>P-high</code> to me, to me it seems like there could be something serious going wrong here</p>



<a name="211359274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359274">(Sep 26 2020 at 13:06)</a>:</h4>
<p>Agree. It's also a regression from stable to nightly</p>



<a name="211359647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359647">(Sep 26 2020 at 13:17)</a>:</h4>
<p>The code shouldn’t compile though, right?</p>



<a name="211359658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359658">(Sep 26 2020 at 13:17)</a>:</h4>
<p>No it shouldn't, since the <code>let</code> is missing.<br>
If you compile on stable, it will report a normal error</p>



<a name="211359699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359699">(Sep 26 2020 at 13:18)</a>:</h4>
<p>And on nightly there’s no error before the ICE?</p>



<a name="211359701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359701">(Sep 26 2020 at 13:18)</a>:</h4>
<p>no</p>



<a name="211359703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359703" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359703">(Sep 26 2020 at 13:18)</a>:</h4>
<p>Right</p>



<a name="211359718"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359718" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359718">(Sep 26 2020 at 13:19)</a>:</h4>
<p>+1 for <code>P-high</code> as a fairly bad diagnostic regression</p>



<a name="211359760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359760">(Sep 26 2020 at 13:20)</a>:</h4>
<p>I wonder if we could minimize the example further</p>



<a name="211359780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359780">(Sep 26 2020 at 13:21)</a>:</h4>
<p>I tried to, but I think it has something to do with the lifetimes because my code failed normally without the lifetimes and structs</p>



<a name="211359795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359795">(Sep 26 2020 at 13:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230287">Stu</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6/near/211359780">said</a>:</p>
<blockquote>
<p>I tried to, but I think it has something to do with the lifetimes because my code failed normally without the lifetimes and structs</p>
</blockquote>
<p>hmm, let me look at this again in this case</p>



<a name="211359797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359797">(Sep 26 2020 at 13:21)</a>:</h4>
<p>Sounds plausible</p>



<a name="211359843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359843" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359843">(Sep 26 2020 at 13:22)</a>:</h4>
<p>I haven't really tried to minimize it, so go ahead and try yourself</p>



<a name="211359850"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211359850" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211359850">(Sep 26 2020 at 13:22)</a>:</h4>
<p><span class="user-mention" data-user-id="216206">@lcnr</span> Do you think you know the culprit? Or should we go ahead and ping cleanup for bisection?</p>



<a name="211360234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360234" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360234">(Sep 26 2020 at 13:32)</a>:</h4>
<p>I have a guess, but still think bisection is useful here</p>



<a name="211360242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Gill <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360242">(Sep 26 2020 at 13:32)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">LeSeulArtichaut</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6/near/211359850">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="216206">lcnr</span> Do you think you know the culprit? Or should we go ahead and ping cleanup for bisection?</p>
</blockquote>
<p>Currently running a bisection and am getting used to the tool as I am new to it. Would this case need any more config than running it raw against the code produced in this issue - due to if you build on stable it'll error out normally?</p>



<a name="211360246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360246">(Sep 26 2020 at 13:32)</a>:</h4>
<p>I bisected it</p>



<a name="211360275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360275" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360275">(Sep 26 2020 at 13:33)</a>:</h4>
<p><span class="user-mention" data-user-id="343418">@James Gill</span> you can use the <code>--prompt</code> parameter to do it interactively. If the ICE happens, <code>Mark as regressed</code>, if normal error, <code>Mark as baseline</code></p>



<a name="211360329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> James Gill <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360329">(Sep 26 2020 at 13:34)</a>:</h4>
<p>Ahh cool, thanks!</p>



<a name="211360821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360821">(Sep 26 2020 at 13:44)</a>:</h4>
<p>Ah you can also provide <code>--regress=ice</code> flag to check for an ICE</p>



<a name="211360833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nelson J Morais <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360833">(Sep 26 2020 at 13:45)</a>:</h4>
<p>would make sense to think about  the possibility to add an extra optional flag to --prompt like a txt file path where its content is a substring of the compilation output. basicly telling bisct-rustc: when this substring is not found in the output then stop and lemme choose regression/baseline/retry else assume X and keep going ? (were X is regressed or baseline)</p>



<a name="211360887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nelson J Morais <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360887">(Sep 26 2020 at 13:46)</a>:</h4>
<p>i'm also new here and it's time consuming when you do an --end 2020-09-26  --prompt. i still didn't got to my baseline yet <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="211360964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nelson J Morais <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360964">(Sep 26 2020 at 13:48)</a>:</h4>
<p><span class="user-mention" data-user-id="230287">@Stu</span>  ah looks like --regress=ice will do more or less as i'm sugesting right?</p>



<a name="211360965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211360965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211360965">(Sep 26 2020 at 13:48)</a>:</h4>
<p>Yes</p>



<a name="211365986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211365986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211365986">(Sep 26 2020 at 15:44)</a>:</h4>
<p>Also with <code>cargo-bisect-rustc</code> you can set a shell script to do the check for you</p>



<a name="211366004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211366004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211366004">(Sep 26 2020 at 15:44)</a>:</h4>
<p>Given that ICEs have a different return code than "normal" failures, you can automate the process fairly easily</p>



<a name="211366112"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211366112" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211366112">(Sep 26 2020 at 15:46)</a>:</h4>
<p>Btw there's a <a class="stream" data-stream-id="217417" href="/#narrow/stream/217417-t-compiler.2Fcargo-bisect-rustc">#t-compiler/cargo-bisect-rustc</a> stream here also</p>



<a name="211370059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211370059" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211370059">(Sep 26 2020 at 17:16)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">LeSeulArtichaut</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6/near/211359760">said</a>:</p>
<blockquote>
<p>I wonder if we could minimize the example further</p>
</blockquote>
<p>Minimized to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Cache</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">data</span>: <span class="nb">Vec</span><span class="o">&lt;</span><span class="kt">i32</span><span class="o">&gt;</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">impl</span><span class="w"> </span><span class="n">Cache</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">list_data</span><span class="p">(</span><span class="o">&amp;</span><span class="k">mut</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">key</span>: <span class="kp">&amp;</span><span class="kt">usize</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="n">reference</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">vec</span><span class="o">!</span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="cm">/*let*/</span><span class="w"> </span><span class="nb">Some</span><span class="p">(</span><span class="n">reference</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="bp">self</span><span class="p">.</span><span class="n">data</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="o">*</span><span class="n">key</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">unimplemented</span><span class="o">!</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="211370136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/211370136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#211370136">(Sep 26 2020 at 17:18)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/77218">#77218</a>'s prioritization request has been removed.</p>



<a name="212163448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212163448" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212163448">(Oct 03 2020 at 09:49)</a>:</h4>
<p>I guess it would be nice if <a href="https://github.com/rust-lang/rust/issues/77283">#77283</a> could get merged before master is promoted to beta (on Tuesday). Should we ping potential reviewers?</p>



<a name="212169302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212169302" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212169302">(Oct 03 2020 at 12:27)</a>:</h4>
<p>from my understanding of that PR, it doesn't fix the ICE just prevents people from using that code that may ICE</p>



<a name="212169443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212169443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212169443">(Oct 03 2020 at 12:31)</a>:</h4>
<p>Well there’s "to not ICE" in the PR title x)</p>



<a name="212183115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212183115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212183115">(Oct 03 2020 at 18:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">LeSeulArtichaut</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6/near/212163448">said</a>:</p>
<blockquote>
<p>I guess it would be nice if <a href="https://github.com/rust-lang/rust/issues/77283">#77283</a> could get merged before master is promoted to beta (on Tuesday). Should we ping potential reviewers?</p>
</blockquote>
<p>I think that would probably be good. Here are the other members of wg-diagnostics:</p>
<ul>
<li>JohnTitor</li>
<li>davidtwco</li>
<li>oli-obk (lead)</li>
</ul>



<a name="212183228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212183228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212183228">(Oct 03 2020 at 18:11)</a>:</h4>
<p>Those are <span class="user-mention silent" data-user-id="217081">Yuki Okushi</span> <span class="user-mention silent" data-user-id="116107">davidtwco</span> and <span class="user-mention silent" data-user-id="124288">oli</span> on Zulip, unfortunately they don't seem to be available right now</p>



<a name="212183322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212183322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212183322">(Oct 03 2020 at 18:12)</a>:</h4>
<p>The code touches typeck though, we might want to ask typecheck experts instead</p>



<a name="212183407"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212183407" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212183407">(Oct 03 2020 at 18:14)</a>:</h4>
<p>But anyway I think backporting is perfectly feasible if it's not merged in time</p>



<a name="212188177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377218%20ICE%20on%20%60if%20let%20Some%28%29%20%3D%20...%60%20expression%E2%80%A6/near/212188177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377218.20ICE.20on.20.60if.20let.20Some().20.3D.20.2E.2E.2E.60.20expression.E2.80.A6.html#212188177">(Oct 03 2020 at 20:19)</a>:</h4>
<p>yeah let's not hurry on a review now, it's fine if this doesn't get merged when beta is cut</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
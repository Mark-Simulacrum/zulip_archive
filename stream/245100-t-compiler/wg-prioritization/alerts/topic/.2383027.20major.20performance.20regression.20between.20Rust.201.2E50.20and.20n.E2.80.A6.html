<html>
<head><meta charset="utf-8"><title>#83027 major performance regression between Rust 1.50 and n… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html">#83027 major performance regression between Rust 1.50 and n…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="229910522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229910522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229910522">(Mar 11 2021 at 19:27)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/83027">#83027</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="229913209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229913209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229913209">(Mar 11 2021 at 19:44)</a>:</h4>
<p>Major runtime performance regression for a widely-used tool -&gt; <code>P-critical</code></p>



<a name="229913237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229913237" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229913237">(Mar 11 2021 at 19:44)</a>:</h4>
<p>(regression is on beta FYI)</p>



<a name="229913240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229913240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229913240">(Mar 11 2021 at 19:44)</a>:</h4>
<p>I agree</p>



<a name="229913333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229913333" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229913333">(Mar 11 2021 at 19:45)</a>:</h4>
<p>I think let's wait for a couple more people to chime in before we assign priority.</p>



<a name="229915508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229915508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229915508">(Mar 11 2021 at 19:59)</a>:</h4>
<p>i think we can wait for the mcve first</p>



<a name="229974555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229974555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229974555">(Mar 12 2021 at 04:31)</a>:</h4>
<p>Hmm, even without an MCVE this issue is pretty severe. Why wait for an MCVE?</p>



<a name="229978279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229978279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229978279">(Mar 12 2021 at 05:21)</a>:</h4>
<p>I don't think I've seen a runtime regression prioritized before</p>



<a name="229985303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/229985303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#229985303">(Mar 12 2021 at 06:57)</a>:</h4>
<p>IMO having more than a 2x slowdown shouldn't happen in a rust version bump, especially once it's in stable.</p>



<a name="230184091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230184091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230184091">(Mar 13 2021 at 19:37)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6/near/229978279">said</a>:</p>
<blockquote>
<p>I don't think I've seen a runtime regression prioritized before</p>
</blockquote>
<p>We've prioritized them before: <a href="https://github.com/rust-lang/rust/issues/76247">#76247</a></p>



<a name="230636707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230636707" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230636707">(Mar 17 2021 at 04:29)</a>:</h4>
<p>FYI: another Zulip topic for this: <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/major.20performance.20regression.20between.20Rust.201.2E50.20and.20.2383027">https://rust-lang.zulipchat.com/#narrow/stream/247081-t-compiler.2Fperformance/topic/major.20performance.20regression.20between.20Rust.201.2E50.20and.20.2383027</a></p>



<a name="230636759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230636759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230636759">(Mar 17 2021 at 04:30)</a>:</h4>
<p>so would this be a release blocker? I'm worried a bit as we're close to the next stable</p>



<a name="230666402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230666402" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230666402">(Mar 17 2021 at 10:13)</a>:</h4>
<p><span class="user-mention" data-user-id="123586">@nagisa</span> would your PR <a href="https://github.com/rust-lang/rust/issues/83084">#83084</a> fix this? Do you want an <code>I-nominate</code> label on this issue to attract some eyeballs during tomorrow's compiler meeting?</p>



<a name="230669388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230669388" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230669388">(Mar 17 2021 at 10:40)</a>:</h4>
<p>Should fix, but needs to be verified by Burntsushi.</p>



<a name="230669442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230669442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nagisa <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230669442">(Mar 17 2021 at 10:41)</a>:</h4>
<p>P-high personally because only affects a very specific flag combination with <code>-Ctarget-cpu=native</code></p>



<a name="230675468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230675468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230675468">(Mar 17 2021 at 11:36)</a>:</h4>
<p>agreed. I will label accordingly. Thank you so much for the patch!</p>



<a name="230675663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2383027%20major%20performance%20regression%20between%20Rust%201.50%20and%20n%E2%80%A6/near/230675663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2383027.20major.20performance.20regression.20between.20Rust.201.2E50.20and.20n.E2.80.A6.html#230675663">(Mar 17 2021 at 11:38)</a>:</h4>
<p>(Also added <code>T-compiler</code> to track the issue - hope it's correct)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
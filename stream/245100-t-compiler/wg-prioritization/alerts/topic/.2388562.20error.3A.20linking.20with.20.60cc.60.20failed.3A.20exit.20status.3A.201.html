<html>
<head><meta charset="utf-8"><title>#88562 error: linking with `cc` failed: exit status: 1 · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html">#88562 error: linking with `cc` failed: exit status: 1</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251591386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251591386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251591386">(Sep 01 2021 at 16:46)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/88562">#88562</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="251602445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251602445" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251602445">(Sep 01 2021 at 18:00)</a>:</h4>
<p>Wow, this is a really bizarre bug.</p>



<a name="251604394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251604394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251604394">(Sep 01 2021 at 18:13)</a>:</h4>
<p>mmm ... a linking error? I'm even confused on what the expected behaviour should be. Should that compile? The code at a first glance doesn't look incorrect</p>



<a name="251604474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251604474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251604474">(Sep 01 2021 at 18:13)</a>:</h4>
<p>Yeah, I'm not sure either.</p>



<a name="251604498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251604498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251604498">(Sep 01 2021 at 18:14)</a>:</h4>
<p>But it definitely shouldn't be giving a linking error ;)</p>



<a name="251604646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251604646" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251604646">(Sep 01 2021 at 18:14)</a>:</h4>
<p>I think at most it's probably <code>P-medium</code> since it hasn't worked since rustc 1.9.</p>



<a name="251604720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251604720" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251604720">(Sep 01 2021 at 18:15)</a>:</h4>
<p>I vote for <code>P-medium</code> since it was an ICE and is now a linking error.</p>



<a name="251604732"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251604732" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251604732">(Sep 01 2021 at 18:15)</a>:</h4>
<p>And the code is pretty short too.</p>



<a name="251605395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251605395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251605395">(Sep 01 2021 at 18:19)</a>:</h4>
<p>afaict I agree with a P-medium</p>



<a name="251605455"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251605455" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251605455">(Sep 01 2021 at 18:19)</a>:</h4>
<p><span class="user-mention silent" data-user-id="250987">apiraino</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201/near/251604394">said</a>:</p>
<blockquote>
<p>mmm ... a linking error? I'm even confused on what the expected behaviour should be. Should that compile? The code at a first glance doesn't look incorrect</p>
</blockquote>
<p>If the code seems weird, I’d like to see a better <code>Debug</code> implementation for</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Delegate</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">T</span><span class="p">));</span><span class="w"></span>
</code></pre></div>
<p>context: <a href="https://users.rust-lang.org/t/impl-of-debug-is-not-general-enough-error/64284">https://users.rust-lang.org/t/impl-of-debug-is-not-general-enough-error/64284</a></p>
<p><em>Edit:</em> Ah, I’ve read that as “The code at a first glance <strong>does</strong> look incorrect”. To answer the question: yes it’s supposed to compile.</p>



<a name="251606080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251606080" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251606080">(Sep 01 2021 at 18:23)</a>:</h4>
<p>thanks Frank for jumping in :)</p>
<p>may I ask if this issue is of big impact for you? I don't have a great context on this, a <code>P-medium</code> might not be enough to have it looked soon</p>



<a name="251606675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251606675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251606675">(Sep 01 2021 at 18:27)</a>:</h4>
<p>I’m not having any impact from this issue personally; as I explained, this came up in an URLO thread. I haven’t explored yet how it can best be worked around. If we can find a good workaround for providing a functionally equivalent <code>Debug</code> implementation for that <code>struct</code>, I don’t care as much about priority.</p>



<a name="251606977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251606977" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251606977">(Sep 01 2021 at 18:29)</a>:</h4>
<p>Alright… now, I’ve got one: using <code>&amp;(self.0 as fn(&amp;'a T))</code> seems to work.</p>



<a name="251608367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251608367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251608367">(Sep 01 2021 at 18:39)</a>:</h4>
<p>The same workaround isn’t really applicable to more complex types like</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">T</span><span class="p">)</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<p>though.</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">let</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Foo</span><span class="p">(</span><span class="fm">vec!</span><span class="p">[</span><span class="n">foo</span><span class="p">]);</span><span class="w"></span>
<span class="w">    </span><span class="fm">println!</span><span class="p">(</span><span class="s">"{:?}"</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">);</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">fn</span> <span class="nf">foo</span><span class="p">(</span><span class="n">_</span>: <span class="kp">&amp;</span><span class="nb">String</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="k">pub</span><span class="w"> </span><span class="k">struct</span> <span class="nc">Foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="p">(</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;</span><span class="n">T</span><span class="p">)</span><span class="o">&gt;</span><span class="p">);</span><span class="w"></span>

<span class="k">use</span><span class="w"> </span><span class="n">std</span>::<span class="n">fmt</span><span class="p">;</span><span class="w"></span>

<span class="k">impl</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="n">fmt</span>::<span class="n">Debug</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">Foo</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="k">fn</span> <span class="nf">fmt</span><span class="o">&lt;'</span><span class="na">a</span><span class="o">&gt;</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="bp">self</span><span class="p">,</span><span class="w"> </span><span class="n">f</span>: <span class="kp">&amp;</span><span class="nc">mut</span><span class="w"> </span><span class="n">fmt</span>::<span class="n">Formatter</span><span class="o">&lt;'</span><span class="nb">_</span><span class="o">&gt;</span><span class="p">)</span><span class="w"> </span>-&gt; <span class="nc">std</span>::<span class="n">fmt</span>::<span class="nb">Result</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">f</span><span class="p">.</span><span class="n">debug_tuple</span><span class="p">(</span><span class="s">"Foo"</span><span class="p">).</span><span class="n">field</span><span class="p">(</span><span class="o">&amp;</span><span class="bp">self</span><span class="p">.</span><span class="mi">0</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="o">&amp;</span><span class="nb">Vec</span><span class="o">&lt;</span><span class="k">fn</span><span class="p">(</span><span class="o">&amp;'</span><span class="na">a</span><span class="w"> </span><span class="n">T</span><span class="p">)</span><span class="o">&gt;</span><span class="p">).</span><span class="n">finish</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>



<a name="251615103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251615103" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Frank Steffahn <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251615103">(Sep 01 2021 at 19:27)</a>:</h4>
<p>In any case, <code>P-medium</code> seems fine to me <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="251631046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251631046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251631046">(Sep 01 2021 at 21:17)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="280891">@Frank Steffahn</span> for the additional context :)</p>



<a name="251631160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388562%20error%3A%20linking%20with%20%60cc%60%20failed%3A%20exit%20status%3A%201/near/251631160" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388562.20error.3A.20linking.20with.20.60cc.60.20failed.3A.20exit.20status.3A.201.html#251631160">(Sep 01 2021 at 21:18)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/88562">#88562</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
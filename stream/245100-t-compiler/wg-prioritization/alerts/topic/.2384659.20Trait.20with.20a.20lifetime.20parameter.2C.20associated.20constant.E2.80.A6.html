<html>
<head><meta charset="utf-8"><title>#84659 Trait with a lifetime parameter, associated constant… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html">#84659 Trait with a lifetime parameter, associated constant…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="236622134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236622134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236622134">(Apr 29 2021 at 05:41)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/84659">#84659</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="236633770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236633770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236633770">(Apr 29 2021 at 07:58)</a>:</h4>
<p>hmm this reproduces also on stable so I suppose the feature <code>const_generics</code> is not relevant and doesnt make it a "nightly only" issue.</p>



<a name="236634648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236634648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236634648">(Apr 29 2021 at 08:06)</a>:</h4>
<p>on the other hand I wonder if the <code>incomplete_features</code> is (iiuc) allowing an unstable feature to be usable in a stable build, thus reproducing an otherwise nightly-only ICE</p>



<a name="236636585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236636585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236636585">(Apr 29 2021 at 08:23)</a>:</h4>
<p>This doesn't appear as an ICE on stable, only an error message, AFAICT.</p>



<a name="236637421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236637421" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236637421">(Apr 29 2021 at 08:30)</a>:</h4>
<p>I left a comment.</p>



<a name="236637955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236637955" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236637955">(Apr 29 2021 at 08:34)</a>:</h4>
<p><span class="user-mention" data-user-id="256313">@Hameer Abbasi</span> I pasted the snippet in the first comment and run <code>cargo build</code> with <code>rustc 1.51.0 (2fd73fabe 2021-03-23)</code>, this is how I reproduce on stable<br>
(not sure this answers your comment)</p>



<a name="236637992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236637992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236637992">(Apr 29 2021 at 08:35)</a>:</h4>
<p>It also panics in playground</p>



<a name="236638125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236638125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236638125">(Apr 29 2021 at 08:36)</a>:</h4>
<p>Ah, yes. My bad.</p>



<a name="236638240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236638240" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236638240">(Apr 29 2021 at 08:37)</a>:</h4>
<p>But only if you add these features. So I would say medium since it would be invalid anyways</p>



<a name="236638393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236638393" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236638393">(Apr 29 2021 at 08:38)</a>:</h4>
<p>In any case, the code (if the feature gates are modified correctly) is an error on stable. So for stable, at least, it's error-&gt;ICE. <code>P-medium</code> seems okay to me.</p>



<a name="236638584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236638584" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236638584">(Apr 29 2021 at 08:40)</a>:</h4>
<p>I if remove both gates (which imo are a red-herring) - and compile on stable - I get an error that I'm doing something wrong. Which is ... what I assume I should see, right?</p>



<a name="236638965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236638965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236638965">(Apr 29 2021 at 08:43)</a>:</h4>
<p>ok, so my opinion on this issue would probably be:<br>
stable -&gt; I get the expected behaviour (no issue here because I'm leaking an unstable behaviour into stable)<br>
nightly -&gt; ICE, unstable features, that's fine I'd label as <code>requires-nightly</code></p>



<a name="236639130"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236639130" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236639130">(Apr 29 2021 at 08:45)</a>:</h4>
<p>cool. I'll apply the relevant labels</p>



<a name="236639979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236639979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236639979">(Apr 29 2021 at 08:51)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/84659">#84659</a>'s prioritization request has been removed.</p>



<a name="236640351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236640351" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236640351">(Apr 29 2021 at 08:54)</a>:</h4>
<p>I removed <code>I-prioritize</code> because I think you missed that, as we're probably not going to prio this as anything higher.</p>



<a name="236640687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236640687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236640687">(Apr 29 2021 at 08:57)</a>:</h4>
<p>ah yes thanks :)</p>



<a name="236644957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236644957" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hellow554 <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236644957">(Apr 29 2021 at 09:35)</a>:</h4>
<p>I just want to make sure, that you guys read <a href="https://github.com/rust-lang/rust/issues/84659#issuecomment-829058716">my last comment</a></p>
<blockquote>
<p>even without #![allow(incomplete_features)] this results in an ICE on stable</p>
</blockquote>



<a name="236645086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236645086" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236645086">(Apr 29 2021 at 09:36)</a>:</h4>
<p>I think that will not change much because the code is invalid on stable and triggers an error anyways.</p>



<a name="236645188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236645188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hellow554 <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236645188">(Apr 29 2021 at 09:37)</a>:</h4>
<p>It's just because apiraino said:</p>
<blockquote>
<p>The fact that it compiles and reproduces on stable is kind of misleading because it's the incomplete_features that allows that</p>
</blockquote>



<a name="236645216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236645216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> hellow554 <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236645216">(Apr 29 2021 at 09:37)</a>:</h4>
<p>and it's not really that... or am I wrong?</p>



<a name="236645415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236645415" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236645415">(Apr 29 2021 at 09:39)</a>:</h4>
<p>Yea the incomplete_features changes nothing</p>



<a name="236645523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236645523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236645523">(Apr 29 2021 at 09:40)</a>:</h4>
<p><code>const_generics</code> is an unstable feature anyway. :) You can try on stable.</p>



<a name="236645682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236645682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236645682">(Apr 29 2021 at 09:42)</a>:</h4>
<p><a href="https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=66c24b4506353f2148a18d3779c96902">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2018&amp;gist=66c24b4506353f2148a18d3779c96902</a></p>



<a name="236647435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2384659%20Trait%20with%20a%20lifetime%20parameter%2C%20associated%20constant%E2%80%A6/near/236647435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6.html#236647435">(Apr 29 2021 at 09:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="230287">Stu</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/.2384659.20Trait.20with.20a.20lifetime.20parameter.2C.20associated.20constant.E2.80.A6/near/236645415">said</a>:</p>
<blockquote>
<p>Yea the incomplete_features changes nothing</p>
</blockquote>
<p>ah my bad! I /thought/ I was looking at different error messages but I've tried again and you're right, the error message is the same on stable, with or without the <code>incomplete_features</code> flag</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-prioritize #79503 Clap derive expansion no longer works o… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html">I-prioritize #79503 Clap derive expansion no longer works o…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="218165548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218165548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218165548">(Nov 28 2020 at 14:02)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/79503">#79503</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="218167361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167361">(Nov 28 2020 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> This is a stable regression, right?</p>



<a name="218167365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167365">(Nov 28 2020 at 14:53)</a>:</h4>
<p>I think so? It's hard to tell without replication steps</p>



<a name="218167368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167368">(Nov 28 2020 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="254853">@pksunkara</span> did you ever replicate the issue locally?</p>



<a name="218167423"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167423" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167423">(Nov 28 2020 at 14:54)</a>:</h4>
<blockquote>
<p>It most recently worked on: Successfully compiles and runs on 1.46.0</p>
</blockquote>



<a name="218167437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167437" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167437">(Nov 28 2020 at 14:55)</a>:</h4>
<p><span class="user-mention" data-user-id="255061">@Léo Lanteri Thauvin</span> right, yes, but that's from the CI train</p>



<a name="218167441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167441">(Nov 28 2020 at 14:55)</a>:</h4>
<p>so it's possible there's something different going on in their CI workflow for 1.46 and 1.48</p>



<a name="218167502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167502">(Nov 28 2020 at 14:56)</a>:</h4>
<p>It failed on EC2 using ssh</p>



<a name="218167506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167506">(Nov 28 2020 at 14:56)</a>:</h4>
<p>not my mac locally</p>



<a name="218167521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167521">(Nov 28 2020 at 14:57)</a>:</h4>
<p>hmm, so it might be linux only? weird for it to be platform specific in name resolution</p>



<a name="218167525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167525">(Nov 28 2020 at 14:57)</a>:</h4>
<p>No, mac on CI fails</p>



<a name="218167540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167540">(Nov 28 2020 at 14:57)</a>:</h4>
<p>I linked the relevant mac CI run in my second comment</p>



<a name="218167679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167679">(Nov 28 2020 at 15:00)</a>:</h4>
<p>The replication step is basically the following command in <code>clap</code> repo: <code>cargo test -p clap_derive --test nested</code></p>



<a name="218167682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167682">(Nov 28 2020 at 15:00)</a>:</h4>
<p>Sorry for the dumb question, what is EC2?</p>



<a name="218167685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167685" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167685">(Nov 28 2020 at 15:00)</a>:</h4>
<p>AWS EC2 instance</p>



<a name="218167689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167689" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167689">(Nov 28 2020 at 15:00)</a>:</h4>
<p>I used it to test linux because my local was passing</p>



<a name="218167704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167704">(Nov 28 2020 at 15:01)</a>:</h4>
<p>On EC2 SSH, <code>cargo +1.46.0 test -p clap_derive --test nested</code> succeeds but <code>cargo +stable test -p clap_derive --test nested</code> fails</p>



<a name="218167713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167713">(Nov 28 2020 at 15:01)</a>:</h4>
<p>testing locally</p>



<a name="218167730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167730">(Nov 28 2020 at 15:01)</a>:</h4>
<p>Did you check 1.47.0 too?</p>



<a name="218167739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167739">(Nov 28 2020 at 15:02)</a>:</h4>
<p>it fails for me locally</p>



<a name="218167780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167780" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167780">(Nov 28 2020 at 15:02)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> What's the os?</p>



<a name="218167783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167783" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167783">(Nov 28 2020 at 15:02)</a>:</h4>
<p>linux, ubuntu 20.04</p>



<a name="218167788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167788">(Nov 28 2020 at 15:02)</a>:</h4>
<p>trying 1.47 now</p>



<a name="218167875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167875">(Nov 28 2020 at 15:04)</a>:</h4>
<p>It works on 1.47 on linux</p>



<a name="218167890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167890">(Nov 28 2020 at 15:04)</a>:</h4>
<p>yup, works for me on 1.47</p>



<a name="218167922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167922">(Nov 28 2020 at 15:06)</a>:</h4>
<p>Might be related note: The original error was even weirder. <a href="https://github.com/clap-rs/clap/runs/1465456535#step:6:196">https://github.com/clap-rs/clap/runs/1465456535#step:6:196</a></p>



<a name="218167960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167960" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167960">(Nov 28 2020 at 15:06)</a>:</h4>
<p><code>error[E0423]: expected value, found macro `matches` </code></p>



<a name="218167970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167970">(Nov 28 2020 at 15:06)</a>:</h4>
<p>I think <code>cargo-bisect-rustc</code> would allow us to bisect the culprit commit</p>



<a name="218167971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167971">(Nov 28 2020 at 15:06)</a>:</h4>
<p>And then I changed the variable name from <code>matches</code> to <code>arg_matches</code> in <a href="https://github.com/clap-rs/clap/commit/56aeb155e16b2d839d163c6ce4f2004dd4a3ca84">this commit</a>. Then the error became: <code>error[E0425]: cannot find value `arg_matches` in this scope</code></p>



<a name="218167980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167980" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167980">(Nov 28 2020 at 15:07)</a>:</h4>
<p>How do I run it?</p>



<a name="218167989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218167989" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218167989">(Nov 28 2020 at 15:08)</a>:</h4>
<p>I wonder if it can run tests, but I guess so</p>



<a name="218168038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168038">(Nov 28 2020 at 15:08)</a>:</h4>
<p>yeah, I'm running it now</p>



<a name="218168042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168042" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168042">(Nov 28 2020 at 15:08)</a>:</h4>
<p>wow my poor battery <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> time to plug in my charger</p>



<a name="218168045"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168045" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168045">(Nov 28 2020 at 15:08)</a>:</h4>
<p><span class="user-mention" data-user-id="254853">@pksunkara</span> <a href="https://github.com/rust-lang/cargo-bisect-rustc/blob/master/TUTORIAL.md">https://github.com/rust-lang/cargo-bisect-rustc/blob/master/TUTORIAL.md</a></p>



<a name="218168480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168480">(Nov 28 2020 at 15:20)</a>:</h4>
<p>ugh I'm having trouble getting it to work, if someone else wants to try feel free</p>



<a name="218168507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168507">(Nov 28 2020 at 15:21)</a>:</h4>
<p>oh I forgot to add <code>./</code> in front of the script <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span></p>



<a name="218168510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168510">(Nov 28 2020 at 15:21)</a>:</h4>
<p>wow these error messages are unhelpful</p>



<a name="218168521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168521" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168521">(Nov 28 2020 at 15:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6/near/218168510">said</a>:</p>
<blockquote>
<p>wow these error messages are unhelpful</p>
</blockquote>
<p>From <code>cargo-bisect-rustc</code>?</p>



<a name="218168567"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168567" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168567">(Nov 28 2020 at 15:22)</a>:</h4>
<p>yeah, all it said was <code>ERROR: the start of the range (nightly-2020-07-11) must not reproduce the regression</code></p>



<a name="218168652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218168652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218168652">(Nov 28 2020 at 15:24)</a>:</h4>
<p>Should be fairly easy to fix I guess</p>



<a name="218169017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169017">(Nov 28 2020 at 15:35)</a>:</h4>
<p>As I expected, <code>cargo-bisect-rustc</code> doesn't differenciate between an error in the shell script and a "command not found" error</p>



<a name="218169268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169268" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pksunkara <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169268">(Nov 28 2020 at 15:43)</a>:</h4>
<p>How do I run this single test using <code>cargo-bisect-rustc</code>? EDIT: Nvm found <code>script</code> arg</p>



<a name="218169518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169518">(Nov 28 2020 at 15:50)</a>:</h4>
<p>I found it, one sec</p>



<a name="218169528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169528">(Nov 28 2020 at 15:50)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/79503#issuecomment-735247581">https://github.com/rust-lang/rust/issues/79503#issuecomment-735247581</a></p>



<a name="218169529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169529">(Nov 28 2020 at 15:50)</a>:</h4>
<p>Isn't it possible to run <code>cargo-bisect-rustc -- test -p clap_derive --test nested</code>?</p>



<a name="218169547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169547" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169547">(Nov 28 2020 at 15:51)</a>:</h4>
<p>is it?</p>



<a name="218169601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169601" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169601">(Nov 28 2020 at 15:52)</a>:</h4>
<p>Well I don't know for sure, but I thought it would work</p>



<a name="218169609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169609" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169609">(Nov 28 2020 at 15:52)</a>:</h4>
<p>huh, look at that, it does :)</p>



<a name="218169668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169668" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169668">(Nov 28 2020 at 15:54)</a>:</h4>
<p>My understanding is that it can run any <code>cargo</code> command</p>



<a name="218169676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2379503%20Clap%20derive%20expansion%20no%20longer%20works%20o%E2%80%A6/near/218169676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2379503.20Clap.20derive.20expansion.20no.20longer.20works.20o.E2.80.A6.html#218169676">(Nov 28 2020 at 15:54)</a>:</h4>
<p>But I never tried with <code>cargo test</code>, only <code>cargo check</code> to avoid a full <code>cargo build</code> when possible</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#88351 Large rlib unable to be loaded · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html">#88351 Large rlib unable to be loaded</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250766846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250766846" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250766846">(Aug 26 2021 at 12:56)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/88351">#88351</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="250798479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250798479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250798479">(Aug 26 2021 at 16:16)</a>:</h4>
<p><code>P-high</code>?</p>



<a name="250800394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250800394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250800394">(Aug 26 2021 at 16:28)</a>:</h4>
<p>hmm, what are we prioritizing there? there are several related issues:</p>
<ol>
<li>rustc generates an rlib it can't read</li>
<li>the diagnostic when the rlib is too big is awful ("crate not found" is very wrong)</li>
<li>the rlib really shouldn't be that big in the first place IMO, I want to look into optimizing the metadata size at some point</li>
</ol>
<p>I think this is iffy between P-medium and P-high as stands, but definitely P-medium if the diagnostic is fixed.</p>



<a name="250819848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250819848" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250819848">(Aug 26 2021 at 18:43)</a>:</h4>
<p>opened <a href="https://github.com/rust-lang/rust/pull/88368">https://github.com/rust-lang/rust/pull/88368</a> giving a more helpful error; assuming that lands I vote for p-medium</p>



<a name="250838913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250838913" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250838913">(Aug 26 2021 at 20:56)</a>:</h4>
<blockquote>
<ol>
<li>rustc generates an rlib it can't read</li>
</ol>
</blockquote>
<p>I mean, this seems worse than a <code>P-medium</code> to me. But I might be misunderstanding the issue.</p>



<a name="250838957"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250838957" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250838957">(Aug 26 2021 at 20:56)</a>:</h4>
<p>This issue is also a beta regression.</p>



<a name="250839834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250839834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250839834">(Aug 26 2021 at 21:03)</a>:</h4>
<p>Hmm, I don't see how that's worse than e.g. an ICE</p>



<a name="250839867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250839867" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250839867">(Aug 26 2021 at 21:03)</a>:</h4>
<p>And we regularly assign P-medium to ICEs if people don't hit them often</p>



<a name="250843414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/250843414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#250843414">(Aug 26 2021 at 21:31)</a>:</h4>
<p>Yeah, I see your point. Do we know how prevalent this is? I guess it seems not that prevalent. If that's the case, <code>P-medium</code> sounds good to me as well.</p>



<a name="251019670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251019670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251019670">(Aug 28 2021 at 02:15)</a>:</h4>
<p>I think this should be <code>P-high</code>. That diagnostic could hardly be less helpful.</p>



<a name="251057742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251057742" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251057742">(Aug 28 2021 at 13:53)</a>:</h4>
<p><span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span> I don't think people are hitting this enough for it to be P-high</p>



<a name="251057746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251057746" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251057746">(Aug 28 2021 at 13:53)</a>:</h4>
<p>you need an rlib file that's over 4 GB for just a single crate</p>



<a name="251088808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251088808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251088808">(Aug 28 2021 at 23:07)</a>:</h4>
<p>Once <a href="https://github.com/rust-lang/rust/issues/88368">#88368</a> lands, I agree that the remaining part is <code>P-medium</code>. I guess we could just jump straight to <code>P-medium</code> now?</p>



<a name="251088822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251088822" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251088822">(Aug 28 2021 at 23:07)</a>:</h4>
<p>Or, alternatively, we could mark this <code>P-medium</code> and mark <a href="https://github.com/rust-lang/rust/issues/88368">#88368</a> <code>P-high</code>.</p>



<a name="251091349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251091349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251091349">(Aug 28 2021 at 23:57)</a>:</h4>
<p>I was under the impression we don't prioritize PRs</p>



<a name="251091690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251091690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251091690">(Aug 29 2021 at 00:02)</a>:</h4>
<p>Well, we don't usually...</p>



<a name="251091706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251091706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251091706">(Aug 29 2021 at 00:03)</a>:</h4>
<p>It was an idea, and possibly not a very good one.</p>



<a name="251683382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251683382" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251683382">(Sep 02 2021 at 08:40)</a>:</h4>
<p>Probably P-medium is fine, the arguments about the factors to reproduce/stumble on this issue seems convincing</p>



<a name="251683419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388351%20Large%20rlib%20unable%20to%20be%20loaded/near/251683419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388351.20Large.20rlib.20unable.20to.20be.20loaded.html#251683419">(Sep 02 2021 at 08:41)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/88351">#88351</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
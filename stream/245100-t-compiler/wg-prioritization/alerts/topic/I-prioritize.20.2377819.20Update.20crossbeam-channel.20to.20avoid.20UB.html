<html>
<head><meta charset="utf-8"><title>I-prioritize #77819 Update crossbeam-channel to avoid UB · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html">I-prioritize #77819 Update crossbeam-channel to avoid UB</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="212969195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969195">(Oct 11 2020 at 15:19)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/77819">#77819</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="212969202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969202">(Oct 11 2020 at 15:19)</a>:</h4>
<p>P-critical IMO - this is unsoundness <em>in the compiler itself</em></p>



<a name="212969251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969251">(Oct 11 2020 at 15:20)</a>:</h4>
<p>let me see how long we've been at 0.4.3</p>



<a name="212969259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969259">(Oct 11 2020 at 15:21)</a>:</h4>
<p>Do we prioritize PRs too?</p>



<a name="212969268"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969268" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969268">(Oct 11 2020 at 15:21)</a>:</h4>
<p>I mean, I don't see a big difference between a PR and an issue</p>



<a name="212969270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969270" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969270">(Oct 11 2020 at 15:21)</a>:</h4>
<p>if there's a PR for an <em>existing</em> issue there's no need to prioritize it</p>



<a name="212969319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969319">(Oct 11 2020 at 15:22)</a>:</h4>
<p>Okay. Yeah critical seems right here</p>



<a name="212969409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969409">(Oct 11 2020 at 15:25)</a>:</h4>
<p>Why should this be <code>P-critical</code>? Does rustc use the <code>bounded</code> channel for any types which have a relevant drop impl?</p>



<a name="212969528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969528">(Oct 11 2020 at 15:28)</a>:</h4>
<p>nm, the drop impl isn't actually relevant here. We deallocate the wrong number of elements so we cause UB in the memory allocator</p>



<a name="212969755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969755">(Oct 11 2020 at 15:34)</a>:</h4>
<p>I personally don't believe this alone warrants a point release by itself <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="212969855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212969855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212969855">(Oct 11 2020 at 15:37)</a>:</h4>
<p>UB in the memory allocator seems like it should need a point release to me :/ but anyway wg-prioritization doesn't decide on backports, I just nominated it</p>



<a name="212970181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970181">(Oct 11 2020 at 15:47)</a>:</h4>
<p>we normally don't prioritise a pr though, unless it really needs to be pushed</p>



<a name="212970436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970436" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970436">(Oct 11 2020 at 15:54)</a>:</h4>
<p>We can nominate it though</p>



<a name="212970437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970437">(Oct 11 2020 at 15:54)</a>:</h4>
<p>I don’t think a priority makes sense on a PR</p>



<a name="212970460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970460">(Oct 11 2020 at 15:55)</a>:</h4>
<p>if it's beta nominated I don't think it also needs I-nominate</p>



<a name="212970466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970466" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970466">(Oct 11 2020 at 15:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">LeSeulArtichaut</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB/near/212970437">said</a>:</p>
<blockquote>
<p>I don’t think a priority makes sense on a PR</p>
</blockquote>
<p>the reason I think it should be prioritized is there's no issue tracking the unsoundness</p>



<a name="212970472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970472">(Oct 11 2020 at 15:55)</a>:</h4>
<p>if you want to open an issue and prioritize that instead I'm fine with it</p>



<a name="212970475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970475">(Oct 11 2020 at 15:55)</a>:</h4>
<p>I think I’d rather open an issue and apply the priority there</p>



<a name="212970519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970519" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970519">(Oct 11 2020 at 15:56)</a>:</h4>
<p>Depends on the filters we use for P-critical in meetings too</p>



<a name="212970780"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212970780" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212970780">(Oct 11 2020 at 16:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB/near/212970460">said</a>:</p>
<blockquote>
<p>if it's beta nominated I don't think it also needs I-nominate</p>
</blockquote>
<p>I think these should be kept separate, because the don't call for the same type of discussion. <code>{stable,beta}-nominated</code> specifically asks if the PR should be backported.</p>
<p>I think, if we want to push a PR, <code>I-nominated</code> is the way to go rather than <code>P-*</code> labels, and we can also ping reviewers.</p>



<a name="212975566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212975566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212975566">(Oct 11 2020 at 18:13)</a>:</h4>
<p>The PR was approved. Should I remove <code>I-prioritize</code>?</p>



<a name="212975570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212975570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212975570">(Oct 11 2020 at 18:13)</a>:</h4>
<p>Or we can just wait until it's merged</p>



<a name="212975795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212975795" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212975795">(Oct 11 2020 at 18:18)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/77819">#77819</a>'s prioritization request has been removed.</p>



<a name="212975806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377819%20Update%20crossbeam-channel%20to%20avoid%20UB/near/212975806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377819.20Update.20crossbeam-channel.20to.20avoid.20UB.html#212975806">(Oct 11 2020 at 18:18)</a>:</h4>
<p>Removed <code>I-prioritize</code>, I don’t think it’s useful anymore</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-prioritize #77458 ICE on trying to debug format type · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html">I-prioritize #77458 ICE on trying to debug format type</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="212197271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212197271" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212197271">(Oct 04 2020 at 00:27)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/77458">#77458</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="212199167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212199167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212199167">(Oct 04 2020 at 01:16)</a>:</h4>
<p>P-low IMO, the only people that could run into this are contributors trying to debug things</p>



<a name="212199175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212199175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212199175">(Oct 04 2020 at 01:16)</a>:</h4>
<p>you could make an argument this makes it harder to get started in the codebase, but no more so than rustdoc having random ICEs if you call <code>tcx.whatever()</code> on a fake DefId</p>



<a name="212200361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200361">(Oct 04 2020 at 01:53)</a>:</h4>
<p>I requested prioritization because it seems there might be something weird going on that could affect other things</p>



<a name="212200363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200363" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200363">(Oct 04 2020 at 01:53)</a>:</h4>
<p>It's not necessarily limited to <code>rustc_middle::ty::Ty</code>, that's just where it was found, correct?</p>



<a name="212200367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200367">(Oct 04 2020 at 01:53)</a>:</h4>
<p>well in the sense that you can print debug output anywhere, yes</p>



<a name="212200369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200369">(Oct 04 2020 at 01:53)</a>:</h4>
<p>but debug output is never user-facing</p>



<a name="212200383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200383">(Oct 04 2020 at 01:54)</a>:</h4>
<p>the absolute worst that can happen is that this panics while panicking and aborts</p>



<a name="212200412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200412" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200412">(Oct 04 2020 at 01:54)</a>:</h4>
<p>but that just turns an ICE -&gt; abort</p>



<a name="212200419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200419" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200419">(Oct 04 2020 at 01:54)</a>:</h4>
<p>I'm saying that this could happen on any type, it's just that <code>Ty</code> is the one that triggers this. Is that not true?</p>



<a name="212200434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200434">(Oct 04 2020 at 01:55)</a>:</h4>
<p>So IIUC it's not an issue specific to <code>Ty</code>, it's just where the bug was found</p>



<a name="212200438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200438">(Oct 04 2020 at 01:55)</a>:</h4>
<p>any type that has a <code>DefPath</code>, yes</p>



<a name="212200484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200484" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200484">(Oct 04 2020 at 01:56)</a>:</h4>
<p>I think we're miscommunicating <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="212200492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200492" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200492">(Oct 04 2020 at 01:57)</a>:</h4>
<p>Is this issue because of how <code>Debug</code> is implemented for <code>Ty</code>?</p>



<a name="212200500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200500" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200500">(Oct 04 2020 at 01:57)</a>:</h4>
<p>(Or some field of <code>Ty</code>?)</p>



<a name="212200502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200502">(Oct 04 2020 at 01:57)</a>:</h4>
<p>it's because of how <code>Debug</code> is implemented for <code>DefPath</code>, which is one of the fields on <code>Ty</code></p>



<a name="212200509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200509">(Oct 04 2020 at 01:57)</a>:</h4>
<p>Ah. Let me go look at that PR again</p>



<a name="212200554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200554" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200554">(Oct 04 2020 at 01:58)</a>:</h4>
<p>Hmm, but <code>DefPath</code> uses <code>#[derive(Debug)]</code>...</p>



<a name="212200573"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200573" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200573">(Oct 04 2020 at 01:59)</a>:</h4>
<p>sorry, this isn't actually <code>Debug</code>, it's <code>print_def_path</code>: <a href="https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/print/struct.FmtPrinter.html#method.print_def_path">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/print/struct.FmtPrinter.html#method.print_def_path</a></p>



<a name="212200580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200580">(Oct 04 2020 at 01:59)</a>:</h4>
<p>(it says in the backtrace)</p>



<a name="212200704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200704">(Oct 04 2020 at 02:02)</a>:</h4>
<p>Hmm, still don't see what's causing this</p>



<a name="212200707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212200707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212200707">(Oct 04 2020 at 02:02)</a>:</h4>
<p>But I guess if it's just for <code>Ty</code>, then <code>P-low</code> probably sounds good</p>



<a name="212540986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212540986" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212540986">(Oct 07 2020 at 10:46)</a>:</h4>
<p>I'll assign a <code>P-low</code>, but open to further reasoning on this</p>



<a name="212541012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377458%20ICE%20on%20trying%20to%20debug%20format%20type/near/212541012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377458.20ICE.20on.20trying.20to.20debug.20format.20type.html#212541012">(Oct 07 2020 at 10:47)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/77458">#77458</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#91598 Compile-time regression between 1.56.1 and 1.57.... · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html">#91598 Compile-time regression between 1.56.1 and 1.57....</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="263940339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263940339" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Teo Klestrup Röijezon <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263940339">(Dec 06 2021 at 23:38)</a>:</h4>
<p>Sadly it does still depend on futures.. I tried to whittle it down to a completely self-contained repro but couldn't seem to make that trigger it :/</p>



<a name="263940385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263940385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263940385">(Dec 06 2021 at 23:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="234568">Teo Klestrup Röijezon</span> has marked this topic as unresolved.</p>



<a name="263981259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263981259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263981259">(Dec 07 2021 at 10:21)</a>:</h4>
<p>As I expected here is the first Warp developer hitting on this<br>
<a href="https://github.com/rust-lang/rust/issues/91598#issuecomment-987754016">https://github.com/rust-lang/rust/issues/91598#issuecomment-987754016</a></p>



<a name="263982242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263982242" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263982242">(Dec 07 2021 at 10:31)</a>:</h4>
<p>I think I can get behind <code>P-critical</code> for this.</p>



<a name="263982548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263982548" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263982548">(Dec 07 2021 at 10:34)</a>:</h4>
<p>Normally it would be <code>P-high</code>, but the combination of the size of the increase and the fact that we know this has a major effect on at least one usecase, and may have big effects on others...</p>



<a name="263982735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263982735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> inquisitivecrystal <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263982735">(Dec 07 2021 at 10:36)</a>:</h4>
<p>I'm still a bit unsure. It feels like our prioritizations have drifted upwards lately, and we maybe need to have a calibration discussion at some point.</p>



<a name="263985215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263985215" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263985215">(Dec 07 2021 at 11:03)</a>:</h4>
<p>Perhaps I'm biased :) but to me it's critical  because:</p>
<ul>
<li><span aria-label="check" class="emoji emoji-2705" role="img" title="check">:check:</span> hits production code</li>
<li><span aria-label="check" class="emoji emoji-2705" role="img" title="check">:check:</span> does not require any nightly feature</li>
</ul>
<p>Now, I'll play devil's advocate and will find mitigating factors: Warp is a peculiar web framework that abuses nested decorator types, I can't say how widespread is nesting decorator types in the Rust world.<br>
Also, the easy "workaround" is ... to pin 1.56.1 and not upgrade Rust (which is what I did to keep on working) but then again, I can't say if this is an option for everyone.</p>



<a name="263985417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2391598%20Compile-time%20regression%20between%201.56.1%20and%201.57..../near/263985417" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2391598.20Compile-time.20regression.20between.201.2E56.2E1.20and.201.2E57.2E.2E.2E.2E.html#263985417">(Dec 07 2021 at 11:05)</a>:</h4>
<p>anyway, it's not the first time it happens (I personally observe that compile time with this stuff gets longer and longer) so as Wesley suggests we should be able to put it into the perf.rlo watchdog</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-nominated #58368 A big regression in tokio-webpush-simple- · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html">I-nominated #58368 A big regression in tokio-webpush-simple-</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="203279425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203279425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203279425">(Jul 08 2020 at 15:11)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> <a href="https://github.com/rust-lang/rust/issues/58368">#58368</a> has been nominated for discussion in <code>T-compiler</code> meeting.</p>
<h1><a href="https://hackmd.io/WJ0G17DHTHGgv0OW9I2PxA?view#I-nominated">Procedure</a></h1>
<ul>
<li>Already discussed?</li>
<li>Worth the meeting time?</li>
<li>Add agenda entry:<ul>
<li>Why nominated?</li>
<li>Assignee?</li>
<li>Issue? PR? What's the status?</li>
<li>Summary and important details?</li>
</ul>
</li>
</ul>



<a name="203291406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203291406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203291406">(Jul 08 2020 at 16:40)</a>:</h4>
<ul>
<li>Tokio webpush bench regressed 88.5% <a href="https://github.com/rust-lang/rust/commit/ff19a53ef07566aa30860023f6eac6e75ffaf900">in this commit</a>.</li>
<li>Nominated to raise awareness of such a big performance regression that  didn't have a lot of attention.</li>
</ul>



<a name="203291456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203291456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203291456">(Jul 08 2020 at 16:41)</a>:</h4>
<p>cc <span class="user-mention" data-user-id="255061">@LeSeulArtichaut</span> thoughts?</p>



<a name="203292543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203292543" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203292543">(Jul 08 2020 at 16:49)</a>:</h4>
<p>Hmm... this is tricky because it's been so long that the perf.rlo data isn't available any more.</p>



<a name="203294604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203294604" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203294604">(Jul 08 2020 at 17:07)</a>:</h4>
<p>is there a way we can re-perf it?</p>



<a name="203298308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298308">(Jul 08 2020 at 17:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="125250">Wesley Wiser</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-/near/203292543">said</a>:</p>
<blockquote>
<p>Hmm... this is tricky because it's been so long that the perf.rlo data isn't available any more.</p>
</blockquote>
<p>yeah, so ... can we maybe run benchmarks with current master code and then run again with master + that identified commit reverted?</p>



<a name="203298360"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298360" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298360">(Jul 08 2020 at 17:38)</a>:</h4>
<p>Should we do perf runs by reverting potential culprits?</p>



<a name="203298384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298384" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298384">(Jul 08 2020 at 17:39)</a>:</h4>
<p>I have no idea if would be as easy as reverting that commit, let's pretend I have said "revert" between quotes :), I meant, chaging the code to what it looked like before and with it working on current master</p>



<a name="203298512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298512" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298512">(Jul 08 2020 at 17:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120823">DPC</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-/near/203294604">said</a>:</p>
<blockquote>
<p>is there a way we can re-perf it?</p>
</blockquote>
<p>I guess in the way I've said, wouldn't be a correct thing to run perf with master and compare that run with the old code because there are a lot of unrelated improvements since then and we would be comparing non sense stuff</p>



<a name="203298526"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298526" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298526">(Jul 08 2020 at 17:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">LeSeulArtichaut</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-/near/203298360">said</a>:</p>
<blockquote>
<p>Should we do perf runs by reverting potential culprits?</p>
</blockquote>
<p>what do you mean?</p>



<a name="203298590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298590" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298590">(Jul 08 2020 at 17:41)</a>:</h4>
<p>anyway, when I've said thoughts, what I meant was if nomination bullets were more or less correct and summarizes the issue correctly :)</p>



<a name="203298652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203298652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203298652">(Jul 08 2020 at 17:41)</a>:</h4>
<p>I mean basically what you said at the same time</p>



<a name="203299652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203299652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203299652">(Jul 08 2020 at 17:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="255061">LeSeulArtichaut</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-/near/203298360">said</a>:</p>
<blockquote>
<p>Should we do perf runs by reverting potential culprits?</p>
</blockquote>
<p>yep that's what is done sometimes in such cases</p>



<a name="203310077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203310077" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203310077">(Jul 08 2020 at 19:17)</a>:</h4>
<p>Yeah, I think that's the best we can do. I just hope reverting that commit isn't too messy.</p>



<a name="203395363"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated%20%2358368%20A%20big%20regression%20in%20tokio-webpush-simple-/near/203395363" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-nominated.20.2358368.20A.20big.20regression.20in.20tokio-webpush-simple-.html#203395363">(Jul 09 2020 at 14:51)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/58368">#58368</a>'s nomination has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
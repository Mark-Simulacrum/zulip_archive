<html>
<head><meta charset="utf-8"><title>#81315 thread &#x27;rustc&#x27; panicked at &#x27;assertion failed: promot… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html">#81315 thread &#x27;rustc&#x27; panicked at &#x27;assertion failed: promot…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="223785437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223785437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223785437">(Jan 23 2021 at 23:59)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/81315">#81315</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="223841405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841405">(Jan 24 2021 at 23:14)</a>:</h4>
<p>incorrect code with good error -&gt; ICE without an error (so it's really confusing)</p>



<a name="223841414"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841414" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841414">(Jan 24 2021 at 23:14)</a>:</h4>
<p>regressed in 1.41</p>



<a name="223841415"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841415" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841415">(Jan 24 2021 at 23:15)</a>:</h4>
<p>I think P-medium or maybe even P-high.</p>



<a name="223841725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841725">(Jan 24 2021 at 23:21)</a>:</h4>
<p>Minimized to:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="k">struct</span> <span class="nc">A</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">data</span>: <span class="kp">&amp;</span><span class="o">'</span><span class="nb">static</span> <span class="kt">u32</span><span class="p">,</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="k">const</span><span class="w"> </span><span class="n">aa_storage</span>: <span class="p">[</span><span class="n">A</span><span class="p">;</span><span class="w"> </span><span class="mi">32</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">A</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">data</span>: <span class="kp">&amp;</span><span class="mi">1</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="mi">32</span><span class="p">];</span><span class="w"></span>
</code></pre></div>



<a name="223841788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841788">(Jan 24 2021 at 23:22)</a>:</h4>
<p>It was reported a few more times, and there is a PR with a proposed fix, but lacks a reviewer.</p>



<a name="223841803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841803" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841803">(Jan 24 2021 at 23:23)</a>:</h4>
<p><span class="user-mention" data-user-id="352985">@tm</span> Which PR is that?</p>



<a name="223841855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841855">(Jan 24 2021 at 23:24)</a>:</h4>
<p>This can be repro'd so easily that I think it should be P-high.</p>



<a name="223841877"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223841877" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223841877">(Jan 24 2021 at 23:24)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/80404">#80404</a></p>



<a name="223842374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223842374" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223842374">(Jan 24 2021 at 23:33)</a>:</h4>
<p>I reassigned the PR to Oli since ecstatic-morse is no longer doing reviews.</p>



<a name="223842654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223842654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223842654">(Jan 24 2021 at 23:38)</a>:</h4>
<p>There seem to be at least 4 different issues that are all duplicates. The question is, which ones should we close? I marked <a href="https://github.com/rust-lang/rust/issues/80404">#80404</a> as fixing all of them, so we could just leave them all open and then let them be closed by that PR (or another PR).</p>
<p>These are the issues:</p>
<ul>
<li><a href="https://github.com/rust-lang/rust/issues/80371">#80371</a></li>
<li><a href="https://github.com/rust-lang/rust/issues/81315">#81315</a></li>
<li><a href="https://github.com/rust-lang/rust/issues/80767">#80767</a></li>
<li><a href="https://github.com/rust-lang/rust/issues/75682">#75682</a></li>
</ul>



<a name="223842685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223842685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223842685">(Jan 24 2021 at 23:39)</a>:</h4>
<p>Two of those issues have been prioritized (and the one that this thread is for is of course requested for prioritization); one with P-medium and one with P-high.</p>



<a name="223842688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/223842688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#223842688">(Jan 24 2021 at 23:39)</a>:</h4>
<p>What a mess <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="224168373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/224168373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#224168373">(Jan 27 2021 at 11:29)</a>:</h4>
<p><span class="user-mention" data-user-id="307537">@Camelid</span> I was thinking if we could lower the priority <a href="https://github.com/rust-lang/rust/issues/75682">#75682</a> from <code>P-high</code> to <code>P-medium</code> (since I think we now have a better idea of the issue) and assign a <code>P-medium</code> also to <a href="https://github.com/rust-lang/rust/issues/80371">#80371</a> so they all have the same priority and are all link to the same PR that should solve them.</p>



<a name="224168467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/224168467" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#224168467">(Jan 27 2021 at 11:30)</a>:</h4>
<p>(I'm not sure if this a usual thing to do with these priority labels)</p>



<a name="224314855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/224314855" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#224314855">(Jan 28 2021 at 11:44)</a>:</h4>
<p>I'll stick to <code>P-high</code> as suggested.</p>



<a name="224314891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2381315%20thread%20%27rustc%27%20panicked%20at%20%27assertion%20failed%3A%20promot%E2%80%A6/near/224314891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2381315.20thread.20&#x27;rustc&#x27;.20panicked.20at.20&#x27;assertion.20failed.3A.20promot.E2.80.A6.html#224314891">(Jan 28 2021 at 11:44)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/81315">#81315</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-prioritize #77529 Invalid monomorphization when `-C link-… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html">I-prioritize #77529 Invalid monomorphization when `-C link-…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="213372794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213372794" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213372794">(Oct 15 2020 at 02:06)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/77529">#77529</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="213375689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213375689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213375689">(Oct 15 2020 at 03:04)</a>:</h4>
<p>P-medium I think</p>



<a name="213377698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213377698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lzutao <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213377698">(Oct 15 2020 at 03:46)</a>:</h4>
<p>I tried to bisect this issue. I had to remove Cargo.lock of <code>vek</code> since older cargos cannot read it.<br>
The crates deps use new klen (?) macro repeator, which only available since middle of 2019.<br>
There are edition 2018 crates and deps which doesn't count now.</p>
<p>In short, the issue appears for a long time, at least since middle of 2019.</p>



<a name="213379909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213379909" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213379909">(Oct 15 2020 at 04:42)</a>:</h4>
<p>Nice, thanks! P-medium definitely seems right then</p>



<a name="213410347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213410347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213410347">(Oct 15 2020 at 11:28)</a>:</h4>
<p>interesting writeup, thanks <span class="user-mention" data-user-id="209117">@lzutao</span></p>



<a name="213413442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213413442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lzutao <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213413442">(Oct 15 2020 at 12:02)</a>:</h4>
<p>let me scratch my old comment. New investigation is &lt;<a href="https://github.com/rust-lang/rust/issues/77529#issuecomment-708999048">https://github.com/rust-lang/rust/issues/77529#issuecomment-708999048</a>&gt;.</p>



<a name="213417135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213417135" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213417135">(Oct 15 2020 at 12:34)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/77529#issuecomment-708678921">One comment</a> mentions that the crate <code>vek</code> is widespread in use and impacted by this issue. But my understanding is that this is a nightly only issue because of the <code>platform_intrinsics</code> feature, right? So the <code>requires-nightly</code> label still applies, correct?</p>



<a name="213417425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213417425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213417425">(Oct 15 2020 at 12:36)</a>:</h4>
<p>I'll apply the medium label based on the current analysis, I think too it is appropriate</p>



<a name="213417534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213417534" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213417534">(Oct 15 2020 at 12:37)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/77529">#77529</a>'s prioritization request has been removed.</p>



<a name="213417821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2377529%20Invalid%20monomorphization%20when%20%60-C%20link-%E2%80%A6/near/213417821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lzutao <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6.html#213417821">(Oct 15 2020 at 12:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="250987">apiraino</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2377529.20Invalid.20monomorphization.20when.20.60-C.20link-.E2.80.A6/near/213417135">said</a>:</p>
<blockquote>
<p><a href="https://github.com/rust-lang/rust/issues/77529#issuecomment-708678921">One comment</a> mentions that the crate <code>vek</code> is widespread in use and impacted by this issue. But my understanding is that this is a nightly only issue because of the <code>platform_intrinsics</code> feature, right? So the <code>requires-nightly</code> label still applies, correct?</p>
</blockquote>
<p>Only if users enable crate feature <code>platform_intrinsics</code>, which defers to a nightly feature . <br>
Users use default-features still can build normally on both stable and nightly toolchain.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
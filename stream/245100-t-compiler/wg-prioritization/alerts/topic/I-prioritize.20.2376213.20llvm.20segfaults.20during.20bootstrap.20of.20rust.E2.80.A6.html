<html>
<head><meta charset="utf-8"><title>I-prioritize #76213 llvm segfaults during bootstrap of rust… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html">I-prioritize #76213 llvm segfaults during bootstrap of rust…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="208733514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208733514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208733514">(Sep 01 2020 at 19:09)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/76213">#76213</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="208840990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208840990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208840990">(Sep 02 2020 at 15:22)</a>:</h4>
<p>The discussion seems to be ongoing - should be wait a bit to assign a priority label? Or something like a <code>P-high</code> is appropriate?</p>



<a name="208848555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208848555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208848555">(Sep 02 2020 at 16:08)</a>:</h4>
<p>why is this happening to them?</p>



<a name="208848629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208848629" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208848629">(Sep 02 2020 at 16:08)</a>:</h4>
<p>I meant, what's the specific condition that triggers that because I guess this is not something that is happening to the rest?</p>



<a name="208861783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208861783" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208861783">(Sep 02 2020 at 17:48)</a>:</h4>
<p>perhaps it's my target-cpu=native ?</p>



<a name="208862006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208862006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208862006">(Sep 02 2020 at 17:50)</a>:</h4>
<p>the llvm stack trace shows that llvm might be doing vectorization at the moment of the crash</p>



<a name="208869348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208869348" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208869348">(Sep 02 2020 at 18:46)</a>:</h4>
<p>which version are you trying to build? (Not sure this information is relevant though)</p>



<a name="208875753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208875753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208875753">(Sep 02 2020 at 19:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="217864">matthiaskrgr</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6/near/208861783">said</a>:</p>
<blockquote>
<p>perhaps it's my target-cpu=native ?</p>
</blockquote>
<p>but I meant, unsure if I'm not seeing something but what are you exactly running to compile? what your config.toml looks like?</p>



<a name="208888871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208888871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208888871">(Sep 02 2020 at 21:14)</a>:</h4>
<p>I added the config.toml to the ticket</p>



<a name="208890060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/208890060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#208890060">(Sep 02 2020 at 21:26)</a>:</h4>
<blockquote>
<p>which version are you trying to build?<br>
The commit hashes i tried to build are noted in the ticket</p>
</blockquote>



<a name="209551227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209551227" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209551227">(Sep 09 2020 at 18:44)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> this issue is pending prioritization</p>



<a name="209551266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209551266" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209551266">(Sep 09 2020 at 18:44)</a>:</h4>
<p>if people want to give opinions are more than welcome</p>



<a name="209551280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209551280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209551280">(Sep 09 2020 at 18:45)</a>:</h4>
<p>I'm going to check it in a bit</p>



<a name="209551586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209551586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209551586">(Sep 09 2020 at 18:47)</a>:</h4>
<p>Seems like the issue didnt get further attention since last week <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> should we slap a <code>P-high</code> on it and have it discussed tomorrow anyway?</p>



<a name="209551648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209551648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209551648">(Sep 09 2020 at 18:47)</a>:</h4>
<p>I don't have the context for an informed opinion</p>



<a name="209552486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209552486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209552486">(Sep 09 2020 at 18:54)</a>:</h4>
<p>can we already reproduce this issue?</p>



<a name="209552642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209552642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209552642">(Sep 09 2020 at 18:55)</a>:</h4>
<p>or more accurately, was someone else other than <span class="user-mention" data-user-id="217864">@matthiaskrgr</span> able to reproduce this crash</p>



<a name="209553796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209553796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209553796">(Sep 09 2020 at 19:04)</a>:</h4>
<p>not that we know of. reproducing this crash involves bootstrapping rustc which I guess requires a hefty setup in place. Can the bisect team help here?</p>



<a name="209554030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209554030" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209554030">(Sep 09 2020 at 19:06)</a>:</h4>
<p>will try reproducing this myself</p>



<a name="209554509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209554509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209554509">(Sep 09 2020 at 19:10)</a>:</h4>
<p>yeah, thanks!</p>



<a name="209555326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209555326" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209555326">(Sep 09 2020 at 19:16)</a>:</h4>
<p>might help if you have a kaby lake cpu</p>



<a name="209555438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209555438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209555438">(Sep 09 2020 at 19:17)</a>:</h4>
<p>can you trigger this with <code>./x.py build --stage 2</code>?</p>



<a name="209555533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209555533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209555533">(Sep 09 2020 at 19:18)</a>:</h4>
<p>can try in a bit</p>



<a name="209555604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209555604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209555604">(Sep 09 2020 at 19:18)</a>:</h4>
<p>or what command fails, the command mentioned in the issue depends on full paths afaict</p>



<a name="209558751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209558751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209558751">(Sep 09 2020 at 19:47)</a>:</h4>
<div class="codehilite"><pre><span></span><code>CMake Error at cmake/modules/HandleLLVMOptions.cmake:272 (message):
  Host compiler does not support &#39;-fuse-ld=lld&#39;
</code></pre></div>


<p>ayy</p>



<a name="209563965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209563965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209563965">(Sep 09 2020 at 20:23)</a>:</h4>
<p>this one is pending too but it seems that we don't have a good idea yet</p>



<a name="209564168"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209564168" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209564168">(Sep 09 2020 at 20:24)</a>:</h4>
<p>IMO P-medium or P-low, it only affects contributors with a weird config.toml it seems?</p>



<a name="209565989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209565989" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209565989">(Sep 09 2020 at 20:39)</a>:</h4>
<p>Hmm, what's weird about my config.toml? :P</p>



<a name="209566366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209566366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209566366">(Sep 09 2020 at 20:43)</a>:</h4>
<p>oh not config.toml, sorry, -C target-cpu=native</p>



<a name="209566396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209566396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209566396">(Sep 09 2020 at 20:43)</a>:</h4>
<p>hmm I wonder if it goes away without thin-lto</p>



<a name="209566587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209566587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209566587">(Sep 09 2020 at 20:45)</a>:</h4>
<p>probably, looking at the stacktrace, llvm was doing vectorization (which could explain why I need <code>target-cpu=native</code> to repro) during lto while it crashed</p>



<a name="209571432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209571432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209571432">(Sep 09 2020 at 21:31)</a>:</h4>
<p><span class="user-mention" data-user-id="216206">@lcnr</span>  `./x.py build --stage 2``crashes as well</p>



<a name="209571456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209571456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209571456">(Sep 09 2020 at 21:31)</a>:</h4>
<p>(not sure if this differs from my default build command though...</p>



<a name="209725859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209725859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209725859">(Sep 11 2020 at 00:24)</a>:</h4>
<p>i think we should mark this as P-high</p>



<a name="209782617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/209782617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#209782617">(Sep 11 2020 at 13:48)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/76213">#76213</a>'s prioritization request has been removed.</p>



<a name="219366666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/219366666" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#219366666">(Dec 09 2020 at 17:08)</a>:</h4>
<p>Mirroring my comment for issue <a href="https://github.com/rust-lang/rust/issues/79654">#79654</a> Are they waiting for the LLVM bug to be resolved?</p>



<a name="220104454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/220104454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#220104454">(Dec 16 2020 at 11:31)</a>:</h4>
<p>I'm going to flag with <code>I-nominate</code> and try to summarize both <a href="https://github.com/rust-lang/rust/issues/76213">#76213</a> and <a href="https://github.com/rust-lang/rust/issues/79654">#79654</a> for discussion. Perhaps they will be picked up and looked at.<br>
I'd like to also have a word from the team on how the linked LLVM issue (<a href="https://bugs.llvm.org/show_bug.cgi?id=48340">https://bugs.llvm.org/show_bug.cgi?id=48340</a>)  is related to these issues and have them under the radar</p>



<a name="220104620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2376213%20llvm%20segfaults%20during%20bootstrap%20of%20rust%E2%80%A6/near/220104620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2376213.20llvm.20segfaults.20during.20bootstrap.20of.20rust.E2.80.A6.html#220104620">(Dec 16 2020 at 11:32)</a>:</h4>
<p>if anyone has anything to add, I'll be happy to add comments to the agenda summary</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
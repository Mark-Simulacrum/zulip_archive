<html>
<head><meta charset="utf-8"><title>#82991 Failed to build Windows crate with i686-pc-windows-m… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html">#82991 Failed to build Windows crate with i686-pc-windows-m…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="229893344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/229893344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#229893344">(Mar 11 2021 at 17:39)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/82991">#82991</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="229924875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/229924875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#229924875">(Mar 11 2021 at 21:00)</a>:</h4>
<p>We need a minimal repro for this. Whatever the issue is it’s been that way since at least 1.45 though nightly’s ICE is a bit different than what’s in beta.</p>



<a name="230635552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230635552" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230635552">(Mar 17 2021 at 04:11)</a>:</h4>
<p>reading <a href="https://github.com/rust-lang/rust/issues/82991#issuecomment-799419124">https://github.com/rust-lang/rust/issues/82991#issuecomment-799419124</a> and the below</p>



<a name="230635624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230635624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230635624">(Mar 17 2021 at 04:12)</a>:</h4>
<p>this affects the real crate but it happens only when cross-compiling (+ windows?), P-medium or P-high?</p>



<a name="230635643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230635643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230635643">(Mar 17 2021 at 04:12)</a>:</h4>
<p><del>(and it isn't ICE anymore with a recent nightly)</del> wrong, I missed <a href="https://github.com/rust-lang/rust/issues/82991#issuecomment-799400945">https://github.com/rust-lang/rust/issues/82991#issuecomment-799400945</a></p>



<a name="230664353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230664353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230664353">(Mar 17 2021 at 09:55)</a>:</h4>
<p>hmm dont have great context on this but at a glance perhaps a <code>P-medium</code> until  we understand more?<br>
Would it make sense adding <code>A-proc-macro</code> or <code>A-macros</code> label to it? May this issue related to procedural macros?</p>



<a name="230664583"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230664583" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230664583">(Mar 17 2021 at 09:57)</a>:</h4>
<p>Yes this issue is related to proc macros. Petrochenkcov linked to an issue that is likely the culprit but we can't be sure yet.</p>



<a name="230664655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230664655" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230664655">(Mar 17 2021 at 09:58)</a>:</h4>
<p>It only happens when cross compiling</p>



<a name="230852223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230852223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230852223">(Mar 18 2021 at 12:13)</a>:</h4>
<p><span class="user-mention" data-user-id="217081">@Yuki Okushi</span> did you mean to remove the <code>e-needs-mcve</code> and <code>ice</code> labels?<br>
<a href="https://github.com/rust-lang/rust/issues/82991#event-">https://github.com/rust-lang/rust/issues/82991#event-</a></p>
<p>I still see both there <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="230918073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/230918073" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Yuki Okushi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#230918073">(Mar 18 2021 at 18:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="250987">apiraino</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6/near/230852223">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="217081">Yuki Okushi</span> did you mean to remove the <code>e-needs-mcve</code> and <code>ice</code> labels?<br>
<a href="https://github.com/rust-lang/rust/issues/82991#event-">https://github.com/rust-lang/rust/issues/82991#event-</a></p>
<p>I still see both there <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>
</blockquote>
<p>I haven't got the picture completely so just left them as-is</p>



<a name="232723721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/232723721" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#232723721">(Apr 01 2021 at 08:52)</a>:</h4>
<p>I'm watching this issue (and the linked ones), but still unsure about it.<br>
if anyone <span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> have any thoughts, happy to hear them, otherwise I'd wait a bit more time and then drop the <code>I-nominate</code> card</p>



<a name="232723933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/232723933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#232723933">(Apr 01 2021 at 08:55)</a>:</h4>
<p>While this is definitely an issue affecting real world code, there is a pretty easy work around (not renaming crates). Do we normally label ICEs as <code>P-high</code>?</p>



<a name="232724973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/232724973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#232724973">(Apr 01 2021 at 09:04)</a>:</h4>
<p>hmm I had completely missed the core of this issue but now I have re-read your <a href="https://github.com/rust-lang/rust/issues/82991#issuecomment-799400945">comment</a>, thanks for implicitely pointing me to that <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> <br>
If this issue affects working code then (as the reporter implies) I'd agree to a <code>P-high</code></p>



<a name="232725447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/232725447" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#232725447">(Apr 01 2021 at 09:08)</a>:</h4>
<p>by the way isn't the <code>i686-pc-windows-msvc</code> target corresponding to Windows 7? Didn't we have another past a report in which (iirc) that target was not used anymore (although still tier1)? (My remembering might be off about that)</p>



<a name="232737556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/232737556" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#232737556">(Apr 01 2021 at 10:52)</a>:</h4>
<p>No, newer versions of Windows run on 32 bit systems so it's not related to Windows 7</p>



<a name="232794935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/232794935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#232794935">(Apr 01 2021 at 17:33)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">rylev</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6/near/232723933">said</a>:</p>
<blockquote>
<p>While this is definitely an issue affecting real world code, there is a pretty easy work around (not renaming crates). Do we normally label ICEs as <code>P-high</code>?</p>
</blockquote>
<p>Our usual baseline for ICEs is <code>P-medium</code>, but they can go higher (and occasionally lower, to <code>P-low</code>).</p>



<a name="233151968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382991%20Failed%20to%20build%20Windows%20crate%20with%20i686-pc-windows-m%E2%80%A6/near/233151968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382991.20Failed.20to.20build.20Windows.20crate.20with.20i686-pc-windows-m.E2.80.A6.html#233151968">(Apr 05 2021 at 09:10)</a>:</h4>
<p>ICE-&gt;error is usually <code>P-medium</code>, if it's very hard to hit <code>P-low</code>. Take it up a notch if it's working code -&gt; ICE.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
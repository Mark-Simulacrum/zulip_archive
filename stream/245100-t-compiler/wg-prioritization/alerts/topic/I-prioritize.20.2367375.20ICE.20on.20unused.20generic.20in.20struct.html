<html>
<head><meta charset="utf-8"><title>I-prioritize #67375 ICE on unused generic in struct · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html">I-prioritize #67375 ICE on unused generic in struct</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="210691250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210691250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210691250">(Sep 20 2020 at 23:48)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/67375">#67375</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="210691258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210691258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210691258">(Sep 20 2020 at 23:49)</a>:</h4>
<p>(this was marked as p-high before this wg was created, so re-prioritising to check if maybe need to reconsider the priority)</p>



<a name="210691496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210691496" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210691496">(Sep 20 2020 at 23:56)</a>:</h4>
<p>An illegal instruction sounds pretty high on the list for me, especially on stable. Why not critical?</p>



<a name="210691635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210691635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210691635">(Sep 21 2020 at 00:00)</a>:</h4>
<p>for especially the newcomers: this was marked as p-high before this group existed, and back then p-high was the highest priority you could give. IIRC we did migrate some of the those accordingly, but either way p-high back then could equate to "modern day" <span aria-label="stuck out tongue" class="emoji emoji-1f61b" role="img" title="stuck out tongue">:stuck_out_tongue:</span> p-critical</p>



<a name="210703031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210703031" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210703031">(Sep 21 2020 at 05:36)</a>:</h4>
<p>It looks like it doesn't emit "SIG_ILL" anymore</p>



<a name="210703040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210703040" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210703040">(Sep 21 2020 at 05:37)</a>:</h4>
<p>the rest of this issue is the "classic const generics bug", where we get an ICE when referring to generic parameters inside of anonymous constants</p>



<a name="210703189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210703189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210703189">(Sep 21 2020 at 05:40)</a>:</h4>
<p>for those interested, the ICE happens because we do not supply the parent generics to anonymous constants, as doing so without <code>feature(lazy_normalization_consts)</code> causes cycle errors (we would have to compute a query to get the result of the exact same query)</p>
<p>This then means that when  looking at the generic parameter <code>T</code> inside of <code>inner</code> the compiler gets confused as it did not expect any parameters here.</p>
<p>(this explanation still requires knowledge about the compiler, so don't worry if you don't understand all of it)</p>



<a name="210703278"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210703278" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210703278">(Sep 21 2020 at 05:43)</a>:</h4>
<p>Without the illegal instruction, this seems <code>P-medium</code> to me, as it is the exact same bug as <a href="https://github.com/rust-lang/rust/issues/67945">#67945</a></p>



<a name="210703337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210703337" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210703337">(Sep 21 2020 at 05:44)</a>:</h4>
<p>(also see <a href="https://github.com/rust-lang/rust/issues/43408">#43408</a> for more discussion about this issue)</p>



<a name="210735070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210735070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210735070">(Sep 21 2020 at 12:43)</a>:</h4>
<p>Should it be closed as a duplicate then?</p>



<a name="210735772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210735772" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210735772">(Sep 21 2020 at 12:50)</a>:</h4>
<p>yeah, tbh I don't see the point of keeping this open, it might be better to instead change this to <code>E-needs-test</code> with <code>min_const_generics</code> to see that we correctly handle it there</p>



<a name="210735838"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210735838" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210735838">(Sep 21 2020 at 12:50)</a>:</h4>
<p>as closures are fairly untested there iirc</p>



<a name="210737781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2367375%20ICE%20on%20unused%20generic%20in%20struct/near/210737781" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2367375.20ICE.20on.20unused.20generic.20in.20struct.html#210737781">(Sep 21 2020 at 13:06)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/67375">#67375</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
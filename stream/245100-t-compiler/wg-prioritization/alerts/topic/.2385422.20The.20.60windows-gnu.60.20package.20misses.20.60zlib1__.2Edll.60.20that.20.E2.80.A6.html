<html>
<head><meta charset="utf-8"><title>#85422 The `windows-gnu` package misses `zlib1__.dll` that … · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html">#85422 The `windows-gnu` package misses `zlib1__.dll` that …</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="239169392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239169392" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239169392">(May 17 2021 at 22:30)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/85422">#85422</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="239464457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239464457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239464457">(May 19 2021 at 17:27)</a>:</h4>
<p>The Windows error <code>0xc0000135</code> means that a DLL is missing, so the error is correct but unhelpful (common story when trying to figure out these Windows error codes)</p>



<a name="239464491"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239464491" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239464491">(May 19 2021 at 17:27)</a>:</h4>
<p>I lean to a P-low and add the relevant Windows label</p>



<a name="239464852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239464852" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239464852">(May 19 2021 at 17:29)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/85422">#85422</a>'s prioritization request has been removed.</p>



<a name="239557523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239557523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239557523">(May 20 2021 at 09:05)</a>:</h4>
<p>This issue is not about unhelpful error. This is regression that breaks one of binaries officially shipped with stable Rust so I think it's more serious than discussed.</p>



<a name="239559038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239559038" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239559038">(May 20 2021 at 09:18)</a>:</h4>
<p>Hmm I see, then I stand corrected, though I don't completely understand the picture.</p>
<p><span class="user-mention" data-user-id="119581">@mati865</span> so, it's <code>rust-lld</code> that ships with this specific target (<code>pc-windows-gnu</code>) does not carry the zlib dependency anymore? <br>
I read that on the other hand "the <code>windows-msvc</code> flavor ships with rust-lld that does not have this dependency"</p>



<a name="239559253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239559253" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239559253">(May 20 2021 at 09:20)</a>:</h4>
<p>(I am just  assuming  - perhaps wrongly -  that zlib is supposed to be found at the installation site and not provided by the rust windows distribution)</p>



<a name="239559590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239559590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239559590">(May 20 2021 at 09:23)</a>:</h4>
<p>Rust-lld is shipped with every Tier 1 host toolchain (maybe Tier 2, it doesn't matter here).<br>
It should be working out of the box but something has changed and now it requires library that AFAIK was never shipped before. IIRC other hosts link zlib statically to avoid this dependency while msvc doesn't link zlib at all.</p>



<a name="239560100"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239560100" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239560100">(May 20 2021 at 09:27)</a>:</h4>
<p>I see, so likely a new dependency that is not shipped in the rust  windows-gnu toolchain</p>
<p>thanks for the explaination! :-)</p>



<a name="239560296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239560296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239560296">(May 20 2021 at 09:29)</a>:</h4>
<p>in this case I'd relabel this with a P-high because it would break all the things</p>



<a name="239561120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2385422%20The%20%60windows-gnu%60%20package%20misses%20%60zlib1__.dll%60%20that%20%E2%80%A6/near/239561120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2385422.20The.20.60windows-gnu.60.20package.20misses.20.60zlib1__.2Edll.60.20that.20.E2.80.A6.html#239561120">(May 20 2021 at 09:36)</a>:</h4>
<p>There was similar issue for other targets with zlib some time ago (last year?). I think this breakage won't propagate further.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#80336 ICE: found unstable fingerprints for optimized_mir w… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html">#80336 ICE: found unstable fingerprints for optimized_mir w…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="220930968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/220930968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#220930968">(Dec 25 2020 at 18:21)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/80336">#80336</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="221212464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221212464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221212464">(Dec 30 2020 at 13:32)</a>:</h4>
<p>I don't have enough context to judge this one, any opinion <span class="user-group-mention" data-user-group-id="2403">@WG-prioritization</span> ? There's also a thorough analysis and a comment about <a href="https://github.com/rust-lang/rust/issues/80336#issuecomment-751311417">not being easy to reduce it to an mcve</a>.</p>



<a name="221212533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221212533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221212533">(Dec 30 2020 at 13:33)</a>:</h4>
<p>But it <em>seems</em> that this ICE is blocking a compilation of code pulled from that repo, so I feel this should be investigated closely. my uneducated guess would say  P-high at least</p>



<a name="221212614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221212614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221212614">(Dec 30 2020 at 13:34)</a>:</h4>
<p>the explanation by <span class="user-mention" data-user-id="125294">@Aaron Hill</span> seems to imply that the current eval cache is unsound, even if we don't yet know if that unsoundness can actually be triggered. <code>P-high</code> or <code>P-critical</code> imo</p>



<a name="221212654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221212654" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221212654">(Dec 30 2020 at 13:35)</a>:</h4>
<p>I would do <code>P-high</code> given that it’s seemingly not easy to actual trigger but it needs to be actively investigated</p>



<a name="221213055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221213055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221213055">(Dec 30 2020 at 13:41)</a>:</h4>
<p>This only happens with <code>O-wasm</code>?</p>



<a name="221213151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221213151" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221213151">(Dec 30 2020 at 13:43)</a>:</h4>
<p>that's another good question.</p>



<a name="221213270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221213270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221213270">(Dec 30 2020 at 13:45)</a>:</h4>
<p>Ill also mention the ICE group if anyone can have a look and try to reduce this a little bit<br>
(maybe also try it on a different rust branch - no evidence yet the issue happening on  other than nightly)</p>



<a name="221213522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221213522" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221213522">(Dec 30 2020 at 13:49)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/80336">#80336</a>'s prioritization request has been removed.</p>



<a name="221213917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221213917" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221213917">(Dec 30 2020 at 13:55)</a>:</h4>
<blockquote>
<p>if it also happen on other than nightlies</p>
</blockquote>
<p>IIUC this ICE happens because of the <code>-Z incremental-verify-ich</code>? So trying to reproduce on e.g. stable is not going to work</p>



<a name="221214263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221214263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221214263">(Dec 30 2020 at 14:01)</a>:</h4>
<p>oh I see, is that because <code>incremental-verify-ich</code> is a nightly only flag? (tried to search for that flag but couldnt find anything useful...)</p>



<a name="221214514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221214514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221214514">(Dec 30 2020 at 14:04)</a>:</h4>
<p>FWIW, the ICE is emitted <a href="https://github.com/rust-lang/rust/blob/d107a87d34c1fc3521aaab7a2576ffbaf59cb2cb/compiler/rustc_query_system/src/query/plumbing.rs#L566">here</a>  which gets called <a href="https://github.com/rust-lang/rust/blob/d107a87d34c1fc3521aaab7a2576ffbaf59cb2cb/compiler/rustc_query_system/src/query/plumbing.rs#L533-L535">here</a> if <code>-Zincremental-verify-ich</code> is specified</p>



<a name="221214535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221214535" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221214535">(Dec 30 2020 at 14:04)</a>:</h4>
<p>I think the question of whether it can reproduce on e.g. beta is important if it turns out this issue <em>is</em> unsound</p>



<a name="221217192"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217192" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217192">(Dec 30 2020 at 14:42)</a>:</h4>
<p>mh, I was able to reproduce in a different repo (rust analyzer)  on x86, so probably unrelated to wasm in particular</p>



<a name="221217290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217290" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217290">(Dec 30 2020 at 14:43)</a>:</h4>
<p>and yes, it also happens on beta</p>



<a name="221217368"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217368" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217368">(Dec 30 2020 at 14:44)</a>:</h4>
<p>if I force <code>-Zincremental-verify-ich</code> to be enabled</p>



<a name="221217409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217409">(Dec 30 2020 at 14:45)</a>:</h4>
<p>If you can post a comment on the issue with your findings, that would be great <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="221217720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217720">(Dec 30 2020 at 14:50)</a>:</h4>
<p>also happens on stable 1.48.0</p>



<a name="221217773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217773" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217773">(Dec 30 2020 at 14:51)</a>:</h4>
<div class="codehilite"><pre><span></span><code>thread &#39;rustc&#39; panicked at &#39;found unstable fingerprints for evaluate_obligation(4aebcd058ee1a9be-c5a25d2e61d4dbbb)&#39;, /rustc/7eac88abb2e57e752f3302f02be5f3ce3d7adfb4/compiler/rustc_query_system/src/query/plumbing.rs:555:5
note: run with `RUST_BACKTRACE=1` environment variable to display a backtrace

error: internal compiler error: unexpected panic

note: the compiler unexpectedly panicked. this is a bug.

note: we would appreciate a bug report: https://github.com/rust-lang/rust/issues/new?labels=C-bug%2C+I-ICE%2C+T-compiler&amp;template=ice.md

note: rustc 1.48.0 (7eac88abb 2020-11-16) running on x86_64-unknown-linux-gnu

note: compiler flags: -Z incremental-verify-ich=yes -C embed-bitcode=no -C debuginfo=0 -C incremental --crate-type lib

note: some of the compiler flags provided by cargo are hidden

error: could not compile `ide_db`
</code></pre></div>



<a name="221217835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217835" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217835">(Dec 30 2020 at 14:52)</a>:</h4>
<p>Can that happen in 1.47.0? If not we might be able to bisect the bug to a specific commit</p>



<a name="221217848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221217848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221217848">(Dec 30 2020 at 14:52)</a>:</h4>
<p>checking...</p>



<a name="221218137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221218137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221218137">(Dec 30 2020 at 14:57)</a>:</h4>
<p>also happens in <code>1.47</code> :(</p>



<a name="221218549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221218549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221218549">(Dec 30 2020 at 15:03)</a>:</h4>
<p><code>1.46</code> as well...<br>
stopped going deeper now</p>



<a name="221218587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221218587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221218587">(Dec 30 2020 at 15:03)</a>:</h4>
<p>Thanks a lot!</p>



<a name="221259128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259128">(Dec 31 2020 at 00:38)</a>:</h4>
<p>Hmm, I was wondering if this bug could deserve <code>I-nominated</code></p>



<a name="221259143"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259143" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259143">(Dec 31 2020 at 00:38)</a>:</h4>
<p><span class="user-mention" data-user-id="250987">@apiraino</span> IIRC you said tomorrow's agenda is quite light? Could we add this issue maybe?</p>



<a name="221259162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259162">(Dec 31 2020 at 00:39)</a>:</h4>
<p>The goal being to determine if this bug can cause actual unsoundness</p>



<a name="221259408"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259408" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259408">(Dec 31 2020 at 00:45)</a>:</h4>
<p>I see some investigation here :-) thanks a lot <span class="user-mention" data-user-id="217864">@matthiaskrgr</span> great work!</p>



<a name="221259593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259593" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259593">(Dec 31 2020 at 00:49)</a>:</h4>
<p>yes, I think we can ask the team is the <code>-Z incremental-verify-ich</code> flag rings a bell. perhaps the question they will have is, if that can be reproduced on a smaller case, but that can be investigated later (I think)</p>



<a name="221259694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259694">(Dec 31 2020 at 00:51)</a>:</h4>
<p>by the way <span class="user-mention" data-user-id="217864">@matthiaskrgr</span>  on the issue I read <code>RUSTFLAGS="-Zincremental-verify-ich=yes" cargo build</code> instead of <code>-Z incremental....</code> is that a typo or is that irrelevant to the compilation? (apologies for the stupidest question ever)</p>



<a name="221259730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259730">(Dec 31 2020 at 00:51)</a>:</h4>
<p>you mean the space?</p>



<a name="221259770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259770" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259770">(Dec 31 2020 at 00:52)</a>:</h4>
<p>It doesn't matter, rustc parses both</p>



<a name="221259781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221259781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221259781">(Dec 31 2020 at 00:52)</a>:</h4>
<p>right, the space <span aria-label="point up" class="emoji emoji-1f446" role="img" title="point up">:point_up:</span></p>



<a name="221260478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260478" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260478">(Dec 31 2020 at 01:07)</a>:</h4>
<p><span class="user-mention" data-user-id="250987">@apiraino</span> wait, I'm confused. Does the <code>-Z incremental-verify-ich</code> actually perform optimizations?</p>



<a name="221260543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260543">(Dec 31 2020 at 01:08)</a>:</h4>
<p>tried to gather infor on that flag earlier but failed to get some context :-(</p>



<a name="221260569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260569">(Dec 31 2020 at 01:09)</a>:</h4>
<p>The description for the flag in <code>-Zhelp</code> is:</p>
<blockquote>
<p>verify incr. comp. hashes of green query instances (default: no)</p>
</blockquote>



<a name="221260579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260579">(Dec 31 2020 at 01:09)</a>:</h4>
<p>I think it just verifies the cache</p>



<a name="221260600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260600" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260600">(Dec 31 2020 at 01:09)</a>:</h4>
<p>So the issue is not the flag, it's the way rustc caches stuff, with or without the flag</p>



<a name="221260650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260650">(Dec 31 2020 at 01:10)</a>:</h4>
<p>ah right. but it's a nightly only flag, right?</p>



<a name="221260657"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260657" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260657">(Dec 31 2020 at 01:10)</a>:</h4>
<p>Yes</p>



<a name="221260702"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260702" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260702">(Dec 31 2020 at 01:11)</a>:</h4>
<p>But if, as I inferred from Aaron's analysis, rustc's handling of regions in the ICH is wrong, this issue will appear with or without the flag, and on stable as well</p>



<a name="221260869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260869" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260869">(Dec 31 2020 at 01:14)</a>:</h4>
<blockquote>
<p>with or without the flag</p>
</blockquote>
<p>I don't follow this part: iiuc the issue is about that flag causing the ICE, correct?</p>



<a name="221260876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260876">(Dec 31 2020 at 01:14)</a>:</h4>
<p>Yes</p>



<a name="221260903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260903">(Dec 31 2020 at 01:15)</a>:</h4>
<p>But IIUC it doesn't change anything about the way the ICH is generated, it just verifies it by running checks</p>



<a name="221260993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260993">(Dec 31 2020 at 01:16)</a>:</h4>
<p>so it's required to reproduce the issue. But it's also a nightly-only flag. so why <span class="user-mention silent" data-user-id="217864">matthiaskrgr</span>  reproduced also on "1.47 and 1.46"?</p>



<a name="221260998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221260998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221260998">(Dec 31 2020 at 01:17)</a>:</h4>
<p>confused <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="221261009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261009">(Dec 31 2020 at 01:17)</a>:</h4>
<p>What I think is scary about this issue is not the ICE</p>



<a name="221261021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261021" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261021">(Dec 31 2020 at 01:17)</a>:</h4>
<p>It's the possibility that the incremental cache is not implemented correctly and could lead to unsoundness</p>



<a name="221261159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261159">(Dec 31 2020 at 01:20)</a>:</h4>
<p>ok. I'm just asking because I think in the past "nightly-only" issues (caused by unstable features still far from being stabilized) were not high in priority (If I recall correctly)</p>



<a name="221261170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261170" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261170">(Dec 31 2020 at 01:20)</a>:</h4>
<p>Right</p>



<a name="221261172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261172" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261172">(Dec 31 2020 at 01:20)</a>:</h4>
<p>but I agree with the general reasoning exposed here</p>



<a name="221261186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261186">(Dec 31 2020 at 01:21)</a>:</h4>
<p>Do you want me to write the agenda entry, if that can help you?</p>



<a name="221261206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221261206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221261206">(Dec 31 2020 at 01:21)</a>:</h4>
<p>please feel free to add what do you think is appropriate :)</p>



<a name="221306320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221306320" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221306320">(Dec 31 2020 at 18:01)</a>:</h4>
<p>the ice also reproduces inside the <code>regex</code> crate (has only little deps and is smaller). I was able to trigger it by adding an empty line in some function <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span></p>



<a name="221307301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221307301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221307301">(Dec 31 2020 at 18:17)</a>:</h4>
<p>got it down to a couple of lines</p>



<a name="221307306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221307306" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Lanteri Thauvin <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221307306">(Dec 31 2020 at 18:17)</a>:</h4>
<p>Awesome <span aria-label="sparkles" class="emoji emoji-2728" role="img" title="sparkles">:sparkles:</span></p>



<a name="221307933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221307933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221307933">(Dec 31 2020 at 18:30)</a>:</h4>
<p>guys what are you doing here?</p>
<p>get out and turn off the computer :D</p>



<a name="221309201"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221309201" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221309201">(Dec 31 2020 at 18:53)</a>:</h4>
<p>fireworks were cancelled here :P</p>



<a name="221309598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221309598" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Stu <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221309598">(Dec 31 2020 at 19:00)</a>:</h4>
<p>Yes it’s also forbidden in Germany</p>



<a name="221309614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221309614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221309614">(Dec 31 2020 at 19:00)</a>:</h4>
<p>in florida it's allowed for farmers or anyone who says they're a farmer and has the money to pay for it <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span></p>



<a name="221309965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2380336%20ICE%3A%20found%20unstable%20fingerprints%20for%20optimized_mir%20w%E2%80%A6/near/221309965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2380336.20ICE.3A.20found.20unstable.20fingerprints.20for.20optimized_mir.20w.E2.80.A6.html#221309965">(Dec 31 2020 at 19:07)</a>:</h4>
<p>oh wait I take it back, they <em>just</em> legalized it for holidays <a href="http://www.northescambia.com/2020/12/fireworks-are-legal-for-new-years-in-florida">http://www.northescambia.com/2020/12/fireworks-are-legal-for-new-years-in-florida</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>I-prioritize #46345 thread::Builder::spawn returns WouldBlo… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html">I-prioritize #46345 thread::Builder::spawn returns WouldBlo…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="213977120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977120" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977120">(Oct 20 2020 at 20:45)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/46345">#46345</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="213977324"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977324" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977324">(Oct 20 2020 at 20:47)</a>:</h4>
<p>there are two separate issues here and I'm not sure which <span class="user-mention" data-user-id="307537">@Camelid</span> wanted us to prioritize</p>



<a name="213977350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977350" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977350">(Oct 20 2020 at 20:47)</a>:</h4>
<p>the first is 'sometimes my computer runs out of available threads' which we can't do anything about</p>



<a name="213977380"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977380" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977380">(Oct 20 2020 at 20:47)</a>:</h4>
<p>the second is 'the error code is interpreted as EWOULDBLOCK instead of EAGAIN</p>



<a name="213977451"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977451" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977451">(Oct 20 2020 at 20:48)</a>:</h4>
<p>the second IMO is P-low, the only thing it affects is Debug output (not even Display)</p>



<a name="213977479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977479">(Oct 20 2020 at 20:48)</a>:</h4>
<p>I thought the issue was that spawning the thread might take a few seconds, but rustc panics immediately</p>



<a name="213977486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977486" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977486">(Oct 20 2020 at 20:48)</a>:</h4>
<p>Is that not correct?</p>



<a name="213977631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977631">(Oct 20 2020 at 20:50)</a>:</h4>
<p>no, that's user code panicking, not hte compiler</p>



<a name="213977691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977691">(Oct 20 2020 at 20:50)</a>:</h4>
<p>they need to handle the error somehow, the standard library can't do it for them</p>



<a name="213977751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977751">(Oct 20 2020 at 20:50)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/46345#issuecomment-586383627">https://github.com/rust-lang/rust/issues/46345#issuecomment-586383627</a></p>



<a name="213977963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977963">(Oct 20 2020 at 20:52)</a>:</h4>
<p>Sorry, what I mean is this code seems to be used by the compiler, which can cause panics: <a href="https://github.com/rust-lang/rust/issues/72482">#72482</a></p>



<a name="213977992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213977992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213977992">(Oct 20 2020 at 20:52)</a>:</h4>
<p>that's a separate issue</p>



<a name="213978011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213978011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213978011">(Oct 20 2020 at 20:53)</a>:</h4>
<p>I don't think it should have been marked as a duplicate</p>



<a name="213978054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213978054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213978054">(Oct 20 2020 at 20:53)</a>:</h4>
<p>Oh. Reopen it if you see fit!</p>



<a name="213978147"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213978147" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213978147">(Oct 20 2020 at 20:54)</a>:</h4>
<p>I may have been a bit over-eager when triaging <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="213978370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213978370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213978370">(Oct 20 2020 at 20:56)</a>:</h4>
<p>done</p>



<a name="213978378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213978378" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213978378">(Oct 20 2020 at 20:56)</a>:</h4>
<p>and my vote for the current issue (46345) is P-low</p>



<a name="213979095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/213979095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#213979095">(Oct 20 2020 at 21:03)</a>:</h4>
<p>left a comment on the issue</p>



<a name="214122571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/214122571" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#214122571">(Oct 21 2020 at 22:23)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="307537">@Camelid</span> and <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> for the analysis. Going for <code>P-low</code> as suggested <span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="214124663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/214124663" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#214124663">(Oct 21 2020 at 22:49)</a>:</h4>
<p>I wonder why triagebot didn't pick up the state change...</p>



<a name="214124963"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2346345%20thread%3A%3ABuilder%3A%3Aspawn%20returns%20WouldBlo%E2%80%A6/near/214124963" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2346345.20thread.3A.3ABuilder.3A.3Aspawn.20returns.20WouldBlo.E2.80.A6.html#214124963">(Oct 21 2020 at 22:52)</a>:</h4>
<p>when the issue is renamed <em>after</em> it has been labeled for prioritisation, the notification arrives in the <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/I-prioritize.20.2346345.20.60thread.3A.3ABuilder.3A.3Aspawn.60.20returns.20WouldB.E2.80.A6">new thread</a> <span aria-label="laughter tears" class="emoji emoji-1f602" role="img" title="laughter tears">:laughter_tears:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
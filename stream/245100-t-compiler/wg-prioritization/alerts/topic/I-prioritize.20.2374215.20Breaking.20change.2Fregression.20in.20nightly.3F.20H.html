<html>
<head><meta charset="utf-8"><title>I-prioritize #74215 Breaking change/regression in nightly? H · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html">I-prioritize #74215 Breaking change/regression in nightly? H</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="203515012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203515012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203515012">(Jul 10 2020 at 14:44)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/74215">#74215</a> has been requested for prioritization.</p>
<h1><a href="https://hackmd.io/WJ0G17DHTHGgv0OW9I2PxA?view#Unprioritized-I-prioritize">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="203525908"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203525908" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> o0Ignition0o - Jeremy Lempereur <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203525908">(Jul 10 2020 at 16:07)</a>:</h4>
<p>It looks like it works as intended Oo</p>



<a name="203563320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203563320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203563320">(Jul 10 2020 at 22:10)</a>:</h4>
<p>I personally also think this is expected breakage/unspecified behavior</p>



<a name="203563348"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203563348" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203563348">(Jul 10 2020 at 22:11)</a>:</h4>
<p>I am biased as I wrote the PR implementing this change though</p>



<a name="203563554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203563554" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203563554">(Jul 10 2020 at 22:13)</a>:</h4>
<blockquote>
<p>"but we could probably change the Hash impl to always hash the ~same number of bytes"</p>
</blockquote>
<p>This might be a way to fix this, I don't really have an opinion on if this is worth it though</p>



<a name="203563821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203563821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203563821">(Jul 10 2020 at 22:17)</a>:</h4>
<p>esp considering that there are other harder to fix reasons why the layout of <code>mem::Discriminant</code> may change between architectures,<br>
e.g. conditional compilation + some interesting (i don't think currently used) optimizations.</p>
<p>So I think it is better for this to be "always" broken than for it to work in most cases and suddently blowing up for some edge case.</p>



<a name="203656939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203656939" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203656939">(Jul 12 2020 at 19:22)</a>:</h4>
<p>this is more of a "notice of this isn't covered under stability guarantees of rust releases"</p>



<a name="203658313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203658313" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203658313">(Jul 12 2020 at 20:00)</a>:</h4>
<p>Wait, I just spend some more time looking into this... there is something going wrong here, I would expect a call <code>write_isize</code> in both cases</p>



<a name="203658318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203658318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203658318">(Jul 12 2020 at 20:00)</a>:</h4>
<p>but that's somehow not the case</p>



<a name="203660449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203660449" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203660449">(Jul 12 2020 at 20:50)</a>:</h4>
<p>oh god <span aria-label="face palm" class="emoji emoji-1f926" role="img" title="face palm">:face_palm:</span> this change is still in beta, so I obviously won't get the expected behavior on stable...</p>



<a name="203660960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203660960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203660960">(Jul 12 2020 at 21:03)</a>:</h4>
<p><span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="203948387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203948387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203948387">(Jul 15 2020 at 12:29)</a>:</h4>
<p><span class="user-mention" data-user-id="216206">@lcnr</span> what should we do with the prioritization request here? it doesn't seem that we can do much for now?</p>



<a name="203948425"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203948425" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203948425">(Jul 15 2020 at 12:29)</a>:</h4>
<p>one option is just leave things as they are until we make a decision</p>



<a name="203948926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203948926" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203948926">(Jul 15 2020 at 12:34)</a>:</h4>
<p>I think this is a decision for the lang team for now, so I  don't think it's that useful to prioritize this beforehand.</p>



<a name="203948995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203948995" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203948995">(Jul 15 2020 at 12:35)</a>:</h4>
<p>yep</p>



<a name="203951150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203951150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203951150">(Jul 15 2020 at 12:56)</a>:</h4>
<p>will remove <code>I-prioritize</code> and ping <code>rust-lang/lang</code> then</p>



<a name="203952967"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize%20%2374215%20Breaking%20change/regression%20in%20nightly%3F%20H/near/203952967" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/I-prioritize.20.2374215.20Breaking.20change.2Fregression.20in.20nightly.3F.20H.html#203952967">(Jul 15 2020 at 13:11)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/74215">#74215</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
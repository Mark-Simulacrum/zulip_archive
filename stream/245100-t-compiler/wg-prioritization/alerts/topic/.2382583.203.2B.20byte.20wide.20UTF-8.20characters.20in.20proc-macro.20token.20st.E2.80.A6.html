<html>
<head><meta charset="utf-8"><title>#82583 3+ byte wide UTF-8 characters in proc-macro token st… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html">#82583 3+ byte wide UTF-8 characters in proc-macro token st…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="228066083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228066083" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228066083">(Feb 27 2021 at 15:54)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/82583">#82583</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="228066450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228066450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228066450">(Feb 27 2021 at 16:01)</a>:</h4>
<p>reminds me of <a href="https://github.com/rust-lang/rust/issues/81208">#81208</a> but error is different. I'm not understand if it's because a completely different part of the code of the <code>#[rocket::get("/♥")]</code> macro shields the true error.</p>



<a name="228066890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228066890" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228066890">(Feb 27 2021 at 16:08)</a>:</h4>
<p>Goes back to at least <code>2018-01-01</code>, according to <code>cargo-bisect-rustc</code>, I commented on the issue.</p>



<a name="228066895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228066895" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228066895">(Feb 27 2021 at 16:09)</a>:</h4>
<p>Also, code that should work but doesn't, not a regression AFAICT, but a very obscure bug.</p>



<a name="228066973"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228066973" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228066973">(Feb 27 2021 at 16:10)</a>:</h4>
<p>I'd say <code>P-medium</code> is suitable. I'd be okay with <code>P-high</code> too.</p>



<a name="228068285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228068285" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228068285">(Feb 27 2021 at 16:34)</a>:</h4>
<p>I've tried also compiling with <code>cargo +nightly build</code> and I see the error from <a href="https://github.com/rust-lang/rust/issues/81208">#81208</a> <br>
Does your bisection catches the same error?</p>
<p>(this said, I agree on a <code>P-medium</code>)</p>



<a name="228068631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228068631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228068631">(Feb 27 2021 at 16:40)</a>:</h4>
<p>Yes, it's a different error than the one in the title. What's more, the example containing <code>#[rocket::get("/мир")]</code> produces the same error on <code>rocket 0.4.7</code>, which is the latest at the time of writing.</p>



<a name="228068920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228068920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228068920">(Feb 27 2021 at 16:45)</a>:</h4>
<p>Interesting this comment :-)<br>
<a href="https://github.com/rust-lang/rust/issues/82583#issuecomment-787099858">https://github.com/rust-lang/rust/issues/82583#issuecomment-787099858</a></p>



<a name="228069182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228069182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228069182">(Feb 27 2021 at 16:50)</a>:</h4>
<p>In that case, the bug is invalid. The proc macro is written weirdly.</p>



<a name="228206736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2382583%203%2B%20byte%20wide%20UTF-8%20characters%20in%20proc-macro%20token%20st%E2%80%A6/near/228206736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hameer Abbasi <a href="https://rust-lang.github.io/zulip_archive/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2382583.203.2B.20byte.20wide.20UTF-8.20characters.20in.20proc-macro.20token.20st.E2.80.A6.html#228206736">(Mar 01 2021 at 10:20)</a>:</h4>
<p>Ah, I managed to reproduce it, see <a href="https://github.com/rust-lang/rust/issues/82583#issuecomment-787124842">this comment</a>. But the bisection results don't change.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>#88901 A Lifetime-generic `Copy` impl can allow fields whic… · t-compiler/wg-prioritization/alerts · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/index.html">t-compiler/wg-prioritization/alerts</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html">#88901 A Lifetime-generic `Copy` impl can allow fields whic…</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="253017642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253017642" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253017642">(Sep 12 2021 at 22:53)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="3111">@WG-prioritization/alerts</span> issue <a href="https://github.com/rust-lang/rust/issues/88901">#88901</a> has been requested for prioritization.</p>
<h1><a href="https://forge.rust-lang.org/compiler/prioritization/procedure.html#assign-priority-to-unprioritized-issues-with-i-prioritize-label">Procedure</a></h1>
<ul>
<li>Priority?</li>
<li>Regression?</li>
<li>Notify people/groups?</li>
<li>Needs <code>I-nominated</code>?</li>
</ul>



<a name="253019864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253019864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253019864">(Sep 12 2021 at 23:35)</a>:</h4>
<p>Author said:</p>
<blockquote>
<p>That being said, I'd qualify it as <strong>low priority</strong>, since the example is indeed very contrived.</p>
</blockquote>
<p>I think <code>P-medium</code> might be better than <code>P-low</code> here though.</p>



<a name="253049641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253049641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253049641">(Sep 13 2021 at 07:40)</a>:</h4>
<p>As the reporter suggests the error (i.e. or lack thereof) has been there since ever (unrelated compile errors stop at rust 1.26, after that we have a warning). if the resulting issue is an unsoundness, then I agree.<br>
What could an actionable be in this case: is there a specific thing needed to be fixed or is the scope bigger?</p>



<a name="253108177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253108177" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Daniel Henry-Mantilla <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253108177">(Sep 13 2021 at 15:24)</a>:</h4>
<p>Let's cc <span class="user-mention" data-user-id="116009">@nikomatsakis</span> since they're quite aware of these <code>Copy</code>-only-when-<code>'static</code> issues and thus quite acquainted with the technical challenges at hand. For instance, I don't believe that a broad fix would be easy, here. Where I believe there might be an easier way to fix the theoretical/contrived unsoundness is rather by looking at the <code>Clone</code> impl, or the borrow-checker based usages: should/could the borrow checker try to structurally prove the <code>Copy</code>-ness of <em>all</em> the fields, <em>recursing</em> over each? (at least within the <code>Clone</code> impl?).</p>
<p><span class="user-mention" data-user-id="307537">@Noah Lev</span> feel free to go for a higher priority, since you people know how to better gauge these things. I just wanted to clarify that the unsoundness example is one of the most contrived snippets ever seen out there, so I wouldn't give it that much importance, personally. I just wanted the problem to be known / acknowledged <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="253128132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253128132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253128132">(Sep 13 2021 at 17:26)</a>:</h4>
<p>thanks <span class="user-mention" data-user-id="232018">@Daniel Henry-Mantilla</span> ! I'll probably  tag T-lang then</p>



<a name="253130514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253130514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253130514">(Sep 13 2021 at 17:42)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232018">Daniel Henry-Mantilla</span> <a href="#narrow/stream/245100-t-compiler.2Fwg-prioritization.2Falerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6/near/253108177">said</a>:</p>
<blockquote>
<p>Let's cc <span class="user-mention silent" data-user-id="116009">nikomatsakis</span> since they're quite aware of these <code>Copy</code>-only-when-<code>'static</code> issues and thus quite acquainted with the technical challenges at hand. For instance, I don't believe that a broad fix would be easy, here. Where I believe there might be an easier way to fix the theoretical/contrived unsoundness is rather by looking at the <code>Clone</code> impl, or the borrow-checker based usages: should/could the borrow checker try to structurally prove the <code>Copy</code>-ness of <em>all</em> the fields, <em>recursing</em> over each? (at least within the <code>Clone</code> impl?).</p>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> feel free to go for a higher priority, since you people know how to better gauge these things. I just wanted to clarify that the unsoundness example is one of the most contrived snippets ever seen out there, so I wouldn't give it that much importance, personally. I just wanted the problem to be known / acknowledged <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>
</blockquote>
<p>Yeah, <code>P-medium</code> seems about right for this kind of unsoundness :)</p>



<a name="253206352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/245100-t-compiler/wg-prioritization/alerts/topic/%2388901%20A%20Lifetime-generic%20%60Copy%60%20impl%20can%20allow%20fields%20whic%E2%80%A6/near/253206352" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> triagebot <a href="https://zulip-archive.rust-lang.org/stream/245100-t-compiler/wg-prioritization/alerts/topic/.2388901.20A.20Lifetime-generic.20.60Copy.60.20impl.20can.20allow.20fields.20whic.E2.80.A6.html#253206352">(Sep 14 2021 at 06:59)</a>:</h4>
<p>Issue <a href="https://github.com/rust-lang/rust/issues/88901">#88901</a>'s prioritization request has been removed.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
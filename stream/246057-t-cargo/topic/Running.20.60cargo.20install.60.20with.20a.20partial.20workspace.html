<html>
<head><meta charset="utf-8"><title>Running `cargo install` with a partial workspace · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Running.20.60cargo.20install.60.20with.20a.20partial.20workspace.html">Running `cargo install` with a partial workspace</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="256540048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Running%20%60cargo%20install%60%20with%20a%20partial%20workspace/near/256540048" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Running.20.60cargo.20install.60.20with.20a.20partial.20workspace.html#256540048">(Oct 07 2021 at 08:17)</a>:</h4>
<p>In Dockerfiles at work, when we want to build one of the binaries into a lean docker container, we currently have to copy the source from each of the workspace members into the Docker environment to be able to <code>cargo install</code> a binary.</p>



<a name="256540199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Running%20%60cargo%20install%60%20with%20a%20partial%20workspace/near/256540199" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Running.20.60cargo.20install.60.20with.20a.20partial.20workspace.html#256540199">(Oct 07 2021 at 08:18)</a>:</h4>
<p>Are there any fundamental reasons this has to be true? Could we resolve workspace members lazily in case a crate is passed in explicitly?</p>



<a name="256540257"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Running%20%60cargo%20install%60%20with%20a%20partial%20workspace/near/256540257" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Running.20.60cargo.20install.60.20with.20a.20partial.20workspace.html#256540257">(Oct 07 2021 at 08:19)</a>:</h4>
<p>See <a href="https://lib.rs/crates/cargo-chef">https://lib.rs/crates/cargo-chef</a> which also tries to solve this problem outside Cargo</p>



<a name="256569931"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Running%20%60cargo%20install%60%20with%20a%20partial%20workspace/near/256569931" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Running.20.60cargo.20install.60.20with.20a.20partial.20workspace.html#256569931">(Oct 07 2021 at 12:40)</a>:</h4>
<p>All <code>Cargo.toml</code> files need to be available for the dependency resolver to be able to work.</p>



<a name="256569986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Running%20%60cargo%20install%60%20with%20a%20partial%20workspace/near/256569986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Running.20.60cargo.20install.60.20with.20a.20partial.20workspace.html#256569986">(Oct 07 2021 at 12:41)</a>:</h4>
<p>The dependency resolver works on the entire workspace, so one member may affect the version of a dependency used by another member.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>✔ warnings on none-local deps? · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html">✔ warnings on none-local deps?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="266980148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980148">(Jan 05 2022 at 19:35)</a>:</h4>
<p>I some cases I can't even see any warning with <code>-vvvv</code>, yet it prints 1 warning 1 duplicate <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> </p>
<div class="codehilite"><pre><span></span><code>    Checking cfg-if v0.1.10
     Running `CARGO=/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=cfg_if CARGO_MANIFEST_DIR=/home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/cfg-if-0.1.10 CARGO_PKG_AUTHORS=&#39;Alex Crichton &lt;alex@alexcrichton.com&gt;&#39; CARGO_PKG_DESCRIPTION=&#39;A macro to ergonomically define an item depending on a large number of #[cfg]
parameters. Structured like an if-else chain, the first matching branch is the
item that gets emitted.
&#39; CARGO_PKG_HOMEPAGE=&#39;https://github.com/alexcrichton/cfg-if&#39; CARGO_PKG_LICENSE=MIT/Apache-2.0 CARGO_PKG_LICENSE_FILE=&#39;&#39; CARGO_PKG_NAME=cfg-if CARGO_PKG_REPOSITORY=&#39;https://github.com/alexcrichton/cfg-if&#39; CARGO_PKG_VERSION=0.1.10 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=1 CARGO_PKG_VERSION_PATCH=10 CARGO_PKG_VERSION_PRE=&#39;&#39; LD_LIBRARY_PATH=&#39;/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/release/deps:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib::/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/master/lib/&#39; /home/matthias/.cargo/bin/sccache rustc --crate-name cfg_if --edition=2018 /home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/cfg-if-0.1.10/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,future-incompat --crate-type lib --emit=dep-info,metadata -C opt-level=3 -C embed-bitcode=no -C codegen-units=4 -C debuginfo=0 --cfg &#39;feature=&quot;compiler_builtins&quot;&#39; --cfg &#39;feature=&quot;core&quot;&#39; --cfg &#39;feature=&quot;rustc-dep-of-std&quot;&#39; -C metadata=b46a1d616a5fd635 -C extra-filename=-b46a1d616a5fd635 --out-dir /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/release/deps --extern compiler_builtins=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/libcompiler_builtins-207543c1ef039823.rmeta --extern core=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/librustc_std_workspace_core-8c6850880d72c4c4.rmeta --cap-lints warn --sysroot /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot -Zsymbol-mangling-version=legacy -Zforce-unstable-if-unmarked -Zmacro-backtrace -Clink-args=-Wl,-z,origin &#39;-Clink-args=-Wl,-rpath,$ORIGIN/../lib&#39; -Cprefer-dynamic &#39;-Zcrate-attr=doc(html_root_url=&quot;https://doc.rust-lang.org/nightly/&quot;)&#39; -Z binary-dep-depinfo -L native=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-963358db9ced83fc/out`
warning: `cfg-if` (lib) generated 1 warning (1 duplicate)
    Checking adler v0.2.3
     Running `CARGO=/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=adler CARGO_MANIFEST_DIR=/home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/adler-0.2.3 CARGO_PKG_AUTHORS=&#39;Jonas Schievink &lt;jonasschievink@gmail.com&gt;&#39; CARGO_PKG_DESCRIPTION=&#39;A simple clean-room implementation of the Adler-32 checksum&#39; CARGO_PKG_HOMEPAGE=&#39;&#39; CARGO_PKG_LICENSE=&#39;0BSD OR MIT OR Apache-2.0&#39; CARGO_PKG_LICENSE_FILE=&#39;&#39; CARGO_PKG_NAME=adler CARGO_PKG_REPOSITORY=&#39;https://github.com/jonas-schievink/adler.git&#39; CARGO_PKG_VERSION=0.2.3 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=2 CARGO_PKG_VERSION_PATCH=3 CARGO_PKG_VERSION_PRE=&#39;&#39; LD_LIBRARY_PATH=&#39;/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/release/deps:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib::/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/master/lib/&#39; /home/matthias/.cargo/bin/sccache rustc --crate-name adler /home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/adler-0.2.3/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,future-incompat --crate-type lib --emit=dep-info,metadata -C opt-level=3 -C embed-bitcode=no -C codegen-units=4 -C debuginfo=0 --cfg &#39;feature=&quot;compiler_builtins&quot;&#39; --cfg &#39;feature=&quot;core&quot;&#39; --cfg &#39;feature=&quot;rustc-dep-of-std&quot;&#39; -C metadata=43f3f9ffff163ec8 -C extra-filename=-43f3f9ffff163ec8 --out-dir /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/release/deps --extern compiler_builtins=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/libcompiler_builtins-207543c1ef039823.rmeta --extern core=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/librustc_std_workspace_core-8c6850880d72c4c4.rmeta --cap-lints warn --sysroot /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot -Zsymbol-mangling-version=legacy -Zforce-unstable-if-unmarked -Zmacro-backtrace -Clink-args=-Wl,-z,origin &#39;-Clink-args=-Wl,-rpath,$ORIGIN/../lib&#39; -Cprefer-dynamic &#39;-Zcrate-attr=doc(html_root_url=&quot;https://doc.rust-lang.org/nightly/&quot;)&#39; -Z binary-dep-depinfo -L native=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-963358db9ced83fc/out`
warning: `adler` (lib) generated 1 warning (1 duplicate)
    Checking rustc-demangle v0.1.21
     Running `CARGO=/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/bin/cargo CARGO_CRATE_NAME=rustc_demangle CARGO_MANIFEST_DIR=/home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/rustc-demangle-0.1.21 CARGO_PKG_AUTHORS=&#39;Alex Crichton &lt;alex@alexcrichton.com&gt;&#39; CARGO_PKG_DESCRIPTION=&#39;Rust compiler symbol demangling.
&#39; CARGO_PKG_HOMEPAGE=&#39;https://github.com/alexcrichton/rustc-demangle&#39; CARGO_PKG_LICENSE=MIT/Apache-2.0 CARGO_PKG_LICENSE_FILE=&#39;&#39; CARGO_PKG_NAME=rustc-demangle CARGO_PKG_REPOSITORY=&#39;https://github.com/alexcrichton/rustc-demangle&#39; CARGO_PKG_VERSION=0.1.21 CARGO_PKG_VERSION_MAJOR=0 CARGO_PKG_VERSION_MINOR=1 CARGO_PKG_VERSION_PATCH=21 CARGO_PKG_VERSION_PRE=&#39;&#39; LD_LIBRARY_PATH=&#39;/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/release/deps:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib::/home/matthias/.rustup/toolchains/nightly-x86_64-unknown-linux-gnu/lib:/home/matthias/.rustup/toolchains/master/lib/&#39; /home/matthias/.cargo/bin/sccache rustc --crate-name rustc_demangle /home/matthias/.cargo/registry/src/github.com-1ecc6299db9ec823/rustc-demangle-0.1.21/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,future-incompat --crate-type lib --emit=dep-info,metadata -C opt-level=3 -C embed-bitcode=no -C codegen-units=4 -C debuginfo=0 --cfg &#39;feature=&quot;compiler_builtins&quot;&#39; --cfg &#39;feature=&quot;core&quot;&#39; --cfg &#39;feature=&quot;rustc-dep-of-std&quot;&#39; -C metadata=c62c6b6f315882fa -C extra-filename=-c62c6b6f315882fa --out-dir /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps --target x86_64-unknown-linux-gnu -L dependency=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps -L dependency=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/release/deps --extern compiler_builtins=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/libcompiler_builtins-207543c1ef039823.rmeta --extern core=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/deps/librustc_std_workspace_core-8c6850880d72c4c4.rmeta --cap-lints warn --sysroot /home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot -Zsymbol-mangling-version=legacy -Zforce-unstable-if-unmarked -Zmacro-backtrace -Clink-args=-Wl,-z,origin &#39;-Clink-args=-Wl,-rpath,$ORIGIN/../lib&#39; -Cprefer-dynamic &#39;-Zcrate-attr=doc(html_root_url=&quot;https://doc.rust-lang.org/nightly/&quot;)&#39; -Z binary-dep-depinfo -L native=/home/matthias/vcs/github/rust/build/x86_64-unknown-linux-gnu/stage0-std/x86_64-unknown-linux-gnu/release/build/compiler_builtins-963358db9ced83fc/out`
warning: `rustc-demangle` (lib) generated 1 warning (1 duplicate)
</code></pre></div>



<a name="266980202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980202" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980202">(Jan 05 2022 at 19:35)</a>:</h4>
<p>Is that due to <code>-Z symbol-mangling-version</code>?</p>



<a name="266980219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980219">(Jan 05 2022 at 19:35)</a>:</h4>
<p>I think that was fixed yesterday.</p>



<a name="266980404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980404">(Jan 05 2022 at 19:37)</a>:</h4>
<p>If so, the reason is that non-lint warnings aren't capped.</p>



<a name="266980446"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980446" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980446">(Jan 05 2022 at 19:37)</a>:</h4>
<p><code>-Zsymbol-mangling-version=legacy</code> is part of the rustc invocation</p>



<a name="266980545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980545">(Jan 05 2022 at 19:38)</a>:</h4>
<blockquote>
<p>I think that was fixed yesterday.</p>
</blockquote>
<p>so it should work x.py clippy of rustc master since cargo was updated a couple of hours ago?<br>
let me see</p>



<a name="266980638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980638">(Jan 05 2022 at 19:39)</a>:</h4>
<p>Yea, <a href="https://github.com/rust-lang/rust/issues/92516">#92516</a> changed it so that it will use <code>-C</code> instead, which won't issue a warning.</p>



<a name="266980726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980726" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980726">(Jan 05 2022 at 19:39)</a>:</h4>
<p>ah, I see at the very beginning <code>warning: </code>-Z symbol-mangling-version<code> is deprecated; use </code>-C symbol-mangling-version`<br>
so it dedupes that from all the crates?</p>



<a name="266980777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980777" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980777">(Jan 05 2022 at 19:40)</a>:</h4>
<p>fun xD</p>



<a name="266980863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> matthiaskrgr <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980863">(Jan 05 2022 at 19:41)</a>:</h4>
<p>But ok, I guess it's just a matter of time until this is solved then, thanks :)</p>



<a name="266980868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20warnings%20on%20none-local%20deps%3F/near/266980868" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20warnings.20on.20none-local.20deps.3F.html#266980868">(Jan 05 2022 at 19:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="217864">matthiaskrgr</span> has marked this topic as resolved.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
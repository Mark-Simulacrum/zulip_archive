<html>
<head><meta charset="utf-8"><title>Subcommand configuration best practice · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html">Subcommand configuration best practice</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="265072220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265072220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Celina V. <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265072220">(Dec 15 2021 at 20:41)</a>:</h4>
<p>Hi,</p>
<p>I am currently working on <a href="https://github.com/model-checking/rmc">RMC</a>. We support running rmc as a standalone binary or with <code>cargo rmc</code>. I'm looking at adding support to configuration files and I was wondering what is the best practice to configure cargo subcommands. </p>
<p>Is it OK / recommended to add new sections to cargo manifest file? Thanks</p>



<a name="265072778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265072778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265072778">(Dec 15 2021 at 20:46)</a>:</h4>
<p>What about the <code>[package.metadata]</code> section? This allows you to add arbitrary metadata for tools.</p>



<a name="265073335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265073335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265073335">(Dec 15 2021 at 20:51)</a>:</h4>
<p>In endorsing <span class="user-mention" data-user-id="133247">@bjorn3</span> s comment, <code>cargo-release</code> uses <code>[package.metadata]</code> and <code>[workspace.metadata]</code> in <code>Cargo.toml</code> for project configuration, see <a href="https://github.com/crate-ci/cargo-release/blob/master/src/config.rs#L331">config.rs</a></p>



<a name="265073506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265073506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Celina V. <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265073506">(Dec 15 2021 at 20:52)</a>:</h4>
<p>Perfect! That's exactly what I was looking for. Thank you!</p>



<a name="265073614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265073614" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pinkforest(she/her) <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265073614">(Dec 15 2021 at 20:53)</a>:</h4>
<p>what kind of configuration? Fguring out Manifest file is a moving part that has been re-implemented in alot of sub-commands. Typically runtime configuration is via runtime flags / environment where runtime flags could point to .toml configuration. Secrets and things are typically in environment variables and I wouldn't put that kind of stuff into manifest. It is bigger pain to manage a static file for CI runs.</p>



<a name="265073729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265073729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pinkforest(she/her) <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265073729">(Dec 15 2021 at 20:54)</a>:</h4>
<p>(We've had RFC for a while open to expose cargo manifest location to sub-commands - it's a pain to maintain this logistic)</p>



<a name="265074437"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Subcommand%20configuration%20best%20practice/near/265074437" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pinkforest(she/her) <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Subcommand.20configuration.20best.20practice.html#265074437">(Dec 15 2021 at 21:00)</a>:</h4>
<p>This (see usage) is how tarpaulin handles it <a href="https://github.com/xd009642/tarpaulin">https://github.com/xd009642/tarpaulin</a> - it can be easily plugged into CI</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
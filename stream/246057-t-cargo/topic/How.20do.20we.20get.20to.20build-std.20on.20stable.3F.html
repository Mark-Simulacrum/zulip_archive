<html>
<head><meta charset="utf-8"><title>How do we get to build-std on stable? · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/How.20do.20we.20get.20to.20build-std.20on.20stable.3F.html">How do we get to build-std on stable?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274347138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/How%20do%20we%20get%20to%20build-std%20on%20stable%3F/near/274347138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ben Kimock (Saethlin) <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/How.20do.20we.20get.20to.20build-std.20on.20stable.3F.html#274347138">(Mar 07 2022 at 03:59)</a>:</h4>
<p>t-libs mentioned interest in build-std by default, but also that it's mostly a Cargo question. IMO the big win from this is way more debug assertions in test programs. For example, in this Reddit post a few hours ago, OP would not have been mislead if they had debug assertions on in the standard library: <a href="https://www.reddit.com/r/rust/comments/t87itu/how_can_i_debugreport_possible_compiler_bugs/">https://www.reddit.com/r/rust/comments/t87itu/how_can_i_debugreport_possible_compiler_bugs/</a></p>
<p>So... what actually needs to be done to have build-std on stable or by default?</p>



<a name="274347891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/How%20do%20we%20get%20to%20build-std%20on%20stable%3F/near/274347891" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/How.20do.20we.20get.20to.20build-std.20on.20stable.3F.html#274347891">(Mar 07 2022 at 04:13)</a>:</h4>
<p>It's questionable whether or not it will be possible to ever have it on by default.  I would like to get there, but there will be some drawbacks and major obstacles.</p>
<p>But before talking about having it on by default, there is still a very long road to getting it stabilized.  <a href="https://github.com/rust-lang/wg-cargo-std-aware/issues">https://github.com/rust-lang/wg-cargo-std-aware/issues</a> contains all the issues.</p>
<p>A massive impediment is the additional compile time and overhead.  One possible way to alleviate that is to have a global shared cache.  That's a pretty big project on its own.  That also would still incur a first-time penalty to building it, and would be affected by profiles and such.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
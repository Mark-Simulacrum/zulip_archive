<html>
<head><meta charset="utf-8"><title>✔ CI failure on --package due to optional_opt · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html">✔ CI failure on --package due to optional_opt</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269972480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269972480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269972480">(Jan 31 2022 at 02:17)</a>:</h4>
<p>When I saw the CI fix in <a href="https://github.com/rust-lang/cargo/pull/10336">https://github.com/rust-lang/cargo/pull/10336</a> , I wondered why it was that <code>--package</code> took an optional argument.</p>



<a name="269972490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269972490" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269972490">(Jan 31 2022 at 02:17)</a>:</h4>
<p>It looks like that was introduced in commit <code>139247e4e63c454e3f14d7aecb86779458422f95</code></p>



<a name="269972636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269972636" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269972636">(Jan 31 2022 at 02:20)</a>:</h4>
<p>But as far as I can tell, the functionality introduced in that commit doesn't seem to function.</p>



<a name="269972644"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269972644" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269972644">(Jan 31 2022 at 02:20)</a>:</h4>
<p>I tried <code>cargo pkgid -p</code> and <code>cargo run -p</code>, and they both just give errors, they don't list available packages.</p>



<a name="269972656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269972656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269972656">(Jan 31 2022 at 02:21)</a>:</h4>
<p>On the basis that it doesn't work and people presumably aren't relying on it, would anyone object to changing the <code>optional_opt</code> to just <code>opt</code> on <code>--package</code>?</p>



<a name="269972954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269972954" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269972954">(Jan 31 2022 at 02:28)</a>:</h4>
<p>It seems to work for me:</p>
<div class="codehilite"><pre><span></span><code>~/Proj/rust/cargo&gt; cargo build -p
error: &quot;--package &lt;SPEC&gt;&quot; requires a SPEC format value, which can be any package ID specifier in the dependency graph.
Run `cargo help pkgid` for more information about SPEC format.

Possible packages/workspace members:
    cargo
</code></pre></div>



<a name="269973645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269973645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269973645">(Jan 31 2022 at 02:42)</a>:</h4>
<p>Huh. I stand corrected; it does indeed. I think I somehow parsed the first two lines as "usage message" and completely failed to realize that the last two lines were actually the list of packages.</p>



<a name="269973652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269973652" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269973652">(Jan 31 2022 at 02:43)</a>:</h4>
<p>Sorry for the noise.</p>



<a name="269973654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269973654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269973654">(Jan 31 2022 at 02:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> has marked this topic as resolved.</p>



<a name="269973692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/%E2%9C%94%20CI%20failure%20on%20--package%20due%20to%20optional_opt/near/269973692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/.E2.9C.94.20CI.20failure.20on.20--package.20due.20to.20optional_opt.html#269973692">(Jan 31 2022 at 02:44)</a>:</h4>
<p>/me facepalms deeply.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
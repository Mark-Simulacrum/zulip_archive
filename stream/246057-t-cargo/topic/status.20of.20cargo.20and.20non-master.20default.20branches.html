<html>
<head><meta charset="utf-8"><title>status of cargo and non-master default branches · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html">status of cargo and non-master default branches</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="235240421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235240421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235240421">(Apr 19 2021 at 20:06)</a>:</h4>
<p>Hey all! I wanted to quickly check in on the topic of non-master default branches. I know that in <a href="https://github.com/rust-lang/cargo/pull/8364">https://github.com/rust-lang/cargo/pull/8364</a> y'all added support for this, but then there were some other issues after that (I think?). Do folks have a general idea about the current user story around (a) maintainers renaming branches and (b) crate users when the crate renames branches? AIUI this only affects git deps. It would also be nice to write this up and publish it somehow so community members can benefit from it.</p>
<p>cc <span class="user-mention" data-user-id="120518">@Eric Huss</span> <span class="user-mention" data-user-id="116015">@Alex Crichton</span></p>



<a name="235241280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235241280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235241280">(Apr 19 2021 at 20:12)</a>:</h4>
<p>this change was enabled in <a href="https://github.com/rust-lang/cargo/pull/9133">https://github.com/rust-lang/cargo/pull/9133</a> and is currently in beta I believe,  so it should all ride to stable soon.</p>
<p>I haven't investigated GitHub's branch renaming feature so I don't know how that affects things here. Otherwise once this support hits stable then users can change their default branch and git dependencies which don't reference any branch will automatically use the new branch name. And yeah this only affects git deps</p>



<a name="235241686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235241686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235241686">(Apr 19 2021 at 20:14)</a>:</h4>
<p>The change will be noted in the main release notes (<a href="https://github.com/rust-lang/rust/issues/84183">#84183</a>) and we can suggest that it be included in the blog post (not sure who is writing it this time).</p>



<a name="235247218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235247218" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235247218">(Apr 19 2021 at 20:56)</a>:</h4>
<p>Good call, thanks! Yeah it would be amazing to include a blurb of</p>
<ul>
<li>How does this affect me if I'm a maintainer and want to change my branch? "You can change your branch if you'd like and it should all Just Work, except for consumers who have the master branch explicitly noted as git deps"</li>
<li>How does this affect me if I'm a library user? "Things will continue to work, just keep an eye out for any deps specified with <code>{git = ..., branch = master}</code>, in case someone renames them.</li>
</ul>



<a name="235247230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235247230" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Manish Goregaokar <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235247230">(Apr 19 2021 at 20:56)</a>:</h4>
<p>in the main blog post</p>



<a name="235255358"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235255358" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235255358">(Apr 19 2021 at 21:49)</a>:</h4>
<p>Hey! I'm writing the post this cycle, and I've made a note to include this information- thanks!</p>



<a name="235287739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235287739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235287739">(Apr 20 2021 at 04:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I think there'd also be value in linking to <a href="https://github.com/github/renaming">https://github.com/github/renaming</a> in those notes, to help people know how to rename their branches.</p>



<a name="235287864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235287864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235287864">(Apr 20 2021 at 05:00)</a>:</h4>
<p>And it might also be useful to link to an explanation of why we're doing this, such as the one on <a href="https://inclusivenaming.org/">https://inclusivenaming.org/</a> , but I don't know if Rust wants to link there without also being a member.</p>



<a name="235409409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235409409" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235409409">(Apr 20 2021 at 20:28)</a>:</h4>
<p>As a note, we decided in today's Cargo meeting to revert this changing of defaults on the current beta branch in <a href="https://github.com/rust-lang/cargo/pull/9383">https://github.com/rust-lang/cargo/pull/9383</a>. This is due to some of the breakage listed there and giving me some more time to investigate it.</p>



<a name="235409433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235409433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235409433">(Apr 20 2021 at 20:28)</a>:</h4>
<p>This means that Rust 1.53 will be the first with the new branch defaults</p>



<a name="235409459"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/status%20of%20cargo%20and%20non-master%20default%20branches/near/235409459" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/status.20of.20cargo.20and.20non-master.20default.20branches.html#235409459">(Apr 20 2021 at 20:28)</a>:</h4>
<p>Thanks for the update!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
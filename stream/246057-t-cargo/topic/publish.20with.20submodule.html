<html>
<head><meta charset="utf-8"><title>publish with submodule · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html">publish with submodule</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="206295151"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206295151" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206295151">(Aug 07 2020 at 18:46)</a>:</h4>
<p>Right now I'm running into an issue with publishing a crate that has a git submodule that contains a <code>Cargo.toml</code> file, it seems to be the same issue as <a href="https://github.com/rust-lang/cargo/issues/2657#issuecomment-217554403">https://github.com/rust-lang/cargo/issues/2657#issuecomment-217554403</a></p>



<a name="206295180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206295180" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206295180">(Aug 07 2020 at 18:46)</a>:</h4>
<p>but the original issue doesn't have a resolution other than "use an old version of cargo before a change was introduced that makes doing this thing impossible"</p>



<a name="206295223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206295223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206295223">(Aug 07 2020 at 18:47)</a>:</h4>
<p>so I don't know how to work around the fact that cargo completely ignores my <code>include</code> section in the <code>Cargo.toml</code> for all files within the git submodule.</p>



<a name="206296262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206296262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206296262">(Aug 07 2020 at 18:56)</a>:</h4>
<p>I also opened an issue for this <a href="https://github.com/rust-lang/cargo/issues/8597">https://github.com/rust-lang/cargo/issues/8597</a></p>



<a name="206619983"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206619983" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206619983">(Aug 11 2020 at 19:28)</a>:</h4>
<p>Ping, I still need help figuring this out</p>



<a name="206620413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620413">(Aug 11 2020 at 19:32)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> just to make sure I understand, the reason this is blocking you is that you expect the published crate to contain the files of the subdirectory, but you're not depending on that subdirectory beyond just C++ includes?</p>
<p>Would deleting the subdirectory's cargo.toml work for now?</p>



<a name="206620468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620468" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620468">(Aug 11 2020 at 19:32)</a>:</h4>
<p>I think that would work</p>



<a name="206620481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620481">(Aug 11 2020 at 19:33)</a>:</h4>
<p>tho i can't commit that</p>



<a name="206620492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620492">(Aug 11 2020 at 19:33)</a>:</h4>
<p>but maybe thats fine</p>



<a name="206620638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620638">(Aug 11 2020 at 19:34)</a>:</h4>
<p>hm but actually zcash/src/script/zcashconsensus.h isn't a file anyway?</p>



<a name="206620682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620682">(Aug 11 2020 at 19:35)</a>:</h4>
<p>I guess "depend/" is needed</p>



<a name="206620747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620747" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620747">(Aug 11 2020 at 19:35)</a>:</h4>
<p>oh hm but then it includes a bunch of files <em>not</em> in the include list? That's confusing</p>



<a name="206620766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620766">(Aug 11 2020 at 19:35)</a>:</h4>
<p>I'm seeing</p>
<div class="codehilite"><pre><span></span><code>.github/workflows/ci.yml
.gitignore
.gitmodules
Cargo.toml
Cargo.toml.orig
LICENSE
README.md
build.rs
depend/check_uint128_t.c
depend/zcash/.gitignore
depend/zcash/README.md
depend/zcash/contrib/README.md
depend/zcash/contrib/bitrpc/README.md
depend/zcash/contrib/ci-builders/README.md
depend/zcash/contrib/ci-workers/README.md
depend/zcash/contrib/devtools/README.md
depend/zcash/contrib/docker/.gitignore
depend/zcash/contrib/docker/README.md
depend/zcash/contrib/gitian-descriptors/README.md
depend/zcash/contrib/init/README.md
depend/zcash/contrib/linearize/README.md
depend/zcash/contrib/macdeploy/LICENSE
depend/zcash/contrib/macdeploy/README.md
depend/zcash/contrib/qos/README.md
depend/zcash/contrib/seeds/README.md
depend/zcash/contrib/spendfrom/README.md
depend/zcash/contrib/test-patches/README.md
depend/zcash/contrib/testgen/README.md
depend/zcash/contrib/verifysfbinaries/README.md
depend/zcash/depends/.gitignore
depend/zcash/depends/README.md
depend/zcash/qa/rpc-tests/.gitignore
depend/zcash/qa/rpc-tests/README.md
depend/zcash/share/rpcuser/README.md
depend/zcash/src/bench/.gitignore
depend/zcash/src/crypto/ctaes/README.md
depend/zcash/src/leveldb/.gitignore
depend/zcash/src/leveldb/LICENSE
depend/zcash/src/leveldb/README.md
depend/zcash/src/obj/.gitignore
depend/zcash/src/rust/README.md
depend/zcash/src/script/zcashconsensus.h
depend/zcash/src/secp256k1/.gitignore
depend/zcash/src/secp256k1/README.md
depend/zcash/src/secp256k1/obj/.gitignore
depend/zcash/src/test/README.md
depend/zcash/src/test/data/README.md
depend/zcash/src/univalue/.gitignore
depend/zcash/src/univalue/README.md
depend/zcash/src/univalue/build-aux/m4/.gitignore
depend/zcash/src/univalue/lib/.gitignore
depend/zcash/src/univalue/test/.gitignore
src/blake2b.rs
src/lib.rs
</code></pre></div>



<a name="206620769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620769">(Aug 11 2020 at 19:35)</a>:</h4>
<p>oh thats because I was experimenting a bunch</p>



<a name="206620825"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620825" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620825">(Aug 11 2020 at 19:36)</a>:</h4>
<p>i was just trying to get it to copy a file</p>



<a name="206620831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620831">(Aug 11 2020 at 19:36)</a>:</h4>
<p>any file</p>



<a name="206620835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620835">(Aug 11 2020 at 19:36)</a>:</h4>
<p>from depend/zcash</p>



<a name="206620854"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620854" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620854">(Aug 11 2020 at 19:36)</a>:</h4>
<p>no but it shouldn't be doing that</p>



<a name="206620915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620915" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620915">(Aug 11 2020 at 19:36)</a>:</h4>
<p><span aria-label="grimacing" class="emoji emoji-1f62c" role="img" title="grimacing">:grimacing:</span></p>



<a name="206620917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620917">(Aug 11 2020 at 19:36)</a>:</h4>
<p><em>oh</em></p>



<a name="206620927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620927" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620927">(Aug 11 2020 at 19:36)</a>:</h4>
<p>your paths are not starting with <code>/</code> I think</p>



<a name="206620996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206620996" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206620996">(Aug 11 2020 at 19:37)</a>:</h4>
<p>yeah prefixing with that gets me down to </p>
<div class="codehilite"><pre><span></span><code>.github/workflows/ci.yml
.gitignore
.gitmodules
Cargo.toml
Cargo.toml.orig
LICENSE
README.md
build.rs
depend/check_uint128_t.c
depend/zcash/src/script/zcashconsensus.h
src/blake2b.rs
src/lib.rs
</code></pre></div>



<a name="206621042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621042">(Aug 11 2020 at 19:37)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> is there a reason you're publishing .github/workflows? (and .gitignore too for that matter)</p>



<a name="206621153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621153" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621153">(Aug 11 2020 at 19:38)</a>:</h4>
<p>ooh cool</p>



<a name="206621165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621165">(Aug 11 2020 at 19:38)</a>:</h4>
<p>no,</p>



<a name="206621173"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621173" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621173">(Aug 11 2020 at 19:38)</a>:</h4>
<p>that was just in the default include list</p>



<a name="206621184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621184">(Aug 11 2020 at 19:38)</a>:</h4>
<p>and I didn't really want to fk with the defaults</p>



<a name="206621280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621280">(Aug 11 2020 at 19:39)</a>:</h4>
<p>really? .github is in our default include list?</p>



<a name="206621283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621283" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621283">(Aug 11 2020 at 19:39)</a>:</h4>
<p>that's so strange!</p>



<a name="206621301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621301" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621301">(Aug 11 2020 at 19:39)</a>:</h4>
<p>or is that the zcash default you mean?</p>



<a name="206621370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621370" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621370">(Aug 11 2020 at 19:40)</a>:</h4>
<p>(I suspect the "default" include list is just everything in ., I guess?)</p>



<a name="206621497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621497">(Aug 11 2020 at 19:41)</a>:</h4>
<p><span class="user-mention" data-user-id="220273">@Jane Lusby</span> that should hopefully unblock you though I think there's still a diagnostic bug here at least</p>



<a name="206621506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621506">(Aug 11 2020 at 19:41)</a>:</h4>
<p>we shouldn't silently omit things in include lists</p>



<a name="206621535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621535">(Aug 11 2020 at 19:41)</a>:</h4>
<p>yea that's perfect</p>



<a name="206621547"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621547" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621547">(Aug 11 2020 at 19:42)</a>:</h4>
<p>tyty <span class="user-mention" data-user-id="116122">@simulacrum</span></p>



<a name="206621623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621623">(Aug 11 2020 at 19:42)</a>:</h4>
<p>i don't think theres any special configuration to get it to include the .github but I can investigate that</p>



<a name="206621632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621632">(Aug 11 2020 at 19:42)</a>:</h4>
<p>one sec</p>



<a name="206621670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621670" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621670">(Aug 11 2020 at 19:42)</a>:</h4>
<p>right, I meant that we don't <em>exclude</em> anything by default</p>



<a name="206621683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621683">(Aug 11 2020 at 19:42)</a>:</h4>
<p>oo</p>



<a name="206621691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621691">(Aug 11 2020 at 19:42)</a>:</h4>
<p>yea</p>



<a name="206621695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621695">(Aug 11 2020 at 19:43)</a>:</h4>
<p>(other than subcrates, I guess)</p>



<a name="206621724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206621724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206621724">(Aug 11 2020 at 19:43)</a>:</h4>
<p>seems like a reasonable approach</p>



<a name="206768788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768788">(Aug 13 2020 at 00:12)</a>:</h4>
<p>wait, <span class="user-mention" data-user-id="116122">@simulacrum</span> do you have a copy of the <code>include</code> you used in the toml?</p>



<a name="206768807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768807">(Aug 13 2020 at 00:12)</a>:</h4>
<p>I finally got to the point where I needed to try to apply the work around you mentioned and I'm having trouble reproing the fix</p>



<a name="206768811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768811" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768811">(Aug 13 2020 at 00:12)</a>:</h4>
<p>Hm for which step?</p>



<a name="206768826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768826">(Aug 13 2020 at 00:12)</a>:</h4>
<p><code>your paths are not starting with / I think</code></p>



<a name="206768839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768839">(Aug 13 2020 at 00:13)</a>:</h4>
<p>did you also remove the cargo.toml in the subcrate?</p>



<a name="206768840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768840" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768840">(Aug 13 2020 at 00:13)</a>:</h4>
<p>I think the only change I made was to prefix all the strings in include with a /</p>



<a name="206768842"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768842" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768842">(Aug 13 2020 at 00:13)</a>:</h4>
<p>Yes</p>



<a name="206768844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768844" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768844">(Aug 13 2020 at 00:13)</a>:</h4>
<p>ooo</p>



<a name="206768845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768845">(Aug 13 2020 at 00:13)</a>:</h4>
<p>okay</p>



<a name="206768847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768847" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768847">(Aug 13 2020 at 00:13)</a>:</h4>
<p>i bet thats what I'm missing</p>



<a name="206768851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768851" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768851">(Aug 13 2020 at 00:13)</a>:</h4>
<p>I think I removed both toml and lock</p>



<a name="206768860"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768860" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768860">(Aug 13 2020 at 00:13)</a>:</h4>
<p>just removing the toml fixes it</p>



<a name="206768861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768861">(Aug 13 2020 at 00:13)</a>:</h4>
<p>Probably only one is needed though</p>



<a name="206768864"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768864" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768864">(Aug 13 2020 at 00:13)</a>:</h4>
<p>yea</p>



<a name="206768866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/publish%20with%20submodule/near/206768866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jane Lusby <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/publish.20with.20submodule.html#206768866">(Aug 13 2020 at 00:13)</a>:</h4>
<p>tytyty</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>cargo outdated · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html">cargo outdated</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="264295629"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264295629" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathspy <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264295629">(Dec 09 2021 at 12:50)</a>:</h4>
<p>Sorry this is a double post from <a class="stream" data-stream-id="301329" href="/#narrow/stream/301329-t-devtools">#t-devtools</a> since I didn't know this stream existed</p>
<p>So I was a bit confused when I tried using <a href="https://github.com/kbknapp/cargo-outdated"><code>cargo outdated</code></a> why the section of "How it works" says it creates a temporary project and runs <code>cargo update</code> there, doesn't cargo have a local index that it could just consult for update information and figure this out easily?<br>
So after spending like a day randomly digging through <code>cargo</code> (the library)'s API I ended up with this <a href="/user_uploads/4715/ZKVlAJD9p3HjwQaduAJhxM5k/Screenshot-2021-12-09-at-13.31.08.png">Screenshot of me running it on a really old mostly abandoned project</a></p>
<p>This is just a really quick draft without much deep thought or anything of that sort, it's just 150 lines of code that uses <code>cargo</code> library to check the <a href="https://docs.rs/cargo/0.58.0/cargo/core/manifest/struct.Manifest.html"><code>Manifest</code></a> and <a href="https://docs.rs/cargo/0.58.0/cargo/core/struct.Resolve.html"><code>Resolve</code></a> for dependencies and then checks the index for updates. (but it is already much faster than running <code>cargo outdated</code>)</p>
<p>I insisted on using cargo's internals instead of external libraries to keep this PR-able to <code>cargo</code>, but I am not sure what's the process here, I know there's a <a href="https://github.com/rust-lang/cargo/issues/4309">cargo oudated issue</a> which have been a bit silent now. So do I keep working on this and then just PR it? What would a Minimum Viable Product of the feature be so that I work towards that? Or is it better for me to develop it out of band and then PR it wholesale later down the line?</p>
<p>Thanks <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="264359631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264359631" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264359631">(Dec 09 2021 at 20:11)</a>:</h4>
<p>Sounds really great! Posting here and waiting for some feedback from a Cargo team member is probably a good strategy</p>



<a name="264359717"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264359717" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264359717">(Dec 09 2021 at 20:12)</a>:</h4>
<p>If it were me, I'd explore options to cargo update before a new command, maybe something like --dry-run?</p>



<a name="264359916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264359916" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264359916">(Dec 09 2021 at 20:13)</a>:</h4>
<p>Bit of a tangent, but if we want to go for the interactive experience mentioned (or in general if you think this tooling should be able to update manifests rather than only reporting) in that issue it might be worth exploring the cargo edit work that <span class="user-mention" data-user-id="424212">@Ed Page</span> has been pushing forward and helping out with that?</p>



<a name="264360128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264360128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264360128">(Dec 09 2021 at 20:15)</a>:</h4>
<p><a href="https://github.com/ordian/toml_edit/issues?q=is%3Aissue+is%3Aopen+label%3Acargo">Here are the blocking issues</a> for getting <code>toml_edit</code> into cargo.  I can help on mentoring these issues.  Hopefully soon I'll also get back to them (I'm doing some post-release cleanup for clap 3.0.0-rc.0)</p>



<a name="264371336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264371336" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Hans Kratz <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264371336">(Dec 09 2021 at 21:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="226095">Dirkjan Ochtman</span> <a href="#narrow/stream/246057-t-cargo/topic/cargo.20outdated/near/264359717">said</a>:</p>
<blockquote>
<p>If it were me, I'd explore options to cargo update before a new command, maybe something like --dry-run?</p>
</blockquote>
<p>There already is <code>cargo update --dry-run -v</code> but with that you can not check if crates had semver-incompatible version bumps.</p>



<a name="264375484"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264375484" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264375484">(Dec 09 2021 at 22:17)</a>:</h4>
<p>cargo-edit has <code>cargo upgrade --dry-run</code>. (upgrade, not update)</p>



<a name="264430051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20outdated/near/264430051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mathspy <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20outdated.html#264430051">(Dec 10 2021 at 10:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/246057-t-cargo/topic/cargo.20outdated/near/264375484">said</a>:</p>
<blockquote>
<p>cargo-edit has <code>cargo upgrade --dry-run</code>. (upgrade, not update)</p>
</blockquote>
<p>Oh! That kinda does what I had in mind and more honestly and since it's will eventually be upstreamed, maybe a dedicated <code>cargo outdated</code> command is not really worth it then</p>
<p><span class="user-mention" data-user-id="424212">@Ed Page</span> Thanks for that link I will see if I can help with any of those blocking issues <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Cargo.toml paths in workspace.members · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Cargo.2Etoml.20paths.20in.20workspace.2Emembers.html">Cargo.toml paths in workspace.members</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251794895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Cargo.toml%20paths%20in%20workspace.members/near/251794895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Cargo.2Etoml.20paths.20in.20workspace.2Emembers.html#251794895">(Sep 02 2021 at 22:17)</a>:</h4>
<p>Is there a reason cargo couldn't/shouldn't allow <code>workspace.members</code> to contain locations of <code>Cargo.toml</code> files rather than (that is: in addition to) the locations of the directory containing the Cargo.toml?</p>
<p>There are a lot of workspaces I've worked with that would have a substantially simpler configuration if something like this were legal:</p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[workspace]</span>
<span class="n">members</span> <span class="o">=</span> <span class="p">[</span><span class="s">"**/Cargo.toml"</span><span class="p">]</span>
</code></pre></div>



<a name="251795010"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Cargo.toml%20paths%20in%20workspace.members/near/251795010" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Cargo.2Etoml.20paths.20in.20workspace.2Emembers.html#251795010">(Sep 02 2021 at 22:18)</a>:</h4>
<p>As it is, I've seen multiple projects do <code>members = ["blah/**/src/.."]</code> as a workaround, but that's both more convoluted, and less robust.</p>



<a name="251847632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Cargo.toml%20paths%20in%20workspace.members/near/251847632" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Barbato <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Cargo.2Etoml.20paths.20in.20workspace.2Emembers.html#251847632">(Sep 03 2021 at 09:10)</a>:</h4>
<p>I'd argue that they should consider using the <code>crates/**/</code> pattern</p>



<a name="251961832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Cargo.toml%20paths%20in%20workspace.members/near/251961832" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Cargo.2Etoml.20paths.20in.20workspace.2Emembers.html#251961832">(Sep 04 2021 at 01:22)</a>:</h4>
<p>I guess, there are a lot of reasons that might not be practical, and while I typically use the pattern and don't hate it...</p>
<p>Honestly, most of the time it's only used to avoid having to micromanage the members list rather than because that's an ideal way of organizing things, IMO.</p>



<a name="251962246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Cargo.toml%20paths%20in%20workspace.members/near/251962246" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Thom Chiovoloni <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Cargo.2Etoml.20paths.20in.20workspace.2Emembers.html#251962246">(Sep 04 2021 at 01:29)</a>:</h4>
<p>Like, when I sell people on it that's really the main benefit.</p>
<p>(I guess it's sometimes nice to be able to get the crate list via <code>ls crates/*</code> but most of the time you're better off using cargo metadata for that kind of information anyway, since usually there's at least one crate in the ws which ends up as an exception to that pattern)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>cargo install metadata · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20install.20metadata.html">cargo install metadata</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254432127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20install%20metadata/near/254432127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ivrwn <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20install.20metadata.html#254432127">(Sep 22 2021 at 20:17)</a>:</h4>
<p>(This is from a proposal i made on discord. I was advised to bring it here)</p>
<p>Should .crates2.json &amp; .crates.toml be stored in $CARGO_HOME or in $CARGO_INSTALL_ROOT (or in --root)?</p>
<p>By default the are stored in $CARGO_HOME but if $CARGO_INSTALL_ROOT is available cargo stores them in there. But should cargo store them in $CARGO_INSTALL_ROOT if $CARGO_INSTALL_ROOT is defined or in --root if --root is provided?</p>
<p>If i set $CARGO_INSTALL_ROOT (or install.root) to my home directory in order to get cargo to store binaries in $HOME/bin then those two files will get stored in home directory.</p>
<p>(I assume storing binaries in ~/bin is a common thing and dotfiles in home directory should be avoided)</p>
<p>I propose that cargo should always store .crates2.json &amp; .crates.toml in $CARGO_HOME and store the install root of each binary in those files.</p>
<p>Also by doing this cargo install --list will be able to show all installed binaries by cargo.</p>



<a name="254445044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/cargo%20install%20metadata/near/254445044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/cargo.20install.20metadata.html#254445044">(Sep 22 2021 at 21:53)</a>:</h4>
<p>What about build systems that use cargo install --root instead of cargo build and manually determining what files to copy from the target dir? In that case you definitively do not want  the .crates2.json in CARGO_HOME to change. An example of a build system that does this is the one of redox os.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
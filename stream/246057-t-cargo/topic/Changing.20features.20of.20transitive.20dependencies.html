<html>
<head><meta charset="utf-8"><title>Changing features of transitive dependencies · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html">Changing features of transitive dependencies</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254068175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Changing%20features%20of%20transitive%20dependencies/near/254068175" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html#254068175">(Sep 20 2021 at 15:28)</a>:</h4>
<p>If I depend on <code>crate_a</code> which depends on <code>crate_b</code> and I <code>crate_b  = { default_features = False }</code> when building it. Do I need to specify that dependency on <em>my</em> crate? Or what's the expected way to set that?</p>



<a name="254071342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Changing%20features%20of%20transitive%20dependencies/near/254071342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html#254071342">(Sep 20 2021 at 15:46)</a>:</h4>
<p>You don't need to specify a dependency on <code>crate_b</code> from your top-level crate, unless your own crate needs <code>crate_b</code>.</p>



<a name="254071403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Changing%20features%20of%20transitive%20dependencies/near/254071403" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html#254071403">(Sep 20 2021 at 15:46)</a>:</h4>
<p>You <em>can</em> specify a dependency on <code>crate_b</code> and set a different set of features, and cargo will enable the union of all features enabled by any dependency on the crate.</p>



<a name="254092012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Changing%20features%20of%20transitive%20dependencies/near/254092012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> UebelAndre <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html#254092012">(Sep 20 2021 at 18:02)</a>:</h4>
<p>So in my case, the dependency has no annotations on it. </p>
<div class="codehilite" data-code-language="TOML"><pre><span></span><code><span class="k">[dependencies]</span>
<span class="n">crate_b</span> <span class="o">=</span> <span class="s">"1.0.0"</span>
</code></pre></div>
<p>This is more or less what's written. So if I add a dependency on <code>crate_b</code> and set <code>default_features = False</code>, would that disable those features?</p>



<a name="254092379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Changing%20features%20of%20transitive%20dependencies/near/254092379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html#254092379">(Sep 20 2021 at 18:04)</a>:</h4>
<blockquote>
<p>would that disable those features?</p>
</blockquote>
<p>Unfortunitly no. A dependence can only add features, not remove them.</p>



<a name="254092572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Changing%20features%20of%20transitive%20dependencies/near/254092572" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Changing.20features.20of.20transitive.20dependencies.html#254092572">(Sep 20 2021 at 18:06)</a>:</h4>
<p>If you want to remove a feature, you need to get all of your dependencys to not use that feature.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
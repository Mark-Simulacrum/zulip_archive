<html>
<head><meta charset="utf-8"><title>StableCrateId and metadata · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html">StableCrateId and metadata</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254115674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254115674" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254115674">(Sep 20 2021 at 20:49)</a>:</h4>
<p>I'm working on an extension to <a href="https://github.com/rust-lang/rust/pull/85833">rustdoc</a>. Given a function <code>foo</code> in crate <code>a</code>, this extension finds the reverse-dependencies <code>b</code> of <code>a</code>, and looks for call-sites of <code>foo</code> in <code>b</code>. For example:</p>
<div class="codehilite" data-code-language="Rust"><pre><span></span><code><span class="c1">// a/src/lib.rs</span>
<span class="k">pub</span><span class="w"> </span><span class="k">fn</span> <span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="c1">// b/src/main.rs</span>
<span class="k">use</span><span class="w"> </span><span class="n">a</span>::<span class="n">foo</span><span class="p">;</span><span class="w"></span>
<span class="k">fn</span> <span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">foo</span><span class="p">();</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The goal is to implement a feature such that when calling <code>rustdoc b/src/main.rs --scrape-examples a</code>, then this outputs a file that looks like <code>{"a::foo": [line 2 in b/src/main.rs]}</code>. I'm trying to define this file format, and the core issue is how to encode a reference to a function (like <code>foo</code>).</p>
<p>Nominally, the right tool for this (I believe) is <code>DefPathHash</code>, consisting of <code>StableCrateId</code> and <code>DefPath</code>. However, I'm running into the following issue. The workflow of this extension is as follows:</p>
<ol>
<li>Run <code>rustc a/src/lib.rs --profile check -C metadata &lt;hash&gt;</code>. This generates the <code>rmeta</code> needed to type-check the reverse-dependencies.</li>
<li>Run <code>rustdoc b/src/main.rs --scrape-examples a</code>. This generates a <code>target/tmp/b.examples</code> file. </li>
<li>Run <code>rustdoc a/src/lib.rs --with-examples target/tmp/b.examples</code>. This uses the <code>b.examples</code> file to include the call-site in <code>b::main</code> in the documentation for <code>a::foo</code>.</li>
</ol>
<p>The issue is that the <code>DefPathHash</code> for <code>a::foo</code> is not the same in steps (2) and (3). Both the <code>StableCrateId</code> and the <code>local_hash</code> of the <code>DefPath</code> are different. From the documentation of <code>StableCrateId</code>, my guess is that the root cause is the <code>-C metadata</code> flag generated by Cargo. The compile units <code>U1</code> (for checking <code>a</code>) and <code>U3</code> (for documenting <code>a</code>) have different metadata hashes, e.g. because they have different a <code>CompileKind</code>. </p>
<p>Do y'all have any recommendations for how to deal with this issue given Cargo's architecture?</p>



<a name="254123003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254123003" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254123003">(Sep 20 2021 at 21:41)</a>:</h4>
<p>this is probably something we can fix in Cargo to have steps 1/3 in your example pass the same <code>-C metadata</code> hash</p>



<a name="254123025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254123025" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254123025">(Sep 20 2021 at 21:41)</a>:</h4>
<p>I don't think there's any intrinsic need to have the hashes be different</p>



<a name="254133071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254133071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254133071">(Sep 20 2021 at 23:17)</a>:</h4>
<p>Would this be done just by hashing fewer things? eg in the metadata column of <a href="https://github.com/rust-lang/cargo/blob/master/src/cargo/core/compiler/fingerprint.rs#L56-L78">this table</a>. I think at least CompileKind  and immediate dependency's hashes would have to be removed.</p>



<a name="254133869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254133869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254133869">(Sep 20 2021 at 23:23)</a>:</h4>
<p>I don't think it can completely remove the <code>CompileMode</code>, as it is necessary to distinguish multiple variants of a crate. Cargo uses a single metadata hash value for both <code>-C metadata</code> and for the <code>-C extra-filename</code>, and the extra-filename helps prevent filename collisions on disk.  For example, building a binary as an executable, and building it as a unittest, we want to make sure those two have different filenames.  However, I think we can treat the hash of <code>CompileMode::Doc</code> and <code>CompileMode::Check</code> the same.  That hash is done <a href="https://github.com/rust-lang/cargo/blob/9a28ac83c9eb73e42ffafac552c0a55f00dbf40c/src/cargo/core/compiler/context/compilation_files.rs#L543">on this line</a>.</p>



<a name="254138432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254138432" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254138432">(Sep 21 2021 at 00:16)</a>:</h4>
<p>Thanks <span class="user-mention" data-user-id="120518">@Eric Huss</span> for the pointer. I ran an experiment and confirmed my hypothesis. With this patch, the <code>DefPathHash</code> successfully matches between the two crates: <a href="https://gist.github.com/willcrichton/0e29eba751ab80eec3d59ac972a25223">https://gist.github.com/willcrichton/0e29eba751ab80eec3d59ac972a25223</a></p>
<p>I commented out the <code>deps_metadata</code> hash, and modified the <code>CompileMode</code> hash to not distinguish <code>Doc</code> and <code>Check</code>. I also double-checked that both changes are necessary -- it's not sufficient to do either one in isolation.</p>
<p>However, I'm assuming that removing <code>deps_metadata</code> entirely is not good? So I'm not sure how to resolve that issue.</p>



<a name="254141622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254141622" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254141622">(Sep 21 2021 at 01:04)</a>:</h4>
<p>I would expect the <code>deps_metadata</code> to be the same between <code>cargo check</code> and <code>cargo doc</code>.  If it's not, maybe investigate why?</p>



<a name="254224440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254224440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254224440">(Sep 21 2021 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="265377">@Will Crichton</span> this is the hash for the library when scraping the examples, right? The examples have dev-dependencies available and the main library doesn't, that might be the difference</p>



<a name="254243272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243272" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243272">(Sep 21 2021 at 17:09)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> no, the dev-dependencies would only change the hash of the compilation unit for the example, not for the library crate.</p>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> upon investigation, the difference is that for a given crate, the <code>Doc</code> unit's dependencies are a superset of the <code>Check</code> unit's dependencies. If a crate <code>a</code> has a public item that references a type <code>b::Foo</code>, then <code>b</code> is included as both a <code>Check</code> and <code>Doc</code> dependency.</p>



<a name="254243476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243476" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243476">(Sep 21 2021 at 17:10)</a>:</h4>
<p>That seems unnecessary? b should be exactly the same as if you'd run rustc on it, rustdoc doesn't emit metadata</p>



<a name="254243738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243738">(Sep 21 2021 at 17:12)</a>:</h4>
<p>Oh, yea, I forgot about that.  </p>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> There needs to be a dependency on both.  rustdoc needs the rmeta of the dependency for querying the metadata, and the dependency also needs to be documented so that things like indexing and linking work.</p>



<a name="254243790"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243790" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243790">(Sep 21 2021 at 17:12)</a>:</h4>
<p>"linking" in the HTML sense</p>



<a name="254243797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243797">(Sep 21 2021 at 17:12)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> right - but it doesn't need to change the metadata, right?</p>



<a name="254243880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243880">(Sep 21 2021 at 17:13)</a>:</h4>
<p>Couldn't the <code>Doc</code> unit for <code>b</code> just be part of the root set, rather than the dependency set of <code>a</code>?</p>



<a name="254243943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254243943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254243943">(Sep 21 2021 at 17:13)</a>:</h4>
<p>Hm.  That I'm not sure about.  I can't offhand think of a problem with excluding it.</p>



<a name="254244038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254244038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254244038">(Sep 21 2021 at 17:14)</a>:</h4>
<p>Like <code>b</code>'s docs do need to be generated, but the documentation step for <code>a</code> doesn't actually depend on that when invoking <code>rustdoc</code> (I think this is rephrasing what you're saying Joshua?)</p>



<a name="254244570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254244570" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254244570">(Sep 21 2021 at 17:17)</a>:</h4>
<p>Also, this whole discussion has made me concerned about how fragile it would be to rely on <code>metadata</code> being the same between <code>Doc</code> and <code>Check</code>... I can see how future changes could easily break this invariant. We could add tests for it, but still not ideal.</p>



<a name="254245659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254245659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254245659">(Sep 21 2021 at 17:25)</a>:</h4>
<p>It seems like these are our options:</p>
<ol>
<li>Remove dependencies from being included in a unit's hash. (Unclear if this breaks anything?)</li>
<li>Change <code>Doc</code>'s dependencies to be the same as <code>Check</code>, if possible.</li>
<li>Give up on <code>StableCrateId</code> entirely, and pursue a different method for serializing identifiers.</li>
</ol>



<a name="254252392"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254252392" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254252392">(Sep 21 2021 at 18:10)</a>:</h4>
<p>Actually, sorry, I think I was misreading the logs and was completely wrong. <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> your intuition was right -- it seems like dev-dependencies are actually the culprit.</p>



<a name="254252667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254252667" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254252667">(Sep 21 2021 at 18:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="265377">Will Crichton</span> <a href="#narrow/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata/near/254244570">said</a>:</p>
<blockquote>
<p>Also, this whole discussion has made me concerned about how fragile it would be to rely on <code>metadata</code> being the same between <code>Doc</code> and <code>Check</code>... I can see how future changes could easily break this invariant. We could add tests for it, but still not ideal.</p>
</blockquote>
<p>I think as long as it's tested it will be ok</p>



<a name="254252689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254252689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254252689">(Sep 21 2021 at 18:12)</a>:</h4>
<p>I agree just making the change and hoping it doesn't break is bad</p>



<a name="254253680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254253680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254253680">(Sep 21 2021 at 18:19)</a>:</h4>
<p>OH. I think this is an issue b/c it interacts with this change I had to make so dev-dependencies were available while scraping reverse-dependencies: <a href="https://github.com/rust-lang/cargo/pull/9525/files#diff-a78dec059e787d4e9a1a70144c9d2f1824d374e9ab6ccc65ef7aba6bf5b21a32R422-R425">https://github.com/rust-lang/cargo/pull/9525/files#diff-a78dec059e787d4e9a1a70144c9d2f1824d374e9ab6ccc65ef7aba6bf5b21a32R422-R425</a></p>



<a name="254256859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254256859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254256859">(Sep 21 2021 at 18:41)</a>:</h4>
<p>Ok I managed to fully fix the issue! <a href="https://github.com/rust-lang/cargo/pull/9525/commits/534258a7cd399ff36511c6e8d48b53283d9c3482">https://github.com/rust-lang/cargo/pull/9525/commits/534258a7cd399ff36511c6e8d48b53283d9c3482</a></p>



<a name="254257195"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254257195" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254257195">(Sep 21 2021 at 18:43)</a>:</h4>
<p>Ok tests failing, not fully fixed yet...</p>



<a name="254283601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254283601" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254283601">(Sep 21 2021 at 21:48)</a>:</h4>
<p><span class="user-mention" data-user-id="120518">@Eric Huss</span> is there a reason that <code>compute_metadata</code> manually computes <code>deps_metadata</code> rather than just using <code>unit.deps_hash</code>?</p>



<a name="254284744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254284744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254284744">(Sep 21 2021 at 21:58)</a>:</h4>
<p>Those are different hashes.  <code>unit.deps_hash</code> is a straight hash of the all the <code>Unit</code> structs, whereas <code>deps_metadata</code> is a collective hash of the <code>Metadata</code>, which is hashing slightly different information.  <code>deps_metadata</code> should be relatively stable with respect to things like moving a target directory, whereas <code>Unit.deps_hash</code> is just an internal thing.  I think it would be tricky to try to unify them somehow.</p>



<a name="254285207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/StableCrateId%20and%20metadata/near/254285207" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Will Crichton <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/StableCrateId.20and.20metadata.html#254285207">(Sep 21 2021 at 22:02)</a>:</h4>
<p>Got it. Ok, well unifying the hashes seems to be not very feasible. I broke a dozen tests just unifying the hashes of <code>CompileMode::Doc</code> and <code>CompileMode::Test</code>.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>Should there be a stream for wg-cargo-std-aware ? · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html">Should there be a stream for wg-cargo-std-aware ?</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="222325771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222325771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Ericson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222325771">(Jan 11 2021 at 17:03)</a>:</h4>
<p>What it says on the tin. I figure some real-time chat might help with <a href="https://internals.rust-lang.org/t/dogfooding-z-build-std-in-rustbuild/13775">https://internals.rust-lang.org/t/dogfooding-z-build-std-in-rustbuild/13775</a> in particular.</p>



<a name="222381789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222381789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222381789">(Jan 12 2021 at 01:29)</a>:</h4>
<p>I think it's fine to create topics here in t-cargo, this is pretty low traffic.  </p>
<p>I think build-std is pretty far from being appropriate for use with rustc, and at least for me that is a pretty low priority use case.  There are plenty of known issues if you're interested at looking into them (unfortunately most of them are in the "hard" category).  I don't have a lot of time to offer to help, as I'm spread pretty thin, but I can try to help guide or steer things.</p>



<a name="222385220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222385220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222385220">(Jan 12 2021 at 02:31)</a>:</h4>
<p>yeah, I have not pushed on it because I don't think it would solve.. really any of the problems rustbuild faces, and might even make things more complicated, as rustbuild really needs to produce std without any other library/binary too</p>



<a name="222385234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222385234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222385234">(Jan 12 2021 at 02:31)</a>:</h4>
<p>and it's probably not a great way to exercise the build-std feature either since it's going to be hacking around many of the interesting parts since they don't work for rustc</p>



<a name="222473075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222473075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Ericson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222473075">(Jan 12 2021 at 18:20)</a>:</h4>
<p>So to be clean, I was saying in the thread that <code>-Z build-std</code> should be used to build std, not rustc itself. And to me, even just getting the <code>hashbrown</code> and <code>cfg_if</code> dependencies to be be less of a trick would be a huge improvement.</p>



<a name="222473966"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222473966" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Ericson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222473966">(Jan 12 2021 at 18:27)</a>:</h4>
<blockquote>
<p>I don't think it would solve.. really any of the problems rustbuild faces</p>
</blockquote>
<p>This is fine with me in the short term --- especially if we call the hacky core deps not a problem in practice. To me the main issue is non anything wrong with <code>-Z build-std</code> and rustbuild in isolation, but that between the two there are very different ways to do the same thing.</p>



<a name="222474234"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222474234" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222474234">(Jan 12 2021 at 18:29)</a>:</h4>
<p>I think describing them as the same thing is not really true</p>



<a name="222474253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222474253" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222474253">(Jan 12 2021 at 18:29)</a>:</h4>
<p>build-std has different goals than rustbuild does</p>



<a name="222475142"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222475142" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Ericson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222475142">(Jan 12 2021 at 18:36)</a>:</h4>
<p>And what would you say the key differences are? (Goal, not method, I assume you mean)</p>



<a name="222475365"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222475365" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222475365">(Jan 12 2021 at 18:37)</a>:</h4>
<p>-Z build-std is for building <em>one specific application</em>, <code>x.py build library/std</code> is for building a library that can be put into sysroot and be reused by many applications</p>



<a name="222475564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222475564" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Ericson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222475564">(Jan 12 2021 at 18:38)</a>:</h4>
<p><code>-Z build-std</code> can be used with libraries as the root, crates, no?</p>



<a name="222476197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Should%20there%20be%20a%20stream%20for%20wg-cargo-std-aware%20%3F/near/222476197" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> John Ericson <a href="https://rust-lang.github.io/zulip_archive/stream/246057-t-cargo/topic/Should.20there.20be.20a.20stream.20for.20wg-cargo-std-aware.20.3F.html#222476197">(Jan 12 2021 at 18:43)</a>:</h4>
<p>Fundamentally, I see a sysroot as being about the way things are installed, more than built.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
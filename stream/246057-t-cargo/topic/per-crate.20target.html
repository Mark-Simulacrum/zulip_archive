<html>
<head><meta charset="utf-8"><title>per-crate target · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/per-crate.20target.html">per-crate target</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="221262546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/per-crate%20target/near/221262546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Gaspard <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/per-crate.20target.html#221262546">(Dec 31 2020 at 01:50)</a>:</h4>
<p>Hello all!<br>
I'm trying to do my first cargo contribution by implementing per-crate target settings as per <a href="https://internals.rust-lang.org/t/proposal-move-some-cargo-config-settings-to-cargo-toml/13336">the irlo thread</a> ; and I think I have a draft that looks good-ish (the root units returned by <code>generate_targets</code> have the right kinds set), but for some reason running on a test project now blocks on <code>Blocking waiting for file lock on build directory</code> and I have literally no idea how my changes could trigger this… would anyone have an idea of how the changes could lead to infinitely blocking there? (I already tried cargo clean just in case and it didn't appear to help)<br>
I've submitted my code as <a href="https://github.com/rust-lang/cargo/pull/9030">https://github.com/rust-lang/cargo/pull/9030</a> with some more details ; would anyone here have any idea how dependency resolution could end up influencing build lock acquisition?</p>



<a name="221263527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/per-crate%20target/near/221263527" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Léo Gaspard <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/per-crate.20target.html#221263527">(Dec 31 2020 at 02:14)</a>:</h4>
<p>… nevermind, I should have investigated a bit more by myself before coming to ask, turns out a place I had copy-pasted some code as a temporary measure also ended up with a file lock being copy-pasted somewhere inside a struct. Sorry for the noise!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
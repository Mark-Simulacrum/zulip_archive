<html>
<head><meta charset="utf-8"><title>test-list-binaries · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/test-list-binaries.html">test-list-binaries</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="262146546"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/test-list-binaries/near/262146546" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Gjengset <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/test-list-binaries.html#262146546">(Nov 19 2021 at 23:43)</a>:</h4>
<p>I'm trying to write some code that computes code coverage of Rust tests, and there's a fair amount of song-and-dance needed to actually find the test binaries so that they can be run through coverage. Which made me wonder — it'd be nice to have something like <code>cargo test --list-binaries</code> that just lists all the test binaries that _would_ have been running given the remaining arguments to <code>test</code> (<code>--lib</code>, <code>--tests</code>, etc.). Would something like that be a welcome addition, or are there compelling reasons to not expose the paths to the binaries?</p>



<a name="262146692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/test-list-binaries/near/262146692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/test-list-binaries.html#262146692">(Nov 19 2021 at 23:45)</a>:</h4>
<p>The usual way to handle that is to use JSON messages and grab that artifact messages.  Does that work for you?</p>



<a name="262146839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/test-list-binaries/near/262146839" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Gjengset <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/test-list-binaries.html#262146839">(Nov 19 2021 at 23:47)</a>:</h4>
<p>Yeah, I've seen that suggested in various places, but having to parse JSON makes it a fair bit more awkward to write tooling around this, since now you need to either pull in something like <code>jq</code> or write a transformation in "a real programming language" as opposed to "just run a command". Maybe that's as intended, it just feels like this is a straightforward enough task that it could be supported directly</p>



<a name="262147157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/test-list-binaries/near/262147157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eric Huss <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/test-list-binaries.html#262147157">(Nov 19 2021 at 23:51)</a>:</h4>
<p>It's generally an unsolved issue.  <a href="https://github.com/rust-lang/cargo/issues/3670">https://github.com/rust-lang/cargo/issues/3670</a> contains more context on just making the paths more discoverable.</p>
<p><a href="https://github.com/rust-lang/cargo/pull/9959">https://github.com/rust-lang/cargo/pull/9959</a> is open to add printing the paths with <code>--no-run</code>.</p>



<a name="262148366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/test-list-binaries/near/262148366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jon Gjengset <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/test-list-binaries.html#262148366">(Nov 20 2021 at 00:05)</a>:</h4>
<p>Oh, <a href="https://github.com/rust-lang/cargo/pull/9959">https://github.com/rust-lang/cargo/pull/9959</a> looks great and seems to already have consensus. That's exciting!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
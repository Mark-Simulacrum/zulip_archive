<html>
<head><meta charset="utf-8"><title>Check RustSec vulnerability database by default · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html">Check RustSec vulnerability database by default</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="254523347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254523347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254523347">(Sep 23 2021 at 12:07)</a>:</h4>
<p>I seem to remember an issue for this in the Cargo issue tracker, but couldn't find it yesterday</p>



<a name="254523438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254523438" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254523438">(Sep 23 2021 at 12:08)</a>:</h4>
<p>now that the RustSec project seems reasonably mature, with a stable data format, I think it would be pretty great if vulnerabilities from there in your dependency graph would result in warnings on cargo build/run/install etc</p>



<a name="254523502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254523502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254523502">(Sep 23 2021 at 12:08)</a>:</h4>
<p>do people think that broadly makes sense? probably needs an RFC?</p>



<a name="254523635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254523635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254523635">(Sep 23 2021 at 12:09)</a>:</h4>
<p>I run cargo-deny in CI so I already get this</p>



<a name="254523680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254523680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254523680">(Sep 23 2021 at 12:09)</a>:</h4>
<p>As a counterpoint, we could argue that these crates should be yanked and we already deal with that correctly?</p>



<a name="254556156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254556156" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254556156">(Sep 23 2021 at 15:37)</a>:</h4>
<p>I think it is worth the discussion.</p>



<a name="254561225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254561225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254561225">(Sep 23 2021 at 16:09)</a>:</h4>
<p>If not during builds, we could do it during <code>cargo add</code>, especially if we could list alternative versions or crates.</p>



<a name="254562807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254562807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254562807">(Sep 23 2021 at 16:19)</a>:</h4>
<p>I've filed</p>
<ul>
<li><a href="https://github.com/killercup/cargo-edit/issues/512">https://github.com/killercup/cargo-edit/issues/512</a></li>
<li><a href="https://github.com/killercup/cargo-edit/issues/513">https://github.com/killercup/cargo-edit/issues/513</a></li>
</ul>



<a name="254578885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254578885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254578885">(Sep 23 2021 at 18:07)</a>:</h4>
<p>BTW, <a href="https://github.blog/2021-09-23-github-advisory-database-now-supports-rust/">https://github.blog/2021-09-23-github-advisory-database-now-supports-rust/</a></p>



<a name="254651267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254651267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Weihang Lo <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254651267">(Sep 24 2021 at 04:59)</a>:</h4>
<p>Here are some experiences from <code>npm audit</code> you might interested in. Not sure whether it is applicable for cargo.<br>
<a href="https://overreacted.io/npm-audit-broken-by-design/">https://overreacted.io/npm-audit-broken-by-design/</a></p>



<a name="254665643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254665643" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dswijj <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254665643">(Sep 24 2021 at 07:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="424212">Ed Page</span> <a href="#narrow/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default/near/254561225">said</a>:</p>
<blockquote>
<p>If not during builds, we could do it during <code>cargo add</code>, especially if we could list alternative versions or crates.</p>
</blockquote>
<p>when doing it during <code>cargo add</code>, how would we handle when <code>Cargo.toml</code> is changed directly?</p>



<a name="254666821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254666821" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254666821">(Sep 24 2021 at 08:07)</a>:</h4>
<p>Maybe do it every time <code>Cargo.lock</code> gets updated by Cargo?</p>



<a name="254666903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254666903" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254666903">(Sep 24 2021 at 08:08)</a>:</h4>
<p>That would cause it to happen every time the dependency list in <code>Cargo.toml</code> changes and on every <code>cargo update</code>.</p>



<a name="254667036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254667036" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254667036">(Sep 24 2021 at 08:09)</a>:</h4>
<p>When <code>Cargo.lock</code> gets updated the registry gets updated anyway, so it doesn't hurt privacy much to also update the rustsec database at the same time.</p>



<a name="254668485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254668485" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> dswijj <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254668485">(Sep 24 2021 at 08:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default/near/254666821">said</a>:</p>
<blockquote>
<p>Maybe do it every time <code>Cargo.lock</code> gets updated by Cargo?</p>
</blockquote>
<p>I only see one problem with this approach, if <code>Cargo.lock</code> is rarely updated, that means new vulnerabilities found in dependencies would not be immediately uncovered, though?</p>



<a name="254669472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254669472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254669472">(Sep 24 2021 at 08:30)</a>:</h4>
<p>It should still be allowed as separate <code>cargo audit</code> command IMO.</p>



<a name="254669522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254669522" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254669522">(Sep 24 2021 at 08:31)</a>:</h4>
<p>Doing it at every build is a terrible idea. Way too slow and bad for privacy.</p>



<a name="254812267"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254812267" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254812267">(Sep 25 2021 at 05:59)</a>:</h4>
<p><span class="user-mention" data-user-id="133247">@bjorn3</span> IIRC cargo audit just git fetches the advisory database to local disk. We could update the advisory database any time the local registry cache is updated</p>



<a name="254812285"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254812285" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dirkjan Ochtman <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254812285">(Sep 25 2021 at 05:59)</a>:</h4>
<p>Then there would be little slowdown/privacy risk</p>



<a name="254819768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/254819768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#254819768">(Sep 25 2021 at 08:07)</a>:</h4>
<p>Exactly!</p>



<a name="255047906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/Check%20RustSec%20vulnerability%20database%20by%20default/near/255047906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/Check.20RustSec.20vulnerability.20database.20by.20default.html#255047906">(Sep 27 2021 at 13:30)</a>:</h4>
<p>Was thinking some about this over the weekend and one use case that is probably more sensitive to the performance impact of checking for advisories on build is CI.  Especially when you chain jobs together or are hitting your max parallel runners, it can add up.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
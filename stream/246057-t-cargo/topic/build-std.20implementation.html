<html>
<head><meta charset="utf-8"><title>build-std implementation · t-cargo · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/index.html">t-cargo</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/build-std.20implementation.html">build-std implementation</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="276915740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/build-std%20implementation/near/276915740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/build-std.20implementation.html#276915740">(Mar 28 2022 at 18:48)</a>:</h4>
<p>I'm trying to achieve the same end as build-std in my project. but we can't use cargo for various reasons.</p>



<a name="276915759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/build-std%20implementation/near/276915759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/build-std.20implementation.html#276915759">(Mar 28 2022 at 18:48)</a>:</h4>
<p>can someone point me to the implementation of how cargo actually builds std?</p>



<a name="276916564"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/build-std%20implementation/near/276916564" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/build-std.20implementation.html#276916564">(Mar 28 2022 at 18:57)</a>:</h4>
<p>Libstd is always built using cargo, whether through <code>-Zbuild-std</code> or through <code>cargo build</code> when built as part of the rustc build system. You are probably going to have a hard time to avoid using cargo to build libstd itself. The entire configuration on how to build it is described using <code>Cargo.toml</code> files. In fact it uses several crates from <a href="http://crates.io">crates.io</a>. You may be able to use something like <a href="https://github.com/DianaNites/cargo-sysroot">https://github.com/DianaNites/cargo-sysroot</a> to build libstd using cargo and then use the resulting sysroot using <code>--sysroot</code> in your own build system.</p>



<a name="276916645"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/build-std%20implementation/near/276916645" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/build-std.20implementation.html#276916645">(Mar 28 2022 at 18:57)</a>:</h4>
<p>sorry, I was unclear. yeah using cargo to build std itself is fine for my project. just the build that consumes libstd cannot use cargo</p>



<a name="276916655"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/246057-t-cargo/topic/build-std%20implementation/near/276916655" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Collin Baker <a href="https://zulip-archive.rust-lang.org/stream/246057-t-cargo/topic/build-std.20implementation.html#276916655">(Mar 28 2022 at 18:57)</a>:</h4>
<p>thanks for the pointer</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>CGUs in perf runs · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/CGUs.20in.20perf.20runs.html">CGUs in perf runs</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="225732853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/CGUs%20in%20perf%20runs/near/225732853" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/CGUs.20in.20perf.20runs.html#225732853">(Feb 09 2021 at 18:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/lets.20keep.20talking.20about.20perf.2Erlo/near/225723686">said</a>:</p>
<blockquote>
<p>I was referring to rustc specifically, which would use the default 16 CGUs for the compiler crates, one CGU for the standard library crates, and ∞ for compiler builtins. There is of course similar aspect with respect to benchmarks, but you would have to consult their Cargo.toml to see what they do exactly (usually defaults of 16 / 256 incremental).</p>
</blockquote>
<p>None of them set <code>codegen-units</code> for release builds. But clap-rs sets <code>lto=true</code>. Would it make sense to add a CGU=1 version for the noisier/smaller ones?</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
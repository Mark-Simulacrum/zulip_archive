<html>
<head><meta charset="utf-8"><title>artifact sizes · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html">artifact sizes</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="261288480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261288480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261288480">(Nov 12 2021 at 17:59)</a>:</h4>
<p>FYI: We are now displaying artifact size diffs in the detailed query view. This should help us keep diskspace usage in check. The next step is to record totals in the database so that we can view their diffs in the comparison page.</p>
<p>Thanks to <span class="user-mention" data-user-id="124287">@mw</span> for his help in this, and <span class="user-mention" data-user-id="116122">@simulacrum</span> for the tips and tricks along the way.</p>
<p><a href="/user_uploads/4715/cvskhiNCoBAIc68usMpTJyTl/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/cvskhiNCoBAIc68usMpTJyTl/image.png" title="image.png"><img src="/user_uploads/4715/cvskhiNCoBAIc68usMpTJyTl/image.png"></a></div>



<a name="261288713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261288713" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261288713">(Nov 12 2021 at 18:01)</a>:</h4>
<p>You can take a look yourself <a href="https://perf.rust-lang.org/detailed-query.html?commit=800a156c1ef0c16eb80f57536d96fbf6629fb3b1&amp;base_commit=493ea776ebdecb7ab318444525115810de255c20&amp;benchmark=wg-grammar-debug&amp;run_name=incr-unchanged">here</a></p>



<a name="261288852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261288852" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261288852">(Nov 12 2021 at 18:02)</a>:</h4>
<p>It seems like it doesn't always <a href="https://perf.rust-lang.org/detailed-query.html?commit=f2f55e8da927351655c73cca0ace77f5a82daed0&amp;base_commit=8b09ba6a5d5c644fe0f1c27c7f9c80b334241707&amp;benchmark=html5ever-debug&amp;run_name=incr-patched:%20println">work</a> though. We'll have to do some more investigation</p>



<a name="261291528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261291528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261291528">(Nov 12 2021 at 18:21)</a>:</h4>
<p>Thank you for working on this!</p>



<a name="261337740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261337740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Noah Lev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261337740">(Nov 13 2021 at 03:59)</a>:</h4>
<p>Is the size in bytes I assume?</p>



<a name="261341876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261341876" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261341876">(Nov 13 2021 at 05:39)</a>:</h4>
<p>Where's the size? I don't see one...</p>



<a name="261492058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261492058" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261492058">(Nov 15 2021 at 12:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="307537">Noah Lev</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/artifact.20sizes/near/261337740">said</a>:</p>
<blockquote>
<p>Is the size in bytes I assume?</p>
</blockquote>
<p>Yes - we should make that more clear. Or consider converting to kB</p>



<a name="261492085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261492085" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261492085">(Nov 15 2021 at 12:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">nnethercote</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/artifact.20sizes/near/261341876">said</a>:</p>
<blockquote>
<p>Where's the size? I don't see one...</p>
</blockquote>
<p>What do you mean?</p>



<a name="261507171"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261507171" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261507171">(Nov 15 2021 at 14:55)</a>:</h4>
<p>Can we insert dots or commas into numbers so they are easier to read? E.g. <code>2,717,137 bytes</code> instead of <code>2717137 bytes</code>?</p>



<a name="261507318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261507318" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261507318">(Nov 15 2021 at 14:56)</a>:</h4>
<p>converting to KB or MB sounds like a good idea too</p>



<a name="261507556"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261507556" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261507556">(Nov 15 2021 at 14:58)</a>:</h4>
<p><code>codegen_unit_size_estimate</code> is not bytes, btw, just an abstract number used for scheduling LLVM work packages.</p>



<a name="261507647"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261507647" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261507647">(Nov 15 2021 at 14:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="124287">mw</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/artifact.20sizes/near/261507556">said</a>:</p>
<blockquote>
<p><code>codegen_unit_size_estimate</code> is not bytes, btw, just an abstract number used for scheduling LLVM work packages.</p>
</blockquote>
<p>I think this is proof that we should be storing units with this info</p>



<a name="261507668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/artifact%20sizes/near/261507668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/artifact.20sizes.html#261507668">(Nov 15 2021 at 14:58)</a>:</h4>
<p>It would also be great to have a <code>delta %</code> column</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
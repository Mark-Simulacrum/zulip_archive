<html>
<head><meta charset="utf-8"><title>triage 2021 08 31 · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html">triage 2021 08 31</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251387682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251387682" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251387682">(Aug 31 2021 at 13:49)</a>:</h4>
<p>Going to start this now</p>



<a name="251394087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251394087" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251394087">(Aug 31 2021 at 14:27)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> getting a 502 on the triage report which we've seen before when there were missing commits from the triage bot. You were manually kicking off runs. Could you look into this again?</p>



<a name="251407712"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251407712" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251407712">(Aug 31 2021 at 15:48)</a>:</h4>
<p>Looking</p>



<a name="251407870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251407870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251407870">(Aug 31 2021 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> we should probably file an issue or something to get a url that returns 'missing' commits (by looking for commits whose parent we don't know about)</p>



<a name="251409308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251409308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251409308">(Aug 31 2021 at 15:55)</a>:</h4>
<p>fixed the one missing commit that I could find though</p>



<a name="251409326"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251409326" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251409326">(Aug 31 2021 at 15:55)</a>:</h4>
<p>should be benchmarked in a few hours (see status page)</p>



<a name="251414465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251414465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251414465">(Aug 31 2021 at 16:28)</a>:</h4>
<p>Ok triage endpoint works now, but it's returning no performance changes which I find somewhat hard to believe</p>



<a name="251418163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251418163" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251418163">(Aug 31 2021 at 16:54)</a>:</h4>
<p>hm</p>



<a name="251418187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251418187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251418187">(Aug 31 2021 at 16:54)</a>:</h4>
<p>I could've messed up the parent, let me look</p>



<a name="251418298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251418298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251418298">(Aug 31 2021 at 16:55)</a>:</h4>
<p><a href="https://perf.rust-lang.org/status.html">https://perf.rust-lang.org/status.html</a> shows <a href="https://github.com/rust-lang/rust/commit/5998c2e9adfb01f40ea9d0169488fbdaad10b035">5998c2e9adfb01f40ea9d0169488fbdaad10b035</a> is still in progress</p>



<a name="251418375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251418375" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251418375">(Aug 31 2021 at 16:56)</a>:</h4>
<p>the triage end point doesn't break when we <em>know</em> of a commit, but it also won't work because there's no data for that comparison? I think?</p>



<a name="251419071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251419071" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251419071">(Aug 31 2021 at 17:00)</a>:</h4>
<p>once that's done I'd expect it to work</p>



<a name="251419099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251419099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251419099">(Aug 31 2021 at 17:00)</a>:</h4>
<p>Yea that seems to be it.</p>



<a name="251419214"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251419214" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251419214">(Aug 31 2021 at 17:01)</a>:</h4>
<p>I guess there's no way to really know when we're in that situation other than returning an error when a specific comparison returns _no_ results.</p>



<a name="251419751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251419751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251419751">(Aug 31 2021 at 17:04)</a>:</h4>
<p>yeah.</p>



<a name="251487771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251487771" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251487771">(Sep 01 2021 at 01:47)</a>:</h4>
<p>I added some more commits (came up with a nice query to find them) and filed <a href="https://github.com/rust-lang/triagebot/issues/1483">https://github.com/rust-lang/triagebot/issues/1483</a> with some directions on how to fully fix this bug</p>



<a name="251518521"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251518521" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251518521">(Sep 01 2021 at 08:00)</a>:</h4>
<p>Getting back to this now</p>



<a name="251520096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251520096" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251520096">(Sep 01 2021 at 08:14)</a>:</h4>
<p>Here are some changes labeled as "probably changed" that I don't think are necessarily worth mentioning in a triage report. Most of them seem to be relatively small in terms of percentage change of instruction counts and they don't necessarily have 1 type of test case that they're affecting:</p>
<ul>
<li><a href="https://perf.rust-lang.org/compare.html?start=5ca596f486707ac1362edad717ad0e9f5b71d0a3&amp;end=f66e825f73d2bd7f8a763b723983850f891985b0&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=5ca596f486707ac1362edad717ad0e9f5b71d0a3&amp;end=f66e825f73d2bd7f8a763b723983850f891985b0&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=1a9ac38defd67ddb2b830005f8d760861c85a7a3&amp;end=9863bf51a52b8e61bcad312f81b5193d53099f9f&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=1a9ac38defd67ddb2b830005f8d760861c85a7a3&amp;end=9863bf51a52b8e61bcad312f81b5193d53099f9f&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=a992a11913b39a258158646bb1e03528c5aa5060&amp;end=7b0e554ee2c94e9b3865a8c2d24d720224512dec&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=a992a11913b39a258158646bb1e03528c5aa5060&amp;end=7b0e554ee2c94e9b3865a8c2d24d720224512dec&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=c4be230b4a30eb74e3a3908455731ebc2f731d3d&amp;end=76e755cf4afc34af586948e7bc25d2f1c589a884&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=c4be230b4a30eb74e3a3908455731ebc2f731d3d&amp;end=76e755cf4afc34af586948e7bc25d2f1c589a884&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=517c28e421b0d601c6f8eb07ea6aafb8e16975ad&amp;end=d5cd3205fd6c0817fd46c036d0f3194b7deaca93&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=517c28e421b0d601c6f8eb07ea6aafb8e16975ad&amp;end=d5cd3205fd6c0817fd46c036d0f3194b7deaca93&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=926f069950d7211a87fbd81778b420de420daad7&amp;end=5eacec9ec7e112a0de1011519a57c45586d58414&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=926f069950d7211a87fbd81778b420de420daad7&amp;end=5eacec9ec7e112a0de1011519a57c45586d58414&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=677b517e66fe9df0b2ce72f5ec57d52cc0da506e&amp;end=3a21a5b324963e18f00106b611460a5a83a53ace&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=677b517e66fe9df0b2ce72f5ec57d52cc0da506e&amp;end=3a21a5b324963e18f00106b611460a5a83a53ace&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=ef524710669a003cf2b24361dc6b04b566e560fa&amp;end=daa4dc997c777676b0f0e48d0311cc5e7bde5f87&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=ef524710669a003cf2b24361dc6b04b566e560fa&amp;end=daa4dc997c777676b0f0e48d0311cc5e7bde5f87&amp;stat=instructions:u</a></li>
<li><a href="https://perf.rust-lang.org/compare.html?start=13edc17f65bcad7fe9046720a16fc192e810970e&amp;end=6cfa773583bb5123e630668f5bfe466716225546&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=13edc17f65bcad7fe9046720a16fc192e810970e&amp;end=6cfa773583bb5123e630668f5bfe466716225546&amp;stat=instructions:u</a></li>
</ul>



<a name="251520136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251520136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251520136">(Sep 01 2021 at 08:14)</a>:</h4>
<p>These will still show up as results in after a try run which seems appropriate.</p>



<a name="251534612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251534612" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251534612">(Sep 01 2021 at 10:10)</a>:</h4>
<p>PR is up: <a href="https://github.com/rust-lang/rustc-perf/pull/989">https://github.com/rust-lang/rustc-perf/pull/989</a></p>



<a name="251534641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251534641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251534641">(Sep 01 2021 at 10:11)</a>:</h4>
<p>This one took me longer than usual (a little more than an hour) due to their being quite a lot of changes to look through.</p>



<a name="251534658"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251534658" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251534658">(Sep 01 2021 at 10:11)</a>:</h4>
<p>Going to open a TWiR PR now</p>



<a name="251534751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2008%2031/near/251534751" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2008.2031.html#251534751">(Sep 01 2021 at 10:12)</a>:</h4>
<p>I do think we're ready to start automatically leaving comments on PRs that show regressions on perf runs that happen after they're merged.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
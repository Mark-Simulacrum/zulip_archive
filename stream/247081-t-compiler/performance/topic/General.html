<html>
<head><meta charset="utf-8"><title>General · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html">General</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="203906236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906236">(Jul 15 2020 at 00:50)</a>:</h4>
<p>I see that <a href="https://perf.rust-lang.org/compare.html">https://perf.rust-lang.org/compare.html</a> doesn't yet have the latest changes from master (it shows the latest commit as c724b67e and master is 23744c8). How often is it updated? Has the site been redeployed since the rustdoc PR was merged?</p>
<p>Sorry to nag so much, everyone's been really helpful :)</p>



<a name="203906262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906262" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906262">(Jul 15 2020 at 00:51)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> you just have to remind <span class="user-mention" data-user-id="116122">@simulacrum</span> until it happens, I don't think anyone else manages it</p>



<a name="203906276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906276" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906276">(Jul 15 2020 at 00:51)</a>:</h4>
<p>see status page</p>



<a name="203906320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906320" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906320">(Jul 15 2020 at 00:52)</a>:</h4>
<p>we've not yet benchmarked the first commit with rustdoc on</p>



<a name="203906364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906364">(Jul 15 2020 at 00:53)</a>:</h4>
<p>awesome, thank you!</p>



<a name="203906435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906435">(Jul 15 2020 at 00:54)</a>:</h4>
<p>only 2 benchmarks left</p>



<a name="203906454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906454">(Jul 15 2020 at 00:54)</a>:</h4>
<p>note: there's actually no way for you to <em>know</em> that we haven't benchmarked the first commit with rustdoc on since the status page doesn't tell you that information, so really I'm lying and <span class="user-mention" data-user-id="119009">@eddyb</span> is right -- you gotta just bug me :)</p>



<a name="203906485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906485">(Jul 15 2020 at 00:55)</a>:</h4>
<p>I can't believe <a href="https://github.com/rust-lang/rust/pull/73566">https://github.com/rust-lang/rust/pull/73566</a> is almost done, this and a couple nits from eddy are the last blockers</p>



<a name="203906490"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906490" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906490">(Jul 15 2020 at 00:55)</a>:</h4>
<p>I've been working on it for like a month lol</p>



<a name="203906557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906557">(Jul 15 2020 at 00:56)</a>:</h4>
<p>oh I lied, we're on the last benchmark -- I guess we don't print when there's 1 left...</p>



<a name="203906579"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906579" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906579">(Jul 15 2020 at 00:57)</a>:</h4>
<p>oh my regex is bad</p>



<a name="203906597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906597">(Jul 15 2020 at 00:57)</a>:</h4>
<p>we're too smart for our own good and are fancy with getting pluralization wrong</p>



<a name="203906649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906649">(Jul 15 2020 at 00:58)</a>:</h4>
<p>well, pluralization <em>right</em> which breaks my regex</p>



<a name="203906674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906674">(Jul 15 2020 at 00:58)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> congrats on your first mini-megaproject</p>



<a name="203906683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906683" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906683">(Jul 15 2020 at 00:58)</a>:</h4>
<p>this is what I get for starting with an E-hard lol</p>



<a name="203906691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906691">(Jul 15 2020 at 00:59)</a>:</h4>
<p>the next levels are 3mo, 6mo, 1yr, 2yr, 5yr</p>



<a name="203906710"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906710" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906710">(Jul 15 2020 at 00:59)</a>:</h4>
<p>:ferrisUnsafe:</p>



<a name="203906774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906774">(Jul 15 2020 at 01:00)</a>:</h4>
<p>oh I had a question for you btw <a href="https://github.com/rust-lang/rust/pull/73566#discussion_r454723928">https://github.com/rust-lang/rust/pull/73566#discussion_r454723928</a></p>



<a name="203906835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906835" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906835">(Jul 15 2020 at 01:01)</a>:</h4>
<p>yes</p>



<a name="203906841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906841">(Jul 15 2020 at 01:01)</a>:</h4>
<p>it makes sense to keep it uniform for all items</p>



<a name="203906845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906845">(Jul 15 2020 at 01:01)</a>:</h4>
<p>basically when you enter a nested item, you're "leaving" the body</p>



<a name="203906847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906847">(Jul 15 2020 at 01:01)</a>:</h4>
<p>(temporarily)</p>



<a name="203906897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906897" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906897">(Jul 15 2020 at 01:02)</a>:</h4>
<p>makes sense</p>



<a name="203906902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203906902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203906902">(Jul 15 2020 at 01:02)</a>:</h4>
<p>I think this was actually the previous behavior and I glossed over it in a test case</p>



<a name="203907649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907649">(Jul 15 2020 at 01:17)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> I'm running <code>bench_local</code> on <code>helloworld</code>, and the <code>Doc</code> run is taking an awfully long time</p>



<a name="203907674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907674">(Jul 15 2020 at 01:17)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> I bet it's something to do with <a href="https://github.com/rust-lang/rustc-perf/pull/680">https://github.com/rust-lang/rustc-perf/pull/680</a></p>



<a name="203907676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907676">(Jul 15 2020 at 01:17)</a>:</h4>
<p>it's been going for several minutes</p>



<a name="203907682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907682">(Jul 15 2020 at 01:17)</a>:</h4>
<p>try setting <code>RUST_LOG=info</code></p>



<a name="203907740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907740">(Jul 15 2020 at 01:18)</a>:</h4>
<p>Yep, that's the problem</p>



<a name="203907741"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907741" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907741">(Jul 15 2020 at 01:18)</a>:</h4>
<p>also you will need to update to latest nightly, there was a cargo bug that was only fixed this week</p>



<a name="203907744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907744">(Jul 15 2020 at 01:19)</a>:</h4>
<p><code>rustup update nightly</code>?</p>



<a name="203907747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907747">(Jul 15 2020 at 01:19)</a>:</h4>
<p><a href="https://github.com/rust-lang/cargo/pull/8449">https://github.com/rust-lang/cargo/pull/8449</a></p>



<a name="203907749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907749" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907749">(Jul 15 2020 at 01:19)</a>:</h4>
<p>yup</p>



<a name="203907751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907751">(Jul 15 2020 at 01:19)</a>:</h4>
<p>hmm, <code>which cargo</code> probably won't suffice, then</p>



<a name="203907754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907754">(Jul 15 2020 at 01:19)</a>:</h4>
<p>ahh ... good point</p>



<a name="203907760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907760">(Jul 15 2020 at 01:20)</a>:</h4>
<p>more reason to make doc runs opt-in IMO</p>



<a name="203907824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907824" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907824">(Jul 15 2020 at 01:21)</a>:</h4>
<p>how can I find the executable that <code>cargo +nightly</code> runs?</p>



<a name="203907846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907846">(Jul 15 2020 at 01:21)</a>:</h4>
<p><code>$RUSTUP_HOME/toolchains/nightly-x86_64-unknown-linux-gnu//bin/cargo</code></p>



<a name="203907886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203907886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203907886">(Jul 15 2020 at 01:22)</a>:</h4>
<p>if RUSTUP_HOME isn't set it's ~/.rustup</p>



<a name="203908345"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908345" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908345">(Jul 15 2020 at 01:33)</a>:</h4>
<p>thanks</p>



<a name="203908398"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908398" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908398">(Jul 15 2020 at 01:34)</a>:</h4>
<p>uhhhh <a href="/user_uploads/4715/4lFG-qER8FKN8dU83G8hSlIP/image.png">image.png</a>  <span class="user-mention" data-user-id="116122">@simulacrum</span></p>
<div class="message_inline_image"><a href="/user_uploads/4715/4lFG-qER8FKN8dU83G8hSlIP/image.png" title="image.png"><img src="/user_uploads/4715/4lFG-qER8FKN8dU83G8hSlIP/image.png"></a></div>



<a name="203908400"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908400" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908400">(Jul 15 2020 at 01:34)</a>:</h4>
<p>from <a href="https://perf.rust-lang.org/compare.html">https://perf.rust-lang.org/compare.html</a></p>



<a name="203908403"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908403" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908403">(Jul 15 2020 at 01:34)</a>:</h4>
<p>Looking into it</p>



<a name="203908406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908406" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908406">(Jul 15 2020 at 01:34)</a>:</h4>
<p>whole site looks like the database went missing :(</p>



<a name="203908420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908420" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908420">(Jul 15 2020 at 01:35)</a>:</h4>
<p>(watch it be my fault <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> )</p>



<a name="203908428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908428">(Jul 15 2020 at 01:35)</a>:</h4>
<p>well kinda</p>



<a name="203908434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908434">(Jul 15 2020 at 01:35)</a>:</h4>
<p>we missed some cases</p>



<a name="203908436"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908436" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908436">(Jul 15 2020 at 01:36)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/runs/871661206">https://github.com/rust-lang/rustc-perf/runs/871661206</a></p>



<a name="203908481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908481">(Jul 15 2020 at 01:36)</a>:</h4>
<p>once that pushes should be good, <a href="https://github.com/rust-lang/rustc-perf/commit/9f190aca5fabba897e891d6186d28e47948302d9">https://github.com/rust-lang/rustc-perf/commit/9f190aca5fabba897e891d6186d28e47948302d9</a></p>



<a name="203908495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908495">(Jul 15 2020 at 01:36)</a>:</h4>
<p>finished benchmarking the first rustdoc commit though!</p>



<a name="203908503"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908503" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908503">(Jul 15 2020 at 01:36)</a>:</h4>
<p>(that's why everything went down)</p>



<a name="203908509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908509">(Jul 15 2020 at 01:36)</a>:</h4>
<p>oh yay so it was only in the site!</p>



<a name="203908517"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908517" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908517">(Jul 15 2020 at 01:37)</a>:</h4>
<p>yeah I only had sqlite locally to test with</p>



<a name="203908528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908528">(Jul 15 2020 at 01:37)</a>:</h4>
<p>no worries</p>



<a name="203908533"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908533" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908533">(Jul 15 2020 at 01:37)</a>:</h4>
<p>really there shouldn't be 4 instances of that match</p>



<a name="203908754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908754">(Jul 15 2020 at 01:41)</a>:</h4>
<p>okay it's almost there</p>



<a name="203908846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908846">(Jul 15 2020 at 01:43)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <a href="https://perf.rust-lang.org/compare.html?start=c724b67e1b474262917a5154d74e7072267593fe&amp;end=8e0830658e77454a0c7dd437c75522a6debf9f64">https://perf.rust-lang.org/compare.html?start=c724b67e1b474262917a5154d74e7072267593fe&amp;end=8e0830658e77454a0c7dd437c75522a6debf9f64</a></p>



<a name="203908849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908849">(Jul 15 2020 at 01:43)</a>:</h4>
<p>(scroll down and open some of them)</p>



<a name="203908856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908856">(Jul 15 2020 at 01:43)</a>:</h4>
<p>once we get a master commit it'll actually have non-dashed</p>



<a name="203908914"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908914" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908914">(Jul 15 2020 at 01:44)</a>:</h4>
<p>oh that's beautiful</p>



<a name="203908918"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908918" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908918">(Jul 15 2020 at 01:44)</a>:</h4>
<p><span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span> <span aria-label="tada" class="emoji emoji-1f389" role="img" title="tada">:tada:</span></p>



<a name="203908959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203908959" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203908959">(Jul 15 2020 at 01:45)</a>:</h4>
<p>it would also be great to add it to the graph at some point</p>



<a name="203909002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909002">(Jul 15 2020 at 01:46)</a>:</h4>
<p>but now that we have the data it's easy to add that retroactively</p>



<a name="203909005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909005">(Jul 15 2020 at 01:46)</a>:</h4>
<p>4 columns is ungreat</p>



<a name="203909008"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909008" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909008">(Jul 15 2020 at 01:46)</a>:</h4>
<p>I don't know</p>



<a name="203909015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909015" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909015">(Jul 15 2020 at 01:46)</a>:</h4>
<p>UI design is not my forte if you can't tell by perf :)</p>



<a name="203909017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909017">(Jul 15 2020 at 01:46)</a>:</h4>
<p>sorry, I meant dashboard</p>



<a name="203909024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909024">(Jul 15 2020 at 01:46)</a>:</h4>
<p>since that makes you scroll anyway</p>



<a name="203909027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909027">(Jul 15 2020 at 01:46)</a>:</h4>
<p>oh.. hm, well, we don't have data for anything but master</p>



<a name="203909035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909035">(Jul 15 2020 at 01:47)</a>:</h4>
<p>but we should get stable/beta data in a few days</p>



<a name="203909040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909040">(Jul 15 2020 at 01:47)</a>:</h4>
<p>yeah shouldn't be too hard</p>



<a name="203909048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909048">(Jul 15 2020 at 01:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Impatient.20for.20rustdoc.20perf.20runs/near/203909035">said</a>:</p>
<blockquote>
<p>but we should get stable/beta data in a few days</p>
</blockquote>
<p>(since we just happened to fall on a release week)</p>



<a name="203909053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909053" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909053">(Jul 15 2020 at 01:47)</a>:</h4>
<p>oh perfect, I didn't even realize we'd get perf on stable for free :D</p>



<a name="203909060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909060" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909060">(Jul 15 2020 at 01:47)</a>:</h4>
<p>then we have lots to compare it to</p>



<a name="203909066"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909066" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909066">(Jul 15 2020 at 01:47)</a>:</h4>
<p>hm?</p>



<a name="203909070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909070">(Jul 15 2020 at 01:47)</a>:</h4>
<p>it'd just be the latest stable to be clear</p>



<a name="203909071"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909071" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909071">(Jul 15 2020 at 01:47)</a>:</h4>
<p>right</p>



<a name="203909114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909114">(Jul 15 2020 at 01:48)</a>:</h4>
<p>I thought we'd <em>only</em> have the data from the 2 or 3 tries before <a href="https://github.com/rust-lang/rust/pull/73566">https://github.com/rust-lang/rust/pull/73566</a> landed</p>



<a name="203909141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909141">(Jul 15 2020 at 01:49)</a>:</h4>
<p>ah</p>



<a name="203909202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909202" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909202">(Jul 15 2020 at 01:50)</a>:</h4>
<p>eh we should have data from all commits before it lands too, even without stable</p>



<a name="203909205"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909205" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909205">(Jul 15 2020 at 01:50)</a>:</h4>
<p>actually I guess it wouldn't be too hard to go back and run perf for past stable</p>



<a name="203909207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909207">(Jul 15 2020 at 01:50)</a>:</h4>
<p>just time consuming and painful :P</p>



<a name="203909218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909218">(Jul 15 2020 at 01:50)</a>:</h4>
<p>nah, stable builds are pretty fast -- they don't have script-servo</p>



<a name="203909909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909909">(Jul 15 2020 at 02:06)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> review ping on <a href="https://github.com/rust-lang/rust/pull/74119">https://github.com/rust-lang/rust/pull/74119</a> :)</p>



<a name="203909915"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909915" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909915">(Jul 15 2020 at 02:06)</a>:</h4>
<p>I love how this has turned into <a class="stream" data-stream-id="122651" href="/#narrow/stream/122651-general">#general</a> <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="203909919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909919">(Jul 15 2020 at 02:06)</a>:</h4>
<p>not that I'm complaining</p>



<a name="203909934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909934">(Jul 15 2020 at 02:07)</a>:</h4>
<p>taking a break to play hollow knight, someone ping me when the try run for <a href="https://github.com/rust-lang/rust/pull/74347">https://github.com/rust-lang/rust/pull/74347</a> finishes</p>



<a name="203909936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203909936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203909936">(Jul 15 2020 at 02:07)</a>:</h4>
<p>zulip isn't great for extremely short comments that don't warrant a proper thread</p>



<a name="203912941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203912941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203912941">(Jul 15 2020 at 03:18)</a>:</h4>
<p><code>--filter</code> and <code>--exclude</code> take a comma-separate list of substrings? I wish I'd known that earlier</p>



<a name="203912977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203912977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203912977">(Jul 15 2020 at 03:18)</a>:</h4>
<p>/me will update the docs</p>



<a name="203946366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/203946366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#203946366">(Jul 15 2020 at 12:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="120989">njn</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/203912941">said</a>:</p>
<blockquote>
<p><code>--filter</code> and <code>--exclude</code> take a comma-separate list of substrings? I wish I'd known that earlier</p>
</blockquote>
<p>I thought you implemented one of those :)</p>
<p>I recently did it for the other -- iirc exclude</p>



<a name="204019969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204019969" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204019969">(Jul 15 2020 at 22:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> hey I'm confused about the state of the perf run for <a href="https://github.com/rust-lang/rust/pull/73566">https://github.com/rust-lang/rust/pull/73566</a>. It looks like the try succeeded but bors didn't comment and I don't see it on <a href="https://perf.rust-lang.org/status.html">https://perf.rust-lang.org/status.html</a>.</p>



<a name="204019988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204019988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204019988">(Jul 15 2020 at 22:18)</a>:</h4>
<p>oh then we need to manually queue it</p>



<a name="204020012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020012">(Jul 15 2020 at 22:18)</a>:</h4>
<p>we rely on the bors finish comment</p>



<a name="204020033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020033">(Jul 15 2020 at 22:19)</a>:</h4>
<p>ah so it's just bors being buggy</p>



<a name="204020035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020035" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020035">(Jul 15 2020 at 22:19)</a>:</h4>
<p>thanks!</p>



<a name="204020040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020040">(Jul 15 2020 at 22:19)</a>:</h4>
<p>probably github</p>



<a name="204020050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020050" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020050">(Jul 15 2020 at 22:19)</a>:</h4>
<p>queue is growing though which is not good news :/</p>



<a name="204020067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020067">(Jul 15 2020 at 22:19)</a>:</h4>
<p>well we do keep queueing more commits :P</p>



<a name="204020114"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020114" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020114">(Jul 15 2020 at 22:20)</a>:</h4>
<p>do you think the time from doc runs is putting it over the edge?</p>



<a name="204020135"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020135" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020135">(Jul 15 2020 at 22:20)</a>:</h4>
<p>it's not impossible</p>



<a name="204020139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020139" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020139">(Jul 15 2020 at 22:20)</a>:</h4>
<p>but I don't know</p>



<a name="204020154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204020154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204020154">(Jul 15 2020 at 22:20)</a>:</h4>
<p>I've been meaning to get metrics for "total time per run" for ~months now</p>



<a name="204266792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204266792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204266792">(Jul 17 2020 at 22:27)</a>:</h4>
<p>Hellu, quick question: how long do normal projects take to compile and then, recompile, after small changes? A ballpark is enough for me.</p>
<ul>
<li>0-10s</li>
<li>10-30s</li>
<li>30-60s</li>
<li>1-2m</li>
<li>more than 2m</li>
</ul>



<a name="204266867"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204266867" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204266867">(Jul 17 2020 at 22:28)</a>:</h4>
<p>I usually hit more than one minute pretty quickly, though it really depends. Sometimes pretty large things compile fast, sometimes not so much.</p>



<a name="204266887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204266887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204266887">(Jul 17 2020 at 22:28)</a>:</h4>
<p>Most things I work on are more than 2 minutes, but then my normal things are e.g. rustc, std, rustc-perf, triagebot, etc. none of which are small</p>



<a name="204266916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204266916" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204266916">(Jul 17 2020 at 22:29)</a>:</h4>
<p>Do you have a reference project I could try to compile? I have a pretty crummy machine so I hope it's representative of the lower performance group of computers :3</p>



<a name="204266988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204266988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204266988">(Jul 17 2020 at 22:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204266887">said</a>:</p>
<blockquote>
<p>(...) but then my normal things are e.g. rustc, std, rustc-perf, triagebot, etc. none of which are small</p>
</blockquote>
<p>Yeah, that's my problem as well. I don't have any Rust projects that are "mine", and the ones I've worked on recently are rustc and clippy, and both of them are kinda big.</p>



<a name="204267011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267011">(Jul 17 2020 at 22:30)</a>:</h4>
<p>rust-analyzer takes great care to optimize for fast compiles, but can still take ~5 minutes for a release build</p>



<a name="204267020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267020">(Jul 17 2020 at 22:30)</a>:</h4>
<p>It's medium-sized at ~100 kloc</p>



<a name="204267048"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267048" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267048">(Jul 17 2020 at 22:31)</a>:</h4>
<p>Excellent, I'll play with it a bit then and care to write down the times</p>



<a name="204267056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267056">(Jul 17 2020 at 22:31)</a>:</h4>
<p>Any small sized projects you'd recommend me try as well?</p>



<a name="204267161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267161">(Jul 17 2020 at 22:32)</a>:</h4>
<p>only ones that compile almost instantly :)</p>



<a name="204267167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267167">(Jul 17 2020 at 22:33)</a>:</h4>
<p>(PS: this is basically as sanity info for my thesis. I need to posit that compile times are <em>way too long</em> and that therefore it'd be great if I invested uni's time through me, working on them)</p>



<a name="204267198"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267198" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267198">(Jul 17 2020 at 22:33)</a>:</h4>
<p>maybe check some of the <code>I-compiletime</code> issues for example code bases?</p>



<a name="204267251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204267251" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204267251">(Jul 17 2020 at 22:34)</a>:</h4>
<p>Nice! I didn't know about those :D thank you, I will definitely take a peek :)</p>



<a name="204268682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204268682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204268682">(Jul 17 2020 at 22:53)</a>:</h4>
<p>Wow, rust-analyzer makes a strong case. One <code>println!</code> gave me 12s of incremental compilation time</p>



<a name="204268743"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204268743" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204268743">(Jul 17 2020 at 22:54)</a>:</h4>
<p>Non-trivial changes oughta be a lot harder to recompile. This is great evidence :D</p>



<a name="204268847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204268847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204268847">(Jul 17 2020 at 22:56)</a>:</h4>
<p>Yeah, incremental struggles a lot when used across crates</p>



<a name="204269046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269046">(Jul 17 2020 at 22:59)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> <a href="http://docs.rs">docs.rs</a> takes ~20 seconds for an incremental rebuild</p>



<a name="204269107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269107">(Jul 17 2020 at 23:00)</a>:</h4>
<p>And uses an insane amount of memory, sometimes I run out and have to hard shutdown my laptop lol</p>



<a name="204269153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269153" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269153">(Jul 17 2020 at 23:01)</a>:</h4>
<p>my medium size project takes closer to 5 seconds which still feels pretty painful <a href="https://github.com/jyn514/saltwater">https://github.com/jyn514/saltwater</a></p>



<a name="204269223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269223" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269223">(Jul 17 2020 at 23:02)</a>:</h4>
<blockquote>
<p>sometimes I run out and have to hard shutdown my laptop lol</p>
</blockquote>
<p>Holy crap. How much ram do you have? I used to have 8, now I'm capped out at 12 x3<br>
I used to start swapping when hacking on rustc, 12 got me out of it and omg that is a friggin save.</p>



<a name="204269232"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269232" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269232">(Jul 17 2020 at 23:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269046">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="212698">Félix Fischer</span> <a href="http://docs.rs">docs.rs</a> takes ~20 seconds for an incremental rebuild</p>
</blockquote>
<p>Nice, thank you!</p>



<a name="204269236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269236">(Jul 17 2020 at 23:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269153">said</a>:</p>
<blockquote>
<p>my medium size project takes closer to 5 seconds which still feels pretty painful <a href="https://github.com/jyn514/saltwater">https://github.com/jyn514/saltwater</a></p>
</blockquote>
<p>Thanks again :D</p>



<a name="204269281"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269281" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269281">(Jul 17 2020 at 23:03)</a>:</h4>
<p>I have 8 GB of RAM but a fair amount goes to rust_analyzer, it's a hog</p>



<a name="204269301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269301">(Jul 17 2020 at 23:03)</a>:</h4>
<p>So I'd estimate rustc is using ~3-5 GB for an incremental rebuild</p>



<a name="204269369"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269369" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269369">(Jul 17 2020 at 23:04)</a>:</h4>
<p>I also have swap but I'm considering turning it off so rustc will get killed instead of freezing my laptop lol</p>



<a name="204269378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269378">(Jul 17 2020 at 23:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269281">said</a>:</p>
<blockquote>
<p>I have 8 GB of RAM but a fair amount goes to rust_analyzer, it's a hog</p>
</blockquote>
<p>YES<br>
(I love RA's help, but I cannot not agree with this sentiment x3)</p>



<a name="204269395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269395" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269395">(Jul 17 2020 at 23:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269369">said</a>:</p>
<blockquote>
<p>I also have swap but I'm considering turning it off so rustc will get killed instead of freezing my laptop lol</p>
</blockquote>
<p>omg that is pretty genius :D</p>



<a name="204269430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269430">(Jul 17 2020 at 23:05)</a>:</h4>
<p>I've been doing some optimization work on r-a in the last couple of weeks, including reducing memory usage, but it's still more than I'd like</p>



<a name="204269482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269482">(Jul 17 2020 at 23:05)</a>:</h4>
<p>OTOH I've seen RLS use something like 12 GB on rustc, sooo r-a seems way more reasonable than that</p>



<a name="204269545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269545" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269545">(Jul 17 2020 at 23:06)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> for what it's worth I tried that for compiling rustc itself which didn't work because it _always_ uses &gt; 8 GB lol</p>



<a name="204269580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269580" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269580">(Jul 17 2020 at 23:07)</a>:</h4>
<p>I'm convinced that build times are somehow linked to the number of dependencies</p>



<a name="204269674"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269674" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269674">(Jul 17 2020 at 23:08)</a>:</h4>
<p><a href="http://docs.rs">docs.rs</a> has 490 (I know, we're working on it) and also the worst incremental time I know other than rustc</p>



<a name="204269679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269679">(Jul 17 2020 at 23:08)</a>:</h4>
<p>Well, I guess rustdoc is also worse</p>



<a name="204269755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269755">(Jul 17 2020 at 23:10)</a>:</h4>
<p>rustdoc is probably ~30 seconds, rustc can be up to a minute</p>



<a name="204269804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269804">(Jul 17 2020 at 23:10)</a>:</h4>
<p>for incremental I mean, full builds are way longer</p>



<a name="204269812"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269812" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269812">(Jul 17 2020 at 23:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269580">said</a>:</p>
<blockquote>
<p>I'm convinced that build times are somehow linked to the number of dependencies</p>
</blockquote>
<p>I think that is true, in the sense that the deps. LOC add to your compile times. However, if I remember correctly, each crate is a compilation unit on its own, which should help with... parallelization? I don't remember the details.<br>
PS: oh no, <a href="http://docs.rs">docs.rs</a> is starting to swap. Oh nooooooooo</p>



<a name="204269830"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269830" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269830">(Jul 17 2020 at 23:10)</a>:</h4>
<p>I mean for incremental builds though, obviously it will take more time for full builds</p>



<a name="204269832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269832">(Jul 17 2020 at 23:10)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269804">said</a>:</p>
<blockquote>
<p>for incremental I mean, full builds are way longer</p>
</blockquote>
<p>AHH I see what you mean! Okay, yeah, that's... probably true</p>



<a name="204269845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269845">(Jul 17 2020 at 23:11)</a>:</h4>
<p>I have no idea how that affects incr. times, but your experience reflects mine</p>



<a name="204269859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269859">(Jul 17 2020 at 23:11)</a>:</h4>
<p>Like I also have 30s-1min incr. times with rustc</p>



<a name="204269965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204269965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204269965">(Jul 17 2020 at 23:13)</a>:</h4>
<p>even <code>src/rustc</code> (the thing that literally just calls <code>rustc_driver::main</code> can take a couple seconds</p>



<a name="204270625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270625">(Jul 17 2020 at 23:24)</a>:</h4>
<p><span class="user-mention silent" data-user-id="212698">Félix Fischer</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204267167">said</a>:</p>
<blockquote>
<p>(PS: this is basically as sanity info for my thesis. I need to posit that compile times are <em>way too long</em> and that therefore it'd be great if I invested uni's time through me, working on them)</p>
</blockquote>
<p>I could revive my old Core 2 Duo PC if you want "way too long build times" <span aria-label="rolling on the floor laughing" class="emoji emoji-1f923" role="img" title="rolling on the floor laughing">:rolling_on_the_floor_laughing:</span></p>



<a name="204270694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270694">(Jul 17 2020 at 23:26)</a>:</h4>
<p>That'd be great, that'd be lower perf than mine :D (only do it if you can and want to spend the time, there's no hard feelings if you don't! <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span>)</p>



<a name="204270726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270726">(Jul 17 2020 at 23:26)</a>:</h4>
<blockquote>
<p>I need to posit that compile times are way too long </p>
</blockquote>
<p>I mean, we were just talking about benchmarks taking three hours :P</p>



<a name="204270735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270735">(Jul 17 2020 at 23:26)</a>:</h4>
<p><a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/average.20run.20duration">https://rust-lang.zulipchat.com/#narrow/stream/247081-t-compiler.2Fperformance/topic/average.20run.20duration</a></p>



<a name="204270736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270736">(Jul 17 2020 at 23:26)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> you could try cloning and building <a href="https://github.com/Lokathor/gl46">https://github.com/Lokathor/gl46</a>. Be sure to activate at least the <code>global_loader</code> or <code>struct_loader</code> feature, and you can activate as many more as you like. It's all bindings, but over 2MB of source code, and so it takes a few seconds just to build the lib. And if you want you can also grab <code>winapi</code> and just turn on increasingly more features. It's <em>all</em> definitions and bindings, no codegen really, and it still takes ages (well, seconds, but when there's not even codegen happening that feels like ages).</p>



<a name="204270744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270744">(Jul 17 2020 at 23:26)</a>:</h4>
<p>oh yeah winapi is the biggest single crate I've seen</p>



<a name="204270747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270747">(Jul 17 2020 at 23:26)</a>:</h4>
<p>well no that's not true</p>



<a name="204270755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270755">(Jul 17 2020 at 23:27)</a>:</h4>
<p><a href="https://github.com/stm32-rs/stm32f3xx-hal/issues/46">https://github.com/stm32-rs/stm32f3xx-hal/issues/46</a> is the biggest</p>



<a name="204270763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270763">(Jul 17 2020 at 23:27)</a>:</h4>
<p>Generated code is cheating :P</p>



<a name="204270767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270767">(Jul 17 2020 at 23:27)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204270726">said</a>:</p>
<blockquote>
<blockquote>
<p>I need to posit that compile times are way too long </p>
</blockquote>
<p>I mean, we were just talking about benchmarks taking three hours :P</p>
</blockquote>
<p>x3 true! Although one could always counter-argue that "yeah but how many benchmark tests did you run? One or 2000?" and stuff</p>



<a name="204270788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270788">(Jul 17 2020 at 23:27)</a>:</h4>
<p>only 30 I think</p>



<a name="204270796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270796">(Jul 17 2020 at 23:27)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> would know</p>



<a name="204270845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270845">(Jul 17 2020 at 23:28)</a>:</h4>
<p>i have a discord bot that took 20 minutes to recompile after a single line change</p>



<a name="204270888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270888" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270888">(Jul 17 2020 at 23:29)</a>:</h4>
<p>slightly my fault, i turned on LTO and stuff, and it was on a virtual server so build times are a little inflated anyway.</p>



<a name="204270899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270899" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270899">(Jul 17 2020 at 23:29)</a>:</h4>
<p>and it uses tokio async/await magic, which i'm sure doesn't help</p>



<a name="204270902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270902">(Jul 17 2020 at 23:29)</a>:</h4>
<p>Re: number of benchs <br>
Yeah, they're not that many... well, not quite. They are a lot, but they aren't as well. There's only a few projects, but in average each of them is compiled like 5 times (3 always: full, incr-fromscratch, incr-ideal + some that have one or more patches applied after incremental builds)</p>



<a name="204270982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204270982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204270982">(Jul 17 2020 at 23:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224471">Lokathor</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204270845">said</a>:</p>
<blockquote>
<p>i have a discord bot that took 20 minutes to recompile after a single line change</p>
</blockquote>
<p>wow</p>



<a name="204271011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271011" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271011">(Jul 17 2020 at 23:31)</a>:</h4>
<p>that sounds like you hit something exponential in rustc</p>



<a name="204271023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271023">(Jul 17 2020 at 23:31)</a>:</h4>
<p>you should file a bug report <span class="user-mention" data-user-id="224471">@Lokathor</span></p>



<a name="204271052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271052" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271052">(Jul 17 2020 at 23:31)</a>:</h4>
<p>Actually is wasn't even a code change, it was a const that changed (a string literal entry).</p>



<a name="204271163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271163">(Jul 17 2020 at 23:33)</a>:</h4>
<p>btw, wow, <a href="http://docs.rs">docs.rs</a> took almost 8 minutes to build from scratch. And with only 10k LOC :D this is exactly the sort of size of code that I was looking for</p>



<a name="204271188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271188">(Jul 17 2020 at 23:33)</a>:</h4>
<p>well to be fair you did have to compile both tokio 0.1 and 0.2 lol</p>



<a name="204271248"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271248" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271248">(Jul 17 2020 at 23:34)</a>:</h4>
<p>we can't upgrade because it crashes the site <a href="https://github.com/tokio-rs/tokio/issues/2635">https://github.com/tokio-rs/tokio/issues/2635</a></p>



<a name="204271272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271272">(Jul 17 2020 at 23:34)</a>:</h4>
<p>wow</p>



<a name="204271303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271303" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271303">(Jul 17 2020 at 23:35)</a>:</h4>
<p><a href="http://docs.rs">docs.rs</a> has all sorts of issues lol</p>



<a name="204271321"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271321" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271321">(Jul 17 2020 at 23:35)</a>:</h4>
<p>this is actually a lot _better_ than it used to be which should tell you something lol</p>



<a name="204271331"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271331" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271331">(Jul 17 2020 at 23:35)</a>:</h4>
<p>oh boi <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="204271336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271336">(Jul 17 2020 at 23:35)</a>:</h4>
<p>we used to compiler cargo from scratch</p>



<a name="204271381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271381" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271381">(Jul 17 2020 at 23:36)</a>:</h4>
<p>no idea why <span aria-label="shrug" class="emoji emoji-1f937" role="img" title="shrug">:shrug:</span></p>



<a name="204271434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271434">(Jul 17 2020 at 23:37)</a>:</h4>
<p>I'm more surprised at the tokio issues :) Building Cargo from source sounds almost reasonable for a site like <a href="http://docs.rs">docs.rs</a></p>



<a name="204271497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271497" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271497">(Jul 17 2020 at 23:38)</a>:</h4>
<p>1 println added to <a href="http://docs.rs">docs.rs</a> -&gt; 20s of rebuild time. This is better evidence than I expected to have in hand :D</p>



<a name="204271502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271502" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271502">(Jul 17 2020 at 23:38)</a>:</h4>
<p>well we do launch a new tokio runtime for each request <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span></p>



<a name="204271520"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271520" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jonas Schievink  [he/him] <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271520">(Jul 17 2020 at 23:38)</a>:</h4>
<p>Oh. <span aria-label="upside down" class="emoji emoji-1f643" role="img" title="upside down">:upside_down:</span> indeed :)</p>



<a name="204271543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271543">(Jul 17 2020 at 23:39)</a>:</h4>
<p><span aria-label="rofl" class="emoji emoji-1f923" role="img" title="rofl">:rofl:</span></p>



<a name="204271548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271548">(Jul 17 2020 at 23:39)</a>:</h4>
<p>okay okay if generated code doesn't count, try the <code>safe_arch</code> crate. Be sure to use <code>-Ctarget-cpu=native</code> so that it turns on as many modules as possible.</p>



<a name="204271558"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271558" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271558">(Jul 17 2020 at 23:39)</a>:</h4>
<p>:P</p>



<a name="204271621"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271621" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Lokathor <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271621">(Jul 17 2020 at 23:40)</a>:</h4>
<p>Well it's still not that large, only ~800 functions I guess, but I did write them out all by hand, no auto-generation here.</p>



<a name="204271804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271804">(Jul 17 2020 at 23:43)</a>:</h4>
<p>ooh take a look a cranelift-codegen</p>



<a name="204271834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204271834" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204271834">(Jul 17 2020 at 23:43)</a>:</h4>
<p>they have _lots_ of build scripts, codegen takes like 20 seconds and codegen-meta takes another 15</p>



<a name="204272540"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204272540" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204272540">(Jul 17 2020 at 23:56)</a>:</h4>
<p>awesome, thank you both <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="204272555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204272555" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204272555">(Jul 17 2020 at 23:57)</a>:</h4>
<p>I will be taking a look at all of these during today and maybe the weekend :)</p>



<a name="204298881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204298881" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204298881">(Jul 18 2020 at 12:31)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204269369">said</a>:</p>
<blockquote>
<p>I also have swap but I'm considering turning it off so rustc will get killed instead of freezing my laptop lol</p>
</blockquote>
<p>Set the kernel.sysrq sysctl to a value with the bit corresponding to 0x40 set (or set it to 1 to allow all magic sysrequests, including force-reboot) and use alt-PrtSc-f to invoke the OOM killer.</p>



<a name="204388518"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388518" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388518">(Jul 20 2020 at 05:52)</a>:</h4>
<p>I've now collected about 28 timings of incremental time and incremental recompilation time after adding a <code>println</code> line.</p>



<a name="204388525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388525">(Jul 20 2020 at 05:53)</a>:</h4>
<p>About how much would y'all say is too slow for incremental recompilation after changing 1 line of code?</p>



<a name="204388587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388587">(Jul 20 2020 at 05:54)</a>:</h4>
<p>The craziest one was Rocket, which took almost 2 minutes after adding a print somewhere</p>



<a name="204388595"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388595" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388595">(Jul 20 2020 at 05:55)</a>:</h4>
<p>But <a href="http://docs.rs">docs.rs</a> was also pretty bananas at 20s</p>



<a name="204388605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388605">(Jul 20 2020 at 05:55)</a>:</h4>
<p>Both of those seem like too much to me</p>



<a name="204388608"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388608" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388608">(Jul 20 2020 at 05:55)</a>:</h4>
<p>But how slow is <em>too slow</em>?</p>



<a name="204388613"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388613" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388613">(Jul 20 2020 at 05:55)</a>:</h4>
<p>5 seconds? 1s? Less?</p>



<a name="204388664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388664">(Jul 20 2020 at 05:56)</a>:</h4>
<p>I think that working for so long on interpreted languages has kind of messed up my intuition of what is too long of a compile time XD</p>



<a name="204388672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388672" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388672">(Jul 20 2020 at 05:56)</a>:</h4>
<p>1/60 seconds</p>



<a name="204388677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388677">(Jul 20 2020 at 05:57)</a>:</h4>
<p>(i.e. the duration of one frame at 60 frames per second)</p>



<a name="204388680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388680">(Jul 20 2020 at 05:57)</a>:</h4>
<p>at least personally that has always been the goal, since 2013</p>



<a name="204388694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388694">(Jul 20 2020 at 05:57)</a>:</h4>
<p>Okay, I kinda like that attitude. If it were less than 1/60, it would feel basically instant</p>



<a name="204388697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388697" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388697">(Jul 20 2020 at 05:57)</a>:</h4>
<p>:)</p>



<a name="204388699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388699">(Jul 20 2020 at 05:57)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> try using <code>-Z time-passes</code> (if it still works) to see how much of those 20 seconds are in parsing / expansion</p>



<a name="204388742"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388742" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388742">(Jul 20 2020 at 05:58)</a>:</h4>
<p>ohh, I shall :)</p>



<a name="204388746"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388746" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388746">(Jul 20 2020 at 05:58)</a>:</h4>
<p>because that's not incremental at all</p>



<a name="204388748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388748">(Jul 20 2020 at 05:58)</a>:</h4>
<p>(currently)</p>



<a name="204388756"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388756" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388756">(Jul 20 2020 at 05:58)</a>:</h4>
<p>Oh, really? That makes... sense. A bit. Wait</p>



<a name="204388762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388762">(Jul 20 2020 at 05:58)</a>:</h4>
<p>and, well, the goal for me is to update the compilation state as you're typing, hence needing to be faster than one frame</p>



<a name="204388765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388765">(Jul 20 2020 at 05:58)</a>:</h4>
<p>Hahahahahaha</p>



<a name="204388769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388769">(Jul 20 2020 at 05:58)</a>:</h4>
<p>I love that</p>



<a name="204388772"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388772" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388772">(Jul 20 2020 at 05:58)</a>:</h4>
<p>:D</p>



<a name="204388792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388792" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388792">(Jul 20 2020 at 05:59)</a>:</h4>
<p>One question. You say that those 20s are not incremental messing things up</p>



<a name="204388796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388796">(Jul 20 2020 at 05:59)</a>:</h4>
<p>How did you know?</p>



<a name="204388841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388841">(Jul 20 2020 at 06:00)</a>:</h4>
<p>What order of times are being spent in the actual incremental comp part?</p>



<a name="204388844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388844">(Jul 20 2020 at 06:00)</a>:</h4>
<p>I'm not saying that</p>



<a name="204388845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388845" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388845">(Jul 20 2020 at 06:00)</a>:</h4>
<p>I'm saying <em>you</em> should look</p>



<a name="204388849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388849">(Jul 20 2020 at 06:00)</a>:</h4>
<p>Yes yes yes</p>



<a name="204388853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388853">(Jul 20 2020 at 06:00)</a>:</h4>
<p>But I trust your judgement</p>



<a name="204388878"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388878" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388878">(Jul 20 2020 at 06:01)</a>:</h4>
<p>the problem is that incremental currently relies on treating the HIR as the input to check for changes, using paths as the persisted identity, etc.. but also the stuff that happens before HIR is hard to split up into individual chunks of work, it's sort of all tangled together</p>



<a name="204388883"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388883" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388883">(Jul 20 2020 at 06:01)</a>:</h4>
<p>*(While I set up that println that slowed it down 20s, I'd like to know how did you have that hunch)</p>



<a name="204388893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388893">(Jul 20 2020 at 06:01)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204388878">said</a>:</p>
<blockquote>
<p>the problem is that incremental currently relies on treating the HIR as the input to check for changes, using paths as the persisted identity, etc.. but also the stuff that happens before HIR is hard to split up into individual chunks of work, it's sort of all tangled together</p>
</blockquote>
<p>OHHHHH</p>



<a name="204388897"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388897" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388897">(Jul 20 2020 at 06:01)</a>:</h4>
<p>so a bunch more work is needed to push it past before HIR than ever was to bring it to the current point</p>



<a name="204388900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388900" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388900">(Jul 20 2020 at 06:01)</a>:</h4>
<p>I'm starting to get it</p>



<a name="204388906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388906" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388906">(Jul 20 2020 at 06:01)</a>:</h4>
<p>What you say makes a lot of sense</p>



<a name="204388911"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388911" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388911">(Jul 20 2020 at 06:02)</a>:</h4>
<p>(which frankly, once we had the "red-green" incremental algorithm, wasn't that hard, you "just" throw stuff into queries and it magically works)</p>



<a name="204388958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388958" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388958">(Jul 20 2020 at 06:02)</a>:</h4>
<p>it's possible we're not caching some things on disk that we should, that's still opt-in (but just one line in the query definition)</p>



<a name="204388988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204388988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204388988">(Jul 20 2020 at 06:03)</a>:</h4>
<p>I see</p>



<a name="204389002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389002">(Jul 20 2020 at 06:03)</a>:</h4>
<p>(the dependency tracking works without saving the data because it only recomputes something if its dependencies changed, and this both propagates and stops propagation, to minimize what you have to recompute)</p>



<a name="204389012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389012">(Jul 20 2020 at 06:03)</a>:</h4>
<p>(Okay this will take a while; I might've done a <code>cargo clean</code> yesterday and now I have to wait for the full <a href="http://docs.rs">docs.rs</a> build)</p>



<a name="204389055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389055">(Jul 20 2020 at 06:04)</a>:</h4>
<p>btw to measure incremental time, you can nuke just <code>target/debug/incremental/crate-name-*</code> or similar</p>



<a name="204389062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389062">(Jul 20 2020 at 06:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204389002">said</a>:</p>
<blockquote>
<p>(the dependency tracking works without saving the data because it only recomputes something if its dependencies changed, and this both propagates and stops propagation, to minimize what you have to recompute)</p>
</blockquote>
<p>Is this algorithm documented somewhere?</p>



<a name="204389063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389063" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389063">(Jul 20 2020 at 06:04)</a>:</h4>
<p>in order to force it to start from scratch</p>



<a name="204389070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389070" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389070">(Jul 20 2020 at 06:04)</a>:</h4>
<p>I have no idea, although it's not a particularly complicated one</p>



<a name="204389088"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389088" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389088">(Jul 20 2020 at 06:05)</a>:</h4>
<p>you store hashes of the outputs of queries even if you don't keep the value around</p>



<a name="204389103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389103">(Jul 20 2020 at 06:05)</a>:</h4>
<p>if you had to recompute something because its inputs changed, you can compare the hash of the output, and if it's the same, that stops the propagation</p>



<a name="204389150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389150">(Jul 20 2020 at 06:06)</a>:</h4>
<p>I see, that makes sense</p>



<a name="204389159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389159">(Jul 20 2020 at 06:06)</a>:</h4>
<p>so it's sort of "dependency graph says you depend on this but the logic doesn't rely on the thing that just changed"</p>



<a name="204389183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389183">(Jul 20 2020 at 06:07)</a>:</h4>
<p>like the generics of a function not depending on its signature, or even more importantly, neither depending on its body</p>



<a name="204389293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389293" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389293">(Jul 20 2020 at 06:09)</a>:</h4>
<p>got it</p>



<a name="204389295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389295">(Jul 20 2020 at 06:09)</a>:</h4>
<p>it's still on-demand so you only figure out whether something is "dirty" when it's needed by something else, but once you do, if it's not  dirty, you can either load it from disk, or recompute it, or neither if the value isn't needed (but e.g. the diagnostics side-effects are, which I believe are tracked automatically)</p>



<a name="204389347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389347">(Jul 20 2020 at 06:10)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> oh I'm dumb. salsa must have this documented!</p>



<a name="204389349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389349" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389349">(Jul 20 2020 at 06:10)</a>:</h4>
<p>since I believe it must be using the same algorithm</p>



<a name="204389350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389350">(Jul 20 2020 at 06:10)</a>:</h4>
<p>haha we all are</p>



<a name="204389356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389356" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389356">(Jul 20 2020 at 06:10)</a>:</h4>
<p><a href="https://github.com/salsa-rs/salsa">https://github.com/salsa-rs/salsa</a></p>



<a name="204389362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389362">(Jul 20 2020 at 06:11)</a>:</h4>
<p>nice. Will add salsa to my homework list :)</p>



<a name="204389366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389366">(Jul 20 2020 at 06:11)</a>:</h4>
<p>actually I could read it while <a href="http://docs.rs">docs.rs</a> compiles ^^</p>



<a name="204389375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389375">(Jul 20 2020 at 06:11)</a>:</h4>
<p>(noooo it just finished T-T)</p>



<a name="204389378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389378">(Jul 20 2020 at 06:11)</a>:</h4>
<p>the main difference between the rustc incremental on-demand system and salsa is that salsa came later and it's a "librarization"/"frameworkization" of the concept</p>



<a name="204389384"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389384" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389384">(Jul 20 2020 at 06:11)</a>:</h4>
<p>salsa is cleaner but also less specialized/obsessed with overhead</p>



<a name="204389431"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389431" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389431">(Jul 20 2020 at 06:12)</a>:</h4>
<p>less obsessed with overhead? or (nevermind, you clarified it :3)</p>



<a name="204389438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389438">(Jul 20 2020 at 06:12)</a>:</h4>
<p>interesting!</p>



<a name="204389441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389441" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389441">(Jul 20 2020 at 06:12)</a>:</h4>
<p>it uses traits and trait objects (or maybe even just <code>impl Trait</code>? so generics) whereas the rustc one uses a macro to define everything, and function pointers</p>



<a name="204389453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389453">(Jul 20 2020 at 06:13)</a>:</h4>
<p>woah</p>



<a name="204389462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389462" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389462">(Jul 20 2020 at 06:13)</a>:</h4>
<p>yeah that feels like quite the different approach</p>



<a name="204389481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389481">(Jul 20 2020 at 06:13)</a>:</h4>
<p>I doubt salsa is significantly slower, it's just scary to try and change the rustc one because a lot of things are likely to be a waste of time due to second-order effects and whatnot</p>



<a name="204389525"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389525" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389525">(Jul 20 2020 at 06:14)</a>:</h4>
<p>yas yas</p>



<a name="204389528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389528">(Jul 20 2020 at 06:14)</a>:</h4>
<p>at least we have <a href="http://perf.rust-lang.org">perf.rust-lang.org</a> so it's at most a waste of time :P</p>



<a name="204389532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389532" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389532">(Jul 20 2020 at 06:14)</a>:</h4>
<p>:)</p>



<a name="204389536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389536">(Jul 20 2020 at 06:14)</a>:</h4>
<p>perf.rlo is so friggin useful</p>



<a name="204389550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389550" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389550">(Jul 20 2020 at 06:14)</a>:</h4>
<p>sounds like the incremental algorithm is only described in <a href="https://www.youtube.com/watch?v=i_IhACacPRY">https://www.youtube.com/watch?v=i_IhACacPRY</a></p>
<div class="youtube-video message_inline_image"><a data-id="i_IhACacPRY" href="https://www.youtube.com/watch?v=i_IhACacPRY"><img src="https://i.ytimg.com/vi/i_IhACacPRY/default.jpg"></a></div>



<a name="204389552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389552" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389552">(Jul 20 2020 at 06:14)</a>:</h4>
<p>I mean (tangent!) have you looked at how llvm 11 improved its times after they starting keeping track?</p>



<a name="204389554"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389554" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389554">(Jul 20 2020 at 06:14)</a>:</h4>
<p>(looking at the salsa book)</p>



<a name="204389574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389574" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389574">(Jul 20 2020 at 06:15)</a>:</h4>
<p>anyway the other thing that's coarse-grained (but more fine-grained than "the entire crate and always runs") is CGUs</p>



<a name="204389635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389635">(Jul 20 2020 at 06:16)</a>:</h4>
<p>yes, CGUs! I know a little bit about them. Wesley has been investigating them for the purposes of accelerating incr. comp</p>



<a name="204389638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389638" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389638">(Jul 20 2020 at 06:16)</a>:</h4>
<p>so even if your parsing and macro expansion time is negligible, you run into the problem that some small change somewhere may be in a large CGU (or all your CGUs are large, lolsob) and redoing the MIR -&gt; LLVM IR codegen and LLVM optimizations on that CGU will take a long  time</p>



<a name="204389649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389649">(Jul 20 2020 at 06:16)</a>:</h4>
<p>note that if you want to ignore all that, and measure just the "IDE-facing" overhead, you should use <code>cargo check</code></p>



<a name="204389652"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389652" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389652">(Jul 20 2020 at 06:16)</a>:</h4>
<blockquote>
<p>or all your CGUs are large, lolsob</p>
</blockquote>
<p>Been there T.T</p>



<a name="204389663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389663">(Jul 20 2020 at 06:17)</a>:</h4>
<p>sadly I don't think there's a way to run <code>cargo rustc</code> as if it were <code>cargo check</code>, which would be really handy</p>



<a name="204389672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389672" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389672">(Jul 20 2020 at 06:17)</a>:</h4>
<p>One smol mir opt I implemented is disabled because of CGU partitioning</p>



<a name="204389763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389763">(Jul 20 2020 at 06:19)</a>:</h4>
<p>so the <code>-Z time-passes</code> thing, is that a <code>cargo</code> flag?</p>



<a name="204389765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389765">(Jul 20 2020 at 06:19)</a>:</h4>
<p>rustc</p>



<a name="204389771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389771">(Jul 20 2020 at 06:19)</a>:</h4>
<p>Cargo <del>doesn't</del> didn't <em>really</em> have -Z flags, except now it's starting to, lol</p>



<a name="204389817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389817" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389817">(Jul 20 2020 at 06:20)</a>:</h4>
<p>so it's really easy to get a confusing error that you can't even tell is from Cargo telling you a flag you're sure exists, doesn't</p>



<a name="204389851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389851">(Jul 20 2020 at 06:21)</a>:</h4>
<p>yeah, I was just confused when invoking the cargo help command for <code>-Z</code> flags and saw nothing about time passes</p>



<a name="204389902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389902" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389902">(Jul 20 2020 at 06:22)</a>:</h4>
<p>the Cargo -Z flags are mostly about controlling or extracting information from, well, the Cargo side. wow that sounds so tautological</p>



<a name="204389910"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389910" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389910">(Jul 20 2020 at 06:22)</a>:</h4>
<p>basically Cargo treats the compilation as opaque (JSON diagnostic output being the main exception AFAIK)</p>



<a name="204389925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389925">(Jul 20 2020 at 06:23)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204389910">said</a>:</p>
<blockquote>
<p>basically Cargo treats the compilation as opaque (JSON diagnostic output being the main exception AFAIK)</p>
</blockquote>
<p>Ohh, I had no idea. Well, that seems very sensible. Keeps the interfaces well defined. Had no idea tho</p>



<a name="204389982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389982">(Jul 20 2020 at 06:24)</a>:</h4>
<p>so anything that peers into the compilation needs to go through rustc flags - either <code>cargo rustc -- ...</code> (the <code>--</code> ends Cargo flags) or <code>RUSTFLAGS</code> (which you don't really want because it will affect all your dependencies and cause a full rebuild)</p>



<a name="204389996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204389996" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204389996">(Jul 20 2020 at 06:25)</a>:</h4>
<p>I gave this to <code>cargo</code>: <code>cargo +nightly rustc --lib -- -Z time-passes</code>, I hope it works.<br>
(PS: just realized. Since I'm now compiling with nightly, I'll be building a new incr. cache XD!)</p>



<a name="204390044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390044">(Jul 20 2020 at 06:26)</a>:</h4>
<p>did you spend all the time we were talking compiling with non-nightly :P?</p>



<a name="204390047"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390047" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390047">(Jul 20 2020 at 06:26)</a>:</h4>
<blockquote>
<p>(the -- ends Cargo flags)</p>
</blockquote>
<p>OHH THAT WAS IT. I had forgotten what were the <code>--</code> for. It's been at least 18 months since I last used it</p>



<a name="204390059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390059">(Jul 20 2020 at 06:26)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390044">said</a>:</p>
<blockquote>
<p>did you spend all the time we were talking compiling with non-nightly :P?</p>
</blockquote>
<p>I want to exercise my right to not self-incriminate, but yes, yes I did XDDD</p>



<a name="204390067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390067">(Jul 20 2020 at 06:26)</a>:</h4>
<p>another fun use of <code>--</code> is grep (or <code>rg</code>) when your regex starts with <code>-</code> :P</p>



<a name="204390072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390072">(Jul 20 2020 at 06:27)</a>:</h4>
<p>I tend to just have nightly as the default and only even install stable/beta for testing</p>



<a name="204390076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390076">(Jul 20 2020 at 06:27)</a>:</h4>
<p>lool!</p>



<a name="204390081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390081">(Jul 20 2020 at 06:27)</a>:</h4>
<p>leads to less pain overall I feel. but maybe I'm biased by having worked on Rust since before the trains even existed</p>



<a name="204390084"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390084" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390084">(Jul 20 2020 at 06:27)</a>:</h4>
<p>(or nightly, lol)</p>



<a name="204390125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390125">(Jul 20 2020 at 06:28)</a>:</h4>
<p>I would do that happily (having nightly as the default), but then I could forget and end up in a mess of my own creation</p>



<a name="204390137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390137" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390137">(Jul 20 2020 at 06:28)</a>:</h4>
<p>it's easier to mess up with stable/beta because you can end up reporting bugs that have been fixed already :P</p>



<a name="204390141"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390141" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390141">(Jul 20 2020 at 06:28)</a>:</h4>
<p>Maybe in a later year I could, if I managed to work on Rust stuff full time</p>



<a name="204390148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390148" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390148">(Jul 20 2020 at 06:28)</a>:</h4>
<p>(although the converse is also true, so YMMV)</p>



<a name="204390228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390228" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390228">(Jul 20 2020 at 06:30)</a>:</h4>
<p>So coming back to salsa</p>



<a name="204390236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390236" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390236">(Jul 20 2020 at 06:30)</a>:</h4>
<p>The idea is to eventually have salsa in the rust compiler... right?</p>



<a name="204390238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390238" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390238">(Jul 20 2020 at 06:30)</a>:</h4>
<p>sort of?</p>



<a name="204390256"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390256" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390256">(Jul 20 2020 at 06:31)</a>:</h4>
<p>it's not really necessary other than for aesthetics reasons</p>



<a name="204390262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390262" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390262">(Jul 20 2020 at 06:31)</a>:</h4>
<p>but maybe <span class="user-mention" data-user-id="116009">@nikomatsakis</span> has some long-term plans <em>shrug</em></p>



<a name="204390317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390317">(Jul 20 2020 at 06:32)</a>:</h4>
<p>the important thing is querifying/incrementalizing the rest of the compilation, on the "front" side, and maybe improving CGU partitioning, on the "back" side</p>



<a name="204390318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390318">(Jul 20 2020 at 06:32)</a>:</h4>
<p>and only the former is relevant to IDEs</p>



<a name="204390344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390344">(Jul 20 2020 at 06:33)</a>:</h4>
<p>right, right</p>



<a name="204390513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390513" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390513">(Jul 20 2020 at 06:36)</a>:</h4>
<p>I have three big hopes wrt to the backend</p>
<ol>
<li>That LLVM keeps this trend going and registers a speedup (yep, better times. On llvm. I'm a crazy person) now that they're actually measuring the compilation times.</li>
<li>That Wesley and the rest of us figure out a way to better partition the CGUs. We don't really care that much about performance in debug builds, so this seems like a very fertile ground to reduce incremental times (by reducing the overall span of the CGUs over compiled code).</li>
<li>That the mir-opts wg manages to lift a lot of weight off of LLVM, resulting in better compile times c:</li>
</ol>



<a name="204390624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390624">(Jul 20 2020 at 06:38)</a>:</h4>
<p>wtf did I just see. Nightly is recompiling <code>docs.rs</code> in 4!!! SECONDS!</p>



<a name="204390630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390630">(Jul 20 2020 at 06:38)</a>:</h4>
<p>lost 16 seconds between stable and nightly</p>



<a name="204390638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390638" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390638">(Jul 20 2020 at 06:39)</a>:</h4>
<p>what is sleeping in that nightly</p>



<a name="204390641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390641" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390641">(Jul 20 2020 at 06:39)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390137">said</a>:</p>
<blockquote>
<p>it's easier to mess up with stable/beta because you can end up reporting bugs that have been fixed already :P</p>
</blockquote>
<p>okay but I didn't really expect to be right in this case,</p>



<a name="204390643"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390643" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390643">(Jul 20 2020 at 06:39)</a>:</h4>
<p>you can also try beta if you're bored :P</p>



<a name="204390656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390656" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390656">(Jul 20 2020 at 06:39)</a>:</h4>
<p>omg eddy don't tempt me <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span> I dunno if you know, but I want to keep going even tho I should go sleep</p>



<a name="204390706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390706" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390706">(Jul 20 2020 at 06:40)</a>:</h4>
<p>oh I thought you started replying in this thread because it's monday morning</p>



<a name="204390709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390709">(Jul 20 2020 at 06:40)</a>:</h4>
<p>This is cool tho. -16 seconds. Did I just accidentally download faster ram or something? This feels like magic</p>



<a name="204390719"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390719" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390719">(Jul 20 2020 at 06:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390706">said</a>:</p>
<blockquote>
<p>oh I thought you started replying in this thread because it's monday morning</p>
</blockquote>
<p>Oh no, it's sunday night for me still</p>



<a name="204390722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390722">(Jul 20 2020 at 06:41)</a>:</h4>
<p>so not in europe, got it :P</p>



<a name="204390731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390731">(Jul 20 2020 at 06:41)</a>:</h4>
<p>"still" &lt;- this dummy you're talking to has insomnia</p>



<a name="204390748"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390748" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390748">(Jul 20 2020 at 06:41)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390722">said</a>:</p>
<blockquote>
<p>so not in europe, got it :P</p>
</blockquote>
<p>Yup! I'm in Chile ^^</p>



<a name="204390750"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390750" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390750">(Jul 20 2020 at 06:42)</a>:</h4>
<p>to clarify something I've said earlier: 1/60 is for IDEs, when you can <em>theoretically</em> do 0 work, and the hard part is minimizing the overhead of tracking and propagating changes, once everything is incrementalized. it's not feasible for actual codegen I don't think :P</p>



<a name="204390806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390806" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390806">(Jul 20 2020 at 06:42)</a>:</h4>
<p>btw did you get a breakdown of those 4 seconds?</p>



<a name="204390807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390807">(Jul 20 2020 at 06:42)</a>:</h4>
<p>It might be feasible for codegen if we ever managed to use something like cranelift for debug builds, right?</p>



<a name="204390822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390822">(Jul 20 2020 at 06:43)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390806">said</a>:</p>
<blockquote>
<p>btw did you get a breakdown of those 4 seconds?</p>
</blockquote>
<p>Yaas! Almost forgot. Will put it in a pastebin, it's a long scroll</p>



<a name="204390827"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390827" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390827">(Jul 20 2020 at 06:43)</a>:</h4>
<p>even then, it would need to be something far more advanced than cranelift... or maybe not, idk, we're still talking more than a milisecond</p>



<a name="204390834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390834" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390834">(Jul 20 2020 at 06:43)</a>:</h4>
<p>although it would be far more interesting to get the timings from the (longer) stable build</p>



<a name="204390893"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390893" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390893">(Jul 20 2020 at 06:44)</a>:</h4>
<p>Output: <a href="https://pastebin.ubuntu.com/p/W7b3YxWK5r/">https://pastebin.ubuntu.com/p/W7b3YxWK5r/</a></p>



<a name="204390894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390894">(Jul 20 2020 at 06:44)</a>:</h4>
<p>presumably you can add <code>RUSTC_BOOTSTRAP=1</code> in front of your command to make <code>-Z</code> work on stable (NB: I don't condone doing this in general, this is just to get some data)</p>



<a name="204390925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390925">(Jul 20 2020 at 06:45)</a>:</h4>
<blockquote>
<p><code>time: 0.000; rss: 52MB   parse_crate</code></p>
</blockquote>
<p>do we actually measure this correctly anymore? surely it's at least 1ms??</p>



<a name="204390935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390935">(Jul 20 2020 at 06:45)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390894">said</a>:</p>
<blockquote>
<p>presumably you can add <code>RUSTC_BOOTSTRAP=1</code> in front of your command to make <code>-Z</code> work on stable (NB: I don't condone doing this in general, this is just to get some data)</p>
</blockquote>
<p>I love the hacks that you're showing me. I have a friend that teaches like that, I really like this "there is a tool that is really advanced, not intended for this really, but both you and I will learn from it :D" thing</p>



<a name="204390986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390986" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390986">(Jul 20 2020 at 06:46)</a>:</h4>
<p>not really like that no. it only works because we cheapened out on solving compiling rustc with the previous version of itself, properly</p>



<a name="204390990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390990">(Jul 20 2020 at 06:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204390925">said</a>:</p>
<blockquote>
<blockquote>
<p><code>time: 0.000; rss: 52MB   parse_crate</code></p>
</blockquote>
<p>do we actually measure this correctly anymore? surely it's at least 1ms??</p>
</blockquote>
<p>Might be because it's incremental recompilation?</p>



<a name="204390996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204390996" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204390996">(Jul 20 2020 at 06:46)</a>:</h4>
<p>no, we don't do incremental reparsing</p>



<a name="204391004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391004">(Jul 20 2020 at 06:46)</a>:</h4>
<p>for some reason I thought we made <code>-Z time-passes</code> hierarchical. I guess not. so arguably it's still broken?</p>



<a name="204391026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391026">(Jul 20 2020 at 06:47)</a>:</h4>
<p>mm, I see, so this output should be taken with a grain of salt then, 'cause we don't know how much is the flag broken?</p>



<a name="204391028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391028">(Jul 20 2020 at 06:47)</a>:</h4>
<p>anyway looks like a whole second is spend on macro expansion (including parsing maybe?)</p>



<a name="204391031"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391031" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391031">(Jul 20 2020 at 06:47)</a>:</h4>
<p>that's what I was looking for anyway</p>



<a name="204391034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391034" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391034">(Jul 20 2020 at 06:47)</a>:</h4>
<p>(<code>time: 0.967; rss: 298MB   configure_and_expand</code>)</p>



<a name="204391076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391076">(Jul 20 2020 at 06:48)</a>:</h4>
<p>(BTW I really like the <code>rss</code> metric. This is the first project where I've had the chance to see memory usage been measured in such a way)</p>



<a name="204391093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391093" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391093">(Jul 20 2020 at 06:48)</a>:</h4>
<p>the rest seems to be CGU-driven</p>



<a name="204391106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391106" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391106">(Jul 20 2020 at 06:49)</a>:</h4>
<p>holy crap, even the crate metadata?</p>



<a name="204391111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391111">(Jul 20 2020 at 06:49)</a>:</h4>
<p>(<code>time: 1.042; rss: 618MB   generate_crate_metadata</code>)</p>



<a name="204391120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391120">(Jul 20 2020 at 06:49)</a>:</h4>
<p>presumably it's timing the total time which includes running a lot of stuff because one (or more) CGU(s) had to be rebuilt?</p>



<a name="204391124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391124">(Jul 20 2020 at 06:49)</a>:</h4>
<p>if you want to see the true timings, I guess you'll need <code>-Z self-profile</code></p>



<a name="204391166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391166" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391166">(Jul 20 2020 at 06:50)</a>:</h4>
<p>just like that?</p>



<a name="204391175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391175">(Jul 20 2020 at 06:50)</a>:</h4>
<p>everything else the same? It keeps its cache and all of that?</p>



<a name="204391178"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391178" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391178">(Jul 20 2020 at 06:50)</a>:</h4>
<p>yeah, have you use measureme's <code>summarize</code>/<code>crox</code> before?</p>



<a name="204391182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391182" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391182">(Jul 20 2020 at 06:50)</a>:</h4>
<p>nu, never</p>



<a name="204391187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391187" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391187">(Jul 20 2020 at 06:50)</a>:</h4>
<p><code>cargo +nightly install --git https://github.com/rust-lang/measureme summarize crox</code></p>



<a name="204391203"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391203" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391203">(Jul 20 2020 at 06:51)</a>:</h4>
<p>(rustc will generate 3 files, those tools can read them)</p>



<a name="204391209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391209" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391209">(Jul 20 2020 at 06:51)</a>:</h4>
<p>nice!</p>



<a name="204391218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391218">(Jul 20 2020 at 06:51)</a>:</h4>
<p>I wish it was integrated with rustc better but eh</p>



<a name="204391224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391224">(Jul 20 2020 at 06:51)</a>:</h4>
<p>yeah, baby steps</p>



<a name="204391264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391264">(Jul 20 2020 at 06:52)</a>:</h4>
<p>eventually all the good tools end up in the right place</p>



<a name="204391519"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391519" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391519">(Jul 20 2020 at 06:58)</a>:</h4>
<p>kay, installed the crates and ran self-profile</p>



<a name="204391544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391544" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391544">(Jul 20 2020 at 06:59)</a>:</h4>
<p>now I'm guessing that measureme must have the rest of the instructions... lemme see...</p>



<a name="204391722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391722">(Jul 20 2020 at 07:02)</a>:</h4>
<p>it does!</p>



<a name="204391755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391755">(Jul 20 2020 at 07:03)</a>:</h4>
<p>kay one sec, I'm installing flamegraph as well</p>



<a name="204391939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204391939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204391939">(Jul 20 2020 at 07:06)</a>:</h4>
<p>Kay, this is the summarized table: <a href="https://pastebin.ubuntu.com/p/Jp93zsz23x/">https://pastebin.ubuntu.com/p/Jp93zsz23x/</a></p>



<a name="204392209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392209" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392209">(Jul 20 2020 at 07:11)</a>:</h4>
<p>These files are the output of the self-profiling: <br>
<a href="/user_uploads/4715/xo5AQzqSem6m4VyaYrPV9ALB/cratesfyi-8963.events">cratesfyi-8963.events</a> <a href="/user_uploads/4715/2EgTtGks49UUgmgtfC3AUXV9/cratesfyi-8963.string_data">cratesfyi-8963.string_data</a> <a href="/user_uploads/4715/Sj5MlEfQY5jc6-pVR6uo5aUV/cratesfyi-8963.string_index">cratesfyi-8963.string_index</a></p>



<a name="204392230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pachi <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392230">(Jul 20 2020 at 07:11)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span>  IIRC <span class="user-mention" data-user-id="133169">@matklad</span> was talking with Niko about improving salsa for faster queries in rust analyzer.</p>



<a name="204392332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392332">(Jul 20 2020 at 07:13)</a>:</h4>
<p><span aria-label="heart eyes" class="emoji emoji-1f60d" role="img" title="heart eyes">:heart_eyes:</span></p>



<a name="204392341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392341">(Jul 20 2020 at 07:13)</a>:</h4>
<p>wow parsing the crate is a quarter of a milisecond</p>



<a name="204392434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392434">(Jul 20 2020 at 07:14)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> btw do you have chrome installed?</p>



<a name="204392438"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392438" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392438">(Jul 20 2020 at 07:14)</a>:</h4>
<p>Yas!</p>



<a name="204392456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392456" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392456">(Jul 20 2020 at 07:15)</a>:</h4>
<p>run <code>crox cratesfyi-8963</code> then load the resulting <code>chrome_profile.json</code> file into Chrome DevTools</p>



<a name="204392457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392457" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392457">(Jul 20 2020 at 07:15)</a>:</h4>
<p>I use FF for the most part, but for messing around with jitsi and for some cool web dev tools I have Chromium as well</p>



<a name="204392466"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392466" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392466">(Jul 20 2020 at 07:15)</a>:</h4>
<p>(Performance tab in DevTools, I think it looks like an upload icon)</p>



<a name="204392470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392470" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392470">(Jul 20 2020 at 07:15)</a>:</h4>
<p>yup!</p>



<a name="204392482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392482" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392482">(Jul 20 2020 at 07:15)</a>:</h4>
<p>What can I do with this? It looks like a flamegraph, but I assume it's like that and better</p>



<a name="204392562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392562">(Jul 20 2020 at 07:16)</a>:</h4>
<p>you can see what takes up most of the time, and how it nests</p>



<a name="204392569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392569">(Jul 20 2020 at 07:17)</a>:</h4>
<p>a wide screenshot of it would be helpful :P</p>



<a name="204392578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392578" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392578">(Jul 20 2020 at 07:17)</a>:</h4>
<p><a href="/user_uploads/4715/RQNd-fWmH99Ja3FeBBBSb8wu/rustc.svg">rustc.svg</a></p>



<a name="204392585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392585">(Jul 20 2020 at 07:17)</a>:</h4>
<p>ugh Zulip doesn't let me just see it</p>



<a name="204392588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392588" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392588">(Jul 20 2020 at 07:17)</a>:</h4>
<p>also how did you get an SVG?</p>



<a name="204392590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392590">(Jul 20 2020 at 07:17)</a>:</h4>
<p>aw noes :c</p>



<a name="204392593"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392593" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392593">(Jul 20 2020 at 07:18)</a>:</h4>
<p>flamegraph!</p>



<a name="204392646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392646">(Jul 20 2020 at 07:18)</a>:</h4>
<p>huh</p>



<a name="204392649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392649">(Jul 20 2020 at 07:18)</a>:</h4>
<p><code>cargo +nightly install --git https://github.com/rust-lang/measureme flamegraph</code> and then <code>flamegraph cratesfyi-8963</code></p>



<a name="204392653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392653" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392653">(Jul 20 2020 at 07:18)</a>:</h4>
<p>oh that</p>



<a name="204392656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392656" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392656">(Jul 20 2020 at 07:19)</a>:</h4>
<p>see how <code>generate_crate_metadata</code> is mostly the monomorphization collector?</p>



<a name="204392667"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392667" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392667">(Jul 20 2020 at 07:19)</a>:</h4>
<p>yes!</p>



<a name="204392680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392680">(Jul 20 2020 at 07:19)</a>:</h4>
<p>what does the monomorphization collector do?</p>



<a name="204392692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392692">(Jul 20 2020 at 07:19)</a>:</h4>
<p>it's what finds all the instantiations (of functions) that need to exist</p>



<a name="204392695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392695">(Jul 20 2020 at 07:19)</a>:</h4>
<p>which then get partitioned into CGUs</p>



<a name="204392737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392737">(Jul 20 2020 at 07:20)</a>:</h4>
<p>ahhhh, got it</p>



<a name="204392760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392760">(Jul 20 2020 at 07:20)</a>:</h4>
<p>oh I can click on stuff heh</p>



<a name="204392762"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392762" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392762">(Jul 20 2020 at 07:20)</a>:</h4>
<p>yeees!</p>



<a name="204392763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392763" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392763">(Jul 20 2020 at 07:20)</a>:</h4>
<p>it's so cool!</p>



<a name="204392765"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392765" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392765">(Jul 20 2020 at 07:20)</a>:</h4>
<p><span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span></p>



<a name="204392777"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392777" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392777">(Jul 20 2020 at 07:21)</a>:</h4>
<p>I loved it instantly, that's why I sent you the svg ^^</p>



<a name="204392783"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392783" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392783">(Jul 20 2020 at 07:21)</a>:</h4>
<p>partitioning takes so much less time than just colelcting them, that's so weird</p>



<a name="204392795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392795">(Jul 20 2020 at 07:21)</a>:</h4>
<p>yeah</p>



<a name="204392805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392805">(Jul 20 2020 at 07:21)</a>:</h4>
<p>I guess we don't cache most of what the monomorphization collector does, I didn't consider that</p>



<a name="204392851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392851">(Jul 20 2020 at 07:22)</a>:</h4>
<p>oh this being a flame graph is confusing</p>



<a name="204392855"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392855" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392855">(Jul 20 2020 at 07:22)</a>:</h4>
<p>the chrome thing shows you every instance</p>



<a name="204392858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392858">(Jul 20 2020 at 07:22)</a>:</h4>
<p>so you don't  end up with things being in the wrong place timeline-wise</p>



<a name="204392866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392866" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392866">(Jul 20 2020 at 07:22)</a>:</h4>
<p>also it measures time, idk what this thing does</p>



<a name="204392924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392924">(Jul 20 2020 at 07:23)</a>:</h4>
<p>Apparently the idea is to follow this: <a href="https://github.com/brendangregg/FlameGraph">https://github.com/brendangregg/FlameGraph</a></p>



<a name="204392972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392972">(Jul 20 2020 at 07:24)</a>:</h4>
<p><span class="user-mention" data-user-id="212698">@Félix Fischer</span> btw you can get extra detail if you run with <code>-Z self-profile -Z self-profile-events=default,query-keys</code></p>



<a name="204392997"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204392997" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204392997">(Jul 20 2020 at 07:24)</a>:</h4>
<p>oh, that's cool</p>



<a name="204393012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393012" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393012">(Jul 20 2020 at 07:25)</a>:</h4>
<p><code>metadata_register_crate</code> takes a long time, kind of surprised it does tbh</p>



<a name="204393022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393022">(Jul 20 2020 at 07:25)</a>:</h4>
<p>the nesting would suggest it's recursing through dependencies? we should be as lazy as we can with loading data, in case it's not needed</p>



<a name="204393026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393026">(Jul 20 2020 at 07:25)</a>:</h4>
<p>I think so</p>



<a name="204393090"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393090" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393090">(Jul 20 2020 at 07:26)</a>:</h4>
<p>anyway in the chrome devtools thing you should be able to see the exact point at which <code>resolve_crate</code> / <code>hir_lowering</code> end and incremental starts</p>



<a name="204393209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393209" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393209">(Jul 20 2020 at 07:28)</a>:</h4>
<p>aha!</p>



<a name="204393212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393212">(Jul 20 2020 at 07:28)</a>:</h4>
<p>yes, I see it now</p>



<a name="204393275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393275">(Jul 20 2020 at 07:29)</a>:</h4>
<p>(I wish the chrome thing had this clicking feature... it's a bit hard to navigate)</p>



<a name="204393343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393343" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393343">(Jul 20 2020 at 07:30)</a>:</h4>
<p>It ends at around 990ms</p>



<a name="204393355"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393355" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393355">(Jul 20 2020 at 07:30)</a>:</h4>
<p>No, I'm wrong. At 970ms</p>



<a name="204393366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393366">(Jul 20 2020 at 07:31)</a>:</h4>
<p>Everything else is more or less incremental, right?</p>



<a name="204393371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393371">(Jul 20 2020 at 07:31)</a>:</h4>
<p>That's a heck of a lot</p>



<a name="204393382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393382">(Jul 20 2020 at 07:31)</a>:</h4>
<p>yeah, except for the fact that some stuff is monolithic so it gets fully redone if anything changes</p>



<a name="204393387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393387" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393387">(Jul 20 2020 at 07:31)</a>:</h4>
<p>i.e. it would be nice to break it up and cache some parts of it, if possible</p>



<a name="204393449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393449">(Jul 20 2020 at 07:32)</a>:</h4>
<p>makes sense</p>



<a name="204393462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393462" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393462">(Jul 20 2020 at 07:32)</a>:</h4>
<p>mm. Now I want to do a survey of this behavior</p>



<a name="204393467"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393467" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393467">(Jul 20 2020 at 07:32)</a>:</h4>
<p>welp</p>



<a name="204393473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393473" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393473">(Jul 20 2020 at 07:32)</a>:</h4>
<p>more work for the thesis! <span aria-label="grinning face with smiling eyes" class="emoji emoji-1f601" role="img" title="grinning face with smiling eyes">:grinning_face_with_smiling_eyes:</span></p>



<a name="204393501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393501">(Jul 20 2020 at 07:33)</a>:</h4>
<p>My target is reducing compile times. A detour on what exactly is taking away compile time is sort of the fuel that I need</p>



<a name="204393528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393528">(Jul 20 2020 at 07:33)</a>:</h4>
<p>Anywho</p>



<a name="204393576"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393576" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393576">(Jul 20 2020 at 07:34)</a>:</h4>
<p>Eddy (btw can I call you Eddy or is eddyb/Eddyb better?), I'm running out of stamina.</p>



<a name="204393597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393597">(Jul 20 2020 at 07:34)</a>:</h4>
<p>i.e. I should go sleep now</p>



<a name="204393636"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393636" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393636">(Jul 20 2020 at 07:34)</a>:</h4>
<p>This was a lot of fun. Thank you for your time <span aria-label="rainbow" class="emoji emoji-1f308" role="img" title="rainbow">:rainbow:</span> I've learned a lot</p>



<a name="204393670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393670">(Jul 20 2020 at 07:35)</a>:</h4>
<p>As it's often the case when you're around ^^</p>



<a name="204393680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393680">(Jul 20 2020 at 07:35)</a>:</h4>
<p>I find it weird that people use non-nicks on Zulip btw</p>



<a name="204393703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393703">(Jul 20 2020 at 07:35)</a>:</h4>
<p>ideally it would just be GitHub handles to keep things uniform :P</p>



<a name="204393704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393704">(Jul 20 2020 at 07:35)</a>:</h4>
<p>Yeah, I just use mine because of github</p>



<a name="204393709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393709">(Jul 20 2020 at 07:35)</a>:</h4>
<p>I guess I could use felix91gr</p>



<a name="204393740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393740" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393740">(Jul 20 2020 at 07:36)</a>:</h4>
<p>which is my GH handle</p>



<a name="204393769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393769">(Jul 20 2020 at 07:36)</a>:</h4>
<p>(not saying you or anyone else should change it, it just seems like Zulip makes people write in full names instead of nicks, so the UI must be doing something to cause that)</p>



<a name="204393795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393795">(Jul 20 2020 at 07:36)</a>:</h4>
<p>maybe if they provided both options and showed them differently, and mentioned worked based on nicks not full names, might be easier for everyone</p>



<a name="204393802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393802">(Jul 20 2020 at 07:36)</a>:</h4>
<p>(ohh, that's an interesting theory! It might! I've heard that subtle changes in defaults and what not can cause people to do that!)</p>



<a name="204393818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393818" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393818">(Jul 20 2020 at 07:37)</a>:</h4>
<p>yas</p>



<a name="204393822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393822">(Jul 20 2020 at 07:37)</a>:</h4>
<p>like I don't mind my real name being available for legal reasons or w/e (copyright and running a company etc.)</p>



<a name="204393840"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393840" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393840">(Jul 20 2020 at 07:37)</a>:</h4>
<p>but if you don't call me "eddyb" I'll turn and look around like you're not speaking to me :P</p>



<a name="204393853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393853">(Jul 20 2020 at 07:37)</a>:</h4>
<p>hahahahahahaha</p>



<a name="204393925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393925" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393925">(Jul 20 2020 at 07:38)</a>:</h4>
<p>("eddy" also works but only spoken)</p>



<a name="204393935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393935" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393935">(Jul 20 2020 at 07:38)</a>:</h4>
<p>dang, I'll try to remember! I would usually <em>just remember</em> but this whole thing (points everywhere) has dulled my mind a little bit, I'm having trouble remembering these small details</p>



<a name="204393936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393936">(Jul 20 2020 at 07:38)</a>:</h4>
<p>anyway this is offtopic lol</p>



<a name="204393961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393961">(Jul 20 2020 at 07:38)</a>:</h4>
<p>basically just use my @, it's short and simple for a reason :P</p>



<a name="204393965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393965">(Jul 20 2020 at 07:38)</a>:</h4>
<p>neh, this has to do with performance in a very obscure way, I'm sure. 4th order effect or something</p>



<a name="204393994"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204393994" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204393994">(Jul 20 2020 at 07:39)</a>:</h4>
<p>please don't go there, microoptimizing human communication is such a rabbit hole :P</p>



<a name="204394004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394004">(Jul 20 2020 at 07:39)</a>:</h4>
<p>hahahaha</p>



<a name="204394025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394025">(Jul 20 2020 at 07:39)</a>:</h4>
<p>nono, I wasn't thinking of that, although I agree, it is :P</p>



<a name="204394026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394026">(Jul 20 2020 at 07:39)</a>:</h4>
<p>like stenography exists. have you ever wanted to type several times faster, at the cost of losing the ability to type with one hand or w/e?</p>



<a name="204394087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394087">(Jul 20 2020 at 07:40)</a>:</h4>
<p>or on a computer that's not yours</p>



<a name="204394099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394099" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394099">(Jul 20 2020 at 07:40)</a>:</h4>
<p>not really, I have enough mental burden by swapping keyboards all the time bc of tildes for spanish and stuff</p>



<a name="204394103"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394103" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394103">(Jul 20 2020 at 07:40)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204394087">said</a>:</p>
<blockquote>
<p>or on a computer that's not yours</p>
</blockquote>
<p>oh yeah also this</p>



<a name="204394224"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394224" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394224">(Jul 20 2020 at 07:42)</a>:</h4>
<p>I was just thinking that some things are related to performance in obscure ways that are out of our control, and we could put up an excuse to a moderator of sorts by inventing a magical thinking framework whereby our talk was somehow related to rustc's performance</p>



<a name="204394246"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394246" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394246">(Jul 20 2020 at 07:42)</a>:</h4>
<p>we could also split conversations into separate threads, since we're on Zulip anyway</p>



<a name="204394252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394252">(Jul 20 2020 at 07:42)</a>:</h4>
<p>yas!</p>



<a name="204394263"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394263" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394263">(Jul 20 2020 at 07:43)</a>:</h4>
<p>anyway</p>



<a name="204394296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394296">(Jul 20 2020 at 07:43)</a>:</h4>
<p>(you can edit your own message to give it a new topic, even if you can't edit the message contents anyway, and by default it will move every subsequent messages to that new topic. so if you started every separate level of the rabbit hole, you can just go back and clean it up)</p>



<a name="204394305"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394305" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394305">(Jul 20 2020 at 07:43)</a>:</h4>
<p>hahahaha</p>



<a name="204394347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394347" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394347">(Jul 20 2020 at 07:44)</a>:</h4>
<p>good to know</p>



<a name="204394350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394350">(Jul 20 2020 at 07:44)</a>:</h4>
<p>(Zulip allowing it to be after-the-fact is IMO a big reason for threading not being a borderline useless feature, which would've made Zulip as a whole completely unattractive to me)</p>



<a name="204394367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394367" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394367">(Jul 20 2020 at 07:44)</a>:</h4>
<p>mmmm, that's an interesting thought</p>



<a name="204394402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394402">(Jul 20 2020 at 07:44)</a>:</h4>
<p>I'll give it a spin for sure</p>



<a name="204394424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394424" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394424">(Jul 20 2020 at 07:45)</a>:</h4>
<p>to me the fact that it's OSS makes it already oo better than Discord</p>



<a name="204394430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394430">(Jul 20 2020 at 07:45)</a>:</h4>
<p>Also Discord being hostile to users and all of that</p>



<a name="204394464"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394464" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394464">(Jul 20 2020 at 07:46)</a>:</h4>
<p>yeah, but, e.g. Matrix exists, and Mozilla moved the non-Rust parts of mozirc on their own Matrix instance</p>



<a name="204394509"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394509" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394509">(Jul 20 2020 at 07:46)</a>:</h4>
<p>ah yes</p>



<a name="204394516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394516">(Jul 20 2020 at 07:46)</a>:</h4>
<p>Matrix is nice c: I like that it exists at least</p>



<a name="204394527"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394527" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394527">(Jul 20 2020 at 07:46)</a>:</h4>
<p>Zulip's main value proposition is threads, which you wonder why it took so long for them to be a thing</p>



<a name="204394537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394537">(Jul 20 2020 at 07:46)</a>:</h4>
<p>Maybe marketing?</p>



<a name="204394541"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394541" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394541">(Jul 20 2020 at 07:46)</a>:</h4>
<p>Maybe UX</p>



<a name="204394548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394548">(Jul 20 2020 at 07:46)</a>:</h4>
<p>Zulip is definitely on the low-end of UX although getting better</p>



<a name="204394557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394557">(Jul 20 2020 at 07:47)</a>:</h4>
<p>yes</p>



<a name="204394570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394570">(Jul 20 2020 at 07:47)</a>:</h4>
<p>I wonder if slack tried threads and where they screwed up :P</p>



<a name="204394571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394571">(Jul 20 2020 at 07:47)</a>:</h4>
<p>the mobile app (which I use a lot!) is kinda meh</p>



<a name="204394585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394585">(Jul 20 2020 at 07:47)</a>:</h4>
<p>I mean it works but it's... let's say it needs a couple more iterations at least</p>



<a name="204394635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394635">(Jul 20 2020 at 07:48)</a>:</h4>
<p>At least it hasn't crashed on me or anything. It seems to be solid. But the UI is lacking a lot</p>



<a name="204394661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394661">(Jul 20 2020 at 07:48)</a>:</h4>
<p>maybe it's that effect where some platform/app in the past really botched it and everyone stayed away from the idea as a whole</p>



<a name="204394677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394677">(Jul 20 2020 at 07:48)</a>:</h4>
<p>Ah, could be</p>



<a name="204394682"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394682" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394682">(Jul 20 2020 at 07:48)</a>:</h4>
<p>but that's just speculation on my part, idk how common that effect even is</p>



<a name="204394687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394687" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394687">(Jul 20 2020 at 07:49)</a>:</h4>
<p>Maybe wave (that weird google thing) tried it</p>



<a name="204394722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394722">(Jul 20 2020 at 07:49)</a>:</h4>
<p>maybe this is related to mailing lists being kind of an UX... not nightmare, more like barren land</p>



<a name="204394758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394758" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394758">(Jul 20 2020 at 07:49)</a>:</h4>
<p>because mailing lists and Zulip feel a lot alike in the flexibility of threads</p>



<a name="204394813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394813">(Jul 20 2020 at 07:50)</a>:</h4>
<p>Only Zulip has css to begin with <span aria-label="thinking" class="emoji emoji-1f914" role="img" title="thinking">:thinking:</span> (no but really it's already a lot better than Ml.Lsts)</p>



<a name="204394849"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394849" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394849">(Jul 20 2020 at 07:51)</a>:</h4>
<p>Anywho... let's button this one up or... however it's said x3 (I've heard it said like that before but it might have been a joke?)<br>
I'm tired and yet fairly content :) I Iearned a lot from this. <br>
Kudos, <span class="user-mention" data-user-id="119009">@eddyb</span>. This is not the first time you teach me stuff, I really appreciate your patience.</p>



<a name="204394896"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394896" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394896">(Jul 20 2020 at 07:51)</a>:</h4>
<p>don't mistake me distractability for patience :P</p>



<a name="204394965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394965" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394965">(Jul 20 2020 at 07:52)</a>:</h4>
<p>Look, if this is you distracted, then you could make a really incredible teacher when focused :P</p>



<a name="204394990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204394990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204394990">(Jul 20 2020 at 07:52)</a>:</h4>
<p>Because this was more than good enough :D</p>



<a name="204395013"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204395013" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204395013">(Jul 20 2020 at 07:53)</a>:</h4>
<p>Well, for me at least. Maybe you like students who ask a lot of questions</p>



<a name="204395041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204395041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204395041">(Jul 20 2020 at 07:53)</a>:</h4>
<p>I make a good sleeping aid,</p>



<a name="204399924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204399924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204399924">(Jul 20 2020 at 09:02)</a>:</h4>
<p>re flamegraphs, have you seen <a href="https://speedscope.app">https://speedscope.app</a>?</p>



<a name="204436058"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204436058" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204436058">(Jul 20 2020 at 15:21)</a>:</h4>
<p><span class="user-mention silent" data-user-id="212698">Félix Fischer</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204389062">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204389002">said</a>:</p>
<blockquote>
<p>(the dependency tracking works without saving the data because it only recomputes something if its dependencies changed, and this both propagates and stops propagation, to minimize what you have to recompute)</p>
</blockquote>
<p>Is this algorithm documented somewhere?</p>
</blockquote>
<p><a href="https://rustc-dev-guide.rust-lang.org/queries/incremental-compilation-in-detail.html#improving-accuracy-the-red-green-algorithm">https://rustc-dev-guide.rust-lang.org/queries/incremental-compilation-in-detail.html#improving-accuracy-the-red-green-algorithm</a></p>



<a name="204436140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204436140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204436140">(Jul 20 2020 at 15:22)</a>:</h4>
<p>hah, cool, thanks!</p>



<a name="204438156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204438156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204438156">(Jul 20 2020 at 15:38)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204393022">said</a>:</p>
<blockquote>
<p>the nesting would suggest it's recursing through dependencies? we should be as lazy as we can with loading data, in case it's not needed</p>
</blockquote>
<p><a href="http://docs.rs">docs.rs</a> has 490 dependencies so I'm not surprised it takes a while</p>



<a name="204438196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204438196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204438196">(Jul 20 2020 at 15:38)</a>:</h4>
<p>if there's a way to load them lazily that would be a <em>huge</em> speedup I imagine</p>



<a name="204439158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204439158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204439158">(Jul 20 2020 at 15:45)</a>:</h4>
<p>I mean, they are <em>almost entirely</em> lazy (in that we try to load as little as possible from each crate, just enough to know how to get more). I guess because it's a flamegraph I don't actually know how each an individual call takes or what it does</p>



<a name="204439424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204439424" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204439424">(Jul 20 2020 at 15:47)</a>:</h4>
<p>then we're probably just using them all :/</p>



<a name="204439472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204439472" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204439472">(Jul 20 2020 at 15:48)</a>:</h4>
<p>hopefully getting rid of tokio 0.1 will help a lot</p>



<a name="204440417"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204440417" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204440417">(Jul 20 2020 at 15:55)</a>:</h4>
<p>well it still feels like a lot, it's possible we're still eagerly loading something we don't need</p>



<a name="204474831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204474831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204474831">(Jul 20 2020 at 20:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="119009">eddyb</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/204389663">said</a>:</p>
<blockquote>
<p>sadly I don't think there's a way to run <code>cargo rustc</code> as if it were <code>cargo check</code>, which would be really handy</p>
</blockquote>
<p>I believe <code>cargo rustc --profile=check</code> does what you want</p>



<a name="204475361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204475361" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204475361">(Jul 20 2020 at 21:00)</a>:</h4>
<p>At least, that's what <code>rustc-perf</code> does.</p>



<a name="204476501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204476501" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204476501">(Jul 20 2020 at 21:09)</a>:</h4>
<p>My perf triage today is going to be painful, isn't it?</p>



<a name="204476635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204476635" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204476635">(Jul 20 2020 at 21:10)</a>:</h4>
<p>yeah</p>



<a name="204493025"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493025" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493025">(Jul 20 2020 at 22:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <code>collector bench_published</code> and <code>collector bench_next</code> currently both return 0 even if there's a problem with one or more of the tests. Is that deliberate? E.g. is it necessary for the <code>run.sh</code> script?</p>



<a name="204493077"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493077" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493077">(Jul 20 2020 at 22:48)</a>:</h4>
<p>I've committed the script now btw</p>



<a name="204493082"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493082" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493082">(Jul 20 2020 at 22:48)</a>:</h4>
<p>(collector/collect.sh)</p>



<a name="204493107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493107" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493107">(Jul 20 2020 at 22:48)</a>:</h4>
<p>we shouldn't exit if we fail to benchmark, but I think we can make the exit code "correct" and just handle that appropriately in <a href="http://collect.sh">collect.sh</a></p>



<a name="204493111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493111">(Jul 20 2020 at 22:48)</a>:</h4>
<p>(it might be already the case)</p>



<a name="204493304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493304">(Jul 20 2020 at 22:51)</a>:</h4>
<p>Hmm, it sleeps for 30 seconds if <code>bench_next</code> returns non-zero. But that only happens if there's some kind of setup failure (e.g. network connection), rather than a benchmarking failure. So the existing behaviour is important there, because a 30 second pause won't help if a benchmark is busted.</p>



<a name="204493309"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493309" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493309">(Jul 20 2020 at 22:51)</a>:</h4>
<p>So I might just leave that alone.</p>



<a name="204493376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493376">(Jul 20 2020 at 22:52)</a>:</h4>
<p>(I'm looking at improving testing, and I plan to remove <code>bench_test</code> and use <code>bench_local</code> instead for testing. This is why I'm asking about this stuff.)</p>



<a name="204493428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204493428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204493428">(Jul 20 2020 at 22:53)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> oh that should be fine to remove</p>



<a name="204494344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494344" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494344">(Jul 20 2020 at 22:53)</a>:</h4>
<p>the 30 second pause?</p>



<a name="204494346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494346" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494346">(Jul 20 2020 at 22:53)</a>:</h4>
<p>the sleeping is mostly to avoid busy looping</p>



<a name="204494362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494362" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494362">(Jul 20 2020 at 22:53)</a>:</h4>
<p>which is ... mostly not a problem? Like, we're going to end up with at least one network round trip or w/e so I'm not too worried</p>



<a name="204494442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494442">(Jul 20 2020 at 22:54)</a>:</h4>
<p>Well, there's a 30 second wait on every time around the loop, and then another 30 second wait if there's a failure in <code>bench_next</code>... hmm.</p>



<a name="204494445"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494445" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494445">(Jul 20 2020 at 22:54)</a>:</h4>
<p>The important behavior is that even if we fail to benchmark we keep going to the next commit -- but regardless, that'll basically "just happen" as the whole thing runs in systemd and that'll restart it if the script ever exits</p>



<a name="204494463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494463" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494463">(Jul 20 2020 at 22:54)</a>:</h4>
<p>so really we can just remove the loop, and just rely on the systemd restarting if we wanted to</p>



<a name="204494481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204494481" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204494481">(Jul 20 2020 at 22:55)</a>:</h4>
<p>(would simplify code too!)</p>



<a name="204503874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204503874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204503874">(Jul 21 2020 at 01:19)</a>:</h4>
<p>My god this perf triage is a disaster. Just an utter disaster.</p>



<a name="204503924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204503924" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204503924">(Jul 21 2020 at 01:20)</a>:</h4>
<p>sorry about the rustdoc end :/</p>



<a name="204503928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204503928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204503928">(Jul 21 2020 at 01:20)</a>:</h4>
<p>we had a _lot_ of changes in the last few days haha</p>



<a name="204503933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204503933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204503933">(Jul 21 2020 at 01:20)</a>:</h4>
<p>I don't even know how many regression we have had, so many rollups</p>



<a name="204503942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204503942" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204503942">(Jul 21 2020 at 01:21)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> The rustdoc parts aren't as bad</p>



<a name="204504961"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204504961" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204504961">(Jul 21 2020 at 01:43)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> I don't know if it was here or not, but there was some discussion about tool-supported "introspection" into rollups (i.e., you point perf at a rollup and a PR and it gives you results for that). Would that be useful here? In theory I imagine we could get something basic going fairly quickly.</p>



<a name="204505006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505006">(Jul 21 2020 at 01:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> That would be extremely helpful</p>



<a name="204505027"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505027" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505027">(Jul 21 2020 at 01:44)</a>:</h4>
<p>Do you think it's necessary to "go back in time" to when the rollup landed, i.e., basically replacing the rollup with that PR? Would that be the best approach?</p>



<a name="204505028"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505028" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505028">(Jul 21 2020 at 01:44)</a>:</h4>
<p>The though of having to bisect all these problems manually is giving me conniptions</p>



<a name="204505080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505080">(Jul 21 2020 at 01:46)</a>:</h4>
<p>There's several possibilities I can see:</p>
<ul>
<li>Just revert the PR on current master -- upside: super easy, downside: hard to interpret results, they're not really "that PR's effects in the rollup", e.g., if we've landed regressions/improvements since then that mask the PR indirectly</li>
</ul>



<a name="204505144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505144">(Jul 21 2020 at 01:47)</a>:</h4>
<ul>
<li>Replace the rollup with this PR, essentially virtually reverting the world back to the rollup and then "landing" the PR<ul>
<li>downsides: may miss effects of other PRs in the same rollup on that PR, or just not possible is those PRs had side-effects fixing CI for example</li>
</ul>
</li>
</ul>



<a name="204505160"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505160" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505160">(Jul 21 2020 at 01:47)</a>:</h4>
<ul>
<li>Revert the PR just after the rollup<ul>
<li>basically guaranteed to work but has some of the downsides of (1) where you might mask things</li>
</ul>
</li>
</ul>



<a name="204505164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505164">(Jul 21 2020 at 01:47)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> thoughts on which would be best?</p>



<a name="204505301"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505301" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505301">(Jul 21 2020 at 01:50)</a>:</h4>
<p>sorry, my kids are doing "home learning" due to Covid, I was just helping my daughter with some long multiplication</p>



<a name="204505311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505311" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505311">(Jul 21 2020 at 01:50)</a>:</h4>
<p>no worries :)</p>



<a name="204505339"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505339" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505339">(Jul 21 2020 at 01:51)</a>:</h4>
<p>I guess the middle one is the purest solution, right?</p>



<a name="204505350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505350">(Jul 21 2020 at 01:51)</a>:</h4>
<p>I think it's the best thing we can do if we don't have options</p>



<a name="204505351"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505351" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505351">(Jul 21 2020 at 01:51)</a>:</h4>
<p>(which we can add later)</p>



<a name="204505428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505428">(Jul 21 2020 at 01:53)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> So you'd have to pick which PR or PRs you'd think are responsible?</p>



<a name="204505469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505469" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505469">(Jul 21 2020 at 01:54)</a>:</h4>
<p>basically, yeah, obviously if you throw everything at perf things are basically just going to be quite slow</p>



<a name="204505476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505476">(Jul 21 2020 at 01:54)</a>:</h4>
<p>I guess we could fairly easily support "group testing" of sorts</p>



<a name="204505504"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505504" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505504">(Jul 21 2020 at 01:55)</a>:</h4>
<p>The workflow I'm imagining is: <code>@rust-timer post-pr XXXX, XXXX, XXXX</code> and that files a PR with a branch prepared that reverts master to the right point, which you're expected to ~immediately bors try on</p>



<a name="204505515"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505515" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505515">(Jul 21 2020 at 01:55)</a>:</h4>
<p>(The alternative is building rustc on the collection machine, which might not actually be a bad idea, but I'm more scared of that)</p>



<a name="204505836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505836">(Jul 21 2020 at 02:01)</a>:</h4>
<p><code>@rust-timer post-pr XXXX, XXXX, XXXX</code> sounds good</p>



<a name="204505972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505972">(Jul 21 2020 at 02:04)</a>:</h4>
<p>okay I will investigate that</p>



<a name="204505988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204505988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204505988">(Jul 21 2020 at 02:04)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> somewhat relatedly, just fyi: we're auto-deploying both site and collector now so it should be relatively easy to roll things out for anyone</p>



<a name="204506751"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204506751" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204506751">(Jul 21 2020 at 02:21)</a>:</h4>
<p>okay I'm going to work on the "post-pr" stuff tomorrow first thing (unless some fire burns again), I'm optimistic it won't be too hard</p>



<a name="204506781"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204506781" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204506781">(Jul 21 2020 at 02:22)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> if you want to post a collection of PRs that would be good to invoke it on that'd be amazing -- I'd want the rollup # they landed in and then PR # itself</p>



<a name="204509032"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204509032" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204509032">(Jul 21 2020 at 03:20)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> oh wow when was <code>--profile=check</code> added?!</p>



<a name="204509043"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204509043" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204509043">(Jul 21 2020 at 03:20)</a>:</h4>
<p>I've never heard of it, at most seen people other than me also ask for it</p>



<a name="204625725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204625725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204625725">(Jul 22 2020 at 02:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Any idea about <a href="https://github.com/rust-lang/rustc-perf/pull/702#issuecomment-662198817">https://github.com/rust-lang/rustc-perf/pull/702#issuecomment-662198817</a> ? It doesn't seem like my changes could have triggered it</p>



<a name="204879708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204879708" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204879708">(Jul 24 2020 at 04:56)</a>:</h4>
<p>Flattening the rustc-perf directory hierarchy has greatly improved my quality of life, no joke</p>



<a name="204879714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/204879714" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#204879714">(Jul 24 2020 at 04:56)</a>:</h4>
<p>I remember thinking it was hard to navigate</p>



<a name="205074913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205074913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205074913">(Jul 27 2020 at 01:08)</a>:</h4>
<p>WTF, I added a test for <code>llvm-lines</code> last week and yet it's broken for me locally, somehow</p>



<a name="205074923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205074923" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205074923">(Jul 27 2020 at 01:09)</a>:</h4>
<p>are you on an old branch maybe?</p>



<a name="205074972"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205074972" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205074972">(Jul 27 2020 at 01:10)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> hm, I might've broken the test by accident perhaps?</p>



<a name="205074974"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205074974" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205074974">(Jul 27 2020 at 01:10)</a>:</h4>
<p>(or maybe we're not testing it suffiicently well)</p>



<a name="205075083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075083" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075083">(Jul 27 2020 at 01:14)</a>:</h4>
<p>The test is really simple, but the broken case I'm running is equally simple</p>



<a name="205075221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075221">(Jul 27 2020 at 01:20)</a>:</h4>
<p>/me starts bisecting</p>



<a name="205075317"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075317" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075317">(Jul 27 2020 at 01:22)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> what's the log? I might be able to spot the problem just from knowing what's landed</p>



<a name="205075323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075323" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075323">(Jul 27 2020 at 01:22)</a>:</h4>
<div class="codehilite"><pre><span></span><code>collector error: Failed to profile &#39;futures&#39; with LlvmLines, recorded: expected success, got exit code: 1

stderr=error: process didn&#39;t exit successfully: `/home/njn/moz/rustc-perf/target/release/rustc-fake -vV` (exit code: 1)
--- stderr
&quot;/home/njn/moz/rust1/build/x86_64-unknown-linux-gnu/stage2/bin/rustc&quot; [&quot;-vV&quot;, &quot;-Adeprecated&quot;, &quot;-Aunknown-lints&quot;]
exiting -- non-wrapped rustc
Ran --emit=llvm-ir but did not find output IR
</code></pre></div>



<a name="205075377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075377">(Jul 27 2020 at 01:24)</a>:</h4>
<p>bisection finished:</p>



<a name="205075378"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075378" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075378">(Jul 27 2020 at 01:24)</a>:</h4>
<div class="codehilite"><pre><span></span><code>96b71fb74faa0782b20c1411f6c2fecc7de7fc18 is the first bad commit
commit 96b71fb74faa0782b20c1411f6c2fecc7de7fc18
Author: Mark Rousskov &lt;mark.simulacrum@gmail.com&gt;
Date:   Fri Jul 24 16:01:31 2020 -0400

    Assert only final rustc
</code></pre></div>



<a name="205075428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075428">(Jul 27 2020 at 01:26)</a>:</h4>
<p>Makes sense, that commit added the "existing -- non-wrapped rustc" check</p>



<a name="205075432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075432">(Jul 27 2020 at 01:26)</a>:</h4>
<p>Did <a href="https://github.com/rust-lang/rust/issues/717">#717</a> pass tests? I can't tell at this point</p>



<a name="205075442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075442" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075442">(Jul 27 2020 at 01:27)</a>:</h4>
<p>Hmm, "Test profiling" did pass, huh</p>



<a name="205075492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075492" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075492">(Jul 27 2020 at 01:28)</a>:</h4>
<p>aha</p>



<a name="205075496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075496">(Jul 27 2020 at 01:29)</a>:</h4>
<p>oh I guess maybe <code>cargo llvm-lines</code> should not do that testing</p>



<a name="205075499"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075499" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075499">(Jul 27 2020 at 01:29)</a>:</h4>
<p>not sure if that runs rustc more times or something</p>



<a name="205075507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075507">(Jul 27 2020 at 01:29)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> the intent of the check is that we should really only be recompiling one crate, i.e., one rustc invocation, per benchmark</p>



<a name="205075512"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075512" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075512">(Jul 27 2020 at 01:29)</a>:</h4>
<p>but we might not be able to do it if we're not using <code>cargo rustc -- </code></p>



<a name="205075553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075553">(Jul 27 2020 at 01:30)</a>:</h4>
<p>in fact I'm actually certain we can't</p>



<a name="205075559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075559" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075559">(Jul 27 2020 at 01:30)</a>:</h4>
<p>so it should be gated on that</p>



<a name="205075569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075569">(Jul 27 2020 at 01:30)</a>:</h4>
<p><code>cargo llvm-lines</code> itself invokes <code>cargo rustc</code></p>



<a name="205075577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075577" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075577">(Jul 27 2020 at 01:31)</a>:</h4>
<p>but how did the CI test pass?</p>



<a name="205075585"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075585" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075585">(Jul 27 2020 at 01:31)</a>:</h4>
<p>are you using futures locally as well?</p>



<a name="205075587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075587" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075587">(Jul 27 2020 at 01:31)</a>:</h4>
<p>yeah you are</p>



<a name="205075625"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075625" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075625">(Jul 27 2020 at 01:32)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> oh, " Running futures: Debug + [Full]"</p>



<a name="205075627"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075627" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075627">(Jul 27 2020 at 01:32)</a>:</h4>
<p>I think we must need incremental for this?</p>



<a name="205075631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075631">(Jul 27 2020 at 01:32)</a>:</h4>
<p>or are you doing full locally as well?</p>



<a name="205075632"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075632" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075632">(Jul 27 2020 at 01:32)</a>:</h4>
<p>I'm running Debug+Full locally</p>



<a name="205075639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075639" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075639">(Jul 27 2020 at 01:33)</a>:</h4>
<p>hmm</p>



<a name="205075642"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075642" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075642">(Jul 27 2020 at 01:33)</a>:</h4>
<p>yeah no idea how CI passed</p>



<a name="205075685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075685" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075685">(Jul 27 2020 at 01:34)</a>:</h4>
<p>you're not editing the sources or anything mid-build?</p>



<a name="205075691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075691">(Jul 27 2020 at 01:34)</a>:</h4>
<p>or maybe you have an old cargo being used? there was a semi-recent bug fix there</p>



<a name="205075692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075692">(Jul 27 2020 at 01:34)</a>:</h4>
<p>maybe a week or so ago</p>



<a name="205075704"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075704" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075704">(Jul 27 2020 at 01:35)</a>:</h4>
<p>My nightly cargo is from Jul 08, I will update</p>



<a name="205075709"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075709" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075709">(Jul 27 2020 at 01:35)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/General/near/205075691">said</a>:</p>
<blockquote>
<p>or maybe you have an old cargo being used? there was a semi-recent bug fix there</p>
</blockquote>
<p>that should only be for doc builds though ...</p>



<a name="205075767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075767" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075767">(Jul 27 2020 at 01:37)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> oh, no, I'm talking about a build script bugfix</p>



<a name="205075813"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075813" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075813">(Jul 27 2020 at 01:38)</a>:</h4>
<p><a href="https://github.com/rust-lang/cargo/pull/8497">https://github.com/rust-lang/cargo/pull/8497</a></p>



<a name="205075824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075824" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075824">(Jul 27 2020 at 01:39)</a>:</h4>
<p>Cargo from July 23 doesn't help</p>



<a name="205075828"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075828" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075828">(Jul 27 2020 at 01:39)</a>:</h4>
<p>my command is <code>target/release/collector profile_local cachegrind $RUSTC0 Orig --include hello --builds Debug --runs Full</code></p>



<a name="205075832"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075832" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075832">(Jul 27 2020 at 01:39)</a>:</h4>
<p>insert a <code>$RUSTC0</code> of your choice</p>



<a name="205075872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075872">(Jul 27 2020 at 01:40)</a>:</h4>
<p>let me try locally I guess</p>



<a name="205075874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075874">(Jul 27 2020 at 01:40)</a>:</h4>
<p>hm I thought you were doing llvm-lines?</p>



<a name="205075926"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075926" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075926">(Jul 27 2020 at 01:42)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> hm so that command seems to pass locally for me</p>



<a name="205075932"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075932" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075932">(Jul 27 2020 at 01:42)</a>:</h4>
<p>sorry, change <code>cachegrind</code> to <code>llvm-lines</code></p>



<a name="205075933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075933">(Jul 27 2020 at 01:42)</a>:</h4>
<p>yeah just rechecked on latest nightly</p>



<a name="205075934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075934">(Jul 27 2020 at 01:42)</a>:</h4>
<p>(I was testing Cachegrind to make sure)</p>



<a name="205075936"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075936" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075936">(Jul 27 2020 at 01:43)</a>:</h4>
<p>let me install it...</p>



<a name="205075942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075942" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075942">(Jul 27 2020 at 01:43)</a>:</h4>
<p>you have cargo-llvm-lines v0.4.3?</p>



<a name="205075952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075952">(Jul 27 2020 at 01:43)</a>:</h4>
<p>I have 0.4.1</p>



<a name="205075993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205075993" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205075993">(Jul 27 2020 at 01:44)</a>:</h4>
<p>okay I can reproduce with .3 too</p>



<a name="205076004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076004" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076004">(Jul 27 2020 at 01:45)</a>:</h4>
<p>I have a hunch</p>



<a name="205076020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076020">(Jul 27 2020 at 01:45)</a>:</h4>
<p><a href="https://github.com/dtolnay/cargo-llvm-lines/blob/master/src/main.rs#L123">https://github.com/dtolnay/cargo-llvm-lines/blob/master/src/main.rs#L123</a> might be responsible, if cargo caches the raw value instead of the parsed value (perf sets it to zero)</p>



<a name="205076080"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076080" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076080">(Jul 27 2020 at 01:47)</a>:</h4>
<p>doesn't seem to fix it if I use ""</p>



<a name="205076189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076189" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076189">(Jul 27 2020 at 01:50)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> This fixes it:</p>
<div class="codehilite"><pre><span></span><code><span class="gh">diff --git a/collector/src/rustc-fake.rs b/collector/src/rustc-fake.rs</span>
<span class="gh">index f0a867df..d73bdd70 100644</span>
<span class="gd">--- a/collector/src/rustc-fake.rs</span>
<span class="gi">+++ b/collector/src/rustc-fake.rs</span>
<span class="gu">@@ -216,9 +216,15 @@ fn main() {</span>
         }
     } else {
         if env::var_os(&quot;EXPECT_ONLY_WRAPPED_RUSTC&quot;).is_some() {
<span class="gd">-            eprintln!(&quot;{:?} {:?}&quot;, tool, args);</span>
<span class="gd">-            eprintln!(&quot;exiting -- non-wrapped rustc&quot;);</span>
<span class="gd">-            std::process::exit(1);</span>
<span class="gi">+            // If it&#39;s a version check then it&#39;s fine</span>
<span class="gi">+            if !args</span>
<span class="gi">+                .iter()</span>
<span class="gi">+                .any(|arg| arg == &quot;-vV&quot; || arg == &quot;--print=file-names&quot;)</span>
<span class="gi">+            {</span>
<span class="gi">+                eprintln!(&quot;{:?} {:?}&quot;, tool, args);</span>
<span class="gi">+                eprintln!(&quot;exiting -- non-wrapped rustc&quot;);</span>
<span class="gi">+                std::process::exit(1);</span>
<span class="gi">+            }</span>
         }

         let mut cmd = Command::new(&amp;tool);
</code></pre></div>



<a name="205076190"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076190" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076190">(Jul 27 2020 at 01:50)</a>:</h4>
<p>So it seems like it's not finding the cargo rustc cache or something like that</p>



<a name="205076191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076191">(Jul 27 2020 at 01:50)</a>:</h4>
<p>I don't know why</p>



<a name="205076197"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076197" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076197">(Jul 27 2020 at 01:51)</a>:</h4>
<p>And what's the difference between CI and local runs</p>



<a name="205076202"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076202" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076202">(Jul 27 2020 at 01:51)</a>:</h4>
<p>so annoying that this new test fell over at the first challenge, sigh</p>



<a name="205076206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076206" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076206">(Jul 27 2020 at 01:51)</a>:</h4>
<p>yeah :/</p>



<a name="205076247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076247" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076247">(Jul 27 2020 at 01:52)</a>:</h4>
<p>I'll look into it some more tomorrow probably, but I'm off for the night -- will post comments on the pull requests and such then as well. I did post a triage update PR for your review <a href="https://github.com/rust-lang/rustc-perf/pull/725">https://github.com/rust-lang/rustc-perf/pull/725</a></p>



<a name="205076250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076250" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076250">(Jul 27 2020 at 01:52)</a>:</h4>
<p>thanks</p>



<a name="205076269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205076269" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205076269">(Jul 27 2020 at 01:53)</a>:</h4>
<p>we'll need to make a call on the exclusion of script-servo soon btw, otherwise we can't keep up with rust-lang/rust CI</p>



<a name="205077179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205077179" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205077179">(Jul 27 2020 at 02:21)</a>:</h4>
<p>I'm in favour</p>



<a name="205078725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205078725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205078725">(Jul 27 2020 at 03:12)</a>:</h4>
<p>This is interesting: if I run <code>ci/check-profiling.sh</code> it works for me. Something about using the rustc from <code>collector install_next</code> makes it work</p>



<a name="205081690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205081690" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205081690">(Jul 27 2020 at 04:51)</a>:</h4>
<p>Aw geez, the valgrind you get on Github with "sudo apt install -y valgrind" is 3.13. I need at least 3.15 to fully test things</p>



<a name="205081693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205081693" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205081693">(Jul 27 2020 at 04:51)</a>:</h4>
<p>"sudo apt install -y valgrind-3.15" didn't work</p>



<a name="205083836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205083836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205083836">(Jul 27 2020 at 05:53)</a>:</h4>
<p>/me will do as much as possible with 3.13</p>



<a name="205185784"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205185784" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205185784">(Jul 28 2020 at 00:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> Did the Ubuntu upgrade land?</p>



<a name="205185789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205185789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205185789">(Jul 28 2020 at 00:48)</a>:</h4>
<p>Hm I forget if I merged it</p>



<a name="205185801"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205185801" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205185801">(Jul 28 2020 at 00:49)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/pull/729">https://github.com/rust-lang/rustc-perf/pull/729</a> nope, but the tests passed</p>



<a name="205185804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205185804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205185804">(Jul 28 2020 at 00:49)</a>:</h4>
<p>Merged</p>



<a name="205631514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/205631514" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#205631514">(Jul 31 2020 at 19:27)</a>:</h4>
<p>Just went to look at the perf queue while reviewing <a href="https://github.com/rust-lang/rust/issues/74983">#74983</a> and saw the new progress bars/expected time UI. Very cool!</p>



<a name="206253327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206253327" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206253327">(Aug 07 2020 at 12:58)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> you were saying something about rustdoc being disproportionately affected by new libraries? <a href="https://github.com/rust-lang/rust/blob/ffa80f01d800528b2cfbe5b5a8a218d20c7d8e95/src/librustdoc/core.rs#L423-L426">https://github.com/rust-lang/rust/blob/ffa80f01d800528b2cfbe5b5a8a218d20c7d8e95/src/librustdoc/core.rs#L423-L426</a></p>



<a name="206253354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206253354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206253354">(Aug 07 2020 at 12:58)</a>:</h4>
<p>lol, just getting rid of that clone would probably speed it by 10%</p>



<a name="206322017"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206322017" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206322017">(Aug 08 2020 at 00:10)</a>:</h4>
<p>FYI: I will be on PTO for the next two weeks</p>



<a name="206324280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206324280" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Félix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206324280">(Aug 08 2020 at 01:02)</a>:</h4>
<p>Have fun <span class="user-mention" data-user-id="120989">@njn</span> <span aria-label="rainbow" class="emoji emoji-1f308" role="img" title="rainbow">:rainbow:</span></p>



<a name="206644934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206644934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206644934">(Aug 11 2020 at 23:47)</a>:</h4>
<p>doing perf triage for this last week now</p>



<a name="206646707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206646707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206646707">(Aug 12 2020 at 00:10)</a>:</h4>
<p>will have to finish later or tomorrow</p>



<a name="206766872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206766872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206766872">(Aug 12 2020 at 23:45)</a>:</h4>
<p>Thanks for doing it! Looks like it was a simple week</p>



<a name="206769590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206769590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206769590">(Aug 13 2020 at 00:26)</a>:</h4>
<p>Yep, though had to rebench several commits</p>



<a name="206864092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206864092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206864092">(Aug 13 2020 at 20:09)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I can do next week's if you like.</p>



<a name="206864356"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206864356" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206864356">(Aug 13 2020 at 20:10)</a>:</h4>
<p><span class="user-mention" data-user-id="118594">@ecstatic-morse</span> that would be great! It's best to do it ~Monday night so there's plenty of time to get it into TWIR</p>



<a name="206864676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/206864676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#206864676">(Aug 13 2020 at 20:13)</a>:</h4>
<p>Got it. I'll run through the triage instructions on Monday.</p>



<a name="209335207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/209335207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#209335207">(Sep 08 2020 at 00:00)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> I just saw your last blog post: <a href="https://blog.mozilla.org/nnethercote/2020/09/08/how-to-speed-up-the-rust-compiler-one-last-time/">https://blog.mozilla.org/nnethercote/2020/09/08/how-to-speed-up-the-rust-compiler-one-last-time/</a></p>
<p>I'll miss working with you! Best wishes and have fun working on Firefox <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span>️</p>



<a name="209335297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/209335297" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#209335297">(Sep 08 2020 at 00:01)</a>:</h4>
<p>(also, time zones strike again - it's still the 7th in the US <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span>)</p>



<a name="209336194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/209336194" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#209336194">(Sep 08 2020 at 00:22)</a>:</h4>
<p>greetings from the future</p>



<a name="209337064"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/209337064" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> DPC <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#209337064">(Sep 08 2020 at 00:48)</a>:</h4>
<p>TIL that njn and nethercote are the same person <span aria-label="joy" class="emoji emoji-1f602" role="img" title="joy">:joy:</span>  thanks a lot <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span> loved reading your articles</p>



<a name="209345852"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/General/near/209345852" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/General.html#209345852">(Sep 08 2020 at 04:56)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> You did incredible work; thank you.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
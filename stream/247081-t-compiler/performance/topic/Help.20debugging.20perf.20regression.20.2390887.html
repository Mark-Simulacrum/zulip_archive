<html>
<head><meta charset="utf-8"><title>Help debugging perf regression #90887 · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html">Help debugging perf regression #90887</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="274560052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274560052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274560052">(Mar 08 2022 at 15:55)</a>:</h4>
<p>I saw that after this landed, the follow-up performance benchmarking run said "no regressions". It would be nice to maybe 1. keep track of instances of this kind of "noisy/unstable benchmarking" and 2. brainstorm about how we could correct for it (which has me once again thinking about Berger+Curtsinger's Stabilizer work)</p>



<a name="274565798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274565798" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274565798">(Mar 08 2022 at 16:29)</a>:</h4>
<p>Yeah. I wasn't entirely shocked to see this go away, but it would be good to track.</p>



<a name="274565969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274565969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274565969">(Mar 08 2022 at 16:30)</a>:</h4>
<p>Not sure how we could correct for it. If my hunch is correct, and it's an inlining change by llvm, then that's difficult.</p>



<a name="274566152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274566152" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274566152">(Mar 08 2022 at 16:31)</a>:</h4>
<p>I guess we could get a "confidence interval" of some sort by forcing more pessimism in the inlining.</p>



<a name="274567559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274567559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274567559">(Mar 08 2022 at 16:40)</a>:</h4>
<p>more pessimism, or maybe even just more outright control</p>



<a name="274567596"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274567596" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274567596">(Mar 08 2022 at 16:40)</a>:</h4>
<p>e.g. embed our own heuristics</p>



<a name="274567651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Help%20debugging%20perf%20regression%20%2390887/near/274567651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Help.20debugging.20perf.20regression.20.2390887.html#274567651">(Mar 08 2022 at 16:41)</a>:</h4>
<p>though that may just end up being a complicated way of saying "worse results."</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
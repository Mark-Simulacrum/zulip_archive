<html>
<head><meta charset="utf-8"><title>triage 2021 07 06 · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html">triage 2021 07 06</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="245042670"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245042670" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245042670">(Jul 06 2021 at 14:02)</a>:</h4>
<p>Triage is done for today: <a href="https://github.com/rust-lang/rustc-perf/pull/892">https://github.com/rust-lang/rustc-perf/pull/892</a></p>



<a name="245042694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245042694" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245042694">(Jul 06 2021 at 14:02)</a>:</h4>
<p>I'll merge if someone else doesn't in about an hour</p>



<a name="245042916"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245042916" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245042916">(Jul 06 2021 at 14:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> <span class="user-mention" data-user-id="116122">@simulacrum</span> FYI: for all the performance regressions I added the <code>perf-regression</code> label to the PR. Hopefully this begins a way of more easily tracking regressions instead of having to use the "nags" section. I guess we won't go back in time to add this label, but I think it'd be good for all of us to use this mechanism.</p>



<a name="245042946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245042946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245042946">(Jul 06 2021 at 14:04)</a>:</h4>
<p>Seems good to me.</p>



<a name="245042958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245042958" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245042958">(Jul 06 2021 at 14:05)</a>:</h4>
<p>You can see an example of a message I wrote here: <a href="https://github.com/rust-lang/rust/pull/84560#issuecomment-874781386">https://github.com/rust-lang/rust/pull/84560#issuecomment-874781386</a></p>



<a name="245043186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043186">(Jul 06 2021 at 14:06)</a>:</h4>
<p>We _may_ want to consider adding a section to the triage that lists all PRs that are marked as perf-regressions but do not have the <code>perf-regression-justified</code> label which is used to mark the PR as having some sort of follow-up.</p>



<a name="245043242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043242">(Jul 06 2021 at 14:06)</a>:</h4>
<p>I just created the <code>perf-regression-justified</code> label, but I'm wondering if <code>perf-regression-addressed</code> is a better name.</p>



<a name="245043283"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043283" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043283">(Jul 06 2021 at 14:07)</a>:</h4>
<p>Hm, they seem like separate things</p>



<a name="245043295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043295" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043295">(Jul 06 2021 at 14:07)</a>:</h4>
<p>e.g. I can justify a regression</p>



<a name="245043333"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043333" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043333">(Jul 06 2021 at 14:07)</a>:</h4>
<p>but just addressing it (e.g., optimizing some code) is not really a justification</p>



<a name="245043566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043566" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043566">(Jul 06 2021 at 14:09)</a>:</h4>
<p>not sure what that says :)</p>



<a name="245043725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043725" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043725">(Jul 06 2021 at 14:10)</a>:</h4>
<p>I'd like a label that says this "this perf regresison has been triaged" which can mean many things:</p>
<ul>
<li>the regression was justified (i.e., the compiler got slower, but it's worth it for some reason)</li>
<li>the regression was deemed to be a false positive</li>
<li>the regression is fixed in another PR</li>
<li>the regression won't be fixed now, but we have an issue open that when addressed will fix the perf issue</li>
<li>the regression needs to be reverted</li>
</ul>



<a name="245043754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245043754" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245043754">(Jul 06 2021 at 14:10)</a>:</h4>
<p><code>perf-regression-triaged</code> maybe?</p>



<a name="245044964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245044964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245044964">(Jul 06 2021 at 14:19)</a>:</h4>
<p>Hm, sure</p>



<a name="245044988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245044988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245044988">(Jul 06 2021 at 14:19)</a>:</h4>
<p>Maybe "perf-regression-handled" is better</p>



<a name="245045014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245045014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245045014">(Jul 06 2021 at 14:19)</a>:</h4>
<p>(or -accepted?)</p>



<a name="245046597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245046597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245046597">(Jul 06 2021 at 14:30)</a>:</h4>
<p>Handled or accepted makes it seem like it's taken care of. It's the same sort of problem as justified - it doesn't capture what's actually happening - signally that it's being/been dealt with, and no one needs to worry about following up on the PR anymore.</p>



<a name="245048450"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245048450" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245048450">(Jul 06 2021 at 14:42)</a>:</h4>
<p>Yeah.</p>



<a name="245048453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245048453" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245048453">(Jul 06 2021 at 14:42)</a>:</h4>
<p>Not sure.</p>



<a name="245048476"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245048476" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245048476">(Jul 06 2021 at 14:43)</a>:</h4>
<p>Ultimately anything seems OK.</p>



<a name="245048570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245048570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245048570">(Jul 06 2021 at 14:43)</a>:</h4>
<p>Can you say more about why you don't like "triaged". That seems to capture it for me.</p>



<a name="245050822"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245050822" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245050822">(Jul 06 2021 at 14:59)</a>:</h4>
<p>You could also invert the condition. <code>performance-regression</code> + <code>performance-regression-followup-needed</code>and the latter stays on until it is addressed.</p>



<a name="245051196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051196">(Jul 06 2021 at 15:01)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> mostly because I want it applied not <em>just</em> when we do triage</p>



<a name="245051233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051233">(Jul 06 2021 at 15:01)</a>:</h4>
<p>i.e., the regular perf triage essentially will never be enough to apply the label</p>



<a name="245051237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051237">(Jul 06 2021 at 15:01)</a>:</h4>
<p>so -triaged feels off</p>



<a name="245051374"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051374" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051374">(Jul 06 2021 at 15:02)</a>:</h4>
<p>Reverting the condition does work better with GitHub since it's not easy to query on the non-existence of a label.</p>



<a name="245051485"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051485" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051485">(Jul 06 2021 at 15:03)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> perhaps this bubbles to the other discussion I wanted to start which is to make triage more automated. I believe we could short triaging by a significant margin if we allowed for an automated triage process which was then double checked by a human.</p>



<a name="245051700"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051700" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051700">(Jul 06 2021 at 15:05)</a>:</h4>
<p>I think it's possible</p>



<a name="245051703"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245051703" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245051703">(Jul 06 2021 at 15:05)</a>:</h4>
<p>not sure</p>



<a name="245201982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245201982" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245201982">(Jul 07 2021 at 15:50)</a>:</h4>
<blockquote>
<p>since it's not easy to query on the non-existence of a label.</p>
</blockquote>
<p>Via the API? Because it does work in the web interface. <a href="https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3Aperf-regression+-label%3Aperf-regression-triaged+">https://github.com/rust-lang/rust/pulls?q=is%3Apr+label%3Aperf-regression+-label%3Aperf-regression-triaged+</a></p>



<a name="245202774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2007%2006/near/245202774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.202021.2007.2006.html#245202774">(Jul 07 2021 at 15:57)</a>:</h4>
<p>Yes via the API. I've not found a way to do it - though I've not really looked at all.</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
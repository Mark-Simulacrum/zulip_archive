<html>
<head><meta charset="utf-8"><title>Perf Runs on Windows · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html">Perf Runs on Windows</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="224346804"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224346804" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224346804">(Jan 28 2021 at 15:59)</a>:</h4>
<p><span class="user-mention" data-user-id="274471">@Arlie Davis</span> brought up a good point in the compiler triage meeting I've also been meaning to bring up: running perf on Windows. Questions:</p>
<ul>
<li>Do we have a good sense of how much work it would take to add this capability?</li>
<li>Would we want to run this on every perf run or would we want to explicitly call out Windows when we run?</li>
</ul>



<a name="224347669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224347669" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224347669">(Jan 28 2021 at 16:02)</a>:</h4>
<p>Similarly, do we even test Windows during PRs? In my PRs I've only seen jobs that test Linux.</p>



<a name="224347755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224347755" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224347755">(Jan 28 2021 at 16:03)</a>:</h4>
<p>bors runs on Windows, but the initial testing is Linux only</p>



<a name="224347839"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224347839" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224347839">(Jan 28 2021 at 16:03)</a>:</h4>
<p>Is that something we can fix?  It seems a big testing gap.</p>



<a name="224348121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224348121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224348121">(Jan 28 2021 at 16:05)</a>:</h4>
<p>Yeah, it's a little confusing but <code>bors</code> leaves a link to the actual CI run where you can see the full set of platforms tested on merge. For example: <a href="https://github.com/rust-lang-ci/rust/runs/1607580527">https://github.com/rust-lang-ci/rust/runs/1607580527</a></p>
<p>Which included <code>i686-msvc</code>, <code>x86_64-msvc</code> and others</p>



<a name="224348154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224348154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224348154">(Jan 28 2021 at 16:05)</a>:</h4>
<p>Ahhh, thank you.</p>



<a name="224348233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224348233" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224348233">(Jan 28 2021 at 16:06)</a>:</h4>
<p>We should probably open another thread on <a class="stream" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler">#t-compiler</a> or <a class="stream" data-stream-id="242791" href="/#narrow/stream/242791-t-infra">#t-infra</a> on this, but I'm not sure how much it would help. The tests do run on every PR, just not at the beginning of the PR process. The reviewer has to kick it off.</p>



<a name="224348612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224348612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224348612">(Jan 28 2021 at 16:08)</a>:</h4>
<p>So if I submit a PR, the reviewer has to do something to test changes specific to Windows?  If that's the case, that's fine, I just want to understand the process.  I created a draft PR yesterday, because I was hoping to get GH to run more comprehensive tests than I could, locally. But I didn't see any Windows jobs, so I thought "nope, not covered".</p>



<a name="224349040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224349040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Wesley Wiser <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224349040">(Jan 28 2021 at 16:11)</a>:</h4>
<p>When you open a PR, there's 3 CI jobs that start on your PR. One is just a <code>tidy</code> run to see if you have messed up formatting, trailing whitespace, stuff like that. One I think is just a check run to see quickly if the PR can't even compile. The last is a real run including running tests. This is on <code>x86_64-linux</code>. </p>
<p>If all three of those succeed and you PR gets <code>r+</code>'d, then it runs tests and builds across all supported platforms. For various reasons, that happens in a separate repo which is why Github doesn't show you that and you have to use the link bors comments to see the results.</p>



<a name="224349162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224349162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Arlie Davis <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224349162">(Jan 28 2021 at 16:12)</a>:</h4>
<p>Makes total sense. Thanks.</p>



<a name="224357927"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224357927" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224357927">(Jan 28 2021 at 17:01)</a>:</h4>
<p>The check run does a i686-mingw or something like that check run though</p>



<a name="224357990"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224357990" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224357990">(Jan 28 2021 at 17:02)</a>:</h4>
<p>just on compiler/std/rustdoc/clippy or so</p>



<a name="224484693"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224484693" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224484693">(Jan 29 2021 at 15:19)</a>:</h4>
<p>if you're worried about changes to codegen or something you can also change the try builder to use windows instead of linux, then <code>@bors try</code> to have it build a full compiler. That doesn't run the testsuite, though.</p>



<a name="224490592"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224490592" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224490592">(Jan 29 2021 at 15:54)</a>:</h4>
<p><code>@bors try</code> has only been running for x86_64 linux for a long time. There is simply not enough CI capacity. You can change the github actions workflow to build for another target though.</p>



<a name="224490661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224490661" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224490661">(Jan 29 2021 at 15:54)</a>:</h4>
<p>yes, that's what I meant by "change the try builder"</p>



<a name="224801960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Perf%20Runs%20on%20Windows/near/224801960" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Notification Bot <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/Perf.20Runs.20on.20Windows.html#224801960">(Feb 01 2021 at 22:22)</a>:</h4>
<p>This topic was moved by <span class="user-mention silent" data-user-id="116122">simulacrum</span> to <a class="stream-topic" data-stream-id="131828" href="/#narrow/stream/131828-t-compiler/topic/ci.20testing">#t-compiler &gt; ci testing</a></p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>triage · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html">triage</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="214053628"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214053628" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214053628">(Oct 21 2020 at 14:02)</a>:</h4>
<p><span class="user-mention" data-user-id="118594">@ecstatic-morse</span> hm, did we forget to do triage this week? Was I supposed to do it? I forget</p>



<a name="214081254"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214081254" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214081254">(Oct 21 2020 at 16:59)</a>:</h4>
<p>I am going to try and find time later this week -- unfortunately, probably Friday</p>



<a name="214081336"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214081336" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214081336">(Oct 21 2020 at 17:00)</a>:</h4>
<p>maybe I can eke out an hour later today</p>



<a name="214115079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214115079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Santiago Pastorino <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214115079">(Oct 21 2020 at 21:08)</a>:</h4>
<p>please let me know if you do this today so I can include the report for tomorrow compiler meeting</p>



<a name="214128486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214128486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214128486">(Oct 21 2020 at 23:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> going to try to start that right now, but not sure if I'll finish. I'll ping you</p>



<a name="214128913"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214128913" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214128913">(Oct 21 2020 at 23:51)</a>:</h4>
<p>ok, going to need to run for now but will try to fit it in in an hour or so. we'll see.</p>



<a name="214128923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214128923" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214128923">(Oct 21 2020 at 23:51)</a>:</h4>
<p>Definitely could do first thing tomorrow morning</p>



<a name="214135489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214135489" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214135489">(Oct 22 2020 at 01:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> <a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-10-21.md">https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-10-21.md</a>, finished</p>



<a name="214224439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214224439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Dylan MacKenzie (ecstatic-morse) <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214224439">(Oct 22 2020 at 17:59)</a>:</h4>
<p>Sorry <span class="user-mention" data-user-id="116122">@simulacrum</span> I haven't had any time for open source the last two weeks, and I expect that will continue at least until the end of October. I should be able to get back on the horse the second week of November (the 9th), but before that it'll be you or nobody.</p>



<a name="214224535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214224535" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214224535">(Oct 22 2020 at 18:00)</a>:</h4>
<p>No worries, just didn't realize. I can definitely take care of things</p>



<a name="214708162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214708162" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214708162">(Oct 27 2020 at 14:38)</a>:</h4>
<p>ok, doing triage</p>



<a name="214717146"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214717146" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214717146">(Oct 27 2020 at 15:35)</a>:</h4>
<p>done, posting twir PR</p>



<a name="214717424"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/214717424" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#214717424">(Oct 27 2020 at 15:36)</a>:</h4>
<p>done</p>



<a name="215504382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/215504382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#215504382">(Nov 03 2020 at 20:11)</a>:</h4>
<p>I am going to try to do triage later today, but not sure yet about finding the time.</p>



<a name="216225764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216225764" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216225764">(Nov 10 2020 at 15:16)</a>:</h4>
<p><span class="user-mention" data-user-id="118594">@ecstatic-morse</span> do you think you'll be able to do triage today? fine if not, I can find them if so</p>



<a name="216226072"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216226072" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216226072">(Nov 10 2020 at 15:18)</a>:</h4>
<p>Happy to help here, if y'all need it <span aria-label="blush" class="emoji emoji-1f60a" role="img" title="blush">:blush:</span></p>



<a name="216228885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216228885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216228885">(Nov 10 2020 at 15:40)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> sure, that would be great!</p>



<a name="216229227"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229227" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229227">(Nov 10 2020 at 15:42)</a>:</h4>
<p><code>python3 ./triage/weekly_report.py 5cdf5b882da9e8b7c73b5cadeb7745cb68f6ff63</code> should work for this week</p>



<a name="216229553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229553">(Nov 10 2020 at 15:45)</a>:</h4>
<p>that'll dump a report to stdout which needs to be checked over, not everything it claims is improvement/regression actually is</p>



<a name="216229561"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229561" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229561">(Nov 10 2020 at 15:45)</a>:</h4>
<p>mostly just a gut call</p>



<a name="216229680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229680" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229680">(Nov 10 2020 at 15:46)</a>:</h4>
<p>readme has some more instructions, though the first bits about finding the interesting commits are less relevant now <a href="https://github.com/rust-lang/rustc-perf/tree/master/triage">https://github.com/rust-lang/rustc-perf/tree/master/triage</a></p>



<a name="216229814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229814" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229814">(Nov 10 2020 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> is the hash you have there the next commit hash after last weeks report?</p>



<a name="216229843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229843">(Nov 10 2020 at 15:47)</a>:</h4>
<p>I usually pull the last commit hash from the previous report</p>



<a name="216229868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229868">(Nov 10 2020 at 15:47)</a>:</h4>
<p>worst case you land on an already triaged PR and there's a comment on it, no big deal</p>



<a name="216229930"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216229930" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216229930">(Nov 10 2020 at 15:48)</a>:</h4>
<p>much less painful than trying to figure out the next one</p>



<a name="216231133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216231133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216231133">(Nov 10 2020 at 15:56)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> let me know if you think you can do that today</p>



<a name="216231218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216231218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216231218">(Nov 10 2020 at 15:57)</a>:</h4>
<p>I'm taking a look now. I'm wondering what you think of <a href="https://perf.rust-lang.org/compare.html?start=f92b931045dabb00b892519d3451cb41d41f2d31&amp;end=8532e742fc6ec210fab69b8192190bc40c685912&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=f92b931045dabb00b892519d3451cb41d41f2d31&amp;end=8532e742fc6ec210fab69b8192190bc40c685912&amp;stat=instructions:u</a></p>



<a name="216231284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216231284" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216231284">(Nov 10 2020 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I could use your help on building up an intuition on how to classify these changes as being actual regressions/improvements or not</p>



<a name="216232495"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232495" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232495">(Nov 10 2020 at 16:05)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> oh, sorry, missed the ping, let me look</p>



<a name="216232551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232551" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232551">(Nov 10 2020 at 16:05)</a>:</h4>
<p>I'm looking for old results to try to get a good idea</p>



<a name="216232601"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232601" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232601">(Nov 10 2020 at 16:05)</a>:</h4>
<p>so one thing I do is I remove the non-full runs by declicking checkboxes</p>



<a name="216232675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232675" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232675">(Nov 10 2020 at 16:06)</a>:</h4>
<p>almost nothing should really affect incremental <em>specifically</em> -- we rarely get PRs modifying it -- and the raw numbers are smaller and noisier there</p>



<a name="216232753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232753">(Nov 10 2020 at 16:06)</a>:</h4>
<p>And I'm guessing you ignore the bootstrap timings?</p>



<a name="216232764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232764" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232764">(Nov 10 2020 at 16:06)</a>:</h4>
<p>sort of</p>



<a name="216232798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232798">(Nov 10 2020 at 16:07)</a>:</h4>
<p>Unless there's something big?</p>



<a name="216232841"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232841" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232841">(Nov 10 2020 at 16:07)</a>:</h4>
<p>those are wall times, so if they're not showing &gt;3-4% (plus or minus) it's probably noise</p>



<a name="216232871"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232871" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232871">(Nov 10 2020 at 16:07)</a>:</h4>
<p>almost nothing should be exclusively in bootstrap timings and not affecting any other benchmarks, too</p>



<a name="216232909"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216232909" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216232909">(Nov 10 2020 at 16:07)</a>:</h4>
<p>(unless it's "we deleted 10k lines of code" but that doesn't really happen often)</p>



<a name="216233020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233020" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233020">(Nov 10 2020 at 16:08)</a>:</h4>
<p>for this commit in particular, it looks like deeply-nested-async probably did regress a bit</p>



<a name="216233050"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233050" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233050">(Nov 10 2020 at 16:08)</a>:</h4>
<p>we see 1% regressions on all three of check/opt/debug</p>



<a name="216233159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233159">(Nov 10 2020 at 16:09)</a>:</h4>
<p>you can also try and glance at wall times (<a href="https://perf.rust-lang.org/compare.html?start=f92b931045dabb00b892519d3451cb41d41f2d31&amp;end=8532e742fc6ec210fab69b8192190bc40c685912&amp;stat=wall-time">https://perf.rust-lang.org/compare.html?start=f92b931045dabb00b892519d3451cb41d41f2d31&amp;end=8532e742fc6ec210fab69b8192190bc40c685912&amp;stat=wall-time</a>) but in this case those don't really do much, they're within noise on deeply nested async and everything else</p>



<a name="216233275"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233275" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233275">(Nov 10 2020 at 16:10)</a>:</h4>
<p>but (and this is where intuition is really key) deeply-nested-async tends to be a bit noisier than most, and this PR in particular doesn't seem to have anything to do with it in particular</p>



<a name="216233494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233494" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233494">(Nov 10 2020 at 16:10)</a>:</h4>
<p>Yea you'll have to forgive me not yet having that intuition, but I can try to stay on top of this stuff, and start developing one</p>



<a name="216233506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233506" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233506">(Nov 10 2020 at 16:10)</a>:</h4>
<p>plus, it's ultimately a stress test and no other benchmarks are showing similar results (indeed, most are improved 0.5%)</p>



<a name="216233563"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233563" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233563">(Nov 10 2020 at 16:10)</a>:</h4>
<p>yeah for sure, and worst case it's an extra ping, not all that bad :)</p>



<a name="216233630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233630">(Nov 10 2020 at 16:11)</a>:</h4>
<p>I'll make a note that this might be noise and leave it in</p>



<a name="216233649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233649" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233649">(Nov 10 2020 at 16:11)</a>:</h4>
<p>yep, that's perfect</p>



<a name="216233699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233699">(Nov 10 2020 at 16:11)</a>:</h4>
<p>I usually try to comment on PRs that I believe to not be noise (improvements or regressions regardless).</p>



<a name="216233803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233803">(Nov 10 2020 at 16:12)</a>:</h4>
<p>Do you get pinged on PRs where a perf run happens?</p>



<a name="216233821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233821">(Nov 10 2020 at 16:12)</a>:</h4>
<p>I do not</p>



<a name="216233843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233843">(Nov 10 2020 at 16:12)</a>:</h4>
<p>But I'm watching rust-lang/rust</p>



<a name="216233882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233882">(Nov 10 2020 at 16:13)</a>:</h4>
<p>Is there a reason you ask?</p>



<a name="216233999"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216233999" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216233999">(Nov 10 2020 at 16:13)</a>:</h4>
<p>Just wondering. I find perf work to be satisfying and an easier in-road into rustc so I want to stick with it</p>



<a name="216234183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216234183" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216234183">(Nov 10 2020 at 16:15)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span> yeah I don't usually keep too close an eye on try perf runs, though if there's a PR that looks perf-relevant I'll likely kick off a perf run on it</p>



<a name="216235371"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216235371" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216235371">(Nov 10 2020 at 16:23)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> any nags you're aware of?</p>



<a name="216235391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216235391" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216235391">(Nov 10 2020 at 16:23)</a>:</h4>
<p>hm let me look at previous week</p>



<a name="216235418"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216235418" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216235418">(Nov 10 2020 at 16:23)</a>:</h4>
<p>those are meant to be nags you identify, btw</p>



<a name="216235448"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216235448" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216235448">(Nov 10 2020 at 16:23)</a>:</h4>
<p>basically "what should be checked in on the following week"</p>



<a name="216235570"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216235570" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216235570">(Nov 10 2020 at 16:24)</a>:</h4>
<p>I think the main thing was <a href="https://github.com/rust-lang/rust/pull/78432">https://github.com/rust-lang/rust/pull/78432</a> but it was discussed in T-compiler meeting, so nothing from past weeks to my knowledge</p>



<a name="216235612"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216235612" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216235612">(Nov 10 2020 at 16:24)</a>:</h4>
<p>I'm personally not always great about copying them forward but they're usually minor if I'm not actively following up anyway</p>



<a name="216237166"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216237166" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216237166">(Nov 10 2020 at 16:35)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> please let me know if I can make any improvements on this: <a href="https://github.com/rust-lang/rustc-perf/pull/793">https://github.com/rust-lang/rustc-perf/pull/793</a></p>



<a name="216237760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216237760" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216237760">(Nov 10 2020 at 16:38)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> Looks great! Can you make a PR against this-week-in-rust as well to update the perf section to point at the just merged file?</p>



<a name="216237789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216237789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216237789">(Nov 10 2020 at 16:39)</a>:</h4>
<p>Sure thing!</p>



<a name="216238614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/216238614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#216238614">(Nov 10 2020 at 16:45)</a>:</h4>
<p>FYI: <a href="https://github.com/rust-lang/this-week-in-rust/pull/1626">https://github.com/rust-lang/this-week-in-rust/pull/1626</a></p>



<a name="217691571"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217691571" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217691571">(Nov 23 2020 at 22:28)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> <span class="user-mention" data-user-id="118594">@ecstatic-morse</span> would either of you be up for doing triage tomorrow? I can do it if not.</p>



<a name="217703125"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217703125" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217703125">(Nov 24 2020 at 00:51)</a>:</h4>
<p>Assuming I finish my test tomorrow at a reasonable hour, I would be interested in learning how to do triage</p>



<a name="217705015"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217705015" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217705015">(Nov 24 2020 at 01:26)</a>:</h4>
<p>If you ping me I can guide you - what time (ish) do you expect that to happen? (Morning evening?)</p>



<a name="217705161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217705161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217705161">(Nov 24 2020 at 01:29)</a>:</h4>
<p>Well it depends how badly I procrastinate <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span> but hopefully I'll be done by mid afternoon</p>



<a name="217735388"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217735388" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217735388">(Nov 24 2020 at 10:31)</a>:</h4>
<p>I'm also available, but I think it's great to have more people who can do it. I'm also new to triaging so I'll keep an eye on this one to learn from it.</p>



<a name="217803795"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217803795" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217803795">(Nov 24 2020 at 19:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I have time in ~10 minutes to work on this, if you want to throw some resources in here async I can look at them :)</p>



<a name="217803807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217803807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217803807">(Nov 24 2020 at 19:40)</a>:</h4>
<p>I'm around</p>



<a name="217803884"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217803884" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217803884">(Nov 24 2020 at 19:41)</a>:</h4>
<p>these instructions are good, but a bit outdated <a href="https://github.com/rust-lang/rustc-perf/tree/master/triage#instructions">https://github.com/rust-lang/rustc-perf/tree/master/triage#instructions</a></p>



<a name="217804108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217804108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217804108">(Nov 24 2020 at 19:43)</a>:</h4>
<p>the first step is to get a clone of that repo locally and run <code>python3 ./triage/weekly_report.py c919f490bbcd2b29b74016101f7ec71aaa24bdbb</code>. that'll dump a triage report to stdout.</p>



<a name="217804150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217804150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217804150">(Nov 24 2020 at 19:43)</a>:</h4>
<p>(the hash there was pulled from the previous report's end commit)</p>



<a name="217804208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217804208" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217804208">(Nov 24 2020 at 19:44)</a>:</h4>
<p>the next step is to check the nags from the previous week</p>



<a name="217804221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217804221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217804221">(Nov 24 2020 at 19:44)</a>:</h4>
<p>this time there are none</p>



<a name="217804948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217804948" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217804948">(Nov 24 2020 at 19:51)</a>:</h4>
<p>Now you'll want to, for each PR in the report investigate the cause of the improvement/regression, and whether it was correctly identified. if it's a rollup, try to determine the cause (i.e., which PR in the rollup) and leave a comment on the rollup indicating the conclusion you drew, pinging the identified likely cause PR's author to confirm that.</p>
<p>checking if the tool correctly diagnosed a regression is mostly an intuition thing right now. The first step is to try to figure out if the change is just in one benchmark or many or what</p>



<a name="217805087"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805087" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805087">(Nov 24 2020 at 19:52)</a>:</h4>
<p>how did you know to pick <a href="https://github.com/rust-lang/rust/commit/c919f490bbcd2b29b74016101f7ec71aaa24bdbb">c919f490bbcd2b29b74016101f7ec71aaa24bdbb</a> ?</p>



<a name="217805101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805101">(Nov 24 2020 at 19:52)</a>:</h4>
<blockquote>
<p>(the hash there was pulled from the previous report's end commit)</p>
</blockquote>



<a name="217805210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805210" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805210">(Nov 24 2020 at 19:53)</a>:</h4>
<p>not sure how much detail I can give on the determination, I guess, it's really an experience thing. we can talk through questions once you get there.</p>



<a name="217805377"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805377" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805377">(Nov 24 2020 at 19:54)</a>:</h4>
<blockquote>
<h4>Nags requiring follow up</h4>
<p>TODO: Nags</p>
</blockquote>
<p><span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span> maybe I can help with that at some point</p>



<a name="217805590"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805590" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805590">(Nov 24 2020 at 19:56)</a>:</h4>
<p>the script gave me an error from github, but it seems to have pulled all the rgressions first:</p>
<div class="codehilite"><pre><span></span><code>Comparing 25a691003cf6676259ee7d4bed05b43cb6283cea to 53d19b37c514246acab020eaba9527cb97c421cf
HTTP Error 500: Internal Server Error

2020-11-24 Triage Log

TODO: Summary

Triage done by **@joshua**
...
</code></pre></div>



<a name="217805793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805793">(Nov 24 2020 at 19:58)</a>:</h4>
<p>hm maybe try rerunning it, I hit that error too but seems to be fixed now</p>



<a name="217805876"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805876" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805876">(Nov 24 2020 at 19:59)</a>:</h4>
<p>what about this one?</p>
<div class="codehilite" data-code-language="Bash"><pre><span></span><code>cannot import name <span class="s1">'pp'</span> from <span class="s1">'pprint'</span>
</code></pre></div>



<a name="217805891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805891">(Nov 24 2020 at 19:59)</a>:</h4>
<p>no idea</p>



<a name="217805912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217805912" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217805912">(Nov 24 2020 at 19:59)</a>:</h4>
<p>are you using python3?</p>



<a name="217806059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806059">(Nov 24 2020 at 20:00)</a>:</h4>
<p>ok yes it works on a retry, maybe github was overloaded or something</p>



<a name="217806152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806152">(Nov 24 2020 at 20:01)</a>:</h4>
<p>since it's a shell script you can drop the call to python3 fwiw</p>



<a name="217806177"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806177" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806177">(Nov 24 2020 at 20:02)</a>:</h4>
<p>the error is almost certainly from <a href="http://perf.rust-lang.org">perf.rust-lang.org</a> not github, btw</p>



<a name="217806439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806439" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806439">(Nov 24 2020 at 20:03)</a>:</h4>
<p>so I changed the script to</p>
<div class="codehilite" data-code-language="Python"><pre><span></span><code><span class="kn">from</span> <span class="nn">pprint</span> <span class="kn">import</span> <span class="o">*</span>
</code></pre></div>
<p>and it's just working</p>



<a name="217806534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806534">(Nov 24 2020 at 20:04)</a>:</h4>
<p>I think pp is not used right now</p>



<a name="217806646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806646">(Nov 24 2020 at 20:05)</a>:</h4>
<p>so here is the first regression in the report: <a href="https://perf.rust-lang.org/compare.html?start=7d747db0d5dd8f08f2efb073e2e77a34553465a7&amp;end=8d2d0014922e9f541694bfe87642749239990e0e&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=7d747db0d5dd8f08f2efb073e2e77a34553465a7&amp;end=8d2d0014922e9f541694bfe87642749239990e0e&amp;stat=instructions:u</a><br>
and it comes from <a href="https://github.com/rust-lang/rust/pull/79167">https://github.com/rust-lang/rust/pull/79167</a>. I'm thinking maybe <a href="https://github.com/rust-lang/rust/pull/78785">https://github.com/rust-lang/rust/pull/78785</a>, which changes the syscall interface?</p>



<a name="217806805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806805" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806805">(Nov 24 2020 at 20:06)</a>:</h4>
<p>seems right</p>



<a name="217806937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806937">(Nov 24 2020 at 20:08)</a>:</h4>
<p>also a case for leaving a comment, perhaps suggesting a revert</p>



<a name="217806989"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806989" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806989">(Nov 24 2020 at 20:08)</a>:</h4>
<p>regression also seems to be a 40% hit to libcore compile times</p>



<a name="217806998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217806998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217806998">(Nov 24 2020 at 20:08)</a>:</h4>
<p>oh oof</p>



<a name="217807313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807313" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807313">(Nov 24 2020 at 20:11)</a>:</h4>
<p>pinged <span class="user-mention silent" data-user-id="138448">cuviper</span> : <a href="https://github.com/rust-lang/rust/pull/79167#issuecomment-733207145">https://github.com/rust-lang/rust/pull/79167#issuecomment-733207145</a><br>
and I'll note it in the triage log</p>



<a name="217807511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807511" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807511">(Nov 24 2020 at 20:12)</a>:</h4>
<p>there is also this one: <a href="https://github.com/rust-lang/rust/pull/78461">https://github.com/rust-lang/rust/pull/78461</a></p>



<a name="217807582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807582">(Nov 24 2020 at 20:13)</a>:</h4>
<p>that wasn't in the same rollup, was it?</p>



<a name="217807586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807586">(Nov 24 2020 at 20:13)</a>:</h4>
<p><a href="https://perf.rust-lang.org/compare.html?start=da384694807172f0ca40eca2e49a11688aba6e93&amp;end=a1a13b2bc4fa6370b9501135d97c5fe0bc401894&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=da384694807172f0ca40eca2e49a11688aba6e93&amp;end=a1a13b2bc4fa6370b9501135d97c5fe0bc401894&amp;stat=instructions:u</a></p>



<a name="217807604"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807604" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807604">(Nov 24 2020 at 20:13)</a>:</h4>
<p>no I went back another week</p>



<a name="217807622"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807622" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807622">(Nov 24 2020 at 20:13)</a>:</h4>
<p><span class="user-mention" data-user-id="281739">@oliver</span> oh I see - I'm going off a list that the script generated , let's avoid trying to do the same triage at once</p>



<a name="217807954"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807954" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807954">(Nov 24 2020 at 20:16)</a>:</h4>
<p>which rollup are we working from?</p>



<a name="217807968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807968" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807968">(Nov 24 2020 at 20:16)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/commit/c919f490bbcd2b29b74016101f7ec71aaa24bdbb">c919f490bbcd2b29b74016101f7ec71aaa24bdbb</a></p>



<a name="217807987"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217807987" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217807987">(Nov 24 2020 at 20:16)</a>:</h4>
<p>I don't think it makes sense for both of us to do triage at once.</p>



<a name="217808002"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808002" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808002">(Nov 24 2020 at 20:16)</a>:</h4>
<p>it will be confusing for both of us</p>



<a name="217808022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808022" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808022">(Nov 24 2020 at 20:16)</a>:</h4>
<p>would you like to do triage instead? ;)</p>



<a name="217808529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808529">(Nov 24 2020 at 20:21)</a>:</h4>
<p>I will probably grab <a href="https://github.com/rust-lang/rustc-perf/issues/767">https://github.com/rust-lang/rustc-perf/issues/767</a> this weekend if someone else doesn't, it's really annoying me <span aria-label="laughing" class="emoji emoji-1f606" role="img" title="laughing">:laughing:</span></p>



<a name="217808631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808631">(Nov 24 2020 at 20:22)</a>:</h4>
<p>oh, also <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> if you can note pings with questions asked as nags, that'd be great</p>



<a name="217808678"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808678" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808678">(Nov 24 2020 at 20:23)</a>:</h4>
<p>I was putting them in the 'Regressions' section, I can add them to 'Nags' too</p>



<a name="217808739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808739" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808739">(Nov 24 2020 at 20:23)</a>:</h4>
<p>Hm not sure what you mean</p>



<a name="217808815"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808815" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808815">(Nov 24 2020 at 20:24)</a>:</h4>
<p>like this: <a href="/user_uploads/4715/d4e35D145maF1HE_HhcNJRFO/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/d4e35D145maF1HE_HhcNJRFO/image.png" title="image.png"><img src="/user_uploads/4715/d4e35D145maF1HE_HhcNJRFO/image.png"></a></div>



<a name="217808833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808833" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808833">(Nov 24 2020 at 20:24)</a>:</h4>
<p>yeah so the point of the nags section is to follow up next week</p>



<a name="217808846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808846">(Nov 24 2020 at 20:24)</a>:</h4>
<p>so I'd move that to there</p>



<a name="217808858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808858">(Nov 24 2020 at 20:24)</a>:</h4>
<p>40% increased bootstrap times is inaccurate btw</p>



<a name="217808861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808861" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808861">(Nov 24 2020 at 20:24)</a>:</h4>
<p>this is just libcore</p>



<a name="217808870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217808870" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217808870">(Nov 24 2020 at 20:25)</a>:</h4>
<p>'of libcore' is missing, yeah</p>



<a name="217811654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217811654" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217811654">(Nov 24 2020 at 20:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> perf.rlo says <a href="https://perf.rust-lang.org/compare.html?start=20328b532336017213ccb4095740955d81060ebc&amp;end=5d5ff84130da0d74c6ece368dbe821d8f83fa526&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=20328b532336017213ccb4095740955d81060ebc&amp;end=5d5ff84130da0d74c6ece368dbe821d8f83fa526&amp;stat=instructions:u</a> was a regression, but <a href="https://github.com/rust-lang/rust/commit/5d5ff84130da0d74c6ece368dbe821d8f83fa526">https://github.com/rust-lang/rust/commit/5d5ff84130da0d74c6ece368dbe821d8f83fa526</a> just stabilized an existing feature - this is a false positive, right? Should I include it in the triage log?</p>



<a name="217811863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217811863" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217811863">(Nov 24 2020 at 20:52)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> not a big regression</p>



<a name="217811875"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217811875" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217811875">(Nov 24 2020 at 20:52)</a>:</h4>
<p>I would skip</p>



<a name="217812039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217812039" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217812039">(Nov 24 2020 at 20:54)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> is there a way to bisect regressions in a rollup? <a href="https://github.com/rust-lang/rust/pull/79167#issuecomment-733211966">https://github.com/rust-lang/rust/pull/79167#issuecomment-733211966</a></p>



<a name="217812119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217812119" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217812119">(Nov 24 2020 at 20:55)</a>:</h4>
<p>not really. there's some amount of tooling to make PRs per PR, but it's probably easier to put up a PR reverting getrandom PR and run perf try on that</p>



<a name="217812158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217812158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217812158">(Nov 24 2020 at 20:55)</a>:</h4>
<p>ok, the regression is big enough I think I'll do that</p>



<a name="217812714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217812714" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217812714">(Nov 24 2020 at 21:00)</a>:</h4>
<p>triage is much more time consuming than I expected <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="217813848"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217813848" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217813848">(Nov 24 2020 at 21:09)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/79389">https://github.com/rust-lang/rust/pull/79389</a></p>



<a name="217816215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816215">(Nov 24 2020 at 21:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> any ideas what could have caused the regression in <a href="https://github.com/rust-lang/rust/pull/79167">https://github.com/rust-lang/rust/pull/79167</a> ?</p>



<a name="217816297"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816297" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816297">(Nov 24 2020 at 21:31)</a>:</h4>
<p>the perf.rlo links are useful</p>



<a name="217816304"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816304" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816304">(Nov 24 2020 at 21:31)</a>:</h4>
<p>can you give me that link?</p>



<a name="217816375"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816375" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816375">(Nov 24 2020 at 21:32)</a>:</h4>
<p>it's in my comment: <a href="https://perf.rust-lang.org/compare.html?start=7d747db0d5dd8f08f2efb073e2e77a34553465a7&amp;end=8d2d0014922e9f541694bfe87642749239990e0e&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=7d747db0d5dd8f08f2efb073e2e77a34553465a7&amp;end=8d2d0014922e9f541694bfe87642749239990e0e&amp;stat=instructions:u</a></p>



<a name="217816379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816379" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816379">(Nov 24 2020 at 21:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/79167#issuecomment-733207145">https://github.com/rust-lang/rust/pull/79167#issuecomment-733207145</a></p>



<a name="217816409"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816409" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816409">(Nov 24 2020 at 21:32)</a>:</h4>
<p>oh</p>



<a name="217816413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816413">(Nov 24 2020 at 21:32)</a>:</h4>
<p>I have a theory</p>



<a name="217816620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816620" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816620">(Nov 24 2020 at 21:34)</a>:</h4>
<p><span class="user-mention" data-user-id="310399">@Mara</span> thought it might be the new avx512 support in the stdarch bump</p>



<a name="217816663"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816663" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816663">(Nov 24 2020 at 21:34)</a>:</h4>
<p>yeah</p>



<a name="217816665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816665">(Nov 24 2020 at 21:34)</a>:</h4>
<p>that seems right</p>



<a name="217816679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816679">(Nov 24 2020 at 21:34)</a>:</h4>
<p>we're adding a bunch of new functions I guess?</p>



<a name="217816745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816745" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816745">(Nov 24 2020 at 21:35)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> might know?</p>



<a name="217816771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816771">(Nov 24 2020 at 21:35)</a>:</h4>
<p>that would explain why core is affected so much more than everything else, though</p>



<a name="217816774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816774">(Nov 24 2020 at 21:35)</a>:</h4>
<p>oh hey, a zulip thread. hello :)</p>



<a name="217816859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816859" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816859">(Nov 24 2020 at 21:36)</a>:</h4>
<p>yeah my guess is that the perf regressions instruction wise are from increased metadata decode of libcore, which'll affect everything</p>



<a name="217816868"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816868" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816868">(Nov 24 2020 at 21:36)</a>:</h4>
<p>we should test a revert though</p>



<a name="217816928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816928" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816928">(Nov 24 2020 at 21:37)</a>:</h4>
<p>but a 6 second regression to libcore compile times is pretty bad</p>



<a name="217816933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816933">(Nov 24 2020 at 21:37)</a>:</h4>
<p>I am running out of time for triage so I'm going to pass that off to someone else <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="217816939"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217816939" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217816939">(Nov 24 2020 at 21:37)</a>:</h4>
<p>I still have most of the improvements to go through</p>



<a name="217817005"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817005" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817005">(Nov 24 2020 at 21:38)</a>:</h4>
<p>I'll post a revert</p>



<a name="217817258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817258">(Nov 24 2020 at 21:41)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/79391">https://github.com/rust-lang/rust/pull/79391</a></p>



<a name="217817480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817480" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817480">(Nov 24 2020 at 21:43)</a>:</h4>
<p>(I intentionally r?'d myself so I look at it in a few days during next review session)</p>



<a name="217817534"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817534" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817534">(Nov 24 2020 at 21:44)</a>:</h4>
<p>(ah okay, sorry!)</p>



<a name="217817617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817617" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817617">(Nov 24 2020 at 21:44)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you know why <a href="https://github.com/rust-lang/rust/pull/78088">https://github.com/rust-lang/rust/pull/78088</a> might be a performance improvement? it's not changing anything other than adding a new lint <a href="https://perf.rust-lang.org/compare.html?start=4ec27e4b79891b0ebc2ad71a3c4ac94f67d93f93&amp;end=74285eb3a83eac639f9c54ba8c4ccf9879b3b00a&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=4ec27e4b79891b0ebc2ad71a3c4ac94f67d93f93&amp;end=74285eb3a83eac639f9c54ba8c4ccf9879b3b00a&amp;stat=instructions:u</a></p>



<a name="217817630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817630">(Nov 24 2020 at 21:44)</a>:</h4>
<p>maybe noise?</p>



<a name="217817676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817676">(Nov 24 2020 at 21:45)</a>:</h4>
<p>hm that is some significant noise if so</p>



<a name="217817681"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817681" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817681">(Nov 24 2020 at 21:45)</a>:</h4>
<p>let me take a look</p>



<a name="217817727"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817727" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817727">(Nov 24 2020 at 21:45)</a>:</h4>
<p>oh no 28 commits :/</p>



<a name="217817870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217817870" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217817870">(Nov 24 2020 at 21:46)</a>:</h4>
<p>it did change the desugaring for panic!</p>



<a name="217818076"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818076" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818076">(Nov 24 2020 at 21:48)</a>:</h4>
<p>but panic! is not that common in futures-rs, AFAICT</p>



<a name="217818172"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818172" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818172">(Nov 24 2020 at 21:49)</a>:</h4>
<p>my bet though is that the change in desugaring to a non-generic call (for example) is what gave us these wins</p>



<a name="217818337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818337" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818337">(Nov 24 2020 at 21:50)</a>:</h4>
<p>ah hmm, ok, I didn't realize the implementation changed too</p>



<a name="217818769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Mara <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818769">(Nov 24 2020 at 21:54)</a>:</h4>
<p>if that makes a a big difference, then <a href="https://github.com/rust-lang/rust/pull/78343">https://github.com/rust-lang/rust/pull/78343</a> should show similar improvements</p>



<a name="217818798"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818798" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818798">(Nov 24 2020 at 21:54)</a>:</h4>
<p>that one is next on the list :)</p>



<a name="217818807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818807" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818807">(Nov 24 2020 at 21:54)</a>:</h4>
<p>-3%</p>



<a name="217818853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818853">(Nov 24 2020 at 21:55)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> do you know why <a href="https://github.com/rust-lang/rust/pull/79219">https://github.com/rust-lang/rust/pull/79219</a> would make a difference (the bootstrap bump)? doesn't perf.rlo run on stage2, not stage1?</p>



<a name="217818886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818886" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818886">(Nov 24 2020 at 21:55)</a>:</h4>
<p>stage2 yes</p>



<a name="217818920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818920" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818920">(Nov 24 2020 at 21:55)</a>:</h4>
<p>do you have the perf diff?</p>



<a name="217818934"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818934" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818934">(Nov 24 2020 at 21:55)</a>:</h4>
<p><a href="https://perf.rust-lang.org/compare.html?start=8ca930aa262c04a898cf64155e40a6de3ec9ba9e&amp;end=20328b532336017213ccb4095740955d81060ebc&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=8ca930aa262c04a898cf64155e40a6de3ec9ba9e&amp;end=20328b532336017213ccb4095740955d81060ebc&amp;stat=instructions:u</a></p>



<a name="217818942"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818942" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818942">(Nov 24 2020 at 21:55)</a>:</h4>
<p>might just be noise?</p>



<a name="217818992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217818992" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217818992">(Nov 24 2020 at 21:56)</a>:</h4>
<p>the amount of noise is a little concerning, maybe we should turn down the sensitivity of the script?</p>



<a name="217819085"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819085" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819085">(Nov 24 2020 at 21:56)</a>:</h4>
<p>Yeah that looks like noise</p>



<a name="217819101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819101" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819101">(Nov 24 2020 at 21:56)</a>:</h4>
<p>I think the sensitivity is fine</p>



<a name="217819109"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819109" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819109">(Nov 24 2020 at 21:56)</a>:</h4>
<p>err I think that might be the wrong link, one sec</p>



<a name="217819126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819126">(Nov 24 2020 at 21:57)</a>:</h4>
<p>that is the wrong link</p>



<a name="217819155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819155">(Nov 24 2020 at 21:57)</a>:</h4>
<p>ahhh I have too many tabs</p>



<a name="217819175"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819175" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819175">(Nov 24 2020 at 21:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> would it be possible to show the name of the commit on perf.rlo?</p>



<a name="217819193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819193" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819193">(Nov 24 2020 at 21:57)</a>:</h4>
<p>ideally the PR, but I'm sure that's harder</p>



<a name="217819200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819200">(Nov 24 2020 at 21:57)</a>:</h4>
<p>not easily</p>



<a name="217819207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819207">(Nov 24 2020 at 21:57)</a>:</h4>
<p>the PR number is shown though?</p>



<a name="217819220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819220">(Nov 24 2020 at 21:57)</a>:</h4>
<p>ah ok, so it is</p>



<a name="217819288"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819288" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819288">(Nov 24 2020 at 21:58)</a>:</h4>
<p>ok I think I am out of time and starting to make mistakes, unfortunately I only got through half the list</p>



<a name="217819343"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819343" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819343">(Nov 24 2020 at 21:58)</a>:</h4>
<p>please post a PR with a line or whatever</p>



<a name="217819346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819346" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819346">(Nov 24 2020 at 21:59)</a>:</h4>
<p>I can finish up</p>



<a name="217819401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217819401" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217819401">(Nov 24 2020 at 21:59)</a>:</h4>
<p>thanks! opened <a href="https://github.com/rust-lang/rustc-perf/pull/799">https://github.com/rust-lang/rustc-perf/pull/799</a></p>



<a name="217825637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217825637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217825637">(Nov 24 2020 at 23:06)</a>:</h4>
<p>ok finished that and posted twir</p>



<a name="217834220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217834220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217834220">(Nov 25 2020 at 01:03)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-11-24.md">https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-11-24.md</a></p>
<p>It's odd that my PackedFingerprint change has such different results from the perf run in the PR. I wouldn't have wanted to merge it if it were that bad. :)</p>
<p>But I also can't reproduce the poor results locally using the same commits as in the triage run. Are there differences between the perf runs triggered by rust-timer and the ones done for the triage report? It's totally possible that merges since the PR perf run account for changes, of course, and that I can't reproduce the results because my system is different. But it warrants asking about at least.</p>



<a name="217836156"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217836156" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217836156">(Nov 25 2020 at 01:35)</a>:</h4>
<p>Shouldn't be any difference</p>



<a name="217836167"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217836167" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217836167">(Nov 25 2020 at 01:35)</a>:</h4>
<p>Which PR number was it?</p>



<a name="217836979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217836979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217836979">(Nov 25 2020 at 01:52)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/78646">https://github.com/rust-lang/rust/pull/78646</a></p>



<a name="217838543"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217838543" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217838543">(Nov 25 2020 at 02:26)</a>:</h4>
<p>Hm yeah, it seems like the kind of change that'll be pretty sensitive</p>



<a name="217838551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/217838551" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#217838551">(Nov 25 2020 at 02:26)</a>:</h4>
<p>Definitely feels pretty surprising though</p>



<a name="218024731"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218024731" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218024731">(Nov 26 2020 at 17:31)</a>:</h4>
<p>I noticed this issue: <a href="https://github.com/rust-lang/rust/issues/48155">https://github.com/rust-lang/rust/issues/48155</a><br>
might be retired?</p>



<a name="218024821"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218024821" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218024821">(Nov 26 2020 at 17:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/issues/47665">https://github.com/rust-lang/rust/issues/47665</a></p>



<a name="218025181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218025181" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218025181">(Nov 26 2020 at 17:37)</a>:</h4>
<p>or are legacy regressions still considered an open concern?</p>



<a name="218468435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218468435" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218468435">(Dec 01 2020 at 19:19)</a>:</h4>
<p>Probably fine to close but I do not have bandwidth myself. Would be great to fork that into separate topics (triage is intended just for the weekly triage)</p>



<a name="218468548"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218468548" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218468548">(Dec 01 2020 at 19:20)</a>:</h4>
<p><span class="user-mention" data-user-id="232545">@Joshua Nelson</span> <span class="user-mention" data-user-id="224872">@Ryan Levick</span> would either of you be up for doing triage? I find myself with little time left today for Rust -- if not though we can miss or I'll get to it on Thursday I guess.</p>



<a name="218468623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218468623" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218468623">(Dec 01 2020 at 19:20)</a>:</h4>
<p>I probably don't have time, it took me almost 2 hours last time to get through only half the log <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="218471874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218471874" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218471874">(Dec 01 2020 at 19:47)</a>:</h4>
<p>I can do it tomorrow morning European time if no one else picks it up</p>



<a name="218472316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218472316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218472316">(Dec 01 2020 at 19:51)</a>:</h4>
<p>I'll be around as well if someone wants to peek into those legacy issues<br>
or just move forward with the weekly triages following the expectation</p>



<a name="218599044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218599044" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218599044">(Dec 02 2020 at 18:29)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> did you get a chance to take a look here? I unfortunately am unlikely to find time today and tomorrow, I think</p>



<a name="218601120"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218601120" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218601120">(Dec 02 2020 at 18:44)</a>:</h4>
<p>I did not <span aria-label="frown" class="emoji emoji-1f641" role="img" title="frown">:frown:</span>I can do it first thing tomorrow though if it's not done by then</p>



<a name="218621158"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218621158" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218621158">(Dec 02 2020 at 21:19)</a>:</h4>
<p>OK, that would be good.</p>



<a name="218621163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218621163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218621163">(Dec 02 2020 at 21:19)</a>:</h4>
<p>I will not have time.</p>



<a name="218680040"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218680040" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218680040">(Dec 03 2020 at 11:18)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> the <a href="https://perf.rust-lang.org/compare.html?start=0d9651648d3b741e81ba7042e49a07b78a441517&amp;end=aefcf1f3427a5e522a8c665d7e25529cf971bc93&amp;stat=instructions:u">perf results</a> for <a href="https://github.com/rust-lang/rust/pull/79427">#79427</a> look possibly legit, but given the change was so small and is actually doing _more_, so this is noise right?</p>



<a name="218680179"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218680179" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218680179">(Dec 03 2020 at 11:19)</a>:</h4>
<p>Yes I think noise is likely</p>



<a name="218680274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218680274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218680274">(Dec 03 2020 at 11:20)</a>:</h4>
<p>Seems odd for opt to be affected better than check if it wasn't for a typeck change</p>



<a name="218680565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218680565" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218680565">(Dec 03 2020 at 11:23)</a>:</h4>
<p>In this case, best to remove it completely or to leave it and note that it's likely noise?</p>



<a name="218680720"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218680720" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218680720">(Dec 03 2020 at 11:24)</a>:</h4>
<p>I'd remove</p>



<a name="218683943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218683943" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218683943">(Dec 03 2020 at 12:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> looks like <a href="https://github.com/rust-lang/rust/pull/79318">this PR</a> caused a decent sized regression (avg 4%) in the externs stress test. A perf run was run in the PR but no one really commented on it. Is it worth bringing to their attention again?</p>



<a name="218683991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218683991" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218683991">(Dec 03 2020 at 12:01)</a>:</h4>
<p>Especially considering this change has to do with extern items, I think it deserves some attention</p>



<a name="218684094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684094" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684094">(Dec 03 2020 at 12:02)</a>:</h4>
<p>Yeah I would</p>



<a name="218684132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684132" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684132">(Dec 03 2020 at 12:02)</a>:</h4>
<p>I think the externs benchmark in this case is more important than the deeply nested async, too</p>



<a name="218684315"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684315" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684315">(Dec 03 2020 at 12:04)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/218684132">said</a>:</p>
<blockquote>
<p>I think the externs benchmark in this case is more important than the deeply nested async, too</p>
</blockquote>
<p>Can you explain more why you think that. I agree with you but want to check my intuition against yours</p>



<a name="218684692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684692" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684692">(Dec 03 2020 at 12:09)</a>:</h4>
<p>Deeply nested is more of a stress test</p>



<a name="218684706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684706" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684706">(Dec 03 2020 at 12:09)</a>:</h4>
<p>Whereas IIRC externs is somewhat realistic</p>



<a name="218684713"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684713" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684713">(Dec 03 2020 at 12:09)</a>:</h4>
<p>(just not common in quantity)</p>



<a name="218684789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684789">(Dec 03 2020 at 12:10)</a>:</h4>
<p>i.e. externs is scaling something naturally whereas deeply nested feels like it's sort of not</p>



<a name="218684794"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218684794" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218684794">(Dec 03 2020 at 12:10)</a>:</h4>
<p>Yea externs is normal usage just at an extreme amount</p>



<a name="218685154"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218685154" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218685154">(Dec 03 2020 at 12:15)</a>:</h4>
<p>deeply nested async is quite natural apparently</p>



<a name="218685290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218685290" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218685290">(Dec 03 2020 at 12:16)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> how do you feel about moving a PR that was originally categorized as "mixed" to "regression" when the regression is _much_ larger than the gain?</p>



<a name="218685330"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218685330" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218685330">(Dec 03 2020 at 12:17)</a>:</h4>
<p><span aria-label="thumbs up" class="emoji emoji-1f44d" role="img" title="thumbs up">:thumbs_up:</span></p>



<a name="218685350"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218685350" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218685350">(Dec 03 2020 at 12:17)</a>:</h4>
<p>I think we should eagerly do so in either regression or improvement</p>



<a name="218685454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218685454" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218685454">(Dec 03 2020 at 12:18)</a>:</h4>
<p><span class="user-mention" data-user-id="216206">@lcnr</span> to some extent, but I worry that this PR seems like it shouldn't really affect async but should affect externs? Maybe I misread</p>



<a name="218686092"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218686092" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218686092">(Dec 03 2020 at 12:26)</a>:</h4>
<p>that's true</p>



<a name="218686140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218686140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218686140">(Dec 03 2020 at 12:26)</a>:</h4>
<p>will add a short comment to the PR explaining my stance here</p>



<a name="218686529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218686529" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218686529">(Dec 03 2020 at 12:30)</a>:</h4>
<p>Thanks!</p>



<a name="218687510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687510">(Dec 03 2020 at 12:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> can I get your eyes on <a href="https://perf.rust-lang.org/compare.html?start=d37afad0cc87bf709ad10c85319296ac53030f03&amp;end=a094ff9590b83c8f94d898f92c2964a5803ded06&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=d37afad0cc87bf709ad10c85319296ac53030f03&amp;end=a094ff9590b83c8f94d898f92c2964a5803ded06&amp;stat=instructions:u</a> I'm not sure what to make of it. This is definitely a mixed result. The change was in the pass arguments of 2*size_of::&lt;usize&gt; in registers instead of by reference. I'm not sure what to write about it. thoughts?</p>



<a name="218687560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687560">(Dec 03 2020 at 12:41)</a>:</h4>
<p>For a change like that I think looking at instructions is going to be a bit odd</p>



<a name="218687631"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687631" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687631">(Dec 03 2020 at 12:42)</a>:</h4>
<p>wall times are pretty mixed too, though</p>



<a name="218687676"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687676" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687676">(Dec 03 2020 at 12:42)</a>:</h4>
<p>my guess is that for most workloads there is no major effect</p>



<a name="218687707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687707">(Dec 03 2020 at 12:43)</a>:</h4>
<p>it seems likely to be more significant in non-compiler benchmarks</p>



<a name="218687735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687735" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687735">(Dec 03 2020 at 12:43)</a>:</h4>
<p>most parts of the compiler are either passing huge structs around (not going to fit in registers anyway) or passing a pointer (to an interned struct, usually)</p>



<a name="218687872"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687872" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687872">(Dec 03 2020 at 12:44)</a>:</h4>
<p>I like that analysis. :-) I'll borrow that</p>



<a name="218687922"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218687922" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218687922">(Dec 03 2020 at 12:45)</a>:</h4>
<p>Or they pass a fat pointer, which always gets passed in two registers even before this change.</p>



<a name="218688062"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218688062" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218688062">(Dec 03 2020 at 12:47)</a>:</h4>
<p>(Though fat pointers are <em>super</em> rare in the compiler)</p>



<a name="218688597"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218688597" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218688597">(Dec 03 2020 at 12:52)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> any nags I should be aware of? I believe I'm done with the triage report</p>



<a name="218689523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218689523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218689523">(Dec 03 2020 at 13:02)</a>:</h4>
<p>In any case, here's the first draft: <a href="https://github.com/rust-lang/rustc-perf/pull/808">https://github.com/rust-lang/rustc-perf/pull/808</a></p>



<a name="218690003"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218690003" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218690003">(Dec 03 2020 at 13:07)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> nothing from me personally, there might be some in last report, that's where you should look</p>



<a name="218693977"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218693977" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> apiraino <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218693977">(Dec 03 2020 at 13:46)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">Ryan Levick</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/218689523">said</a>:</p>
<blockquote>
<p>In any case, here's the first draft: <a href="https://github.com/rust-lang/rustc-perf/pull/808">https://github.com/rust-lang/rustc-perf/pull/808</a></p>
</blockquote>
<p>thanks <span class="user-mention" data-user-id="224872">@Ryan Levick</span> :)</p>



<a name="218701196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/218701196" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#218701196">(Dec 03 2020 at 14:41)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> this is merged btw so you can link to it (<a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-12-03.md">https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-12-03.md</a>)</p>



<a name="219209677"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219209677" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219209677">(Dec 08 2020 at 14:04)</a>:</h4>
<p>okay going to try to spend an hour on triage and see how much I can get done</p>



<a name="219213634"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219213634" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219213634">(Dec 08 2020 at 14:39)</a>:</h4>
<p>okay, quiet week -- finished up</p>



<a name="219213791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219213791" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219213791">(Dec 08 2020 at 14:40)</a>:</h4>
<p>making PR to TWIR, <span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> perf is at <a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-12-08.md">https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-12-08.md</a> but we're still backlogged so we probably want to schedule something with <span class="user-mention" data-user-id="116083">@pnkfelix</span> to talk about the most productive way to process these (maybe just highlighting nags? not sure)</p>



<a name="219962937"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219962937" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219962937">(Dec 15 2020 at 11:01)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I’ll do triage today</p>



<a name="219972265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219972265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219972265">(Dec 15 2020 at 12:40)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> <span aria-label="heart" class="emoji emoji-2764" role="img" title="heart">:heart:</span> that is amazing! :)</p>



<a name="219991522"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991522" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991522">(Dec 15 2020 at 15:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm getting a 500 when generating the report:</p>
<div class="codehilite"><pre><span></span><code>Failed to make request for e99a89c7c0b6865a680a2d6169847ec8acc001d3 and 99baddb57c0a950c1af8d125dc470894ddf052a7
HTTP Error 500: Internal Server Error
URL: https://perf.rust-lang.org/perf/get
Data: could not find end commit for bound Commit(&quot;99baddb57c0a950c1af8d125dc470894ddf052a7&quot;)
</code></pre></div>



<a name="219991535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991535" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991535">(Dec 15 2020 at 15:07)</a>:</h4>
<p>Any ideas before I dive in?</p>



<a name="219991539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991539" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991539">(Dec 15 2020 at 15:08)</a>:</h4>
<p>ah yeah</p>



<a name="219991594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991594">(Dec 15 2020 at 15:08)</a>:</h4>
<p>we haven't finished that commit probably</p>



<a name="219991646"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991646" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991646">(Dec 15 2020 at 15:08)</a>:</h4>
<p>Should I just ignore the error then?</p>



<a name="219991664"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991664" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991664">(Dec 15 2020 at 15:08)</a>:</h4>
<p>so find the parent and specify that as the end instead</p>



<a name="219991699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219991699" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219991699">(Dec 15 2020 at 15:09)</a>:</h4>
<p>I think that's the implicit behavior though so yes you can likely just ignore</p>



<a name="219998226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219998226" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219998226">(Dec 15 2020 at 15:52)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> I think you forgot a link to the perf results in <a href="https://github.com/rust-lang/rust/pull/78837#issuecomment-745380762">https://github.com/rust-lang/rust/pull/78837#issuecomment-745380762</a></p>



<a name="219998359"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219998359" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219998359">(Dec 15 2020 at 15:53)</a>:</h4>
<p>Whoops! Thanks!</p>



<a name="219998933"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219998933" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219998933">(Dec 15 2020 at 15:57)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> thoughts on <a href="https://perf.rust-lang.org/compare.html?start=9eb3a7ceafd1e2c1924177caa18c7cc0c25b413e&amp;end=5bd9b60333b3dc0a51e7a5607cd1e0d537a9f718&amp;stat=instructions:u">this regression</a> caused by <a href="https://github.com/rust-lang/rust/pull/79553">this pr</a> which seems to be behind a feature flag?</p>



<a name="219999104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219999104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219999104">(Dec 15 2020 at 15:58)</a>:</h4>
<p>hm</p>



<a name="219999140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219999140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219999140">(Dec 15 2020 at 15:58)</a>:</h4>
<p>I think the changes in that PR are not really gated on the flag</p>



<a name="219999181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/219999181" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#219999181">(Dec 15 2020 at 15:58)</a>:</h4>
<p>i.e. we always collect more data just don't use it perhaps?</p>



<a name="220004169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220004169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220004169">(Dec 15 2020 at 16:27)</a>:</h4>
<p>are we sure the regressions on <a href="https://github.com/rust-lang/rust/pull/79169#issuecomment-745388674">https://github.com/rust-lang/rust/pull/79169#issuecomment-745388674</a> are real ? those tests are marked as known to have variance</p>



<a name="220004468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220004468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220004468">(Dec 15 2020 at 16:29)</a>:</h4>
<p>That's a good question. I thought that high variance meant that each individually might vary, but if all show a particular change in the same direction it's likely to be an actual issue. If that's not the case then I think we should consider removing the test, because what's the point?</p>



<a name="220007134"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220007134" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220007134">(Dec 15 2020 at 16:46)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> is there an issue open for the "stdarch expansion causing a 40% libcore compile time regression" you mentioned in last weeks report? There was a regression caused by updating the stdarch submodule this week, and I'm not sure if they're related.</p>



<a name="220007191"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220007191" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220007191">(Dec 15 2020 at 16:46)</a>:</h4>
<p>no there isn't</p>



<a name="220007404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220007404" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220007404">(Dec 15 2020 at 16:48)</a>:</h4>
<p>I assume then I should mention that issue again since I don't believe it's been addressed, right?</p>



<a name="220007536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220007536" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220007536">(Dec 15 2020 at 16:49)</a>:</h4>
<p>yes</p>



<a name="220011809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220011809" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220011809">(Dec 15 2020 at 17:19)</a>:</h4>
<p>PR is up: <a href="https://github.com/rust-lang/rustc-perf/pull/811">https://github.com/rust-lang/rustc-perf/pull/811</a></p>



<a name="220012000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220012000" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220012000">(Dec 15 2020 at 17:20)</a>:</h4>
<p>Got an update I'm pushing now</p>



<a name="220012862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220012862" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220012862">(Dec 15 2020 at 17:26)</a>:</h4>
<p>The stdarch regressions are caused by the current approach to implementing "intrinsics" with const arguments and will continue whenever new ones are added to stdarch.</p>



<a name="220013220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220013220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220013220">(Dec 15 2020 at 17:29)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/220012862">said</a>:</p>
<blockquote>
<p>The stdarch regressions are caused by the current approach to implementing "intrinsics" with const arguments and will continue whenever new ones are added to stdarch.</p>
</blockquote>
<p>that seems interesting can you elaborate here?</p>



<a name="220013258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220013258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220013258">(Dec 15 2020 at 17:29)</a>:</h4>
<p>would the impact be smaller if we used const generics?</p>



<a name="220013382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220013382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220013382">(Dec 15 2020 at 17:30)</a>:</h4>
<p><span class="user-mention silent" data-user-id="216206">lcnr</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/220013258">said</a>:</p>
<blockquote>
<p>would the impact be smaller if we used const generics?</p>
</blockquote>
<p>Yes!</p>



<a name="220013637"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220013637" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220013637">(Dec 15 2020 at 17:32)</a>:</h4>
<p>If an intrinsic requires a const argument that takes values in range 0..255, currently the implementation will contain a 256 calls to it with 256 different constant values</p>



<a name="220014553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220014553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220014553">(Dec 15 2020 at 17:38)</a>:</h4>
<p>that seems unfortunate <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<a name="220014562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220014562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220014562">(Dec 15 2020 at 17:38)</a>:</h4>
<p>can we/you switch to const generics here</p>



<a name="220014586"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220014586" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lcnr <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220014586">(Dec 15 2020 at 17:38)</a>:</h4>
<p>or is <code>min_const_generics</code> not powerful enough here?</p>



<a name="220014946"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220014946" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220014946">(Dec 15 2020 at 17:41)</a>:</h4>
<p>syntactically those are normal functions where some of arguments are required to be constants at call site</p>



<a name="220015259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220015259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220015259">(Dec 15 2020 at 17:43)</a>:</h4>
<p><span class="user-mention" data-user-id="352985">@tm</span> this sounds like this is most likely the reason for the perf regression when updating stdarch then. I'll add this to my comment on the PR.</p>



<a name="220015405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220015405" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220015405">(Dec 15 2020 at 17:44)</a>:</h4>
<p>It also _sounds_ like min_const_generics should fix this if all the const arguments are indeed numbers</p>



<a name="220017919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220017919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220017919">(Dec 15 2020 at 18:02)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> for comparison revert of previous stdarch update: <a href="https://perf.rust-lang.org/compare.html?start=74459930a951db7a68b3ecd86f3b796339e59fe5&amp;end=490cd5934a606d79cc82c5d16e4d71e0d9aa6dd5">https://perf.rust-lang.org/compare.html?start=74459930a951db7a68b3ecd86f3b796339e59fe5&amp;end=490cd5934a606d79cc82c5d16e4d71e0d9aa6dd5</a></p>



<a name="220018188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220018188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220018188">(Dec 15 2020 at 18:04)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> merged - can you post a twir link?</p>



<a name="220018318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220018318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220018318">(Dec 15 2020 at 18:05)</a>:</h4>
<p>er twir PR</p>



<a name="220023888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220023888" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220023888">(Dec 15 2020 at 18:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> small change: <a href="https://github.com/rust-lang/rustc-perf/pull/812">https://github.com/rust-lang/rustc-perf/pull/812</a></p>



<a name="220795929"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220795929" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220795929">(Dec 23 2020 at 15:00)</a>:</h4>
<p>Going to try and run triage in a bit</p>



<a name="220804831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220804831" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220804831">(Dec 23 2020 at 16:43)</a>:</h4>
<p>well - going to try to do PR review first</p>



<a name="220804853"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220804853" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220804853">(Dec 23 2020 at 16:43)</a>:</h4>
<p>but hopefully will find time today or tomorrow, don't want too much backlog to build up</p>



<a name="220871150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220871150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220871150">(Dec 24 2020 at 13:54)</a>:</h4>
<p>ok kicking off triage</p>



<a name="220872549"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220872549" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220872549">(Dec 24 2020 at 14:22)</a>:</h4>
<p>pushed initial results, filing TWIR PR</p>



<a name="220872640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220872640" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220872640">(Dec 24 2020 at 14:24)</a>:</h4>
<p>done</p>



<a name="220872650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220872650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220872650">(Dec 24 2020 at 14:24)</a>:</h4>
<p><span class="user-mention" data-user-id="116266">@Santiago Pastorino</span> <a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-12-24.md">https://github.com/rust-lang/rustc-perf/blob/master/triage/2020-12-24.md</a></p>



<a name="220874870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220874870" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220874870">(Dec 24 2020 at 15:11)</a>:</h4>
<p><a href="https://perf.rust-lang.org/compare.html?start=9310aff66c3a9d79c92f621c7f7ca3f87ea9f7de&amp;end=793931f4220297f20116d61ac1a76c74b0fa3311&amp;stat=wall-time">https://perf.rust-lang.org/compare.html?start=9310aff66c3a9d79c92f621c7f7ca3f87ea9f7de&amp;end=793931f4220297f20116d61ac1a76c74b0fa3311&amp;stat=wall-time</a><br>
recovered some of core build time regression, but it also includes 132 new intrinsics, so results are somewhat mixed  :-(</p>



<a name="220875131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220875131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220875131">(Dec 24 2020 at 15:17)</a>:</h4>
<p>Btw, up to <a href="https://perf.rust-lang.org/compare.html?start=3d10d3e49d9784ba3833ccf5d56d0a4d15bb36f6&amp;end=49b315123e6adb35024437ef7ba408456771c062&amp;stat=max-rss">13.5% reduction</a> in memory usage and positive effects on other stats from <a href="https://github.com/rust-lang/rust/issues/79589">#79589</a> this week. On large crates even--up to 250MB reduction on style-servo. Pretty happy about that, even if it only affects incremental. <span aria-label="happy" class="emoji emoji-1f600" role="img" title="happy">:happy:</span></p>



<a name="220879079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220879079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220879079">(Dec 24 2020 at 16:34)</a>:</h4>
<p><span class="user-mention" data-user-id="306073">@Tyson Nottingham</span> congratulations :D</p>



<a name="220879110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220879110" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220879110">(Dec 24 2020 at 16:34)</a>:</h4>
<p>that's awesome</p>



<a name="220976029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220976029" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220976029">(Dec 26 2020 at 19:30)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> thanks for doing this this week! I should be able to do the next one on Tuesday</p>



<a name="220976180"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/220976180" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#220976180">(Dec 26 2020 at 19:34)</a>:</h4>
<p>Ok thanks!</p>



<a name="221133056"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221133056" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221133056">(Dec 29 2020 at 13:12)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm going to do the triage report now</p>



<a name="221133078"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221133078" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221133078">(Dec 29 2020 at 13:12)</a>:</h4>
<p>Great! Feel free to ping with questions, I'm mostly around</p>



<a name="221134744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221134744" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221134744">(Dec 29 2020 at 13:39)</a>:</h4>
<p>Strange that 3 of the of "regressions" and 2 "improvements" were in coercisions-debug. Since that benchmark is marked as high variance, I didn't include them in the triage report, but I find it interesting that three of the benchmarks caused the same high variance benchmark to show as a regressions or improvements</p>



<a name="221134998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221134998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221134998">(Dec 29 2020 at 13:43)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm assuming closed PRs (like <a href="https://github.com/rust-lang/rust/pull/80209">https://github.com/rust-lang/rust/pull/80209</a>) should not be included, right?</p>



<a name="221135024"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221135024" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221135024">(Dec 29 2020 at 13:43)</a>:</h4>
<p>Yeah that benchmark is pretty noisy.</p>



<a name="221135046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221135046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221135046">(Dec 29 2020 at 13:43)</a>:</h4>
<p>It should be included</p>



<a name="221135104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221135104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221135104">(Dec 29 2020 at 13:44)</a>:</h4>
<p>I guess the squashing support in bors breaks GitHub, that's annoying :/</p>



<a name="221135370"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221135370" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221135370">(Dec 29 2020 at 13:48)</a>:</h4>
<p>ah I see, it was merged by bors</p>



<a name="221136055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136055">(Dec 29 2020 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> any nags you know about? Nothing new needs to be followed up on and I re-added the stdarch nag as I believe that's still an issue.</p>



<a name="221136067"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136067" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136067">(Dec 29 2020 at 14:01)</a>:</h4>
<p>No I don't think so, yeah no progress on stdarch</p>



<a name="221136075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136075">(Dec 29 2020 at 14:01)</a>:</h4>
<p>I must've forgotten to copy it last week</p>



<a name="221136218"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136218" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136218">(Dec 29 2020 at 14:03)</a>:</h4>
<p>Ah no you didn't. No need to worry</p>



<a name="221136468"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136468" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136468">(Dec 29 2020 at 14:06)</a>:</h4>
<p>The build times of core / stdarch have been reduced by 9%, but fundamental issues with current implementation are still there.</p>



<a name="221136489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136489" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136489">(Dec 29 2020 at 14:07)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <a href="https://github.com/rust-lang/rustc-perf/pull/814">https://github.com/rust-lang/rustc-perf/pull/814</a></p>



<a name="221136569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221136569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221136569">(Dec 29 2020 at 14:09)</a>:</h4>
<p>Merged, if you can file a TWIR PR that would be great</p>



<a name="221645318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221645318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221645318">(Jan 05 2021 at 13:26)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> is there a chance you can do perf triage this week? If not I can likely find time this morning.</p>



<a name="221645352"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221645352" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221645352">(Jan 05 2021 at 13:26)</a>:</h4>
<p>Yep I can do it in ~30 minutes</p>



<a name="221647155"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647155" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647155">(Jan 05 2021 at 13:46)</a>:</h4>
<p>Great, thanks!</p>



<a name="221647410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647410" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647410">(Jan 05 2021 at 13:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> started looking into. FYI: the coercions-debug benchmark is really acting up. there are 6 regressions this week all of which only show ~1% regression on that benchmark which is marked as volatile</p>



<a name="221647507"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647507" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647507">(Jan 05 2021 at 13:50)</a>:</h4>
<p>Hm, ok. Let me see if they're noise on the graph I guess</p>



<a name="221647726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647726">(Jan 05 2021 at 13:52)</a>:</h4>
<p><a href="/user_uploads/4715/oANuXkqkZDh3hswdPByHcriF/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/oANuXkqkZDh3hswdPByHcriF/image.png" title="image.png"><img src="/user_uploads/4715/oANuXkqkZDh3hswdPByHcriF/image.png"></a></div>



<a name="221647796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647796" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647796">(Jan 05 2021 at 13:53)</a>:</h4>
<p>seems like noise to me...</p>



<a name="221647802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647802">(Jan 05 2021 at 13:53)</a>:</h4>
<p>yeah so looks like there was an improvement on incr patched/unchanged builds</p>



<a name="221647808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647808" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647808">(Jan 05 2021 at 13:53)</a>:</h4>
<p>but everything else looks like noise to me, largely</p>



<a name="221647952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647952" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647952">(Jan 05 2021 at 13:55)</a>:</h4>
<p>we should probably try to compare cachegrind diff or something, there's probably some nondeterminism in the compiler</p>



<a name="221647958"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647958" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647958">(Jan 05 2021 at 13:55)</a>:</h4>
<p><a href="/user_uploads/4715/r1QfCNDngeCoZZr59u9mcIO_/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/r1QfCNDngeCoZZr59u9mcIO_/image.png" title="image.png"><img src="/user_uploads/4715/r1QfCNDngeCoZZr59u9mcIO_/image.png"></a></div>



<a name="221647964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221647964" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221647964">(Jan 05 2021 at 13:55)</a>:</h4>
<p>seems to have been quite noisy for a while</p>



<a name="221649844"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221649844" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221649844">(Jan 05 2021 at 14:14)</a>:</h4>
<p>(I'll file an issue on this)</p>



<a name="221651882"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221651882" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221651882">(Jan 05 2021 at 14:33)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/issues/818">https://github.com/rust-lang/rustc-perf/issues/818</a></p>



<a name="221654200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221654200" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221654200">(Jan 05 2021 at 14:51)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> what's your preferred way of trying to figure out which PR in a rollup is most likely the cause of a perf regression? I see a few in here that could be to blame: <a href="https://github.com/rust-lang/rust/pull/80708">https://github.com/rust-lang/rust/pull/80708</a></p>



<a name="221657856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221657856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221657856">(Jan 05 2021 at 15:18)</a>:</h4>
<p>oh I got completely distracted sorry</p>



<a name="221657887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221657887" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221657887">(Jan 05 2021 at 15:18)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@Ryan Levick</span> what is the perf compare link?</p>



<a name="221657904"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221657904" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221657904">(Jan 05 2021 at 15:19)</a>:</h4>
<p>I usually can better judge knowing what regressed</p>



<a name="221657995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221657995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221657995">(Jan 05 2021 at 15:19)</a>:</h4>
<p><a href="https://perf.rust-lang.org/compare.html?start=9919ad6e9ed113557c68c430de2e0f434e4f5b6e&amp;end=f412fb56b8d11c168e7ee49ee74e79c4ab2e5637&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=9919ad6e9ed113557c68c430de2e0f434e4f5b6e&amp;end=f412fb56b8d11c168e7ee49ee74e79c4ab2e5637&amp;stat=instructions:u</a></p>



<a name="221658033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658033">(Jan 05 2021 at 15:19)</a>:</h4>
<p>Its mixed</p>



<a name="221658282"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658282" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658282">(Jan 05 2021 at 15:21)</a>:</h4>
<p>m</p>



<a name="221658341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658341">(Jan 05 2021 at 15:22)</a>:</h4>
<p>I think it's basically just a regression, I would ignore the incr improvements</p>



<a name="221658609"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658609" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658609">(Jan 05 2021 at 15:24)</a>:</h4>
<p>I am honestly not seeing anything relevant</p>



<a name="221658624"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658624" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658624">(Jan 05 2021 at 15:24)</a>:</h4>
<p>it's not the largest regression</p>



<a name="221658679"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658679" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658679">(Jan 05 2021 at 15:25)</a>:</h4>
<p>I think I'd suspect  make sure that promoteds which fail to evaluate in dead const code behave correctly <a href="https://github.com/rust-lang/rust/issues/80696">#80696</a></p>



<a name="221658724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658724" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658724">(Jan 05 2021 at 15:25)</a>:</h4>
<p>that was my first guess, but it is just a test case</p>



<a name="221658960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221658960" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221658960">(Jan 05 2021 at 15:27)</a>:</h4>
<p>Why would you ignore the improvements? 1% is small, but it's still something, no?</p>



<a name="221659065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659065">(Jan 05 2021 at 15:28)</a>:</h4>
<p>Yea I'm not sure why a test case would cause a regression...</p>



<a name="221659126"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659126" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659126">(Jan 05 2021 at 15:28)</a>:</h4>
<p>oh I missed that it was a test case</p>



<a name="221659170"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659170" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659170">(Jan 05 2021 at 15:29)</a>:</h4>
<p>I'm saying that improvements in incremental are likely for a different reason than the regression  on async</p>



<a name="221659239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659239" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659239">(Jan 05 2021 at 15:29)</a>:</h4>
<p>What about <a href="https://github.com/rust-lang/rust/pull/80637">https://github.com/rust-lang/rust/pull/80637</a></p>



<a name="221659341"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659341" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659341">(Jan 05 2021 at 15:30)</a>:</h4>
<p>I initially concluded that would only run on error</p>



<a name="221659354"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659354" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659354">(Jan 05 2021 at 15:30)</a>:</h4>
<p>but maybe the module path is misleading</p>



<a name="221659434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659434" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659434">(Jan 05 2021 at 15:31)</a>:</h4>
<p>Move variable into the only branch where it is relevant <a href="https://github.com/rust-lang/rust/issues/80643">#80643</a>  seems potentially more likely, but that is in metadata decode and async has no deps so seems unlikely</p>



<a name="221659461"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659461" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659461">(Jan 05 2021 at 15:31)</a>:</h4>
<p>I think benchmarking a revert of 80637 is probably our best bet</p>



<a name="221659630"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659630" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659630">(Jan 05 2021 at 15:33)</a>:</h4>
<p>Should I just push a PR with a revert?</p>



<a name="221659747"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659747" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659747">(Jan 05 2021 at 15:33)</a>:</h4>
<p>sure, or can be done separately from triage</p>



<a name="221659793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659793" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659793">(Jan 05 2021 at 15:34)</a>:</h4>
<p>feel free to just leave a nag</p>



<a name="221659836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659836" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659836">(Jan 05 2021 at 15:34)</a>:</h4>
<p>I'll do it once I push the triage</p>



<a name="221659995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221659995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221659995">(Jan 05 2021 at 15:35)</a>:</h4>
<p>FYI: there was another rollup (<a href="https://github.com/rust-lang/rust/issues/80530">https://github.com/rust-lang/rust/issues/80530</a>) which had a mixed perf impact: <a href="https://perf.rust-lang.org/compare.html?start=e2267046859c9ceb932abc983561d53a117089f6&amp;end=9775ffef2a4c3a36cadb58b72ea60cefb92c86ae&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=e2267046859c9ceb932abc983561d53a117089f6&amp;end=9775ffef2a4c3a36cadb58b72ea60cefb92c86ae&amp;stat=instructions:u</a></p>



<a name="221660009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221660009" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221660009">(Jan 05 2021 at 15:35)</a>:</h4>
<p>Going to look into it now</p>



<a name="221660136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221660136" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221660136">(Jan 05 2021 at 15:36)</a>:</h4>
<p>i'd guess <a href="https://github.com/rust-lang/rust/pull/80458">https://github.com/rust-lang/rust/pull/80458</a></p>



<a name="221660230"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221660230" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221660230">(Jan 05 2021 at 15:37)</a>:</h4>
<p>Yea that's my guess as well</p>



<a name="221660891"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221660891" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221660891">(Jan 05 2021 at 15:42)</a>:</h4>
<p>I will be in meetings for a few hours starting in ~20 minutes, but should merge later today. feel free to merge/push the triage report without me - I think you should have rights.</p>



<a name="221661029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221661029" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221661029">(Jan 05 2021 at 15:43)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/pull/820">https://github.com/rust-lang/rustc-perf/pull/820</a></p>



<a name="221664473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221664473" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221664473">(Jan 05 2021 at 16:08)</a>:</h4>
<p>Here are the reverts: <a href="https://github.com/rust-lang/rust/pull/80727">https://github.com/rust-lang/rust/pull/80727</a> <a href="https://github.com/rust-lang/rust/pull/80728">https://github.com/rust-lang/rust/pull/80728</a></p>



<a name="221925382"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221925382" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221925382">(Jan 07 2021 at 10:23)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> neither of the reverts had any effect on perf. I suppose we need to find new possibilities for the perf impact inside the rollups.</p>



<a name="221936152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221936152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221936152">(Jan 07 2021 at 12:32)</a>:</h4>
<p>Seems right. Might be worth trying to revert rollup itself, to make sure it's not noise.</p>



<a name="221956383"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221956383" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LingM <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221956383">(Jan 07 2021 at 15:36)</a>:</h4>
<p>@<strong>Ryan Levick</strong> for <a href="https://github.com/rust-lang/rust/pull/80708">https://github.com/rust-lang/rust/pull/80708</a> there's really only two candidates left. <a href="https://github.com/rust-lang/rust/pull/80538">https://github.com/rust-lang/rust/pull/80538</a> and <a href="https://github.com/rust-lang/rust/pull/80643">https://github.com/rust-lang/rust/pull/80643</a>. the rest are just comment/x.py/bootstrap/test changes or already benchmarked.<br>
80643 effectively only removes code so I fail to see how it could regress anything.<br>
if @<strong>simulacrum</strong> is correct that the regression and the improvement are caused by different PRs, 80538 is probably the regression and 80643 the improvement.</p>



<a name="221957055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221957055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221957055">(Jan 07 2021 at 15:41)</a>:</h4>
<p><span class="user-mention" data-user-id="296422">@LingM</span> awesome! Your analysis sounds good to me. I can kick off a revert of <a href="https://github.com/rust-lang/rust/issues/80538">#80538</a> to see if it improves the perf</p>



<a name="221960102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221960102" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LingM <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221960102">(Jan 07 2021 at 16:03)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> and for <a href="https://github.com/rust-lang/rust/pull/80530">https://github.com/rust-lang/rust/pull/80530</a> there's three candidates based on the same criteria.<br>
<a href="https://github.com/rust-lang/rust/pull/80488">https://github.com/rust-lang/rust/pull/80488</a><br>
<a href="https://github.com/rust-lang/rust/pull/80491">https://github.com/rust-lang/rust/pull/80491</a><br>
<a href="https://github.com/rust-lang/rust/pull/78934">https://github.com/rust-lang/rust/pull/78934</a> &lt;- moves a bunch of stuff into their own files, so <del>probably (hopefully) no</del> maybe an effect.</p>



<a name="221960186"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221960186" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221960186">(Jan 07 2021 at 16:03)</a>:</h4>
<p>moving can definitely have a big effect</p>



<a name="221960568"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221960568" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> LingM <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221960568">(Jan 07 2021 at 16:06)</a>:</h4>
<p>fixed &gt;&lt;</p>



<a name="221960736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/221960736" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#221960736">(Jan 07 2021 at 16:07)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/221960186">said</a>:</p>
<blockquote>
<p>moving can definitely have a big effect</p>
</blockquote>
<p>Indeed, we've had several perf gains and losses due to code simply moving around</p>



<a name="222056159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222056159" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222056159">(Jan 08 2021 at 10:21)</a>:</h4>
<p>So it looks like <a href="https://github.com/rust-lang/rust/issues/80538">#80538</a> was indeed responsible for the regression as <a href="https://github.com/rust-lang/rust/pull/80798">you can see here</a>. Im going to open a revert for 78934 to see if that was the cause of <a href="https://github.com/rust-lang/rust/issues/80530">#80530</a></p>



<a name="222093396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222093396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222093396">(Jan 08 2021 at 16:32)</a>:</h4>
<p>Looks like <a href="https://github.com/rust-lang/rust/issues/78934">#78934</a> was indeed the cause of the perf regressions in <a href="https://github.com/rust-lang/rust/issues/80530">#80530</a>.</p>



<a name="222093599"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222093599" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222093599">(Jan 08 2021 at 16:33)</a>:</h4>
<p>I've closed the two revert PRs since I don't think either are bad enough to warrant actually reverting the changes.</p>



<a name="222094133"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222094133" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222094133">(Jan 08 2021 at 16:38)</a>:</h4>
<p>yep that sounds right to me</p>



<a name="222094152"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222094152" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222094152">(Jan 08 2021 at 16:38)</a>:</h4>
<p>if you could update the triage report with the info that'd be amazing</p>



<a name="222095049"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222095049" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222095049">(Jan 08 2021 at 16:46)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/pull/822">https://github.com/rust-lang/rustc-perf/pull/822</a></p>



<a name="222427242"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222427242" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222427242">(Jan 12 2021 at 13:08)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> hey! wanted to check in and see if you can do triage this week; it's been on you for a while so just let me know if you get tired of it :)</p>



<a name="222429396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222429396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222429396">(Jan 12 2021 at 13:23)</a>:</h4>
<p>Yes I can do it <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span></p>



<a name="222445258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222445258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222445258">(Jan 12 2021 at 15:20)</a>:</h4>
<p>It takes place here, right? I’d like to try to watch today</p>



<a name="222445523"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222445523" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222445523">(Jan 12 2021 at 15:21)</a>:</h4>
<p>it's not really a more than one person process mostly, but yes, this is where we do it in general</p>



<a name="222447449"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447449" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447449">(Jan 12 2021 at 15:33)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> happy to answer any questions. I'm doing it now. I've only been doing it for the best ~4 times so I like to ask <span class="user-mention" data-user-id="116122">@simulacrum</span> for feedback on some judgement calls</p>



<a name="222447553"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447553" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447553">(Jan 12 2021 at 15:34)</a>:</h4>
<p>Speaking of which: <span class="user-mention" data-user-id="116122">@simulacrum</span> how would you classify <a href="https://perf.rust-lang.org/compare.html?start=6184f23950fb4aa14884ce310d948dc6fca269a3&amp;end=f30733adb9150a9b965a6af1650d5213bec8ddf6&amp;stat=instructions:u">this</a>? As a mixed or as an improvement?</p>



<a name="222447769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447769">(Jan 12 2021 at 15:35)</a>:</h4>
<p>mixed</p>



<a name="222447803"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447803" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447803">(Jan 12 2021 at 15:35)</a>:</h4>
<p>but only on incremental, clean perf improved</p>



<a name="222447843"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447843" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447843">(Jan 12 2021 at 15:35)</a>:</h4>
<p>er, "Full" perf that is</p>



<a name="222447856"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447856" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447856">(Jan 12 2021 at 15:35)</a>:</h4>
<p>across the board</p>



<a name="222447923"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222447923" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222447923">(Jan 12 2021 at 15:36)</a>:</h4>
<p>I also tend to weigh averages more heavily than regressions in max. Do you do the same?</p>



<a name="222448089"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448089" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448089">(Jan 12 2021 at 15:37)</a>:</h4>
<p>huh, no, I don't think so, though not sure I am parsing correctly</p>



<a name="222448124"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448124" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448124">(Jan 12 2021 at 15:37)</a>:</h4>
<p>can someone remind me how the rows are sorted in those compare.html links? I’m staring at all four columns and don’t see which one is acting as the key for the sort</p>



<a name="222448127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448127" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448127">(Jan 12 2021 at 15:37)</a>:</h4>
<p>I pretty much only look at the max and min columns</p>



<a name="222448212"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448212" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448212">(Jan 12 2021 at 15:38)</a>:</h4>
<p>max, but absolute value of it, is the sort key</p>



<a name="222448255"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448255" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448255">(Jan 12 2021 at 15:38)</a>:</h4>
<p>hm or that is what I thought</p>



<a name="222448270"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448270" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448270">(Jan 12 2021 at 15:38)</a>:</h4>
<p>but it does not appear true lower down</p>



<a name="222448318"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448318" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448318">(Jan 12 2021 at 15:39)</a>:</h4>
<p>maybe max of abs of min <em>and</em> max values?</p>



<a name="222448430"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448430" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448430">(Jan 12 2021 at 15:39)</a>:</h4>
<p>aha, ok, by the max of the absolute percentages under the header</p>



<a name="222448510"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448510" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448510">(Jan 12 2021 at 15:40)</a>:</h4>
<p>so "largest change first"</p>



<a name="222448605"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448605" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448605">(Jan 12 2021 at 15:40)</a>:</h4>
<p>ah yes okay. Makes sense.</p>



<a name="222448899"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222448899" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222448899">(Jan 12 2021 at 15:42)</a>:</h4>
<p>FYI since folks are followingg along: I'm trying to figure out what might have caused <a href="https://perf.rust-lang.org/compare.html?start=7a193921a024e910262ff90bfb028074fddf20d0&amp;end=34628e5b533d35840b61c5db0665cf7633ed3c5a&amp;stat=instructions:u">this minor regression</a>) in this <a href="https://github.com/rust-lang/rust/pull/80867">rollup</a></p>



<a name="222449046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449046" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449046">(Jan 12 2021 at 15:43)</a>:</h4>
<p>wow those all do look innocuous</p>



<a name="222449258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449258" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449258">(Jan 12 2021 at 15:44)</a>:</h4>
<p>Yea this one is tough</p>



<a name="222449428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449428" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449428">(Jan 12 2021 at 15:45)</a>:</h4>
<p>my guess is <a href="https://github.com/rust-lang/rust/pull/79968/">https://github.com/rust-lang/rust/pull/79968/</a>, leading to more versions of that function</p>



<a name="222449486"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449486" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449486">(Jan 12 2021 at 15:46)</a>:</h4>
<p>and potentially less merging (i.e. CGU changes strike again)</p>



<a name="222449582"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449582" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449582">(Jan 12 2021 at 15:46)</a>:</h4>
<p>Yea that's my guess as well. The only other one that really does anything is <a href="https://github.com/rust-lang/rust/issues/80801">#80801</a> which I don't think would do it</p>



<a name="222449665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449665" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449665">(Jan 12 2021 at 15:47)</a>:</h4>
<p>it's worth noting a slight increase in impl_trait_ref executions on syn-opt, not sure what caused that yet though</p>



<a name="222449695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449695" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449695">(Jan 12 2021 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> hmm. Should we be gathering data on CGU (counts, reuse maybe) as part of these builds?</p>



<a name="222449707"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449707" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449707">(Jan 12 2021 at 15:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> yeah, probably should be</p>



<a name="222449722"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449722" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449722">(Jan 12 2021 at 15:48)</a>:</h4>
<p>Actually I think it might be the from impls - there's 2 added</p>



<a name="222449764"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449764" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449764">(Jan 12 2021 at 15:48)</a>:</h4>
<p>it might help inform discussions like that, but it also would be  potentially tricky to add it to the perf’s output</p>



<a name="222449769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449769" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449769">(Jan 12 2021 at 15:48)</a>:</h4>
<p>and that matches the new queries (2 more impl trait ref)</p>



<a name="222449851"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449851" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449851">(Jan 12 2021 at 15:48)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/222449665">said</a>:</p>
<blockquote>
<p>it's worth noting a slight increase in impl_trait_ref executions on syn-opt, not sure what caused that yet though</p>
</blockquote>
<p>Hmm I hadn't looked at that since it's marked as volatile, but I can make a note</p>



<a name="222449858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449858" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449858">(Jan 12 2021 at 15:48)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> we can add a -Z flag or whatever, and dump it to stdout in perf stat format and it'll just get tracked as a statistic automatically</p>



<a name="222449944"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449944" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449944">(Jan 12 2021 at 15:49)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/222449695">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> hmm. Should we be gathering data on CGU (counts, reuse maybe) as part of these builds?</p>
</blockquote>
<p>What is CGU?</p>



<a name="222449971"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449971" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449971">(Jan 12 2021 at 15:49)</a>:</h4>
<p>but yeah looking at self-profile info this looks like slightly different cgu layout (codegen unit)</p>



<a name="222449998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222449998" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222449998">(Jan 12 2021 at 15:49)</a>:</h4>
<p>all of the benchmarks show slight bumps in time spent on lto</p>



<a name="222450014"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450014" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450014">(Jan 12 2021 at 15:49)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> code-gen-unit.</p>



<a name="222450026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450026">(Jan 12 2021 at 15:49)</a>:</h4>
<p>Its the unit of compilation inside LLVM</p>



<a name="222450106"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450106" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450106">(Jan 12 2021 at 15:50)</a>:</h4>
<p>e.g., <a href="https://perf.rust-lang.org/detailed-query.html?commit=34628e5b533d35840b61c5db0665cf7633ed3c5a&amp;base_commit=7a193921a024e910262ff90bfb028074fddf20d0&amp;benchmark=cargo-opt&amp;run_name=incr-patched:%20println">https://perf.rust-lang.org/detailed-query.html?commit=34628e5b533d35840b61c5db0665cf7633ed3c5a&amp;base_commit=7a193921a024e910262ff90bfb028074fddf20d0&amp;benchmark=cargo-opt&amp;run_name=incr-patched:%20println</a></p>



<a name="222450144"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450144" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450144">(Jan 12 2021 at 15:50)</a>:</h4>
<p>its how we fragment code that we feed into LLVM, for both parallel compilation purposes as well as incremental compilation.</p>



<a name="222450594"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450594" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450594">(Jan 12 2021 at 15:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/222449665">said</a>:</p>
<blockquote>
<p>it's worth noting a slight increase in impl_trait_ref executions on syn-opt, not sure what caused that yet though</p>
</blockquote>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> actually I'm not seeing this. The numbers seem roughly the same</p>



<a name="222450648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450648" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450648">(Jan 12 2021 at 15:53)</a>:</h4>
<p>well, they should be entirely deterministic?</p>



<a name="222450774"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222450774" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222450774">(Jan 12 2021 at 15:54)</a>:</h4>
<p><a href="https://perf.rust-lang.org/detailed-query.html?sort_idx=-5&amp;commit=34628e5b533d35840b61c5db0665cf7633ed3c5a&amp;base_commit=7a193921a024e910262ff90bfb028074fddf20d0&amp;benchmark=syn-opt&amp;run_name=incr-full">https://perf.rust-lang.org/detailed-query.html?sort_idx=-5&amp;commit=34628e5b533d35840b61c5db0665cf7633ed3c5a&amp;base_commit=7a193921a024e910262ff90bfb028074fddf20d0&amp;benchmark=syn-opt&amp;run_name=incr-full</a></p>



<a name="222451221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222451221" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222451221">(Jan 12 2021 at 15:57)</a>:</h4>
<p>Yes that's true. I'm just not sure investigating why it increased by such a small amount is a worth looking into. Could you explain your thought process there a bit more so I can look out for such things</p>



<a name="222451560"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222451560" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222451560">(Jan 12 2021 at 15:59)</a>:</h4>
<p>ah, it's not notable in and of itself</p>



<a name="222451574"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222451574" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222451574">(Jan 12 2021 at 15:59)</a>:</h4>
<p>it just hints at what the regression was caused by</p>



<a name="222451788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222451788" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222451788">(Jan 12 2021 at 16:01)</a>:</h4>
<p>in particular, in this case, the query is impl trait ref, which IIRC is basically "what trait is implemented by a particular impl"</p>



<a name="222452153"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222452153" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222452153">(Jan 12 2021 at 16:03)</a>:</h4>
<p>Ah got you - yes useful for trying to determine the root cause. <span aria-label="+1" class="emoji emoji-1f44d" role="img" title="+1">:+1:</span></p>



<a name="222455346"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222455346" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222455346">(Jan 12 2021 at 16:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm a bit confused by <a href="https://github.com/rust-lang/rust/issues/80441">https://github.com/rust-lang/rust/issues/80441</a>. It's labeled as addressing the perf regressions introduced <a href="https://perf.rust-lang.org/compare.html?start=1cc410710993d036730c11556039e40109f6ab41&amp;end=58d2bad9f7ab0971495247b6c94978848760ca9d&amp;stat=instructions:u">here</a> but the in the <a href="https://perf.rust-lang.org/compare.html?start=6184f23950fb4aa14884ce310d948dc6fca269a3&amp;end=f30733adb9150a9b965a6af1650d5213bec8ddf6&amp;stat=instructions:u">results</a> don't look like they improve the previously regressed benchmarks.</p>



<a name="222455508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222455508" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222455508">(Jan 12 2021 at 16:23)</a>:</h4>
<p>The original PR in question is <a href="https://github.com/rust-lang/rust/pull/78837">https://github.com/rust-lang/rust/pull/78837</a></p>



<a name="222455551"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222455551" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222455551">(Jan 12 2021 at 16:24)</a>:</h4>
<p>I looked more deeply into which queries seemed effected and there doesn't seem to be a relation.</p>



<a name="222455650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222455650" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222455650">(Jan 12 2021 at 16:24)</a>:</h4>
<p>Shall I ask petrochenkov for a clarification?</p>



<a name="222456264"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456264" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456264">(Jan 12 2021 at 16:28)</a>:</h4>
<p>Seems like petrochenkov may have improved performance elsewhere but the original regression persists? That’s not a bad thing in itself.</p>



<a name="222456353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456353" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456353">(Jan 12 2021 at 16:28)</a>:</h4>
<p>Well the performance impact seems to be mixed.</p>



<a name="222456401"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456401" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456401">(Jan 12 2021 at 16:29)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/78837#issuecomment-751844338">They previously</a> stated that it recovers some of the performance.</p>



<a name="222456413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456413">(Jan 12 2021 at 16:29)</a>:</h4>
<p>Oh its mixed? Let me look again.</p>



<a name="222456496"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456496" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456496">(Jan 12 2021 at 16:29)</a>:</h4>
<p>It seems to be helping incremental in some benches and hurting it in others</p>



<a name="222456572"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456572" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456572">(Jan 12 2021 at 16:30)</a>:</h4>
<p>The <a href="https://perf.rust-lang.org/compare.html?start=76aca6659a0eb3f5696541d0be518530cabdd963&amp;end=e3c34b4b68e99fdff4c3f40e35e9df57d62b0085">perf run on the PR itself</a> seemed uniformly good.</p>



<a name="222456979"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222456979" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222456979">(Jan 12 2021 at 16:32)</a>:</h4>
<p>but the perf results on the PR itself seem <em>quite</em> different from what rylev <a href="https://perf.rust-lang.org/compare.html?start=6184f23950fb4aa14884ce310d948dc6fca269a3&amp;end=f30733adb9150a9b965a6af1650d5213bec8ddf6&amp;stat=instructions:u">linked above</a></p>



<a name="222457079"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222457079" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222457079">(Jan 12 2021 at 16:33)</a>:</h4>
<p>Ah interesting. I'm guessing this PR negates some gains from another change which snuck in after the perf run?</p>



<a name="222457097"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222457097" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222457097">(Jan 12 2021 at 16:33)</a>:</h4>
<p>yeah that seems right</p>



<a name="222457216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222457216" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222457216">(Jan 12 2021 at 16:34)</a>:</h4>
<p>Definitely seems worth it to point out that the gains seen in the orginal PR don't seem to address the original issue <em>and</em> that a subsequent run exposed some performance problems</p>



<a name="222457413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222457413" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222457413">(Jan 12 2021 at 16:35)</a>:</h4>
<p>yes, I think leaving a comment would be good</p>



<a name="222459081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222459081" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222459081">(Jan 12 2021 at 16:47)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/pull/824">https://github.com/rust-lang/rustc-perf/pull/824</a></p>



<a name="222459562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222459562" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222459562">(Jan 12 2021 at 16:49)</a>:</h4>
<p>thanks! merged, don't forget twir</p>



<a name="222463432"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222463432" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222463432">(Jan 12 2021 at 17:11)</a>:</h4>
<p>The <a href="https://github.com/rust-lang/rust/issues/80867">#80867</a> also increased the size of rustc + rust-std components by ~10MB (in top 7 based on data since 2020-07-14).</p>



<a name="222463552"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222463552" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222463552">(Jan 12 2021 at 17:11)</a>:</h4>
<p><span class="user-mention silent" data-user-id="352985">tm</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/222463432">said</a>:</p>
<blockquote>
<p>The <a href="https://github.com/rust-lang/rust/issues/80928">#80928</a> also increased the size of rustc + rust-std components by ~10MB (in top 7 based on data since 2020-07-14).</p>
</blockquote>
<p>which component increased? rustc or rust-std?</p>



<a name="222463761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222463761" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222463761">(Jan 12 2021 at 17:13)</a>:</h4>
<p>the only thing that looks relevant is <a href="https://github.com/rust-lang/rust/pull/80870">https://github.com/rust-lang/rust/pull/80870</a></p>



<a name="222463802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222463802" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222463802">(Jan 12 2021 at 17:13)</a>:</h4>
<p>rustc_target isn't called much I think, but I could be wrong: <a href="https://github.com/rust-lang/rust/pull/80042">https://github.com/rust-lang/rust/pull/80042</a></p>



<a name="222463988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222463988" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222463988">(Jan 12 2021 at 17:14)</a>:</h4>
<p>sorry, I miscopied the PR number, it was the one with debuginfo changes: <a href="https://github.com/rust-lang/rust/issues/80867">#80867</a></p>



<a name="222464274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222464274" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222464274">(Jan 12 2021 at 17:16)</a>:</h4>
<p>the names are now much longer so the general outcome is probably expected</p>



<a name="222466319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222466319" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222466319">(Jan 12 2021 at 17:31)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage/near/222463761">said</a>:</p>
<blockquote>
<p>the only thing that looks relevant is <a href="https://github.com/rust-lang/rust/pull/80870">https://github.com/rust-lang/rust/pull/80870</a></p>
</blockquote>
<p>Yeah, this is probably my fault. <code>-Zsymbol-mangling-scheme=v0</code> will likely be much worse than this though due to even longer symbol names.</p>



<a name="222467265"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222467265" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> tm <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222467265">(Jan 12 2021 at 17:38)</a>:</h4>
<p>That being said, the readable names for drop_in_place was always something I wish I had.</p>



<a name="222493316"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222493316" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222493316">(Jan 12 2021 at 20:57)</a>:</h4>
<p>For anyone interested in the memory usage situation, here are the <a href="https://perf.rust-lang.org/compare.html?start=467f5e99a541db94235f0c173bdffc8aeb177522&amp;end=8234db5bc7b122dd9e39d738c30bcae005a96568&amp;stat=max-rss">improvements</a> from <a href="https://github.com/rust-lang/rust/issues/80463">#80463</a>, alluded to in the triage report.</p>



<a name="222494075"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222494075" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222494075">(Jan 12 2021 at 21:03)</a>:</h4>
<p>Sorry for the self-promotion, but I'm sure there are some people who will be glad to see the situation is improving. <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="222496691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222496691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222496691">(Jan 12 2021 at 21:25)</a>:</h4>
<p>We should link to this in the report. Can someone send a PR? I unfortunately won’t be able to get to it today</p>



<a name="222505277"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222505277" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222505277">(Jan 12 2021 at 22:30)</a>:</h4>
<p>yes, I can send a PR</p>



<a name="222505364"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222505364" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222505364">(Jan 12 2021 at 22:31)</a>:</h4>
<p>oh it's in the report already actually</p>



<a name="222505411"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222505411" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222505411">(Jan 12 2021 at 22:32)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/blob/master/triage/2021-01-12.md#mixed">https://github.com/rust-lang/rustc-perf/blob/master/triage/2021-01-12.md#mixed</a></p>



<a name="222551516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222551516" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222551516">(Jan 13 2021 at 08:59)</a>:</h4>
<p>The instruction count perf was linked to but not the memory consumption improvements. I'll send a PR</p>



<a name="222551847"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/222551847" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#222551847">(Jan 13 2021 at 09:02)</a>:</h4>
<p><a href="https://github.com/rust-lang/rustc-perf/pull/826">https://github.com/rust-lang/rustc-perf/pull/826</a></p>



<a name="223237537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223237537" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223237537">(Jan 19 2021 at 14:59)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> would be great to do perf triage, I unfortunately am pretty booked this week so not sure I will get to it</p>



<a name="223247894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223247894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223247894">(Jan 19 2021 at 16:03)</a>:</h4>
<p>I won't be able to today, but I can do it tomorrow</p>



<a name="223254737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223254737" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223254737">(Jan 19 2021 at 16:49)</a>:</h4>
<p>ok that works</p>



<a name="223367111"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223367111" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223367111">(Jan 20 2021 at 12:39)</a>:</h4>
<p>(FYI I've started the triage - it's a big one this week)</p>



<a name="223367220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223367220" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223367220">(Jan 20 2021 at 12:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <a href="https://github.com/rust-lang/rust/issues/78407">#78407</a> has _very_ big perf regression in <a href="https://perf.rust-lang.org/compare.html?start=497c9a256b1c2961e91565ccc6e0dd3a87a031ed&amp;end=704e47f78b4c8801a3c76f235a5a152e1b60b300&amp;stat=instructions:u">instruction counts</a>. This was expected but is still very large that I think I'd like to see a better justification written for why it's acceptable. Is that something we can ask for in these cases?</p>



<a name="223367376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223367376" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223367376">(Jan 20 2021 at 12:42)</a>:</h4>
<p>I think we can but I don't think it's necessary in this case. The ctfe stress test is unique in showing such a large impact here I expect</p>



<a name="223367396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223367396" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223367396">(Jan 20 2021 at 12:43)</a>:</h4>
<p>everything else is mostly either improvements or regressions, but not major enough to back this out I think</p>



<a name="223367426"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223367426" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223367426">(Jan 20 2021 at 12:43)</a>:</h4>
<p>the justification is expanding const fn to allow checking ub, and that seems like something we definitely want</p>



<a name="223368026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223368026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223368026">(Jan 20 2021 at 12:50)</a>:</h4>
<p>That's fair. I guess it's more a point of order. It would be nice if the perf team was proactively involved in such cases. Most of the time people have compiler perf in mind but it'd be nice to know the team responsible for it was made aware.</p>



<a name="223368569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223368569" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223368569">(Jan 20 2021 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> am I understanding the automated regression tester that it wants an entire rollup and attempts to run tests on the entire rollup. We don't have a way to point to a specific PR (within the rollup), revert the PR and run perf on it?</p>



<a name="223368614"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223368614" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223368614">(Jan 20 2021 at 12:57)</a>:</h4>
<p>ah, no, it does target a specific PR</p>



<a name="223368691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223368691" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223368691">(Jan 20 2021 at 12:58)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/74678">https://github.com/rust-lang/rust/pull/74678</a></p>



<a name="223368894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223368894" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223368894">(Jan 20 2021 at 12:59)</a>:</h4>
<p>it isn't quite perfect - e.g. comparison url needs manual work at least - and I think there may be a bug with the revert where it doesn't revert quite fully - the "head" of the rollup might be embedded, but overall this should work well. If we start using it ironing out the bugs should not be too hard.</p>



<a name="223373654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223373654" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223373654">(Jan 20 2021 at 13:46)</a>:</h4>
<p>Awesome! <a href="https://github.com/rust-lang/rust/pull/81207">https://github.com/rust-lang/rust/pull/81207</a></p>



<a name="223375919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223375919" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223375919">(Jan 20 2021 at 14:05)</a>:</h4>
<p>Any thoughts on which PR is responsible for the perf regressions in <a href="https://github.com/rust-lang/rust/issues/81113">https://github.com/rust-lang/rust/issues/81113</a>?<br>
They seem to be in the <code>expand_crate</code> function. my first guess was <a href="https://github.com/rust-lang/rust/issues/80031">#80031</a></p>



<a name="223375996"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223375996" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223375996">(Jan 20 2021 at 14:05)</a>:</h4>
<p>First draft of the triage report is up: <a href="https://github.com/rust-lang/rustc-perf/pull/827">https://github.com/rust-lang/rustc-perf/pull/827</a></p>



<a name="223376023"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376023" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376023">(Jan 20 2021 at 14:05)</a>:</h4>
<p>looking</p>



<a name="223376302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376302">(Jan 20 2021 at 14:08)</a>:</h4>
<p>I would expect <a href="https://github.com/rust-lang/rust/pull/80765">https://github.com/rust-lang/rust/pull/80765</a> to be plausibly responsible for the improvement</p>



<a name="223376528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376528" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376528">(Jan 20 2021 at 14:10)</a>:</h4>
<p>FYI: I've mostly decided to ignore improvements in this weeks triage. The report took me around 2 hours to do even with ignoring improvements. I hope that's ok</p>



<a name="223376776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376776" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376776">(Jan 20 2021 at 14:12)</a>:</h4>
<p>yeah, seems right</p>



<a name="223376789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376789" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376789">(Jan 20 2021 at 14:12)</a>:</h4>
<p>just trying to parse out this rollup</p>



<a name="223376811"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376811" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376811">(Jan 20 2021 at 14:12)</a>:</h4>
<p>I am concerned they take this long, though</p>



<a name="223376846"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376846" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376846">(Jan 20 2021 at 14:13)</a>:</h4>
<p>I feel like last time I did one -- maybe 4 weeks ago? -- it took me 30 minutes</p>



<a name="223376885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376885" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376885">(Jan 20 2021 at 14:13)</a>:</h4>
<p>so maybe there's some expectation mismatch</p>



<a name="223376903"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376903" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376903">(Jan 20 2021 at 14:13)</a>:</h4>
<p>This was a particularly long one. Last week was about 45 minutes</p>



<a name="223376941"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223376941" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223376941">(Jan 20 2021 at 14:14)</a>:</h4>
<p>I wouldn't be surprised if you're a bit faster than I am since I'm still getting used to spotting things</p>



<a name="223377026"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223377026" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223377026">(Jan 20 2021 at 14:14)</a>:</h4>
<p>If they're smaller, they can take as short as 30 minutes for me too though</p>



<a name="223377128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223377128" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223377128">(Jan 20 2021 at 14:15)</a>:</h4>
<p>(looking at calendar again - it was closer to 1hr 15 minutes. I had a 30 minute meeting I totally forgot I had <span aria-label="grinning" class="emoji emoji-1f600" role="img" title="grinning">:grinning:</span>and I was multitasking at the beginning)</p>



<a name="223377161"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223377161" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223377161">(Jan 20 2021 at 14:15)</a>:</h4>
<p>ok</p>



<a name="223377237"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223377237" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223377237">(Jan 20 2021 at 14:16)</a>:</h4>
<p>that makes more sense, I guess you did get roughly 10% more this time too since it's wednesday</p>



<a name="223377302"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223377302" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223377302">(Jan 20 2021 at 14:16)</a>:</h4>
<p>I do think there are things we can do to make them faster,  but we can discuss those at the meeting dedicated to improving our perf processes</p>



<a name="223378215"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223378215" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223378215">(Jan 20 2021 at 14:23)</a>:</h4>
<p>I am not sure about this rollup's regressions</p>



<a name="223378245"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223378245" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223378245">(Jan 20 2021 at 14:23)</a>:</h4>
<p>I note that some of them appear to be incremental-specific, though I can't really say why</p>



<a name="223378337"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223378337" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223378337">(Jan 20 2021 at 14:24)</a>:</h4>
<p>a bunch of these prs do not seem like good candidates for rolling up, honestly</p>



<a name="223380164"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223380164" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223380164">(Jan 20 2021 at 14:37)</a>:</h4>
<p>That's actually been something I wanted to talk about. There's been several occasions where I've noticed PRs rolled up that seemed like bad candidates...</p>



<a name="223380557"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223380557" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223380557">(Jan 20 2021 at 14:40)</a>:</h4>
<p>what makes a bad candidate, large deltas?</p>



<a name="223380675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223380675" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223380675">(Jan 20 2021 at 14:41)</a>:</h4>
<p>well, not really. it's hard to pinpoint, but multiple of these PRs I would have marked as non-rollup.</p>



<a name="223380907"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223380907" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223380907">(Jan 20 2021 at 14:42)</a>:</h4>
<p><a href="https://forge.rust-lang.org/release/rollups.html#selecting-pull-requests">https://forge.rust-lang.org/release/rollups.html#selecting-pull-requests</a></p>



<a name="223381036"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223381036" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223381036">(Jan 20 2021 at 14:43)</a>:</h4>
<p>does this need updates?</p>



<a name="223381059"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223381059" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223381059">(Jan 20 2021 at 14:43)</a>:</h4>
<p>One criteria (for me) is something that seems like it could cause performance issues. Lots of refactorings get rolled up and I think many times they should not.</p>



<a name="223381313"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223381313" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223381313">(Jan 20 2021 at 14:45)</a>:</h4>
<p>it says 'Avoid having too many large diff pull requests in the same rollup.'</p>



<a name="223381366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage/near/223381366" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> oliver <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/triage.html#223381366">(Jan 20 2021 at 14:45)</a>:</h4>
<p>but I would assume that means line counts not perf deltas</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
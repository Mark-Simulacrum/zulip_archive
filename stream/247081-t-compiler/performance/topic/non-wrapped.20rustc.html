<html>
<head><meta charset="utf-8"><title>non-wrapped rustc · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html">non-wrapped rustc</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="272883332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272883332" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272883332">(Feb 22 2022 at 23:49)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm trying to import <a href="https://github.com/alacritty/vte">https://github.com/alacritty/vte</a> into rustc-perf (locally) just to benchmark it. I have generated a Cargo.lock for it and put it under <code>collector/benchmarks/</code> but when I run I get an error:</p>
<div class="codehilite"><pre><span></span><code>stderr=    Checking utf8parse v0.2.0 (/tmp/.tmptORBA8/utf8parse)
   Compiling vte_generate_state_changes v0.1.1 (/tmp/.tmptORBA8/vte_generate_state_changes)
&quot;/home/njn/dev/rust3/build/x86_64-unknown-linux-gnu/stage1/bin/rustc&quot; [&quot;--crate-name&quot;, &quot;vte_generate_state_changes&quot;, &quot;--edition=2018&quot;, &quot;vte_generate_state_changes/src/lib.rs&quot;, &quot;--error-format=json&quot;, &quot;--json=diagnostic-rendered-ansi&quot;, &quot;--crate-type&quot;, &quot;proc-macro&quot;, &quot;--emit=dep-info,link&quot;, &quot;-C&quot;, &quot;prefer-dynamic&quot;, &quot;-C&quot;, &quot;embed-bitcode=no&quot;, &quot;-C&quot;, &quot;debuginfo=2&quot;, &quot;-C&quot;, &quot;metadata=23645a7c79635b0e&quot;, &quot;-C&quot;, &quot;extra-filename=-23645a7c79635b0e&quot;, &quot;--out-dir&quot;, &quot;/tmp/.tmptORBA8/target/debug/deps&quot;, &quot;-L&quot;, &quot;dependency=/tmp/.tmptORBA8/target/debug/deps&quot;, &quot;--extern&quot;, &quot;proc_macro2=/tmp/.tmptORBA8/target/debug/deps/libproc_macro2-9ea6a84c35e9561f.rlib&quot;, &quot;--extern&quot;, &quot;quote=/tmp/.tmptORBA8/target/debug/deps/libquote-cd8d7b2b48dc8cf8.rlib&quot;, &quot;--extern&quot;, &quot;proc_macro&quot;, &quot;-C&quot;, &quot;link-arg=-fuse-ld=lld&quot;, &quot;-Adeprecated&quot;, &quot;-Aunknown-lints&quot;, &quot;-Zincremental-verify-ich&quot;]
exiting -- non-wrapped rustc
</code></pre></div>



<a name="272883410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272883410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272883410">(Feb 22 2022 at 23:50)</a>:</h4>
<p>This "non-wrapped rustc" is an error within rustc-perf, which I think has something to do with the way <code>vte</code> is structured, but I don't quite understand. do you?</p>



<a name="272883427"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272883427" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272883427">(Feb 22 2022 at 23:50)</a>:</h4>
<p><code>utf8parse</code> is a crate within <code>vte</code></p>



<a name="272883452"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272883452" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272883452">(Feb 22 2022 at 23:51)</a>:</h4>
<p>Can I solve this with a <code>perf-config.json</code> somehow?</p>



<a name="272884434"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272884434" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272884434">(Feb 23 2022 at 00:01)</a>:</h4>
<p>This perf-config.json just builds the <code>utf8parse</code> crate and works:</p>



<a name="272884439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272884439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272884439">(Feb 23 2022 at 00:01)</a>:</h4>
<div class="codehilite"><pre><span></span><code>{
    &quot;cargo_toml&quot;: &quot;utf8parse/Cargo.toml&quot;
}
</code></pre></div>



<a name="272885273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272885273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272885273">(Feb 23 2022 at 00:11)</a>:</h4>
<p>In general this means there's a build script or something that is getting recompiled spuriously</p>



<a name="272885340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272885340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272885340">(Feb 23 2022 at 00:12)</a>:</h4>
<p>You can sometimes try to debug with CARGO_LOG=cargo::core::compiler::fingerprint=info if I'm recalling the path right</p>



<a name="272885372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272885372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272885372">(Feb 23 2022 at 00:13)</a>:</h4>
<p>Maybe it's a workspace?</p>



<a name="272885433"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272885433" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272885433">(Feb 23 2022 at 00:13)</a>:</h4>
<p>Hm, utf8parse doesn't depend on that crate at al</p>



<a name="272885477"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272885477" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272885477">(Feb 23 2022 at 00:14)</a>:</h4>
<p>Maybe it can just be deleted?</p>



<a name="272886226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272886226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272886226">(Feb 23 2022 at 00:23)</a>:</h4>
<p>But <code>vte</code> itself depends on <code>utf8parse</code>, and I want to measure <code>vte</code></p>



<a name="272887115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272887115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272887115">(Feb 23 2022 at 00:34)</a>:</h4>
<p>Ah</p>



<a name="272887137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272887137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272887137">(Feb 23 2022 at 00:35)</a>:</h4>
<p>But then why does perf-config specify utf8parse?</p>



<a name="272887258"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272887258" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272887258">(Feb 23 2022 at 00:36)</a>:</h4>
<p>Or was that a different perf-config from the log?</p>



<a name="272887611"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272887611" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272887611">(Feb 23 2022 at 00:40)</a>:</h4>
<p>But yeah, CARGO_LOG is probably the way to go</p>



<a name="272894494"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272894494" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272894494">(Feb 23 2022 at 01:51)</a>:</h4>
<p>Sorry, the <code>perf-config.json</code> with utf8parse in it was me finding a configuration that worked. But it's not what I actually want <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="272894687"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272894687" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272894687">(Feb 23 2022 at 01:54)</a>:</h4>
<p>So the fingerprint logging is showing an error:</p>
<div class="codehilite"><pre><span></span><code>stderr=[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint] stale: changed &quot;/tmp/.tmpvVvVN5/utf8parse/src/lib.rs&quot;
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint]           (vs) &quot;/tmp/.tmpvVvVN5/target/debug/.fingerprint/utf8parse-73c3883ab1a624bf/dep-lib-utf8parse&quot;
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint]                FileTime { seconds: 1645581194, nanos: 381916020 } != FileTime { seconds: 1645581195, nanos: 636030158 }
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint] stale: changed &quot;/tmp/.tmpvVvVN5/vte_generate_state_changes/src/lib.rs&quot;
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint]           (vs) &quot;/tmp/.tmpvVvVN5/target/debug/.fingerprint/vte_generate_state_changes-23645a7c79635b0e/dep-lib-vte_generate_state_changes&quot;
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint]                FileTime { seconds: 1645581195, nanos: 253911774 } != FileTime { seconds: 1645581195, nanos: 636099760 }
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint] fingerprint error for vte v0.10.1 (/tmp/.tmpvVvVN5)/Check { test: false }/TargetInner { ..: lib_target(&quot;vte&quot;, [&quot;lib&quot;], &quot;/tmp/.tmpvVvVN5/src/lib.rs&quot;, Edition2021) }
[2022-02-23T01:53:15Z INFO  cargo::core::compiler::fingerprint]     err: profile configuration has changed
</code></pre></div>



<a name="272894880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272894880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272894880">(Feb 23 2022 at 01:57)</a>:</h4>
<p>I'll try changing <code>vte</code> to use workspaces</p>



<a name="272895349"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272895349" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272895349">(Feb 23 2022 at 02:02)</a>:</h4>
<p>Yay! that works</p>



<a name="272895381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272895381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272895381">(Feb 23 2022 at 02:03)</a>:</h4>
<p>So <code>vte</code> has a top-level Cargo.toml that defines the <code>vte</code> crate, and then the two dependent crates are done via a workspace.</p>



<a name="272895405"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272895405" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272895405">(Feb 23 2022 at 02:03)</a>:</h4>
<p>I changed it so the top-level Cargo.toml is just the workspace definition, with three crates in it, and moved the old top-level crate into <code>vte/vte/</code>, IYSWIM</p>



<a name="272896344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/272896344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#272896344">(Feb 23 2022 at 02:18)</a>:</h4>
<p>Huh, well seems good. Not sure why a workspace would cause problems, maybe we're over eager to touch all the files</p>



<a name="273056635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273056635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273056635">(Feb 24 2022 at 07:48)</a>:</h4>
<p>You're right: using <code>touch_files</code> in the <code>perf-config.json</code> fixed the original problem without requiring the workspace restructuring.</p>



<a name="273164845"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273164845" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273164845">(Feb 24 2022 at 23:31)</a>:</h4>
<p>An update: I've been getting the code for these crates by cloning the GH repo, but @lqd told me it's much better to download them directly from <a href="http://crates.io">crates.io</a>, e.g. <code>curl -L https://crates.io/api/v1/crates/$crate/$version/download | tar zxf -</code>. When I do that, I don't have to muck around with the perf-config.json, things just work better.</p>



<a name="273165890"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273165890" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273165890">(Feb 24 2022 at 23:43)</a>:</h4>
<p>FWIW, it may make sense for us to just add a "bench X crate" command to wrap the download + untarring away from memory/local scripts</p>



<a name="273170435"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273170435" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273170435">(Feb 25 2022 at 00:40)</a>:</h4>
<p>And run <code>cargo generate-lockfile</code> if necessary - I have just written my own crappy script to do that <span aria-label="smile" class="emoji emoji-1f642" role="img" title="smile">:smile:</span></p>



<a name="273207535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273207535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jakub Beránek <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273207535">(Feb 25 2022 at 09:43)</a>:</h4>
<p>That sounds like a great idea! I took the liberty of implementing it <a href="https://github.com/rust-lang/rustc-perf/pull/1183">https://github.com/rust-lang/rustc-perf/pull/1183</a>.</p>



<a name="273209577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273209577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273209577">(Feb 25 2022 at 10:04)</a>:</h4>
<p>not strictly related to the wrapped-rustc topic, but similar collector improvements: another local change I have is unconditionally rustfiltering  for the cg local profile commands, is that something that I should upstream ? or not, if doing that will somehow help us randomly notice demangling issues in valgrind/libiberty/etc ?</p>



<a name="273222236"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273222236" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273222236">(Feb 25 2022 at 12:25)</a>:</h4>
<p>Hm, I assumed we were already running things through rustfilt, might be wrong though. I think we should though.</p>



<a name="273222399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273222399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> lqd <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273222399">(Feb 25 2022 at 12:27)</a>:</h4>
<p>we do when we diff 2 rustcs, but IIRC e.g. not for a cg run <a href="https://github.com/rust-lang/rustc-perf/blob/17f20a6cea2ed8d5f3b97ec637c4857aeef40f41/collector/src/execute.rs#L1046-L1059">https://github.com/rust-lang/rustc-perf/blob/17f20a6cea2ed8d5f3b97ec637c4857aeef40f41/collector/src/execute.rs#L1046-L1059</a> </p>
<p>I also think we should, so I'll open up a PR soon</p>



<a name="273289721"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/non-wrapped%20rustc/near/273289721" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nnethercote <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/non-wrapped.20rustc.html#273289721">(Feb 25 2022 at 21:55)</a>:</h4>
<p>The Valgrind dev version should now demangle all Rust symbols correctly, though I appreciate that running a dev version is a hassle</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
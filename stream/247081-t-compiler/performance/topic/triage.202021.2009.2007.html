<html>
<head><meta charset="utf-8"><title>triage 2021 09 07 · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html">triage 2021 09 07</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252314020"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252314020" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252314020">(Sep 07 2021 at 14:28)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> I believe you're on triage duty this week correct? One thing you might not have seen is that we're now (since yesterday) automatically posting perf results to PRs after bors merges the PR. So for later PRs you won't need to ping the PR authors manually when they have a perf regression. We still need to figure out a good process for how we handle perf regressions, but at least we're at the point now where author and reviewer are notified when there is one.</p>



<a name="252335102"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252335102" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252335102">(Sep 07 2021 at 16:47)</a>:</h4>
<p>I am indeed on triage duty this week</p>



<a name="252335176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252335176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252335176">(Sep 07 2021 at 16:48)</a>:</h4>
<p>I just got back from vacation, so I’m playing catch up on many fronts, but I will be starting on this soon</p>



<a name="252352381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352381">(Sep 07 2021 at 18:44)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> how many entries are normal for the “Probably changed” section? I’m seeing twenty</p>



<a name="252352453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352453">(Sep 07 2021 at 18:44)</a>:</h4>
<p>I think that's about what I saw</p>



<a name="252352473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352473">(Sep 07 2021 at 18:45)</a>:</h4>
<p>how many total entries (there should be a note at the top, I think?)</p>



<a name="252352479"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352479" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352479">(Sep 07 2021 at 18:45)</a>:</h4>
<p>And you filed an issue for each one?</p>



<a name="252352514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352514">(Sep 07 2021 at 18:45)</a>:</h4>
<p>No, I think the intent is to only file if you think it <em>should</em> be "definitely changed"</p>



<a name="252352531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352531">(Sep 07 2021 at 18:45)</a>:</h4>
<p>i.e., if we missed a relevant change</p>



<a name="252352545"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352545" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352545">(Sep 07 2021 at 18:45)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> "57 comparisons made in total"</p>



<a name="252352584"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352584" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352584">(Sep 07 2021 at 18:45)</a>:</h4>
<p>yeah that sounds like the right number (i.e., you didn't use the wrong start or something)</p>



<a name="252352587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352587">(Sep 07 2021 at 18:45)</a>:</h4>
<p>Okay, I was reading the intent as being about improving the heuristics in <em>both</em> directions</p>



<a name="252352666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352666">(Sep 07 2021 at 18:46)</a>:</h4>
<p>(i.e. raising true positives and <em>reducing</em> false positives)</p>



<a name="252352714"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352714" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352714">(Sep 07 2021 at 18:46)</a>:</h4>
<p>Yes we'd like to do both</p>



<a name="252352759"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352759" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352759">(Sep 07 2021 at 18:46)</a>:</h4>
<p>I think we should focus on the ones that should be definitely changed</p>



<a name="252352760"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352760" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352760">(Sep 07 2021 at 18:46)</a>:</h4>
<p>but filing twenty issues seems extreme</p>



<a name="252352796"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352796" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352796">(Sep 07 2021 at 18:47)</a>:</h4>
<p>I don't see why you'd have to file twenty issues?</p>



<a name="252352806"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352806" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352806">(Sep 07 2021 at 18:47)</a>:</h4>
<p>once we eliminate those, then the rest will be just false positives, and we can ignore the probably changed category (basically make it "not changed")</p>



<a name="252352865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352865">(Sep 07 2021 at 18:47)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">rylev</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252352796">said</a>:</p>
<blockquote>
<p>I don't see why you'd have to file twenty issues?</p>
</blockquote>
<p>because each of these is presumably to be categorized as a true positive or a false positive</p>



<a name="252352873"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252352873" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252352873">(Sep 07 2021 at 18:47)</a>:</h4>
<p>The goal is not to get rid completely of "probably changed"</p>



<a name="252353016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252353016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252353016">(Sep 07 2021 at 18:48)</a>:</h4>
<p>so just file issues for true positivies, and also if I notice any false positive that seems like it has an obvious fix to the heuristics?</p>



<a name="252353029"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252353029" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252353029">(Sep 07 2021 at 18:48)</a>:</h4>
<p>Yes</p>



<a name="252355406"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355406" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355406">(Sep 07 2021 at 19:01)</a>:</h4>
<p>In general, we're still at a point where there are a handful of tests run results where we cannot be sure if the results are legit or not. Luckily we're pretty good now to where if we can't tell for sure the stakes are usually pretty low (i.e., the changes are at most 0.5% off the baseline).</p>



<a name="252355528"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355528" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355528">(Sep 07 2021 at 19:02)</a>:</h4>
<p>I also was just idly wondering: I know we have already said we do not want to automatically do perf runs on every PR that is filed. But should we consider doing it automatically on “just” all <em>rollup</em> PRs (or as a policy, saying people should request one as a matter of protocol)?</p>



<a name="252355640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355640">(Sep 07 2021 at 19:03)</a>:</h4>
<p>Rollups should not be perf sensitive so it seems like maybe that's attacking the issue from the wrong side.</p>



<a name="252355654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355654">(Sep 07 2021 at 19:03)</a>:</h4>
<p>right now, as part of triage, I’m seeing several rollup PR’s that are flagged as “maybe regression”</p>



<a name="252355766"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355766" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355766">(Sep 07 2021 at 19:04)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> they're flagged as "maybe" or "probably"</p>



<a name="252355826"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355826" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355826">(Sep 07 2021 at 19:04)</a>:</h4>
<p>the bar for maybe is pretty low.</p>



<a name="252355833"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355833" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355833">(Sep 07 2021 at 19:04)</a>:</h4>
<p>Oh, Probably</p>



<a name="252355928"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252355928" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252355928">(Sep 07 2021 at 19:04)</a>:</h4>
<p>Perhaps our bar for probably is too low. Do they strike you as being potential legit perf issues?</p>



<a name="252356019"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356019" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356019">(Sep 07 2021 at 19:05)</a>:</h4>
<p>(I only had 1 rollup last week labeled as probably so I don't think this is an issue happening regularly)</p>



<a name="252356244"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356244" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356244">(Sep 07 2021 at 19:06)</a>:</h4>
<p>You can see here where things are labeled as "probably relevant": <a href="https://github.com/rust-lang/rustc-perf/blob/d7f85aa72b2c648233e8513f1af85e697e32e726/site/src/comparison.rs#L282-L283">https://github.com/rust-lang/rustc-perf/blob/d7f85aa72b2c648233e8513f1af85e697e32e726/site/src/comparison.rs#L282-L283</a></p>



<a name="252356335"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356335" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356335">(Sep 07 2021 at 19:07)</a>:</h4>
<p>I have five Rollups marked as Probably</p>



<a name="252356362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356362">(Sep 07 2021 at 19:07)</a>:</h4>
<p>I haven’t delved too deeply into all of them yet</p>



<a name="252356399"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356399" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356399">(Sep 07 2021 at 19:07)</a>:</h4>
<p>I was debating about whether to add a comment to each with a link to the performance comparison page</p>



<a name="252356500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356500">(Sep 07 2021 at 19:08)</a>:</h4>
<p>(regardless of whether it was actually relevant or not. Just to have the metadata there, easy to follow. But I was concerned that people might misinterpret the comment.)</p>



<a name="252356648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356648">(Sep 07 2021 at 19:09)</a>:</h4>
<p>FWIW I didn't leave any comments on "probably relevant" changes last week because most of them seemed to not actually be relevant in a triage setting (where we're letting people know after their PR has already merged)</p>



<a name="252356689"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252356689" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252356689">(Sep 07 2021 at 19:09)</a>:</h4>
<p>I've long wanted (and we can pretty easily do this) to make <a href="http://perf.rust-lang.org/compare.html?pr=434343">perf.rust-lang.org/compare.html?pr=434343</a> to just work, so then the metadata leaving is less useful</p>



<a name="252357292"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252357292" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252357292">(Sep 07 2021 at 19:13)</a>:</h4>
<p>/me looks at some of the rollups</p>



<a name="252357372"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252357372" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252357372">(Sep 07 2021 at 19:14)</a>:</h4>
<p>This is an example of where I think we're being too eager to call something probably relevant: <a href="https://perf.rust-lang.org/compare.html?start=fe37929e4cba2c5c21e6805805769630c736bc3d&amp;end=76d18cfb8945f824c8777e04981e930d2037954e&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=fe37929e4cba2c5c21e6805805769630c736bc3d&amp;end=76d18cfb8945f824c8777e04981e930d2037954e&amp;stat=instructions:u</a></p>



<a name="252357472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252357472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252357472">(Sep 07 2021 at 19:14)</a>:</h4>
<p>Only one of the changes is not "very small" (defined as greater than or equal to 1.5% our significance threshold of 0.2%)</p>



<a name="252357555"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252357555" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252357555">(Sep 07 2021 at 19:15)</a>:</h4>
<p>I've seen runs produce that amount of noise. It's still "maybe relevant" but I think it's a problem that we label that as "probably relevant"</p>



<a name="252357799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252357799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252357799">(Sep 07 2021 at 19:17)</a>:</h4>
<p>On the other hand <a href="https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u</a> looks much more likely to be relevant. It has changes that reach above 0.5%</p>



<a name="252358052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358052">(Sep 07 2021 at 19:19)</a>:</h4>
<p>This change <a href="https://perf.rust-lang.org/compare.html?start=0a84708edca7c275cb99ad080317fbc7637516d8&amp;end=29ef6cf1637aa8317f8911f93f14e18d404c1b0e&amp;stat=instructions:u">here</a> seems like a bug that we should only be considering "maybe relevant"</p>



<a name="252358361"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358361" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358361">(Sep 07 2021 at 19:21)</a>:</h4>
<p>I'd personally be in favor of bumping our definition of what constitutes "probably relevant" to be more strict</p>



<a name="252358508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358508">(Sep 07 2021 at 19:22)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">rylev</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252357472">said</a>:</p>
<blockquote>
<p>Only one of the changes is not "very small" (defined as greater than or equal to 1.5% our significance threshold of 0.2%)</p>
</blockquote>
<p>sorry I didn’t understand how to parse this. 1.5% of 0.2% ?</p>



<a name="252358656"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358656" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358656">(Sep 07 2021 at 19:23)</a>:</h4>
<p>Sorry (getting late here) 1.5 <em>times</em> of our significance threshold of 0.2%</p>



<a name="252358706"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358706" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358706">(Sep 07 2021 at 19:24)</a>:</h4>
<p>AKA 0.3%</p>



<a name="252358724"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358724" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358724">(Sep 07 2021 at 19:24)</a>:</h4>
<p>ah okay</p>



<a name="252358807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252358807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252358807">(Sep 07 2021 at 19:25)</a>:</h4>
<p>Unfortunately these numbers are pretty arbitrary as we don't (yet) have a good way to establish statistical significance</p>



<a name="252361223"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252361223" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252361223">(Sep 07 2021 at 19:44)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">rylev</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252357799">said</a>:</p>
<blockquote>
<p>On the other hand <a href="https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u">this</a> looks much more likely to be relevant. It has changes that reach above 0.5%</p>
</blockquote>
<p>Something interesting here: the summary produced by the performance triage script only says here: </p>
<div class="codehilite"><pre><span></span><code>Rollup of 10 pull requests [#88535](https://github.com/rust-lang/rust/issues/88535)
- Small improvement in [instruction counts](https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u) (up to -0\
.4% on `incr-patched: dummy fn` builds of `unify-linearly`)
- Small regression in [instruction counts](https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u) (up to 0.4\
% on `incr-unchanged` builds of `helloworld`)
</code></pre></div>
<p>while when I look at it manually, the max improvement is reported to be -0.57%, nowhere near -0.4%. Is there something going wonky with the rounding off to one significant figure there?</p>



<a name="252361312"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252361312" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252361312">(Sep 07 2021 at 19:44)</a>:</h4>
<p>or some other reason its not picking up on the changes to webrender-doc and match-stress-exhaustive_patterns-doc ?</p>



<a name="252361701"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252361701" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252361701">(Sep 07 2021 at 19:47)</a>:</h4>
<p>(perhaps we deliberately do not include the <code>-doc</code> benchmarks in our decisions re relevance?)</p>



<a name="252361917"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252361917" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252361917">(Sep 07 2021 at 19:48)</a>:</h4>
<p>-doc benchmarks aren't currently considered for relevance, though perhaps they should be</p>



<a name="252361953"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252361953" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252361953">(Sep 07 2021 at 19:49)</a>:</h4>
<p>(at least, I believe so)</p>



<a name="252362274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252362274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252362274">(Sep 07 2021 at 19:51)</a>:</h4>
<p>okay. So I presumably should filter them out from my eyeball analysis too, at least for now. I cannot tell if <span class="user-mention" data-user-id="224872">@rylev</span> was doing so in their analysis above. “Changes that reach above 0.5%” sounds like they were including *-doc  cases</p>



<a name="252362735"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252362735" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252362735">(Sep 07 2021 at 19:55)</a>:</h4>
<p>That is correct that doc is being filtered out. I wanted to add an issue to remove that because I usually use it in my “eyeball” analysis</p>



<a name="252385444"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252385444" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252385444">(Sep 07 2021 at 23:26)</a>:</h4>
<blockquote>
<p>Rollups should not be perf sensitive so it seems like maybe that's attacking the issue from the wrong side.</p>
</blockquote>
<p>Hmm, I disagree - I think the purpose of rollups is to land PRs faster. We happen to need them to be perf-insensitive today because otherwise it's hard to track regressions, but I think if we had infinite CPU time there's no reason we couldn't rollup PRs affecting perf and benchmark them after the fact.</p>



<a name="252385544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252385544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252385544">(Sep 07 2021 at 23:27)</a>:</h4>
<p>And I agree -doc PRs should definitely not be filtered out, it's very common for things that don't impact the compiler to affect rustdoc and vice versa</p>



<a name="252388980"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252388980" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252388980">(Sep 08 2021 at 00:12)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252385444">said</a>:</p>
<blockquote>
<blockquote>
<p>Rollups should not be perf sensitive so it seems like maybe that's attacking the issue from the wrong side.</p>
</blockquote>
<p>Hmm, I disagree - I think the purpose of rollups is to land PRs faster. We happen to need them to be perf-insensitive today because otherwise it's hard to track regressions, but I think if we had infinite CPU time there's no reason we couldn't rollup PRs affecting perf and benchmark them after the fact.</p>
</blockquote>
<p>Are you suggesting that we could do this in a world where we would do perf runs for the individual commits that make up a rollup PR, i.e. at a finer grain than just the rollup PR as a whole?</p>



<a name="252389051"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252389051" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252389051">(Sep 08 2021 at 00:14)</a>:</h4>
<p>because, sure, in that world we could ignore performance concerns during rollups, because we would be more likely to identify which commit in a rollup was the injection point (assuming that it wasn’t due to some interaction between multiple PRs in the rollup).</p>



<a name="252389095"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252389095" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252389095">(Sep 08 2021 at 00:14)</a>:</h4>
<p>but I don’t see us trying to establish such functionality in the near term</p>



<a name="252391251"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252391251" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252391251">(Sep 08 2021 at 00:46)</a>:</h4>
<p>Yes, that's what I'm suggesting. Hmm, this doesn't seem hard from a technical perspective, I would be more worried we don't have enough CPU time available</p>



<a name="252398785"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252398785" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252398785">(Sep 08 2021 at 02:53)</a>:</h4>
<p>Okay. Like <span class="user-mention" data-user-id="224872">@rylev</span> last week, I am going to record here the list of entries that were first marked as “Probably Changed” that I have decided are not significant or at least not worth noting in the weekly triage report. In hindsight, I wish I had written down my reasoning as I went along on each one, but I don’t have that recorded now. (I only recorded my reasoning for the cases where I decided to mark them as significant and include them in the report.)</p>



<a name="252398866"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252398866" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252398866">(Sep 08 2021 at 02:54)</a>:</h4>
<p>Rollup of 14 pull requests <a href="https://github.com/rust-lang/rust/issues/88527">#88527</a></p>
<ul>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=fe37929e4cba2c5c21e6805805769630c736bc3d&amp;end=76d18cfb8945f824c8777e04981e930d2037954e&amp;stat=instructions:u">instruction counts</a> (up to 0.3% on <code>full</code> builds of <code>html5ever</code>)</li>
</ul>
<p>Rollup of 10 pull requests <a href="https://github.com/rust-lang/rust/issues/88535">#88535</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u">instruction counts</a> (up to -0.4% on <code>incr-patched: dummy fn</code> builds of <code>unify-linearly</code>)</li>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=76d18cfb8945f824c8777e04981e930d2037954e&amp;end=0a84708edca7c275cb99ad080317fbc7637516d8&amp;stat=instructions:u">instruction counts</a> (up to 0.4% on <code>incr-unchanged</code> builds of <code>helloworld</code>)</li>
</ul>
<p>Fix loading large rlibs <a href="https://github.com/rust-lang/rust/issues/88506">#88506</a></p>
<ul>
<li>Very small improvement in <a href="https://perf.rust-lang.org/compare.html?start=0a84708edca7c275cb99ad080317fbc7637516d8&amp;end=29ef6cf1637aa8317f8911f93f14e18d404c1b0e&amp;stat=instructions:u">instruction counts</a> (up to -0.3% on <code>incr-patched: Job</code> builds of <code>regex</code>)</li>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=0a84708edca7c275cb99ad080317fbc7637516d8&amp;end=29ef6cf1637aa8317f8911f93f14e18d404c1b0e&amp;stat=instructions:u">instruction counts</a> (up to 0.7% on <code>full</code> builds of <code>deeply-nested</code>)</li>
</ul>
<p>Rollup of 9 pull requests <a href="https://github.com/rust-lang/rust/issues/88556">#88556</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=608b5e1c209ffb4d6d0cf83817c823b12bbb7659&amp;end=3ed6c1d23fd40f4367259a531465e809eb00ec27&amp;stat=instructions:u">instruction counts</a> (up to -0.5% on <code>full</code> builds of <code>deeply-nested</code>)</li>
<li>
<p>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=608b5e1c209ffb4d6d0cf83817c823b12bbb7659&amp;end=3ed6c1d23fd40f4367259a531465e809eb00ec27&amp;stat=instructions:u">instruction counts</a> (up to 0.4% on <code>incr-patched: dummy fn</code> builds of <code>unify-linearly</code>)<br>
Update LLVM submodule <a href="https://github.com/rust-lang/rust/issues/88395">#88395</a></p>
</li>
<li>
<p>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=3ed6c1d23fd40f4367259a531465e809eb00ec27&amp;end=00ce1665c9f859813d4e9c5fdbf44d881e1fb64c&amp;stat=instructions:u">instruction counts</a> (up to -0.4% on <code>incr-patched: Job</code> builds of <code>regex</code>)</p>
</li>
</ul>
<p>Allow writing of incomplete UTF-8 sequences to the Windows console via stdout/stderr <a href="https://github.com/rust-lang/rust/issues/83342">#83342</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=e3c71f1e33b026dea7c9ca7c1c4554e63f56a0da&amp;end=cc9bb1522e357a4a11e7b0bfbbb7eddbd880a44f&amp;stat=instructions:u">instruction counts</a> (up to -0.5% on <code>full</code> builds of <code>inflate</code>)</li>
</ul>
<p>Rollup of 12 pull requests <a href="https://github.com/rust-lang/rust/issues/88596">#88596</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=1cf8fdd4f0be26bcfa9e3b1e10d4bf80107ba492&amp;end=b834c4c1bad7521af47f38f44a4048be0a1fe2ee&amp;stat=instructions:u">instruction counts</a> (up to -0.5% on <code>incr-patched: println</code> builds of <code>helloworld</code>)</li>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=1cf8fdd4f0be26bcfa9e3b1e10d4bf80107ba492&amp;end=b834c4c1bad7521af47f38f44a4048be0a1fe2ee&amp;stat=instructions:u">instruction counts</a> (up to 0.5% on <code>full</code> builds of <code>inflate</code>)</li>
</ul>
<p>Path remapping: Make behavior of diagnostics output dependent on presence of --remap-path-prefix. <a href="https://github.com/rust-lang/rust/issues/88363">#88363</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=371f3cd3fe523d0b398ed1db1620667c53ba7d02&amp;end=97f2698484c2d668b2f356a6c2252e5f08472234&amp;stat=instructions:u">instruction counts</a> (up to -0.3% on <code>incr-patched: println</code> builds of <code>regression-31157</code>)</li>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=371f3cd3fe523d0b398ed1db1620667c53ba7d02&amp;end=97f2698484c2d668b2f356a6c2252e5f08472234&amp;stat=instructions:u">instruction counts</a> (up to 0.5% on <code>incr-unchanged</code> builds of <code>helloworld</code>)</li>
</ul>
<p>expand: Treat more macro calls as statement macro calls <a href="https://github.com/rust-lang/rust/issues/88428">#88428</a></p>
<ul>
<li>Very small improvement in <a href="https://perf.rust-lang.org/compare.html?start=29d8fb746d3c7c0364f123e3efde90700b93aed3&amp;end=fbdff7fae941bce21fd3047f87777c84b866850e&amp;stat=instructions:u">instruction counts</a> (up to -1.0% on <code>incr-patched: add static arr item</code> builds of <code>coercions</code>)</li>
<li>
<p>Very small regression in <a href="https://perf.rust-lang.org/compare.html?start=29d8fb746d3c7c0364f123e3efde90700b93aed3&amp;end=fbdff7fae941bce21fd3047f87777c84b866850e&amp;stat=instructions:u">instruction counts</a> (up to 1.0% on <code>incr-full</code> builds of <code>coercions</code>)<br>
Rollup of 7 pull requests <a href="https://github.com/rust-lang/rust/issues/88618">#88618</a></p>
</li>
<li>
<p>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=e4e417953920e198f4bc1421ce9e38fd8a85fbca&amp;end=c5799b2a73bd03d1d7b4a432fa0a0cb93e7288db&amp;stat=instructions:u">instruction counts</a> (up to 0.3% on <code>incr-patched: println</code> builds of <code>helloworld</code>)</p>
</li>
</ul>
<p>Fix drop handling for <code>if let</code> expressions <a href="https://github.com/rust-lang/rust/issues/88572">#88572</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=4878034c000a0404a4c83e77eddf493deab550d6&amp;end=b7404c898a1a6933b71c72428a6dce551bcc1be7&amp;stat=instructions:u">instruction counts</a> (up to -0.3% on <code>incr-unchanged</code> builds of <code>webrender-wrench</code>)</li>
<li>Moderate regression in <a href="https://perf.rust-lang.org/compare.html?start=4878034c000a0404a4c83e77eddf493deab550d6&amp;end=b7404c898a1a6933b71c72428a6dce551bcc1be7&amp;stat=instructions:u">instruction counts</a> (up to 0.7% on <code>full</code> builds of <code>webrender-wrench</code>)</li>
</ul>
<p>Move add_rlib and add_native_library to cg_ssa <a href="https://github.com/rust-lang/rust/issues/88559">#88559</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=0961e688fda35a664b5869dcfe1295b00538c7ae&amp;end=d32dc80bb6dbe850b424d2cb60214bbbce8ddf01&amp;stat=instructions:u">instruction counts</a> (up to -0.4% on <code>incr-patched: println</code> builds of <code>cargo</code>)</li>
<li>Very small regression in <a href="https://perf.rust-lang.org/compare.html?start=0961e688fda35a664b5869dcfe1295b00538c7ae&amp;end=d32dc80bb6dbe850b424d2cb60214bbbce8ddf01&amp;stat=instructions:u">instruction counts</a> (up to 0.2% on <code>incr-unchanged</code> builds of <code>helloworld</code>)</li>
</ul>
<p>Stop allocating vtable entries for non-object-safe methods <a href="https://github.com/rust-lang/rust/issues/88552">#88552</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=e2750baf53aaa60db95f10759f6cf9463dc5a6bd&amp;end=e30b68353fe22b00f40d021e7914eeb78473b3c1&amp;stat=instructions:u">instruction counts</a> (up to -0.5% on <code>incr-unchanged</code> builds of <code>helloworld</code>)</li>
<li>Very small regression in <a href="https://perf.rust-lang.org/compare.html?start=e2750baf53aaa60db95f10759f6cf9463dc5a6bd&amp;end=e30b68353fe22b00f40d021e7914eeb78473b3c1&amp;stat=instructions:u">instruction counts</a> (up to 1.0% on <code>incr-patched: add static arr item</code> builds of <code>coercions</code>)</li>
</ul>
<p>Fix <a href="https://github.com/rust-lang/rust/issues/88256">#88256</a> remove duplicated diagnostics <a href="https://github.com/rust-lang/rust/issues/88493">#88493</a></p>
<ul>
<li>Small improvement in <a href="https://perf.rust-lang.org/compare.html?start=7849e3e9dda60e8ec826ee245c6b180e73911b37&amp;end=8f3aa5e8b9e176e8a5fff81a681eba1805366e3d&amp;stat=instructions:u">instruction counts</a> (up to -0.4% on <code>incr-unchanged</code> builds of <code>helloworld</code>)</li>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=7849e3e9dda60e8ec826ee245c6b180e73911b37&amp;end=8f3aa5e8b9e176e8a5fff81a681eba1805366e3d&amp;stat=instructions:u">instruction counts</a> (up to 0.3% on <code>full</code> builds of <code>regression-31157</code>)</li>
</ul>
<p>Change return type for T::{log,log2,log10} to u32. <a href="https://github.com/rust-lang/rust/issues/88665">#88665</a></p>
<ul>
<li>Very small improvement in <a href="https://perf.rust-lang.org/compare.html?start=0e0ce8364c076171417626246f046018da83942a&amp;end=b2d9bcda7ec267dbabfaef67f7af344ef71e002c&amp;stat=instructions:u">instruction counts</a> (up to -0.3% on <code>incr-unchanged</code> builds of <code>webrender-wrench</code>)</li>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=0e0ce8364c076171417626246f046018da83942a&amp;end=b2d9bcda7ec267dbabfaef67f7af344ef71e002c&amp;stat=instructions:u">instruction counts</a> (up to 1.3% on <code>incr-patched: add static arr item</code> builds of <code>coercions</code>)</li>
</ul>
<p>Improve structured tuple struct suggestion <a href="https://github.com/rust-lang/rust/issues/88631">#88631</a></p>
<ul>
<li>Very small improvement in <a href="https://perf.rust-lang.org/compare.html?start=b2d9bcda7ec267dbabfaef67f7af344ef71e002c&amp;end=d19d864e79531ad702e4f44b2635da6c50cc5eb0&amp;stat=instructions:u">instruction counts</a> (up to -1.1% on <code>incr-patched: add static arr item</code> builds of <code>coercions</code>)</li>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=b2d9bcda7ec267dbabfaef67f7af344ef71e002c&amp;end=d19d864e79531ad702e4f44b2635da6c50cc5eb0&amp;stat=instructions:u">instruction counts</a> (up to 0.3% on <code>incr-full</code> builds of <code>clap-rs</code>)</li>
</ul>
<p>Change scope of temporaries in match guards <a href="https://github.com/rust-lang/rust/issues/88678">#88678</a></p>
<ul>
<li>Very small improvement in <a href="https://perf.rust-lang.org/compare.html?start=d19d864e79531ad702e4f44b2635da6c50cc5eb0&amp;end=1c858ba5bf7bd06c1a970efbf77053c8380b3151&amp;stat=instructions:u">instruction counts</a> (up to -0.3% on <code>incr-full</code> builds of <code>clap-rs</code>)</li>
</ul>
<p>Mmap the incremental data instead of reading it. <a href="https://github.com/rust-lang/rust/issues/83214">#83214</a></p>
<ul>
<li>Small regression in <a href="https://perf.rust-lang.org/compare.html?start=1698e3cac54aa8691d4e9e207567672af8231cb6&amp;end=11bbb5231349a0a144d86d5c0c21061a06d1969d&amp;stat=instructions:u">instruction counts</a> (up to 0.4% on <code>full</code> builds of <code>html5ever</code>)</li>
</ul>



<a name="252398879"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252398879" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252398879">(Sep 08 2021 at 02:54)</a>:</h4>
<p>This was a much larger list of PRs than I had expected to have to manually review</p>



<a name="252398886"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252398886" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252398886">(Sep 08 2021 at 02:54)</a>:</h4>
<p>and I think <span class="user-mention" data-user-id="224872">@rylev</span> had a similar reaction last week</p>



<a name="252398906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252398906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252398906">(Sep 08 2021 at 02:55)</a>:</h4>
<p>I’m hoping that the changes <span class="user-mention" data-user-id="224872">@rylev</span> is talking about putting in will ease the burden on this front somewhat.</p>



<a name="252399362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252399362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252399362">(Sep 08 2021 at 03:02)</a>:</h4>
<p>PR is up: <a href="https://github.com/rust-lang/rustc-perf/pull/995">https://github.com/rust-lang/rustc-perf/pull/995</a></p>



<a name="252399881"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252399881" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252399881">(Sep 08 2021 at 03:10)</a>:</h4>
<p>(and I merged the aforementioned PR. I don’t recall what our protocol here is, in terms of whether we wait a while or not. I saw the last two perf triage reports were also self-merged by the author, so I feel like I’m in good company here.)</p>



<a name="252399885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252399885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252399885">(Sep 08 2021 at 03:10)</a>:</h4>
<p>TWIR PR is up: <a href="https://github.com/rust-lang/this-week-in-rust/pull/2394">https://github.com/rust-lang/this-week-in-rust/pull/2394</a></p>



<a name="252439943"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252439943" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cjgillot <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252439943">(Sep 08 2021 at 10:57)</a>:</h4>
<p>For information, <a href="https://github.com/rust-lang/rust/issues/83214">#83214</a>'s perf result is mostly a reduction of max-rss.</p>



<a name="252474951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252474951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252474951">(Sep 08 2021 at 14:55)</a>:</h4>
<p>Oh that reminds me, do I need to add comments on the PR’s flagged as performance changes? I didn’t do so last night, let me look at it now.</p>



<a name="252475101"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252475101" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252475101">(Sep 08 2021 at 14:56)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252474951">said</a>:</p>
<blockquote>
<p>Oh that reminds me, do I need to add comments on the PR’s flagged as performance changes? I didn’t do so last night, let me look at it now.</p>
</blockquote>
<p>Yes though hopefully this is the last time we need to do this since they are now posted automatically.</p>



<a name="252475453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252475453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252475453">(Sep 08 2021 at 14:58)</a>:</h4>
<p><a href="https://github.com/rust-lang/rust/pull/88724#issuecomment-914695903">Here's</a> an example in a very recent PR.</p>



<a name="252476030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252476030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252476030">(Sep 08 2021 at 15:00)</a>:</h4>
<p>And we add comments on both (significant) improvements as well as regressions, right? I like to try to give people cause to celebrate. :)</p>



<a name="252476219"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252476219" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252476219">(Sep 08 2021 at 15:01)</a>:</h4>
<p>I think we leave comments all the time</p>



<a name="252476481"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252476481" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252476481">(Sep 08 2021 at 15:02)</a>:</h4>
<p>Thanks for confirming. There’s enough weeks between my triage cycles that I forget.</p>



<a name="252476539"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252476539" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252476539">(Sep 08 2021 at 15:03)</a>:</h4>
<p>Slash I have little ones that wake us up from 3am to 5am. <span aria-label="sleeping" class="emoji emoji-1f634" role="img" title="sleeping">:sleeping:</span></p>



<a name="252477457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252477457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252477457">(Sep 08 2021 at 15:08)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252476219">said</a>:</p>
<blockquote>
<p>I think we leave comments all the time</p>
</blockquote>
<p>correct</p>



<a name="252503862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252503862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252503862">(Sep 08 2021 at 17:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252385444">said</a>:</p>
<blockquote>
<blockquote>
<p>Rollups should not be perf sensitive so it seems like maybe that's attacking the issue from the wrong side.</p>
</blockquote>
<p>Hmm, I disagree - I think the purpose of rollups is to land PRs faster. We happen to need them to be perf-insensitive today because otherwise it's hard to track regressions, but I think if we had infinite CPU time there's no reason we couldn't rollup PRs affecting perf and benchmark them after the fact.</p>
</blockquote>
<p>If we had infinite CPU time I don't think we'd need rollups in the first place.</p>



<a name="252508537"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252508537" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252508537">(Sep 08 2021 at 18:20)</a>:</h4>
<p>Well if the infinite CPU time is only available in the form of parallel runs, and assuming in this hypothetical world we continue to fail to infinitely-parallelize the bootstrap process, I can imagine still having rollups. (Namely, to reduce latency of the initial landing of features, and then filling in the performance results at a fine-grained level only after the fact…)</p>



<a name="252508814"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252508814" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252508814">(Sep 08 2021 at 18:22)</a>:</h4>
<p>But it would be a heck of a lot harder to justify rollups in that world.</p>



<a name="252510210"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252510210" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252510210">(Sep 08 2021 at 18:30)</a>:</h4>
<p>with enough CPU time you could stack multiple in-flight merge commits and test and bench each of them and just collapse the jenga tower if one of the lower ones fails. most of the time you'd still get several commits in</p>



<a name="252510498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252510498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252510498">(Sep 08 2021 at 18:32)</a>:</h4>
<p>and PR CI would also run for all platforms every time, making merge failures less likely</p>



<a name="252511196"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252511196" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252511196">(Sep 08 2021 at 18:37)</a>:</h4>
<p>that’s true, speculative execution remains an option</p>



<a name="252513949"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252513949" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252513949">(Sep 08 2021 at 18:58)</a>:</h4>
<p>That's something like what Google does for Chrome, I think.</p>



<a name="252514012"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252514012" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252514012">(Sep 08 2021 at 18:58)</a>:</h4>
<p>Commits go in in something like a roll-up, but they're tested in sequence, and I <em>think</em> anything that went in before a breaking commit still goes in, and it just stops on breakage.</p>



<a name="252560831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252560831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252560831">(Sep 09 2021 at 02:11)</a>:</h4>
<p>heh, this reminds me of a danluu blog post I read recently: <a href="https://danluu.com/essential-complexity/">https://danluu.com/essential-complexity/</a></p>
<blockquote>
<p>Here we see one fatal flaw in the concept of accidental essential complexity providing an upper bound on productivity improvements: tasks with too much accidental complexity wouldn't have even been considered possible.</p>
</blockquote>



<a name="252561042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252561042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252561042">(Sep 09 2021 at 02:14)</a>:</h4>
<p>my other favorite quote from that is</p>
<blockquote>
<p>Thinking that the tools you personally use are as good as it gets is an easy trap to fall into.</p>
</blockquote>



<a name="252561107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252561107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252561107">(Sep 09 2021 at 02:15)</a>:</h4>
<p><span class="user-mention silent" data-user-id="239881">Josh Triplett</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202021.2009.2007/near/252514012">said</a>:</p>
<blockquote>
<p>Commits go in in something like a roll-up, but they're tested in sequence, and I <em>think</em> anything that went in before a breaking commit still goes in, and it just stops on breakage.</p>
</blockquote>
<p>e.g. a friend at work was telling me how Facebook has a fork of Phabricator that lets you merge <em>individual commits</em> in a PR if you think they look good, without having to merge the whole PR at once</p>



<a name="252561136"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/triage%202021%2009%2007/near/252561136" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/triage.202021.2009.2007.html#252561136">(Sep 09 2021 at 02:15)</a>:</h4>
<p>hey <span class="user-mention" data-user-id="121055">@Pietro Albini</span>, could you talk to github about that? <span aria-label="wink" class="emoji emoji-1f609" role="img" title="wink">:wink:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
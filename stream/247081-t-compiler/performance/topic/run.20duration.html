<html>
<head><meta charset="utf-8"><title>run duration Â· t-compiler/performance Â· Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html">run duration</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://rust-lang.github.io/zulip_archive/style.css" rel="stylesheet"></head>

<a name="205299150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205299150" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205299150">(Jul 28 2020 at 22:37)</a>:</h4>
<p>after numerous PRs, we are now down to 1h 56m per run which in theory means we can actually keep up with rust-lang/rust, though try builds throw that out the window pretty rapidly</p>



<a name="205319169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205319169" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> FÃ©lix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205319169">(Jul 29 2020 at 05:16)</a>:</h4>
<p>ðŸ¤©</p>



<a name="205319176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205319176" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> FÃ©lix Fischer <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205319176">(Jul 29 2020 at 05:16)</a>:</h4>
<p>Thank u <span class="user-mention" data-user-id="116122">@simulacrum</span> <span aria-label="sparkling heart" class="emoji emoji-1f496" role="img" title="sparkling heart">:sparkling_heart:</span></p>



<a name="205886402"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205886402" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205886402">(Aug 04 2020 at 09:14)</a>:</h4>
<p>Seems like we are still too slow to keep up with merges+try builds.</p>



<a name="205895708"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205895708" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205895708">(Aug 04 2020 at 11:32)</a>:</h4>
<p>Mostly try builds are at fault right now</p>



<a name="205895734"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205895734" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205895734">(Aug 04 2020 at 11:32)</a>:</h4>
<p>We will never be able to keep up 100% I think...</p>



<a name="205895771"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205895771" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205895771">(Aug 04 2020 at 11:33)</a>:</h4>
<p>We have been pretty stable at ~10-12 queued commits for the last week or so.</p>



<a name="205895995"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205895995" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205895995">(Aug 04 2020 at 11:36)</a>:</h4>
<p>We can probably drop doc and servo builds from try commits, making them opt in. That'll help a bit</p>



<a name="205973970"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205973970" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205973970">(Aug 04 2020 at 23:40)</a>:</h4>
<p>If we drop <code>script-servo-2</code> all those duration problems will go away...</p>



<a name="205974006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974006" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974006">(Aug 04 2020 at 23:41)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> yeah I've been hesitant but maybe we should just do it</p>



<a name="205974033"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974033" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974033">(Aug 04 2020 at 23:41)</a>:</h4>
<p>even then it's only 33 minutes now, which is not that much</p>



<a name="205974041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974041" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974041">(Aug 04 2020 at 23:41)</a>:</h4>
<p>but will probably pull us under what we need to be</p>



<a name="205974055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974055" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974055">(Aug 04 2020 at 23:41)</a>:</h4>
<p>I guess we can make it fully opt-in or something</p>



<a name="205974065"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974065" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974065">(Aug 04 2020 at 23:41)</a>:</h4>
<p>(i.e. on both master and try builds)</p>



<a name="205974073"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974073" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974073">(Aug 04 2020 at 23:41)</a>:</h4>
<p>what fraction of a whole run is 33 minutes?</p>



<a name="205974121"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974121" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974121">(Aug 04 2020 at 23:42)</a>:</h4>
<p>a run takes 1 hour 46 minutes</p>



<a name="205974131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974131" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974131">(Aug 04 2020 at 23:42)</a>:</h4>
<p>so, 31%</p>



<a name="205974140"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974140" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974140">(Aug 04 2020 at 23:42)</a>:</h4>
<p>still sizeable for sure</p>



<a name="205974163"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974163" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974163">(Aug 04 2020 at 23:43)</a>:</h4>
<p>the only reason it takes so long is because each final crate takes basically a whole minute to build</p>



<a name="205974188"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974188" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974188">(Aug 04 2020 at 23:43)</a>:</h4>
<p>I always disable script-servo when doing local runs. I've never felt like it was especially interesting in terms of how it stress the compiler -- it doesn't look particular different to the other larger benchmarks. But it does have lots of noise due to the CGU randomness.</p>



<a name="205974199"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974199" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974199">(Aug 04 2020 at 23:43)</a>:</h4>
<p>(noise for incremental opt builds, that is)</p>



<a name="205974207"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974207" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974207">(Aug 04 2020 at 23:43)</a>:</h4>
<p>So I wouldn't be sad if it went away</p>



<a name="205974252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974252" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974252">(Aug 04 2020 at 23:44)</a>:</h4>
<p>okay, I'm thinking we just delete it</p>



<a name="205974259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974259" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974259">(Aug 04 2020 at 23:44)</a>:</h4>
<p>Ok by me</p>



<a name="205974272"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974272" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974272">(Aug 04 2020 at 23:44)</a>:</h4>
<p>I'll open up a PR doing so, we can always revert too</p>



<a name="205974296"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974296" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974296">(Aug 04 2020 at 23:44)</a>:</h4>
<p>I'm happy to r+, if you want an official second opinion</p>



<a name="205974332"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974332" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974332">(Aug 04 2020 at 23:45)</a>:</h4>
<p>sure, that works, though I can just take this comment :)</p>



<a name="205974726"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974726" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974726">(Aug 04 2020 at 23:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I'm just thinking if anybody complains, it'll be useful to have a PR to point to that has some explanation</p>



<a name="205974730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974730" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974730">(Aug 04 2020 at 23:50)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> plenty of time till the next run starts (and automatically picks this up), <a href="https://github.com/rust-lang/rustc-perf/pull/740">https://github.com/rust-lang/rustc-perf/pull/740</a></p>



<a name="205974753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205974753" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205974753">(Aug 04 2020 at 23:51)</a>:</h4>
<p>yeah agreed, I never land big changes w/o CI passing these days</p>



<a name="205975096"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205975096" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205975096">(Aug 04 2020 at 23:56)</a>:</h4>
<p>Ok, I have r+'d in the PR, merge away</p>



<a name="205975104"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205975104" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205975104">(Aug 04 2020 at 23:56)</a>:</h4>
<p>It helps that CI is now testing more stuff :)</p>



<a name="205975108"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/run%20duration/near/205975108" class="zl"><img src="https://rust-lang.github.io/zulip_archive/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://rust-lang.github.io/zulip_archive/stream/247081-t-compiler/performance/topic/run.20duration.html#205975108">(Aug 04 2020 at 23:56)</a>:</h4>
<p>i.e. bench_local and profile_local subcommands</p>



<hr><p>Last updated: Aug 07 2021 at 22:04 UTC</p>
</html>
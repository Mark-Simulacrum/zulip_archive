<html>
<head><meta charset="utf-8"><title>Auto-post perf results on PRs after merge · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html">Auto-post perf results on PRs after merge</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="251848770"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251848770" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251848770">(Sep 03 2021 at 09:18)</a>:</h4>
<p>I'm going to start looking into auto posting perf results after PRs are merged. This will significantly reduce the role of triage reports which can then focus more on ensuring that performance regressions are being addressed and potentially helping with investigations. Our heuristics are good enough that when we detect a definitely relevant performance regression it's almost always legitimate.</p>



<a name="251848789"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251848789" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251848789">(Sep 03 2021 at 09:18)</a>:</h4>
<p>Here's the issue tracking this work: <a href="https://github.com/rust-lang/rustc-perf/issues/711">https://github.com/rust-lang/rustc-perf/issues/711</a></p>



<a name="251853500"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251853500" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251853500">(Sep 03 2021 at 09:55)</a>:</h4>
<p>Taking some notes on this. </p>
<p>The first thing we need in order to make progress on this is to know when we're doing a performance run against a commit into the master branch (vs a try run). Master commits make their way into the perf queue in a bit of a round-about way. </p>
<p>The collector knows which commit to test next by calling the <a href="https://github.com/rust-lang/rustc-perf/blob/c17ff4b23f8511497fae9d7f6fabb182274aecfd/collector/src/main.rs#L642-L647"><code>/next_commit</code> endpoint</a>. This endpoint calls the <a href="https://github.com/rust-lang/rustc-perf/blob/08677aa6f5a16dc66f904a688cdc9fe031da19aa/site/src/request_handlers/next_commit.rs#L8"><code>missing_commits</code> function</a>.  This in turn gets the <a href="https://github.com/rust-lang/rustc-perf/blob/08677aa6f5a16dc66f904a688cdc9fe031da19aa/site/src/load.rs#L151"><code>master_commits</code></a> from <a href="http://triage.rust-lang.org">triage.rust-lang.org</a> and removes any commits which have <a href="https://github.com/rust-lang/rustc-perf/blob/08677aa6f5a16dc66f904a688cdc9fe031da19aa/site/src/load.rs#L239-L248">already been tested</a>. </p>
<p>Once the collector has finished running the next commit it <a href="https://github.com/rust-lang/rustc-perf/blob/master/collector/src/main.rs#L678">posts to <code>/perf/onpush</code></a>. In the handler for this endpoint, eventually the github API <a href="https://github.com/rust-lang/rustc-perf/blob/08677aa6f5a16dc66f904a688cdc9fe031da19aa/site/src/server.rs#L250">is called</a> to post a message to a the PR.</p>
<p>I'm not quite sure yet why only try commits get posted to GitHub. On first glance it looks like all finished runs should cause a comment to be posted to the relevant PR.</p>



<a name="251867588"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251867588" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251867588">(Sep 03 2021 at 11:50)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> it needs further investigation but my operating theory would be that the PR column is not populated for master commits</p>



<a name="251867600"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251867600" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251867600">(Sep 03 2021 at 11:50)</a>:</h4>
<p>(in the database)</p>



<a name="251867648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251867648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251867648">(Sep 03 2021 at 11:51)</a>:</h4>
<p>And I think the posting code sort of inadvertently depends on it? Not confident.</p>



<a name="251868091"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251868091" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251868091">(Sep 03 2021 at 11:54)</a>:</h4>
<p>Actually, I think pull_request_build might just be only used for try commits?</p>



<a name="251873665"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251873665" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251873665">(Sep 03 2021 at 12:43)</a>:</h4>
<p>Yep it looks like that's the case. We only insert into that table when we are handling a try build request</p>



<a name="251899623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251899623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251899623">(Sep 03 2021 at 15:37)</a>:</h4>
<p>Ok I have things almost working, but I've run into the real issue.</p>
<p>We don't react to individual runs being completed. Instead, on server startup and whenever someone posts to <code>/perf/onpush</code> we look to see if there are any try commits which have not yet been marked as completed. Then we mark them as completed and post to github. The completed flag is a convenient way to tell whether we have to post to GitHub or not. </p>
<p>For master commits, we don't have a database field for indicating whether we should post to GitHub, so we have no way of knowing whether a master commit has had its comparison result posted before or if we should do it.</p>



<a name="251899874"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251899874" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251899874">(Sep 03 2021 at 15:39)</a>:</h4>
<p>We could make a call to GitHub every time and look for comments that look like the comment we want to post, but this is very wasteful as we'd have to make a GitHub API call for every master commit (at least within the last 2 weeks or so).</p>



<a name="251899959"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251899959" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251899959">(Sep 03 2021 at 15:39)</a>:</h4>
<p>Or we could add a flag to the database to tell whether the comment has been posted, but this seems like a lot more work than we'd want to do for this change.</p>



<a name="251901550"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901550" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901550">(Sep 03 2021 at 15:50)</a>:</h4>
<p>I guess adding something to the database is probably the only way to make this bug free. We could put it on collector_progress as a "reported" flag</p>



<a name="251901602"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901602" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901602">(Sep 03 2021 at 15:51)</a>:</h4>
<p>I think putting all commits into the pull_request_builds table is a good way to go?</p>



<a name="251901626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901626">(Sep 03 2021 at 15:51)</a>:</h4>
<p>We can do so on /perf/next_commit endpoint</p>



<a name="251901649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901649">(Sep 03 2021 at 15:51)</a>:</h4>
<p>(obviously that can get hit multiple times, but that seems fine)</p>



<a name="251901792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901792">(Sep 03 2021 at 15:52)</a>:</h4>
<p>I imagine that the general interface to do so should be pretty easy -- we basically just need to do the equivalent command to what we do today when seeing the 'bors finished try' message</p>



<a name="251901809"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901809" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901809">(Sep 03 2021 at 15:52)</a>:</h4>
<p>am I missing something there?</p>



<a name="251901824"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251901824" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251901824">(Sep 03 2021 at 15:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">rylev</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge/near/251901550">said</a>:</p>
<blockquote>
<p>I guess adding something to the database is probably the only way to make this bug free. We could put it on collector_progress as a "reported" flag</p>
</blockquote>
<p>Nevermind this doesn't make sense. This table is used to track which step in collection we're on</p>



<a name="251902000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251902000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251902000">(Sep 03 2021 at 15:53)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge/near/251901809">said</a>:</p>
<blockquote>
<p>am I missing something there?</p>
</blockquote>
<p>Not sure yet. I need to check that the pull_request_builds table (which with this change would be poorly named) is not being used for something that assumes only try builds</p>



<a name="251902113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251902113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251902113">(Sep 03 2021 at 15:53)</a>:</h4>
<p>Yeah, we'll want to be a bit careful, but I think it should work well. It still seems appropriate, in some sense, since we're tying a commit to a PR and posting to it</p>



<a name="251904757"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251904757" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251904757">(Sep 03 2021 at 16:10)</a>:</h4>
<p>Yea, it's definitely a little messy, but it'll probably work. I might sit on it for the weekend just to see if something else pops into my head</p>



<a name="251909641"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251909641" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251909641">(Sep 03 2021 at 16:47)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I decided to push a PR anyway (<a href="https://github.com/rust-lang/rustc-perf/pull/992">https://github.com/rust-lang/rustc-perf/pull/992</a>). It should be complete, but it's still messy and of course 100% untested.</p>



<a name="251909668"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251909668" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251909668">(Sep 03 2021 at 16:47)</a>:</h4>
<p>No pressure to review. We can also chat about it next week.</p>



<a name="251909683"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251909683" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251909683">(Sep 03 2021 at 16:47)</a>:</h4>
<p>(I'm off for the day)</p>



<a name="251916107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/251916107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#251916107">(Sep 03 2021 at 17:33)</a>:</h4>
<p>Yeah I'll maybe take a look</p>



<a name="252152508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252152508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252152508">(Sep 06 2021 at 09:53)</a>:</h4>
<p>Going to merge this now. I'll keep an eye on things.</p>



<a name="252177249"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252177249" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252177249">(Sep 06 2021 at 13:40)</a>:</h4>
<p>Looks like things are working! <a href="https://github.com/rust-lang/rust/pull/88631#issuecomment-913603899">https://github.com/rust-lang/rust/pull/88631#issuecomment-913603899</a></p>



<a name="252179038"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252179038" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252179038">(Sep 06 2021 at 13:55)</a>:</h4>
<p>It looks like we should probably adjust the message text for post-merge comments, too</p>



<a name="252179696"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252179696" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252179696">(Sep 06 2021 at 14:00)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> we already do change the text. What else would you like to see?</p>



<a name="252179728"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252179728" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252179728">(Sep 06 2021 at 14:00)</a>:</h4>
<p>e.g., the waiting on review thing you noticed</p>



<a name="252179767"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252179767" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252179767">(Sep 06 2021 at 14:01)</a>:</h4>
<p>also</p>
<blockquote>
<p>Next Steps: If you can justify the regressions found in this perf run, please indicate this with @rustbot label: +perf-regression-triaged along with sufficient written justification. If you cannot justify the regressions please fix the regressions (either in this PR if it's not yet merged or in another PR), and then add the perf-regression-triaged label to this PR.</p>
</blockquote>
<p>Just editing this to be clearer that it's a future PR, but we should also likely say something like "consider reverting if it regression seems major and fix is unclear"</p>



<a name="252180183"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252180183" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252180183">(Sep 06 2021 at 14:04)</a>:</h4>
<p>Sounds good. I tried sharing as much of the comment we post after try runs, but it's probably easier to just have completely different messages.</p>



<a name="252184457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252184457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252184457">(Sep 06 2021 at 14:37)</a>:</h4>
<p>Here's a PR improving things: <a href="https://github.com/rust-lang/rustc-perf/pull/993">https://github.com/rust-lang/rustc-perf/pull/993</a></p>



<a name="252185238"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Auto-post%20perf%20results%20on%20PRs%20after%20merge/near/252185238" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Auto-post.20perf.20results.20on.20PRs.20after.20merge.html#252185238">(Sep 06 2021 at 14:43)</a>:</h4>
<p>I'm going to merge this</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
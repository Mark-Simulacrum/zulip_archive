<html>
<head><meta charset="utf-8"><title>Details page for rustdoc never has data · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html">Details page for rustdoc never has data</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="204546956"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204546956" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204546956">(Jul 21 2020 at 13:27)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> I know you fixed the 500, thanks for that. Is it possible to add that data in as well? For example if you click on <a href="https://perf.rust-lang.org/detailed-query.html?commit=48036804d2bc461b243c5d291b850e44bcca68ef&amp;benchmark=serde-doc&amp;run_name=full">https://perf.rust-lang.org/detailed-query.html?commit=48036804d2bc461b243c5d291b850e44bcca68ef&amp;benchmark=serde-doc&amp;run_name=full</a> it will say there was no data found, even though it shows up on <a href="https://perf.rust-lang.org/compare.html?start=48036804d2bc461b243c5d291b850e44bcca68ef&amp;end=d7f94516345a36ddfcd68cbdf1df835d356795c3&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=48036804d2bc461b243c5d291b850e44bcca68ef&amp;end=d7f94516345a36ddfcd68cbdf1df835d356795c3&amp;stat=instructions:u</a>.</p>



<a name="204548239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204548239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204548239">(Jul 21 2020 at 13:40)</a>:</h4>
<p>that's because self-profile wasn't supported for doc builds I thought?</p>



<a name="204548253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204548253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204548253">(Jul 21 2020 at 13:40)</a>:</h4>
<p>like, we're not collecting the data :)</p>



<a name="204549269"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204549269" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204549269">(Jul 21 2020 at 13:49)</a>:</h4>
<p>Oh hmm</p>



<a name="204549303"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204549303" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204549303">(Jul 21 2020 at 13:49)</a>:</h4>
<p>Is it possible to turn self profile on? -Z self-profile worked when I tried it locally</p>



<a name="204549480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204549480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204549480">(Jul 21 2020 at 13:50)</a>:</h4>
<p>I'm really curious how <a href="https://github.com/rust-lang/rust/pull/74518">https://github.com/rust-lang/rust/pull/74518</a> could have caused a regression</p>



<a name="204549672"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204549672" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204549672">(Jul 21 2020 at 13:52)</a>:</h4>
<p>I remember that the profile info for rustdoc isn't great now, I can make a PR adding more timings today</p>



<a name="204550083"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550083" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550083">(Jul 21 2020 at 13:55)</a>:</h4>
<p>I would expect -doc benchmarks to easily regress, e.g. when anything is added to the standard library :P</p>



<a name="204550228"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550228" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550228">(Jul 21 2020 at 13:56)</a>:</h4>
<p>it would be nice to either have two tables or have a way to toggle <code>-doc</code> off (maybe like the existing toggles but for <code>-check</code>, <code>-debug</code>, <code>-opt</code> and <code>-doc</code>?)</p>



<a name="204550260"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550260" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550260">(Jul 21 2020 at 13:56)</a>:</h4>
<blockquote>
<p>I would expect -doc benchmarks to easily regress, e.g. when anything is added to the standard library :P</p>
</blockquote>
<p>This was for serde though</p>



<a name="204550273"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550273" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550273">(Jul 21 2020 at 13:56)</a>:</h4>
<p>So rustdoc wasn't running on std</p>



<a name="204550294"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550294" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550294">(Jul 21 2020 at 13:57)</a>:</h4>
<p>rustdoc will still see std</p>



<a name="204550323"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550323" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550323">(Jul 21 2020 at 13:57)</a>:</h4>
<p>like rustdoc easily regresses <em>on hello world</em></p>



<a name="204550347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550347">(Jul 21 2020 at 13:57)</a>:</h4>
<p>lol</p>



<a name="204550385"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550385" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550385">(Jul 21 2020 at 13:57)</a>:</h4>
<p>it's interesting to watch but also even more sensitive than <code>rustc</code></p>



<a name="204550516"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550516" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550516">(Jul 21 2020 at 13:58)</a>:</h4>
<p>likely due to inefficiencies which amplify otherwise small changes, but also some quadratic-ish stuff</p>



<a name="204550578"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550578" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550578">(Jul 21 2020 at 13:58)</a>:</h4>
<p>yeah if we want we could probably turn self-profile for rustdoc on -- I didn't know it worked</p>



<a name="204550580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550580">(Jul 21 2020 at 13:58)</a>:</h4>
<p>like I'm pretty sure <code>rustdoc</code> will more often than not gather every <code>impl</code> in the crate graph</p>



<a name="204550650"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550650" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550650">(Jul 21 2020 at 13:59)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> <code>rustdoc --help</code> is weird but I think it inherits most of the CLI from <code>rustc</code>, especially the entirety of <code>-Z</code></p>



<a name="204550675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550675">(Jul 21 2020 at 13:59)</a>:</h4>
<p>well for whatever reason I put up a commit removing it</p>



<a name="204550691"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550691" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550691">(Jul 21 2020 at 13:59)</a>:</h4>
<p>I found this out when <span class="user-mention" data-user-id="232545">@Joshua Nelson</span> tried <code>-Z treat-err-as-bug</code> and "it just worked"</p>



<a name="204550692"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550692" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550692">(Jul 21 2020 at 13:59)</a>:</h4>
<p>I forget why</p>



<a name="204550725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550725">(Jul 21 2020 at 13:59)</a>:</h4>
<p>anyway we can try a revert of that I suppose</p>



<a name="204550799"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550799" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550799">(Jul 21 2020 at 14:00)</a>:</h4>
<p>and then we were looking at <code>rustdoc -Z self-profile</code> for a while</p>



<a name="204550861"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204550861" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204550861">(Jul 21 2020 at 14:00)</a>:</h4>
<p>some interesting stuff like a lack of labelled time on the outermost level, leading to <code>&lt;unknown&gt;</code> being the top entry :P</p>



<a name="204553226"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204553226" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204553226">(Jul 21 2020 at 14:21)</a>:</h4>
<p>Yeah I was going to make a PR fixing that today</p>



<a name="204553262"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204553262" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204553262">(Jul 21 2020 at 14:21)</a>:</h4>
<blockquote>
<p>I forget why</p>
</blockquote>
<p>This might have been while <code>cargo rustdoc</code> was still broken</p>



<a name="204553620"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204553620" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204553620">(Jul 21 2020 at 14:24)</a>:</h4>
<p>hm yeah perhaps</p>



<a name="204559695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204559695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204559695">(Jul 21 2020 at 15:09)</a>:</h4>
<p><span class="user-mention silent" data-user-id="232545">Joshua Nelson</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Details.20page.20for.20rustdoc.20never.20has.20data/near/204553226">said</a>:</p>
<blockquote>
<p>Yeah I was going to make a PR fixing that today</p>
</blockquote>
<p>done: <a href="https://github.com/rust-lang/rust/pull/74590">https://github.com/rust-lang/rust/pull/74590</a></p>



<a name="204605773"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605773" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605773">(Jul 21 2020 at 21:38)</a>:</h4>
<p>When I did perf triage yesterday it was the first time that rustdoc results were available. I treated them like check/debug/opt results, but I wasn't sure if that was best. Maybe I should require a larger change in rustdoc results to report an improvement/regression?</p>



<a name="204605786"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605786" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605786">(Jul 21 2020 at 21:38)</a>:</h4>
<p>For check/opt/debug I report if any change exceed 1% (more or less)</p>



<a name="204605858"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605858" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605858">(Jul 21 2020 at 21:39)</a>:</h4>
<p>well rustdoc is ... not very performant</p>



<a name="204605863"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605863" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605863">(Jul 21 2020 at 21:39)</a>:</h4>
<p><span class="user-mention" data-user-id="120989">@njn</span> you can almost entirely ignore -doc, rustdoc can easily amplify rustc regressions</p>



<a name="204605870"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605870" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605870">(Jul 21 2020 at 21:39)</a>:</h4>
<p>for instance, one of the things we do <em>on every crate</em> is look at every implementation of every trait</p>



<a name="204605885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605885">(Jul 21 2020 at 21:39)</a>:</h4>
<p>and absolute vs relative makes this even worse</p>



<a name="204605887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605887">(Jul 21 2020 at 21:39)</a>:</h4>
<p>so e.g. adding a new trait to std will make rustdoc slower</p>



<a name="204605948"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605948" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605948">(Jul 21 2020 at 21:40)</a>:</h4>
<p>Ok, ignoring rustdoc entirely is certainly an easy solution :)</p>



<a name="204605965"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605965" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605965">(Jul 21 2020 at 21:40)</a>:</h4>
<p>I think 5% would be good to report on though</p>



<a name="204605968"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605968" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605968">(Jul 21 2020 at 21:40)</a>:</h4>
<p>this is why I want a toggle to just hide certain kinds of runs</p>



<a name="204605992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204605992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204605992">(Jul 21 2020 at 21:40)</a>:</h4>
<p>well, 5% if there are no rustc regressions more than 1-2% :P</p>



<a name="204606021"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204606021" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204606021">(Jul 21 2020 at 21:41)</a>:</h4>
<p>I think we measure rustdoc for the sake of the data, and for rustdoc changes specifically, anything else is not as actionable</p>



<a name="204606204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204606204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204606204">(Jul 21 2020 at 21:42)</a>:</h4>
<p>yeah hiding rustdoc by default seems reasonable, at least to start</p>



<a name="204606221"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204606221" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204606221">(Jul 21 2020 at 21:42)</a>:</h4>
<p>should be a relatively easy patch if someone wants to spin that up</p>



<a name="204606295"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204606295" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> eddyb <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204606295">(Jul 21 2020 at 21:43)</a>:</h4>
<p>we can leave it in by default, just in case there's an outlier and it caught something weird nothing else did, a checkbox (just like the ones we have for <code>full</code>/<code>incr-full</code>/etc.) should be doable though</p>



<a name="204606744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204606744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204606744">(Jul 21 2020 at 21:48)</a>:</h4>
<p>the existing filter doesn't let you say "ignore rustdoc", but you can look at check/debug/opt in turn, which is almost as good</p>



<a name="204606768"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Details%20page%20for%20rustdoc%20never%20has%20data/near/204606768" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> njn <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Details.20page.20for.20rustdoc.20never.20has.20data.html#204606768">(Jul 21 2020 at 21:48)</a>:</h4>
<p>Having a threshold is fine, 5% or 10% or something</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
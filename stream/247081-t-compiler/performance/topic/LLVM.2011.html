<html>
<head><meta charset="utf-8"><title>LLVM 11 · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html">LLVM 11</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="204251410"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204251410" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204251410">(Jul 17 2020 at 19:59)</a>:</h4>
<p>In case you all haven't seen the LLVM 11 upgrade in <a href="https://github.com/rust-lang/rust/issues/73526">#73526</a>, I hope you'll be satisfied by the recouped performance:<br>
<a href="https://perf.rust-lang.org/compare.html?start=7e11379f3b4c376fbb9a6c4d44f3286ccc28d149&amp;end=adff1be71c9e1b3abb95b761d9caa41e4e1b9096">https://perf.rust-lang.org/compare.html?start=7e11379f3b4c376fbb9a6c4d44f3286ccc28d149&amp;end=adff1be71c9e1b3abb95b761d9caa41e4e1b9096</a></p>



<a name="204252340"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204252340" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Eh2406 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204252340">(Jul 17 2020 at 20:07)</a>:</h4>
<p>Wow</p>



<a name="204254778"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204254778" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204254778">(Jul 17 2020 at 20:26)</a>:</h4>
<p>Awesome.</p>



<a name="204254792"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204254792" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Josh Triplett <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204254792">(Jul 17 2020 at 20:27)</a>:</h4>
<p>Has anyone tried out LLVM 12 prereleases yet?</p>



<a name="204256453"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204256453" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> cuviper <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204256453">(Jul 17 2020 at 20:40)</a>:</h4>
<p>LLVM 11 just branched this week, not released yet. I don't expect 12 to be much different right now.</p>



<a name="204296373"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204296373" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204296373">(Jul 18 2020 at 11:12)</a>:</h4>
<p>Neat! Any hints on what changes helped the most?</p>



<a name="204297638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204297638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> panstromek <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204297638">(Jul 18 2020 at 11:51)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116155">Jake Goulding</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/LLVM.2011/near/204296373">said</a>:</p>
<blockquote>
<p>Neat! Any hints on what changes helped the most?</p>
</blockquote>
<p>Since <span class="user-mention" data-user-id="133224">@Nikita Popov</span>  set up <a href="http://llvm-compile-time-tracker.com/">http://llvm-compile-time-tracker.com/</a> the numbers have been steadily going down (same trend as with rustc) and I know they submitted some of those perf patches.</p>



<a name="204299239"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204299239" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jake Goulding <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204299239">(Jul 18 2020 at 12:43)</a>:</h4>
<p>Hmm, based on the url, I’d assume that was time to compile llvm itself, while I think the perf results are running the rust compiler, so I’m not seeing the direct connection.</p>



<a name="204301738"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204301738" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mati865 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204301738">(Jul 18 2020 at 14:01)</a>:</h4>
<p>No, just like for perf.rlo for Rust, <a href="http://llvm-compile-time-tracker.com">http://llvm-compile-time-tracker.com</a> measures how long it takes to compile code with LLVM.</p>



<a name="204303462"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204303462" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> panstromek <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204303462">(Jul 18 2020 at 14:53)</a>:</h4>
<p><span class="user-mention" data-user-id="133224">@Nikita Popov</span>  Probably has more info on the improvements (I thought tagging him is enough to notify him but Zulip says he's not subscribed, so I subscribed him. I hope that's ok, I'm new to zulip). I briefly looked to some of these patches, and they were mostly microoptimizations similar to what Nicholas does in Rustc</p>



<a name="204314598"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204314598" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204314598">(Jul 18 2020 at 19:35)</a>:</h4>
<p>Yes, it's mostly a combination of micro-optimization and dropping expensive analysis where it is not useful.</p>



<a name="204314653"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/LLVM%2011/near/204314653" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Nikita Popov <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/LLVM.2011.html#204314653">(Jul 18 2020 at 19:37)</a>:</h4>
<p>I have a writeup for some of the older changes here: <a href="https://nikic.github.io/2020/05/10/Make-LLVM-fast-again.html">https://nikic.github.io/2020/05/10/Make-LLVM-fast-again.html</a></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
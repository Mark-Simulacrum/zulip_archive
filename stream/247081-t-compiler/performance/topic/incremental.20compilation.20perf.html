<html>
<head><meta charset="utf-8"><title>incremental compilation perf · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html">incremental compilation perf</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="273497393"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273497393" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273497393">(Feb 28 2022 at 14:33)</a>:</h4>
<p>Inspired by a recent discussion on the future of incremental compilation, I got wondering if there are performance costs to the end user, having to maintain all the data related to incremental compilation, so I did this quick test, building rust-analyzer with 1.59.0 (which disables inc-comp by default):</p>
<div class="codehilite"><pre><span></span><code>❯ hyperfine --prepare &#39;cargo clean&#39; &#39;RUSTC_FORCE_INCREMENTAL=1 cargo build -j8&#39; &#39;cargo build -j8&#39;
Benchmark #1: RUSTC_FORCE_INCREMENTAL=1 cargo build -j8
  Time (mean ± σ):     334.217 s ± 16.605 s    [User: 235.449 s, System: 39.735 s]
  Range (min … max):   315.745 s … 359.909 s    10 runs

Benchmark #2: cargo build -j8
  Time (mean ± σ):     238.375 s ± 32.004 s    [User: 207.741 s, System: 30.542 s]
  Range (min … max):   215.619 s … 314.545 s    10 runs

Summary
  &#39;cargo build -j8&#39; ran
    1.40 ± 0.20 times faster than &#39;RUSTC_FORCE_INCREMENTAL=1 cargo build -j8&#39;
</code></pre></div>



<a name="273497492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273497492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273497492">(Feb 28 2022 at 14:33)</a>:</h4>
<p>the data is a bit noisy, but I didn't expect to see this much of a slowdown</p>



<a name="273497955"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273497955" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273497955">(Feb 28 2022 at 14:37)</a>:</h4>
<p>Odd, the difference isn't that big on perf.rlo. (full vs. incremental full). <a href="https://perf.rust-lang.org/dashboard.html">https://perf.rust-lang.org/dashboard.html</a></p>



<a name="273498137"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273498137" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273498137">(Feb 28 2022 at 14:38)</a>:</h4>
<p>Maybe it also affects the scheduling of dependencies and perf only measures the main crate build?</p>



<a name="273498150"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273498150" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273498150">(Feb 28 2022 at 14:38)</a>:</h4>
<p>One likely difference is that I'm running on a machine with some very slow disks (network filesystem)</p>



<a name="273498220"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273498220" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273498220">(Feb 28 2022 at 14:38)</a>:</h4>
<p>Ah</p>



<a name="273498473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273498473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273498473">(Feb 28 2022 at 14:40)</a>:</h4>
<p>NFS? Its close-to-open consistency is pretty bad for keeping things in the page cache as I understand it.</p>



<a name="273498565"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273498565" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273498565">(Feb 28 2022 at 14:41)</a>:</h4>
<p>to be more precise, the filesystem has pretty good performance for very large sequential writes, but really bad latency.  yeah, it's NFS</p>



<a name="273498617"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273498617" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273498617">(Feb 28 2022 at 14:41)</a>:</h4>
<p>There doesn't seem to be much difference on an SSD</p>



<a name="273499334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273499334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273499334">(Feb 28 2022 at 14:46)</a>:</h4>
<p>If you have a strong reason to use NFS, maybe do a second mount with all the consistency stuff disabled for temp dirs and then symlink/bind-mount the build dir to that mount?</p>



<a name="273499935"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273499935" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273499935">(Feb 28 2022 at 14:50)</a>:</h4>
<p>The context for me is using rust at work.  We have a very big HPC cluster where I generally do coding work.  I have a small (30GB) shared NFS home directory, and a large (1TB) shared work directory (also NFS, but is high-latency).   rustup/cargo caches are too big to put in my home directory, so I put them in this 1TB work dir</p>



<a name="273500587"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273500587" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273500587">(Feb 28 2022 at 14:56)</a>:</h4>
<p>(It's actually generally faster to install rust on a local disk whenever I log into an HPC node, instead of using a shared install, but this can be a bit tedious)</p>



<a name="273501280"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273501280" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273501280">(Feb 28 2022 at 15:00)</a>:</h4>
<p>but all of this is making me wonder:  how carefully should we look at disk IO when doing perf measurements?</p>



<a name="273506919"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273506919" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273506919">(Feb 28 2022 at 15:34)</a>:</h4>
<p>Rustc does close to random reads of the crate metadata AFAIK. I don't think it is possible to improve this much without giving up on lazy decoding (which should save a lot of time as often only a small part of the metadata is needed)</p>



<a name="273509204"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273509204" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273509204">(Feb 28 2022 at 15:48)</a>:</h4>
<p>You can't even force dynamic linking I believe: <a href="https://github.com/rust-lang/rust/blob/55111d656f7ecd511ebfad09d3b4b41e44cbcc23/compiler/rustc_metadata/src/dependency_format.rs#L102-L103">https://github.com/rust-lang/rust/blob/55111d656f7ecd511ebfad09d3b4b41e44cbcc23/compiler/rustc_metadata/src/dependency_format.rs#L102-L103</a></p>



<a name="273509206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273509206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273509206">(Feb 28 2022 at 15:48)</a>:</h4>
<div class="codehilite"><pre><span></span><code>Benchmark 1: RUSTC_FORCE_INCREMENTAL=1 cargo build
  Time (mean ± σ):     35.809 s ±  0.240 s    [User: 178.711 s, System: 18.748 s]
  Range (min … max):   35.465 s … 36.134 s    10 runs

Benchmark 2: cargo build
  Time (mean ± σ):     28.656 s ±  0.198 s    [User: 160.300 s, System: 16.592 s]
  Range (min … max):   28.277 s … 29.010 s    10 runs

Summary
  &#39;cargo build&#39; ran
    1.25 ± 0.01 times faster than &#39;RUSTC_FORCE_INCREMENTAL=1 cargo build&#39;
</code></pre></div>



<a name="273510859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273510859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273510859">(Feb 28 2022 at 15:58)</a>:</h4>
<p>I ran another test, on a personal machine.  still using NFS, but over a 10gbe link to SSDs (so probably the best case for NFS):</p>
<div class="codehilite"><pre><span></span><code>  &#39;cargo +stable build&#39; ran
    1.27 ± 0.03 times faster than &#39;RUSTC_FORCE_INCREMENTAL=1 cargo +stable build&#39;
</code></pre></div>
<p>So pretty much the same as your system <span class="user-mention" data-user-id="203546">@Laurențiu</span></p>



<a name="273511132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273511132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273511132">(Feb 28 2022 at 16:00)</a>:</h4>
<p><del>Weird, I get the same numbers with and without <code>sccache</code>.</del> Ah, not the same, but pretty close.</p>



<a name="273519428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273519428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273519428">(Feb 28 2022 at 16:54)</a>:</h4>
<p><span class="user-mention silent" data-user-id="133247">bjorn3</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/incremental.20compilation.20perf/near/273506919">said</a>:</p>
<blockquote>
<p>Rustc does close to random reads of the crate metadata AFAIK. I don't think it is possible to improve this much without giving up on lazy decoding (which should save a lot of time as often only a small part of the metadata is needed)</p>
</blockquote>
<p>We could prefault the whole file. I tried that, it was bad for max-rss and cycles but might be net-positive in cases like this.</p>



<a name="273525498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273525498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273525498">(Feb 28 2022 at 17:35)</a>:</h4>
<p>But 200-350s is all-around terrible, incremental or not. Locally it takes 25-35 seconds. NFS is a much bigger issue here.</p>



<a name="273534618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273534618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273534618">(Feb 28 2022 at 18:40)</a>:</h4>
<p>yeah, it's pretty bad :)    I'm impressed you can get r-a to build in 35 second.  that's more than twice as fast as my fastest computer, even with fast local SSD.</p>



<a name="273534680"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273534680" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273534680">(Feb 28 2022 at 18:40)</a>:</h4>
<p>but i guess the thing i wanted to highlight in this thread is the 25% to 40% slowdown just by enabling incremental compilation</p>



<a name="273535769"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273535769" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Laurențiu <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273535769">(Feb 28 2022 at 18:49)</a>:</h4>
<p>Something something 5950X</p>



<a name="273538797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273538797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273538797">(Feb 28 2022 at 19:11)</a>:</h4>
<p>It doesn't seem to be the parallelism. It only builds 11s slower with 8 threads instead of 48.</p>
<div class="codehilite"><pre><span></span><code>cargo clean ; RUSTC_WRAPPER=&quot;&quot; CARGO_INCREMENTAL=0 taskset -c 0-7 cargo build -j8
    Finished dev [unoptimized] target(s) in 36.78s
cargo clean ; RUSTC_WRAPPER=&quot;&quot; CARGO_INCREMENTAL=0 RUSTFLAGS=&quot;-Clink-arg=-fuse-ld=lld&quot; cargo build -j48
    Finished dev [unoptimized] target(s) in 25.64s
</code></pre></div>



<a name="273538805"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273538805" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273538805">(Feb 28 2022 at 19:11)</a>:</h4>
<p>this is on nightly</p>



<a name="273825327"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273825327" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273825327">(Mar 02 2022 at 15:39)</a>:</h4>
<p>rustc also acquires file locks when doing incremental compilation. I could imagine that that's not particularly fast with NFS (if it works at all)</p>



<a name="273831865"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273831865" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273831865">(Mar 02 2022 at 16:14)</a>:</h4>
<p>locks on directories to get consistency between multiple files or locking individual files to avoid partial overwrites?</p>



<a name="273832905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273832905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273832905">(Mar 02 2022 at 16:21)</a>:</h4>
<p>either way, maybe cargo should detect network filesystems and warn about them?</p>



<a name="273834791"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273834791" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273834791">(Mar 02 2022 at 16:32)</a>:</h4>
<p>I think it's locking a single file to signal to other rustc instances that the corresponding cache directory is currently in use and must not be garbage collected:<br>
<a href="https://github.com/rust-lang/rust/blob/c42d846add941a26bd254911e16f02c4a3f9346f/compiler/rustc_incremental/src/persist/fs.rs#L505-L552">https://github.com/rust-lang/rust/blob/c42d846add941a26bd254911e16f02c4a3f9346f/compiler/rustc_incremental/src/persist/fs.rs#L505-L552</a></p>



<a name="273837661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273837661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Andrew Chin (eminence) <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273837661">(Mar 02 2022 at 16:50)</a>:</h4>
<p>I'd be surprised if file locking alone was causing a 20% slowdown</p>



<a name="273975362"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/incremental%20compilation%20perf/near/273975362" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> mw <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/incremental.20compilation.20perf.html#273975362">(Mar 03 2022 at 13:55)</a>:</h4>
<p><span class="user-mention silent" data-user-id="222286">Andrew Chin (eminence)</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/incremental.20compilation.20perf/near/273837661">said</a>:</p>
<blockquote>
<p>I'd be surprised if file locking alone was causing a 20% slowdown</p>
</blockquote>
<p>Well, that wasn't what I said. However, if file-locking on NFS involved some kind of cross-network synchronization then I could imagine a significant slowdown.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
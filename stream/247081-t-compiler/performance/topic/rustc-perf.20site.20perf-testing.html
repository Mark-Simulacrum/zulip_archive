<html>
<head><meta charset="utf-8"><title>rustc-perf site perf-testing · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html">rustc-perf site perf-testing</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="250385274"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250385274" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250385274">(Aug 23 2021 at 17:37)</a>:</h4>
<p>I'd like to be able to test some changes that may improve the performance of the rustc-perf site itself, but not having a large database to work with makes that difficult. Is there any reasonable way to get access to all of the data in the production DB? I think for my purposes, only read access is needed, FWIW.</p>



<a name="250386086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250386086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250386086">(Aug 23 2021 at 17:44)</a>:</h4>
<p>Excluding self-profile data, the sqlite export is only a few months out of date and had a month's worth of data</p>



<a name="250386115"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250386115" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250386115">(Aug 23 2021 at 17:44)</a>:</h4>
<p>(mostly only partial because the files get pretty big and exports are slow)</p>



<a name="250386329"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250386329" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250386329">(Aug 23 2021 at 17:46)</a>:</h4>
<p>aws rds has a database export feature, but it's to parquet files -- I'd guess we could utilize that if we wanted to have something operating in the long run, but seems potentially complicated.</p>



<a name="250386342"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250386342" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250386342">(Aug 23 2021 at 17:46)</a>:</h4>
<p>(<a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ExportSnapshot.html#USER_ExportSnapshot.Overview">https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_ExportSnapshot.html#USER_ExportSnapshot.Overview</a>)</p>



<a name="250386569"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250386569" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250386569">(Aug 23 2021 at 17:48)</a>:</h4>
<p><span class="user-mention" data-user-id="306073">@Tyson Nottingham</span> the export is at <a href="http://perf-data.rust-lang.org/export.db.sz">perf-data.rust-lang.org/export.db.sz</a> if you want that (snappy compressed)</p>



<a name="250386626"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250386626" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250386626">(Aug 23 2021 at 17:48)</a>:</h4>
<p>Sweet, I think the export should work. Thanks <span class="user-mention" data-user-id="116122">@simulacrum</span>.</p>



<a name="250387113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250387113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250387113">(Aug 23 2021 at 17:52)</a>:</h4>
<p>FWIW, the profiles I've seen are <em>really</em> different in some cases between a local sqlite and the postgres backend, mostly down to the network round-trip for postgres, I think</p>



<a name="250387148"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250387148" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250387148">(Aug 23 2021 at 17:53)</a>:</h4>
<p>(e.g., many small queries without parallelism is perfectly reasonable for sqlite but really kills perf with postgres)</p>



<a name="250387157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250387157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250387157">(Aug 23 2021 at 17:53)</a>:</h4>
<p>but, in any case, happy to see improvements :)</p>



<a name="250387247"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/250387247" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#250387247">(Aug 23 2021 at 17:54)</a>:</h4>
<p>Right. Luckily the thing I'm testing doesn't involve optimizing the DB accesses.</p>



<a name="255794818"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/255794818" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Tyson Nottingham <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#255794818">(Oct 01 2021 at 19:22)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span>, are we good to remove the old graph endpoint and page (<code>index-old.html</code>) at this point? I'm experimenting with some changes and I'm wondering if I should unify <code>handle_graph</code> and <code>handle_graph_new</code>, and remove support for the old graph stuff.</p>



<a name="255794905"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/255794905" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#255794905">(Oct 01 2021 at 19:23)</a>:</h4>
<p>Yeah should be fine</p>



<a name="255794925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/rustc-perf%20site%20perf-testing/near/255794925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/rustc-perf.20site.20perf-testing.html#255794925">(Oct 01 2021 at 19:23)</a>:</h4>
<p>I don't think it's being used</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
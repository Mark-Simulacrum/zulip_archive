<html>
<head><meta charset="utf-8"><title>perf triage 2021 11 02 · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html">perf triage 2021 11 02</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="260002018"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260002018" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260002018">(Nov 02 2021 at 14:23)</a>:</h4>
<p>I’m on deck to do performance triage today. I’ve got a bunch of other meeting starting in about 30min, so I’ll do what I can now, and get back to the rest after I’m back from those</p>



<a name="260049982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260049982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260049982">(Nov 02 2021 at 20:03)</a>:</h4>
<p>So, I normally don’t dig into the performance improvements</p>



<a name="260050011"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050011" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050011">(Nov 02 2021 at 20:03)</a>:</h4>
<p>but I’m curious about <a href="https://github.com/rust-lang/rust/pull/90314#issuecomment-952381864">https://github.com/rust-lang/rust/pull/90314#issuecomment-952381864</a></p>



<a name="260050169"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050169" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050169">(Nov 02 2021 at 20:04)</a>:</h4>
<p>it truly makes no sense that those four changes, rolled up, would bring about such a broad set of improvements (according to a cursory skim of the perf report, that is). Honestly, it makes me question whether our significance/noise metrics have been tuned properly.</p>



<a name="260050250"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050250" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050250">(Nov 02 2021 at 20:05)</a>:</h4>
<p>e.g.: Maybe we shouldn’t be reporting about changes to helloworld that are less than 10% ?</p>



<a name="260050320"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050320" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050320">(Nov 02 2021 at 20:05)</a>:</h4>
<p>I guess the signficance threshold <em>should</em> be capturing this...</p>



<a name="260050469"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050469" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050469">(Nov 02 2021 at 20:06)</a>:</h4>
<p>yes, it is</p>



<a name="260050478"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050478" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050478">(Nov 02 2021 at 20:06)</a>:</h4>
<p>I think the improvement is real</p>



<a name="260050562"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260050562" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260050562">(Nov 02 2021 at 20:07)</a>:</h4>
<p>but not sure what the cause is without local cachegrind or something</p>



<a name="260052887"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260052887" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Jack Huey <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260052887">(Nov 02 2021 at 20:23)</a>:</h4>
<p>how could that be real? No compiler files were touched? Some difference in inlining of std?</p>



<a name="260053187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260053187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260053187">(Nov 02 2021 at 20:25)</a>:</h4>
<p>yeah, std something something probably, with the removal of that function being the causing</p>



<a name="260054353"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260054353" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260054353">(Nov 02 2021 at 20:34)</a>:</h4>
<p>Filed PR for this week’s report: <a href="https://github.com/rust-lang/rustc-perf/pull/1088">https://github.com/rust-lang/rustc-perf/pull/1088</a></p>



<a name="260054460"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260054460" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> andjo403 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260054460">(Nov 02 2021 at 20:35)</a>:</h4>
<p>almost the reverse when lerp was added <a href="https://perf.rust-lang.org/compare.html?start=149f4836dd6d9e789a26dca16dc034588866894e&amp;end=a6bc43ea846ee568ef4e890d4ac2a4cc03475bfc">https://perf.rust-lang.org/compare.html?start=149f4836dd6d9e789a26dca16dc034588866894e&amp;end=a6bc43ea846ee568ef4e890d4ac2a4cc03475bfc</a> so it seems like the improvements is due to that change</p>



<a name="260055044"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260055044" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260055044">(Nov 02 2021 at 20:40)</a>:</h4>
<p>good idea</p>



<a name="260055055"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/perf%20triage%202021%2011%2002/near/260055055" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/perf.20triage.202021.2011.2002.html#260055055">(Nov 02 2021 at 20:40)</a>:</h4>
<p>(to look at that reference point)</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
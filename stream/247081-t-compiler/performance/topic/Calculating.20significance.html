<html>
<head><meta charset="utf-8"><title>Calculating significance · t-compiler/performance · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/index.html">t-compiler/performance</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html">Calculating significance</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="252452729"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252452729" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252452729">(Sep 08 2021 at 12:44)</a>:</h4>
<p>This PR formalizes how we think about significance to use IQR fencing: <a href="https://github.com/rust-lang/rustc-perf/pull/996">https://github.com/rust-lang/rustc-perf/pull/996</a></p>
<p>I'd like to see how this feels before we start changing how we determine relevance</p>



<a name="252459635"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252459635" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252459635">(Sep 08 2021 at 13:32)</a>:</h4>
<p>Just to clarify, because I cannot tell from a quick skim: The description of this PR makes it sound like you have identified a formal way of stating the existing behavior, and are documenting it. But the actual code in the PR is changing mechanism. I cannot immediately tell if the <em>behavior</em> is expected to change, and if so, if it is expected to change significantly. Can you revise the description to clarify that point?</p>



<a name="252466753"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252466753" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252466753">(Sep 08 2021 at 14:13)</a>:</h4>
<p><span class="user-mention" data-user-id="116083">@pnkfelix</span> I've updated the description - can you let me know if it's clearer now?</p>



<a name="252467690"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252467690" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252467690">(Sep 08 2021 at 14:19)</a>:</h4>
<p>It makes sense to me.</p>



<a name="252467758"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252467758" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252467758">(Sep 08 2021 at 14:19)</a>:</h4>
<p>Do we have some rough heuristics on how this changes on several past comparisons? About the same?</p>



<a name="252469639"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252469639" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252469639">(Sep 08 2021 at 14:29)</a>:</h4>
<p>Based on local data (which is not current but still is real data), this moves the significance threshold lower for most test cases meaning we might see slightly more changes showing as significant.</p>



<a name="252469836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252469836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252469836">(Sep 08 2021 at 14:30)</a>:</h4>
<p>Hm, OK. Well, seems like we should try it -- we can always adjust the 1.5x IQR, though that is what ~all the books/teachers I've had said too.</p>



<a name="252469888"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252469888" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252469888">(Sep 08 2021 at 14:30)</a>:</h4>
<p>Spot checking a few comparisons, I've not seen any that change in any real way (only 1 or 2 more test results show as significant)</p>



<a name="252470559"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252470559" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252470559">(Sep 08 2021 at 14:34)</a>:</h4>
<p>Doing a comparison of the triage between the change and what's in production, I certainly do see more being shown in the locally produced triage</p>



<a name="252472006"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252472006" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252472006">(Sep 08 2021 at 14:41)</a>:</h4>
<p>It's interesting that this leads to extremely low significance thresholds in some cases. Here are the smallest 20 (in percent):</p>
<blockquote>
<p>[0.006141626758647771, 0.009485208781491627, 0.009812727249607738, 0.011288450298813804, 0.011603366741209317, 0.011895324253082396, 0.0122320508808938, 0.014604775660401702, 0.015308981496950955, 0.015348446017310249, 0.018642476332368527, 0.019002110731706576, 0.019611544407912067, 0.020218533838182083, 0.020497254736786496, 0.023203774929392882, 0.024230835736529163, 0.024605265873767993, 0.025748695326691967, 0.025836559024959155, 0.026304072373986187]</p>
</blockquote>



<a name="252472127"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252472127" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252472127">(Sep 08 2021 at 14:42)</a>:</h4>
<p>Seems positive, generally, since presumably that means those are low-variance benchmarks</p>



<a name="252472366"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252472366" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252472366">(Sep 08 2021 at 14:43)</a>:</h4>
<p>Yes, the nice thing about this change is that it's much easier to reason about and give us good impressions of the reliability of benchmarks, but it might me we have to rethink how we reinterpret these results.</p>



<a name="252473041"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252473041" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252473041">(Sep 08 2021 at 14:47)</a>:</h4>
<p>With this change we don't really take the magnitude of the change result into account. If a test case has a very low significance threshold and a test result exceeds that but still only represents a very small change in absolute terms we probably don't care as much</p>



<a name="252473094"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252473094" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252473094">(Sep 08 2021 at 14:47)</a>:</h4>
<p>yeah</p>



<a name="252473189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252473189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252473189">(Sep 08 2021 at 14:47)</a>:</h4>
<p>I imagine we need to both weigh how much over the threshold the result goes <em>and</em> how big it is in absolute terms</p>



<a name="252478463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252478463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pnkfelix <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252478463">(Sep 08 2021 at 15:13)</a>:</h4>
<p><span class="user-mention silent" data-user-id="224872">rylev</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Calculating.20significance/near/252466753">said</a>:</p>
<blockquote>
<p><span class="user-mention silent" data-user-id="116083">pnkfelix</span> I've updated the description - can you let me know if it's clearer now?</p>
</blockquote>
<p>Yes much clearer, thank you for doing that.</p>



<a name="252481817"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252481817" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> pachi <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252481817">(Sep 08 2021 at 15:32)</a>:</h4>
<p>@rylev In statistics, when checking hypothesis, it's good to indicate both significance and effect size, so that's it</p>



<a name="252616740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252616740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252616740">(Sep 09 2021 at 12:30)</a>:</h4>
<p>I put all this behind a query param so we can see how it works in practice without having to commit to it</p>



<a name="252626859"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252626859" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252626859">(Sep 09 2021 at 13:38)</a>:</h4>
<p>That is live now. Check out <a href="https://perf.rust-lang.org/compare.html?start=362e0f55eb1f36d279e5c4a58fb0fe5f9a2c579d&amp;end=ccffcafd55e58f769d4b0efc0064bf65e76998e4&amp;calcNewSig=true">this</a>. Notice the <code>calcNewSig</code> param query. Removing that goes back to the old way of modifying significance so we can easily see how things change.</p>



<a name="252626993"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252626993" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252626993">(Sep 09 2021 at 13:39)</a>:</h4>
<p>The new scheme is definitely harder to interpret because the results don't show historical data so a change of 0.05% can show up for a test result but it's hard to know how much this exceeds the historical data.</p>



<a name="252627638"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252627638" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252627638">(Sep 09 2021 at 13:43)</a>:</h4>
<p>Maybe we can add a column (or two, on either side) for the IQR? Sort of like how criterion displays results:</p>
<p>alloc                   time:   [2.5094 ms 2.5306 ms 2.5553 ms]</p>



<a name="252627675"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252627675" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252627675">(Sep 09 2021 at 13:43)</a>:</h4>
<p>(except it'd be all percentages in our case, I suppose)</p>



<a name="252627951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252627951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252627951">(Sep 09 2021 at 13:45)</a>:</h4>
<p>Or maybe a single column which is "how much of an outlier we are", something like (value-(median+IQR*1.5))/median</p>



<a name="252628835"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252628835" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252628835">(Sep 09 2021 at 13:50)</a>:</h4>
<p>Here's an interesting <a href="https://perf.rust-lang.org/compare.html?start=c9db3e0fbc84d8409285698486375f080d361ef3&amp;end=47ae8deb8a35030bdc4e502b03400800864cc264&amp;calcNewSig=true">comparison</a>. With the new scheme, there are lots of significant results (albeit quite small), but the old scheme barely showed any significant results.</p>



<a name="252629009"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252629009" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252629009">(Sep 09 2021 at 13:51)</a>:</h4>
<p>Hm. I think one thing that's interesting is that e.g. that comparison I doubt we'd <em>in practice</em> ever find the motivation to investigate</p>



<a name="252629138"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252629138" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252629138">(Sep 09 2021 at 13:52)</a>:</h4>
<p>We just don't have the people necessary to merit an investigation of such a small delta, I think</p>



<a name="252629187"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252629187" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Joshua Nelson <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252629187">(Sep 09 2021 at 13:52)</a>:</h4>
<p>(and this is also a rollup, so it would be a big time investment)</p>



<a name="252629287"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252629287" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252629287">(Sep 09 2021 at 13:53)</a>:</h4>
<p>Eh, it being a rollup isn't too important -- the first step on investigating after a cursory glance is likely cachegrind diff'ing the two commits</p>



<a name="252629347"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252629347" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252629347">(Sep 09 2021 at 13:53)</a>:</h4>
<p>Perhaps the right thing is for us to invest in making that a smoother process - or automating it - which would help justify investigations</p>



<a name="252630063"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252630063" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252630063">(Sep 09 2021 at 13:58)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Calculating.20significance/near/252629009">said</a>:</p>
<blockquote>
<p>Hm. I think one thing that's interesting is that e.g. that comparison I doubt we'd <em>in practice</em> ever find the motivation to investigate</p>
</blockquote>
<p>I agree, I wonder if we should have an additional (on by default filter) for results of a particular magnitude or more). I imagine most of these have a small magnitude (which is calculated by the absolute size of the change and the amount it goes over its significance threshold)</p>



<a name="252630159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252630159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252630159">(Sep 09 2021 at 13:58)</a>:</h4>
<p>I think that second column is worthwhile</p>



<a name="252630184"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252630184" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252630184">(Sep 09 2021 at 13:58)</a>:</h4>
<p>I'd be interested for these tests how "much" of an outlier they are</p>



<a name="252632536"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252632536" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252632536">(Sep 09 2021 at 14:13)</a>:</h4>
<p>Taking a look at a few noop builds (i.e., the changes were only in documentation or other things that shouldn't actually change the artifact). It seems under the new scheme we usually have 2 or 3 test cases that are considered significant.</p>



<a name="252632736"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252632736" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252632736">(Sep 09 2021 at 14:14)</a>:</h4>
<p>Hm, that sort of implies our measure of significance might be off, if we are seeing noop builds as significant. Maybe we should bump to more than 1.5x IQR?</p>



<a name="252632754"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252632754" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252632754">(Sep 09 2021 at 14:14)</a>:</h4>
<p>Perhaps moving the IQR fence to be 3.0 *IQR instead of 1.5 would help</p>



<a name="252632761"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/252632761" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#252632761">(Sep 09 2021 at 14:14)</a>:</h4>
<p>hehe yes ^^</p>



<a name="253286194"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253286194" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253286194">(Sep 14 2021 at 17:05)</a>:</h4>
<p>Some interesting changes to significance:</p>
<ul>
<li><a href="https://perf.rust-lang.org/compare.html?start=d19d864e79531ad702e4f44b2635da6c50cc5eb0&amp;end=1c858ba5bf7bd06c1a970efbf77053c8380b3151">before</a> &amp; [after](<a href="https://perf.rust-lang.org/compare.html?start=d19d864e79531ad702e4f44b2635da6c50cc5eb0&amp;end=1c858ba5bf7bd06c1a970efbf77053c8380b3151&amp;calcNewSig=true">before</a> went some small significance diffs to only one</li>
<li>a docs only rollup <a href="https://perf.rust-lang.org/compare.html?start=1c858ba5bf7bd06c1a970efbf77053c8380b3151&amp;end=13db8440bbbe42870bc828d4ec3e965b38670277">before</a> &amp; <a href="https://perf.rust-lang.org/compare.html?start=1c858ba5bf7bd06c1a970efbf77053c8380b3151&amp;end=13db8440bbbe42870bc828d4ec3e965b38670277&amp;calcNewSig=true">after</a> has one significant change after the change but its in a noisy benchmark marked with "?"</li>
<li>A change that was <a href="https://perf.rust-lang.org/compare.html?start=b2d9bcda7ec267dbabfaef67f7af344ef71e002c&amp;end=d19d864e79531ad702e4f44b2635da6c50cc5eb0">previously</a> marked as spurious <a href="https://perf.rust-lang.org/compare.html?start=b2d9bcda7ec267dbabfaef67f7af344ef71e002c&amp;end=d19d864e79531ad702e4f44b2635da6c50cc5eb0&amp;calcNewSig=true">now</a> only shows one sig result</li>
<li>A clear perf regression <a href="https://perf.rust-lang.org/compare.html?start=8c2b6ea37d7719a0370bd404030eef9702c1752c&amp;end=547d9374d26f203ab963b3ffe1ed36bd70f16633&amp;stat=instructions:u">before</a> remains as one <a href="https://perf.rust-lang.org/compare.html?start=8c2b6ea37d7719a0370bd404030eef9702c1752c&amp;end=547d9374d26f203ab963b3ffe1ed36bd70f16633&amp;stat=instructions:u&amp;calcNewSig=true">after</a></li>
</ul>



<a name="253286276"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253286276" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253286276">(Sep 14 2021 at 17:06)</a>:</h4>
<p>These results look promising</p>



<a name="253286456"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253286456" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253286456">(Sep 14 2021 at 17:07)</a>:</h4>
<blockquote>
<p>A change that was previously marked as spurious now only shows one sig result</p>
</blockquote>
<p>I don't see a sig result here</p>



<a name="253288413"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253288413" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253288413">(Sep 14 2021 at 17:18)</a>:</h4>
<p>Ah you're right. That's even better</p>



<a name="253288501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253288501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253288501">(Sep 14 2021 at 17:19)</a>:</h4>
<p>I'm doing the comparison now between the triage report with the old and new significance schemes</p>



<a name="253289081"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253289081" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253289081">(Sep 14 2021 at 17:23)</a>:</h4>
<p>Here they are if you want to do the diff yourself: <a href="https://gist.github.com/rylev/35cc7bd37aaf08dbeda5d775bc05ca5e">https://gist.github.com/rylev/35cc7bd37aaf08dbeda5d775bc05ca5e</a></p>



<a name="253289157"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253289157" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253289157">(Sep 14 2021 at 17:23)</a>:</h4>
<p>In general, the same number of changes was found. 1 which was labeled as a regression before is marked as a mixed result after.</p>



<a name="253289699"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253289699" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253289699">(Sep 14 2021 at 17:27)</a>:</h4>
<p>There is <a href="https://perf.rust-lang.org/compare.html?start=626649ff1f33e89e471fff9e90bbb0a6d30141f9&amp;end=c5cbf7852a7692c7c51df64c09a59e7838b55202&amp;stat=instructions:u">one mixed</a> result isn't there before that is after and <a href="https://perf.rust-lang.org/compare.html?start=0273e3bce7a0ce49e96a9662163e2380cb87e0be&amp;end=0212c70b1df2aa542aef48d5fcde0af3734970c6&amp;stat=instructions:u">one mixed</a> result that <em>was</em> there before but isn't after</p>



<a name="253290068"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253290068" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253290068">(Sep 14 2021 at 17:29)</a>:</h4>
<p>The first one is interesting as the changes seemed not super significant before, but afterwards the changes look massive (because they are way larger than the significance threshold)</p>



<a name="253290271"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253290271" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253290271">(Sep 14 2021 at 17:30)</a>:</h4>
<p>The change is in bumping the stage0 compiler...</p>



<a name="253290651"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253290651" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253290651">(Sep 14 2021 at 17:32)</a>:</h4>
<p>This is not good considering <span class="user-mention" data-user-id="116122">@simulacrum</span> marked that PR as not being a real significant perf change (since nothing <em>really</em> changed with the compiler just the bootstrap process)</p>



<a name="253290744"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253290744" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253290744">(Sep 14 2021 at 17:33)</a>:</h4>
<p>I think some of the work with significance thresholds I'm doing now may help</p>



<a name="253290763"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253290763" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253290763">(Sep 14 2021 at 17:33)</a>:</h4>
<p>do you have a link handy so I can check against my changes?</p>



<a name="253290982"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253290982" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253290982">(Sep 14 2021 at 17:34)</a>:</h4>
<p>This link? <a href="https://perf.rust-lang.org/compare.html?start=626649ff1f33e89e471fff9e90bbb0a6d30141f9&amp;end=c5cbf7852a7692c7c51df64c09a59e7838b55202&amp;stat=instructions:u">https://perf.rust-lang.org/compare.html?start=626649ff1f33e89e471fff9e90bbb0a6d30141f9&amp;end=c5cbf7852a7692c7c51df64c09a59e7838b55202&amp;stat=instructions:u</a></p>



<a name="253291022"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253291022" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253291022">(Sep 14 2021 at 17:34)</a>:</h4>
<p>yeah</p>



<a name="253298149"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253298149" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253298149">(Sep 14 2021 at 18:20)</a>:</h4>
<p>Ok, so I finally figured out why I kept getting confused while editing this code. The <code>upper_fence</code> and generally our median calculation is based on the "magnitude" of each percentage (i.e., absolute value). Which is in some sense unusual, because it means that the "outliers" on the lower side aren't actually really meaningful, we only care about outliers on the larger side. On the lower side I guess outliers would be "the unusually not noisy change" which is not very meaningful :)</p>



<a name="253298439"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253298439" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253298439">(Sep 14 2021 at 18:21)</a>:</h4>
<p>In practice our IQR is also really small (e.g., 0.000084358, 0.0000800420, 0.001446)</p>



<a name="253298472"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253298472" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253298472">(Sep 14 2021 at 18:21)</a>:</h4>
<p>so dividing by it gives us pretty big values</p>



<a name="253301688"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253301688" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253301688">(Sep 14 2021 at 18:41)</a>:</h4>
<p>So I actually now think that the current approach which shows / threshold may not be that bad. It gives us a lot of nice properties for free:</p>
<ul>
<li>1x = significance threshold</li>
<li>&lt;1x is not significant</li>
<li>2x is roughly "twice as significant"</li>
</ul>



<a name="253302981"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253302981" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253302981">(Sep 14 2021 at 18:50)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> are you suggesting we keep things how they are?</p>



<a name="253303046"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253303046" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253303046">(Sep 14 2021 at 18:51)</a>:</h4>
<p>I think so. I'm still playing around with it a little...</p>



<a name="253303107"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253303107" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253303107">(Sep 14 2021 at 18:51)</a>:</h4>
<p>Any thoughts on the linked comparison which is showing significant changes even though it's likely noise.</p>



<a name="253303206"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253303206" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253303206">(Sep 14 2021 at 18:52)</a>:</h4>
<p>Yeah, that's what I'm looking at now. I'm trying to figure out sort of "what went wrong"</p>



<a name="253303725"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253303725" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253303725">(Sep 14 2021 at 18:55)</a>:</h4>
<p>e.g., <a href="/user_uploads/4715/yd1jD-1GJGJSCzyCvgDDRVD8/image.png">image.png</a> </p>
<div class="message_inline_image"><a href="/user_uploads/4715/yd1jD-1GJGJSCzyCvgDDRVD8/image.png" title="image.png"><img src="/user_uploads/4715/yd1jD-1GJGJSCzyCvgDDRVD8/image.png"></a></div><p>that test case doesn't look too bad on the graph:</p>
<p><a href="/user_uploads/4715/C9SMr-GKVJVIUxIlSQf7d9YL/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/C9SMr-GKVJVIUxIlSQf7d9YL/image.png" title="image.png"><img src="/user_uploads/4715/C9SMr-GKVJVIUxIlSQf7d9YL/image.png"></a></div>



<a name="253303808"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253303808" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253303808">(Sep 14 2021 at 18:56)</a>:</h4>
<p>I'm going to alter the graph so it's % change from previous commit, so I can more easily tell the range at an eyeball</p>



<a name="253304176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253304176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253304176">(Sep 14 2021 at 18:58)</a>:</h4>
<p><a href="/user_uploads/4715/8df8B_uM22vREYcdV52fZwbR/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/8df8B_uM22vREYcdV52fZwbR/image.png" title="image.png"><img src="/user_uploads/4715/8df8B_uM22vREYcdV52fZwbR/image.png"></a></div>



<a name="253304924"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253304924" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253304924">(Sep 14 2021 at 19:02)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> so I think that 0.09% was actually a real change</p>
<p><a href="/user_uploads/4715/AMx56MO_tAuo7rixKXQZmN23/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/AMx56MO_tAuo7rixKXQZmN23/image.png" title="image.png"><img src="/user_uploads/4715/AMx56MO_tAuo7rixKXQZmN23/image.png"></a></div>



<a name="253304951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253304951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253304951">(Sep 14 2021 at 19:02)</a>:</h4>
<p>(that latest graph points it out)</p>



<a name="253304964"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253304964" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253304964">(Sep 14 2021 at 19:02)</a>:</h4>
<p><span class="user-mention silent" data-user-id="116122">simulacrum</span> <a href="#narrow/stream/247081-t-compiler.2Fperformance/topic/Calculating.20significance/near/253304176">said</a>:</p>
<blockquote>
<p><a href="/user_uploads/4715/8df8B_uM22vREYcdV52fZwbR/image.png">image.png</a></p>
</blockquote>
<p>This graph would be very useful to link to on the comparison page</p>



<a name="253305619"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253305619" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253305619">(Sep 14 2021 at 19:06)</a>:</h4>
<p>so what this means I think is that we want the comparison page to filter on "real change" but also "do we care", perhaps?</p>



<a name="253305661"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253305661" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253305661">(Sep 14 2021 at 19:06)</a>:</h4>
<p>Maybe the next step is to figure out what those extra instructions are coming from</p>



<a name="253305755"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253305755" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253305755">(Sep 14 2021 at 19:07)</a>:</h4>
<p>significance vs. effect size. maybe we could compare to the top N biggest changes in the last month or something?</p>



<a name="253305992"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253305992" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253305992">(Sep 14 2021 at 19:08)</a>:</h4>
<p>Partially. I think the question I'm trying to figure out is whether showing this 0.09% change is useful to anyone</p>



<a name="253306042"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306042" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306042">(Sep 14 2021 at 19:09)</a>:</h4>
<p>it feels like "no", but we also don't want death by a thousand cuts</p>



<a name="253306110"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306110" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306110">(Sep 14 2021 at 19:09)</a>:</h4>
<p>(IOW, imagine we had no noise ever, and could detect one instruction differences -- do we still show them?)</p>



<a name="253306253"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306253" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306253">(Sep 14 2021 at 19:10)</a>:</h4>
<p><span class="user-mention" data-user-id="116122">@simulacrum</span> so that change is unlikely to be taken into account in our "relevance" checks. That's because we already take magnitude of the change into account.</p>



<a name="253306293"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306293" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306293">(Sep 14 2021 at 19:11)</a>:</h4>
<p>Yes, the triage report + comments would likely ignore this</p>



<a name="253306308"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306308" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306308">(Sep 14 2021 at 19:11)</a>:</h4>
<p>We could also have an additional toggle for magnitude in the UI</p>



<a name="253306465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306465">(Sep 14 2021 at 19:12)</a>:</h4>
<p>We care about significant changes that are of a relatively large size.</p>



<a name="253306502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306502">(Sep 14 2021 at 19:12)</a>:</h4>
<p>This is where we define change magnitude: <a href="https://github.com/rust-lang/rustc-perf/blob/bd27e5dceac65d72a8d0a6ec005f2f0d24dc1783/site/src/comparison.rs#L843-L853">https://github.com/rust-lang/rustc-perf/blob/bd27e5dceac65d72a8d0a6ec005f2f0d24dc1783/site/src/comparison.rs#L843-L853</a></p>



<a name="253306531"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306531" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306531">(Sep 14 2021 at 19:13)</a>:</h4>
<p>Yeah, seems like we should incorporate that into the comparison UI as well probably.</p>



<a name="253306697"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306697" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306697">(Sep 14 2021 at 19:14)</a>:</h4>
<p>The question then becomes "are our change magnitude levels properly calibrated?".</p>



<a name="253306740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306740">(Sep 14 2021 at 19:14)</a>:</h4>
<p>When does a significant change become interesting?</p>



<a name="253306912"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253306912" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253306912">(Sep 14 2021 at 19:15)</a>:</h4>
<p>I'm not sure. Part of me wants to say "depending on how much the particular author/reviewer pair is likely to investigate" or "does compiler team have bandwidth" or something.</p>



<a name="253307306"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253307306" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253307306">(Sep 14 2021 at 19:17)</a>:</h4>
<p>I guess then perhaps labeling results as 1 of the 5 magnitudes and allowing the user to filter by that with "small changes (but not very small) and above" are shown by default</p>



<a name="253307816"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253307816" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253307816">(Sep 14 2021 at 19:20)</a>:</h4>
<p>Seems like a good start. I'm going to make a PR for the noise graph shortly, I think</p>



<a name="253308099"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253308099" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253308099">(Sep 14 2021 at 19:22)</a>:</h4>
<p>I'm most likely done for the day, but I can try to work on some of this tomorrow.</p>



<a name="253308182"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253308182" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253308182">(Sep 14 2021 at 19:23)</a>:</h4>
<p>Any thoughts on when we can switch to the new sig scheme? Should we wait for the filtering by magnitude to land first?</p>



<a name="253308391"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253308391" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253308391">(Sep 14 2021 at 19:24)</a>:</h4>
<p>I think that's a good idea, yeah</p>



<a name="253319513"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253319513" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253319513">(Sep 14 2021 at 20:33)</a>:</h4>
<p>merged the graph changes - <a href="https://perf.rust-lang.org/?start=&amp;end=&amp;kind=percentrelative&amp;stat=instructions%3Au">https://perf.rust-lang.org/?start=&amp;end=&amp;kind=percentrelative&amp;stat=instructions%3Au</a></p>



<a name="253330640"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253330640" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253330640">(Sep 14 2021 at 22:00)</a>:</h4>
<p>Going to look into the bootstrap change deltas with cachegrind and see if I can explain them later tonight probably, initial results look like it's not noise (deterministic change, as by graph) but also not really something we control - stuff like the hash generated by cargo for tikv jemalloc's build script changing</p>



<a name="253340052"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253340052" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253340052">(Sep 14 2021 at 23:33)</a>:</h4>
<p>I spot checked a few benchmarks and it looks like it's all down to tikv-jemalloc moving directories during compilation or something like that, anyway</p>



<a name="253340070"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253340070" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253340070">(Sep 14 2021 at 23:33)</a>:</h4>
<p>probably due to using a different cargo (which hashed things differently)</p>



<a name="253416054"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253416054" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253416054">(Sep 15 2021 at 13:46)</a>:</h4>
<p><span class="user-mention" data-user-id="224872">@rylev</span> interesting example of new algorithm changing things - </p>
<p><a href="https://perf.rust-lang.org/compare.html?calcNewSig=true&amp;start=cdeba02ff71416e014f7130f75166890688be986&amp;end=3d66748e5a10de468e3530099450e33554ed5bb8">https://perf.rust-lang.org/compare.html?calcNewSig=true&amp;start=cdeba02ff71416e014f7130f75166890688be986&amp;end=3d66748e5a10de468e3530099450e33554ed5bb8</a> has one regression (though tiny) and the old significance algorithm has a collection of improvements</p>



<a name="253416902"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253416902" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253416902">(Sep 15 2021 at 13:51)</a>:</h4>
<p>My guess would be that the test cases that the old algorithm showed as improvements tend to be a bit more noisy?</p>



<a name="253417159"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417159" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417159">(Sep 15 2021 at 13:52)</a>:</h4>
<p>Actually that has to be the case as we define noise in the new sig algorithm as having a significance threshold over 0.2% which all those test cases do</p>



<a name="253417189"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417189" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417189">(Sep 15 2021 at 13:53)</a>:</h4>
<p>Right, yeah</p>



<a name="253417233"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417233" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417233">(Sep 15 2021 at 13:53)</a>:</h4>
<p>This feels like an improvement actually...</p>



<a name="253417279"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417279" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417279">(Sep 15 2021 at 13:53)</a>:</h4>
<p>Those improvements might not be real...</p>



<a name="253417311"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417311" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417311">(Sep 15 2021 at 13:53)</a>:</h4>
<p><a href="/user_uploads/4715/S33ahO1m9EtRSUAdkzBscyEs/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/S33ahO1m9EtRSUAdkzBscyEs/image.png" title="image.png"><img src="/user_uploads/4715/S33ahO1m9EtRSUAdkzBscyEs/image.png"></a></div>



<a name="253417412"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417412" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417412">(Sep 15 2021 at 13:54)</a>:</h4>
<p><a href="/user_uploads/4715/8Q_cZt6eBtUxaAaivP64qMBN/image.png">image.png</a></p>
<div class="message_inline_image"><a href="/user_uploads/4715/8Q_cZt6eBtUxaAaivP64qMBN/image.png" title="image.png"><img src="/user_uploads/4715/8Q_cZt6eBtUxaAaivP64qMBN/image.png"></a></div>



<a name="253417443"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417443" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417443">(Sep 15 2021 at 13:54)</a>:</h4>
<p>so it does look pretty noisy, though not up to the 0.2% by my estimate personally</p>



<a name="253417511"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417511" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417511">(Sep 15 2021 at 13:54)</a>:</h4>
<p>(though we do a pretty big outlier run these days, so maybe not too surprising)</p>



<a name="253417797"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253417797" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253417797">(Sep 15 2021 at 13:56)</a>:</h4>
<p>Yea significance is trying to tell us "this thing is almost certainly real" and if it takes a change over 0.2% for us to be convinced than that seems like noise to me</p>



<a name="253418131"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253418131" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253418131">(Sep 15 2021 at 13:58)</a>:</h4>
<p>Right, yeah. It might well be.</p>



<a name="253418298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253418298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253418298">(Sep 15 2021 at 13:59)</a>:</h4>
<p>I'm actually pretty happy with where we've landed...</p>



<a name="253418492"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253418492" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> simulacrum <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253418492">(Sep 15 2021 at 14:00)</a>:</h4>
<p>I think it's good too</p>



<a name="253418502"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253418502" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> rylev <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253418502">(Sep 15 2021 at 14:00)</a>:</h4>
<p>0.2% as the noise threshold and 3.0 as the IQR multiplier factor are arbitrary but almost everything else is based on some statistical principal</p>



<a name="253442093"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/247081-t-compiler/performance/topic/Calculating%20significance/near/253442093" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> The 8472 <a href="https://zulip-archive.rust-lang.org/stream/247081-t-compiler/performance/topic/Calculating.20significance.html#253442093">(Sep 15 2021 at 16:16)</a>:</h4>
<p>the new delta to previous view is really cool</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
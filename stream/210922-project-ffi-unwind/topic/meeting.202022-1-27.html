<html>
<head><meta charset="utf-8"><title>meeting 2022-1-27 · project-ffi-unwind · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/index.html">project-ffi-unwind</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html">meeting 2022-1-27</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="269608252"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269608252" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269608252">(Jan 27 2022 at 17:35)</a>:</h4>
<p><span class="user-mention" data-user-id="303710">@Gary Guo</span> <span class="user-mention" data-user-id="257758">@Connor Horman</span> <span class="user-mention" data-user-id="143274">@Amanieu</span></p>
<p>Today's another regularly-scheduled bi-weekly meeting. I've read what I missed from the previous conversation, and I have to say that I don't really know where we stand. Do any of you feel comfortable summarizing the state of the discussion around current blockers?</p>
<p>Does the PR <a href="https://github.com/rust-lang/rust/pull/92911">"[WIP] Guard against unwinding in cleanup code"</a> solve the same issue that Amanieu mentioned would be solved by making <code>-Z panic-in-drop=abort</code> the default?</p>
<p>(Sorry that progress on this project is only proceeding in small bursts. Please let me know if I can better assist in facilitating these discussions move along.)</p>



<a name="269608381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269608381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Connor Horman <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269608381">(Jan 27 2022 at 17:35)</a>:</h4>
<p>It's at 13:00 EST, right? I'm going to be unavailable, so I'll read the backlog afterwards and add anything I have.</p>



<a name="269608535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269608535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269608535">(Jan 27 2022 at 17:36)</a>:</h4>
<p>Yes, <code>-Z panic-in-drop=abort</code> would resolve this issue, but we still need that PR if we want to support <code>-Z panic-in-drop=unwind</code> (the current default).</p>



<a name="269610836"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269610836" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269610836">(Jan 27 2022 at 17:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="257758">Connor Horman</span> <a href="#narrow/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27/near/269608381">said</a>:</p>
<blockquote>
<p>It's at 13:00 EST, right? I'm going to be unavailable, so I'll read the backlog afterwards and add anything I have.</p>
</blockquote>
<p>13:30, but yes</p>



<a name="269610925"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269610925" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269610925">(Jan 27 2022 at 17:52)</a>:</h4>
<p><span class="user-mention silent" data-user-id="143274">Amanieu</span> <a href="#narrow/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27/near/269608535">said</a>:</p>
<blockquote>
<p>Yes, <code>-Z panic-in-drop=abort</code> would resolve this issue, but we still need that PR if we want to support <code>-Z panic-in-drop=unwind</code> (the current default).</p>
</blockquote>
<p>So if that PR were completed and merged, it would obviate the <code>-Z panic-in-drop=abort</code> discussion?</p>



<a name="269615498"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269615498" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269615498">(Jan 27 2022 at 18:20)</a>:</h4>
<p>No, <code>-Z panic-in-drop=abort</code> is still useful on its own and I would argue that it is a better default in general.  See the discussion in <a href="https://github.com/rust-lang/lang-team/issues/97">https://github.com/rust-lang/lang-team/issues/97</a>.</p>



<a name="269617404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269617404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269617404">(Jan 27 2022 at 18:33)</a>:</h4>
<p>Oh, sorry, I meant obviate it for the purpose of this group and stabilizing <code>"C-unwind"</code>.</p>



<a name="269618387"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269618387" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269618387">(Jan 27 2022 at 18:41)</a>:</h4>
<p><span class="user-group-mention" data-user-group-id="1866">@WG-ffi-unwind</span> </p>
<p>Bi-weekly check-in!</p>
<p>Unfortunately I am a bit lost on where we're actually still blocked.</p>
<ul>
<li>It appears that we have a proposed solution for the double-unwind issue in the form of <span class="user-mention" data-user-id="303710">@Gary Guo</span>'s PR <a href="https://github.com/rust-lang/rust/pull/92911">#92911</a>.</li>
<li>I don't know if we fully resolved the issue around mixed <code>panic=abort</code> and <code>panic=unwind</code> builds. <span class="user-mention" data-user-id="143274">@Amanieu</span> proposed "if a crate uses both <code>extern "C-unwind"</code> and <code>-C panic=unwind</code> then it cannot be included in the same crate graph as a crate compiled with <code>-C panic=abort</code>" (with an exception for <code>std</code> and panic runtimes). Since <code>"C-unwind"</code> isn't stable yet, I expect this is a non-breaking change, and it sounded like there was general agreement. I'm not sure who would need to sign off on it.</li>
</ul>
<p>Are there other remaining issues?</p>



<a name="269618428"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269618428" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269618428">(Jan 27 2022 at 18:41)</a>:</h4>
<p>(Jeeze, these initial comments always take me something like 10 minutes to type. I guess I need to draft them in advance of the scheduled meeting time.)</p>



<a name="269619894"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269619894" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269619894">(Jan 27 2022 at 18:52)</a>:</h4>
<p>I think that's all there is. I'm planning on working on the second one but haven't started yet. Once this is fixed then we have no more blockers to stabilizing C-unwind.</p>



<a name="269620394"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/meeting%202022-1-27/near/269620394" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/meeting.202022-1-27.html#269620394">(Jan 27 2022 at 18:56)</a>:</h4>
<p>Okay, thanks for confirming!</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
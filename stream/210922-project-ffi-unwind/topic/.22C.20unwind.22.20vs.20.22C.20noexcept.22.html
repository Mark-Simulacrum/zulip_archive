<html>
<head><meta charset="utf-8"><title>&quot;C unwind&quot; vs &quot;C noexcept&quot; · project-ffi-unwind · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/index.html">project-ffi-unwind</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html">&quot;C unwind&quot; vs &quot;C noexcept&quot;</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="179273421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179273421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179273421">(Oct 28 2019 at 20:40)</a>:</h4>
<p>So it seems like the arguments in <a href="https://hackmd.io/ymsEL6OpR6OSMoFr1As1rw?view" target="_blank" title="https://hackmd.io/ymsEL6OpR6OSMoFr1As1rw?view">this hackmd document</a> are fairly complete. Based on this, I personally find the argument in favor of the current setup ("C" does not permit unwinding, "C unwind" does) more compelling. To me, the killer argument is the point around safety and the interaction with <code>-Zpanic=abort</code>.</p>



<a name="179273441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179273441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179273441">(Oct 28 2019 at 20:40)</a>:</h4>
<p>At least in our last meeting, the lang team seemed to agree.</p>



<a name="179273473"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179273473" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179273473">(Oct 28 2019 at 20:41)</a>:</h4>
<p>Based on this, I'm wondering if we should declare this a finalized decision as well -- that would unlock us to move forward with a 0th RFC that includes the "C unwind" ABI.</p>



<a name="179274139"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179274139" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179274139">(Oct 28 2019 at 20:49)</a>:</h4>
<p>Er, I forgot about <span class="user-mention" data-user-id="239881">@Josh Triplett</span>'s comment earlier</p>
<blockquote>
<p>Josh Triplett: I just read through this whole thread, and the idea of allowing unwinding by default seems reasonable to me.</p>
</blockquote>
<p>so perhaps I am speaking too soon. Seems to argue in favor of doing the minimal "just create the group" RFC, just to make progress.</p>



<a name="179274334"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179274334" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179274334">(Oct 28 2019 at 20:51)</a>:</h4>
<p>I think <code>"C unwind"</code> would have the exact same concerns regarding <code>-Zpanic=abort</code>. In fact, I have been thinking of the question of <code>extern "C"</code>'s behavior in terms of whether or not <code>extern "C"</code> should be an alias for <code>extern "C unwind"</code>. (I realize that's not the only possibility discussed in that document, but I think it highlights the need to design <code>"C unwind"</code> with all due safety considerations, etc, regardless of how we treat <code>"C"</code>.)</p>



<a name="179274497"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179274497" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179274497">(Oct 28 2019 at 20:52)</a>:</h4>
<p>I think the "just create the group" RFC is the right approach. Combining a governance issue with technical issues increasingly seems like a recipe for another very confusing GitHub thread.</p>



<a name="179277978"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179277978" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179277978">(Oct 28 2019 at 21:30)</a>:</h4>
<blockquote>
<p>I think <code>"C unwind"</code> would have the exact same concerns regarding <code>-Zpanic=abort</code></p>
</blockquote>
<p>I cover this in the doc: I think it's quite different. The key point is that extern "C" leaves it, in some sense, <em>ambiguous</em> whether unwinding occurs -- it claims that it might, but de facto it rarely does.</p>



<a name="179278000"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278000" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278000">(Oct 28 2019 at 21:30)</a>:</h4>
<p>In contrast, "C unwind" would only be used where unwinding is <em>expected</em></p>



<a name="179278039"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278039" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278039">(Oct 28 2019 at 21:31)</a>:</h4>
<p>This in turn means that we can insert shims to catch unwinding and abort without undue code size increase</p>



<a name="179278060"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278060" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278060">(Oct 28 2019 at 21:31)</a>:</h4>
<p>(That said, I think it would be interesting to see real data here)</p>



<a name="179278695"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278695" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278695">(Oct 28 2019 at 21:39)</a>:</h4>
<blockquote>
<p>(That said, I think it would be interesting to see real data here)</p>
</blockquote>
<p>Agreed. I don't want to accidentally design ourselves into a corner in such a way that we can't add optimizations in the future, but optimizations without data don't seem like a good basis for selecting default behaviors.</p>



<a name="179278807"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278807" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278807">(Oct 28 2019 at 21:40)</a>:</h4>
<p>(There are other arguments, all similar -- the core question is which aligns more closely with <em>reality</em>)</p>



<a name="179278834"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278834" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278834">(Oct 28 2019 at 21:40)</a>:</h4>
<p>( I don't think it's right to frame it as <em>just</em> an optimization question )</p>



<a name="179278960"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278960" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278960">(Oct 28 2019 at 21:42)</a>:</h4>
<p>(specifically, the question of auditing and reasoning)</p>



<a name="179278988"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179278988" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179278988">(Oct 28 2019 at 21:42)</a>:</h4>
<p>One thing that struck me was when <span class="user-mention" data-user-id="127859">@Taylor Cramer</span> mentioned that if we switched the default, he'd probably just do extern "C noexcept" for all functions in Fuschia.</p>



<a name="179279016"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179279016" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179279016">(Oct 28 2019 at 21:43)</a>:</h4>
<p>which, in some sense, is fine...</p>



<a name="179279030"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179279030" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179279030">(Oct 28 2019 at 21:43)</a>:</h4>
<p>anyway</p>



<a name="179280132"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179280132" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179280132">(Oct 28 2019 at 21:56)</a>:</h4>
<p>I'd actually prefer that. If Rust had a benevolent dictator and I were that dictator, I'd just deprecate <code>extern "C"</code> and everyone would need to pick between <code>"C unwind"</code> and <code>"C nounwind"</code>.</p>



<a name="179280165"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179280165" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179280165">(Oct 28 2019 at 21:57)</a>:</h4>
<p>Also the keyword would be changed to <code>abi</code> for function definitions, while keeping <code>extern</code> for "import-like" declarations</p>



<a name="179306991"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179306991" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179306991">(Oct 29 2019 at 07:51)</a>:</h4>
<blockquote>
<p>One thing that struck me was when @Taylor Cramer mentioned that if we switched the default, he'd probably just do extern "C noexcept" for all functions in Fuschia.</p>
</blockquote>
<p>Not only fuchsia. I'd need to do the same on <code>libc</code>, which includes Fuchsia support, and that would mean that this is done for all platforms that Rust currently supports. That would be an API breaking change on all platforms: anyone taking function pointers to <code>libc</code> functions would need to update their code to use <code>extern "C noexcept"</code> instead unless we provide implicit coercions, but that alone won't be enough to avoid a breaking change and  <code>libc</code> would need a new major release, which means that the ecosystem would be broken until all crates update, but crates need to update in order, etc.</p>



<a name="179307259"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179307259" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179307259">(Oct 29 2019 at 07:56)</a>:</h4>
<p>So we probably would need to figure out a way of adding support for two incompatible versions of a C-linking dependency to cargo or similar features to avoid a lot of pain.</p>



<a name="179321113"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179321113" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179321113">(Oct 29 2019 at 11:42)</a>:</h4>
<p>Would it be a breaking change to change functions which are cancellation points in libc to <code>extern "C unwind"</code>?</p>



<a name="179321284"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179321284" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179321284">(Oct 29 2019 at 11:46)</a>:</h4>
<p>Yes, that's also a breaking change.</p>



<a name="179321381"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179321381" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179321381">(Oct 29 2019 at 11:47)</a>:</h4>
<p>I'd like to be able to say it would be a much smaller breaking change, but I don't think that's the case. There are not that many cancellation points, but they are used by a lot of crates.</p>



<a name="179321474"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179321474" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179321474">(Oct 29 2019 at 11:48)</a>:</h4>
<p>With implicit coercions we could try to roll in those changes and see what happens, but there are a couple of things that implicit coercions don't cover.</p>



<a name="179321514"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179321514" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179321514">(Oct 29 2019 at 11:49)</a>:</h4>
<p>e.g. <code>impl Trait for extern "C" fn(...) { }</code> wouldn't implement <code>Trait</code> for  the cancellation points if we make them <code>extern "C unwind"</code> anymore</p>



<a name="179321654"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179321654" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179321654">(Oct 29 2019 at 11:51)</a>:</h4>
<p>I've seen code like that in the wild (e.g. in the <code>libm</code> testing crates), but it did not apply to any cancellation points</p>



<a name="179383580"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179383580" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179383580">(Oct 29 2019 at 22:47)</a>:</h4>
<blockquote>
<p>I'd like to be able to say it would be a much smaller breaking change, but I don't think that's the case. There are not that many cancellation points, but they are used by a lot of crates.</p>
</blockquote>
<p>This is an interesting consideration that is not covered in the existing doc</p>



<a name="179383685"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179383685" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179383685">(Oct 29 2019 at 22:48)</a>:</h4>
<p>However, <span class="user-mention" data-user-id="132920">@gnzlbg</span>, another option would be to export those functions via a (deprecated) wrapper that (e.g.) aborts on unwind, and expose the <em>real</em> functions some other way</p>



<a name="179383705"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179383705" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179383705">(Oct 29 2019 at 22:48)</a>:</h4>
<p>(and perhaps also offer a major version bump that corrects the issue)</p>



<a name="179411298"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411298" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411298">(Oct 30 2019 at 08:34)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> yeah, maybe. We should explore how to land this on libc. A problem with wrappers is that the address of the original libc function gets lost, and that could be a breaking change (e.g. if people are getting the address of the function, and then using <code>dlsym</code> or similar to figure out if its actually linked or if the <code>libc</code> is too old).</p>



<a name="179411379"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411379" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411379">(Oct 30 2019 at 08:36)</a>:</h4>
<blockquote>
<p>(and perhaps also offer a major version bump that corrects the issue)</p>
</blockquote>
<p>We currently can't. <code>libc</code> links C libraries, and is linked as part of the rustc run-time, that is, it is part of a crates dependency graph if that crate links <code>liballoc</code> or <code>libstd</code>.</p>



<a name="179411395"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411395" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411395">(Oct 30 2019 at 08:36)</a>:</h4>
<p>IIRC, the only reason one can link <code>libc</code> from <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a> is because it has the same major version as the one that's linked by <code>libstd</code>.</p>



<a name="179411421"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411421" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411421">(Oct 30 2019 at 08:37)</a>:</h4>
<p>If we bump the major version of <code>libc</code>, then the versions in <a href="http://crates.io" target="_blank" title="http://crates.io">crates.io</a> and libstd are incompatible.</p>



<a name="179411441"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411441" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411441">(Oct 30 2019 at 08:37)</a>:</h4>
<p>This means that you can't use the slightly older <code>libc</code> crate with <code>libstd</code> anymore.</p>



<a name="179411447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411447">(Oct 30 2019 at 08:37)</a>:</h4>
<p>and that if you are in an older Rust toolchain, you can't use crates using the newer <code>libc</code> anymore.</p>



<a name="179411506"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411506" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411506">(Oct 30 2019 at 08:38)</a>:</h4>
<p>IIRC when <code>libc</code> was bumped from <code>0.1</code> to <code>0.2</code> this required an ecosystem wide upgrade.</p>



<a name="179411532"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411532" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411532">(Oct 30 2019 at 08:39)</a>:</h4>
<p>Everyone had to migrate their crates to use the latest Rust toolchain, and the latest libc version, and nothing older would work with those versions of those crates, and there are no "facade-crate" workarounds that one can use to avoid that.</p>



<a name="179411618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179411618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179411618">(Oct 30 2019 at 08:40)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> ^^^^^^ this is at least what I recollected from back then, I'm not sure if something has fundamentally changed  in the toolchain since that might allow us to handle this.</p>



<a name="179427952"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179427952" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179427952">(Oct 30 2019 at 12:56)</a>:</h4>
<p><span class="user-mention" data-user-id="132920">@gnzlbg</span> I think it woud be useful to have a list of all the functions that you know can unwind --</p>



<a name="179427969"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179427969" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179427969">(Oct 30 2019 at 12:56)</a>:</h4>
<p>is it <em>all</em> pthread APIs?</p>



<a name="179427985"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179427985" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179427985">(Oct 30 2019 at 12:56)</a>:</h4>
<p>I'm not sure how pthread cancellation works</p>



<a name="179428004"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428004" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428004">(Oct 30 2019 at 12:56)</a>:</h4>
<p>any time I've needed that sort of mechanism I always built it myself</p>



<a name="179428181"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428181" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428181">(Oct 30 2019 at 12:59)</a>:</h4>
<p>there is a list, wait</p>



<a name="179428200"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428200" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428200">(Oct 30 2019 at 12:59)</a>:</h4>
<p><a href="http://man7.org/linux/man-pages/man7/pthreads.7.html" target="_blank" title="http://man7.org/linux/man-pages/man7/pthreads.7.html">http://man7.org/linux/man-pages/man7/pthreads.7.html</a></p>



<a name="179428209"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428209" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428209">(Oct 30 2019 at 12:59)</a>:</h4>
<p>See "cancellation points" there</p>



<a name="179428319"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428319" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428319">(Oct 30 2019 at 13:00)</a>:</h4>
<blockquote>
<p>I'm not sure how pthread cancellation works</p>
</blockquote>
<p>It pretty much works like a garbage collector would, it can only kick in when the current thread yields control to the "runtime"</p>



<a name="179428404"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428404" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428404">(Oct 30 2019 at 13:01)</a>:</h4>
<p>in this case the runtime is the C library, so pretty much all functions in the C library are cancellation points, e.g., <code>open</code>, or <code>poll</code>, etc.</p>



<a name="179428480"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428480" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428480">(Oct 30 2019 at 13:02)</a>:</h4>
<p>I don't know what happens if the thread that gets cancelled doesn't call one of those cancellation points for a while</p>



<a name="179428544"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428544" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428544">(Oct 30 2019 at 13:03)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> might know</p>



<a name="179428566"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428566" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428566">(Oct 30 2019 at 13:03)</a>:</h4>
<p>IIRC an implementation can in some cases send a signal, and kill the thread if it isn't caught, but..</p>



<a name="179428577"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428577" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428577">(Oct 30 2019 at 13:03)</a>:</h4>
<p>I don't know if any implementation actually does that</p>



<a name="179428739"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428739" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428739">(Oct 30 2019 at 13:05)</a>:</h4>
<p>Full ist:</p>
<div class="codehilite"><pre><span></span>     The following functions are required to be cancellation points by
       POSIX.1-2001 and/or POSIX.1-2008:

           accept()
           aio_suspend()
           clock_nanosleep()
           close()
           connect()
           creat()
           fcntl() F_SETLKW
           fdatasync()
           fsync()
           getmsg()
           getpmsg()
           lockf() F_LOCK
           mq_receive()
           mq_send()
           mq_timedreceive()
           mq_timedsend()
           msgrcv()
           msgsnd()
           msync()
           nanosleep()
           open()
           openat() [Added in POSIX.1-2008]
           pause()
           poll()
           pread()
           pselect()
           pthread_cond_timedwait()
           pthread_cond_wait()
           pthread_join()
           pthread_testcancel()
           putmsg()
           putpmsg()
           pwrite()
           read()
           readv()
           recv()
           recvfrom()
           recvmsg()
           select()
           sem_timedwait()
           sem_wait()
           send()
           sendmsg()
           sendto()
           sigpause() [POSIX.1-2001 only (moves to &quot;may&quot; list in POSIX.1-2008)]
           sigsuspend()
           sigtimedwait()
           sigwait()
           sigwaitinfo()
           sleep()
           system()
           tcdrain()
           usleep() [POSIX.1-2001 only (function removed in POSIX.1-2008)]
           wait()
           waitid()
           waitpid()
           write()
           writev()

       The following functions may be cancellation points according to
       POSIX.1-2001 and/or POSIX.1-2008:

           access()
           asctime()
           asctime_r()
           catclose()
           catgets()
           catopen()
           chmod() [Added in POSIX.1-2008]
           chown() [Added in POSIX.1-2008]
           closedir()
           closelog()
           ctermid()
           ctime()
           ctime_r()
           dbm_close()
           dbm_delete()
           dbm_fetch()
           dbm_nextkey()
           dbm_open()
           dbm_store()
           dlclose()
           dlopen()
           dprintf() [Added in POSIX.1-2008]
           endgrent()
           endhostent()
           endnetent()
           endprotoent()
           endpwent()
           endservent()
           endutxent()
           faccessat() [Added in POSIX.1-2008]
           fchmod() [Added in POSIX.1-2008]
           fchmodat() [Added in POSIX.1-2008]
           fchown() [Added in POSIX.1-2008]
           fchownat() [Added in POSIX.1-2008]
           fclose()
           fcntl() (for any value of cmd argument)
           fflush()
           fgetc()
           fgetpos()
           fgets()
           fgetwc()
           fgetws()
           fmtmsg()
           fopen()
           fpathconf()
           fprintf()
           fputc()
           fputs()
           fputwc()
           fputws()
           fread()
           freopen()
           fscanf()
           fseek()
           fseeko()
           fsetpos()
           fstat()
           fstatat() [Added in POSIX.1-2008]
           ftell()
           ftello()
           ftw()
           futimens() [Added in POSIX.1-2008]
           fwprintf()
           fwrite()
           fwscanf()
           getaddrinfo()
           getc()
           getc_unlocked()
           getchar()
           getchar_unlocked()
           getcwd()
           getdate()
           getdelim() [Added in POSIX.1-2008]
           getgrent()
           getgrgid()
           getgrgid_r()
           getgrnam()
           getgrnam_r()
           gethostbyaddr() [SUSv3 only (function removed in POSIX.1-2008)]
           gethostbyname() [SUSv3 only (function removed in POSIX.1-2008)]
           gethostent()
           gethostid()
           gethostname()
           getline() [Added in POSIX.1-2008]
           getlogin()
           getlogin_r()
           getnameinfo()
           getnetbyaddr()
           getnetbyname()
           getnetent()
           getopt() (if opterr is nonzero)
           getprotobyname()
           getprotobynumber()
           getprotoent()
           getpwent()
           getpwnam()
           getpwnam_r()
           getpwuid()
           getpwuid_r()
           gets()
           getservbyname()
           getservbyport()
           getservent()
           getutxent()
           getutxid()
           getutxline()
           getwc()
           getwchar()
           getwd() [SUSv3 only (function removed in POSIX.1-2008)]
           glob()
           iconv_close()
           iconv_open()
           ioctl()
           link()
           linkat() [Added in POSIX.1-2008]
           lio_listio() [Added in POSIX.1-2008]
           localtime()
           localtime_r()
           lockf() [Added in POSIX.1-2008]
           lseek()
           lstat()
           mkdir() [Added in POSIX.1-2008]
           mkdirat() [Added in POSIX.1-2008]
           mkdtemp() [Added in POSIX.1-2008]
           mkfifo() [Added in POSIX.1-2008]
           mkfifoat() [Added in POSIX.1-2008]
           mknod() [Added in POSIX.1-2008]
           mknodat() [Added in POSIX.1-2008]
           mkstemp()
           mktime()
           nftw()
           opendir()
           openlog()
           pathconf()
           pclose()
           perror()
           popen()
           posix_fadvise()
           posix_fallocate()
           posix_madvise()
           posix_openpt()
           posix_spawn()
           posix_spawnp()
           posix_trace_clear()
           posix_trace_close()
           posix_trace_create()
           posix_trace_create_withlog()
           posix_trace_eventtypelist_getnext_id()
           posix_trace_eventtypelist_rewind()
           posix_trace_flush()
           posix_trace_get_attr()
           posix_trace_get_filter()
           posix_trace_get_status()
           posix_trace_getnext_event()
           posix_trace_open()
           posix_trace_rewind()
           posix_trace_set_filter()
           posix_trace_shutdown()
           posix_trace_timedgetnext_event()
           posix_typed_mem_open()
           printf()
           psiginfo() [Added in POSIX.1-2008]
           psignal() [Added in POSIX.1-2008]
           pthread_rwlock_rdlock()
           pthread_rwlock_timedrdlock()
           pthread_rwlock_timedwrlock()
           pthread_rwlock_wrlock()
           putc()
           putc_unlocked()
           putchar()
           putchar_unlocked()
           puts()
           pututxline()
           putwc()
           putwchar()
           readdir()
           readdir_r()
           readlink() [Added in POSIX.1-2008]
           readlinkat() [Added in POSIX.1-2008]
           remove()
           rename()
           renameat() [Added in POSIX.1-2008]
           rewind()
           rewinddir()
           scandir() [Added in POSIX.1-2008]
           scanf()
           seekdir()
           semop()
           setgrent()
           sethostent()
           setnetent()
           setprotoent()
           setpwent()
           setservent()
           setutxent()
           sigpause() [Added in POSIX.1-2008]
           stat()
           strerror()
           strerror_r()
           strftime()
           symlink()
           symlinkat() [Added in POSIX.1-2008]
           sync()
           syslog()
           tmpfile()
           tmpnam()
           ttyname()
           ttyname_r()
           tzset()
           ungetc()
           ungetwc()
           unlink()
           unlinkat() [Added in POSIX.1-2008]
           utime() [Added in POSIX.1-2008]
           utimensat() [Added in POSIX.1-2008]
           utimes() [Added in POSIX.1-2008]
           vdprintf() [Added in POSIX.1-2008]
           vfprintf()
           vfwprintf()
           vprintf()
           vwprintf()
           wcsftime()
           wordexp()
           wprintf()
           wscanf()
</pre></div>



<a name="179428900"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179428900" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179428900">(Oct 30 2019 at 13:07)</a>:</h4>
<p>My rule of thumb is that, if some operation of the POSIX or C library APIs can result in a context switch to the kernel, the it is probably a cancellation point. That's a lot of operations.</p>



<a name="179435216"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179435216" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179435216">(Oct 30 2019 at 14:09)</a>:</h4>
<p><span class="user-mention" data-user-id="132920">@gnzlbg</span> I don't think that characterization of a major-version upgrade is quite right, and I think the next version can go much more smoothly than the last. It sort of depends on the specifics, but it's not so bad that everyone has to upgrade their rustc</p>



<a name="179435376"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179435376" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179435376">(Oct 30 2019 at 14:11)</a>:</h4>
<p>Basically cancellation works like this:<br>
1) <code>pthread_cancel</code> sends a signal to the thread being canceled.<br>
2) The signal handler sets a flag in thread-local storage and returns.<br>
3) If the thread was in a system call, that system call is automatically interrupted by the signal.<br>
4) At cancellation points, glibc checks this flag and triggers unwinding if it is set.</p>



<a name="179435666"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179435666" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179435666">(Oct 30 2019 at 14:13)</a>:</h4>
<p>There is also <code>PTHREAD_CANCEL_ASYNCHRONOUS</code>, which unwinds directly from the signal handler (without needing a cancellation point). But this is horribly unsafe and the man page says that this is only safe to use if the thread does not call <em>any</em> libc functions.</p>



<a name="179435862"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179435862" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179435862">(Oct 30 2019 at 14:15)</a>:</h4>
<blockquote>
<p>I don't think that characterization of a major-version upgrade is quite right, and I think the next version can go much more smoothly than the last.</p>
</blockquote>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> do you remember exactly what caused so much pain last time ?</p>



<a name="179435951"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179435951" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179435951">(Oct 30 2019 at 14:16)</a>:</h4>
<p>Looking at the libc crate, the crate does not use the <code>links = </code> key in the Cargo.toml, so there should not be a conflict in dependency resolution due to it.</p>



<a name="179435998"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179435998" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179435998">(Oct 30 2019 at 14:16)</a>:</h4>
<p>The only places where things are linked are in the <code>extern "C" { ... }</code> blocks using link flags</p>



<a name="179436053"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436053" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436053">(Oct 30 2019 at 14:17)</a>:</h4>
<p>but that should not cause any troubles across major version releases</p>



<a name="179436086"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436086" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436086">(Oct 30 2019 at 14:17)</a>:</h4>
<p><span class="user-mention" data-user-id="132920">@gnzlbg</span> the pain point is that <code>libc01::c_void</code> was a different type than <code>libc02::c_void</code>, so if you used <code>*mut c_void</code> in your public API then everyone had to upgrade at the same time to get everyone to agree on <code>c_void</code> (or any other libc type in the public API)</p>



<a name="179436128"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436128" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436128">(Oct 30 2019 at 14:18)</a>:</h4>
<p>that point specifically is now fixed with <code>core::ffi::c_void</code></p>



<a name="179436162"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436162" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436162">(Oct 30 2019 at 14:18)</a>:</h4>
<p>functions themselves don't matter, it's the public types being shared across libc versions</p>



<a name="179436176"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436176" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436176">(Oct 30 2019 at 14:18)</a>:</h4>
<p>and <code>c_void</code> was the <a href="https://github.com/rust-lang/rust/issues/1" target="_blank" title="https://github.com/rust-lang/rust/issues/1">#1</a> through like <a href="https://github.com/rust-lang/rust/issues/1000" target="_blank" title="https://github.com/rust-lang/rust/issues/1000">#1000</a> reason why it was so common</p>



<a name="179436208"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436208" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436208">(Oct 30 2019 at 14:18)</a>:</h4>
<p>yes libc now uses core::ffi::c_void</p>



<a name="179436225"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436225" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436225">(Oct 30 2019 at 14:18)</a>:</h4>
<p>so a transition to 1.0 won't exactly be smooth but it won't be as bad as the last, or at least that's theorized</p>



<a name="179436266"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436266" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436266">(Oct 30 2019 at 14:19)</a>:</h4>
<p>the other types haven't changed either</p>



<a name="179436290"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436290" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436290">(Oct 30 2019 at 14:19)</a>:</h4>
<p>then there shouldn't be a problem at all in doing a new libc release</p>



<a name="179436322"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436322" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436322">(Oct 30 2019 at 14:20)</a>:</h4>
<p>ah, no wait</p>



<a name="179436367"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436367" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436367">(Oct 30 2019 at 14:20)</a>:</h4>
<p>(FWIW if a new libc release is being done this is something I think we'll want to coordinate with folks, this shouldn't just happen off-hand)</p>



<a name="179436386"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436386" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436386">(Oct 30 2019 at 14:20)</a>:</h4>
<p>but the issue is not that the types didn't change but that they're defined in two crates</p>



<a name="179436396"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436396" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436396">(Oct 30 2019 at 14:20)</a>:</h4>
<p><span class="user-mention" data-user-id="116015">@Alex Crichton</span> if I release libc 0.3, then <code>libc::03::c_int</code> is a different type that <code>libc::02::c_int</code></p>



<a name="179436416"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436416" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436416">(Oct 30 2019 at 14:20)</a>:</h4>
<p>That's not quite true b/c <code>c_int</code> is a type alias to <code>i32</code></p>



<a name="179436419"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436419" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436419">(Oct 30 2019 at 14:20)</a>:</h4>
<p>so anyone using those for interoperation will run into issues</p>



<a name="179436420"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436420" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436420">(Oct 30 2019 at 14:20)</a>:</h4>
<p>so it resolves to the same type</p>



<a name="179436440"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436440" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436440">(Oct 30 2019 at 14:20)</a>:</h4>
<p>something like <code>struct Dl_info</code>, however, will be different even though it didn't change</p>



<a name="179436442"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436442" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436442">(Oct 30 2019 at 14:20)</a>:</h4>
<p>ok, so it only impacts the struct types</p>



<a name="179436447"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436447" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436447">(Oct 30 2019 at 14:21)</a>:</h4>
<p>or the <code>enum File {}</code></p>



<a name="179436454"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436454" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436454">(Oct 30 2019 at 14:21)</a>:</h4>
<p>(but again let's discuss specifics before it actually hapens)</p>



<a name="179436457"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436457" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436457">(Oct 30 2019 at 14:21)</a>:</h4>
<p>right yeah</p>



<a name="179436463"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436463" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436463">(Oct 30 2019 at 14:21)</a>:</h4>
<p>I see</p>



<a name="179436465"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436465" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436465">(Oct 30 2019 at 14:21)</a>:</h4>
<p>do you want to release libc 0.3 soon?</p>



<a name="179436470"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436470" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436470">(Oct 30 2019 at 14:21)</a>:</h4>
<p>no</p>



<a name="179436475"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436475" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436475">(Oct 30 2019 at 14:21)</a>:</h4>
<p>ah ok</p>



<a name="179436482"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436482" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436482">(Oct 30 2019 at 14:21)</a>:</h4>
<p>I just though things were worse than they are</p>



<a name="179436489"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436489" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436489">(Oct 30 2019 at 14:21)</a>:</h4>
<p>nah yeah we're in a way better position than before</p>



<a name="179436501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436501">(Oct 30 2019 at 14:21)</a>:</h4>
<p>especially with <code>c_void</code> solved</p>



<a name="179436508"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436508" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Alex Crichton <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436508">(Oct 30 2019 at 14:21)</a>:</h4>
<p>and all typedefs go to the same base integer types</p>



<a name="179436618"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436618" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436618">(Oct 30 2019 at 14:22)</a>:</h4>
<p>yes, type aliases help here for better or worse</p>



<a name="179436648"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436648" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436648">(Oct 30 2019 at 14:23)</a>:</h4>
<p>this looks pretty much as good as it is going to get</p>



<a name="179436673"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436673" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436673">(Oct 30 2019 at 14:23)</a>:</h4>
<p>every major release is going to cause the incompatibility with the types unless we use the semver trick</p>



<a name="179436686"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179436686" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> gnzlbg <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179436686">(Oct 30 2019 at 14:23)</a>:</h4>
<p>(e.g. libc 0.3 depends on 0.2 and re-exports everything or parts of it)</p>



<a name="179459831"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179459831" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179459831">(Oct 30 2019 at 18:05)</a>:</h4>
<p><span class="user-mention" data-user-id="116009">@nikomatsakis</span> I've added a quote from Nick Lewycky (whom I've mentioned a few times before and whom I've invited to join this group) to the document. I think it has some overlap with some other sections, but, unlike other arguments for letting <code>extern "C"</code> unwind-by-default, actually seems like a reasonable argument _not_ to introduce <code>extern "C nounwind"</code>.</p>



<a name="179460193"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179460193" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179460193">(Oct 30 2019 at 18:09)</a>:</h4>
<p><span class="user-mention" data-user-id="143274">@Amanieu</span> I would also like to hear your reaction to that quote</p>



<a name="179460529"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179460529" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179460529">(Oct 30 2019 at 18:13)</a>:</h4>
<p>Well, you can't really capture exceptions in C, but you can definitely throw them (just call <code>_Unwind_RaiseException</code>).</p>



<a name="179460788"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179460788" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179460788">(Oct 30 2019 at 18:16)</a>:</h4>
<p>IMO the main argument is that <code>extern "C"</code> -&gt; <code>extern "C nounwind"</code> is an optimization, which <code>extern "C"</code> -&gt; <code>extern "C unwind"</code> is actually needed for correctness.</p>



<a name="179460880"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179460880" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179460880">(Oct 30 2019 at 18:17)</a>:</h4>
<p>Also we avoid any issues with bumping the libc version, since <code>extern "C nounwind" fn</code> will coerce to <code>extern "C" fn</code>.</p>



<a name="179461501"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179461501" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179461501">(Oct 30 2019 at 18:23)</a>:</h4>
<blockquote>
<p>Well, you can't really capture exceptions in C, but you can definitely throw them (just call <code>_Unwind_RaiseException</code>).</p>
</blockquote>
<p>Isn't Nick's statement that you could catch them with a library function (the way Rust does) correct?</p>



<a name="179461659"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179461659" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179461659">(Oct 30 2019 at 18:24)</a>:</h4>
<p>(I guess I'm still not sure how that actually works; it seems like it would need to set up a new frame with a landing pad...)</p>



<a name="179464793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179464793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Amanieu <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179464793">(Oct 30 2019 at 18:53)</a>:</h4>
<p>You would need to attach a custom personality function and generate the necessary landing pads. I'm pretty sure you can't do either even with GCC-specific extensions.</p>



<a name="179635623"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635623" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635623">(Nov 01 2019 at 15:29)</a>:</h4>
<p>so -- obviously this remains the big topic dejour</p>



<a name="179635649"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635649" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635649">(Nov 01 2019 at 15:29)</a>:</h4>
<p>I no longer like my framing (i.e., the topic of this zulip thread), in that I think that the set of interesting options is a bit more... entangled.</p>



<a name="179635698"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635698" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635698">(Nov 01 2019 at 15:30)</a>:</h4>
<p>I was thinking about how to reorganize the information in the hackmd</p>



<a name="179635730"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635730" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635730">(Nov 01 2019 at 15:30)</a>:</h4>
<p>I was thinking about trying to have a "Considerations" section that tries to outline major blocks of considerations, and then have a proposal section that goes through various possible designs and discusses their impact on the considerations</p>



<a name="179635740"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635740" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635740">(Nov 01 2019 at 15:30)</a>:</h4>
<p>I think the proposals would be:</p>



<a name="179635749"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635749" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635749">(Nov 01 2019 at 15:30)</a>:</h4>
<ul>
<li>"C" vs "C unwind" -- the original proposal</li>
</ul>



<a name="179635820"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635820" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635820">(Nov 01 2019 at 15:31)</a>:</h4>
<ul>
<li>"C" and <code>#[unwind(allowed)]</code> -- nightly behavior, where by-ptr calls are permitted to unwind, but you have to "opt-in" on extern declarations if they should permit unwinding</li>
</ul>



<a name="179635869"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635869" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635869">(Nov 01 2019 at 15:32)</a>:</h4>
<ul>
<li>"C" and <code>#[unwind(ub)]</code> -- similar but we default to permitting unwinding and you have to <em>opt out</em> (not sure what the best flag would be there)</li>
</ul>



<a name="179635885"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635885" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635885">(Nov 01 2019 at 15:32)</a>:</h4>
<ul>
<li>"C" vs "C noexcept" -- similar mirror image of the original proposal, I guess?</li>
</ul>



<a name="179635895"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635895" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635895">(Nov 01 2019 at 15:32)</a>:</h4>
<p>I guess there are basically two orthogonal facets</p>



<a name="179635906"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635906" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635906">(Nov 01 2019 at 15:33)</a>:</h4>
<ul>
<li>to use the ABI</li>
<li>how to arrange defaults</li>
</ul>



<a name="179635920"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179635920" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179635920">(Nov 01 2019 at 15:33)</a>:</h4>
<p>but I'm not sure they're orthogonal in terms of the overall design space</p>



<a name="179636034"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179636034" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179636034">(Nov 01 2019 at 15:34)</a>:</h4>
<p>(in other words, it feels like we might want to decide them together, though I'm trying to elaborate why I thought that now)</p>



<a name="179636694"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179636694" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179636694">(Nov 01 2019 at 15:42)</a>:</h4>
<p>Let me think about how to organize the dock and give you an outline later, without doing the actual verbiage reorg</p>



<a name="179636782"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179636782" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179636782">(Nov 01 2019 at 15:43)</a>:</h4>
<p>I want to spend a bit of time on the release notes blog today if possible, and over the weekend update the discussion/status summaries</p>



<a name="179640535"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179640535" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179640535">(Nov 01 2019 at 16:23)</a>:</h4>
<p>"release notes blog"?</p>



<a name="179641737"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/179641737" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#179641737">(Nov 01 2019 at 16:37)</a>:</h4>
<p>Er, release blog post.</p>



<a name="180158802"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/180158802" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> nikomatsakis <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#180158802">(Nov 07 2019 at 18:17)</a>:</h4>
<blockquote>
<p>Let me think about how to organize the dock and give you an outline later, without doing the actual verbiage reorg</p>
</blockquote>
<p><span class="user-mention" data-user-id="120076">@Kyle Strand</span> were you ever able to make progress on this?</p>



<a name="180159035"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/210922-project-ffi-unwind/topic/%22C%20unwind%22%20vs%20%22C%20noexcept%22/near/180159035" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> BatmanAoD (Kyle Strand) <a href="https://zulip-archive.rust-lang.org/stream/210922-project-ffi-unwind/topic/.22C.20unwind.22.20vs.20.22C.20noexcept.22.html#180159035">(Nov 07 2019 at 18:19)</a>:</h4>
<p>Not really, unfortunately. I didn't even get a chance to help out with the blog post.</p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
<html>
<head><meta charset="utf-8"><title>old dependency resolving · t-devtools · Zulip Chat Archive</title></head>
<h2>Stream: <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/index.html">t-devtools</a></h2>
<h3>Topic: <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html">old dependency resolving</a></h3>

<hr>

<base href="https://rust-lang.zulipchat.com">

<head><link href="https://zulip-archive.rust-lang.org/style.css" rel="stylesheet"></head>

<a name="276331745"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276331745" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Mayr <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276331745">(Mar 23 2022 at 13:23)</a>:</h4>
<p>could be the wrong channel, however: Is there a possibility to use the -Z minimal-version flag for older Versions and not nightly only? I've found the versions in the Json format, but the dep-tree is way to much, to do it manually. Maybe using an old commit for the repo, where the Json data is not up to date? Are there any workarounds? (The compiled legacy software (firefox) just runs in a sandbox without internet connection)</p>



<a name="276337776"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276337776" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276337776">(Mar 23 2022 at 14:05)</a>:</h4>
<p>Might be better for the t-cargo stream.</p>
<p>I'm a little confused as to why you are needing <code>-Z minimal-versions</code> though (e.g. what the json format versions even are, what you are doing with the dep-tree manually, what an old commit has to do with it) to see how to best answer your question.</p>



<a name="276344344"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276344344" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Mayr <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276344344">(Mar 23 2022 at 14:49)</a>:</h4>
<p>I need to compile several old commits of firefox. There are some requirements for the rust version as well as cbindgen. However, installing cbindgen with cargo (specific version of cbindgen with specific rust version set before) downloads the newest dependencies for this crate, which the old rustc cannot compile. On the <a href="http://crates.io">crates.io</a> repo, there are json formatted minimal requirements for each version of the package of the dependency tree, which are very likely compileable.<br>
This is totally against the philisophy of rust, I know, but there has to be some possibility to compile older code that has a dep-tree &gt; 1</p>



<a name="276344669"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276344669" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276344669">(Mar 23 2022 at 14:51)</a>:</h4>
<p>You can use <code>cargo install cbindgen --version &lt;some version&gt;</code> to install a specific cbindgen version.</p>



<a name="276344779"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276344779" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276344779">(Mar 23 2022 at 14:52)</a>:</h4>
<p>The problem isn't cbindgen itself but its dependencies.</p>



<a name="276344986"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276344986" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276344986">(Mar 23 2022 at 14:54)</a>:</h4>
<p>Passing <code>--locked</code> should make it respect the <code>Cargo.lock</code> of cbindgen if it has one.</p>



<a name="276345119"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276345119" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> bjorn3 <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276345119">(Mar 23 2022 at 14:54)</a>:</h4>
<p>Cargo started uploading them to <a href="http://crates.io">crates.io</a> in rustc 1.37.</p>



<a name="276345240"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276345240" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Ed Page <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276345240">(Mar 23 2022 at 14:55)</a>:</h4>
<p>If you need an older version, cbindgen has the Cargo.lock in its repo, so you could install from that.</p>



<a name="276350793"></a>
<h4><a href="https://rust-lang.zulipchat.com#narrow/stream/301329-t-devtools/topic/old%20dependency%20resolving/near/276350793" class="zl"><img src="https://zulip-archive.rust-lang.org/assets/img/zulip.svg" alt="view this post on Zulip" style="width:20px;height:20px;"></a> Luca Mayr <a href="https://zulip-archive.rust-lang.org/stream/301329-t-devtools/topic/old.20dependency.20resolving.html#276350793">(Mar 23 2022 at 15:30)</a>:</h4>
<p>It seems, even older cargo versions offer --locked. When adding --locked to the cargo install --version x.y.z --locked, it should use the Cargo lock file right? There is one such file in the repo, but is ignored. However, many thanks for the help, was about to write some service on my own <span aria-label="sweat smile" class="emoji emoji-1f605" role="img" title="sweat smile">:sweat_smile:</span></p>



<hr><p>Last updated: Apr 12 2022 at 20:01 UTC</p>
</html>
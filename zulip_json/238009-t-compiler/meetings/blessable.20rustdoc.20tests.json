[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"124288\">@oli</span> <span class=\"user-mention\" data-user-id=\"210316\">@GuillaumeGomez</span> let's move discussion here</p>",
        "id": 250940988,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630075051
    },
    {
        "content": "<p>Just to sum up things:</p>\n<ul>\n<li><code>tests/rustdoc</code> aren't blessable</li>\n<li><code>tests/rustdoc-ui</code> are blessable and very much like the \"normal\" ui tests</li>\n</ul>\n<p>What we want here is to have a way to check the generated output from ast_pretty and a way (blessable?) to check what is generated from these functions.</p>\n<p>Did I miss something?</p>",
        "id": 250941304,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1630075178
    },
    {
        "content": "<p>I don't understand how this is possible, though. The checks in src/test/rustdoc are error annotations, not the output itself. It's <em>intentional</em> you have to manually update them so they don't change by accident.</p>",
        "id": 251058120,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630159182
    },
    {
        "content": "<p>can we start out by using some -Z flag in a regular ui test that dumps the ast_pretty?</p>",
        "id": 251061861,
        "sender_full_name": "oli",
        "timestamp": 1630163148
    },
    {
        "content": "<p>how would that help?</p>",
        "id": 251061920,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630163190
    },
    {
        "content": "<p>blessing will put that dump into a .stdout file, and T-rustdoc can get notified on changes to these tests</p>",
        "id": 251061934,
        "sender_full_name": "oli",
        "timestamp": 1630163211
    },
    {
        "content": "<p>ah ok - sure, that seems reasonable</p>",
        "id": 251061941,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630163221
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/238009-t-compiler.2Fmeetings/topic/blessable.20rustdoc.20tests/near/251058120\">said</a>:</p>\n<blockquote>\n<p>It's <em>intentional</em> you have to manually update them so they don't change by accident.</p>\n</blockquote>\n<p>Putting on my “pedantic” hat: I’d say that its intentional for all tests, even blessable ones, that they don’t change by accident. Just because we provide an easier path for updates doesn’t mean that we intend for it to be an automatic process (though I admit that it ends up being somewhat automatic in practice, what with rubber-stamp r+ approvals in many cases).</p>",
        "id": 252318803,
        "sender_full_name": "pnkfelix",
        "timestamp": 1631026653
    },
    {
        "content": "<p>In most cases where one cannot “bless”, I’d say its due to tooling limitations (e.g. not wanting to hack something up that goes in and automatically editting source files to add <code>//~ERROR</code> lines), because we assume that humans will do a better job of deciding what to put in there.</p>",
        "id": 252319294,
        "sender_full_name": "pnkfelix",
        "timestamp": 1631026830
    }
]
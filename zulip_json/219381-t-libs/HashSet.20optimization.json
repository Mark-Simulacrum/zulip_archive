[
    {
        "content": "<p>If I want to add a specialization to <code>HashSet</code>, should that go into hashbrown or std?</p>",
        "id": 263066575,
        "sender_full_name": "The 8472",
        "timestamp": 1638219334
    },
    {
        "content": "<p>The <code>Extend</code> implementation specifically, std has a wrapper for that and it would be possible to implement it there</p>",
        "id": 263066716,
        "sender_full_name": "The 8472",
        "timestamp": 1638219398
    },
    {
        "content": "<p>What kind of specialization do you have in mind?</p>",
        "id": 263174670,
        "sender_full_name": "Amanieu",
        "timestamp": 1638291606
    },
    {
        "content": "<p>I would prefer having the specialization in hashbrown so that hashbrown users can also benefit from it.</p>",
        "id": 263174966,
        "sender_full_name": "Amanieu",
        "timestamp": 1638291684
    },
    {
        "content": "<p>Avoiding unnecessary clones when collecting a <code>std::iter::Cloned</code> iterator into a set. Hash, lookup raw entry and only clone when it's vacant.</p>",
        "id": 263175212,
        "sender_full_name": "The 8472",
        "timestamp": 1638291748
    },
    {
        "content": "<p>But that'll need some way to get the inner iterator out of the <code>Cloned</code> struct. If I were to make the modification in std then I'd just put it under an <code>std_internals</code> feature in <code>core</code>.</p>",
        "id": 263175903,
        "sender_full_name": "The 8472",
        "timestamp": 1638292017
    },
    {
        "content": "<p>I guess it has to be in <code>std</code> then.</p>",
        "id": 263177379,
        "sender_full_name": "Amanieu",
        "timestamp": 1638292609
    },
    {
        "content": "<p>Is there a particular reason you are looking to implement this optimization? Did this come up as a performance issue in some code you are working on?</p>",
        "id": 263177453,
        "sender_full_name": "Amanieu",
        "timestamp": 1638292639
    },
    {
        "content": "<p>I could have used it in rustc when optimizing something else but did it manually with hashmap&lt;T, ()&gt; and raw entries instead.</p>",
        "id": 263177620,
        "sender_full_name": "The 8472",
        "timestamp": 1638292695
    }
]
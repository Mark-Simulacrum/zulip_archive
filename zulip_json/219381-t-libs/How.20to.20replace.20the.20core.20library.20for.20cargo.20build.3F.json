[
    {
        "content": "<p>Hello everyone! Sorry to bother you here. I have a noob question on how to replace the core library with my own one. I simply tried to add a crate in <code>Cargo.toml</code> like:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[dependencies]</span><span class=\"w\"></span>\n<span class=\"n\">core</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">path</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"/Users/jmpotato/Code/rust/library/core\"</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>And the <code>cargo build</code> showed these messages which clearly indicate the duplication between my core and the internal library.</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code>   <span class=\"o\">=</span> note: the lang item is first defined <span class=\"k\">in</span> crate <span class=\"sb\">`</span>core<span class=\"sb\">`</span>.\n   <span class=\"o\">=</span> note: first definition <span class=\"k\">in</span> <span class=\"sb\">`</span>core<span class=\"sb\">`</span> loaded from /Users/jmpotato/.rustup/toolchains/nightly-aarch64-apple-darwin/lib/rustlib/aarch64-apple-darwin/lib/libcore-dd6de681850a671c.rlib\n   <span class=\"o\">=</span> note: second definition <span class=\"k\">in</span> the <span class=\"nb\">local</span> crate <span class=\"o\">(</span><span class=\"sb\">`</span>core<span class=\"sb\">`</span><span class=\"o\">)</span><span class=\"sb\">`</span>\n</code></pre></div>\n<p>So what is the right way to replace the core library?</p>",
        "id": 274078188,
        "sender_full_name": "JmPotato",
        "timestamp": 1646367121
    },
    {
        "content": "<p>I'm not sure you can add core as a cargo dep like that, but do you have <code>#![no_core]</code> at the top of your crate?</p>",
        "id": 274078560,
        "sender_full_name": "Ibraheem Ahmed",
        "timestamp": 1646367516
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"363998\">Ibraheem Ahmed</span> <a href=\"#narrow/stream/219381-t-libs/topic/How.20to.20replace.20the.20core.20library.20for.20cargo.20build.3F/near/274078560\">said</a>:</p>\n<blockquote>\n<p>I'm not sure you can add core as a cargo dep like that, but do you have <code>#![no_core]</code> at the top of your crate?</p>\n</blockquote>\n<p>Yes, I have tried<code>#![no_core]</code>, but it did not work. I still got the same error.</p>",
        "id": 274078684,
        "sender_full_name": "JmPotato",
        "timestamp": 1646367670
    },
    {
        "content": "<p>You might need to add <code>#![no_core]</code> to the top your <code>core</code> library as well.</p>",
        "id": 274093192,
        "sender_full_name": "lovelymono",
        "timestamp": 1646380956
    },
    {
        "content": "<p>Do you have any other dependencies? If so they will get the libcore from the sysroot. You could try using xargo in combination with the <code>XARGO_RUST_SRC</code> env var to override the source from which it builds a new sysroot.</p>",
        "id": 274100776,
        "sender_full_name": "bjorn3",
        "timestamp": 1646385499
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"479918\">@lovelymono</span> <span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span> Thank you. I will have a try on these methods!</p>",
        "id": 274101368,
        "sender_full_name": "JmPotato",
        "timestamp": 1646385819
    }
]
[
    {
        "content": "<p>A while ago I filed the linked issue about <code>BufReader</code> seeming to wipe its internal buffer when <code>stream_position</code> was called, but the documentation and source code for <code>BufReader.stream_position</code> both do not seem to clear the buffer. However, the tracing results that I posted at <a href=\"https://github.com/rust-lang/rust/issues/86832#issuecomment-913786239\">https://github.com/rust-lang/rust/issues/86832#issuecomment-913786239</a> show that the invocation of <code>stream_position</code>leads to <code>BufReader</code> not reducing the number of reads that it performs on the inner I/O object. Does anyone have pointers on how <code>BufReader</code> works and where I can look to continue investigating this issue?</p>",
        "id": 252646329,
        "sender_full_name": "Ryan Lee",
        "timestamp": 1631201699
    },
    {
        "content": "<p><code>IOStatWrapper</code> doesn't implement <code>stream_position</code> in <code>Seek</code> so it is always using the default implementation which calls <code>seek</code> and ends up discarding the buffer.</p>",
        "id": 252648571,
        "sender_full_name": "Amanieu",
        "timestamp": 1631202614
    }
]
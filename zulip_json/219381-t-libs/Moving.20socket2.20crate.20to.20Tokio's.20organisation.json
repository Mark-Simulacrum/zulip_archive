[
    {
        "content": "<p>Currently the maintenance for various crates in the rust-lang organisation is somewhat lacking. To be clear I'm not trying to point fingers here, but I think it's clear that we just need more people. I became the maintainer of socket2 after the original creators moved on. I was happy to do maintain socket2 (still am), but I'm the only one doing it. I'm fine with that, but if I get hit by a bus... then who's stepping up? </p>\n<p>The Tokio organisation has offered to maintain the repo. I'm already maintaining Mio in the Tokio org so personally I'm ok either way. I've created an issue in the socket2 repo (<a href=\"https://github.com/rust-lang/socket2/issues/269\">https://github.com/rust-lang/socket2/issues/269</a>), but got no response.</p>\n<p>Since the libs team still owns the crate (I think, I'm not sure), I wanted to check here before moving the repo (since I've see no objections so far).</p>",
        "id": 258818794,
        "sender_full_name": "Thomas de Zeeuw",
        "timestamp": 1634989072
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"358138\">@Thomas de Zeeuw</span> I remember some time ago there was some discussion about trying to merge some of the functionality of socket2 into the standard library. Is there still an interest in doing so? I personally would be thrilled to merge support for additional options on sockets, including target-specific options.</p>",
        "id": 258819654,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1634990478
    },
    {
        "content": "<p>(That's not directly addressing your question, but it seems related.)</p>",
        "id": 258819667,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1634990499
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/219381-t-libs/topic/Moving.20socket2.20crate.20to.20Tokio's.20organisation/near/258819654\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"358138\">Thomas de Zeeuw</span> I remember some time ago there was some discussion about trying to merge some of the functionality of socket2 into the standard library. Is there still an interest in doing so? I personally would be thrilled to merge support for additional options on sockets, including target-specific options.</p>\n</blockquote>\n<p>This was indeed my intention, but more as a std-lib depending on socket2 (similar to what the HashMap type does with the hashbrown crate). I think this can still continue, but I personally don't have the time for it anymore</p>",
        "id": 258819723,
        "sender_full_name": "Thomas de Zeeuw",
        "timestamp": 1634990557
    },
    {
        "content": "<p>In general, I'd love to see a semi-unsafe <code>setsockopt</code> (handling buffer size but not knowing the type of the option you're passing) and a safe wrapper around it for any useful option, as one example.</p>",
        "id": 258819724,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1634990559
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"358138\">Thomas de Zeeuw</span> <a href=\"#narrow/stream/219381-t-libs/topic/Moving.20socket2.20crate.20to.20Tokio's.20organisation/near/258819723\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/219381-t-libs/topic/Moving.20socket2.20crate.20to.20Tokio's.20organisation/near/258819654\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"358138\">Thomas de Zeeuw</span> I remember some time ago there was some discussion about trying to merge some of the functionality of socket2 into the standard library. Is there still an interest in doing so? I personally would be thrilled to merge support for additional options on sockets, including target-specific options.</p>\n</blockquote>\n<p>This was indeed my intention, but more as a std-lib depending on socket2 (similar to what the HashMap type does with the hashbrown crate). I think this can still continue, but I personally don't have the time for it anymore</p>\n</blockquote>\n<p>Would you be open to the idea of just directly adding the functionality to the standard library socket types?</p>",
        "id": 258819737,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1634990610
    },
    {
        "content": "<p>Yes and no. Yes because I also like to see std lib socket's get some more options. However I still need the socket2 library in my own crates (Mio, Heph and possibly Tokio in the future), which don't/can't depend on std lib's socket types. So that would mean we still have two implementation of the same thing, which I think is a mistake.</p>",
        "id": 258820025,
        "sender_full_name": "Thomas de Zeeuw",
        "timestamp": 1634991031
    },
    {
        "content": "<blockquote>\n<p>which don't/can't depend on std lib's socket types.</p>\n</blockquote>\n<p>Tangentially, we have IO-safety now with BorrowedFd (unix) and BorrowedSocket (windows). Maybe a cross-platform abstraction BorrowedSocketIsh would help these kinds of libraries to make conversion easier without needing platform-specific <code>cfg</code> stuff.</p>",
        "id": 258821358,
        "sender_full_name": "The 8472",
        "timestamp": 1634993058
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330154\">The 8472</span> <a href=\"#narrow/stream/219381-t-libs/topic/Moving.20socket2.20crate.20to.20Tokio's.20organisation/near/258821358\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>which don't/can't depend on std lib's socket types.</p>\n</blockquote>\n<p>Tangentially, we have IO-safety now with BorrowedFd (unix) and BorrowedSocket (windows). Maybe a cross-platform abstraction BorrowedSocketIsh would help these kinds of libraries to make conversion easier without needing platform-specific <code>cfg</code> stuff.</p>\n</blockquote>\n<p>You mean <a href=\"https://docs.rs/socket2/0.4.2/socket2/struct.SockRef.html\">https://docs.rs/socket2/0.4.2/socket2/struct.SockRef.html</a>?</p>",
        "id": 258829482,
        "sender_full_name": "Thomas de Zeeuw",
        "timestamp": 1635003697
    },
    {
        "content": "<p>Oh, yeah, that works. Didn't see that <code>From</code> impl.</p>",
        "id": 258830534,
        "sender_full_name": "The 8472",
        "timestamp": 1635005200
    },
    {
        "content": "<blockquote>\n<p>which don't/can't depend on std lib's socket types</p>\n</blockquote>\n<p>Wait, why not? Neither crates are <code>#![no_std]</code>.</p>\n<blockquote>\n<p>Maybe a cross-platform abstraction BorrowedSocketIsh would help</p>\n</blockquote>\n<p>The Socketlike family of types exists in the io-lifetimes crate (<a href=\"https://docs.rs/io-lifetimes\">https://docs.rs/io-lifetimes</a>) for this purpose. I think this was removed from the RFC though.</p>",
        "id": 258842587,
        "sender_full_name": "Kestrer",
        "timestamp": 1635022998
    },
    {
        "content": "<p>What is the realistic timeline if we want to get socket2 to become part of std in a hashbrown-like solution?</p>",
        "id": 259054902,
        "sender_full_name": "Alice Ryhl",
        "timestamp": 1635227839
    },
    {
        "content": "<p>Does socket2 support no_std?</p>",
        "id": 259070346,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1635239842
    },
    {
        "content": "<p>No I don't think so.</p>",
        "id": 259133994,
        "sender_full_name": "Alice Ryhl",
        "timestamp": 1635270173
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"218683\">@Alice Ryhl</span> One issue we've run into is that if a crate wants to be a dependency of std, it needs to not, itself, depend on std.</p>",
        "id": 259137743,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1635271757
    },
    {
        "content": "<p>I'm also wondering what about the implementation would make such a dependency sufficient to save substantial implementation burden, compared to (for instance) flipping it around and having socket2 use (and extend) std sockets.</p>",
        "id": 259137923,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1635271836
    },
    {
        "content": "<p>Especially if we expose more functionality in std sockets.</p>",
        "id": 259137946,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1635271846
    },
    {
        "content": "<p>I noticed that I can't ping the lib team on issues. Could lib team ping and/or take a look at <a href=\"https://github.com/rust-lang/socket2/issues/269\">https://github.com/rust-lang/socket2/issues/269</a>?</p>",
        "id": 260832531,
        "sender_full_name": "Thomas de Zeeuw",
        "timestamp": 1636479822
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"358138\">@Thomas de Zeeuw</span> sorry for the very late reply here. the best way to get our attention and input on sometihng is to open an issue on the libs-team or rust repository and label it as I-libs-nominated. then it appears on our agenda for the next meeting. or just leave a message in the <a class=\"stream\" data-stream-id=\"259402\" href=\"/#narrow/stream/259402-t-libs.2Fmeetings\">#t-libs/meetings</a> channel. the <a class=\"stream\" data-stream-id=\"219381\" href=\"/#narrow/stream/219381-t-libs\">#t-libs</a> channel itself is very active with a lot of things that don't need team decisions, so things that need to be discussed in a meeting easily get lost when posted here.</p>",
        "id": 265163143,
        "sender_full_name": "Mara",
        "timestamp": 1639664870
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310399\">@Mara</span> Thanks for the tip, didn't know that. I tried pinging @rust-lang/libs on GitHub in <a href=\"https://github.com/rust-lang/socket2/issues/269#issuecomment-962607039\">https://github.com/rust-lang/socket2/issues/269#issuecomment-962607039</a>, but that didn't work.</p>",
        "id": 265281975,
        "sender_full_name": "Thomas de Zeeuw",
        "timestamp": 1639739046
    },
    {
        "content": "<p>Pinging teams on GitHub only works for members of the organization afaik (i.e. you need to be a member in order to ping teams)</p>",
        "id": 265369165,
        "sender_full_name": "Waffle Lapkin",
        "timestamp": 1639779854
    }
]
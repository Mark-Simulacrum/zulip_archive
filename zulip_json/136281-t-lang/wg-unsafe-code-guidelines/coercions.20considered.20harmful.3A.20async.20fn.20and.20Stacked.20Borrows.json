[
    {
        "content": "<p>See <a href=\"https://github.com/solson/miri/issues/532#issuecomment-442552764\" target=\"_blank\" title=\"https://github.com/solson/miri/issues/532#issuecomment-442552764\">https://github.com/solson/miri/issues/532#issuecomment-442552764</a>: If my analysis is correct, <code>async fn</code> violates Stacked Borrows, but that's just a silly mistake that went unnoticed only because mutable references implicitly coerce to shared references.</p>",
        "id": 148731945,
        "sender_full_name": "RalfJ",
        "timestamp": 1543429530
    },
    {
        "content": "<p>a.k.a. why my ACA model did not treat mutable references as \"asserting\" (i.e. popping the stack) until they are used to some degree.</p>",
        "id": 148751125,
        "sender_full_name": "Ariel Ben-Yehuda",
        "timestamp": 1543446473
    },
    {
        "content": "<p>of course, that approach has the disadvantage of forcing a tree instead of a stack.</p>",
        "id": 148751246,
        "sender_full_name": "Ariel Ben-Yehuda",
        "timestamp": 1543446588
    },
    {
        "content": "<p>it's somewhat weird to see that the examples that violate this are clearly mistakes, rather than being just dubious unsafe code.</p>",
        "id": 148751449,
        "sender_full_name": "Ariel Ben-Yehuda",
        "timestamp": 1543446730
    },
    {
        "content": "<p>(I expected it to be mainly dubious unsafe code that just uses &amp;mut as intermediates).</p>",
        "id": 148751458,
        "sender_full_name": "Ariel Ben-Yehuda",
        "timestamp": 1543446743
    }
]
[
    {
        "content": "<p>on a fresh 2018 <code>cargo new</code>, <code>cargo +beta fix --edition</code> says:</p>\n<div class=\"codehilite\"><pre><span></span><code>   Migrating src/main.rs from 2018 edition to 2021\nerror: the option `Z` is only accepted on the nightly compiler\n</code></pre></div>",
        "id": 252546289,
        "sender_full_name": "cuviper",
        "timestamp": 1631141667
    },
    {
        "content": "<p>that's <code>1.56.0-beta.1</code></p>",
        "id": 252546293,
        "sender_full_name": "cuviper",
        "timestamp": 1631141672
    },
    {
        "content": "<p>I don't see any <code>Z</code> options with <code>-v -v</code></p>",
        "id": 252546438,
        "sender_full_name": "cuviper",
        "timestamp": 1631141763
    },
    {
        "content": "<p>oh huh</p>",
        "id": 252546593,
        "sender_full_name": "Mara",
        "timestamp": 1631141873
    },
    {
        "content": "<p>ah, apologies, looks like I missed one of the -Z flags</p>",
        "id": 252546852,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631142010
    },
    {
        "content": "<p>I'll post a PR soon</p>",
        "id": 252546870,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631142015
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/268952-edition-2021/topic/cargo.20.2Bbeta.20fix.20--edition.20fails.20on.20option.20Z/near/252546438\">said</a>:</p>\n<blockquote>\n<p>I don't see any <code>Z</code> options with <code>-v -v</code></p>\n</blockquote>\n<p><code>strace  -f -eexecve cargo +beta fix --edition |&amp; grep -- -Z</code> shows a bunch</p>",
        "id": 252546931,
        "sender_full_name": "Mara",
        "timestamp": 1631142047
    },
    {
        "content": "<p>Yea, <code>cargo fix</code> runs <code>rustc</code> a bunch of times in a hidden way.</p>\n<p>I was thinking about exposing it, but I think it would be super noisy.  You can use <code>CARGO_LOG=cargo::ops::fix=debug cargo fix</code> to see what it is actually invoking.</p>",
        "id": 252547073,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631142123
    },
    {
        "content": "<p>(here's a patch btw: <code>sed -i 's/-Zunstable-options/-L----------------/' ~/.rustup/toolchains/beta-x86_64-unknown-linux-gnu/bin/cargo</code> ;) )</p>",
        "id": 252547787,
        "sender_full_name": "Mara",
        "timestamp": 1631142554
    },
    {
        "content": "<p>no way, <code>----------------</code> is where I keep all my incompatible rlibs!</p>",
        "id": 252549228,
        "sender_full_name": "cuviper",
        "timestamp": 1631143555
    },
    {
        "content": "<p>haha</p>",
        "id": 252576600,
        "sender_full_name": "Mara",
        "timestamp": 1631168415
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/268952-edition-2021/topic/cargo.20.2Bbeta.20fix.20--edition.20fails.20on.20option.20Z/near/252549228\">said</a>:</p>\n<blockquote>\n<p>no way, <code>----------------</code> is where I keep all my incompatible rlibs!</p>\n</blockquote>\n<p>switch it to <code>-Ldependency=-----</code>, problem solved :P</p>",
        "id": 252580636,
        "sender_full_name": "eddyb",
        "timestamp": 1631171343
    },
    {
        "content": "<p>or <code>--cfg=____________</code></p>",
        "id": 252580790,
        "sender_full_name": "eddyb",
        "timestamp": 1631171442
    },
    {
        "content": "<p><code>-Cmetadata=aaaaaaa</code> is a fun one</p>",
        "id": 252581265,
        "sender_full_name": "eddyb",
        "timestamp": 1631171743
    },
    {
        "content": "<p>(will change all the <code>TypeId</code>s, symbols, and use a different incremental cache, but other than that, there should be no semantic change)</p>",
        "id": 252581409,
        "sender_full_name": "eddyb",
        "timestamp": 1631171818
    },
    {
        "content": "<p>Posted <a href=\"https://github.com/rust-lang/rust/pull/88786\">https://github.com/rust-lang/rust/pull/88786</a> with the fix.</p>",
        "id": 252657535,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631206005
    },
    {
        "content": "<p>that was quick. thanks!</p>",
        "id": 252657643,
        "sender_full_name": "Mara",
        "timestamp": 1631206061
    }
]
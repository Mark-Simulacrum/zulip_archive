[
    {
        "content": "<p>I brought this up in #libs a while ago, but perhaps I should have come here instead. In Feb I wrote an edition RFC that would use a lint to deny access to any stdlib APIs that were deprecated in the 2015 edition: <a href=\"https://github.com/rust-lang/rfcs/pull/3088\">https://github.com/rust-lang/rfcs/pull/3088</a> . I wrote it for two reasons:</p>\n<ol>\n<li>\n<p>When explaining editions to people, it relatively common for them to ask whether or not editions remove deprecated things from the stdlib. A common response to these questions is that such a thing is impossible. The real answer is not that it's impossible, but that it's simply never been proposed. Even in the event that this RFC is rejected, it will still be useful to be able to say \"no, it's not impossible, but it has been discussed and rejected\".</p>\n</li>\n<li>\n<p>In the process of deprecating the module-level numeric consts in favor of associated consts ( <a href=\"https://github.com/rust-lang/rfcs/pull/2700\">https://github.com/rust-lang/rfcs/pull/2700</a> ), I was somewhat annoyed at the effect this had on the docs. A search for \"MAX\" ( <a href=\"https://doc.rust-lang.org/std/index.html?search=max\">https://doc.rust-lang.org/std/index.html?search=max</a> ) shows foremost a big long list of deprecated consts, and then below the fold you find the replacements. In addition, on the first page of the stdlib API index, a full 20% of the modules in the stdlib are now listed as deprecated ( <a href=\"https://doc.rust-lang.org/std/index.html#modules\">https://doc.rust-lang.org/std/index.html#modules</a> ). Having a policy of eventually denying access to deprecated items would be some justification toward removing these items from the docs entirely, or at least heavily de-emphasizing them. (Note that these specific items were deprecated in the 2018 edition, so would not actually be denied until the edition after 2021.)</p>\n</li>\n</ol>\n<p>Note that the only part of this RFC that is edition-dependent is the part about denying access to the 2015-deprecated items; all the documentation-related parts of the RFC can be done whenever.</p>\n<p>There are probably a lot of improvements to rustdoc that could be made in the meantime that would ease the pain points of having so many deprecated items lying around. If people are vaguely in favor of the denial but not keen on the documentation parts, then that might be an argument for postponing this to the next edition.</p>\n<p>Note also that the denial lint is fully implemented (just needs to be rebased). If accepted, there would be no risk of delaying the edition.</p>\n<p>Mostly I would just like this RFC to have some explicit decision. What do people think?</p>",
        "id": 237190120,
        "sender_full_name": "bstrie",
        "timestamp": 1620059924
    },
    {
        "content": "<p>This really depends on your definition of 'removed'. We can't truly remove something over an edition, because it will still exist in the same standard library when used by a crate from another edition. We've discussed the possibility of hiding things before, but that will just make it harder when reading older code. Pretending some deprecated items just don't exist at all even though there's code (from older editions) using it, is not going to be a great experience. Marking deprecated items in the the rustdoc search results (or moving them to the bottom or whatever) is just something that can be changed in rustdoc. Same for moving deprecated modules to the bottom or hiding them under a fold or something.</p>",
        "id": 237190853,
        "sender_full_name": "Mara",
        "timestamp": 1620060305
    },
    {
        "content": "<p>there are a lot of lints that people wanted to upgrade to errors in Rust 2021, but in the end we changed almost none of them. only two about syntax we could possibly reuse at some point. for anything else, like deprecations, there's just not a lot of use in turning them into hard errors. it'll just be another barrier for people to migrate to a new edition</p>",
        "id": 237191154,
        "sender_full_name": "Mara",
        "timestamp": 1620060437
    },
    {
        "content": "<p>I do like the idea, in general, of making deprecations hard errors after (say) two editions, for one specific reason: it bounds the degree to which we need to deal with simultaneous usage of old deprecated APIs and new edition features. Thinking long-term, when we have 10 editions, managing complexity seems like a good thing to me.</p>",
        "id": 237191483,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620060582
    },
    {
        "content": "<p>It means that when designing the transition from the 2027 edition to the 2030 edition, we don't have to think about APIs deprecated in the 2015 edition at all.</p>",
        "id": 237191646,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620060638
    },
    {
        "content": "<p>I do agree that, separately, we should improve rustdoc to de-emphasize deprecated APIs.</p>",
        "id": 237191734,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620060686
    },
    {
        "content": "<p>but this is just about simple deprecated constants and functions, not language features that will interact in some surprising/interesting way with the new features.</p>",
        "id": 237192002,
        "sender_full_name": "Mara",
        "timestamp": 1620060805
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237191154\">said</a>:</p>\n<blockquote>\n<p>there are a lot of lints that people wanted to upgrade to errors in Rust 2021, but in the end we changed almost none of them. only two about syntax we could possibly reuse at some point.</p>\n</blockquote>\n<p>Was the \"reusing syntax\" argument the deciding factor? I got a different impression from the decision summary in <a href=\"https://github.com/rust-lang/rust/issues/80165\">https://github.com/rust-lang/rust/issues/80165</a> , \"All other lints are either not ready for promotion or are future compatibility warnings (i.e., bugs in the language that we first warn about before making errors in all editions).\". That makes it seem as though the remaining lints are still going to be pursued for denial, just not via an edition. \"Making old code harder to read\" applies to all these lints, whether they're implemented via an edition lint or via a future compat lint. That this RFC restricts itself solely to items that have been deprecated (and therefore issuing warnings) for at least one entire edition cycle is actually more generous than many such lints.</p>",
        "id": 237192176,
        "sender_full_name": "bstrie",
        "timestamp": 1620060859
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237191734\">said</a>:</p>\n<blockquote>\n<p>I do agree that, separately, we should improve rustdoc to de-emphasize deprecated APIs.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"256342\">@bstrie</span> I think is already working on this :) (or at least planning to): <a href=\"#narrow/stream/266220-rustdoc/topic/status.20badges.20in.20search.20results\">https://rust-lang.zulipchat.com/#narrow/stream/266220-rustdoc/topic/status.20badges.20in.20search.20results</a></p>",
        "id": 237192324,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620060914
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310399\">@Mara</span> I think it's hard to predict how a far future language feature or library feature may interact with a far past deprecated API.</p>",
        "id": 237192327,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620060915
    },
    {
        "content": "<p>I'm suggesting that, rather than waiting for a specific such interaction to arise, we consider managing complexity by allowing ourselves to stop thinking about deprecated APIs entirely after a couple of editions.</p>",
        "id": 237192485,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620060966
    },
    {
        "content": "<p>That also means people can't just ignore the deprecation lint and continue using the API.</p>",
        "id": 237192543,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620060991
    },
    {
        "content": "<p>but we will still need to maintain those deprecated apis as long as any edition has them</p>",
        "id": 237192560,
        "sender_full_name": "Mara",
        "timestamp": 1620061001
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237192543\">said</a>:</p>\n<blockquote>\n<p>That also means people can't just ignore the deprecation lint and continue using the API.</p>\n</blockquote>\n<p>but they can. that's the whole point of editions</p>",
        "id": 237192593,
        "sender_full_name": "Mara",
        "timestamp": 1620061013
    },
    {
        "content": "<p>We absolutely do. But we don't have to worry about their interaction with a mechanism you can only use in a new edition.</p>",
        "id": 237192602,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061017
    },
    {
        "content": "<p>macros blur that line</p>",
        "id": 237192659,
        "sender_full_name": "cuviper",
        "timestamp": 1620061041
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> You can still arrange to call them. You can't call them directly from the new edition.</p>",
        "id": 237192748,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061083
    },
    {
        "content": "<p>sure, but that's still an interaction</p>",
        "id": 237192818,
        "sender_full_name": "cuviper",
        "timestamp": 1620061107
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237192659\">said</a>:</p>\n<blockquote>\n<p>macros blur that line</p>\n</blockquote>\n<p>though macros already mess up every edition change ever :)</p>",
        "id": 237192829,
        "sender_full_name": "bstrie",
        "timestamp": 1620061112
    },
    {
        "content": "<p>maybe this is too abstract for me to see what you want to avoid</p>",
        "id": 237192840,
        "sender_full_name": "cuviper",
        "timestamp": 1620061119
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237192602\">said</a>:</p>\n<blockquote>\n<p>We absolutely do. But we don't have to worry about their interaction with a mechanism you can only use in a new edition.</p>\n</blockquote>\n<p>any crate in the old edition can just re-export or wrap them so new edition crates can keep using them.</p>",
        "id": 237192873,
        "sender_full_name": "Mara",
        "timestamp": 1620061134
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237192829\">said</a>:</p>\n<blockquote>\n<p>though macros already mess up every edition change ever :)</p>\n</blockquote>\n<p>do they? macros behave quite well w.r.t. editions.</p>",
        "id": 237192950,
        "sender_full_name": "Mara",
        "timestamp": 1620061173
    },
    {
        "content": "<p>Suppose we deprecate SomeType::XYZ a few editions ago. By now, it's no longer accessible. Now, we can consider introducing a <em>new</em> API only accessible in new editions, and we don't have to name it XYZ2.</p>",
        "id": 237193218,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061255
    },
    {
        "content": "<p>any time an edition changes anything, a macro exported from an older edition crate can be imported, used, and result in an error in a newer edition crate</p>",
        "id": 237193236,
        "sender_full_name": "bstrie",
        "timestamp": 1620061259
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256342\">@bstrie</span> macros defined in older editions use those older editions for their spans.</p>",
        "id": 237193309,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061296
    },
    {
        "content": "<p>good to know, this was an open and unresolved question in the original editions RFC :)</p>",
        "id": 237193343,
        "sender_full_name": "bstrie",
        "timestamp": 1620061315
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237193218\">said</a>:</p>\n<blockquote>\n<p>Suppose we deprecate SomeType::XYZ a few editions ago. By now, it's no longer accessible. Now, we can consider introducing a <em>new</em> API only accessible in new editions, and we don't have to name it XYZ2.</p>\n</blockquote>\n<p>so how would you expect the documentation to look like? we don't have any mechanism for making the same name mean different things in different editions. and if we had, it'd just make the documentation and the api more complex.</p>",
        "id": 237193438,
        "sender_full_name": "Mara",
        "timestamp": 1620061351
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237193236\">said</a>:</p>\n<blockquote>\n<p>any time an edition changes anything, a macro exported from an older edition crate can be imported, used, and result in an error in a newer edition crate</p>\n</blockquote>\n<p>this works perfectly fine. e.g. if a 2021 crate uses a macro from a 2018 crate that has <code>panic!()</code> in its expansion, that panic will have the 2018 behaviour, not the 2021 behaviour.</p>",
        "id": 237193563,
        "sender_full_name": "Mara",
        "timestamp": 1620061417
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310399\">@Mara</span> SomeType::XYZ (edition 2027+) documentation, followed by \"SomeType::XYZ deprecated in edition 2018\" documentation.</p>",
        "id": 237193744,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061516
    },
    {
        "content": "<p>but that has nothing to do with making deprecations hard errors. that's an entirely different proposal where you just can't access the deprecated item anymore.</p>",
        "id": 237193910,
        "sender_full_name": "Mara",
        "timestamp": 1620061577
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237193744\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> SomeType::XYZ (edition 2027+) documentation, followed by \"SomeType::XYZ deprecated in edition 2018\" documentation.</p>\n</blockquote>\n<p>oh I really don't want to have to deal with this in rustdoc <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 237193974,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061612
    },
    {
        "content": "<p>this seems confusing even for the user</p>",
        "id": 237193990,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061622
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310399\">@Mara</span> \"that doesn't exist\" is a kind of hard error. :)</p>",
        "id": 237194022,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061635
    },
    {
        "content": "<p>imagine reading code in your editor and not knowing what function is being called without looking at Cargo.toml</p>",
        "id": 237194027,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061640
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237194022\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> \"that doesn't exist\" is a kind of hard error. :)</p>\n</blockquote>\n<p>it would have a new meaning. not just <em>not exist</em>.</p>",
        "id": 237194074,
        "sender_full_name": "Mara",
        "timestamp": 1620061665
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> I wouldn't expect this to come up until many many editions have passed. At some point, historical archeology of code from many editions ago becomes an entirely disjoint activity from writing and maintaining current codebases.</p>",
        "id": 237194185,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061701
    },
    {
        "content": "<p>btw i made an implementation a while ago of names having different meanings for different editions: <a href=\"https://github.com/rust-lang/rust/pull/82489\">https://github.com/rust-lang/rust/pull/82489</a><br>\nbut i can only imagine how much of a nightmare for documentation this will be.</p>",
        "id": 237194190,
        "sender_full_name": "Mara",
        "timestamp": 1620061704
    },
    {
        "content": "<p>and I don't see the <em>benefit</em></p>",
        "id": 237194268,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061730
    },
    {
        "content": "<p>it just makes things more confusing for everyone</p>",
        "id": 237194281,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061736
    },
    {
        "content": "<p>imagine you see a blog post with std::xyz() - what function are they calling? depends when the blog post was written!</p>",
        "id": 237194346,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061769
    },
    {
        "content": "<p>I'm thinking about decades passing here, and people wanting to be able to define a new API, and a 15-year-old deprecated API burning the most obvious name for it.</p>",
        "id": 237194364,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061777
    },
    {
        "content": "<p>the book already has a sort of similar issue when rand makes breaking changes</p>",
        "id": 237194371,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061781
    },
    {
        "content": "<p>Regarding documentation, isn’t the <code>panic!</code> macro an example of, well, <em>effectively</em> a new version of the macro replacing the old one depending on the edition? Sure it uses compiler magic to be able to do that, but the question of how to properly document it remains. AFAICT, the <a href=\"https://doc.rust-lang.org/1.51.0/std/macro.panic.html\">current new docs</a> just pretend that the Rust 2018 behavior of <code>panic</code> was never a thing.</p>",
        "id": 237194482,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1620061829
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"280891\">Frank Steffahn</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237194482\">said</a>:</p>\n<blockquote>\n<p>Regarding documentation, isn’t the <code>panic!</code> macro an example of, well, _effectively_ a new version of the macro replacing the old one depending on the edition? Sure it uses compiler magic to be able to do that, but the question of how to properly document it remains. AFAICT, the <a href=\"https://doc.rust-lang.org/1.51.0/std/macro.panic.html\">current new docs</a> just pretend that the Rust 2018 behavior of <code>panic</code> was never a thing.</p>\n</blockquote>\n<p>ok, sure, but they do <em>basically</em> the same thing, they just have very slightly different edge cases</p>",
        "id": 237194526,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061852
    },
    {
        "content": "<p>it sounds like <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> is talking about functions that do <em>completely different things</em> with the same name</p>",
        "id": 237194543,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061864
    },
    {
        "content": "<p>That's exactly the inspiration I had for my comments above</p>",
        "id": 237194549,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061866
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"280891\">@Frank Steffahn</span> the difference is very subtle. almost all use cases of panic!() are unchanged. we wouldn't have made this edition change if that wasn't the case.</p>",
        "id": 237194572,
        "sender_full_name": "Mara",
        "timestamp": 1620061877
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> No, not at all. I would expect them to be very similar, not completely different.</p>",
        "id": 237194610,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620061899
    },
    {
        "content": "<p>If they're very similar, why would they need different documentation?</p>",
        "id": 237194644,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061917
    },
    {
        "content": "<p>Or put another way, why is the handling of panic! 2018/2021 insufficient?</p>",
        "id": 237194711,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620061937
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237194572\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"280891\">Frank Steffahn</span> the difference is very subtle. almost all use cases of panic!() are unchanged. we wouldn't have made this edition change if that wasn't the case.</p>\n</blockquote>\n<p>Still, if I’m a new Rust user learning the language after 2021 and I read legacy (Rust 2018) code using <code>panic!(42)</code>, then the docs can’t explain to me what’s going on.</p>",
        "id": 237194741,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1620061949
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"280891\">@Frank Steffahn</span> but the compiler will. the compiler will tell you it's panic_any(42) when you compile that.</p>",
        "id": 237194783,
        "sender_full_name": "Mara",
        "timestamp": 1620061978
    },
    {
        "content": "<p>and suggests to change that</p>",
        "id": 237194815,
        "sender_full_name": "Mara",
        "timestamp": 1620061994
    },
    {
        "content": "<p>At the moment, this is firmly a hypothetical. I'm trying to think about how we can keep complexity better contained within editions. It's possible this isn't worthwhile. But I also think if it <em>does</em> turn out to be something we need, we will wish at the time that we had done it multiple editions ago.</p>",
        "id": 237194976,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620062065
    },
    {
        "content": "<p>I think the disagreement here is that <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> thinks this removes complexity and I think it only adds more</p>",
        "id": 237194984,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620062073
    },
    {
        "content": "<p>anyway, this thread was about deprecations like std::i32::MAX and AtomicU8::compare_and_swap. i can't think of any reason to make those hard errors</p>",
        "id": 237194993,
        "sender_full_name": "Mara",
        "timestamp": 1620062077
    },
    {
        "content": "<p>If it's similar enough use the same name; if not oh well, pick a new one</p>",
        "id": 237195048,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620062108
    },
    {
        "content": "<p>yes it's nice if everyone uses <code>compare_exchange</code> instead, but i don't see any reason why to add complexity to stop compiling <code>compare_and_swap</code>. we could add a note to <code>cargo fix --edition</code> with something like \"hey while you're migrating, how about you also get rid of these deprecated things?\". but what's the use of forcing that? it just makes things more complex for everyone.</p>",
        "id": 237195299,
        "sender_full_name": "Mara",
        "timestamp": 1620062218
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256342\">@bstrie</span> reading <a href=\"https://github.com/rust-lang/rfcs/pull/3088#issuecomment-793106802\">this comment</a> now. it really seems to me everything you want is resolved by a rustdoc change that would make deprecated items less visible.</p>\n<blockquote>\n<p>The goal is not smallness, rather it is that the documentation should not be permanently cluttered with things that users are encouraged not to use.</p>\n</blockquote>",
        "id": 237196102,
        "sender_full_name": "Mara",
        "timestamp": 1620062582
    },
    {
        "content": "<p>is that considered in sorting? I think we would want the API list to be in order: stable, unstable, deprecated</p>",
        "id": 237197027,
        "sender_full_name": "cuviper",
        "timestamp": 1620062927
    },
    {
        "content": "<p>\"what you should use now\", \"what you can use soon\", \"what you should stop using\"</p>",
        "id": 237197131,
        "sender_full_name": "cuviper",
        "timestamp": 1620062972
    },
    {
        "content": "<p>(\"what you may be able to use soon, and should potentially start evaluating now to see if it fits\")</p>",
        "id": 237198577,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620063467
    },
    {
        "content": "<p>(or \"what we forgot to mark as doc(hidden)\" (for #[unstable(issue = \"none\")]) :P )</p>",
        "id": 237198784,
        "sender_full_name": "Mara",
        "timestamp": 1620063535
    },
    {
        "content": "<p>It'd be nice if we had an explicit way to tag \"will never be stable\", and handled that differently in documentation.</p>",
        "id": 237198993,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620063610
    },
    {
        "content": "<p>(I don't know if <code>issue = \"none\"</code> is <em>always</em> intended to mean \"never stable\".)</p>",
        "id": 237199015,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620063624
    },
    {
        "content": "<p>it's a mistake to lack an issue otherwise</p>",
        "id": 237199100,
        "sender_full_name": "cuviper",
        "timestamp": 1620063657
    },
    {
        "content": "<p>it should be</p>",
        "id": 237199104,
        "sender_full_name": "Mara",
        "timestamp": 1620063659
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237194783\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"280891\">Frank Steffahn</span> but the compiler will. the compiler will tell you it's panic_any(42) when you compile that.</p>\n</blockquote>\n<p>this would also be true of items deprecated by this RFC; any use of the item on the denied edition will produce the usual compiler output telling you why it was deprecated and what its replacement is. and because of the long period prior to denial, prior editions would have been warning with the same output for several years.</p>",
        "id": 237199337,
        "sender_full_name": "bstrie",
        "timestamp": 1620063740
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237197027\">said</a>:</p>\n<blockquote>\n<p>is that considered in sorting? I think we would want the API list to be in order: stable, unstable, deprecated</p>\n</blockquote>\n<p>one of my goals is to overhaul the sorting of items in rustdoc to take deprecatedness (among other things) into account</p>",
        "id": 237199463,
        "sender_full_name": "bstrie",
        "timestamp": 1620063790
    },
    {
        "content": "<p>it still seems to me like you just want some rustdoc changes, unrelated to editions</p>",
        "id": 237199555,
        "sender_full_name": "Mara",
        "timestamp": 1620063839
    },
    {
        "content": "<p>what goal do you want to achieve by making deprecation errors edition dependent?</p>",
        "id": 237199664,
        "sender_full_name": "Mara",
        "timestamp": 1620063872
    },
    {
        "content": "<p>I do want documentation changes. I also want to make the language smaller and more consistent where possible. I also want to be able to point to this in the future when people ask why editions don't get used to \"\"\"remove\"\"\" deprecated items.</p>",
        "id": 237199824,
        "sender_full_name": "bstrie",
        "timestamp": 1620063939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237199337\">said</a>:</p>\n<blockquote>\n<p>this would also be true of items deprecated by this RFC; any use of the item on the denied edition will produce the usual compiler output telling you why it was deprecated and what its replacement is. and because of the long period prior to denial, prior editions would have been warning with the same output for several years.</p>\n</blockquote>\n<p>the compiler saying that you should use <code>compare_exchange</code> instead of <code>compare_and_swap</code> does not explain any of the differences between those functions.</p>",
        "id": 237199847,
        "sender_full_name": "Mara",
        "timestamp": 1620063950
    },
    {
        "content": "<p>it probably should; it may not be wise to expect people to read the docs rather than blindly trusting the compiler output</p>",
        "id": 237199954,
        "sender_full_name": "bstrie",
        "timestamp": 1620063983
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237199824\">said</a>:</p>\n<blockquote>\n<p>I also want to make the language smaller and more consistent where possible.</p>\n</blockquote>\n<p>but it does not get smaller. it gets bigger! you <em>add</em> different behaviour in a new edition, and don't remove any complexity.</p>",
        "id": 237199988,
        "sender_full_name": "Mara",
        "timestamp": 1620064000
    },
    {
        "content": "<p>most rust code to ever be written has not been written yet. for most people who will writing rust in the foreseeable future, they will only be using the newest edition. this makes the language smaller for those people.</p>",
        "id": 237200106,
        "sender_full_name": "bstrie",
        "timestamp": 1620064056
    },
    {
        "content": "<p>most people will not use deprecated functions, so the language is already that small for them. what use does it have to turn things into hard errors?</p>",
        "id": 237200249,
        "sender_full_name": "Mara",
        "timestamp": 1620064102
    },
    {
        "content": "<p>people who don't use these functions are not going to notice the upgrade from a warning to an error. the language did not get smaller in their eyes. nothing changed.</p>",
        "id": 237200309,
        "sender_full_name": "Mara",
        "timestamp": 1620064128
    },
    {
        "content": "<p>the only people who will see the difference are the people for who this makes it more complicated.</p>",
        "id": 237200347,
        "sender_full_name": "Mara",
        "timestamp": 1620064146
    },
    {
        "content": "<p>that same argument applies to any edition lint or future compat lint</p>",
        "id": 237200388,
        "sender_full_name": "bstrie",
        "timestamp": 1620064164
    },
    {
        "content": "<p>huh</p>",
        "id": 237200414,
        "sender_full_name": "Mara",
        "timestamp": 1620064173
    },
    {
        "content": "<p>most people will not be using <code>...</code> in patterns, so why make it into an error?</p>",
        "id": 237200458,
        "sender_full_name": "bstrie",
        "timestamp": 1620064190
    },
    {
        "content": "<p>because that opens up that syntax for new things.</p>",
        "id": 237200533,
        "sender_full_name": "Mara",
        "timestamp": 1620064207
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237200533\">said</a>:</p>\n<blockquote>\n<p>because that opens up that syntax for new things.</p>\n</blockquote>\n<p>(personally I think it would be confusing to reuse <code>...</code> for anything, so it could have stayed a warning)</p>",
        "id": 237200631,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620064245
    },
    {
        "content": "<p>not that it matters much, but I'd personally be opposed to any use of <code>...</code> due to its easy confusability with <code>..</code> (which is part of the reason it was deprecated in the first place)</p>",
        "id": 237200637,
        "sender_full_name": "bstrie",
        "timestamp": 1620064249
    },
    {
        "content": "<p>but I'm not on t-lang</p>",
        "id": 237200639,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620064250
    },
    {
        "content": "<p>we <em>very</em> carefully selected the edition changes. we did not add anything just because we don't like it that people might use non-idiomatic/'old' style code.</p>",
        "id": 237200684,
        "sender_full_name": "Mara",
        "timestamp": 1620064274
    },
    {
        "content": "<p>(as tempting as it is to have a perl-style <code>...</code> for <code>todo!()</code>, but that's neither here nor there :P )</p>",
        "id": 237200702,
        "sender_full_name": "bstrie",
        "timestamp": 1620064282
    },
    {
        "content": "<p><code>...</code> might be used for variadics at some point. removing <code>...</code> from the syntax now simplifies a the cases a parser would need to take into account</p>",
        "id": 237201055,
        "sender_full_name": "Mara",
        "timestamp": 1620064398
    },
    {
        "content": "<p>except that, as you said, the language never actually gets smaller (for implementers) at editions</p>",
        "id": 237201273,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620064477
    },
    {
        "content": "<p>no, but a parser for rust 2024 which would have <code>...</code> for variadics does not have to take interactions with <code>...</code> pattern syntax into account. which simplifies things</p>",
        "id": 237201407,
        "sender_full_name": "Mara",
        "timestamp": 1620064527
    },
    {
        "content": "<p>I agree that it is important to provide the <em>impression</em> of simplifying old crufty stuff at edition boundaries though</p>",
        "id": 237201411,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620064528
    },
    {
        "content": "<p>huh</p>",
        "id": 237201453,
        "sender_full_name": "Mara",
        "timestamp": 1620064546
    },
    {
        "content": "<p>most of the techniques that are utilized like deny-by-default lints and deprecation warnings and so on are to encourage the community to shift away from the old stuff so that as many people as possible never have to learn that it exists</p>",
        "id": 237201779,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620064663
    },
    {
        "content": "<p>we absolutely did not remove <code>...</code> just because it was deprecated, or because we felt like it looked old or something. that would just unnecessarily cause people extra work for no good reason.</p>",
        "id": 237201868,
        "sender_full_name": "Mara",
        "timestamp": 1620064692
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"271719\">@Mario Carneiro</span> sure. but what has that to do with editions?</p>",
        "id": 237201926,
        "sender_full_name": "Mara",
        "timestamp": 1620064709
    },
    {
        "content": "<p>editions are opt in, so it's possible to break more things across an edition boundary. I'm not sure what exactly would qualify but it seems reasonable to have some functions get deny-by-default deprecated on a new edition</p>",
        "id": 237202372,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620064849
    },
    {
        "content": "<p>for what purpose?</p>",
        "id": 237202436,
        "sender_full_name": "Mara",
        "timestamp": 1620064872
    },
    {
        "content": "<p>to make people actually stop using it on the new edition</p>",
        "id": 237202478,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620064892
    },
    {
        "content": "<p>\"no you can't use array.into_iter() because you didn't remove your atomic.compare_and_swap!\"  what's the use?</p>",
        "id": 237202526,
        "sender_full_name": "Mara",
        "timestamp": 1620064909
    },
    {
        "content": "<p>we already want people to stop using deprecated things, regardless of edition. why would we suddenly force them extra hard over an edition? that just hurts adoption of the new edition. we'll need to maintain the deprecated items regardless, and they can keep using them anyway by not upgrading to the new edition (which we also don't want!)</p>",
        "id": 237202720,
        "sender_full_name": "Mara",
        "timestamp": 1620064968
    },
    {
        "content": "<p>Like I said I'm not sure what would qualify, probably none of the current APIs. I'm thinking more like 10 years later, as a cleanup activity for something that no one uses</p>",
        "id": 237203217,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065135
    },
    {
        "content": "<p>it's not really cleanup if it's only for some editions</p>",
        "id": 237203351,
        "sender_full_name": "Mara",
        "timestamp": 1620065179
    },
    {
        "content": "<p>not cleanup from the implementer's point of view, cleanup from the language user's point of view</p>",
        "id": 237203403,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065202
    },
    {
        "content": "<p>the use is making the surface area of the language smaller for users, even if not for implementors. making a language larger is trivial, and making it smaller is very difficult. I like the idea of pursuing the scant opportunities to make the language smaller, when possible. I don't agree with the idea that this makes the language larger; that's now how users see it. even languages as renownedly stable as Java remove APIs from time to time, rarely to any controversy.</p>",
        "id": 237203405,
        "sender_full_name": "bstrie",
        "timestamp": 1620065203
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256342\">@bstrie</span> but it does not. people still work with code from other editions. you could say \"but some people never touch code from older editions\", but \"some people never touch code that uses deprecated functions\" is just as true. we still need to document them regardless of whether they are deprecated or edition-hidden or whatever. the rest is just styling in rustdoc</p>",
        "id": 237203678,
        "sender_full_name": "Mara",
        "timestamp": 1620065300
    },
    {
        "content": "<p>we already give warnings when people use deprecated items. because we want to discourage their use. why is that not good enough?</p>",
        "id": 237203769,
        "sender_full_name": "Mara",
        "timestamp": 1620065336
    },
    {
        "content": "<p>why does deprecating something not 'make the language smaller'?</p>",
        "id": 237203826,
        "sender_full_name": "Mara",
        "timestamp": 1620065358
    },
    {
        "content": "<p>Normally deprecation is a prelude to removal. Rust can't exactly remove things at the implementation level but that doesn't mean it can't present as though it actually removed a function in edition N</p>",
        "id": 237204308,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065554
    },
    {
        "content": "<blockquote>\n<p>Normally deprecation is a prelude to removal.</p>\n</blockquote>\n<p>for languages? standard libraries usually have lots of cruft lying around</p>",
        "id": 237204374,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620065585
    },
    {
        "content": "<p>c, c++, python, ...</p>",
        "id": 237204389,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620065590
    },
    {
        "content": "<p>what's the use of 'removing' it? since removal isn't really removal. normally the reason to go from deprecation to removal, is to simplify things. reduce the cost of maintenance, etc. none of this will be achieved by doing a deprecated -&gt; hidden thing like proposed here.</p>",
        "id": 237204441,
        "sender_full_name": "Mara",
        "timestamp": 1620065613
    },
    {
        "content": "<p>One reason might be to reuse the name like <span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> mentioned</p>",
        "id": 237204602,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065673
    },
    {
        "content": "<p>but that's an entirely different mechanism. that would not make it a hard error to refer to the item. that would make it refer to a new item.</p>",
        "id": 237204678,
        "sender_full_name": "Mara",
        "timestamp": 1620065702
    },
    {
        "content": "<p>which is unrelated to what's being proposed here. that would not require making deprecated items hard errors.</p>",
        "id": 237204770,
        "sender_full_name": "Mara",
        "timestamp": 1620065745
    },
    {
        "content": "<p>there might be (probably should be) a gap between the removal and later reuse, same as with syntax changes</p>",
        "id": 237204981,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065831
    },
    {
        "content": "<p>why?</p>",
        "id": 237204998,
        "sender_full_name": "Mara",
        "timestamp": 1620065840
    },
    {
        "content": "<p>we already warn when using a deprecated item</p>",
        "id": 237205025,
        "sender_full_name": "Mara",
        "timestamp": 1620065850
    },
    {
        "content": "<p>because changing the meaning of the code on migration is bad</p>",
        "id": 237205124,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065885
    },
    {
        "content": "<p>Having a gap is one defense against accidentally using the old version instead of the new</p>",
        "id": 237205181,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620065913
    },
    {
        "content": "<p>we would only re use a name for mostly compatible things. like the panic macro, which only has subtle changes irrelevant to most users.</p>",
        "id": 237205268,
        "sender_full_name": "Mara",
        "timestamp": 1620065956
    },
    {
        "content": "<p>regardless, there isn't even a proposal for re-using names. we don't even have a mechanism for it that anyone would agree on.</p>",
        "id": 237205446,
        "sender_full_name": "Mara",
        "timestamp": 1620066030
    },
    {
        "content": "<p>I'm thinking of situations more like microsoft's sedimentary layers of APIs. I don't think we have or will have any situation like that for a long while but certainly it is possible that we will want a very different API over the same names. For example imagine if the <code>Try</code> trait was stabilized and we were doing try v2 under those conditions</p>",
        "id": 237205996,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620066242
    },
    {
        "content": "<p>then we wouldn't have a deprecated period. then the meaning of <code>Try</code> would change over an edition</p>",
        "id": 237206227,
        "sender_full_name": "Mara",
        "timestamp": 1620066333
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237204389\">said</a>:</p>\n<blockquote>\n<p>c, c++, python, ...</p>\n</blockquote>\n<p>C++ deprecated various things in C++11, and then deleted their definitions in C++17. whether or not someone defines \"this thing is deprecated\" to mean \"this thing is discouraged\" or \"this thing will be removed eventually\" is up for debate, but the latter definition ought not to surprise anyone. amusingly, the only reason this is a debate in the first place is because rust holds itself to a stricter backwards compatibility standard than other languages do. :P I'm happy to resubmit this RFC in 10 years to see if attitudes have changed by then.</p>",
        "id": 237206229,
        "sender_full_name": "bstrie",
        "timestamp": 1620066334
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"256342\">@bstrie</span> in C++ that simplifies the specification (which only covers the latest version) and new implementations that only implement the latest version. in Rust, this simplifies nothing. we don't have a latest-edition-only specification (we don't have any specification), and we only have a compiler and std lib that needs to support all editions anyway. (editions are not versions!)</p>",
        "id": 237206421,
        "sender_full_name": "Mara",
        "timestamp": 1620066420
    },
    {
        "content": "<p>Rust 2021 is not a 'new version' of the language. it's just a small set of opt-in features that are unfortunately not backwards compatible.</p>",
        "id": 237206568,
        "sender_full_name": "Mara",
        "timestamp": 1620066482
    },
    {
        "content": "<p>if you want to remove things and make the language smaller, you should be talking about removing things in e.g. Rust 1.70, not in Rust 2024</p>",
        "id": 237206654,
        "sender_full_name": "Mara",
        "timestamp": 1620066506
    },
    {
        "content": "<p>I suppose the lack of a proper specification is part of the confusion here; like C++, I wouldn't expect the author of a Rust specification to document deprecated things, just as I wouldn't expect authors of different rust implementations to implement deprecated things.</p>",
        "id": 237206801,
        "sender_full_name": "bstrie",
        "timestamp": 1620066561
    },
    {
        "content": "<p>perfect, then deprecation is enough?</p>",
        "id": 237206842,
        "sender_full_name": "Mara",
        "timestamp": 1620066579
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237206654\">said</a>:</p>\n<blockquote>\n<p>if you want to remove things and make the language smaller, you should be talking about removing things in e.g. Rust 1.70, not in Rust 2024</p>\n</blockquote>\n<p>It's hard to justify blanket removing things in something called Rust 1.70, as opposed to something called Rust 2.0.</p>",
        "id": 237206969,
        "sender_full_name": "bstrie",
        "timestamp": 1620066611
    },
    {
        "content": "<p>sure. that's why we don't remove them</p>",
        "id": 237207026,
        "sender_full_name": "Mara",
        "timestamp": 1620066629
    },
    {
        "content": "<p>right now the only way to remove anything is via an edition, so it shouldn't be surprising when people try to use editions for that purpose :P</p>",
        "id": 237207048,
        "sender_full_name": "bstrie",
        "timestamp": 1620066638
    },
    {
        "content": "<p>no, that's not the only way, or even a way. there is no way to remove anything. editions <em>add</em> things</p>",
        "id": 237207138,
        "sender_full_name": "Mara",
        "timestamp": 1620066665
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237206801\">said</a>:</p>\n<blockquote>\n<p>I suppose the lack of a proper specification is part of the confusion here; like C++, I wouldn't expect the author of a Rust specification to document deprecated things, just as I wouldn't expect authors of different rust implementations to implement deprecated things.</p>\n</blockquote>\n<p>if you don't consider deprecated items part of the language, then how does hiding them make the language smaller? didn't the language already get smaller the moment they were deprecated?</p>",
        "id": 237207226,
        "sender_full_name": "Mara",
        "timestamp": 1620066707
    },
    {
        "content": "<p>from the perspective of compiler implementors they add things. from the perspective of users, they remove things. but now we're just repeating ourselves.</p>",
        "id": 237207234,
        "sender_full_name": "bstrie",
        "timestamp": 1620066711
    },
    {
        "content": "<p>but from the perspective of the users, they were already removed/deprecated..</p>",
        "id": 237207322,
        "sender_full_name": "Mara",
        "timestamp": 1620066731
    },
    {
        "content": "<p>WRT \"didn't the language already get smaller the moment they were deprecated?\", if the language is smaller, then can we remove them from the docs?</p>",
        "id": 237207381,
        "sender_full_name": "bstrie",
        "timestamp": 1620066753
    },
    {
        "content": "<p>the only users that will see the difference, are those for which this is a change that causes them more work.</p>",
        "id": 237207402,
        "sender_full_name": "Mara",
        "timestamp": 1620066759
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237207381\">said</a>:</p>\n<blockquote>\n<p>WRT \"didn't the language already get smaller the moment they were deprecated?\", if the language is smaller, then can we remove them from the docs?</p>\n</blockquote>\n<p>we can't remove their existence from the docs. but we can make their documentation shorter and simpler, and hide them under some fold or whatever. sure.</p>",
        "id": 237207590,
        "sender_full_name": "Mara",
        "timestamp": 1620066816
    },
    {
        "content": "<p>if your argument is that deprecated items should be less visible in rustdoc, editions don't seem relevant at all. that's just a rustdoc styling issue.</p>",
        "id": 237207899,
        "sender_full_name": "Mara",
        "timestamp": 1620066921
    },
    {
        "content": "<p>if all this results in is a coherent policy regarding how deprecated items get treated in the docs, then I'll consider that a win. :P right now we have silly things like the deprecated <code>std::collections::Bound</code> being #[doc(hidden)], with no real policy as to when to apply this to other things</p>",
        "id": 237207944,
        "sender_full_name": "bstrie",
        "timestamp": 1620066935
    },
    {
        "content": "<p>so what does that have to do with editions?</p>",
        "id": 237208000,
        "sender_full_name": "Mara",
        "timestamp": 1620066962
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237200637\">said</a>:</p>\n<blockquote>\n<p>not that it matters much, but I'd personally be opposed to any use of <code>...</code> due to its easy confusability with <code>..</code> (which is part of the reason it was deprecated in the first place)</p>\n</blockquote>\n<p>I think a critical part of this is whether the new use could even happen in places where <code>..</code> can show up.  I would also be opposed to <code>if let Foo(..) = x</code> and <code>if let Foo(...) = x</code> meaning different things, say.  But the <code>...</code> in nightly for <code>unsafe extern \"C\" fn add(n: usize, mut args: ...)</code> doesn't have that confusability problem, for example, since neither <code>..</code> nor <code>..=</code> are allowed there.</p>",
        "id": 237208060,
        "sender_full_name": "scottmcm",
        "timestamp": 1620066972
    },
    {
        "content": "<p>because, to reiterate, editions are the only way we have to remove things, and I have repeatedly seen people ask whether editions get used to remove things from the stdlib. this is what people expect from other languages: deprecated things get removed. rust has the opportunity to do so. if rust chooses not to take it, that's fine, and having it documented that rust has chosen not to do so is useful.</p>",
        "id": 237208203,
        "sender_full_name": "bstrie",
        "timestamp": 1620067039
    },
    {
        "content": "<p>you keep saying 'remove things'. we cannot remove things. we can only hide things.</p>",
        "id": 237208253,
        "sender_full_name": "Mara",
        "timestamp": 1620067064
    },
    {
        "content": "<p>i understand that in many code bases 'deprecated' means 'will be removed'. but we cannot remove things. editions do not change that.</p>",
        "id": 237208398,
        "sender_full_name": "Mara",
        "timestamp": 1620067114
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237207944\">said</a>:</p>\n<blockquote>\n<p>right now we have silly things like the deprecated <code>std::collections::Bound</code> being #[doc(hidden)], with no real policy as to when to apply this to other things</p>\n</blockquote>\n<p>that's an unrelated issue with <code>rustc_deprecated</code> being ineffective on re-exports.</p>",
        "id": 237208482,
        "sender_full_name": "Mara",
        "timestamp": 1620067145
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237208253\">said</a>:</p>\n<blockquote>\n<p>you keep saying 'remove things'. we cannot remove things. we can only hide things.</p>\n</blockquote>\n<p>this doesn't strike me as how users experience the language.</p>\n<ol>\n<li>a greenfield project makes a new repo with <code>cargo new</code>. they get the newest edition by default, and are restricted to only things that compile in the newest edition. nobody considers downgrading their greenfield project to an older edition.</li>\n<li>an established project considers whether to upgrade to a new edition. if all they want is shiny new things, then they don't need to upgrade; new things mostly Just Work on all editions by default. the only reason they have to upgrade is if they want to be able to do <em>fewer</em> things; editions are used to tell code what it <em>can't</em> do. this makes the language smaller. from their subjective perspective, things are removed.</li>\n</ol>",
        "id": 237209439,
        "sender_full_name": "bstrie",
        "timestamp": 1620067527
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237208253\">said</a>:</p>\n<blockquote>\n<p>you keep saying 'remove things'. we cannot remove things. we can only hide things.</p>\n</blockquote>\n<p>Setting aside the implementation difficulties and potential impact/breakage concerns, here is what \"removal\" could look like in Rust: APIs are added and removed over time, and every three years we snapshot the state of the API. On edition N you see the API as it existed at that time. APIs from the future or past are unnameable.</p>\n<p>It is of course possible to soften the blow here by providing alternate paths to old things or making new things available on old editions despite the anachronism when feasible.</p>",
        "id": 237209506,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620067561
    },
    {
        "content": "<p>so <em>what exactly</em> is it that you think this proposal would simplify? you already said that a hypothetical specification or alternative implementation would not include deprecated items anyway, so those aren't simplified. rustc/std itself gets more complicated. the only thing that could be simplified is the documentation. but we still want to document old stuff regardless, so it's just a matter of styling deprecated items in a less visible way, which has nothing to do with editions.</p>",
        "id": 237209604,
        "sender_full_name": "Mara",
        "timestamp": 1620067594
    },
    {
        "content": "<blockquote>\n<p>nobody considers downgrading their greenfield project to an older edition.</p>\n</blockquote>\n<p>just like nobody considers using deprecated items in a new project. what difference does your proposal make here?</p>",
        "id": 237209700,
        "sender_full_name": "Mara",
        "timestamp": 1620067635
    },
    {
        "content": "<p>The documentation may also exist the same way as documentation for old versions of a crate</p>",
        "id": 237209739,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620067653
    },
    {
        "content": "<blockquote>\n<p>if all they want is shiny new things, then they don't need to upgrade</p>\n</blockquote>\n<p>that's not true at all. see also <code>async</code> etc.</p>",
        "id": 237209786,
        "sender_full_name": "Mara",
        "timestamp": 1620067676
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237209604\">said</a>:</p>\n<blockquote>\n<p>you already said that a hypothetical specification or alternative implementation would not include deprecated items anyway</p>\n</blockquote>\n<p>I already said it, but I'm hardly an authority. do the people in charge agree with this? it's regrettable that currently we must conflate editions and versions and specifications, but I haven't seen any more authoritative source attempting to disentangle them.</p>",
        "id": 237209972,
        "sender_full_name": "bstrie",
        "timestamp": 1620067754
    },
    {
        "content": "<p>I think the rust spec has to include all editions, BTW. Compiling rust code requires simultaneously handling all editions</p>",
        "id": 237210003,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620067777
    },
    {
        "content": "<p>people in charge of what?</p>",
        "id": 237210009,
        "sender_full_name": "Mara",
        "timestamp": 1620067779
    },
    {
        "content": "<p>Alternative implementations might be able to get away with only partial support for old editions</p>",
        "id": 237210098,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620067808
    },
    {
        "content": "<blockquote>\n<p>people in charge of what?</p>\n</blockquote>\n<p>precisely. :) the future language \"specification\" is something that gets vaguely alluded to, and I would expect it to fall under the purview of the lang team and libs team, but until someone takes charge it's natural to expect that Rust 2021 is seen as analogous to C++20.</p>",
        "id": 237210244,
        "sender_full_name": "bstrie",
        "timestamp": 1620067874
    },
    {
        "content": "<p>editions are nothing like C++ standard versions</p>",
        "id": 237210286,
        "sender_full_name": "Mara",
        "timestamp": 1620067899
    },
    {
        "content": "<p>they seem pretty similar to me and probably many others</p>",
        "id": 237210408,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620067946
    },
    {
        "content": "<p>they are completely different things</p>",
        "id": 237210490,
        "sender_full_name": "Mara",
        "timestamp": 1620068005
    },
    {
        "content": "<p>the naming of \"Rust 2021\", the three-year cadence, and the natural tendency to (rightfully) compare Rust with C++ means it is natural to assume so. if the core team wants to dispel that analogy, then they should do so explicitly.</p>",
        "id": 237210588,
        "sender_full_name": "bstrie",
        "timestamp": 1620068050
    },
    {
        "content": "<p>in any case, I did not expect this discussion to become so heated. :) I don't mind if the RFC is rejected, I just wanted there to have ever been a discussion about it. as mentioned, I'm already looking at improvements to rustdoc to hopefully soothe these issues in the future.</p>",
        "id": 237211028,
        "sender_full_name": "bstrie",
        "timestamp": 1620068227
    },
    {
        "content": "<p>because another language does something every three years as well, they're the same? :S  anyway, the upcoming blog post also explains that editions are not versions, once again</p>",
        "id": 237211047,
        "sender_full_name": "Mara",
        "timestamp": 1620068232
    },
    {
        "content": "<p>That does seem natural to assume, but it is a very different phenomenon with Rust. Rust is intended to allow old editions to compile and even have code written in new editions interface with prior editions of code. C++ versions are \"compiler-level\" modes. Rust's editions are crate-level.</p>",
        "id": 237211074,
        "sender_full_name": "Jubilee",
        "timestamp": 1620068247
    },
    {
        "content": "<p>People do link code compiled with different C++ standard versions together in practice</p>",
        "id": 237211213,
        "sender_full_name": "Tavian Barnes",
        "timestamp": 1620068296
    },
    {
        "content": "<p>Yes, and in practice the way it works between C++ standard versions has recently led to a <em>huge</em> kerfluffle about that precise thing, because it unnecessarily ties what should be implementation details of those versions more closely together.</p>",
        "id": 237211373,
        "sender_full_name": "Jubilee",
        "timestamp": 1620068359
    },
    {
        "content": "<p>aren't editions just cargo metadata that translates to a rustc compiler flag?</p>",
        "id": 237211437,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620068385
    },
    {
        "content": "<p>the main difference seems to be that rust has better support for avoiding conflicts in different versions of the standard library</p>",
        "id": 237211723,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620068479
    },
    {
        "content": "<p>there are no different versions of the standard library. there is <em>one</em> standard library, which is currently compiled with <code>--edition=2018</code>, which you can use from any edition.</p>",
        "id": 237211780,
        "sender_full_name": "Mara",
        "timestamp": 1620068514
    },
    {
        "content": "<p>It's basically just a big fat crate, innit</p>",
        "id": 237211950,
        "sender_full_name": "Jubilee",
        "timestamp": 1620068584
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"271719\">Mario Carneiro</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237210098\">said</a>:</p>\n<blockquote>\n<p>Alternative implementations might be able to get away with only partial support for old editions</p>\n</blockquote>\n<p>Implementations of languages that aren't Rust might be able to get away with that. The Rust language includes support for old editions.</p>",
        "id": 237212472,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620068815
    },
    {
        "content": "<p>FWIW, while I posted an opinion regarding this earlier, given the very strong sentiments expressed against the idea of making deprecations in std into hard errors in a newer edition, I'd like to withdraw that support. This isn't something I'm inclined to push for, only something I was favorable towards.</p>",
        "id": 237212992,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069059
    },
    {
        "content": "<p>I do care about trying to manage complexity across decades and dozens of editions, but if people feel like this isn't a net improvement in complexity, that's fine.</p>",
        "id": 237213146,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069131
    },
    {
        "content": "<p>I feel like if I'm writing an implementation of Rust, say, today, I should be allowed to support Rust 2021 (or more likely I'm targeting Rust 2024 since I probably won't 1.0 my own compiler before then, ha) and not Rust 2015 and Rust 2018.</p>",
        "id": 237213168,
        "sender_full_name": "Jubilee",
        "timestamp": 1620069143
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"281757\">@Jubilee</span> Then your compiler won't support compiling the whole <a href=\"http://crates.io\">crates.io</a> ecosystem. There are crates people use today that still use the 2015 edition.</p>",
        "id": 237213233,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069186
    },
    {
        "content": "<p>I haven't read the entire backscroll so I might be missing something but from my skim I generally agree with the sentiment that there isn't much value to making some deprecated API's uncallable in new editions. The main issue here seems to be the docs becoming difficult to navigate as more deprecated items get added, so my preference would be to set aside the proposal about hard deprecating APIs and focus instead on the docs improvements that have already been proposed, then re-evaluate once those fixes are in place to see which ways deprecated APIs are still a problem.</p>",
        "id": 237213262,
        "sender_full_name": "Jane Lusby",
        "timestamp": 1620069200
    },
    {
        "content": "<p>I think that would be something I'd be prepared to accept, yeah.</p>",
        "id": 237213295,
        "sender_full_name": "Jubilee",
        "timestamp": 1620069216
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281757\">Jubilee</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237213295\">said</a>:</p>\n<blockquote>\n<p>I think that would be something I'd be prepared to accept, yeah.</p>\n</blockquote>\n<p>That's absolutely your choice, but I don't think the result is a Rust compiler; it's a compiler for a subset of Rust.</p>",
        "id": 237213347,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069243
    },
    {
        "content": "<p>(This is a non-academic distinction; there's a very real danger of not-quite-compatible Rust implementations cropping up.)</p>",
        "id": 237213454,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069282
    },
    {
        "content": "<p>(It's also off-topic for this thread, I think.)</p>",
        "id": 237213465,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069288
    },
    {
        "content": "<p>Are you really a C compiler if you can't compile whatever syntax was used in 1970 that was unsupported and never standardized. :^)</p>",
        "id": 237213485,
        "sender_full_name": "Jubilee",
        "timestamp": 1620069293
    },
    {
        "content": "<p>until there exists a rust specification this is sort of an academic discussion; no alternative implementation has any reasonable chance of being 100% compatible with rustc anyway</p>",
        "id": 237213497,
        "sender_full_name": "bstrie",
        "timestamp": 1620069300
    },
    {
        "content": "<p>you probably wouldn't be allowed to call your implementation 'Rust' anyway. right now there's no definition of the language itself that one can conform to to be allowed to use the trademark.</p>",
        "id": 237213558,
        "sender_full_name": "Mara",
        "timestamp": 1620069326
    },
    {
        "content": "<p>True~</p>",
        "id": 237213584,
        "sender_full_name": "Jubilee",
        "timestamp": 1620069343
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"310399\">@Mara</span> I could live with \"if you pass 100% of the rustc testsuite\" as the bar to set there. :)</p>",
        "id": 237213706,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069384
    },
    {
        "content": "<p>sure. but that's up to the foundation to define ;)  (they now own the trademark, i believe)</p>",
        "id": 237213748,
        "sender_full_name": "Mara",
        "timestamp": 1620069409
    },
    {
        "content": "<p>watch out for the remarkably Rust-like \"Jubilee\" language in 2024, folks. :^)</p>",
        "id": 237213787,
        "sender_full_name": "Jubilee",
        "timestamp": 1620069432
    },
    {
        "content": "<p>(and passing those tests would require an awful lot of unstable things and exact diagnostic messages)</p>",
        "id": 237213800,
        "sender_full_name": "Mara",
        "timestamp": 1620069440
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"281757\">@Jubilee</span> nice! looking forward to it :D</p>",
        "id": 237213827,
        "sender_full_name": "Mara",
        "timestamp": 1620069455
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281757\">Jubilee</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237213295\">said</a>:</p>\n<blockquote>\n<p>I think that would be something I'd be prepared to accept, yeah.</p>\n</blockquote>\n<p><code>std</code>, <code>core</code> and every other crate works exactly the same for every one including the one shipping with the compiler. So if you remove one function it will be removed from every <code>editions</code> because editions doesn't handle that.</p>",
        "id": 237213846,
        "sender_full_name": "Urgau",
        "timestamp": 1620069460
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237213748\">said</a>:</p>\n<blockquote>\n<p>sure. but that's up to the foundation to define ;)  (they now own the trademark, i believe)</p>\n</blockquote>\n<p>Sure. I think that's a conversation that we should have, in the not too distant future, since there are real efforts trying to build compilers for languages that people will try to call \"Rust\".</p>",
        "id": 237213891,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620069481
    },
    {
        "content": "<p>I kind of expect that will start with a more weaselly \"Rust compatible\" sort of label<br>\n(but I'm not making any sort of official foundation statement here)</p>",
        "id": 237214575,
        "sender_full_name": "cuviper",
        "timestamp": 1620069818
    },
    {
        "content": "<p>Watch out for the <del>Jubilee</del> Weaselwords language in 2024!</p>",
        "id": 237214688,
        "sender_full_name": "Jubilee",
        "timestamp": 1620069855
    },
    {
        "content": "<p>oh! a board member said it! <em>puts a screenshot on reddit and links it on hacker news</em></p>",
        "id": 237214792,
        "sender_full_name": "Mara",
        "timestamp": 1620069902
    },
    {
        "content": "<p>(seriously) I don't think any alternative implementations have any chance of getting anywhere without supporting all editions and the differences between them. old code lingers in the ecosystem regardless of our wishful thinking</p>",
        "id": 237214949,
        "sender_full_name": "eddyb",
        "timestamp": 1620069962
    },
    {
        "content": "<p>I'm sure someday that will happen to me, but let's not start yet...</p>",
        "id": 237214977,
        "sender_full_name": "cuviper",
        "timestamp": 1620069964
    },
    {
        "content": "<p>what I like best about the Weaselwords language is that it is only capable of compiling programs that are bit-for-bit identical with programs in the Rust test suite</p>",
        "id": 237215000,
        "sender_full_name": "bstrie",
        "timestamp": 1620069968
    },
    {
        "content": "<p>(less seriously / more musing-out-loud) I would love to be part of a concerted effort to build up something that could be considered a \"(formal) model\" of something one might call the Rust language, as a specification stronger than just mere words on paper - but I doubt that will happen in a way that would allow me to participate, whether it doesn't happen, or it's going to be a crack team of academics (like the wonderful RustBelt effort) etc.</p>",
        "id": 237215179,
        "sender_full_name": "eddyb",
        "timestamp": 1620070063
    },
    {
        "content": "<p><em>however</em> I don't think using the idea of a specification as a rhetorical cudgel has any place</p>",
        "id": 237215313,
        "sender_full_name": "eddyb",
        "timestamp": 1620070105
    },
    {
        "content": "<p>if it will exist, it won't magically make the past go away</p>",
        "id": 237215325,
        "sender_full_name": "eddyb",
        "timestamp": 1620070115
    },
    {
        "content": "<p>or clean up our mistakes</p>",
        "id": 237215343,
        "sender_full_name": "eddyb",
        "timestamp": 1620070124
    },
    {
        "content": "<p>(jokingly / parody / unactionable) then again, a Rust 2.0 <em>could</em> do all that!</p>",
        "id": 237215542,
        "sender_full_name": "eddyb",
        "timestamp": 1620070213
    },
    {
        "content": "<p>i'm <em>so</em> looking forward to rust 3.0</p>",
        "id": 237215608,
        "sender_full_name": "Mara",
        "timestamp": 1620070235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237214977\">said</a>:</p>\n<blockquote>\n<p>I'm sure someday that will happen to me, but let's not start yet...</p>\n</blockquote>\n<p>fingers crossed we can avoid this</p>",
        "id": 237215609,
        "sender_full_name": "Jane Lusby",
        "timestamp": 1620070235
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237215608\">said</a>:</p>\n<blockquote>\n<p>i'm <em>so</em> looking forward to rust 3.0</p>\n</blockquote>\n<p>I call dibs on breaking changes to the error trait!</p>",
        "id": 237215745,
        "sender_full_name": "Jane Lusby",
        "timestamp": 1620070318
    },
    {
        "content": "<p>can we throw out rustdoc and rewrite it from scratch? <span aria-label=\"grinning face with smiling eyes\" class=\"emoji emoji-1f601\" role=\"img\" title=\"grinning face with smiling eyes\">:grinning_face_with_smiling_eyes:</span></p>",
        "id": 237215817,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620070337
    },
    {
        "content": "<p>You can do that now if you don't break any interfaces heyoo</p>",
        "id": 237215848,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070355
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281757\">Jubilee</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237215848\">said</a>:</p>\n<blockquote>\n<p>You can do that now if you don't break any interfaces heyoo</p>\n</blockquote>\n<p>well, that would be easier if I knew what the interfaces <em>were</em></p>",
        "id": 237215915,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620070388
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/75100\">https://github.com/rust-lang/rust/issues/75100</a></p>",
        "id": 237215932,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620070393
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119009\">eddyb</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237215313\">said</a>:</p>\n<blockquote>\n<p><em>however</em> I don't think using the idea of a specification as a rhetorical cudgel has any place</p>\n</blockquote>\n<p>This. Thank you.</p>",
        "id": 237215957,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070406
    },
    {
        "content": "<p>And conversely, while I do think a specification is important, there's a lot of painful rhetoric going around right now that basically implies \"you're not a real language unless you have a spec and more than one implementation\".</p>",
        "id": 237216160,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070474
    },
    {
        "content": "<p>I think a spec has a lot of value, but I never want to get to the point where we don't consider the possibility that if the spec and compiler differ <em>either one</em> might be wrong. The spec might have helped us detect a bug in the compiler, or conversely the spec might be wrong and needs fixing to match the compiler. Some people spreading rhetoric about specs think that we're always going to treat the spec as the source of truth and the compiler as what must be buggy if they differ.</p>",
        "id": 237216267,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070521
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119009\">eddyb</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237215179\">said</a>:</p>\n<blockquote>\n<p>(less seriously / more musing-out-loud) I would love to be part of a concerted effort to build up something that could be considered a \"(formal) model\" of something one might call the Rust language, as a specification stronger than just mere words on paper - but I doubt that will happen in a way that would allow me to participate, whether it doesn't happen, or it's going to be a crack team of academics (like the wonderful RustBelt effort) etc.</p>\n</blockquote>\n<p>Why is there no working group for this yet? I want to sign up for it. But also, I think that we need to get past the blockers, not by unblocking them but by documenting what exists</p>",
        "id": 237216350,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620070561
    },
    {
        "content": "<p>I was part of wg-grammar and that stagnated. and that's <em>basically</em> a subset of a specification</p>",
        "id": 237216440,
        "sender_full_name": "eddyb",
        "timestamp": 1620070586
    },
    {
        "content": "<p>I view it kind of like the \"Linux only compiles with GCC\" thing.<br>\nIt's fine if there's a C compiler that supports an extension of the language and many people write against that extension.</p>",
        "id": 237216445,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070588
    },
    {
        "content": "<p>I think we should just document what rustc does in specification style</p>",
        "id": 237216538,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620070630
    },
    {
        "content": "<p>That causes Many Headaches, sure, but I don't think a compiler is wrong to experiment with an extension to a language.</p>",
        "id": 237216541,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070632
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281757\">Jubilee</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237216445\">said</a>:</p>\n<blockquote>\n<p>I view it kind of like the \"Linux only compiles with GCC\" thing.<br>\nIt's fine if there's a C compiler that supports an extension of the language and many people write against that extension.</p>\n</blockquote>\n<p>That's fine until the \"extension\" is by something other than rustc, and people start writing to that compiler and expecting rustc to match that compiler's behavior.</p>",
        "id": 237216554,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070636
    },
    {
        "content": "<p>my own troubles with dragging wg-grammar down to a halt is why I say I doubt I would be able to participate</p>",
        "id": 237216556,
        "sender_full_name": "eddyb",
        "timestamp": 1620070638
    },
    {
        "content": "<p>\"just\" is a very mighty word.</p>",
        "id": 237216568,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070642
    },
    {
        "content": "<p>Doing a lot of work there.</p>",
        "id": 237216587,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070654
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"271719\">Mario Carneiro</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237216538\">said</a>:</p>\n<blockquote>\n<p>I think we should just document what rustc does in specification style</p>\n</blockquote>\n<p>usually this involves finding a lot of bugs <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 237216612,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1620070668
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281757\">Jubilee</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237216541\">said</a>:</p>\n<blockquote>\n<p>That causes Many Headaches, sure, but I don't think a compiler is wrong to experiment with an extension to a language.</p>\n</blockquote>\n<p>I'd agree with that, as long as there's <em>zero</em> expectation that we're obligated to match the behavior of that extension.</p>",
        "id": 237216624,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070673
    },
    {
        "content": "<p>If the (spec) bugs are enumerated and documented then it's a lot easier to do something about them</p>",
        "id": 237216766,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620070711
    },
    {
        "content": "<p>Yeah I think that is why Rust editions are good because essentially a Rust edition, imo, defines an extension of the notional language.</p>",
        "id": 237216776,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070716
    },
    {
        "content": "<p>Along the same lines that rustc experiments with things in nightly, but we don't hesitate to fix bugs in the behavior of nightly-only extensions even if doing so breaks code written to nightly.</p>",
        "id": 237216777,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070716
    },
    {
        "content": "<p>or a subtraction, even?</p>",
        "id": 237216815,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070739
    },
    {
        "content": "<p>A variation.</p>",
        "id": 237216819,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070744
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237216160\">said</a>:</p>\n<blockquote>\n<p>And conversely, while I do think a specification is important, there's a lot of painful rhetoric going around right now that basically implies \"you're not a real language unless you have a spec and more than one implementation\".</p>\n</blockquote>\n<p>As for the \"more than one implementation\" bit, I think that was <em>critically</em> important back when language implementations were proprietary. I think it's much less important when there's a publicly available Open Source implementation of the language.</p>",
        "id": 237216926,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070799
    },
    {
        "content": "<p>I think writing an implementation will be much much easier if there is a spec</p>",
        "id": 237217004,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620070822
    },
    {
        "content": "<p>oh god yes. All the C compilers in the 90s were proprietary.</p>",
        "id": 237217006,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070822
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119009\">eddyb</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237216556\">said</a>:</p>\n<blockquote>\n<p>my own troubles with dragging wg-grammar down to a halt is why I say I doubt I would be able to participate</p>\n</blockquote>\n<p>I have far more ideas (realistic or not) than time and/or funding for specific stuff like this. and <em>even if</em> there were resources allocated, I can't guarantee progress on specific areas, so it's hard to figure out how to plan it out ahead of time<br>\nI don't like talking too much about it in spaces too public but this discussion reminded me of it (btw you should consider forking the thread Zulip-wise, since it kinda derailed more than once)</p>",
        "id": 237217007,
        "sender_full_name": "eddyb",
        "timestamp": 1620070824
    },
    {
        "content": "<p>it sounds like there's demand for a #specification zulip stream :)</p>",
        "id": 237217108,
        "sender_full_name": "bstrie",
        "timestamp": 1620070866
    },
    {
        "content": "<p>A D rail? is that a D language feature?</p>",
        "id": 237217133,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070878
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"271719\">@Mario Carneiro</span> so to answer your question more directly: there is significantly more enthusiasm about having a specification than the necessary resources and planning to ensure that it happens</p>",
        "id": 237217159,
        "sender_full_name": "eddyb",
        "timestamp": 1620070892
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237217108\">said</a>:</p>\n<blockquote>\n<p>it sounds like there's demand for a #specification zulip stream :)</p>\n</blockquote>\n<p>I think, <em>before</em> such a thing happens, we should have a proposal and charter by lang and libs, for what exactly a spec should try to achieve.</p>",
        "id": 237217173,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620070903
    },
    {
        "content": "<p>and I'm sure y'all could help but until this can get organized every separate effort will go for a while then die out, and we'll all be a bit sadder</p>",
        "id": 237217279,
        "sender_full_name": "eddyb",
        "timestamp": 1620070939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237217173\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237217108\">said</a>:</p>\n<blockquote>\n<p>it sounds like there's demand for a #specification zulip stream :)</p>\n</blockquote>\n<p>I think, <em>before</em> such a thing happens, we should have a proposal and charter by lang and libs, for what exactly a spec should try to achieve.</p>\n</blockquote>\n<p>If too much pressure is put on the spec to be normative, then it will definitely stall</p>",
        "id": 237217346,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620070985
    },
    {
        "content": "<p>Yeah, having an accepted proposal/charter for a team is why Portable SIMD's little speed-gremlin shop is operational at all.</p>",
        "id": 237217359,
        "sender_full_name": "Jubilee",
        "timestamp": 1620070993
    },
    {
        "content": "<p>As an aside, it's both amusing and useful that Zulip's emoji-reaction search has <code>this</code> as an alias of <code>point_up</code>.</p>",
        "id": 237217376,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620071002
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"271719\">Mario Carneiro</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237217346\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"239881\">Josh Triplett</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237217173\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"256342\">bstrie</span> <a href=\"#narrow/stream/268952-edition-2021/topic/denying.20edition.202015.20deprecated.20APIs/near/237217108\">said</a>:</p>\n<blockquote>\n<p>it sounds like there's demand for a #specification zulip stream :)</p>\n</blockquote>\n<p>I think, <em>before</em> such a thing happens, we should have a proposal and charter by lang and libs, for what exactly a spec should try to achieve.</p>\n</blockquote>\n<p>If too much pressure is put on the spec to be normative, then it will definitely stall</p>\n</blockquote>\n<p>If a spec is published, people will <em>expect</em> it to be normative. If we're not prepared to treat it as at least partially normative, we shouldn't do it.</p>",
        "id": 237217481,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620071045
    },
    {
        "content": "<p>(Or, at least, that's something a charter should talk about.)</p>",
        "id": 237217517,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620071063
    },
    {
        "content": "<p>But anyways, from <em>my</em> view, I think an edition is close to the same thing as a nightly feature. But then, I'm known to be strange. :^)</p>",
        "id": 237217538,
        "sender_full_name": "Jubilee",
        "timestamp": 1620071074
    },
    {
        "content": "<p>(A charter would also need to talk about the difference between \"normative\" and \"hammer to hit people with\", and make sure people know a spec should never be the latter.)</p>",
        "id": 237217581,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1620071102
    },
    {
        "content": "<blockquote>\n<p>If a spec is published, people will expect it to be normative. If we're not prepared to treat it as at least partially normative, we shouldn't do it.</p>\n</blockquote>\n<p>UCG seems to be in the worst of both worlds here since it is not normative but it is close enough that things are added only with extreme hesitation</p>",
        "id": 237217799,
        "sender_full_name": "Mario Carneiro",
        "timestamp": 1620071176
    },
    {
        "content": "<p>having a spec doesn't mean you can't also have a reference implementation; all you need is for the spec to say \"if there is a discrepancy between this document and the reference implementation, then that may indicate a bug in either this document or the reference implementation.\" self-reference to the rescue :)</p>",
        "id": 237217928,
        "sender_full_name": "bstrie",
        "timestamp": 1620071232
    },
    {
        "content": "<p>Arguably you can make certain paths inaccessible on certain editions via non-raw identifier path components and then allow access to them via something like <code>Arc::r2015#swap_and_compare</code>.</p>",
        "id": 238009712,
        "sender_full_name": "isHavvy",
        "timestamp": 1620537139
    },
    {
        "content": "<p>Then Rustfix could switch to using those raw path components for those who are still using them where there's no better replacement.</p>",
        "id": 238009809,
        "sender_full_name": "isHavvy",
        "timestamp": 1620537283
    },
    {
        "content": "<p>Although, IMO, the deprecation problem is not large enough to warrant spending time on it during the 2021 edition.</p>",
        "id": 238009896,
        "sender_full_name": "isHavvy",
        "timestamp": 1620537365
    }
]
[
    {
        "content": "<p>Hey all! I've reported <a href=\"https://github.com/rust-lang/cargo/issues/10321\">https://github.com/rust-lang/cargo/issues/10321</a> today, along with the guilty commit and a one-liner change that would bring back the missing <code>RUSTFLAGS</code> for me.<br>\nI'm surprised though that I'm apparently the first one to hit this problem.</p>\n<p>Hasn't anyone else missed <code>RUSTFLAGS</code> in build scripts since Cargo 1.55.0? Am I overlooking something here?<br>\nAnd would my fix work or does it break something else?</p>",
        "id": 269120941,
        "sender_full_name": "Colin Finck",
        "timestamp": 1643037742
    },
    {
        "content": "<p>Just FYI. Here is an similar issue: <a href=\"https://github.com/rust-lang/cargo/issues/10111\">https://github.com/rust-lang/cargo/issues/10111</a></p>",
        "id": 269121397,
        "sender_full_name": "Weihang Lo",
        "timestamp": 1643037920
    },
    {
        "content": "<p>Thanks! I'll update my issue with that information</p>",
        "id": 269123724,
        "sender_full_name": "Colin Finck",
        "timestamp": 1643038830
    },
    {
        "content": "<p>I'll try to tend to autocfg for that this week</p>",
        "id": 269133803,
        "sender_full_name": "cuviper",
        "timestamp": 1643042776
    },
    {
        "content": "<p>I think I even had a WIP branch somewhere...</p>",
        "id": 269133825,
        "sender_full_name": "cuviper",
        "timestamp": 1643042785
    },
    {
        "content": "<p>TLDR Using <code>RUSTFLAGS</code> is unreliable and incomplete. Switching to <code>CARGO_ENCODED_RUSTFLAGS</code> is the correct solution. (Maybe with a fallback to <code>RUSTFLAGS</code> for older Cargo support.)<br>\nWe probably should have thought more carefully about the upgrade path, but by the time we noticed it it had been out for two releases so we double down on making people to upgrade.</p>",
        "id": 269134627,
        "sender_full_name": "Eh2406",
        "timestamp": 1643043108
    }
]
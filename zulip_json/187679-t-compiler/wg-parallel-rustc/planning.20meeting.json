[
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> (unsure if there's somebody else interested not listed here), we have been talking with Niko about doing a planning meeting next week</p>",
        "id": 176688040,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569525255
    },
    {
        "content": "<p>may end sending a doodle or just set a date as people prefer :)</p>",
        "id": 176688069,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569525278
    },
    {
        "content": "<p>voice or text? but doodle would probably be best</p>",
        "id": 176688092,
        "sender_full_name": "simulacrum",
        "timestamp": 1569525299
    },
    {
        "content": "<p>yeah I can make a doodle, text I guess?</p>",
        "id": 176688126,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569525331
    },
    {
        "content": "<p>well, what works better I'd say ... if voice is preferred I think it's fine too</p>",
        "id": 176688219,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569525373
    },
    {
        "content": "<p>let's try to find a date first</p>",
        "id": 176688228,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569525380
    },
    {
        "content": "<p>doodle would work for me, but I'm also fine if you don't schedule around me</p>",
        "id": 176688322,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569525462
    },
    {
        "content": "<p><a href=\"https://doodle.com/poll/ccfpdme449bk67xy\" target=\"_blank\" title=\"https://doodle.com/poll/ccfpdme449bk67xy\">https://doodle.com/poll/ccfpdme449bk67xy</a></p>",
        "id": 176688667,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569525713
    },
    {
        "content": "<p>I'd prefer zulip</p>",
        "id": 176743146,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569589239
    },
    {
        "content": "<p>(as a general rule)</p>",
        "id": 176743156,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569589248
    },
    {
        "content": "<p>anyway i'm filling out the doodle now, sorry</p>",
        "id": 176743169,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569589257
    },
    {
        "content": "<p>done!</p>",
        "id": 176743324,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569589324
    },
    {
        "content": "<p>I think we already have a date</p>",
        "id": 176747490,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569592473
    },
    {
        "content": "<p>which is Monday 3pm GMT-3 (on my timezone) but doing to add this to the compiler calendar</p>",
        "id": 176747542,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569592504
    },
    {
        "content": "<p>If there's a calendar event, can you invite me to that?</p>",
        "id": 176755387,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569597365
    },
    {
        "content": "<p>(I would also appreciate an invite and do not see one on monday)</p>",
        "id": 176756036,
        "sender_full_name": "simulacrum",
        "timestamp": 1569597823
    },
    {
        "content": "<p>hey, yeah, I'm adding that right now</p>",
        "id": 176766892,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569605497
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> <span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> the ones interested in getting an invite, hand me a gsuite email</p>",
        "id": 176767004,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569605550
    },
    {
        "content": "<p><a href=\"mailto:mark.simulacrum@gmail.com\" title=\"mailto:mark.simulacrum@gmail.com\">mark.simulacrum@gmail.com</a></p>",
        "id": 176767045,
        "sender_full_name": "simulacrum",
        "timestamp": 1569605579
    },
    {
        "content": "<p><a href=\"mailto:acrichton@mozilla.com\" title=\"mailto:acrichton@mozilla.com\">acrichton@mozilla.com</a></p>",
        "id": 176767622,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569605896
    },
    {
        "content": "<p>invite sent, you probably got two mails, because I fixed the date afterwards :)</p>",
        "id": 176769604,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569607021
    },
    {
        "content": "<p>please send to <a href=\"mailto:cuviper@gmail.com\" title=\"mailto:cuviper@gmail.com\">cuviper@gmail.com</a> too, thanks!</p>",
        "id": 176777894,
        "sender_full_name": "cuviper",
        "timestamp": 1569612151
    },
    {
        "content": "<p>done</p>",
        "id": 176783276,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569615901
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> I'm leaving a <a href=\"https://hackmd.io/@c5iIKW2qR_qNomdpGarROg/ByIbTe3vB/edit\" target=\"_blank\" title=\"https://hackmd.io/@c5iIKW2qR_qNomdpGarROg/ByIbTe3vB/edit\">HackMD document here</a> as placeholder, for now, before the meeting we can fill it with ideas and during the meeting we can use it to leave a summary there</p>",
        "id": 176787659,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569619694
    },
    {
        "content": "<p>btw <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> and <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> are not in the Zulip <span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> group, unsure if you guys want to be there :)</p>",
        "id": 176787699,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569619728
    },
    {
        "content": "<p>I'll try to fill that doc over the weekend with some agenda items</p>",
        "id": 176787749,
        "sender_full_name": "simulacrum",
        "timestamp": 1569619763
    },
    {
        "content": "<p>added a link to that document on the calendar event too</p>",
        "id": 176787759,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569619774
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> reminder that we have the planning meeting in 5.5hs, remember that there's this <a href=\"https://hackmd.io/@c5iIKW2qR_qNomdpGarROg/ByIbTe3vB/edit\" target=\"_blank\" title=\"https://hackmd.io/@c5iIKW2qR_qNomdpGarROg/ByIbTe3vB/edit\">HackMD document</a> with some agenda items and thoughts, feel free to add more stuff there</p>",
        "id": 176927218,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569846787
    },
    {
        "content": "<p>As a heads up I have an appointment ending at the same time the meeting starts, so I'll need to drive home, so I may be 15-20m late</p>",
        "id": 176939484,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569855200
    },
    {
        "content": "<p>(I suspect I can be brought up to speed quickly though)</p>",
        "id": 176939509,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569855219
    },
    {
        "content": "<p>are we doing video chat, or just here?</p>",
        "id": 176956001,
        "sender_full_name": "cuviper",
        "timestamp": 1569865965
    },
    {
        "content": "<p>I believe just here?</p>",
        "id": 176956092,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866035
    },
    {
        "content": "<p>I'm happy with either though</p>",
        "id": 176956128,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866042
    },
    {
        "content": "<p>that's fine, just figuring out whether I need to use my laptop :)</p>",
        "id": 176956256,
        "sender_full_name": "cuviper",
        "timestamp": 1569866118
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> meeting time <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> everyone!</p>",
        "id": 176956806,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569866406
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 176956826,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866412
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 176956836,
        "sender_full_name": "cuviper",
        "timestamp": 1569866419
    },
    {
        "content": "<p>is there a way to \"officially\" join that WG?</p>",
        "id": 176956876,
        "sender_full_name": "cuviper",
        "timestamp": 1569866446
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> I can add you to the Zulip group</p>",
        "id": 176956923,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569866464
    },
    {
        "content": "<p>that would be great, thanks</p>",
        "id": 176956945,
        "sender_full_name": "cuviper",
        "timestamp": 1569866478
    },
    {
        "content": "<p>I was helping getting some time for this meeting and organizing this a bit but I guess I'd leave <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> to handle it?, Niko is that ok?</p>",
        "id": 176956962,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569866493
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 176956978,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866506
    },
    {
        "content": "<p>sure</p>",
        "id": 176956980,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866507
    },
    {
        "content": "<p>I'm looking over <a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA\">the hackmd document</a></p>",
        "id": 176957051,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866532
    },
    {
        "content": "<p>(I am not entirely clear on what the goals for this meeting should be -- I mostly threw potential ideas on the doc)</p>",
        "id": 176957127,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866590
    },
    {
        "content": "<p>So feel free to steer in an entirely separate direction :)</p>",
        "id": 176957144,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866600
    },
    {
        "content": "<p>yeah, I was going to say that exactly</p>",
        "id": 176957148,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569866604
    },
    {
        "content": "<p>we are aiming for a Roadmap, is that right?</p>",
        "id": 176957173,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569866614
    },
    {
        "content": "<p>I was hoping we'd find some steps to go forward</p>",
        "id": 176957189,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866627
    },
    {
        "content": "<p>I don't really agree with this: \"Queries and parallelism are a poor fit\"</p>",
        "id": 176957196,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866636
    },
    {
        "content": "<p>seems like the \"Purpose\" bullet may need to be first</p>",
        "id": 176957261,
        "sender_full_name": "cuviper",
        "timestamp": 1569866652
    },
    {
        "content": "<p>agreed</p>",
        "id": 176957269,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866657
    },
    {
        "content": "<p>So yeah what I had in mind was that we would kind of revisit some of the themes from the last time we chatted and try to push them into more specific steps to go forward</p>",
        "id": 176957301,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866678
    },
    {
        "content": "<p>I'm trying to go fish out some links there :)</p>",
        "id": 176957334,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866702
    },
    {
        "content": "<p>I guess I am referring to <a href=\"#narrow/stream/187679-t-compiler.2Fwg-parallel-rustc/topic/overall.20strategy\" title=\"#narrow/stream/187679-t-compiler.2Fwg-parallel-rustc/topic/overall.20strategy\">this topic</a></p>",
        "id": 176957357,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866716
    },
    {
        "content": "<p>and I was hoping to <a href=\"#narrow/stream/187679-t-compiler.2Fwg-parallel-rustc/topic/overall.20strategy/near/176411337\" title=\"#narrow/stream/187679-t-compiler.2Fwg-parallel-rustc/topic/overall.20strategy/near/176411337\">continue from roughly these comments</a></p>",
        "id": 176957483,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866775
    },
    {
        "content": "<p>basically, continue to work of pushing this current branch of work into a shippable state</p>",
        "id": 176957530,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866816
    },
    {
        "content": "<p>(but I guess it's worth asking if we think we'd need to do something more radical)</p>",
        "id": 176957543,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866827
    },
    {
        "content": "<p>Personally my goal would be that we are able to parallelize a few key things:</p>\n<p>- running the type/borrow checker across functions in parallel<br>\n- translation codegen units to LLVM in parallel </p>\n<p>etc, and it seems like the current architecture should suffice to do that.</p>",
        "id": 176957695,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569866923
    },
    {
        "content": "<p>I would agree that we should be able to accomplish those two</p>",
        "id": 176957778,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866991
    },
    {
        "content": "<p>even without really any \"major\" work</p>",
        "id": 176957783,
        "sender_full_name": "simulacrum",
        "timestamp": 1569866997
    },
    {
        "content": "<blockquote>\n<p>I don't really agree with this: \"Queries and parallelism are a poor fit\"</p>\n</blockquote>\n<p>(to return to this, I think perhaps I am interpreting the term \"queries\" too generally -- that is, I think the <em>concepts</em> we are working with are pretty amenable to parallelization, as they are basically just pure functions -- but I can definitely imagine that we'll want to consider different impl strategies)</p>",
        "id": 176957916,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867072
    },
    {
        "content": "<p>in any case, I was sketching some of what I view as the current <a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?view#Concerns-with-shipping-now\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?view#Concerns-with-shipping-now\">concerns with shipping *now*</a></p>",
        "id": 176958005,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867132
    },
    {
        "content": "<p>Yes -- when they're pure functions they work great, but particularly around the top level we have a lot of \"non pure\" queries that are using Steal and such in hard-to-define ways</p>",
        "id": 176958026,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867154
    },
    {
        "content": "<p>One concern I had is whether we think this is a \"good idea\" in general</p>",
        "id": 176958068,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867184
    },
    {
        "content": "<p><del>Not really</del></p>",
        "id": 176958078,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867189
    },
    {
        "content": "<p>Alex filed a couple issues re: thread management too</p>",
        "id": 176958093,
        "sender_full_name": "cuviper",
        "timestamp": 1569867203
    },
    {
        "content": "<p>Ah, this=parallelism within the compiler, to be clear</p>",
        "id": 176958104,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867212
    },
    {
        "content": "<p>What exceptions are there? Steal is fairly local</p>",
        "id": 176958108,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867217
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/blob/master/src/librustc_interface/queries.rs#L213-L224\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/blob/master/src/librustc_interface/queries.rs#L213-L224\">https://github.com/rust-lang/rust/blob/master/src/librustc_interface/queries.rs#L213-L224</a></p>",
        "id": 176958179,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867252
    },
    {
        "content": "<p>I don't really think it's a blocking problem, it seems more like a \"we should refactor this\" project</p>",
        "id": 176958181,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867254
    },
    {
        "content": "<p>but yeah it's probably non blocking</p>",
        "id": 176958214,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867273
    },
    {
        "content": "<p>Right, so .. that is \"pre-query\"</p>",
        "id": 176958220,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867275
    },
    {
        "content": "<p>heh, sure</p>",
        "id": 176958232,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867287
    },
    {
        "content": "<p>I guess I still think that parallelism within the compiler makes sense</p>",
        "id": 176958243,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867295
    },
    {
        "content": "<p>But it's worth being clear about which scenarios</p>",
        "id": 176958275,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867310
    },
    {
        "content": "<p>Which I guess leads back to the overall goals</p>",
        "id": 176958293,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867320
    },
    {
        "content": "<p>So my main concern is that I think it might be good to scale back what I _think_ are our current ambitions, to an extent, to what Niko highlighted earlier</p>",
        "id": 176958314,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867329
    },
    {
        "content": "<p>Specifically <br>\n- running the type/borrow checker across functions in parallel<br>\n- translation codegen units to LLVM in parallel</p>",
        "id": 176958322,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867337
    },
    {
        "content": "<p>Like, I don't think we want to try to parallelize things like parsing and name resolution and such, i.e., to intertwine them, quite yet</p>",
        "id": 176958390,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867365
    },
    {
        "content": "<p>(The reason that I included translation of codegen units is that we identified that as a blocker to experimenting with different strategies around generating LLVM bitcode that might help with reducing duplication)</p>",
        "id": 176958402,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867369
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 176958419,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569867378
    },
    {
        "content": "<p>(But also because it seems to fit just fine)</p>",
        "id": 176958440,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867389
    },
    {
        "content": "<blockquote>\n<p>Like, I don't think we want to try to parallelize things like parsing and name resolution and such, i.e., to intertwine them, quite yet</p>\n</blockquote>\n<p>Agreed... are you citing those because they are not part of the query system yet?</p>",
        "id": 176958475,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867406
    },
    {
        "content": "<p>(Or because there are pending PRs along those lines?)</p>",
        "id": 176958498,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867419
    },
    {
        "content": "<p>Mostly to try and establish non-goals</p>",
        "id": 176958528,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867435
    },
    {
        "content": "<p>Not because of any particular reason</p>",
        "id": 176958546,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867443
    },
    {
        "content": "<p>OK, just checking. In any case, I agree :)</p>",
        "id": 176958563,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867453
    },
    {
        "content": "<p>Another non-goal from my POV is very fine-grained parallelism, which is partly why I think Rayon integration is not something we have to have at this stage</p>",
        "id": 176958600,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867478
    },
    {
        "content": "<p>e.g., I wouldn't expect to parallelize type-checking <em>within</em> a particular function, or at intra-query granularity</p>",
        "id": 176958668,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867498
    },
    {
        "content": "<p>I may have missed this but do we have data to show the high-level passes which need aprallelization the most? (e.g. the slowest rustc passes)</p>",
        "id": 176958703,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569867520
    },
    {
        "content": "<p>you don't think rayon is useful coarsely? \"here are all my functions, go borrowck!\"</p>",
        "id": 176958729,
        "sender_full_name": "cuviper",
        "timestamp": 1569867544
    },
    {
        "content": "<p>typeck_tables and codegen are ~always the top two in most benchmarks, I believe</p>",
        "id": 176958739,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867546
    },
    {
        "content": "<p>yes, what <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> said</p>",
        "id": 176958759,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867564
    },
    {
        "content": "<blockquote>\n<p>you don't think rayon is useful coarsely? \"here are all my functions, go borrowck!\"</p>\n</blockquote>\n<p>I didn't say that :) I just said I don't think it's needed</p>",
        "id": 176958776,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867578
    },
    {
        "content": "<p>in particular if it complicates jobserver integration (which I think it very well may)</p>",
        "id": 176958808,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867605
    },
    {
        "content": "<p>Type checking is parallel already. I have code to make codegen parallel too, but I'd rather just get rid of the messy LLVM threads and use a simple for loop for both codegen+LLVM</p>",
        "id": 176958853,
        "sender_full_name": "Zoxc",
        "timestamp": 1569867610
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> do you know if we have data on whether that's showing expected (linear-ish) improvements in time?</p>",
        "id": 176958893,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867647
    },
    {
        "content": "<p>ok -- I think the jobserver issue is roughly the same problem whether rayon manages the threads or not</p>",
        "id": 176958895,
        "sender_full_name": "cuviper",
        "timestamp": 1569867649
    },
    {
        "content": "<p>at least within those specific queries</p>",
        "id": 176958903,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867657
    },
    {
        "content": "<p>(FWIW I think it's a fantastic idea to start at a coarse level and then go from there, that's technically what we've already done with parallel codegen)</p>",
        "id": 176958918,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569867666
    },
    {
        "content": "<blockquote>\n<p>Type checking is parallel already. </p>\n</blockquote>\n<p>right. I basically want to do the work we need to do to ship <em>this</em></p>",
        "id": 176958959,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867691
    },
    {
        "content": "<p>( and iterate from there )</p>",
        "id": 176958983,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867710
    },
    {
        "content": "<p>that said, the LLVM threads and so forth is a <em>bit</em> tricky since we have to control peak memory usage, iirc</p>",
        "id": 176959044,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867730
    },
    {
        "content": "<p>Less threads = less peak memory usage. It's not very hard =P</p>",
        "id": 176959108,
        "sender_full_name": "Zoxc",
        "timestamp": 1569867784
    },
    {
        "content": "<p>Do we consider being confident that we don't deadlock etc (and essentially can't) a prereq for shipping?</p>",
        "id": 176959111,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867787
    },
    {
        "content": "<p>It sounds like it would definitely be worthwhile to ship parallel typeck with perhaps a new architecture of managing the jobserver and then slowly port parallel codegen to the new architecture</p>",
        "id": 176959129,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569867804
    },
    {
        "content": "<p>We probably need some benchmark to see if switching between processes due to jobserver is actually a big problem</p>",
        "id": 176959251,
        "sender_full_name": "Zoxc",
        "timestamp": 1569867868
    },
    {
        "content": "<blockquote>\n<p>Do we consider being confident that we don't deadlock etc (and essentially can't) a prereq for shipping?</p>\n</blockquote>\n<p>I've been debating about this. We consistently rank \"tech debt\" amongst our problems and I am concerned about growing that. This is why I listed documentation in the list of concerns. On the other hand, I don't want to block indefinitely on vague concerns.</p>",
        "id": 176959262,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867879
    },
    {
        "content": "<p>There's things we can do to reduce that overhead (make rayon wait longer before going idle), ensuring there's always work to be done in rustc, spreading jobserver tokens better across processes)</p>",
        "id": 176959353,
        "sender_full_name": "Zoxc",
        "timestamp": 1569867940
    },
    {
        "content": "<p>I personally think that eliminating the shared state on Session, e.g., which is pretty much a pre-req for this sort of confidence, will be quite hard -- I guess I could imagine we just don't, and instead document some fields as \"be careful when accessing these\"</p>",
        "id": 176959384,
        "sender_full_name": "simulacrum",
        "timestamp": 1569867959
    },
    {
        "content": "<p>I don't think you need to eliminate shared state entirely to have confidence</p>",
        "id": 176959452,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867981
    },
    {
        "content": "<p>Certainly not for <em>dead-lock</em> freedom</p>",
        "id": 176959468,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569867995
    },
    {
        "content": "<p>FWIW I do think we should strive very hard for high confidence in implementation here, bugs just lead to every tool/crate trying to have its own workaround</p>",
        "id": 176959469,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569867996
    },
    {
        "content": "<p>people primarily just want their code to compile, and they'd rather it compile correctly than never</p>",
        "id": 176959486,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868008
    },
    {
        "content": "<p>One thing worth bringing up: I've not successfully used it yet, but we might experiment with things like <a href=\"https://crates.io/crates/loom\" target=\"_blank\" title=\"https://crates.io/crates/loom\">loom</a></p>",
        "id": 176959515,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868022
    },
    {
        "content": "<p>yeah so I'm not sure we necessarily need to prove it correct or anything like that</p>",
        "id": 176959540,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868038
    },
    {
        "content": "<blockquote>\n<p>Certainly not for <em>dead-lock</em> freedom</p>\n</blockquote>\n<p>but we <em>do</em> have to be careful about having too many locks, or returning guards so that we can't see how long a lock is held</p>",
        "id": 176959550,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868047
    },
    {
        "content": "<p>but I think we need more than \"one of us knows how it works and rustc says it's ok\"</p>",
        "id": 176959555,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868048
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> Can you elaborate perhaps on what sort of docs or other materials you'd want to see?</p>",
        "id": 176959683,
        "sender_full_name": "simulacrum",
        "timestamp": 1569868121
    },
    {
        "content": "<p>Yes, I think I would be happy if we had a set of 2-3 people working on stuff, some reasonable amount of docs on the \"big picture\" and some notes where we use fine-grained locking, and a lot of testing (that said, loom seems like something we <em>could</em> setup, but not as a blocker)</p>",
        "id": 176959695,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868128
    },
    {
        "content": "<p>e.g. how do we increase \"one of us knows how it works\"</p>",
        "id": 176959697,
        "sender_full_name": "simulacrum",
        "timestamp": 1569868129
    },
    {
        "content": "<p>I'm basically stressing how bad it is to have subtle nondeterministic bugs in your compiler</p>",
        "id": 176959733,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868152
    },
    {
        "content": "<p>I think I would give incremental as an anti-pattern</p>",
        "id": 176959757,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868172
    },
    {
        "content": "<p>We've not had a <em>ton</em> of bugs <em>but</em></p>",
        "id": 176959764,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868178
    },
    {
        "content": "<p>we don't have a lot of people familiar with the details</p>",
        "id": 176959771,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868185
    },
    {
        "content": "<p>it's got the highest likelihood of showing up in big projects (which want to turn this on the most), and runs the risk of forcing our hand to, for example, add configuration to cargo to control all the knobs here</p>",
        "id": 176959775,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868188
    },
    {
        "content": "<p>(there are pretty big-picture docs though)</p>",
        "id": 176959779,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868194
    },
    {
        "content": "<p>I think in some sense my impression is that getting good docs for the highlevel parts (jobserver integration, where the \"parallel loops\" are) is going to be fairly easy. Getting confidence for the relatively fine-grained locks I think is going to be quite hard, though.</p>",
        "id": 176959942,
        "sender_full_name": "simulacrum",
        "timestamp": 1569868294
    },
    {
        "content": "<p>( so time-check, we're 30 minutes in :)</p>",
        "id": 176959948,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868298
    },
    {
        "content": "<p>It seems like we pretty much are agreed that the primary blocker is getting docs/confidence in the implementation, right?</p>\n<p>I believe the jobserver integration for example we have \"known knobs\" to try and tune -- as <span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> mentioned</p>",
        "id": 176960110,
        "sender_full_name": "simulacrum",
        "timestamp": 1569868414
    },
    {
        "content": "<p>we've got 71 instances of <code>Lock&lt;</code> in <code>librustc*</code> :)</p>",
        "id": 176960131,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868433
    },
    {
        "content": "<p>some of which are public (ungreat)</p>",
        "id": 176960225,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868473
    },
    {
        "content": "<p>but most of which are not</p>",
        "id": 176960234,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868479
    },
    {
        "content": "<p>it seems plausible to me that we can audit them and refactor them to use:</p>\n<ul>\n<li>private fields</li>\n<li>coarse-grained locking most of the time </li>\n</ul>\n<p>and for the remainder, well, we'll have to see what testing brings I guess.</p>",
        "id": 176960387,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868582
    },
    {
        "content": "<p>Seems reasonable -- do we think a good way to do this might be to just put up some issues to start (maybe 3 or 4 or so) on some public locks and assign some folks in this meeting to them?</p>",
        "id": 176960469,
        "sender_full_name": "simulacrum",
        "timestamp": 1569868637
    },
    {
        "content": "<p>maybe. let's table that for one second.</p>",
        "id": 176960505,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868671
    },
    {
        "content": "<p>because I'm curious about the other things.</p>",
        "id": 176960514,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868677
    },
    {
        "content": "<p>like, what are they? :)</p>",
        "id": 176960561,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868687
    },
    {
        "content": "<p>one thing I didn't write down is \"rayon fork\"</p>",
        "id": 176960600,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868717
    },
    {
        "content": "<p>\"other things\" in terms of what we need for confidence?</p>",
        "id": 176960602,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868719
    },
    {
        "content": "<p>like, what else do we want to do before shipping?</p>",
        "id": 176960639,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868747
    },
    {
        "content": "<ul>\n<li>Sequential overhead</li>\n<li>\n<p>Overly fine-grained locking risks subtle ordering or dead-lock bugs<br>\n    * Solution: audit</p>\n</li>\n<li>\n<p>Poor jobserver integration leading to overall poor scaling</p>\n</li>\n<li>Rayon fork -- can we eliminate it?</li>\n<li>Documentation of key components<br>\n    * What are the major sources of shared state and where is each documented?<br>\n    * How does jobserver integration work and can we improve on that?</li>\n</ul>",
        "id": 176960677,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868777
    },
    {
        "content": "<p>that's what I have in <a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit\">the hackmd doc</a></p>",
        "id": 176960691,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868787
    },
    {
        "content": "<p>the reason I'm asking is</p>",
        "id": 176960696,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868790
    },
    {
        "content": "<ul>\n<li>Call for performance testing, perhaps asking for <code>-Z timings</code> of before/after to show differences in cpu usage</li>\n</ul>",
        "id": 176960705,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868800
    },
    {
        "content": "<p>I'd sort of like to identify \"steps\" we can take for each of them</p>",
        "id": 176960734,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868802
    },
    {
        "content": "<p>let's _update_ the rayon fork, at least...</p>",
        "id": 176960778,
        "sender_full_name": "cuviper",
        "timestamp": 1569868830
    },
    {
        "content": "<p>I dropped one patch in favor of <code>build_scoped</code></p>",
        "id": 176960819,
        "sender_full_name": "cuviper",
        "timestamp": 1569868863
    },
    {
        "content": "<p>we can review the others</p>",
        "id": 176960830,
        "sender_full_name": "cuviper",
        "timestamp": 1569868866
    },
    {
        "content": "<p>yep, I think I'd like to do a review of each of them</p>",
        "id": 176960842,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868878
    },
    {
        "content": "<p>and talk  out why we have it</p>",
        "id": 176960846,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868883
    },
    {
        "content": "<p>( and if we can get rid of it )</p>",
        "id": 176960868,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868897
    },
    {
        "content": "<p>maybe we can just do that over a few weeks?</p>",
        "id": 176960876,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868902
    },
    {
        "content": "<p>(or all at once, maybe, not sure how long it'll take, I guess 1 meeting is likely enough)</p>",
        "id": 176960948,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868930
    },
    {
        "content": "<p>I have this under documentation:</p>\n<blockquote>\n<div class=\"codehilite\"><pre><span></span>* Why do we have the Rayon fork?\n</pre></div>\n\n\n</blockquote>",
        "id": 176960966,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868946
    },
    {
        "content": "<p>I think one thing we want on a plan is having an idea of how transition parallel codegen/typeck to same parallelization framework</p>",
        "id": 176960967,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569868946
    },
    {
        "content": "<p>I'm sort of seeing something here -- I feel like the frame of \"documentaiton\" is helpful here</p>",
        "id": 176960999,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569868978
    },
    {
        "content": "<p>Don't forget about my Rayon fiber fork. That would also help prevent threads from falling asleep =P</p>",
        "id": 176961029,
        "sender_full_name": "Zoxc",
        "timestamp": 1569868999
    },
    {
        "content": "<blockquote>\n<p>I think one thing we want on a plan is having an idea of how transition parallel codegen/typeck to same parallelization framework</p>\n</blockquote>\n<p>e.g., in this case, I feel like it'd be useful to have somebody start by doing a quick review of how things are working today (maybe over Zoom), and then we can talk about how they could be unified and improved? And the result is most of the way to docs</p>",
        "id": 176961115,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869052
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> I don't think that's important until the parallel compiler is the default, so we can actually remove the LLVM threads without regressing performance</p>",
        "id": 176961129,
        "sender_full_name": "Zoxc",
        "timestamp": 1569869067
    },
    {
        "content": "<p>(I was proposing something similar for the rayon fork)</p>",
        "id": 176961156,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869091
    },
    {
        "content": "<p>If mw isn't available I can probably give a review of how parallel codegen works</p>",
        "id": 176961199,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869129
    },
    {
        "content": "<p>(later on a call)</p>",
        "id": 176961206,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869134
    },
    {
        "content": "<p>so some bullets where I don't have anything listed include:</p>\n<ul>\n<li>Sequential overhead</li>\n<li>Poor jobserver integration leading to overall poor scaling</li>\n</ul>",
        "id": 176961317,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869208
    },
    {
        "content": "<p>the latter feels like something we could do the same \"explain, discuss, experiment/document\" pattern on, if we want</p>",
        "id": 176961336,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869231
    },
    {
        "content": "<p>ah well I guess <span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> listed some solutions</p>",
        "id": 176961349,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869240
    },
    {
        "content": "<p>I personally wouldn't mind talking them over though :)</p>",
        "id": 176961358,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869252
    },
    {
        "content": "<p>(and better understanding what we're doing now)</p>",
        "id": 176961366,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869259
    },
    {
        "content": "<p>but for sequential overhead, I think the real next steps are to identify cases we think are too high and just profile/optimize them?</p>",
        "id": 176961448,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869292
    },
    {
        "content": "<p>Maybe <span class=\"user-mention\" data-user-id=\"120989\">@nnethercote</span> might be \"nerd-swipable\" to help with this kind of optimization effort :)</p>",
        "id": 176961478,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869318
    },
    {
        "content": "<p>I though we were largely only worried about that for shipping off-by-default-but-possible-to-enable parallel support?</p>",
        "id": 176961493,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869331
    },
    {
        "content": "<p>in that we expect parallelism to easily regain any sequential regressions</p>",
        "id": 176961519,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869347
    },
    {
        "content": "<p>Well, wouldn't you like to do that? =)</p>",
        "id": 176961521,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869348
    },
    {
        "content": "<p>I would...</p>",
        "id": 176961523,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869349
    },
    {
        "content": "<p>But also I'm not sure that's true</p>",
        "id": 176961530,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869352
    },
    {
        "content": "<p>lol true</p>",
        "id": 176961534,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869353
    },
    {
        "content": "<p>I mean if you have a big crate graph</p>",
        "id": 176961540,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869356
    },
    {
        "content": "<p>ah I see what you mean</p>",
        "id": 176961552,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869368
    },
    {
        "content": "<p>if you don't actually have parallelism at one point what's the slowdown</p>",
        "id": 176961564,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869378
    },
    {
        "content": "<p>Right, it'll definitely eat away at any wins</p>",
        "id": 176961590,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869393
    },
    {
        "content": "<p>I sort of thought we had concluded that the timings were \"pretty good\" but then <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> seemed to have concerns</p>",
        "id": 176961667,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869419
    },
    {
        "content": "<p>I haven't reviewed the latest measurements, though</p>",
        "id": 176961678,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869426
    },
    {
        "content": "<p>although given the cpu usage graphs I've seen it probably won't eat <em>that</em> much, but I do agree we should have a baseline understanding of what the expected regression is</p>",
        "id": 176961679,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869426
    },
    {
        "content": "<p>I would say that to start off we should just be confident is \"what is the perf of <code>-j1</code> rustc\"</p>",
        "id": 176961716,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869450
    },
    {
        "content": "<p>and we can evaluate from there about whether optimization is necessary</p>",
        "id": 176961721,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869457
    },
    {
        "content": "<p>I am wondering if it makes sense to pick 3-5 \"real-world\" crates and try to use them as our benchmarks?</p>",
        "id": 176961778,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869493
    },
    {
        "content": "<p>I think we need to determine exactly what we want to collect data on and recollect (both because things have changed -- e.g. pipelining) and because it is not clear that the data I collected was what we wanted to</p>",
        "id": 176961782,
        "sender_full_name": "simulacrum",
        "timestamp": 1569869496
    },
    {
        "content": "<p>This has always been hard for us :)</p>",
        "id": 176961785,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869499
    },
    {
        "content": "<p>really I mean more than <em>crates</em></p>",
        "id": 176961849,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869525
    },
    {
        "content": "<p>oh I'm assuming we run the current perf suite at <code>-j1</code></p>",
        "id": 176961852,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869527
    },
    {
        "content": "<p>I mean like \"scenarios\"</p>",
        "id": 176961856,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869529
    },
    {
        "content": "<p>(but \"enable parallel support\")</p>",
        "id": 176961864,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869533
    },
    {
        "content": "<p>Yes, we should do that too</p>",
        "id": 176961868,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869537
    },
    {
        "content": "<p>and that's a good enough test for what the expected regression would be</p>",
        "id": 176961869,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869538
    },
    {
        "content": "<p>well anyway start with that</p>",
        "id": 176961895,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869556
    },
    {
        "content": "<p><code>-j1</code> has the unfortunate problem of limiting parallel codegen which is terrible</p>",
        "id": 176961897,
        "sender_full_name": "simulacrum",
        "timestamp": 1569869557
    },
    {
        "content": "<p>we had some metric before like a \"% threshold\" and an \"ms threshold\"</p>",
        "id": 176961905,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869566
    },
    {
        "content": "<p>but I can imagine some workaround for that? Presuming we want one.</p>",
        "id": 176961910,
        "sender_full_name": "simulacrum",
        "timestamp": 1569869570
    },
    {
        "content": "<p>we could only look at the \"check\" benchmarks, but <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> I think it's probably fine to just look at the numbers and evaluate from there</p>",
        "id": 176961978,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869619
    },
    {
        "content": "<p>another concern I remember being raised was bootstrap time</p>",
        "id": 176961997,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869631
    },
    {
        "content": "<p>any number throw out is probably just a gut feeling for now so it seems fine to develop the gut feeling after we have data</p>",
        "id": 176961998,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869631
    },
    {
        "content": "<p>yes I agree</p>",
        "id": 176962006,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869641
    },
    {
        "content": "<blockquote>\n<p>although given the cpu usage graphs I've seen it probably won't eat <em>that</em> much, but I do agree we should have a baseline understanding of what the expected regression is</p>\n</blockquote>\n<p>are there some graphs or benchmarks that were already ran?</p>",
        "id": 176962053,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1569869648
    },
    {
        "content": "<p>I just think it'd be useful for us to start collecting some good set of benchmarks we want to focus on; let's just start with a perf run in any case</p>",
        "id": 176962069,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869666
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> oh I'm thinking of whole crate graph builds using Cargo's new <code>-Z timings</code> flag which shows cpu usage and compile time information</p>",
        "id": 176962078,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869675
    },
    {
        "content": "<p>I can take on getting a try build with parallel enabled and running perf on that</p>",
        "id": 176962087,
        "sender_full_name": "simulacrum",
        "timestamp": 1569869684
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> oh true, yeah, so I definitely agree on that</p>",
        "id": 176962114,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869703
    },
    {
        "content": "<p>do you think we should list those off here?</p>",
        "id": 176962126,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869709
    },
    {
        "content": "<p>I don't know that we have to do it \"live\" right now, but maybe leave notes in the hackmd doc?</p>",
        "id": 176962150,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869729
    },
    {
        "content": "<p><a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit\">hackmd doc</a></p>",
        "id": 176962161,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869736
    },
    {
        "content": "<blockquote>\n<p>I just think it'd be useful for us to start collecting some good set of benchmarks we want to focus on; let's just start with a perf run in any case</p>\n</blockquote>\n<p>one thing in particular: I don't want to get to the point where we are trying to announce things without us being able to say \"here are some awesome graphs to look at!\"</p>",
        "id": 176962253,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869784
    },
    {
        "content": "<p>for sure</p>",
        "id": 176962277,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569869800
    },
    {
        "content": "<p>I think we'll all feel better if we're like \"we're not gonna ship until <code>cargo check</code> on regex is 2x\" or something</p>",
        "id": 176962278,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869800
    },
    {
        "content": "<p>if we have to adjust later, fine</p>",
        "id": 176962295,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869814
    },
    {
        "content": "<p>tentatively fearless concurrency</p>",
        "id": 176962327,
        "sender_full_name": "cuviper",
        "timestamp": 1569869846
    },
    {
        "content": "<p>(sorry)</p>",
        "id": 176962330,
        "sender_full_name": "cuviper",
        "timestamp": 1569869849
    },
    {
        "content": "<p>ok we're 57 minutes in</p>",
        "id": 176962334,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869851
    },
    {
        "content": "<p>I'm going to try to type in some \"next steps\" in a separate section of the doc and see if we can put this together</p>",
        "id": 176962507,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569869948
    },
    {
        "content": "<p>this is what I wrote</p>\n<ul>\n<li>\n<p>measure performance<br>\n    * initial focus: seq overhead</p>\n</li>\n<li>\n<p>user involvement: start getting people using it<br>\n    * create instructions on how to use alt builds for correctness checking<br>\n        * or to roll your own build for perf testing<br>\n    * how to gather data, where to submit</p>\n</li>\n<li>\n<p>audit and document fine-grained locking</p>\n</li>\n<li>meetings with the \"explain, discuss, document\" format<br>\n    * parallel code-gen: how does it work, can it be unified?<br>\n    * rayon fork features<br>\n    * jobserver integration<br>\n    * major sources of shared state</li>\n</ul>",
        "id": 176962814,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870123
    },
    {
        "content": "<p>curse you zulip, no nested lists?</p>",
        "id": 176962866,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870136
    },
    {
        "content": "<p>first they took my <code>-</code> (edit: admittedly, I'm getting vaguely used to <code>*</code>)</p>",
        "id": 176962872,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870139
    },
    {
        "content": "<p>/me grumbles</p>",
        "id": 176962884,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870146
    },
    {
        "content": "<p>that sounds like a great start yeah, although I do think we want more confidence in the current implementation before we get \"random rust users\" involved</p>",
        "id": 176962905,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870164
    },
    {
        "content": "<p>agreed, I should move that down the list</p>",
        "id": 176962919,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870172
    },
    {
        "content": "<p>it seems reasonably low in priority</p>",
        "id": 176962922,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870175
    },
    {
        "content": "<p>I will replace it with something else though, we should get alt builds so <em>we</em> can test easily</p>",
        "id": 176962948,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870192
    },
    {
        "content": "<p>I was <em>just</em> going  to say that...</p>",
        "id": 176962969,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870205
    },
    {
        "content": "<p>so <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> on the topic of audits:</p>\n<p>I think what would make sense is to setup a standing time to move through things, and try to spin out tasks. I think it probably makes sense for this to be reasonably experienced folks.</p>",
        "id": 176963003,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870231
    },
    {
        "content": "<p>(since I tabled when you asked that question before)</p>",
        "id": 176963013,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870239
    },
    {
        "content": "<p>maybe we can spin that out into a distinct topic, but I think I'd be happy to try to add an hour on my calendar for that if we could find a good one</p>",
        "id": 176963071,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870253
    },
    {
        "content": "<p>So we think something like \"Zoom call every monday\" so to speak and 2-3 of us spend an hour trying to audit and then document findings (maybe by just recording zoom output?)</p>",
        "id": 176963116,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870287
    },
    {
        "content": "<p>unlike the last time we did it, I think we'd just try to <em>go deep</em> into each particular item, coming up with a final design and/or things to document</p>",
        "id": 176963120,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870293
    },
    {
        "content": "<blockquote>\n<p>So we think something like \"Zoom call every monday\" so to speak and 2-3 of us spend an hour trying to audit and then document findings (maybe by just recording zoom output?)</p>\n</blockquote>\n<p>yep, this</p>",
        "id": 176963127,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870299
    },
    {
        "content": "<p>I'd hope afterwards that we volunteer someone to try and polish up the results</p>",
        "id": 176963145,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870314
    },
    {
        "content": "<p>but yeah</p>",
        "id": 176963153,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870320
    },
    {
        "content": "<p>I think the zoom calls alone are better docs than we often have :P</p>",
        "id": 176963159,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870327
    },
    {
        "content": "<p>we should get a better list than my <code>rg 'Lock&lt;' src/librust*</code></p>",
        "id": 176963176,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870344
    },
    {
        "content": "<p>I am personally up for getting that list put together -- maybe we should try to pencil in a meeting slot this week or next to trial it out, though.</p>",
        "id": 176963232,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870368
    },
    {
        "content": "<p>yep.</p>",
        "id": 176963247,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870379
    },
    {
        "content": "<p>(Should I put a Doodle together?)</p>",
        "id": 176963316,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870441
    },
    {
        "content": "<p>/me sighs</p>",
        "id": 176963402,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870489
    },
    {
        "content": "<p>yeah, I guess so</p>",
        "id": 176963405,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870492
    },
    {
        "content": "<p>:)</p>",
        "id": 176963408,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870496
    },
    {
        "content": "<p>alternatively we could use this time?</p>",
        "id": 176963415,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870502
    },
    {
        "content": "<p>if it still works for folks?</p>",
        "id": 176963421,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870506
    },
    {
        "content": "<p>yeah, I could do this time</p>",
        "id": 176963436,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870538
    },
    {
        "content": "<p>I could too. Certainly gives enough time to make some headway on a list of things for us to dig into</p>",
        "id": 176963465,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870565
    },
    {
        "content": "<p>do we want to try and do something this week, or wait until next week?</p>",
        "id": 176963484,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870583
    },
    {
        "content": "<p>I'm ok either way</p>",
        "id": 176963486,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870587
    },
    {
        "content": "<p>proabbly we start with the audits and try that out before attempting the \"explain/discuss/document\" on bigger questions?</p>",
        "id": 176963537,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870603
    },
    {
        "content": "<p>I don't want to get too overly ambitious</p>",
        "id": 176963556,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870608
    },
    {
        "content": "<p>it sounds like we should tackle the \"rayon or not\" problem earliest perhaps?</p>",
        "id": 176963613,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870652
    },
    {
        "content": "<p>that may help inform what sort of shared state we need at all?</p>",
        "id": 176963619,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870659
    },
    {
        "content": "<p>like basically finalizing how we want concurrency to look like at all will inform quite a few other decisions</p>",
        "id": 176963652,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870688
    },
    {
        "content": "<p>hm, I think we definitely have some shared state in e.g. Session which is shared no matter what</p>",
        "id": 176963671,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870710
    },
    {
        "content": "<p>but maybe not too interesting, too</p>",
        "id": 176963683,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870718
    },
    {
        "content": "<p>Regardless of rayon or not -- I think that just means less / more work to do something like this, right?</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"n\">functions</span><span class=\"p\">.</span><span class=\"n\">par_iter</span><span class=\"p\">().</span><span class=\"n\">for_each</span><span class=\"p\">(</span><span class=\"o\">|</span><span class=\"n\">function</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">tcx</span><span class=\"p\">.</span><span class=\"n\">typeck</span><span class=\"p\">(</span><span class=\"n\">function</span><span class=\"p\">));</span><span class=\"w\"></span>\n</pre></div>",
        "id": 176963803,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870769
    },
    {
        "content": "<blockquote>\n<p>it sounds like we should tackle the \"rayon or not\" problem earliest perhaps?</p>\n</blockquote>\n<p>that's a good choic</p>",
        "id": 176963811,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870775
    },
    {
        "content": "<p>oh sure, but I'm basically saying that where we apply parallelism feels like a more core decision than what shared state we have</p>",
        "id": 176963814,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870776
    },
    {
        "content": "<p>what I'm wondering is</p>",
        "id": 176963819,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870780
    },
    {
        "content": "<p>do we want to do <em>separate</em> meetings on those</p>",
        "id": 176963834,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870786
    },
    {
        "content": "<p>or try to re-use that same slot</p>",
        "id": 176963836,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870789
    },
    {
        "content": "<p>I'm inclined to the former I guess</p>",
        "id": 176963849,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870797
    },
    {
        "content": "<p>oh sorry, misunderstood</p>",
        "id": 176963865,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1569870807
    },
    {
        "content": "<p>we could start not by an audit but by one of the questions</p>",
        "id": 176963890,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870833
    },
    {
        "content": "<p>also, I should go look at that old list of \"things to document\" and see if I'm missing anything</p>",
        "id": 176963952,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870847
    },
    {
        "content": "<p>but overall I'm pretty happy with this plan</p>",
        "id": 176963967,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870858
    },
    {
        "content": "<p>and I kind of think a weekly slot to either audit or discuss some aspect of design or deep dive into whatever else seems relevant that week is good</p>",
        "id": 176964016,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870897
    },
    {
        "content": "<p>So we'd perhaps have the meeting this time next week (or maybe something this week, to sort of get things moving?) with a goal of tackling one of the things to document quetions?</p>",
        "id": 176964029,
        "sender_full_name": "simulacrum",
        "timestamp": 1569870903
    },
    {
        "content": "<p>I am debating what to do first, but yes -- that or audit. I could go either way.</p>",
        "id": 176964098,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569870959
    },
    {
        "content": "<p>if we were to do this week, I'd favor Thu at 1pm eastern :)</p>",
        "id": 176964278,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871050
    },
    {
        "content": "<p>hm, do we have a link to the questions doc handy?</p>",
        "id": 176964279,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871050
    },
    {
        "content": "<p><a href=\"https://hackmd.io/XDC24IlWT4OIxYdmIxH4Xg\" target=\"_blank\" title=\"https://hackmd.io/XDC24IlWT4OIxYdmIxH4Xg\">Parallel documentation questions</a> -- fixed</p>",
        "id": 176964294,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871065
    },
    {
        "content": "<p>looks like we covered a lot of them</p>",
        "id": 176964386,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871119
    },
    {
        "content": "<p>I can't do 1pm ET on Thursday (another meeting) unfortunately -- 1:30 would work though.</p>\n<p>I guess maybe easiest is to just wait till Monday next week</p>",
        "id": 176964544,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871228
    },
    {
        "content": "<p>since we all seem free</p>",
        "id": 176964552,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871234
    },
    {
        "content": "<p>yeah, seems ok.</p>",
        "id": 176964569,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871247
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> you'll work on the perf run tho?</p>",
        "id": 176964575,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871253
    },
    {
        "content": "<p>yeah, I can get that done -- at least the basic bit of \"just perf.rlo\"</p>",
        "id": 176964592,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871267
    },
    {
        "content": "<p>the scenarios on the doc are possibly a bit harder but should be feasible as well, plus, we have -Ztiming now on Cargo which is great</p>",
        "id": 176964616,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871295
    },
    {
        "content": "<p>Maybe next week we spend ~5 minutes of the meeting on Zoom discussing what we think is best for the meeting depending on perf results</p>",
        "id": 176964697,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871358
    },
    {
        "content": "<p>e.g. if things are mostly looking good then I think audit makes more sense</p>",
        "id": 176964701,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871365
    },
    {
        "content": "<p>but if things are looking pretty not great, then it might make sense to looking into jobserver (since that's probably \"easiest\"/\"biggest\" wins) first</p>",
        "id": 176964727,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871389
    },
    {
        "content": "<p>ideally a bit before, but that sounds good</p>",
        "id": 176964780,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871443
    },
    {
        "content": "<p>Note that incremental is expected to be slower. I have some PRs open which will help there.</p>",
        "id": 176964817,
        "sender_full_name": "Zoxc",
        "timestamp": 1569871450
    },
    {
        "content": "<p>( i.e., I'd prefer to know before hand is we're going to discuss jobserver )</p>",
        "id": 176964823,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871453
    },
    {
        "content": "<p>So agenda for myself is :</p>\n<ul>\n<li>get perf runs done for scenarios in doc</li>\n<li>get at least 1-2 \"audit\" tasks ready to go<ul>\n<li>envisioning basically a list of use sites with links and such to start</li>\n</ul>\n</li>\n</ul>",
        "id": 176964848,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871476
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> ps I think that if you have PRs that are blocked on landing because they do a lot of things, and you can make the meeting, I'd like to use it to talk over what the PR does</p>",
        "id": 176964852,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871483
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> it seems like the <code>librustc_data_structures::sync</code> imports are probably a good start too?</p>",
        "id": 176964889,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871506
    },
    {
        "content": "<p>anyway that sounds great</p>",
        "id": 176964895,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871509
    },
    {
        "content": "<p>I could also imagine starting to <em>do</em> audits or attempt simpler refactorings, if you're feeling bored, as there are bound to be \"easy\" cases, and we can reserve the more complex cases ...</p>",
        "id": 176964938,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871539
    },
    {
        "content": "<p>Ah, yes, we could talk through the primitives but that seems not as useful</p>",
        "id": 176964939,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871541
    },
    {
        "content": "<p>no I meant</p>",
        "id": 176964959,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871557
    },
    {
        "content": "<p>searching for imports/uses to \"seed\"  the audit process</p>",
        "id": 176965010,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1569871566
    },
    {
        "content": "<p>Sure -- I was intending to just grep for <code>Lock&lt;</code> as you did, but that works too. </p>\n<p>I might attempt some audits/refactorings, though I think particularly for the audit bit it'll be good to have some meeting to base what the results of such an audit should be on</p>",
        "id": 176965101,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871625
    },
    {
        "content": "<p>the use sites being \"get a lock field and figure out what uses it\"</p>",
        "id": 176965134,
        "sender_full_name": "simulacrum",
        "timestamp": 1569871653
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> <a href=\"https://github.com/rust-lang/rust/pull/61845\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/61845\">https://github.com/rust-lang/rust/pull/61845</a> does only 3 things =P<br>\nThe first thing is split into it's own PR - <a href=\"https://github.com/rust-lang/rust/pull/63756\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/63756\">https://github.com/rust-lang/rust/pull/63756</a> , which I think @mw basically approved?</p>",
        "id": 176965784,
        "sender_full_name": "Zoxc",
        "timestamp": 1569872086
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> you requested to be added to <code>@WG-parallel-rustc</code>, just did so. Also added Niko and Alex, so it's easier to ping everyone by using the group, if someone don't want to be there it's easy to remove yourself from settings :)</p>",
        "id": 177174577,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570038487
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> could you create a compiler team invite recurring for mondays and populate the zoom link and such?</p>",
        "id": 177208656,
        "sender_full_name": "simulacrum",
        "timestamp": 1570067710
    },
    {
        "content": "<p>yes</p>",
        "id": 177243616,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570109268
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> I'll take a look at <a href=\"https://github.com/rust-lang/rust/issues/63756\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/63756\">#63756</a> -- the description sounds simple enough, at least.</p>",
        "id": 177243779,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570109371
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> what's the best way to catch up with what you've done?</p>",
        "id": 177257179,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117416
    },
    {
        "content": "<p>saw that you were doing some stuff and wanted to catch up with that</p>",
        "id": 177257196,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117429
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 177257341,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117533
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> wrong channel/stream perhaps?</p>",
        "id": 177257447,
        "sender_full_name": "simulacrum",
        "timestamp": 1570117589
    },
    {
        "content": "<p>well I wasn't talking specifically about the planning per se, I was talking in general about the things we planned on parallel</p>",
        "id": 177257618,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117689
    },
    {
        "content": "<p>saw that you ran benches</p>",
        "id": 177257629,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117697
    },
    {
        "content": "<p>and were doing a bunch of cool stuff</p>",
        "id": 177257639,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117706
    },
    {
        "content": "<p>(You just linked to bisect so was confused)</p>",
        "id": 177257640,
        "sender_full_name": "simulacrum",
        "timestamp": 1570117706
    },
    {
        "content": "<p>ohh</p>",
        "id": 177257656,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117721
    },
    {
        "content": "<p>that was for the other thread</p>",
        "id": 177257664,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570117728
    },
    {
        "content": "<p>okay yeah I can give an update on what I've done for parallel so far</p>",
        "id": 177257688,
        "sender_full_name": "simulacrum",
        "timestamp": 1570117749
    },
    {
        "content": "<ul>\n<li>Some general work on trying to get locks out of the compiler (I think the major thing that's landed is <a href=\"https://github.com/rust-lang/rust/pull/64272\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/64272\">https://github.com/rust-lang/rust/pull/64272</a> here)</li>\n<li>Currently working on parallel compiler performance collection.<ul>\n<li>we have sort of \"overhead\" measurement for single-crate here: <a href=\"https://perf.rust-lang.org/compare.html?start=702b45e409495a41afcccbe87a251a692b0cefab&amp;end=dc78b8ba143915e07375e9d7f05838222cb1db3e&amp;stat=wall-time\" target=\"_blank\" title=\"https://perf.rust-lang.org/compare.html?start=702b45e409495a41afcccbe87a251a692b0cefab&amp;end=dc78b8ba143915e07375e9d7f05838222cb1db3e&amp;stat=wall-time\">Detailed results</a></li>\n<li>I'm working on collecting timing data for whole crate graphs via just cargo -Ztimings, nearly done with this</li>\n<li>an open question is how to show this data (a bunch of links to html files? what would be good summary data?)</li>\n</ul>\n</li>\n</ul>",
        "id": 177257948,
        "sender_full_name": "simulacrum",
        "timestamp": 1570117929
    },
    {
        "content": "<p>we also will have <a href=\"https://github.com/rust-lang/rust/commit/f0b7b0a9327d3b43aa45a89e90d9785a06059b5a\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/commit/f0b7b0a9327d3b43aa45a89e90d9785a06059b5a\">https://github.com/rust-lang/rust/commit/f0b7b0a9327d3b43aa45a89e90d9785a06059b5a</a> which is a -Zthreads=(num_virtual_cpus) run on perf</p>",
        "id": 177258043,
        "sender_full_name": "simulacrum",
        "timestamp": 1570118014
    },
    {
        "content": "<p>and I plan on putting several hours at least into getting some initial audit reports put together for us to possibly dig into on Monday</p>",
        "id": 177258100,
        "sender_full_name": "simulacrum",
        "timestamp": 1570118043
    },
    {
        "content": "<p>I'm not entirely sure what those will look like quite yet though</p>",
        "id": 177258144,
        "sender_full_name": "simulacrum",
        "timestamp": 1570118076
    },
    {
        "content": "<p>okay performance collection on my end is mostly done, still need to wait for a couple of perf.rlo builds but that's mostly just a waiting game</p>",
        "id": 177271348,
        "sender_full_name": "simulacrum",
        "timestamp": 1570126502
    },
    {
        "content": "<p>Tomorrow I plan to try and dig in and establish an agenda for monday's triage/audit session</p>",
        "id": 177305855,
        "sender_full_name": "simulacrum",
        "timestamp": 1570156348
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span>  write up of potential audit topic for monday: <a href=\"https://hackmd.io/@simulacrum/HJv68ZHuH\" target=\"_blank\" title=\"https://hackmd.io/@simulacrum/HJv68ZHuH\">https://hackmd.io/@simulacrum/HJv68ZHuH</a></p>\n<p>I plan to put together a few more of these, though maybe with less detail, over the weekend</p>",
        "id": 177370635,
        "sender_full_name": "simulacrum",
        "timestamp": 1570216715
    },
    {
        "content": "<p>ok -- another good one might be the dep-graph code being modified in <a href=\"https://github.com/rust-lang/rust/pull/63756\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/63756\">https://github.com/rust-lang/rust/pull/63756</a></p>",
        "id": 177371780,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570217576
    },
    {
        "content": "<p>okay, I might try and write something up</p>",
        "id": 177372097,
        "sender_full_name": "simulacrum",
        "timestamp": 1570217803
    },
    {
        "content": "<p>that does sound like a good target</p>",
        "id": 177372104,
        "sender_full_name": "simulacrum",
        "timestamp": 1570217810
    },
    {
        "content": "<p>hey all, we'll meet today?</p>",
        "id": 177543471,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570470882
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 177543547,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570470939
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span> <span aria-label=\"point up\" class=\"emoji emoji-1f446\" role=\"img\" title=\"point up\">:point_up:</span></p>",
        "id": 177543634,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570470980
    },
    {
        "content": "<p>I'm not sure <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> if you had thoughts on what to discuss in detail</p>",
        "id": 177543647,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570470996
    },
    {
        "content": "<p>we tossed out a few options looks like</p>",
        "id": 177543657,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570471004
    },
    {
        "content": "<p>yeah I was thinking we could take the first couple minutes</p>",
        "id": 177543665,
        "sender_full_name": "simulacrum",
        "timestamp": 1570471013
    },
    {
        "content": "<p>I'm about to hop on Zoom if you want to prediscuss</p>",
        "id": 177543681,
        "sender_full_name": "simulacrum",
        "timestamp": 1570471024
    },
    {
        "content": "<p>yep ok</p>",
        "id": 177543691,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570471029
    },
    {
        "content": "<p><a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA\">https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA</a></p>",
        "id": 177543762,
        "sender_full_name": "simulacrum",
        "timestamp": 1570471081
    },
    {
        "content": "<p><a href=\"https://hackmd.io/@simulacrum/r1jsI5U_r\" target=\"_blank\" title=\"https://hackmd.io/@simulacrum/r1jsI5U_r\">https://hackmd.io/@simulacrum/r1jsI5U_r</a></p>",
        "id": 177544128,
        "sender_full_name": "simulacrum",
        "timestamp": 1570471308
    },
    {
        "content": "<p>Hey sorry wasn't able to make it today, forgot to mention earlier too</p>",
        "id": 177551448,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1570476557
    },
    {
        "content": "<p>I'll review materials later today and respond to stuff</p>",
        "id": 177551464,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1570476570
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> np -- but for next time, we asked if <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> can do a bit of digging into our current jobserver setup, and maybe ping you with questions</p>",
        "id": 177551617,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570476672
    },
    {
        "content": "<p><a href=\"https://youtu.be/VtsaiTiAjz8\" target=\"_blank\" title=\"https://youtu.be/VtsaiTiAjz8\">Video uploading to youtube now</a></p>\n<div class=\"youtube-video message_inline_image\"><a data-id=\"VtsaiTiAjz8\" href=\"https://youtu.be/VtsaiTiAjz8\" target=\"_blank\" title=\"https://youtu.be/VtsaiTiAjz8\"><img src=\"https://i.ytimg.com/vi/VtsaiTiAjz8/default.jpg\"></a></div>",
        "id": 177553208,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570477713
    },
    {
        "content": "<p>Hey <span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span>, can we maybe change the meeting time? I'd be good with either an hour earlier or later, or perhaps the same time (2pm Eastern) but on wednesday</p>",
        "id": 177721979,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570633164
    },
    {
        "content": "<p>I'm fine with all the options better if it's not wednesday that time though</p>",
        "id": 177722099,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570633237
    },
    {
        "content": "<p>Hour later on Monday would work even better for me, earlier isn't ideal. Wednesday is probably not great either, though I could perhaps make it work.</p>",
        "id": 177722481,
        "sender_full_name": "simulacrum",
        "timestamp": 1570633465
    },
    {
        "content": "<p>ok let's go to 3pm Eastern on wed?</p>",
        "id": 177723983,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570634287
    },
    {
        "content": "<p>Isn't 3pm the project sync?</p>",
        "id": 177724249,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1570634434
    },
    {
        "content": "<p>I'm open all Monday though</p>",
        "id": 177724289,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1570634469
    },
    {
        "content": "<blockquote>\n<p>ok let's go to 3pm Eastern on wed?</p>\n</blockquote>\n<p>oops I meant to say \"on monday\"</p>",
        "id": 177724336,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570634503
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> to 3pm on monday</p>",
        "id": 177724480,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1570634570
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span> too</p>",
        "id": 177724934,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1570634785
    },
    {
        "content": "<p>adjusted calendar entry</p>",
        "id": 177725146,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1570634909
    },
    {
        "content": "<p>Hey sorry I won't be able to make today's meeting either, I really do want to help out though! I'll be around for the rest of the week for follow ups (unlike last week)</p>",
        "id": 178123115,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571075149
    },
    {
        "content": "<p>sorry, I have to miss today too</p>",
        "id": 178125054,
        "sender_full_name": "cuviper",
        "timestamp": 1571076705
    },
    {
        "content": "<p>Hmm</p>",
        "id": 178128525,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571079318
    },
    {
        "content": "<p>maybe we shoudl cancel this week</p>",
        "id": 178128528,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571079321
    },
    {
        "content": "<p>I'm dealing with various things right now</p>",
        "id": 178128533,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571079326
    },
    {
        "content": "<p>Not sure <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> or <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> what you're up to today?</p>",
        "id": 178128567,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571079355
    },
    {
        "content": "<p>I am free, but we can cancel; I think we don't have too much to discuss</p>",
        "id": 178128620,
        "sender_full_name": "simulacrum",
        "timestamp": 1571079374
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 178128637,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1571079390
    },
    {
        "content": "<p>I believe the main thing is <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span>'s doc but that can probably wait a week and would be good to get input from multiple people on I think</p>",
        "id": 178128654,
        "sender_full_name": "simulacrum",
        "timestamp": 1571079402
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> let's cancel then</p>",
        "id": 178129044,
        "sender_full_name": "simulacrum",
        "timestamp": 1571079677
    },
    {
        "content": "<p>OK</p>",
        "id": 178129065,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571079692
    },
    {
        "content": "<p>HEy <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> are you around by any chance?</p>",
        "id": 178509956,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432031
    },
    {
        "content": "<p>Yeah, sort of - definitely in ~5 minutes</p>",
        "id": 178510036,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432072
    },
    {
        "content": "<p>About to get in an elevator</p>",
        "id": 178510043,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432079
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> and I are sitting here at RBR and we were just looking over his doc. My impression from random ripgrep'ing around is that there aren't all <em>that</em> many locks to look through</p>",
        "id": 178510046,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432084
    },
    {
        "content": "<p>Yes, this matches my view.</p>",
        "id": 178510078,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432143
    },
    {
        "content": "<p>I was thinking that some \"juicy\" topics for discussion might be:</p>\n<ul>\n<li>looking over session and see if there are things we can remove or better encapsulate (lots of public locks there)</li>\n<li>looking over the <code>CrateMetadata</code> type which has random public fields and locks (but maybe <span class=\"user-mention\" data-user-id=\"123856\">@Vadim Petrochenkov</span>'s PR does something here?)</li>\n<li>discussing how the parallel LLVM stuff works today and how jobserver integration works</li>\n<li>reviewing how the query locks work</li>\n</ul>\n<p>As an aside, one thing I was saying to him is that, in my mind, the value of this work is not necessarily finding bugs (I don't really expect that many) but rather (a) improving confidence, (b) finding a list of things to refactor, and (c) increasing the bus factor on the code generally =)</p>",
        "id": 178510161,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432213
    },
    {
        "content": "<p>anyway I am basically wondering if we want to pick one of those for monday meeting and -- if so -- what prep we want to do</p>",
        "id": 178510179,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432234
    },
    {
        "content": "<p>seems good to decide now-ish :)</p>",
        "id": 178510181,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432237
    },
    {
        "content": "<p>I would personally lean towards parallel LLVM stuff -- I think Session, CrateMetadata, etc. are good topics but have less \"lead time\" needed</p>",
        "id": 178510286,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432325
    },
    {
        "content": "<p>but we would need to make sure <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> and maybe <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span>  can make it I think for that</p>",
        "id": 178510312,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432350
    },
    {
        "content": "<p>I agree</p>",
        "id": 178510319,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432364
    },
    {
        "content": "<p>That's the most \"juicy\" area I think</p>",
        "id": 178510320,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432367
    },
    {
        "content": "<p>I am uncertain _what_ there is to discuss, beyond just scoping out what we do today, though. In some sense I think this area is perhaps the most ripe for improvements but in conversation with Alex my impression was that it's also essentially blocked on parallel-by-default</p>",
        "id": 178510392,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432418
    },
    {
        "content": "<p>well, I at least would enjoy learning more about <em>how</em> it even works today :)</p>",
        "id": 178510399,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432437
    },
    {
        "content": "<p>just plain old \"knowledge transfer\"...</p>",
        "id": 178510408,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432451
    },
    {
        "content": "<p>I don't quite understand, for example, why it would be blocked on par by default?</p>",
        "id": 178510426,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432477
    },
    {
        "content": "<p>anyway, we're getting kicked out of this room so I'm going to go :)</p>",
        "id": 178510437,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571432488
    },
    {
        "content": "<p>okay -- I think that topic is a good fit for monday though</p>",
        "id": 178510443,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432501
    },
    {
        "content": "<p>and if Alex isn't around we can easily fallback on diving into session or so</p>",
        "id": 178510453,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432515
    },
    {
        "content": "<p>that seems 'not hard'</p>",
        "id": 178510454,
        "sender_full_name": "simulacrum",
        "timestamp": 1571432518
    },
    {
        "content": "<p>I'd be down for preparing some notes about how llvm/codegen works in parallel by monday</p>",
        "id": 178510632,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571432680
    },
    {
        "content": "<p>I should be around on monday for sure this time too!</p>",
        "id": 178510639,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571432694
    },
    {
        "content": "<blockquote>\n<p>CrateMetadata type which has random public fields and locks (but maybe @Vadim Petrochenkov's PR does something here?)</p>\n</blockquote>\n<p>The crate store PR doesn't do anything there.<br>\n<a href=\"https://github.com/rust-lang/rust/issues/65026\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/65026\">#65026</a> and <a href=\"https://github.com/rust-lang/rust/issues/65170\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/65170\">#65170</a> removed some fields from <code>CrateMetadata</code> and documented the remaining ones, nothing lock-related though.</p>",
        "id": 178511345,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1571433473
    },
    {
        "content": "<blockquote>\n<p>CrateMetadata type which has random public fields and locks</p>\n</blockquote>\n<p>cc <a href=\"https://github.com/rust-lang/rust/pull/65625#issuecomment-544256417\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/65625#issuecomment-544256417\">https://github.com/rust-lang/rust/pull/65625#issuecomment-544256417</a></p>",
        "id": 178595304,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1571581408
    },
    {
        "content": "<blockquote>\n<p>I'd be down for preparing some notes about how llvm/codegen works in parallel by monday</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> did you get a chance to prepare these notes? I'd like to look over and maybe come up with some questions</p>",
        "id": 178660795,
        "sender_full_name": "simulacrum",
        "timestamp": 1571668410
    },
    {
        "content": "<p>if not that's fine, we can fallback to <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span>'s work on the sync module I think :)</p>",
        "id": 178660880,
        "sender_full_name": "simulacrum",
        "timestamp": 1571668448
    },
    {
        "content": "<p>oh heh sure</p>",
        "id": 178662233,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571669290
    },
    {
        "content": "<p>let me write up some notes</p>",
        "id": 178662236,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571669294
    },
    {
        "content": "<p>I'll start writing some notes at <a href=\"https://hackmd.io/DnuWl7-PRb6t15GBduGLZw\" target=\"_blank\" title=\"https://hackmd.io/DnuWl7-PRb6t15GBduGLZw\">https://hackmd.io/DnuWl7-PRb6t15GBduGLZw</a></p>",
        "id": 178662257,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571669328
    },
    {
        "content": "<p>Thanks!</p>",
        "id": 178663627,
        "sender_full_name": "simulacrum",
        "timestamp": 1571670155
    },
    {
        "content": "<p>I've added that link to the main planning doc (<a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit\">https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA?edit</a>)</p>",
        "id": 178663646,
        "sender_full_name": "simulacrum",
        "timestamp": 1571670168
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span>  Step 1 is a bit parallel already</p>",
        "id": 178664109,
        "sender_full_name": "Zoxc",
        "timestamp": 1571670411
    },
    {
        "content": "<p>I also have a branch which makes translation to LLVM parallel. It is quite messy though and a simple parallel loop over CGUs would be much simpler. It does however allow us to use more threads for LLVM optimization. This seems like a useful property since LLVM optimization will scale to higher thread counts than the rest of the compiler. This would only help high core count CPUs and a distributed rustc would perhaps even things out a bit.</p>",
        "id": 178665472,
        "sender_full_name": "Zoxc",
        "timestamp": 1571671183
    },
    {
        "content": "<p>Is there a simpler scheme that would allow us to scale LLVM optimization to more threads than we have in the Rayon thread-pool?<br>\nI guess we could spawn another thread-pool and just have a global list of CGUs, we inject a job which just steals from this list unit complete?</p>",
        "id": 178665815,
        "sender_full_name": "Zoxc",
        "timestamp": 1571671437
    },
    {
        "content": "<p>ok I've finished writing up the doc  -- <a href=\"https://hackmd.io/DnuWl7-PRb6t15GBduGLZw\" target=\"_blank\" title=\"https://hackmd.io/DnuWl7-PRb6t15GBduGLZw\">https://hackmd.io/DnuWl7-PRb6t15GBduGLZw</a></p>",
        "id": 178666998,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571672182
    },
    {
        "content": "<p>it may have a bunch of info that's either already known or not of interest to this gropu though</p>",
        "id": 178667013,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571672196
    },
    {
        "content": "<p>thanks! I'll take a look in a bit.</p>",
        "id": 178675521,
        "sender_full_name": "simulacrum",
        "timestamp": 1571677509
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> meeting?</p>",
        "id": 178686968,
        "sender_full_name": "simulacrum",
        "timestamp": 1571684623
    },
    {
        "content": "<p>er my bad</p>",
        "id": 178686978,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1571684630
    },
    {
        "content": "<p>462 096 851 is the zoom code</p>",
        "id": 178686996,
        "sender_full_name": "simulacrum",
        "timestamp": 1571684638
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> or <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> <a href=\"https://github.com/rust-lang/rust/blob/857a55b8f0a692cb2304ab7c062d9cc74122e516/src/librustc_interface/util.rs#L209-L214\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/blob/857a55b8f0a692cb2304ab7c062d9cc74122e516/src/librustc_interface/util.rs#L209-L214\">https://github.com/rust-lang/rust/blob/857a55b8f0a692cb2304ab7c062d9cc74122e516/src/librustc_interface/util.rs#L209-L214</a></p>",
        "id": 178689731,
        "sender_full_name": "simulacrum",
        "timestamp": 1571686651
    },
    {
        "content": "<blockquote>\n<p>I also have a branch which makes translation to LLVM parallel. It is quite messy though and a simple parallel loop over CGUs would be much simpler. It does however allow us to use more threads for LLVM optimization. This seems like a useful property since LLVM optimization will scale to higher thread counts than the rest of the compiler. This would only help high core count CPUs and a distributed rustc would perhaps even things out a bit.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> I'm not sure what you mean by this actually?</p>",
        "id": 178692526,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571688172
    },
    {
        "content": "<p>I guess you just meant that we know that each CGU can be executed in parallel? (Whereas, e.g., executing the type-checker for two distinct functions in parallel may wind up with a common dependency they both block on?)</p>",
        "id": 178692579,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571688207
    },
    {
        "content": "<p>There's no communication between threads with LLVM optimizing CGUs, and optimizing CGUs takes a while. So no fine grained parallelism like elsewhere in the compiler (queries, interners, etc.)</p>",
        "id": 178692846,
        "sender_full_name": "Zoxc",
        "timestamp": 1571688355
    },
    {
        "content": "<p>makes sense</p>",
        "id": 178700959,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1571693624
    },
    {
        "content": "<p>I updated the shared doc with a link to my current task's doc. I might be able to attend tomorrow's meeting.</p>",
        "id": 179192981,
        "sender_full_name": "Paul Faria",
        "timestamp": 1572221214
    },
    {
        "content": "<p>Should I also put any of my work under <code>current action items</code>?</p>",
        "id": 179193034,
        "sender_full_name": "Paul Faria",
        "timestamp": 1572221284
    },
    {
        "content": "<p>I was just going to ask, <span class=\"user-group-mention\" data-user-group-id=\"1117\">@WG-parallel-rustc</span>, whether we planned to meet today? I've not had any time to follow up on the things we discussed last time</p>",
        "id": 179258858,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1572286342
    },
    {
        "content": "<p>I'm available to meet, but I don't have any updates to bring</p>",
        "id": 179258950,
        "sender_full_name": "cuviper",
        "timestamp": 1572286403
    },
    {
        "content": "<p>I'm not sure what we were going to do exactly, I've scheduled a \"pairing\" session with <span class=\"user-mention\" data-user-id=\"116114\">@Paul Faria</span> for tonight</p>",
        "id": 179259038,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1572286443
    },
    {
        "content": "<p>we need to define what to do exactly but I have some ideas</p>",
        "id": 179259060,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1572286458
    },
    {
        "content": "<p>no updates for today rather than the doc I've shared already with <code>sync</code> parallel constructions</p>",
        "id": 179259126,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1572286508
    },
    {
        "content": "<p>I've already added my updates to the doc. Nothing that needs to be discussed in a synchronous meeting I think</p>",
        "id": 179259495,
        "sender_full_name": "Paul Faria",
        "timestamp": 1572286694
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> is the meeting happening? it ended not being clear to me</p>",
        "id": 179263514,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1572289026
    },
    {
        "content": "<p>I think we should meet briefly to go over the sync conventions</p>",
        "id": 179263517,
        "sender_full_name": "simulacrum",
        "timestamp": 1572289028
    },
    {
        "content": "<p>It'll probably not take us the full hour but I think it'd be good to at least make sure we're all on the same page</p>",
        "id": 179263557,
        "sender_full_name": "simulacrum",
        "timestamp": 1572289052
    },
    {
        "content": "<p>seems good to me</p>",
        "id": 179263646,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1572289087
    },
    {
        "content": "<p>I'd also like to touch on how moving things from Session to TyCtxt went -- not sure if it _needs_ to be sync, but I think it could benefit from that. (i.e., do we want to document this pattern / add it to the guidelines)</p>",
        "id": 179263759,
        "sender_full_name": "simulacrum",
        "timestamp": 1572289152
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> ^</p>",
        "id": 179264052,
        "sender_full_name": "simulacrum",
        "timestamp": 1572289315
    },
    {
        "content": "<p>hey all</p>",
        "id": 179264286,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1572289442
    },
    {
        "content": "<p>coming</p>",
        "id": 179264321,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1572289445
    },
    {
        "content": "<p><a href=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA\" target=\"_blank\" title=\"https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA\">https://hackmd.io/_1S8_ChMSa2N8mRw6EsGPA</a></p>",
        "id": 179264395,
        "sender_full_name": "simulacrum",
        "timestamp": 1572289498
    }
]
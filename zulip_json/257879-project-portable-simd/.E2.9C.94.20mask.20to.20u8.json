[
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"399416\">Jorge Leitao</span> has marked this topic as resolved.</p>",
        "id": 267921872,
        "sender_full_name": "Notification Bot",
        "timestamp": 1642103837
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"229517\">@Jacob Lifshay</span> could you take a look at this issue in my branch?</p>",
        "id": 267960271,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127012
    },
    {
        "content": "<p>this test doesn't compile: <a href=\"https://github.com/rust-lang/portable-simd/blob/feature/better-bitmasks/crates/core_simd/tests/masks.rs#L85-L97\">https://github.com/rust-lang/portable-simd/blob/feature/better-bitmasks/crates/core_simd/tests/masks.rs#L85-L97</a></p>",
        "id": 267960281,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127019
    },
    {
        "content": "<p>the error is unusual:</p>\n<div class=\"codehilite\"><pre><span></span><code>95  |                 assert_eq!(core_simd::Mask::&lt;$type, 16&gt;::from_bitmask(bitmask), mask);\n    |                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `ToBitMask&lt;[u8; 2]&gt;` is not implemented for `core_simd::Mask&lt;isize, 16_usize&gt;`\n</code></pre></div>",
        "id": 267960360,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127088
    },
    {
        "content": "<p>if you look in that commit, that trait is definitely implemented on it</p>",
        "id": 267960388,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127116
    },
    {
        "content": "<p>I'm guessing this is an issue with const generic exprs, but I'm not sure</p>",
        "id": 267960397,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127129
    },
    {
        "content": "<p>hmm, iirc const generic exprs sometimes don't really unify with each other correctly...i'm not familiar with const generics machinery in rustc...</p>",
        "id": 267960573,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1642127293
    },
    {
        "content": "<p>hm, that does seem to be the likely cause of this</p>",
        "id": 267960647,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127394
    },
    {
        "content": "<p>maybe ask on <a class=\"stream\" data-stream-id=\"260443\" href=\"/#narrow/stream/260443-project-const-generics\">#project-const-generics</a>?</p>",
        "id": 267960692,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1642127407
    },
    {
        "content": "<p>I feel like this is the \"correct\" way to implement the trait, but maybe not there yet..</p>",
        "id": 267960710,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127422
    },
    {
        "content": "<p>yeah maybe. I can try to make a minimal example</p>",
        "id": 267960714,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127432
    },
    {
        "content": "<p>also, change title to something searchable</p>",
        "id": 267960719,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1642127440
    },
    {
        "content": "<p>Title?</p>",
        "id": 267960730,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127459
    },
    {
        "content": "<p>where is the trait impl for <code>ToBitmask&lt;[u8; 2]&gt; for Mask&lt;isize, 16&gt;</code> ?</p>",
        "id": 267960741,
        "sender_full_name": "Boxy [she/her]",
        "timestamp": 1642127467
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/portable-simd/blob/feature/better-bitmasks/crates/core_simd/src/masks/to_bitmask.rs#L88-L99\">https://github.com/rust-lang/portable-simd/blob/feature/better-bitmasks/crates/core_simd/src/masks/to_bitmask.rs#L88-L99</a></p>",
        "id": 267960760,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127509
    },
    {
        "content": "<p>\"mask to u8\" is kinda about a separate issue...</p>",
        "id": 267960765,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1642127518
    },
    {
        "content": "<p>perhaps, this the bitmasking issue though...</p>",
        "id": 267960816,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642127548
    },
    {
        "content": "<p>a trivial example works, so I'm not sure what specifically is different here: <a href=\"https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=d401ea9060d4bd1403aeca3aae1360ac\">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=d401ea9060d4bd1403aeca3aae1360ac</a></p>",
        "id": 268024818,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642172616
    },
    {
        "content": "<p><code>core_simd</code> also produces this warning, where the playground example doesn't</p>\n<div class=\"codehilite\"><pre><span></span><code>warning: cannot use constants which depend on generic parameters in types\n  |\n  = note: `#[warn(const_evaluatable_unchecked)]` on by default\n</code></pre></div>",
        "id": 268024968,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642172665
    },
    {
        "content": "<p>it's none of the extra where clauses or anything: <a href=\"https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=555a50f3bacca5558e0260d2b01eeaf8\">https://play.rust-lang.org/?version=nightly&amp;mode=debug&amp;edition=2021&amp;gist=555a50f3bacca5558e0260d2b01eeaf8</a></p>",
        "id": 268026777,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642173462
    },
    {
        "content": "<p>at a loss for what the difference between my example and core_simd is</p>",
        "id": 268026801,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1642173475
    }
]
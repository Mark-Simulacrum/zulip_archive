[
    {
        "content": "<p>I'm finally putting together a PR for a generic <code>simd_shuffle</code> intrinsic that doesn't take the length as part of the name (<code>simd_shuffle4</code>, etc).  It should fix some of our generics, and also allow actual swizzles (like extracting a 4-lane vector from an 8-lane vector, or making an 8-lane vector from a 4-lane vector)</p>",
        "id": 252909163,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631366449
    },
    {
        "content": "<p>neat.</p>",
        "id": 252913921,
        "sender_full_name": "Jubilee",
        "timestamp": 1631371382
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/88855\">#88855</a></p>",
        "id": 252914480,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631372001
    },
    {
        "content": "<p><em>glances at the queue</em> ...I am not sure I have enough brain to review that right now but I think I can see about getting it merged sometime this century by orchestrating a rollup or two.</p>",
        "id": 252916437,
        "sender_full_name": "Jubilee",
        "timestamp": 1631373978
    },
    {
        "content": "<p>I just realized I didn't update (or test) the cranelift backend.  <span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span> is that something I should be doing and how would I go about doing that?</p>",
        "id": 252918353,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631375966
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"312331\">@Caleb Zulawski</span>  I think it would be a matter of updating <a href=\"https://github.com/bjorn3/rustc_codegen_cranelift/blob/7736e0afb86a54ca68c36d96262e902761f02f80/src/intrinsics/simd.rs#L67\">https://github.com/bjorn3/rustc_codegen_cranelift/blob/7736e0afb86a54ca68c36d96262e902761f02f80/src/intrinsics/simd.rs#L67</a> and <a href=\"https://github.com/bjorn3/rustc_codegen_cranelift/blob/7736e0afb86a54ca68c36d96262e902761f02f80/src/intrinsics/simd.rs#L70\">https://github.com/bjorn3/rustc_codegen_cranelift/blob/7736e0afb86a54ca68c36d96262e902761f02f80/src/intrinsics/simd.rs#L70</a></p>",
        "id": 252923113,
        "sender_full_name": "bjorn3",
        "timestamp": 1631380710
    },
    {
        "content": "<p>I can do it later too. The stdsimd test is currently disabled as it didn't compile on more recent nightlies anymore. Was the fix already merged by the way?</p>",
        "id": 252923144,
        "sender_full_name": "bjorn3",
        "timestamp": 1631380763
    },
    {
        "content": "<p>Hmm, which fix was it waiting on?</p>",
        "id": 252923223,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631380823
    },
    {
        "content": "<p>All relevant fixes either are merged or en route to merging, depending on which you mean.</p>",
        "id": 252923279,
        "sender_full_name": "Jubilee",
        "timestamp": 1631380919
    },
    {
        "content": "<p>I wonder if we want to move some of this logic into rustc_codegen_ssa rather than duplicating it for cranelift</p>",
        "id": 252923348,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631380969
    },
    {
        "content": "<p>Yeah, I think the type checking code and indices const eval code could be shared.</p>",
        "id": 252923556,
        "sender_full_name": "bjorn3",
        "timestamp": 1631381207
    },
    {
        "content": "<blockquote>\n<p>Hmm, which fix was it waiting on?</p>\n</blockquote>\n<p>It was waiting on <a href=\"https://github.com/rust-lang/portable-simd/pull/155\">https://github.com/rust-lang/portable-simd/pull/155</a>, which merged 3 days ago I see.</p>",
        "id": 252923694,
        "sender_full_name": "bjorn3",
        "timestamp": 1631381385
    },
    {
        "content": "<p>Would you rather I take care of it in this PR, or one of us can follow up afterwards?  I also have a similar PR ready to go for <code>simd_bitmask</code></p>",
        "id": 252925259,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631383118
    },
    {
        "content": "<p>I can handle it in the bjorn3/rustc_codegen_cranelift repo after these PRs have landed and I updated rustc.</p>",
        "id": 252930627,
        "sender_full_name": "bjorn3",
        "timestamp": 1631389254
    },
    {
        "content": "<p>That is also the easiest way to test it. x.py test doesn't yet test cg_clif.</p>",
        "id": 252930647,
        "sender_full_name": "bjorn3",
        "timestamp": 1631389285
    }
]
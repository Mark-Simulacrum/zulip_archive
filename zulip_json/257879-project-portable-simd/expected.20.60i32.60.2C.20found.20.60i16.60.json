[
    {
        "content": "<p>Hi,</p>\n<p>under <code>rustup default nightly-2022-01-06</code>, I am being unable to compile the below. Is it a bug?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#![feature(portable_simd)]</span><span class=\"w\"></span>\n\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span>::<span class=\"n\">simd</span>::<span class=\"n\">u16x32</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span>::<span class=\"n\">simd</span>::<span class=\"n\">mask16x32</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">u16x32</span>::<span class=\"n\">splat</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">u16x32</span>::<span class=\"n\">splat</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">mask16x32</span>::<span class=\"n\">splat</span><span class=\"p\">(</span><span class=\"kc\">false</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"p\">.</span><span class=\"n\">select</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 267369594,
        "sender_full_name": "Jorge Leitao",
        "timestamp": 1641751230
    },
    {
        "content": "<p>Surprised that hasn't come up, definitely a bug</p>",
        "id": 267369785,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1641751519
    },
    {
        "content": "<p>Ah, typo: <a href=\"https://github.com/rust-lang/portable-simd/blob/master/crates/core_simd/src/masks.rs#L519\">https://github.com/rust-lang/portable-simd/blob/master/crates/core_simd/src/masks.rs#L519</a></p>",
        "id": 267369948,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1641751735
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#![feature(portable_simd)]</span><span class=\"w\"></span>\n\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">std</span>::<span class=\"n\">simd</span>::<span class=\"p\">{</span><span class=\"n\">Mask</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">Simd</span><span class=\"p\">};</span><span class=\"w\"></span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Simd</span>::<span class=\"o\">&lt;</span><span class=\"kt\">u16</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">&gt;</span>::<span class=\"n\">splat</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Simd</span>::<span class=\"o\">&lt;</span><span class=\"kt\">u16</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">&gt;</span>::<span class=\"n\">splat</span><span class=\"p\">(</span><span class=\"mi\">2</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Mask</span>::<span class=\"o\">&lt;</span><span class=\"kt\">i16</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">32</span><span class=\"o\">&gt;</span>::<span class=\"n\">splat</span><span class=\"p\">(</span><span class=\"kc\">false</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">c</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">m</span><span class=\"p\">.</span><span class=\"n\">select</span><span class=\"p\">(</span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 267369958,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1641751755
    },
    {
        "content": "<p>This is identical, and works</p>",
        "id": 267369960,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1641751763
    },
    {
        "content": "<p>I just fixed it on master, but it'll probably take a while to make it to nightly (the next time we sync to rust-lang/rust)</p>",
        "id": 267370111,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1641751999
    },
    {
        "content": "<p>oh, thanks, that was quick!</p>",
        "id": 267372589,
        "sender_full_name": "Jorge Leitao",
        "timestamp": 1641755458
    },
    {
        "content": "<p>No problem!</p>",
        "id": 267372616,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1641755504
    }
]
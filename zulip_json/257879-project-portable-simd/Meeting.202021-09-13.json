[
    {
        "content": "<p>Yo yo yo. I am going to be a little late but I am here.</p>",
        "id": 253154657,
        "sender_full_name": "Jubilee",
        "timestamp": 1631564732
    },
    {
        "content": "<p>Oh whoops, I forgot!</p>",
        "id": 253157637,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631566011
    },
    {
        "content": "<p>hi!</p>",
        "id": 253157657,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631566020
    },
    {
        "content": "<p>Hi! Also I think <span class=\"user-mention\" data-user-id=\"246783\">@Miguel Raz Guzmán Macedo</span> wanted a poke.</p>",
        "id": 253159232,
        "sender_full_name": "Jubilee",
        "timestamp": 1631566779
    },
    {
        "content": "<p>Yay!</p>",
        "id": 253159294,
        "sender_full_name": "Miguel Raz Guzmán Macedo",
        "timestamp": 1631566803
    },
    {
        "content": "<p>I have been playing with import paths as I mentioned over in <a href=\"#narrow/stream/257879-project-portable-simd/topic/Rearranging.20everything\">https://rust-lang.zulipchat.com/#narrow/stream/257879-project-portable-simd/topic/Rearranging.20everything</a></p>",
        "id": 253159376,
        "sender_full_name": "Jubilee",
        "timestamp": 1631566817
    },
    {
        "content": "<p>it's really \"\"\"fun\"\"\"</p>",
        "id": 253159415,
        "sender_full_name": "Jubilee",
        "timestamp": 1631566830
    },
    {
        "content": "<p>XD</p>",
        "id": 253159439,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631566837
    },
    {
        "content": "<p>I intend to land the changes necessary to do so in rust-lang/rust and then sync them into our repo so I can write down how the process works both ways. Ideally I can draft a little script to make it just invoking that.</p>",
        "id": 253159708,
        "sender_full_name": "Jubilee",
        "timestamp": 1631566948
    },
    {
        "content": "<p>What else were our active concerns?<br>\nThe test breakage on our side? Should be fixed as of today.<br>\nOther incoming PRs on rust-lang?<br>\nAnything else?</p>",
        "id": 253159992,
        "sender_full_name": "Jubilee",
        "timestamp": 1631567060
    },
    {
        "content": "<p>Just my already open PRs for the intrinsics</p>",
        "id": 253160422,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631567238
    },
    {
        "content": "<p>kk~</p>",
        "id": 253160432,
        "sender_full_name": "Jubilee",
        "timestamp": 1631567246
    },
    {
        "content": "<p>no progress on <a href=\"https://github.com/rust-lang/portable-simd/issues/109\">portable-simd#109</a>, still busy with other stuff</p>",
        "id": 253160799,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631567406
    },
    {
        "content": "<p>Would you like me to attempt reviewing those, Caleb?</p>",
        "id": 253160801,
        "sender_full_name": "Jubilee",
        "timestamp": 1631567408
    },
    {
        "content": "<p>as mentioned in the rustc PR, I think I found an endianness issue in the tests</p>",
        "id": 253160992,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631567505
    },
    {
        "content": "<p>Right, I don't know about that one. ^^;</p>",
        "id": 253161099,
        "sender_full_name": "Jubilee",
        "timestamp": 1631567537
    },
    {
        "content": "<p>I may be able to review the shuffle one. Oh wait, it was accepted.</p>",
        "id": 253161144,
        "sender_full_name": "Jubilee",
        "timestamp": 1631567558
    },
    {
        "content": "<p>Yeah, I'm still not sure about the endianness on that one</p>",
        "id": 253161700,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631567781
    },
    {
        "content": "<p>We have an issue on MIPS where bits are reversed, not endianness.  And I think MIPS is big endian?</p>",
        "id": 253161799,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631567827
    },
    {
        "content": "<p>iirc the issue is that architectures have both a bit-level endianness and a byte-level endianness, both of which can independently vary</p>",
        "id": 253161847,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631567851
    },
    {
        "content": "<p>Can you add a recommended procedure for how to get a ppc64 machine for test to your PR comment? Travis isn't an option anymore.</p>",
        "id": 253161994,
        "sender_full_name": "Jubilee",
        "timestamp": 1631567915
    },
    {
        "content": "<p>install qemu-user and use that to run tests</p>",
        "id": 253162037,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631567940
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246783\">@Miguel Raz Guzmán Macedo</span> I am looking at your PRs! :D</p>",
        "id": 253162366,
        "sender_full_name": "Jubilee",
        "timestamp": 1631568014
    },
    {
        "content": "<p>gaaah!</p>",
        "id": 253162380,
        "sender_full_name": "Miguel Raz Guzmán Macedo",
        "timestamp": 1631568025
    },
    {
        "content": "<p><a href=\"https://packages.debian.org/bullseye/qemu-user-static\">https://packages.debian.org/bullseye/qemu-user-static</a></p>",
        "id": 253162409,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568037
    },
    {
        "content": "<p>I have a horror story that is not your fault!<br>\n<a href=\"https://robert.ocallahan.org/2021/09/rr-trace-portability-diverging-behavior.html\">https://robert.ocallahan.org/2021/09/rr-trace-portability-diverging-behavior.html</a><br>\n<a href=\"https://cookieplmonster.github.io/2020/07/19/silentpatch-mass-effect/\">https://cookieplmonster.github.io/2020/07/19/silentpatch-mass-effect/</a></p>",
        "id": 253162419,
        "sender_full_name": "Jubilee",
        "timestamp": 1631568043
    },
    {
        "content": "<p>I think we should not use <code>rsqrt</code> for this reason! :D Not without a language-level consensus on \"this is fine, actually\".</p>",
        "id": 253162456,
        "sender_full_name": "Jubilee",
        "timestamp": 1631568057
    },
    {
        "content": "<p>well, if we were to actually have a rsqrt operation, it would have to match ieee 754's rsqrt, neither intel nor amd's rsqrtss instruction do since they're both approximations</p>",
        "id": 253162754,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568182
    },
    {
        "content": "<p>assuming we want to provide it anyway, it would have to be named rsqrt_approx or something</p>",
        "id": 253162850,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568230
    },
    {
        "content": "<p>I think LLVM emits the AMD/Intel ones.</p>",
        "id": 253162872,
        "sender_full_name": "Jubilee",
        "timestamp": 1631568242
    },
    {
        "content": "<p>yup, since you used the x86-specific llvm intrinsics</p>",
        "id": 253163018,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568291
    },
    {
        "content": "<p>llvm doesn't have an intrinsic for ieee754 rsqrt (which I'm going to try to rectify at some point, since Libre-SOC's gpu will have it, and many other gpus also have it)</p>",
        "id": 253163252,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568384
    },
    {
        "content": "<p>And to add on to that, I think approximation fns are probably not in scope at all since theres the whole problem of fast math</p>",
        "id": 253163862,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631568680
    },
    {
        "content": "<p>Which may resolve that...</p>",
        "id": 253163881,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631568691
    },
    {
        "content": "<p>oh lord Jubilee</p>",
        "id": 253164069,
        "sender_full_name": "Miguel Raz Guzmán Macedo",
        "timestamp": 1631568771
    },
    {
        "content": "<p>Really hope Rust yeets fastmath. That’s a nightmare.</p>",
        "id": 253164125,
        "sender_full_name": "Miguel Raz Guzmán Macedo",
        "timestamp": 1631568804
    },
    {
        "content": "<p>well, people want it anyway...</p>",
        "id": 253164172,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568831
    },
    {
        "content": "<p>i'm at least hoping that you have to explicitly opt-in to fast math to get non ieee 754 behavior</p>",
        "id": 253164285,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568875
    },
    {
        "content": "<p>I think we should write a post announcing our status.</p>\n<p>Also I have grown to loathe devving on Windows... and this is not because of the platform <em>per se</em> but how I gotta set env vars and then cargo commands separately. I am thinking we should add<code>--target-features</code> as a cargo/rustc flag? Possibly even <code>--with-rustflags</code>?</p>",
        "id": 253164374,
        "sender_full_name": "Jubilee",
        "timestamp": 1631568922
    },
    {
        "content": "<p>can't you just do <code>cargo rustc -- -C target-features=...</code></p>",
        "id": 253164492,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631568974
    },
    {
        "content": "<p>It's not compatible with <code>cargo test</code></p>",
        "id": 253164517,
        "sender_full_name": "Jubilee",
        "timestamp": 1631568996
    },
    {
        "content": "<p>oh, too bad</p>",
        "id": 253164532,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631569008
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"246783\">@Miguel Raz Guzmán Macedo</span> If you want to pick up the dot_product PR I think it would be easy to update. The other one got... uh, slagged by the vicissitudes of time. ^^; But would also be fine to reopen if you want.</p>",
        "id": 253164775,
        "sender_full_name": "Jubilee",
        "timestamp": 1631569121
    },
    {
        "content": "<p>Just... oh lord that's a huge rebase, it would be easier to just copy/paste the code into the new places.</p>",
        "id": 253164832,
        "sender_full_name": "Jubilee",
        "timestamp": 1631569149
    },
    {
        "content": "<p>re cargo target-features: well...if you don't want to switch to Linux, you could enable WSL2 and run tests in the built-in Linux VM</p>",
        "id": 253165280,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631569345
    },
    {
        "content": "<p>bash works well for setting env vars at the same time as running cargo</p>",
        "id": 253165386,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631569409
    },
    {
        "content": "<p>I can copy paste!</p>",
        "id": 253165516,
        "sender_full_name": "Miguel Raz Guzmán Macedo",
        "timestamp": 1631569469
    },
    {
        "content": "<p>writing a post sounds good!</p>",
        "id": 253165792,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631569619
    },
    {
        "content": "<p>or, should we wait till it all's merged into rust?</p>",
        "id": 253165893,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631569667
    },
    {
        "content": "<p>The intent is that we should probably start drafting something nowish for then.</p>",
        "id": 253166285,
        "sender_full_name": "Jubilee",
        "timestamp": 1631569860
    },
    {
        "content": "<p>Hm, nightly is still 12?</p>",
        "id": 253166637,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570019
    },
    {
        "content": "<p><code>cargo clean</code>...?</p>",
        "id": 253166909,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570161
    },
    {
        "content": "<p>...no?</p>",
        "id": 253167034,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570220
    },
    {
        "content": "<p>...can anyone else get our tests to compile with <code>--release</code>?</p>",
        "id": 253167066,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570241
    },
    {
        "content": "<blockquote>\n<p>nightly-x86_64-pc-windows-msvc unchanged - rustc 1.57.0-nightly (51e514c0f 2021-09-12)</p>\n</blockquote>",
        "id": 253167114,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570274
    },
    {
        "content": "<p>sorry, I haven't tried in a while...</p>",
        "id": 253167121,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570277
    },
    {
        "content": "<p>Right, I mean literally right now off master.</p>",
        "id": 253167179,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570295
    },
    {
        "content": "<p>master rustc or portable-simd?</p>",
        "id": 253167259,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570344
    },
    {
        "content": "<p>portable-simd</p>",
        "id": 253167272,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570352
    },
    {
        "content": "<p>trying...</p>",
        "id": 253167296,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570364
    },
    {
        "content": "<p>passes for me, i'm on x86-64 linux</p>",
        "id": 253167805,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570572
    },
    {
        "content": "<p>zen2</p>",
        "id": 253167881,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570622
    },
    {
        "content": "<p>oh, i forgot target-features...</p>",
        "id": 253167971,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570664
    },
    {
        "content": "<p><code>cargo +nightly test --release</code></p>",
        "id": 253168040,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570706
    },
    {
        "content": "<p>error: could not compile <code>core_simd</code></p>\n<p>Caused by:<br>\n  process didn't exit successfully: <code>rustc --crate-name i8_ops --edition=2018 crates/core_simd/tests/i8_ops.rs --error-format=json --json=diagnostic-rendered-ansi --emit=dep-info,link -C opt-level=3 -C embed-bitcode=no --test --cfg 'feature=\"default\"' --cfg 'feature=\"generic_const_exprs\"' --cfg 'feature=\"std\"' -C metadata=7d49d15966de2453 -C extra-filename=-7d49d15966de2453 --out-dir /home/jacob/projects/portable-simd/target/release/deps -L dependency=/home/jacob/projects/portable-simd/target/release/deps --extern core_simd=/home/jacob/projects/portable-simd/target/release/deps/libcore_simd-28c7eb9857c39b20.rlib --extern proptest=/home/jacob/projects/portable-simd/target/release/deps/libproptest-bf8d500ea8e33911.rlib --extern test_helpers=/home/jacob/projects/portable-simd/target/release/deps/libtest_helpers-b60287a86cc121b3.rlib --extern wasm_bindgen_test=/home/jacob/projects/portable-simd/target/release/deps/libwasm_bindgen_test-dbeaae6deb36b681.rlib</code> (signal: 5, SIGTRAP: trace/breakpoint trap)<br>\nwarning: build failed, waiting for other jobs to finish...<br>\nerror: build failed</p>",
        "id": 253168168,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570778
    },
    {
        "content": "<p>This will be an error until we update LLVM to include that fix right?</p>",
        "id": 253168194,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631570800
    },
    {
        "content": "<p>is this with any features?</p>",
        "id": 253168195,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570803
    },
    {
        "content": "<p>no, default features</p>",
        "id": 253168211,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570818
    },
    {
        "content": "<p>Our local LLVM should have fixed that by now.</p>",
        "id": 253168214,
        "sender_full_name": "Jubilee",
        "timestamp": 1631570819
    },
    {
        "content": "<p>on rustc 1.57.0-nightly (51e514c0f 2021-09-12)</p>",
        "id": 253168271,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631570851
    },
    {
        "content": "<p>I've only used my own build of rustc for a few days, I'll have to try again in a bit with nightly</p>",
        "id": 253168286,
        "sender_full_name": "Caleb Zulawski",
        "timestamp": 1631570863
    },
    {
        "content": "<p>command I used: <code>RUSTFLAGS= cargo +nightly test --release</code></p>",
        "id": 253168564,
        "sender_full_name": "Jacob Lifshay",
        "timestamp": 1631571013
    },
    {
        "content": "<p>Hmm.</p>",
        "id": 253170713,
        "sender_full_name": "Jubilee",
        "timestamp": 1631572299
    },
    {
        "content": "<p>Okay, sorry, I got distracted by that.<br>\nAdjourned. Thank you for coming.<br>\nI suppose we have an issue to keep open.</p>",
        "id": 253170808,
        "sender_full_name": "Jubilee",
        "timestamp": 1631572350
    }
]
[
    {
        "content": "<p>hey <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> i am currently stuck while trying to figure out what's going on here:</p>",
        "id": 271406609,
        "sender_full_name": "lcnr",
        "timestamp": 1644485938
    },
    {
        "content": "<p>so, i have 3 functions:</p>",
        "id": 271406622,
        "sender_full_name": "lcnr",
        "timestamp": 1644485948
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span> <span class=\"nf\">uwu</span><span class=\"o\">&lt;'</span><span class=\"na\">b</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">func</span>: <span class=\"nc\">for</span><span class=\"o\">&lt;'</span><span class=\"na\">a</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">a</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_</span>: <span class=\"nc\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">func</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 271406632,
        "sender_full_name": "lcnr",
        "timestamp": 1644485959
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span> <span class=\"nf\">uwu</span><span class=\"o\">&lt;'</span><span class=\"na\">b</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">func</span>: <span class=\"nc\">for</span><span class=\"o\">&lt;'</span><span class=\"na\">a</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">a</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_x</span>: <span class=\"nc\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">func</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 271406649,
        "sender_full_name": "lcnr",
        "timestamp": 1644485974
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span> <span class=\"nf\">uwu</span><span class=\"o\">&lt;'</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">func</span>: <span class=\"kp\">&amp;</span><span class=\"o\">'</span><span class=\"nb\">static</span> <span class=\"p\">())</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_</span>: <span class=\"kp\">&amp;</span><span class=\"o\">'</span><span class=\"na\">b</span> <span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">func</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 271406724,
        "sender_full_name": "lcnr",
        "timestamp": 1644486007
    },
    {
        "content": "<p>the, first, with the <code>let _: fn(&amp;'b ()) = func;</code>assignment causes the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>error[E0308]: mismatched types\n --&gt; src/lib.rs:2:12\n  |\n2 |     let _: fn(&amp;&#39;b ()) = func;\n  |            ^^^^^^^^^^ one type is more general than the other\n  |\n  = note: expected fn pointer `fn(&amp;&#39;b ())`\n             found fn pointer `for&lt;&#39;a&gt; fn(&amp;&#39;a ())`\n</code></pre></div>",
        "id": 271406817,
        "sender_full_name": "lcnr",
        "timestamp": 1644486043
    },
    {
        "content": "<p>the the other 2 compile</p>",
        "id": 271406901,
        "sender_full_name": "lcnr",
        "timestamp": 1644486062
    },
    {
        "content": "<p>i would expect <code>fn(&amp;'b ()) &lt;: for&lt;'a&gt; fn(&amp;'a ())</code> to hold</p>",
        "id": 271407128,
        "sender_full_name": "lcnr",
        "timestamp": 1644486208
    },
    {
        "content": "<p>this is the mir during nll:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"c1\">// MIR for `uwu` 0 nll</span>\n\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Free</span><span class=\"w\"> </span><span class=\"n\">Region</span><span class=\"w\"> </span><span class=\"n\">Mapping</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Global</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Local</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Local</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Inferred</span><span class=\"w\"> </span><span class=\"n\">Region</span><span class=\"w\"> </span><span class=\"n\">Values</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">3</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U1</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Inference</span><span class=\"w\"> </span><span class=\"n\">Constraints</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">live</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">]}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">live</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">]}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">live</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">2</span><span class=\"p\">]}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">12</span>: <span class=\"mi\">2</span>:<span class=\"mi\">22</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">12</span>: <span class=\"mi\">2</span>:<span class=\"mi\">22</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">12</span>: <span class=\"mi\">2</span>:<span class=\"mi\">22</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">12</span>: <span class=\"mi\">2</span>:<span class=\"mi\">22</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">User</span><span class=\"w\"> </span><span class=\"n\">Type</span><span class=\"w\"> </span><span class=\"n\">Annotations</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span>: <span class=\"nc\">Canonical</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">max_universe</span>: <span class=\"nc\">U0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">variables</span>: <span class=\"p\">[],</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">Ty</span><span class=\"p\">(</span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">12</span>: <span class=\"mi\">2</span>:<span class=\"mi\">22</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span>: <span class=\"nc\">Canonical</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">max_universe</span>: <span class=\"nc\">U0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">variables</span>: <span class=\"p\">[],</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">Ty</span><span class=\"p\">(</span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">12</span>: <span class=\"mi\">2</span>:<span class=\"mi\">22</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"k\">fn</span> <span class=\"nf\">uwu</span><span class=\"p\">(</span><span class=\"n\">_1</span>: <span class=\"nc\">for</span><span class=\"o\">&lt;'</span><span class=\"na\">a</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">a</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span>-&gt; <span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"n\">func</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">_1</span><span class=\"p\">;</span><span class=\"w\">                    </span><span class=\"c1\">// in scope 0 at src/lib.rs:1:12: 1:16</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">_0</span>: <span class=\"p\">();</span><span class=\"w\">                      </span><span class=\"c1\">// return place in scope 0 at src/lib.rs:1:38: 1:38</span>\n<span class=\"w\">    </span><span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"n\">bb0</span>: <span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"n\">AscribeUserType</span><span class=\"p\">(</span><span class=\"n\">_1</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">UserTypeProjection</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">base</span>: <span class=\"nc\">UserType</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">projs</span>: <span class=\"p\">[]</span><span class=\"w\"> </span><span class=\"p\">});</span><span class=\"w\"> </span><span class=\"c1\">// scope 0 at src/lib.rs:2:12: 2:22</span>\n<span class=\"w\">        </span><span class=\"n\">_0</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"p\">();</span><span class=\"w\">                   </span><span class=\"c1\">// scope 0 at src/lib.rs:1:38: 3:2</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"p\">;</span><span class=\"w\">                          </span><span class=\"c1\">// scope 0 at src/lib.rs:3:2: 3:2</span>\n<span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 271407299,
        "sender_full_name": "lcnr",
        "timestamp": 1644486316
    },
    {
        "content": "<p>for the second fn with <code>_x</code> the nll output is</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"c1\">// MIR for `uwu` 0 nll</span>\n\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Free</span><span class=\"w\"> </span><span class=\"n\">Region</span><span class=\"w\"> </span><span class=\"n\">Mapping</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Global</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Local</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Local</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">]</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Inferred</span><span class=\"w\"> </span><span class=\"n\">Region</span><span class=\"w\"> </span><span class=\"n\">Values</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">3</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">7</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">U0</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">Inference</span><span class=\"w\"> </span><span class=\"n\">Constraints</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">0</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">live</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">]}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">live</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">]}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">2</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">live</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"o\">..=</span><span class=\"mi\">6</span><span class=\"p\">]}</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">TypeAnnotation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">TypeAnnotation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">7</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">Assignment</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">Single</span><span class=\"p\">(</span><span class=\"n\">bb0</span><span class=\"p\">[</span><span class=\"mi\">1</span><span class=\"p\">])</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">5</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">TypeAnnotation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">1</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">BoringNoLocation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">6</span><span class=\"n\">r</span>: <span class=\"o\">'</span><span class=\"nb\">_</span>#<span class=\"mi\">4</span><span class=\"n\">r</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">TypeAnnotation</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">All</span><span class=\"p\">(</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">User</span><span class=\"w\"> </span><span class=\"n\">Type</span><span class=\"w\"> </span><span class=\"n\">Annotations</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"mi\">0</span>: <span class=\"nc\">Canonical</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">max_universe</span>: <span class=\"nc\">U0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">variables</span>: <span class=\"p\">[],</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">Ty</span><span class=\"p\">(</span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"> </span><span class=\"mi\">1</span>: <span class=\"nc\">Canonical</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">max_universe</span>: <span class=\"nc\">U0</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">variables</span>: <span class=\"p\">[],</span><span class=\"w\"> </span><span class=\"n\">value</span>: <span class=\"nc\">Ty</span><span class=\"p\">(</span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">13</span>: <span class=\"mi\">2</span>:<span class=\"mi\">23</span><span class=\"w\"></span>\n<span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"k\">fn</span> <span class=\"nf\">uwu</span><span class=\"p\">(</span><span class=\"n\">_1</span>: <span class=\"nc\">for</span><span class=\"o\">&lt;'</span><span class=\"na\">a</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"k\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">a</span><span class=\"w\"> </span><span class=\"p\">()))</span><span class=\"w\"> </span>-&gt; <span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"n\">func</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">_1</span><span class=\"p\">;</span><span class=\"w\">                    </span><span class=\"c1\">// in scope 0 at src/lib.rs:1:12: 1:16</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">_0</span>: <span class=\"p\">();</span><span class=\"w\">                      </span><span class=\"c1\">// return place in scope 0 at src/lib.rs:1:38: 1:38</span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_2</span>: <span class=\"nc\">fn</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"p\">())</span><span class=\"w\"> </span><span class=\"k\">as</span><span class=\"w\"> </span><span class=\"n\">UserTypeProjection</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">base</span>: <span class=\"nc\">UserType</span><span class=\"p\">(</span><span class=\"mi\">0</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">projs</span>: <span class=\"p\">[]</span><span class=\"w\"> </span><span class=\"p\">};</span><span class=\"w\"> </span><span class=\"c1\">// in scope 0 at src/lib.rs:2:9: 2:11</span>\n<span class=\"w\">    </span><span class=\"n\">scope</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"n\">debug</span><span class=\"w\"> </span><span class=\"n\">_x</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">_2</span><span class=\"p\">;</span><span class=\"w\">                  </span><span class=\"c1\">// in scope 1 at src/lib.rs:2:9: 2:11</span>\n<span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"n\">bb0</span>: <span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"n\">StorageLive</span><span class=\"p\">(</span><span class=\"n\">_2</span><span class=\"p\">);</span><span class=\"w\">                 </span><span class=\"c1\">// scope 0 at src/lib.rs:2:9: 2:11</span>\n<span class=\"w\">        </span><span class=\"n\">_2</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">_1</span><span class=\"p\">;</span><span class=\"w\">                         </span><span class=\"c1\">// scope 0 at src/lib.rs:2:26: 2:30</span>\n<span class=\"w\">        </span><span class=\"n\">FakeRead</span><span class=\"p\">(</span><span class=\"n\">ForLet</span><span class=\"p\">(</span><span class=\"nb\">None</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">_2</span><span class=\"p\">);</span><span class=\"w\">      </span><span class=\"c1\">// scope 0 at src/lib.rs:2:9: 2:11</span>\n<span class=\"w\">        </span><span class=\"n\">AscribeUserType</span><span class=\"p\">(</span><span class=\"n\">_2</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">o</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">UserTypeProjection</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">base</span>: <span class=\"nc\">UserType</span><span class=\"p\">(</span><span class=\"mi\">1</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">projs</span>: <span class=\"p\">[]</span><span class=\"w\"> </span><span class=\"p\">});</span><span class=\"w\"> </span><span class=\"c1\">// scope 0 at src/lib.rs:2:13: 2:23</span>\n<span class=\"w\">        </span><span class=\"n\">_0</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"p\">();</span><span class=\"w\">                   </span><span class=\"c1\">// scope 0 at src/lib.rs:1:38: 3:2</span>\n<span class=\"w\">        </span><span class=\"n\">StorageDead</span><span class=\"p\">(</span><span class=\"n\">_2</span><span class=\"p\">);</span><span class=\"w\">                 </span><span class=\"c1\">// scope 0 at src/lib.rs:3:1: 3:2</span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"p\">;</span><span class=\"w\">                          </span><span class=\"c1\">// scope 0 at src/lib.rs:3:2: 3:2</span>\n<span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 271407602,
        "sender_full_name": "lcnr",
        "timestamp": 1644486507
    },
    {
        "content": "<p>does someone have an idea what goes wrong here/how to debug this?</p>",
        "id": 271408033,
        "sender_full_name": "lcnr",
        "timestamp": 1644486793
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> do you have an idea here? or whether this behavior is actually intended?</p>",
        "id": 271409079,
        "sender_full_name": "lcnr",
        "timestamp": 1644487380
    },
    {
        "content": "<p>AscribeUserType checks for equality of types, not sub. Since the second example has an assignment in between, and assignments use subtyping, it works out.</p>",
        "id": 271409926,
        "sender_full_name": "oli",
        "timestamp": 1644487792
    },
    {
        "content": "<p>Is this error coming from typeck or borrowck?</p>",
        "id": 271410121,
        "sender_full_name": "oli",
        "timestamp": 1644487902
    },
    {
        "content": "<p>but like: <code>AscribeUserType(_1, +, UserTypeProjection { base: UserType(1), projs: [] })</code></p>\n<p>uses covariance because of the <code>+</code>, doesn't it?</p>",
        "id": 271411366,
        "sender_full_name": "lcnr",
        "timestamp": 1644488591
    },
    {
        "content": "<p><a href=\"https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.StatementKind.html#variant.AscribeUserType\">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/enum.StatementKind.html#variant.AscribeUserType</a></p>",
        "id": 271411412,
        "sender_full_name": "lcnr",
        "timestamp": 1644488622
    },
    {
        "content": "<p>the error happens in <code>mir_borrowck</code> in <code>mbcx.report_region_errors</code></p>",
        "id": 271411625,
        "sender_full_name": "lcnr",
        "timestamp": 1644488712
    },
    {
        "content": "<p>Oh. I was looking at the second example which uses invariant and assumed it would be the same</p>",
        "id": 271412631,
        "sender_full_name": "oli",
        "timestamp": 1644489288
    },
    {
        "content": "<p>figured it out, seems to be a bug</p>",
        "id": 271415127,
        "sender_full_name": "lcnr",
        "timestamp": 1644490669
    },
    {
        "content": "<p><a href=\"https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html#structfield.user_type_annotations\">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/struct.Body.html#structfield.user_type_annotations</a> are always checked using <code>eq_types</code></p>",
        "id": 271415196,
        "sender_full_name": "lcnr",
        "timestamp": 1644490692
    },
    {
        "content": "<p>while also containing user type annotations which are covariant</p>",
        "id": 271415214,
        "sender_full_name": "lcnr",
        "timestamp": 1644490714
    },
    {
        "content": "<p>still figuring out how exactly this works, cause afaict this should cause the following to not compile</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span> <span class=\"nf\">uwu</span><span class=\"o\">&lt;'</span><span class=\"na\">b</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">func</span>: <span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"nb\">static</span><span class=\"w\"> </span><span class=\"p\">(),))</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_</span>: <span class=\"p\">(</span><span class=\"o\">&amp;'</span><span class=\"na\">b</span><span class=\"w\"> </span><span class=\"p\">(),)</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">func</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 271415265,
        "sender_full_name": "lcnr",
        "timestamp": 1644490743
    },
    {
        "content": "<p>but it does</p>",
        "id": 271415278,
        "sender_full_name": "lcnr",
        "timestamp": 1644490748
    },
    {
        "content": "<p>Do we even need those when we have them in the MIR? Which ones are not in the MIR but are in the map?</p>",
        "id": 271415961,
        "sender_full_name": "oli",
        "timestamp": 1644491141
    },
    {
        "content": "<p>Maybe we're only generating them on things with HKL?</p>",
        "id": 271415962,
        "sender_full_name": "oli",
        "timestamp": 1644491141
    },
    {
        "content": "<p>no, we generate them for everything</p>",
        "id": 271416292,
        "sender_full_name": "lcnr",
        "timestamp": 1644491330
    },
    {
        "content": "<p>but erase lifetimes or something</p>",
        "id": 271416296,
        "sender_full_name": "lcnr",
        "timestamp": 1644491335
    },
    {
        "content": "<p>or replace them with fresh ones, so only hrlt mismatches cause errors</p>",
        "id": 271416321,
        "sender_full_name": "lcnr",
        "timestamp": 1644491353
    },
    {
        "content": "<p>going to work on a fix</p>",
        "id": 271416339,
        "sender_full_name": "lcnr",
        "timestamp": 1644491361
    },
    {
        "content": "<p>fix in <a href=\"https://github.com/rust-lang/rust/issues/93856\">#93856</a></p>",
        "id": 271425242,
        "sender_full_name": "lcnr",
        "timestamp": 1644496956
    },
    {
        "content": "<p>You forgot the trailing newlines XD I do that all the time, too. I found a vscode flag for it some time ago, but must've lost my config</p>",
        "id": 271426422,
        "sender_full_name": "oli",
        "timestamp": 1644497715
    }
]
[
    {
        "content": "<p>hello everyone!</p>",
        "id": 127269187,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622228
    },
    {
        "content": "<p>I don't know about the situation where each of you are, but there is a pretty heavy thunderstorm here in Paris. :)</p>",
        "id": 127269197,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622250
    },
    {
        "content": "<p>hi everyone!!!</p>",
        "id": 127269202,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622257
    },
    {
        "content": "<p>o/</p>",
        "id": 127269284,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622347
    },
    {
        "content": "<p>so lets see: As you probably know, we just finished up the RustFest impl Days here in Paris</p>",
        "id": 127269306,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622384
    },
    {
        "content": "<p>I'm not sure whether a happy or sad emoji is more appropriate</p>",
        "id": 127269325,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622413
    },
    {
        "content": "<p>I was not following along with the Polonius progress  of the group there doing that as closely as I would have liked.</p>",
        "id": 127269328,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622414
    },
    {
        "content": "<p>so is there anyone present right now who was part of that effort?</p>",
        "id": 127269335,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622429
    },
    {
        "content": "<p>well there is at least a graphviz PR: <a href=\"https://github.com/rust-lang-nursery/polonius/pull/63\" target=\"_blank\" title=\"https://github.com/rust-lang-nursery/polonius/pull/63\">https://github.com/rust-lang-nursery/polonius/pull/63</a></p>",
        "id": 127269385,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622458
    },
    {
        "content": "<p>I did tell the people there about the meeting tonight. In hindsight, I probably should have tried to get some peoples emails (to invite them to the meeting formally). But a number of them <em>are</em>/<em>were</em> logged into Zulip, so I figured it was worth a shot to ask...</p>",
        "id": 127269402,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622495
    },
    {
        "content": "<blockquote>\n<p>so is there anyone present right now who was part of that effort?</p>\n</blockquote>\n<p>I am. But on the very shaky internet connection.</p>",
        "id": 127269423,
        "sender_full_name": "Vytautas Astrauskas [he/him]",
        "timestamp": 1527622531
    },
    {
        "content": "<p>Maybe it is worth pinging <span class=\"user-mention\" data-user-id=\"*\">@everyone</span> ?</p>",
        "id": 127269476,
        "sender_full_name": "Vytautas Astrauskas [he/him]",
        "timestamp": 1527622574
    },
    {
        "content": "<p>Oh @everyone that is a very good idea.</p>",
        "id": 127269481,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622586
    },
    {
        "content": "<p>In the meantime: <span class=\"user-mention\" data-user-id=\"116109\">@Vytautas Astrauskas</span> would you be interested in trying to summarize the outcome (or intermediate state) of the various efforts that went on there? Niko's already pointed out the graphviz PR</p>",
        "id": 127269499,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622620
    },
    {
        "content": "<p>If you go silent for too long, we'll just assume that you've lost connectivity. :)</p>",
        "id": 127269517,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622637
    },
    {
        "content": "<p>I know there were also some investigations into <a href=\"#narrow/stream/122657-wg-nll/subject/compress-the-cfg.20(polonius.2320)\" title=\"#narrow/stream/122657-wg-nll/subject/compress-the-cfg.20(polonius.2320)\">\"compressing the CFG\"</a> though I think it didn't really yet yield actionable fruit</p>",
        "id": 127269539,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622673
    },
    {
        "content": "<p>Rustc is using AllFacts and Output from polonius-engine</p>",
        "id": 127269602,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622712
    },
    {
        "content": "<p>this is indeed very exciting!</p>",
        "id": 127269621,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622741
    },
    {
        "content": "<p>did that PR land?</p>",
        "id": 127269625,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622744
    },
    {
        "content": "<p>there's the compare-mode=polonius, PR not merged yet</p>",
        "id": 127269628,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622747
    },
    {
        "content": "<p>yes, it did</p>",
        "id": 127269632,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622751
    },
    {
        "content": "<p>(one thing we noticed with that PR was there are some tests failing)</p>",
        "id": 127269646,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622771
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> that's great.  Has the use of AllFacts + Output given us any interesting feedback about whether/where the polonius system is incorrect</p>",
        "id": 127269653,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622784
    },
    {
        "content": "<p>?</p>",
        "id": 127269654,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622785
    },
    {
        "content": "<p>it is :)</p>",
        "id": 127269658,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622790
    },
    {
        "content": "<p>perhaps the \"some tests failing\" is that</p>",
        "id": 127269660,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622791
    },
    {
        "content": "<p>so that will take some investigation</p>",
        "id": 127269671,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622802
    },
    {
        "content": "<p>yesterday I've pasted a huge output</p>",
        "id": 127269705,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622804
    },
    {
        "content": "<p>the errors looked like errors I had seen before</p>",
        "id": 127269713,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622808
    },
    {
        "content": "<p>let me try to find it again</p>",
        "id": 127269715,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622809
    },
    {
        "content": "<p>That actually gives me some comfort</p>",
        "id": 127269728,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622818
    },
    {
        "content": "<p>but I didn't take time to investigate deeply</p>",
        "id": 127269729,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622818
    },
    {
        "content": "<p>with something like this</p>",
        "id": 127269731,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622822
    },
    {
        "content": "<p>if it works right out of the box</p>",
        "id": 127269734,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622826
    },
    {
        "content": "<p>when its a big huge change</p>",
        "id": 127269737,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622834
    },
    {
        "content": "<p>my immediate suspicion is \"that isn't <em>really</em> integrated...\"</p>",
        "id": 127269746,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622845
    },
    {
        "content": "<p>:)</p>",
        "id": 127269747,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622849
    },
    {
        "content": "<p>Okay so that makes me pretty happy</p>",
        "id": 127269758,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622871
    },
    {
        "content": "<p><a href=\"https://gist.github.com/spastorino/ed32ad31bb3f094aa86d103f5d9cc507\" target=\"_blank\" title=\"https://gist.github.com/spastorino/ed32ad31bb3f094aa86d103f5d9cc507\">https://gist.github.com/spastorino/ed32ad31bb3f094aa86d103f5d9cc507</a></p>",
        "id": 127269762,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527622887
    },
    {
        "content": "<p>that .. could be much much worse!</p>",
        "id": 127269812,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622927
    },
    {
        "content": "<p>so — in terms of the upcoming week — i guess that as far as polonius goes, isolating some of those failures is an obvious \"to do\" item</p>",
        "id": 127269820,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622937
    },
    {
        "content": "<p>I believe many of them have a common cause, as I said; it's a set of failures I saw before</p>",
        "id": 127269826,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527622952
    },
    {
        "content": "<p>I assume that the people who were doing integration are the obvious people to spearhead investigation there</p>",
        "id": 127269836,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622982
    },
    {
        "content": "<p>does that sound correct to others?</p>",
        "id": 127269844,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527622997
    },
    {
        "content": "<p>could be, doesn't have to be</p>",
        "id": 127269851,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623007
    },
    {
        "content": "<p>this was joint effort between <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> and <span class=\"user-mention\" data-user-id=\"116013\">@qmx</span> , right?</p>",
        "id": 127269856,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623017
    },
    {
        "content": "<p>my feeling is that overall the highest priority thing is probably still to improve the rustc diagnostics</p>",
        "id": 127269871,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623037
    },
    {
        "content": "<p>(as we said this morning)</p>",
        "id": 127269874,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623041
    },
    {
        "content": "<p>(I suppose I could just go look at the  listed of landed PR's)</p>",
        "id": 127269913,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623044
    },
    {
        "content": "<p>so yeah, okay, so lets talk about that, and about prioriization in general</p>",
        "id": 127269929,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623054
    },
    {
        "content": "<p>So <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> and <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> are obvious very excited about Polonius integration</p>",
        "id": 127269939,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623074
    },
    {
        "content": "<p>but at the same time, we cannot depend on that actually <em>working</em> soon enough for the timeline that we have in mind for deploying NLL</p>",
        "id": 127269953,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623102
    },
    {
        "content": "<p>so the plan of record was and continues to be: We want to initially deploy using the current mir-borrowck NLL code. It won't be as precise an analysis as we want. But it will fix a lot of bugs</p>",
        "id": 127269983,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623156
    },
    {
        "content": "<p>and such a deploying will be a good starting point for  finding out cases where people were depending on the existing unsoundness/weakness in the AST borrow-checker.</p>",
        "id": 127270044,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623194
    },
    {
        "content": "<p>Thus, we've got this priority scheme for how to address issues</p>",
        "id": 127270061,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623209
    },
    {
        "content": "<blockquote>\n<p>so the plan of record was and continues to be: We want to initially deploy using the current mir-borrowck NLL code. It won't be as precise an analysis as we want. But it will fix a lot of bugs</p>\n</blockquote>\n<p>when you say deploy, what do you refer to exactly?</p>",
        "id": 127270074,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623232
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> good question</p>",
        "id": 127270083,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623244
    },
    {
        "content": "<p>remove the feature flag and be the default thing?</p>",
        "id": 127270084,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623248
    },
    {
        "content": "<p>is this for 2018 edition?</p>",
        "id": 127270086,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623255
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> that's close to the idea</p>",
        "id": 127270091,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623262
    },
    {
        "content": "<p>no</p>",
        "id": 127270094,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623263
    },
    {
        "content": "<p>or, specifically I meant: no this is not <em>specific</em> to the edition</p>",
        "id": 127270099,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623274
    },
    {
        "content": "<p>(that is, whatever we do would hopefully apply to all code)</p>",
        "id": 127270140,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> To be clear, our plan is <em>not</em> just to turn on <code>#![feature(nll)]</code> by default and hope for the best</p>",
        "id": 127270161,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623312
    },
    {
        "content": "<p>yeah, it makes sense to no be specific to edition because working code will continue working</p>",
        "id": 127270164,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623314
    },
    {
        "content": "<p>/me has no desire to maintain two borrow checkers :)</p>",
        "id": 127270179,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623340
    },
    {
        "content": "<p>The deployment plan, at least as I understand it</p>",
        "id": 127270183,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623341
    },
    {
        "content": "<p>(again Niko may have revised his attitude about this idea, maybe)</p>",
        "id": 127270193,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623355
    },
    {
        "content": "<p>is/was to initially keep AST-borrowck as well as MIR-borrowck</p>",
        "id": 127270206,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623372
    },
    {
        "content": "<p>(not forever and ever)</p>",
        "id": 127270214,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623383
    },
    {
        "content": "<p>we'd get rid of <code>#![feature(nll)]</code></p>",
        "id": 127270225,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623401
    },
    {
        "content": "<p>instead, we'd run both AST-borrowck and MIR-borrowck.</p>",
        "id": 127270282,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623410
    },
    {
        "content": "<p>If MIR-borrowck accepts your code, then your code is accepted.</p>",
        "id": 127270287,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623420
    },
    {
        "content": "<p>I'd say if one borrowck accepts the code is accepted, no?</p>",
        "id": 127270295,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623437
    },
    {
        "content": "<p>If MIR-borrowck rejects your code, then we consult the output of AST-borrowck. If AST-borrowck accepts it, then we issue a warning</p>",
        "id": 127270302,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623444
    },
    {
        "content": "<p>Well, not quite</p>",
        "id": 127270305,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623451
    },
    {
        "content": "<p>if AST-borrowck accepts and MIR-borrowck rejects I'd accept the code and file an issue to rustc :P</p>",
        "id": 127270307,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623457
    },
    {
        "content": "<p>We want to warn someone that their code will be rejected in the future</p>",
        "id": 127270314,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623467
    },
    {
        "content": "<p>hmm that's not qutie whatI had in mind</p>",
        "id": 127270322,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623481
    },
    {
        "content": "<p>when we eventually turn off AST-borrowck and rely solely on MIR-borrowck (or some variant implementation of NLL)</p>",
        "id": 127270323,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623482
    },
    {
        "content": "<p>I had in mind \"run the AST checker — if it reports no errors, run MIR borrowck\"</p>",
        "id": 127270326,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623492
    },
    {
        "content": "<p>Ah, see, this is why its good to review these things</p>",
        "id": 127270328,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623494
    },
    {
        "content": "<p>but are there cases where that happens not being a bug?</p>",
        "id": 127270330,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527623495
    },
    {
        "content": "<p>this means you don't enjoy the (full) benefits of NLL though, just see warnings about the bugs we're gonna fix</p>",
        "id": 127270349,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623514
    },
    {
        "content": "<p>the <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> plan also makes sense, modulo some complications around region inference</p>",
        "id": 127270396,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623528
    },
    {
        "content": "<p>My plan is documented at: <a href=\"https://github.com/rust-lang/rust/issues/46908\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/46908\">https://github.com/rust-lang/rust/issues/46908</a></p>",
        "id": 127270422,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623570
    },
    {
        "content": "<p>(that is, there are some errors reported in today's regionck that NLL would ultimately accept, and I'm not sure how best to deal with that)</p>",
        "id": 127270425,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623572
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> I want to try to clarify whether you are talking about a difference in implementation strategy, or a difference in user experience</p>",
        "id": 127270449,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623612
    },
    {
        "content": "<p>I guess I didn't read that issue carefully enough :)</p>",
        "id": 127270451,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623616
    },
    {
        "content": "<p>the issue I linked to shows the \"truth table\" of what results I expect from each combination of runs</p>",
        "id": 127270466,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623633
    },
    {
        "content": "<blockquote>\n<p>different in implementation strategy, or a difference in user experience</p>\n</blockquote>\n<p>both? :)</p>",
        "id": 127270467,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623635
    },
    {
        "content": "<p>in particular, if we just run the AST first, and run MIR only when it succeeds, then this case operates differently:</p>\n<blockquote>\n<p>If AST-borrowck rejects the code and MIR-borrowck accepts, then accept. (Indeed, this is the point of NLL, to start accepting a broader swath of code.)</p>\n</blockquote>",
        "id": 127270522,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623672
    },
    {
        "content": "<p>but it's very easy to do :)</p>",
        "id": 127270525,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623681
    },
    {
        "content": "<p>Okay then I am indeed confused</p>",
        "id": 127270528,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623689
    },
    {
        "content": "<p>tbh I hadn't really thought about the alternative you are proposing here, it's not the usual way we do things</p>",
        "id": 127270531,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623696
    },
    {
        "content": "<p>but I see the advantage</p>",
        "id": 127270535,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623699
    },
    {
        "content": "<p>because I had thought that part of the idea of the deployment was to let us advertise the advantage of NLL very soon</p>",
        "id": 127270545,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623711
    },
    {
        "content": "<p>usually we run the old code (which has bugs); if it errors, great. If not, we run the new, stricter check. If <em>it</em> errors, we issue a warning.</p>",
        "id": 127270551,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623719
    },
    {
        "content": "<p>/me had thought that we had actually gone over the options in this truth table pretty carefully in some 1:1</p>",
        "id": 127270557,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623732
    },
    {
        "content": "<p>well, specifically I wanted us to hvae two-phase borrows</p>",
        "id": 127270558,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623733
    },
    {
        "content": "<p>so as to mitigate the impact</p>",
        "id": 127270561,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623739
    },
    {
        "content": "<p>that is, if there is an unsoundness that would ultimately be accepted because NLL, you still don't get an error</p>",
        "id": 127270576,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623758
    },
    {
        "content": "<p>but you don't get to use NLL otherwise (this is the downside of the approach)</p>",
        "id": 127270615,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623766
    },
    {
        "content": "<blockquote>\n<p>that is, if there is an unsoundness that would ultimately be accepted because NLL, you still don't get an error</p>\n</blockquote>\n<p>I don't understand the scenario you outline here</p>",
        "id": 127270629,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623790
    },
    {
        "content": "<p>are you assuming there is some bug in NLL in that scenario?</p>",
        "id": 127270636,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623809
    },
    {
        "content": "<p>to repeat though I'm not saying what I had in mind is better :) it's just the usual way we've done these sorts of transitions. But in those cases, I suspect the new analysis was always <em>strictly</em> stricter (that is, it only produced new errors)</p>",
        "id": 127270638,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623812
    },
    {
        "content": "<blockquote>\n<p>are you assuming there is some bug in NLL in that scenario?</p>\n</blockquote>\n<p>no, I'm not</p>",
        "id": 127270640,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623823
    },
    {
        "content": "<p>I can give you a real example but I'll give you a fake one first</p>",
        "id": 127270659,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623850
    },
    {
        "content": "<p>let's say you had</p>",
        "id": 127270661,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623852
    },
    {
        "content": "<p>then what do you mean \"if there is an unsoundness that would ultimately be accepted because NLL, you still don't get an error\"</p>",
        "id": 127270663,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623854
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span>{\n  let mut x;\n  let p = &amp;x;\n  use(p); // last use of `p`\n\n  ignored_write(&amp;mut x); // for some reason, AST borrowck ignores this write\n}\n</pre></div>",
        "id": 127270729,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623900
    },
    {
        "content": "<p>under lexical borrowck, that <em>should</em> be an error — but the AST-based borrowck is not reporting it</p>",
        "id": 127270738,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623908
    },
    {
        "content": "<p>under NLL, we no longer ignore the \"ignored write\", but otoh the borrow ends at <code>use(p)</code>, so no future-compat warning is issued</p>",
        "id": 127270747,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623932
    },
    {
        "content": "<p>I remember that there was a specific case where 2-phase borrows helped a lot in this way</p>",
        "id": 127270772,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527623957
    },
    {
        "content": "<p>I'm sorry I still keep needing clarification</p>",
        "id": 127270794,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623990
    },
    {
        "content": "<p>\"We're not reporting it\"</p>",
        "id": 127270798,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527623995
    },
    {
        "content": "<p>you mean today, without NLL?</p>",
        "id": 127270849,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624006
    },
    {
        "content": "<p>rephrased slightly: \"under lexical borrowck, that should be an error — but the AST-based borrowck is not reporting it\"</p>",
        "id": 127270866,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624020
    },
    {
        "content": "<p>So then that would fall into the category of \"AST-borrowck accepts + MIR-borrowck accepts ... \" .... ?</p>",
        "id": 127270882,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624038
    },
    {
        "content": "<p>I am surprised that this is not reported by AST-based</p>",
        "id": 127270886,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527624040
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> it is this is a hypothetical example</p>",
        "id": 127270899,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624053
    },
    {
        "content": "<p>/me is feeling like he must be missing something really deep here</p>",
        "id": 127270902,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624059
    },
    {
        "content": "<p>ahh ok ok</p>",
        "id": 127270911,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1527624067
    },
    {
        "content": "<blockquote>\n<p>So then that would fall into the category of \"AST-borrowck accepts + MIR-borrowck accepts ... \" .... ?</p>\n</blockquote>\n<p>yes</p>",
        "id": 127270920,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624081
    },
    {
        "content": "<p>...... which is handled the same way in either deployment strategy under discussion, surely ... ?</p>",
        "id": 127270929,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624103
    },
    {
        "content": "<p>so there are two ways to do this:</p>\n<ul>\n<li>\n<p>Niko's original plan</p>\n<ul>\n<li>run normal regionck and AST-based checker, report errors as hard errors<ul>\n<li>if no error, run MIR-based checker, reporting errors as \"future compat warnings\"</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Felix plan</p>\n<ul>\n<li>run normal regionck, presumably reporting errors</li>\n<li>run AST-based borrowck, storing errors for later</li>\n<li>run MIR-based borrowck, storing errors for later</li>\n<li>consider errors from (AST, MIR):<ul>\n<li>if only AST got errors: ignore them</li>\n<li>if AST &amp; MIR got errors: display AST errors</li>\n<li>if only MIR got errors:  display as future-compat</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>",
        "id": 127271069,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624236
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> does that sound correct? (or at least equivalent)</p>",
        "id": 127271112,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624246
    },
    {
        "content": "<p>I see pros/cons to the \"felix plan\"</p>",
        "id": 127271118,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624259
    },
    {
        "content": "<p>There's a reason I tried to present this as a truth table rather than an algorithm...</p>",
        "id": 127271127,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624272
    },
    {
        "content": "<p>ok, hold up :)</p>",
        "id": 127271140,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624289
    },
    {
        "content": "<p>(I understand that the issue I linked did mix in algorithmic details about e.g. cancelling errors)</p>",
        "id": 127271175,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624351
    },
    {
        "content": "<p>truth table:</p>\n<p>borrowck=compare plan: </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>MIR got no errors</th>\n<th>MIR got errors</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AST got no errors</td>\n<td>no error reported</td>\n<td>future-compat warnings reported</td>\n</tr>\n<tr>\n<td>AST got errors</td>\n<td>no error reported</td>\n<td>AST errors reported</td>\n</tr>\n</tbody>\n</table>",
        "id": 127271234,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624377
    },
    {
        "content": "<p>Ah okay</p>",
        "id": 127271249,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624402
    },
    {
        "content": "<p>plan Niko was expecting:</p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>MIR got no errors</th>\n<th>MIR got errors</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AST got no errors</td>\n<td>no error reported</td>\n<td>future-compat warnings reported</td>\n</tr>\n<tr>\n<td>AST got errors</td>\n<td>AST errors reported</td>\n<td>AST errors reported</td>\n</tr>\n</tbody>\n</table>",
        "id": 127271251,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624402
    },
    {
        "content": "<p>so that is focusing on user experience</p>",
        "id": 127271252,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624407
    },
    {
        "content": "<p>note this comment in the issue I linked: <a href=\"https://github.com/rust-lang/rust/issues/46908#issuecomment-353359157\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/46908#issuecomment-353359157\">https://github.com/rust-lang/rust/issues/46908#issuecomment-353359157</a></p>",
        "id": 127271259,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624418
    },
    {
        "content": "<p>I see pros/cons for user experience</p>",
        "id": 127271268,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624427
    },
    {
        "content": "<p>pro: you experience NLL faster</p>",
        "id": 127271273,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624434
    },
    {
        "content": "<p>so in fact I think there's a third table that was my intention</p>",
        "id": 127271279,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624439
    },
    {
        "content": "<p>con: there is some \"unevenness\" in the errors</p>",
        "id": 127271281,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624443
    },
    {
        "content": "<p>(or at least my most recent intention)</p>",
        "id": 127271288,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624452
    },
    {
        "content": "<p>I see</p>",
        "id": 127271294,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624463
    },
    {
        "content": "<p>Hmm I don't think I know how to create a table here. :)</p>",
        "id": 127271301,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624472
    },
    {
        "content": "<p>truth table:</p>\n<p>borrowck=compare plan: </p>\n<table>\n<thead>\n<tr>\n<th></th>\n<th>MIR got no errors</th>\n<th>MIR got errors</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>AST got no errors</td>\n<td>no error reported</td>\n<td>future-compat warnings reported</td>\n</tr>\n<tr>\n<td>AST got errors</td>\n<td>no error reported</td>\n<td>MIR errors reported</td>\n</tr>\n</tbody>\n</table>",
        "id": 127271303,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624479
    },
    {
        "content": "<p>Yes, that looks like what I wanted</p>",
        "id": 127271353,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624493
    },
    {
        "content": "<p>I think that does resolve some of my concerns</p>",
        "id": 127271355,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624495
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 127271359,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624500
    },
    {
        "content": "<p>in particular, we only ever show the user mir-based errors</p>",
        "id": 127271360,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624502
    },
    {
        "content": "<p>however, it ups the ante on getting borrowck error quality improved :)</p>",
        "id": 127271370,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624514
    },
    {
        "content": "<p>yes</p>",
        "id": 127271374,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624519
    },
    {
        "content": "<p>which perhaps segues nicely into the priority list i had mentioned earlier. :) :) :)</p>",
        "id": 127271389,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624537
    },
    {
        "content": "<p>ok, I'm on board with the 3rd plan :) though there is still the complication of regionck errors</p>",
        "id": 127271391,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624538
    },
    {
        "content": "<p>but yes, carry on :)</p>",
        "id": 127271393,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624543
    },
    {
        "content": "<p>Okay... so</p>",
        "id": 127271408,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624550
    },
    {
        "content": "<p>Clearly the question of how to actually deploy hasn't been hammered out</p>",
        "id": 127271415,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624560
    },
    {
        "content": "<p>:)</p>",
        "id": 127271418,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624563
    },
    {
        "content": "<p>But you can all see how there are a lot of options with various tradeoffs</p>",
        "id": 127271430,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624588
    },
    {
        "content": "<p>probably we didn't need to get into the weeds on that, but I'm glad we sorted it out :)</p>",
        "id": 127271431,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624589
    },
    {
        "content": "<p>The main thing is, we <em>would</em> like to turn on NLL in some fashion</p>",
        "id": 127271438,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624601
    },
    {
        "content": "<p>I personally had been thinking of it as something we want to do in time for the 2018 edition</p>",
        "id": 127271491,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624615
    },
    {
        "content": "<p>it would still be applied to the 2015 edition</p>",
        "id": 127271498,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624623
    },
    {
        "content": "<p>(I assume/hope)</p>",
        "id": 127271506,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624630
    },
    {
        "content": "<p>but in terms of marketing push</p>",
        "id": 127271511,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624635
    },
    {
        "content": "<p>and/or getting people to deal with writing their code to conform to the rules imposed by the NLL system</p>",
        "id": 127271527,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624652
    },
    {
        "content": "<p>(namely, there are soundness fixes, especially around <code>match</code>, that we are deploying as part of NLL)</p>",
        "id": 127271541,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624669
    },
    {
        "content": "<p>it just seemed to me like a good idea if we could get something out the door</p>",
        "id": 127271555,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624686
    },
    {
        "content": "<p>(I'm gonna have to drop off soon)</p>",
        "id": 127271560,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624690
    },
    {
        "content": "<p>If it turns out that we cannot get <em>anything</em> ready in time, that's not the end of the world</p>",
        "id": 127271572,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624712
    },
    {
        "content": "<p>NLL could hypothetically be deployed in a future version of <code>rustc</code> (I think); it doesn't <em>have</em> to be released as part of the 2018 edition</p>",
        "id": 127271618,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624747
    },
    {
        "content": "<p>(I would say though <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> that going with MIR errors as the things we display means though that getting all the suggetions right and so forth is higher in priority than I thought)</p>",
        "id": 127271622,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624749
    },
    {
        "content": "<blockquote>\n<p>NLL could hypothetically be deployed in a future version of <code>rustc</code> (I think); it doesn't <em>have</em> to be released as part of the 2018 edition</p>\n</blockquote>\n<p>well, true, but we should not think this way :)</p>",
        "id": 127271630,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624758
    },
    {
        "content": "<p>Yes of course</p>",
        "id": 127271637,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624770
    },
    {
        "content": "<p>I'm just trying to say that the work here wouldn't block the 2018 edition.</p>",
        "id": 127271651,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624786
    },
    {
        "content": "<p>I assume you agree with that?</p>",
        "id": 127271654,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624792
    },
    {
        "content": "<p>I do not</p>",
        "id": 127271658,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624796
    },
    {
        "content": "<p>Okay</p>",
        "id": 127271659,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624798
    },
    {
        "content": "<p>I mean I think it is true in a technical sense</p>",
        "id": 127271661,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624805
    },
    {
        "content": "<p>that's a topic you and I can chat about later</p>",
        "id": 127271662,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624809
    },
    {
        "content": "<p>I just think that NLL is <em>major</em> feature</p>",
        "id": 127271663,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624810
    },
    {
        "content": "<p>:)</p>",
        "id": 127271664,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624810
    },
    {
        "content": "<p>but yeah :)</p>",
        "id": 127271668,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624813
    },
    {
        "content": "<p>TL;DR it's super important we get the diagnostics working I guess :)</p>",
        "id": 127271673,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527624820
    },
    {
        "content": "<p>Right right</p>",
        "id": 127271674,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624826
    },
    {
        "content": "<p>SO</p>",
        "id": 127271675,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624827
    },
    {
        "content": "<p>the whole point</p>",
        "id": 127271677,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624830
    },
    {
        "content": "<p>since we <strong>do</strong> want NLL as part of the 2018 edition</p>",
        "id": 127271686,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624841
    },
    {
        "content": "<p>the current strategy we are planning on</p>",
        "id": 127271741,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624871
    },
    {
        "content": "<p>is to deploy the current MIR-borrowck based NLL</p>",
        "id": 127271748,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624885
    },
    {
        "content": "<p>and thus this yields the following way to prioritize bugs</p>",
        "id": 127271752,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624901
    },
    {
        "content": "<p>1. NLL-sound takes top priority</p>",
        "id": 127271763,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624914
    },
    {
        "content": "<p>This is especially important in a world where if \"AST-borrowck got errors and MIR-borrowck didn't get errors\" implies code is accepted</p>",
        "id": 127271787,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624958
    },
    {
        "content": "<p>then its absolutely top priority to address NLL-soundness issues</p>",
        "id": 127271840,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624978
    },
    {
        "content": "<p>now as you can see from the above, Niko may have been thinking of a world where we wouldn't do that</p>",
        "id": 127271848,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527624994
    },
    {
        "content": "<p>(i.e. where AST-borrowck rejecting the code would mean that we would report the AST borrowck errors, even if MIR-borrowck accepted with no errors)</p>",
        "id": 127271873,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625029
    },
    {
        "content": "<p>in that world ... maybe the prioritiy scheme I've been assuming is wrong</p>",
        "id": 127271881,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625042
    },
    {
        "content": "<p>But in the end, in the long term</p>",
        "id": 127271888,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625054
    },
    {
        "content": "<p>NLL-soundness issues simply <em>have</em> to get fixed</p>",
        "id": 127271893,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625064
    },
    {
        "content": "<p>Luckily</p>",
        "id": 127271894,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625066
    },
    {
        "content": "<p>we're really close to fixing all of them, I think.</p>",
        "id": 127271901,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625077
    },
    {
        "content": "<p>okay, so, next up</p>",
        "id": 127271941,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625085
    },
    {
        "content": "<p>2. NLL-diagnostic bugs</p>",
        "id": 127271945,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625089
    },
    {
        "content": "<p>these are second highest priority. And you can see from the above conversation that they may be even more important than Niko had already thought they were</p>",
        "id": 127271963,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625127
    },
    {
        "content": "<p>In particular, NLL-diagnostics bugs are higher priority than getting polonius into shape</p>",
        "id": 127271979,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625146
    },
    {
        "content": "<p>(because, as noted above, we are currently planning for MIR-borrowck to be the basis for the initial NLL deployment. Not polonius.)</p>",
        "id": 127271999,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625174
    },
    {
        "content": "<p>There a <em>lot</em> of NLL-diagnostic bugs currently open</p>",
        "id": 127272007,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625198
    },
    {
        "content": "<p>but it is not clear how many of them are dupes of each other or end up having the same root cause</p>",
        "id": 127272065,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625213
    },
    {
        "content": "<p>Niko did say he would have to drop off</p>",
        "id": 127272075,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625222
    },
    {
        "content": "<p>/me realizes now what the <em>two-pronged approach</em> really meant</p>",
        "id": 127272078,
        "sender_full_name": "qmx",
        "timestamp": 1527625225
    },
    {
        "content": "<p>which is a shame because I think he had some things to say here</p>",
        "id": 127272089,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625235
    },
    {
        "content": "<p>in terms of pointing out some good starter bugs to attack</p>",
        "id": 127272102,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625249
    },
    {
        "content": "<p>I posted a few links in the paper</p>",
        "id": 127272113,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527625264
    },
    {
        "content": "<p>I will try to post some more later</p>",
        "id": 127272119,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527625268
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116013\">@qmx</span> to be clear, we want development on polonius to continue</p>",
        "id": 127272121,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625269
    },
    {
        "content": "<p>/me afk-ish</p>",
        "id": 127272123,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527625270
    },
    {
        "content": "<p>obviously people are going to choose what they want to work on</p>",
        "id": 127272141,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625294
    },
    {
        "content": "<p>but, perhaps even more importantly</p>",
        "id": 127272146,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625301
    },
    {
        "content": "<p>Polonius is a <em>crucial</em> part of our long-term straetegy</p>",
        "id": 127272152,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625311
    },
    {
        "content": "<p>because there is a third category of NLL bug I did not mention in this prioritization scheme</p>",
        "id": 127272195,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625325
    },
    {
        "content": "<p>and that is NLL-complete(ness) bugs</p>",
        "id": 127272202,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625331
    },
    {
        "content": "<p>i.e. the examples of source inputs that we believe NLL should accept</p>",
        "id": 127272216,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625354
    },
    {
        "content": "<p>but for some reason  MIR-borrowck does not today accept</p>",
        "id": 127272221,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625366
    },
    {
        "content": "<p>We are banking on Polonius to be our long term way to address NLL-complete bugs</p>",
        "id": 127272246,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625403
    },
    {
        "content": "<p>as in, at some point in the future, assuming we get the diagnostic issues and performance issues  with Polonius all  resolved</p>",
        "id": 127272265,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625435
    },
    {
        "content": "<p>we will switch to it, and magically NLL will just become smarter</p>",
        "id": 127272318,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625452
    },
    {
        "content": "<p>and accept more code than before</p>",
        "id": 127272321,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625457
    },
    {
        "content": "<p>(deleted)</p>",
        "id": 127272332,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625465
    },
    {
        "content": "<p>So, because we are treating Polonius as our secret weapon for dealing with NLL-completeness in the long term</p>",
        "id": 127272342,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625499
    },
    {
        "content": "<p>that gives us some freedom to downgrade the priority on NLL-complete bugs that have been filed against MIR-borrowck.</p>",
        "id": 127272358,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625527
    },
    {
        "content": "<p>Now, to be clear: Source code that was accepted by AST-borrowck and is supposed to be accepted by NLL, obviously those cases have to keep working</p>",
        "id": 127272408,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625565
    },
    {
        "content": "<p>we cannot let those slide</p>",
        "id": 127272415,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625573
    },
    {
        "content": "<p>But the cases where AST-borrowck rejects the code and NLL should accept it ... those are ones where, if MIR-borrowck is rejecting it today, we figure we are better off putting effort into other tasks.</p>",
        "id": 127272463,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625646
    },
    {
        "content": "<p>rather than trying to make MIR-borrowck smarter</p>",
        "id": 127272470,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625659
    },
    {
        "content": "<p>(where those \"other tasks\" are either 1. NLL-soundness issues with MIR-borrowck, 2. NLL-diagnostics with MIR-borrowck, or 3. Getting Polonius into shape.)</p>",
        "id": 127272520,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625704
    },
    {
        "content": "<p>Does this all make sense to the people reading along?</p>",
        "id": 127272521,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625712
    },
    {
        "content": "<p>we are coming close to an hour for this half-hour meeting...</p>",
        "id": 127272528,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625734
    },
    {
        "content": "<p>/me just realized he never posted a status update in the triage doc, either</p>",
        "id": 127272549,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625779
    },
    {
        "content": "<p>Okay well I guess the point of all this is</p>",
        "id": 127272599,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625807
    },
    {
        "content": "<p>If you are happily working on polonius currently, and want to continue doing so, please <em>do</em> continue doing so</p>",
        "id": 127272613,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625823
    },
    {
        "content": "<p>But if you are looking for something to do, either because you're just getting started, or if you feel like getting your feet wet elsewhere</p>",
        "id": 127272626,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625846
    },
    {
        "content": "<p>then please do look at the \"diagnostic issues worth tackling\" that Niko links in <a href=\"https://paper.dropbox.com/doc/Non-lexical-lifetimes-NLL-Triage-Em2cJrvxQMMFWLE7lE5Be\" target=\"_blank\" title=\"https://paper.dropbox.com/doc/Non-lexical-lifetimes-NLL-Triage-Em2cJrvxQMMFWLE7lE5Be\">https://paper.dropbox.com/doc/Non-lexical-lifetimes-NLL-Triage-Em2cJrvxQMMFWLE7lE5Be</a></p>",
        "id": 127272641,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527625864
    },
    {
        "content": "<p>even if we didn't cover everything, the whole conversation was very useful and made things clearer. Thanks!</p>",
        "id": 127273642,
        "sender_full_name": "qmx",
        "timestamp": 1527627172
    },
    {
        "content": "<blockquote>\n<p>however, [the plan to only show mir-based errors] ups the ante on getting borrowck error quality improved :)</p>\n</blockquote>\n<p>continuing my review of the <a href=\"https://paper.dropbox.com/doc/NLL-stderr-diagnostic-deviations-KzroSvNgQ7lip3WQyiLTa\" target=\"_blank\" title=\"https://paper.dropbox.com/doc/NLL-stderr-diagnostic-deviations-KzroSvNgQ7lip3WQyiLTa\">NLL-stderr-diagnostic-deviations</a>, I have to admit that recreating all of the suggestions that have been implemented for AST-borrowck does seem like quite a daunting task.</p>",
        "id": 127275665,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527629956
    },
    {
        "content": "<p>and thus perhaps <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> has a good point in arguing that the initial deployment of NLL should still issue all errors signaled by AST-borrowck.</p>",
        "id": 127275728,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527630008
    },
    {
        "content": "<p>I have a feeling if we focus on it it would go faster than expected</p>",
        "id": 127275731,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630012
    },
    {
        "content": "<p>but I guess we can test that hypothesis :)</p>",
        "id": 127275735,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630023
    },
    {
        "content": "<p>However, I fear that if we do that (and thus reject all code that AST-borrowck rejects), NLL stops looking like much of a feature.</p>",
        "id": 127275746,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527630059
    },
    {
        "content": "<p>(and more of a burden)</p>",
        "id": 127275756,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527630071
    },
    {
        "content": "<p>Of course that would only be a relatively short term status...</p>",
        "id": 127275765,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527630086
    },
    {
        "content": "<blockquote>\n<p>but I guess we can test that hypothesis :)</p>\n</blockquote>\n<p>All those AST-borrowck diagnostics were, at least in part, the result of a massive distributed effort by various volunteers, right? We can probably recreate that. :)</p>",
        "id": 127275828,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527630140
    },
    {
        "content": "<p>I'm sort of persuaded to your plan fwiw :)</p>",
        "id": 127275831,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630149
    },
    {
        "content": "<p>I was worried about \"mixing\" AST and MIR-based diagnostics</p>",
        "id": 127275836,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630160
    },
    {
        "content": "<p>but I hadn't thought of the \"Third Way\"</p>",
        "id": 127275838,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630166
    },
    {
        "content": "<p>(reporting MIR errors  as hard errors)</p>",
        "id": 127275849,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630185
    },
    {
        "content": "<p>well, semi-hard errors</p>",
        "id": 127275926,
        "sender_full_name": "pnkfelix",
        "timestamp": 1527630265
    },
    {
        "content": "<p>right, hard errors if AST borrowck failed</p>",
        "id": 127275932,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1527630280
    }
]
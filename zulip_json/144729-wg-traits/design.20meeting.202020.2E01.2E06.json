[
    {
        "content": "<p>Hi <span class=\"user-group-mention\" data-user-group-id=\"692\">@WG-traits</span> A bit early, but I figured I would start this so we can maybe start listing possible topics for today?</p>",
        "id": 184934566,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578336742
    },
    {
        "content": "<p>I was just catching up on things</p>",
        "id": 184934622,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336793
    },
    {
        "content": "<p>I would say:</p>",
        "id": 184934627,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336797
    },
    {
        "content": "<ul>\n<li>tracing</li>\n</ul>",
        "id": 184934635,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336800
    },
    {
        "content": "<ul>\n<li>performance optimizations</li>\n</ul>",
        "id": 184934656,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336817
    },
    {
        "content": "<p>ha, I'm also writing a few things</p>",
        "id": 184934658,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578336817
    },
    {
        "content": "<ul>\n<li>general roadmap thoughts (I had a long chat with <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> that's gotten me thinking)</li>\n</ul>",
        "id": 184934698,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336841
    },
    {
        "content": "<ul>\n<li>chalk-ir / ty plans</li>\n</ul>",
        "id": 184934767,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336866
    },
    {
        "content": "<ul>\n<li>general sync up :)</li>\n</ul>",
        "id": 184934789,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578336883
    },
    {
        "content": "<p>Those all sound good</p>",
        "id": 184934850,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578336921
    },
    {
        "content": "<p>In addition I would say:</p>",
        "id": 184934862,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578336927
    },
    {
        "content": "<p>So many things to talk about <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 184934892,
        "sender_full_name": "detrumi",
        "timestamp": 1578336956
    },
    {
        "content": "<ul>\n<li><a href=\"https://github.com/rust-lang/chalk/issues/302\" target=\"_blank\" title=\"https://github.com/rust-lang/chalk/issues/302\">https://github.com/rust-lang/chalk/issues/302</a> (see my topic for rambling)</li>\n</ul>",
        "id": 184934896,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578336960
    },
    {
        "content": "<p>haven't caught up with that thread yet</p>",
        "id": 184934990,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337001
    },
    {
        "content": "<ul>\n<li><code>QuantumExceeded</code> &amp; fuel (some thoughts here: <a href=\"#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Changing.20CHALK_SOLVER_MAX_SIZE/near/184862989\" title=\"#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Changing.20CHALK_SOLVER_MAX_SIZE/near/184862989\">https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Fwg-rls-2.2E0/topic/Changing.20CHALK_SOLVER_MAX_SIZE/near/184862989</a>)</li>\n</ul>",
        "id": 184935007,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337017
    },
    {
        "content": "<ul>\n<li>solver caching <a class=\"stream-topic\" data-stream-id=\"144729\" href=\"/#narrow/stream/144729-wg-traits/topic/Solver.20caching\">#wg-traits &gt; Solver caching</a> also...</li>\n</ul>",
        "id": 184935018,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337029
    },
    {
        "content": "<p>So, how about we tentatively shoot for the following:</p>\n<ul>\n<li>general sync up &amp; going over open PRs (5-10 minutes)</li>\n<li>chalk ir/ty plans/update (5-10 minutes)</li>\n<li>general roadmap ideas (5-10 minutes)<br>\nand then after that we'll see what comes up</li>\n</ul>",
        "id": 184935309,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337203
    },
    {
        "content": "<p>Ah, was gonna suggest to start with one of the higher-level things, to decide on the next steps. So either tracing, general roadmap or chalkir/ty plans</p>",
        "id": 184935337,
        "sender_full_name": "detrumi",
        "timestamp": 1578337222
    },
    {
        "content": "<p>(sounds good to me; hello!)</p>",
        "id": 184935361,
        "sender_full_name": "David Barsky",
        "timestamp": 1578337246
    },
    {
        "content": "<p>I would like to talk about tracing a bit (<span class=\"user-mention\" data-user-id=\"198819\">@David Barsky</span> did you still want to open a PR for that?). So maybe we can add an explicit 5-10 minutes for that</p>",
        "id": 184935442,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337301
    },
    {
        "content": "<p>Anyways, it's 2:01 so let's start?</p>",
        "id": 184935512,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337327
    },
    {
        "content": "<p>I think the general roadmap should maybe come first, but otherwise seems reasonable</p>",
        "id": 184935528,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337335
    },
    {
        "content": "<p>Sure, we can start with that</p>",
        "id": 184935543,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337348
    },
    {
        "content": "<p>In terms of general \"sync up\"...</p>",
        "id": 184935566,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337366
    },
    {
        "content": "<p>Do you want to summarize your convo with <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> ?</p>",
        "id": 184935567,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337366
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"232957\">@Jack Huey</span> i should submit the PR, but i've gotten a bit side-tracked with fixing some bugs, writing docs, and overall, taking a break. I also started mimicking the hierarchal profiling data that rust-analyzer uses</p>",
        "id": 184935614,
        "sender_full_name": "David Barsky",
        "timestamp": 1578337403
    },
    {
        "content": "<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"232957\">Jack Huey</span> i should submit the PR, but i've gotten a bit side-tracked with fixing some bugs, writing docs, and overall, taking a break. I also started mimicking the hierarchal profiling data that rust-analyzer uses</p>\n</blockquote>\n<p>No problem :) I'm pretty excited about it</p>",
        "id": 184935642,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337437
    },
    {
        "content": "<p>Sure. The TL;DR is that we were discussing the question of how much to focus on integrating <em>chalk</em> vs extending rustc, and also looking a bit into what the challenges are around integrating chalk and if we can do it a bit more \"Step by step\"</p>",
        "id": 184935652,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337442
    },
    {
        "content": "<p>Step by step?</p>",
        "id": 184935724,
        "sender_full_name": "detrumi",
        "timestamp": 1578337480
    },
    {
        "content": "<p>I think the outcome was that I was thinking that (a) I think I sort of see the path to extend rustc to handle more of GATs natively, and hopefully to handle lazy norm better, which before I wasn't sure if I saw such a path, and (b) but I still feel like I want to pursue the overall chalk model</p>",
        "id": 184935752,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337506
    },
    {
        "content": "<p>by \"step by step\" what I meant really was</p>",
        "id": 184935765,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337521
    },
    {
        "content": "<p>are there ways to make chalk behave \"more like\" the existing trait solver so we can integrate more easily. I'm not sure about that, I think there might be some room to do so in terms of exploring different kinds of solvers</p>",
        "id": 184935784,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337557
    },
    {
        "content": "<p>Can you elaborate on different kinds of solvers?</p>",
        "id": 184935856,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337597
    },
    {
        "content": "<p>I think that as far as chalk integration goes, we should really be looking at integrating chalk-solve into rustc (with a -Z flag) as a next goal, although I'm not sure how best to balance with \"responding to problems rust-analyzer finds\"</p>",
        "id": 184935914,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337647
    },
    {
        "content": "<p>Which is a few at this point</p>",
        "id": 184936013,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337708
    },
    {
        "content": "<blockquote>\n<p>Can you elaborate on different kinds of solvers?</p>\n</blockquote>\n<p>there are different ways to structure the solver. Chalk used to have a different solver that worked more like rustc, in that it didn't try to enumerate individual solutions -- it looks always for unique answers. I'm trying to remember what some of the problems were that we had with it, I do remember it sometimes was failing to find solutions.</p>",
        "id": 184936018,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337710
    },
    {
        "content": "<p>Yeah, it seems like they're [rust analyzer problems] starting to accumulate</p>",
        "id": 184936029,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337720
    },
    {
        "content": "<p>(Good news is that I can reproduce a couple with existing tests by just setting <code>max_size</code> to 3)</p>",
        "id": 184936067,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337745
    },
    {
        "content": "<p>Yeah I'm also quite curious about the infinite loops that arise with higher max-size values</p>",
        "id": 184936087,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337767
    },
    {
        "content": "<p>I think we need some <em>much</em> more complex tests in chalk to start to see those</p>",
        "id": 184936161,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337806
    },
    {
        "content": "<p>Integrating with rustc should be easier after we've fixed any large problems from the currently found bugs</p>",
        "id": 184936162,
        "sender_full_name": "detrumi",
        "timestamp": 1578337808
    },
    {
        "content": "<p>I don't any now pass a max_size of like 6</p>",
        "id": 184936171,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337823
    },
    {
        "content": "<p>I'm not sure if that's true; I would expect rustc integration to be sort of orthogonal</p>",
        "id": 184936177,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337829
    },
    {
        "content": "<p>I think the immediate steps <em>there</em> are going to be finishing up the work on mapping types</p>",
        "id": 184936202,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337860
    },
    {
        "content": "<p>and then trying to implement the chalk-rust-ir callbacks</p>",
        "id": 184936217,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337877
    },
    {
        "content": "<p>I guess that kind of leads into the chalk-ir update?</p>",
        "id": 184936222,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337885
    },
    {
        "content": "<p>yeah, they're definitely connected</p>",
        "id": 184936235,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337892
    },
    {
        "content": "<p>I guess my main take-away from the conversation with felix was that there is a reasonable path to both improve rustc and keep working on chalk</p>",
        "id": 184936320,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337927
    },
    {
        "content": "<p>is that sort of blocked on compiler team meeting?</p>",
        "id": 184936325,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578337931
    },
    {
        "content": "<p>I need to write-up the plans but some of them are already in progress</p>",
        "id": 184936328,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337934
    },
    {
        "content": "<blockquote>\n<p>is that sort of blocked on compiler team meeting?</p>\n</blockquote>\n<p>I don't think so</p>",
        "id": 184936334,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337940
    },
    {
        "content": "<blockquote>\n<p>I need to write-up the plans but some of them are already in progress</p>\n</blockquote>\n<p>that said, the people in <em>this</em> meeting I thnk are mostly folks who've been hacking on chalk so let's focus on that part of things for now</p>",
        "id": 184936373,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578337956
    },
    {
        "content": "<p>so as far as chalk-ir goes, I mean, I think there is some question as to what the best way is to proceed-- I've kind of been piecemeal making refactorings, but probably the right step is to finish sketching out the end-state and create an issue to help others make some of those changes?</p>",
        "id": 184936420,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338008
    },
    {
        "content": "<p>So, for that, the next steps are to basically write PRs to change chalk-ir to match the proposal? (which you've been doing I think)</p>",
        "id": 184936435,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338020
    },
    {
        "content": "<p>ninjad</p>",
        "id": 184936448,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338032
    },
    {
        "content": "<p>yeah, but there are a few big changes left :)</p>",
        "id": 184936452,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338036
    },
    {
        "content": "<p>in particular</p>",
        "id": 184936498,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338048
    },
    {
        "content": "<p>I think that if we are going to support interning</p>",
        "id": 184936511,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338053
    },
    {
        "content": "<p>we need to be passing around a <code>tcx: &amp;TypeFamily</code> or something; maybe it should be named something else of course</p>",
        "id": 184936529,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338082
    },
    {
        "content": "<p>and the various <code>intern_ty</code> functions need to become <code>&amp;self</code> methods</p>",
        "id": 184936541,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338096
    },
    {
        "content": "<p>this will be an annoying refactoring :)</p>",
        "id": 184936551,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338103
    },
    {
        "content": "<blockquote>\n<p>maybe it should be named something else of course</p>\n</blockquote>\n<p>(probably a name like <code>interner: TypeInterner</code> is the most obvious, side note)</p>",
        "id": 184936586,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338137
    },
    {
        "content": "<p>I really need to read through the current chalk-ir code and get a more general sense of  everything with some of the newer refactors</p>",
        "id": 184936693,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338194
    },
    {
        "content": "<p>the other question is whether the <code>lookup</code> methods (e.g., the one used by <code>ty.data()</code>) should be <code>&amp;self</code>; this would permit interning that is creating integers and be more general, but also more annoying. I would think we would first just make the <code>intern</code> calls into methods</p>",
        "id": 184936697,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338195
    },
    {
        "content": "<p>Not sure what this would look like</p>",
        "id": 184936733,
        "sender_full_name": "detrumi",
        "timestamp": 1578338225
    },
    {
        "content": "<p>(a bit of a off-topic/side thought, but this reminds me a bit of Pyo3's <code>Py</code>/<code>PyObject</code> system)</p>",
        "id": 184936844,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338293
    },
    {
        "content": "<p>so I guess the remaining steps would be:</p>\n<ul>\n<li>finish introducing a few more \"Intern\" points (e.g., <code>TypeName</code>)</li>\n<li>thread through an <code>interner</code> variable and make <code>intern</code> calls into methods</li>\n<li>introduce <code>TyData</code> variant for generator interiors, I think that's the only one missing?</li>\n</ul>\n<p>at that point I think we could take a first stab at modifying rustc to do the mapping</p>",
        "id": 184936845,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338298
    },
    {
        "content": "<p>actually we could start doing it before the third point</p>",
        "id": 184936863,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338317
    },
    {
        "content": "<p>since we can just <code>panic!</code> on missing cases</p>",
        "id": 184936868,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338322
    },
    {
        "content": "<p>it'll probably help us identifying other problems</p>",
        "id": 184936871,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338330
    },
    {
        "content": "<p>Sounds good to me</p>",
        "id": 184936878,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338336
    },
    {
        "content": "<p>to finish the rustc integration, then, we'd also have to implement the <code>RustIrDatabase</code> trait, which provides things like \"information about an impl\"</p>",
        "id": 184936888,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338347
    },
    {
        "content": "<p>it all feels eminently do-able to me but will require some sustained attention I guess</p>",
        "id": 184936905,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338368
    },
    {
        "content": "<p>I left a couple comments on your \"intern substitutions\" pr, but overall looks decent</p>",
        "id": 184936906,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338368
    },
    {
        "content": "<p>Ok, all this sounds good to me</p>",
        "id": 184937013,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338435
    },
    {
        "content": "<p>Move on to general sync-up?</p>",
        "id": 184937018,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338441
    },
    {
        "content": "<blockquote>\n<p>I left a couple comments on your \"intern substitutions\" pr, but overall looks decent</p>\n</blockquote>\n<p>btw I <a href=\"https://github.com/rust-lang/chalk/pull/316#discussion_r363442225\" target=\"_blank\" title=\"https://github.com/rust-lang/chalk/pull/316#discussion_r363442225\">just responded</a> to your substantive question</p>",
        "id": 184937044,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338465
    },
    {
        "content": "<p>one question before we move on</p>",
        "id": 184937063,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338481
    },
    {
        "content": "<p>well I guess the question is: it seems clear that we can make \"individual steps\" for chalk-rustc integration</p>",
        "id": 184937084,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338495
    },
    {
        "content": "<p>I think I can do the same for the \"extend rustc to support gats etc\" plan I was hinting at</p>",
        "id": 184937095,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338506
    },
    {
        "content": "<p>but I think the question is (A) how much to balance the rust-analyzer and optimization work</p>",
        "id": 184937157,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338533
    },
    {
        "content": "<p>and (B) who will do the work and how to help out best there</p>",
        "id": 184937168,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338547
    },
    {
        "content": "<p>I'm specifically pondering if I can make more of a commitment to individual people</p>",
        "id": 184937188,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338561
    },
    {
        "content": "<p>e.g., we could schedule like a regular meeting time</p>",
        "id": 184937197,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338568
    },
    {
        "content": "<p>So, last meeting I put up my TODO for chalk</p>",
        "id": 184937209,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338579
    },
    {
        "content": "<blockquote>\n<p>I'm specifically pondering if I can make more of a commitment to individual people</p>\n</blockquote>\n<p>(vs the more general \"calls for help\" that we sometimes do)</p>",
        "id": 184937241,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338600
    },
    {
        "content": "<blockquote>\n<p>So, last meeting I put up my TODO for chalk</p>\n</blockquote>\n<p>link?</p>",
        "id": 184937265,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338624
    },
    {
        "content": "<p><a href=\"#narrow/stream/144729-wg-traits/topic/design.20meeting.202019.2E12.2E30/near/184494512\" title=\"#narrow/stream/144729-wg-traits/topic/design.20meeting.202019.2E12.2E30/near/184494512\">https://rust-lang.zulipchat.com/#narrow/stream/144729-wg-traits/topic/design.20meeting.202019.2E12.2E30/near/184494512</a></p>",
        "id": 184937334,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338651
    },
    {
        "content": "<p>Which I think mostly still is correct for me</p>",
        "id": 184937391,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338707
    },
    {
        "content": "<p>my impression is that <span class=\"user-mention\" data-user-id=\"232957\">@Jack Huey</span> is having a blast doing the \"tune chalk\" side of things :)</p>",
        "id": 184937406,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338733
    },
    {
        "content": "<p>(vs say rustc-integration)</p>",
        "id": 184937418,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338743
    },
    {
        "content": "<p>But also after that first point is to at least <em>investigate</em> the bugs from rust-analyzer and see if they have \"easy\" fixes vs \"design\" fixes</p>",
        "id": 184937424,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338754
    },
    {
        "content": "<p>I do think that makes a lot of sense</p>",
        "id": 184937467,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338763
    },
    {
        "content": "<p>I am quite enjoying chalk side of things</p>",
        "id": 184937476,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338768
    },
    {
        "content": "<p>in particular my biggest fear for chalk, well, there are maybe 2</p>",
        "id": 184937478,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338770
    },
    {
        "content": "<p>the first one is that the existing <em>solver</em> won't work out because it tries too hard to pursue individual options; I think maybe I shouldn't be as afraid about that, because part of the whole point of chalk was to have the freedom to change the solver strategy</p>",
        "id": 184937515,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338805
    },
    {
        "content": "<p>but the best way to assess that fear is to look at the problems we're having, as you said</p>",
        "id": 184937534,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338825
    },
    {
        "content": "<p>The main danger there is that we make things too complicated</p>",
        "id": 184937567,
        "sender_full_name": "detrumi",
        "timestamp": 1578338866
    },
    {
        "content": "<p>I think several of these issues really only require changes in engine</p>",
        "id": 184937578,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338877
    },
    {
        "content": "<p>but don't quote me on that</p>",
        "id": 184937604,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338883
    },
    {
        "content": "<p>I feel pretty confident this is the case</p>",
        "id": 184937623,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338890
    },
    {
        "content": "<p>I'm basically not sure if the engine design is correct</p>",
        "id": 184937633,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338897
    },
    {
        "content": "<p>the <em>lowering</em> part I think is in the correct area--though there is one big work item there (caching)</p>",
        "id": 184937643,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338913
    },
    {
        "content": "<p>the lowering part seems also to be the most valuable, in that it's the first real definition of what Rust's trait system <em>means</em> :P</p>",
        "id": 184937656,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338932
    },
    {
        "content": "<p>what was your second biggest fear?</p>",
        "id": 184937706,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578338984
    },
    {
        "content": "<blockquote>\n<p>(caching)</p>\n</blockquote>\n<p>and integration with incremental</p>",
        "id": 184937708,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578338985
    },
    {
        "content": "<blockquote>\n<p>what was your second biggest fear?</p>\n</blockquote>\n<p>I was wondering that myself :) maybe I only have 1. I mean I think i'm just afraid of the 'long tail' of diagnostics and other work, and afraid that pursuing it will take a long time where there is a shorter path in rustc to unlock some stuff. Which is a bit why I'm interested in putting in more time this year and trying to pursue both quite seriously.</p>",
        "id": 184937811,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339031
    },
    {
        "content": "<p>to elaborate a bit on the caching/incremental thing: right now, the engine asks for \"what are the program clauses to solve goal X\" and I think each time it does so we go and re-invoke all the same methods do all the lowering again and again</p>",
        "id": 184937837,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339062
    },
    {
        "content": "<p>I think you're correct with that</p>",
        "id": 184937869,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339097
    },
    {
        "content": "<p>we wrote that code kind of \"naively\" just to stand something up, but I'm pretty sure that is a big part of some of the perf problems we're seeing -- based on that profile we were discussing, for example</p>",
        "id": 184937887,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339118
    },
    {
        "content": "<p>that makes sense</p>",
        "id": 184937939,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339135
    },
    {
        "content": "<p>I'm not exactly sure how to do better :) I've not really tried to think about it. It seems like it should be eminently possible.</p>",
        "id": 184937942,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339137
    },
    {
        "content": "<p>(as a first step, we could cache the rules for the environment, which rarely changes)</p>",
        "id": 184937970,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339163
    },
    {
        "content": "<p>we have to be a bit careful but</p>",
        "id": 184938016,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339216
    },
    {
        "content": "<p>the other thing is that right now, when we go to create program clauses,</p>",
        "id": 184938024,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339222
    },
    {
        "content": "<p>we <em>always</em> recreate them, re-querying the database</p>",
        "id": 184938033,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339236
    },
    {
        "content": "<p>anyway let's table the deatils I guess, I imagine we'd want to go and gather some data</p>",
        "id": 184938138,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339290
    },
    {
        "content": "<p>Do we want to do a quick sync-up? Then jump to tracing?</p>",
        "id": 184938195,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339327
    },
    {
        "content": "<p>Sorry, we were going to move on to general sync up .. maybe we can summarize what we said? I think it was:</p>\n<p>Three high-level goals:</p>\n<ul>\n<li>Improve rustc (Niko and others are doing, will try to write out steps)</li>\n<li>Integrate chalk (Niko can write out steps, not sure who will do it)</li>\n<li>Tune chalk (jack huey is pursuing, but we should write out more goals, and maybe find others for some of them)</li>\n</ul>",
        "id": 184938214,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339346
    },
    {
        "content": "<p>sounds good to me</p>",
        "id": 184938284,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339390
    },
    {
        "content": "<p>I can definitely write out some goals for chalk tuning</p>",
        "id": 184938306,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339426
    },
    {
        "content": "<p>As for a quick sync-up:</p>\n<p>I did a bit of work towards chalk-ir. I want to merge the book PR and try to finish it up. I am also curious where people think are the best place to \"write out the steps\" and try to collect all the work that's going on. (Tracking issues? The wg-trait repository? I'm curious maybe to try Github Projects on wg-traits combined with issues from other repositories)</p>",
        "id": 184938309,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339430
    },
    {
        "content": "<p>(also curious if people think ti'd be better to merge book PR with chalk-ir proposal and then write more, or try to finish it in PR form)</p>",
        "id": 184938350,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339478
    },
    {
        "content": "<p>So, I think merging the book PR proposal as it is now is good</p>",
        "id": 184938420,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339504
    },
    {
        "content": "<p>As far as writing out the steps:</p>",
        "id": 184938435,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339515
    },
    {
        "content": "<p>Probably a tracking issue on rust-lang/chalk for refactorings. Then if any are big enough that could go in parts, maybe split/add more</p>",
        "id": 184938491,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339569
    },
    {
        "content": "<p>I think a wg-traits issue would be good for rustc integration</p>",
        "id": 184938519,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339590
    },
    {
        "content": "<p>I think I am going to try github projects, why not, although I don't know how useful it'll be</p>",
        "id": 184938631,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339653
    },
    {
        "content": "<p>I can't quite tell what the columns should be, in particular :) but we'll see</p>",
        "id": 184938660,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339678
    },
    {
        "content": "<p>As for my sync-up:</p>\n<ul>\n<li>I opened a PR that refactors the test infra a bit: <a href=\"https://github.com/rust-lang/chalk/pull/317\" target=\"_blank\" title=\"https://github.com/rust-lang/chalk/pull/317\">https://github.com/rust-lang/chalk/pull/317</a>. It should make things easier to follow for someone who's never seen the chalk code before (tests)</li>\n<li>Been looking at <a href=\"https://github.com/rust-lang/chalk/issues/302\" target=\"_blank\" title=\"https://github.com/rust-lang/chalk/issues/302\">https://github.com/rust-lang/chalk/issues/302</a> a bit. I think this falls more under a design problem. (Ramblings in other topic).</li>\n<li>Haven't touched the associated types stuff</li>\n</ul>",
        "id": 184938783,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339758
    },
    {
        "content": "<p>rust-clippy uses 'todo' and 'done' on their projects page, that seems to work</p>",
        "id": 184938784,
        "sender_full_name": "detrumi",
        "timestamp": 1578339758
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/wg-traits/projects/2?add_cards_query=is%3Aopen\" target=\"_blank\" title=\"https://github.com/rust-lang/wg-traits/projects/2?add_cards_query=is%3Aopen\">created a GH project for rustc-chalk integration</a>, will experiment more with it later though :)</p>",
        "id": 184938829,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339789
    },
    {
        "content": "<p>(On the note of associated types stuff, I still want to explore the \"split syntactic and semantic equality\" and then experiment a bit with having chalk solve for region constraints -- that's <em>definitely</em> a design question, and I think a more general one.)</p>",
        "id": 184938925,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339856
    },
    {
        "content": "<p>I've sort of been trying to implement what I said in the other topic: instead of marking an exclause as ambiguous, I just add a <code>CannotProve</code> delayed subgoal</p>",
        "id": 184938929,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339857
    },
    {
        "content": "<p>hmm</p>",
        "id": 184938937,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339865
    },
    {
        "content": "<p>yeah I didn't have time to process</p>",
        "id": 184938941,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339869
    },
    {
        "content": "<p>but I can sort of imagine why that might be useful</p>",
        "id": 184938953,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339885
    },
    {
        "content": "<p>yeah, I figured if you had read through and thought about it, you would have replied :)</p>",
        "id": 184938956,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339887
    },
    {
        "content": "<p>(I think really, the goal would be to use specific goals for \"ambiguity\" instead of <code>CannotProve</code>)</p>",
        "id": 184939012,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339933
    },
    {
        "content": "<p>So you could, theoretically \"pick up\" from a truncation</p>",
        "id": 184939036,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339951
    },
    {
        "content": "<p>should we discuss tracing a bit here at the end?</p>",
        "id": 184939093,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339975
    },
    {
        "content": "<p>yes, I was just gonna say that</p>",
        "id": 184939102,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578339984
    },
    {
        "content": "<p>guess so?</p>",
        "id": 184939103,
        "sender_full_name": "David Barsky",
        "timestamp": 1578339984
    },
    {
        "content": "<p>Not sure if <span class=\"user-mention\" data-user-id=\"198819\">@David Barsky</span> is still around</p>",
        "id": 184939104,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578339984
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/ssBN0AQyDM-K-Bh7De-qc0yT/heirarchal.png\" target=\"_blank\" title=\"heirarchal.png\">heirarchal.png</a> i was working on a hierarchal fmt for <code>tracing</code> to mimic what rust-analyzer has (and because tree representations are handy)</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/ssBN0AQyDM-K-Bh7De-qc0yT/heirarchal.png\" target=\"_blank\" title=\"heirarchal.png\"><img src=\"/user_uploads/4715/ssBN0AQyDM-K-Bh7De-qc0yT/heirarchal.png\"></a></div>",
        "id": 184939151,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340034
    },
    {
        "content": "<p>to interpret the data: each bolded green word <code>conn</code>, <code>server</code>, <code>sloggish-example</code> is a span, correspnding to a unit of of work</p>",
        "id": 184939247,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340085
    },
    {
        "content": "<p>I think it will actually be pretty straightforward to convert the <code>CHALK_DEBUG</code> calls to tracing</p>",
        "id": 184939248,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340086
    },
    {
        "content": "<p>I should think so-- but I think we could do better</p>",
        "id": 184939263,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340103
    },
    {
        "content": "<p>since there are <code>debug_heading</code> and <code>info_heading</code> which are sort of spans</p>",
        "id": 184939268,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340107
    },
    {
        "content": "<p>e.g., I'd prefer if we assigned each strand a unique id</p>",
        "id": 184939269,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340108
    },
    {
        "content": "<p>the log-like messages within in are <code>log</code>-style messages</p>",
        "id": 184939272,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340115
    },
    {
        "content": "<p>and we use that to tag things</p>",
        "id": 184939276,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340116
    },
    {
        "content": "<p>Yes, that would be really neat</p>",
        "id": 184939283,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340125
    },
    {
        "content": "<p>similarly we can tag events with their table, so you can view events by table</p>",
        "id": 184939287,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340129
    },
    {
        "content": "<p>I'm not quite sure what all the ways are that you would want to view it I guess</p>",
        "id": 184939301,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340144
    },
    {
        "content": "<p>This honestly makes me so excited</p>",
        "id": 184939308,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340147
    },
    {
        "content": "<p>i'd like to have this print out _durations_, rather than instants. this requires some small changes in terms of how this data is outputted</p>",
        "id": 184939320,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340157
    },
    {
        "content": "<p>I feel like <span class=\"user-mention\" data-user-id=\"198819\">@David Barsky</span> and <span class=\"user-mention\" data-user-id=\"232957\">@Jack Huey</span> doing this together would be a power team <em>hint hint</em> ;)</p>",
        "id": 184939358,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340180
    },
    {
        "content": "<p>Yes</p>",
        "id": 184939370,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340194
    },
    {
        "content": "<p>(e.g., not when events come inâ€”they need to be buffered and flushed on a span's exit)</p>",
        "id": 184939375,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340196
    },
    {
        "content": "<p>yep, those are all good use-cases</p>",
        "id": 184939431,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340213
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"198819\">@David Barsky</span> if you make an initial PR, I can definitely add more</p>",
        "id": 184939442,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340223
    },
    {
        "content": "<p>one challenge, but presumably it can be handled,</p>",
        "id": 184939452,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340233
    },
    {
        "content": "<p>is to have a nice way to deal with \"strand A requests a result from table B\"</p>",
        "id": 184939473,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340246
    },
    {
        "content": "<p>i.e., to be able to trace all the work done on behalf of some parent strand?</p>",
        "id": 184939500,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340262
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"232957\">@Jack Huey</span> lemme finish this formatter up first + get that published, but i've rewritten the getting started guide: <a href=\"https://github.com/tokio-rs/tracing#usage\" target=\"_blank\" title=\"https://github.com/tokio-rs/tracing#usage\">https://github.com/tokio-rs/tracing#usage</a></p>",
        "id": 184939526,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340282
    },
    {
        "content": "<p>anyway it seems like exactly the sort of problem that tracing was built to solve though</p>",
        "id": 184939528,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340283
    },
    {
        "content": "<p>hmm</p>",
        "id": 184939550,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340300
    },
    {
        "content": "<p>Should make a topic for this so we can talk about it async</p>",
        "id": 184939655,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340349
    },
    {
        "content": "<p>i _think_ you can you can treat that as a <code>follows_from</code> or  parent/child relationship in tracing</p>",
        "id": 184939665,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340352
    },
    {
        "content": "<p>yep</p>",
        "id": 184939670,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340357
    },
    {
        "content": "<p>I don't think we had an issue about it yet</p>",
        "id": 184939672,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340360
    },
    {
        "content": "<p>but yes, if your call graph is (mostly) a DAG, <code>tracing</code> is a good fit</p>",
        "id": 184939717,
        "sender_full_name": "David Barsky",
        "timestamp": 1578340401
    },
    {
        "content": "<p>Neat</p>",
        "id": 184939764,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340431
    },
    {
        "content": "<p>Ok, anything else to mention in the remaining 6 minutes?</p>",
        "id": 184939839,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340458
    },
    {
        "content": "<p>I think we actually covered everything we said we wanted to</p>",
        "id": 184939869,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340494
    },
    {
        "content": "<p>which is somewhat surprising</p>",
        "id": 184939872,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340501
    },
    {
        "content": "<p>Heh go team <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 184939890,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340516
    },
    {
        "content": "<p>Ok, so I'll just make a quick summary of the meeting then:</p>",
        "id": 184939922,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340554
    },
    {
        "content": "<p>(and things to do next)</p>",
        "id": 184939978,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340565
    },
    {
        "content": "<p>(are you posting that here?)</p>",
        "id": 184940407,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340804
    },
    {
        "content": "<ul>\n<li>We do want to try to extend both rustc and chalk.</li>\n<li>Need to come up with a plan for chalk integration into rustc (Niko)</li>\n<li>Need to come up with goals for chalk (Jack)</li>\n<li>Need to put together what needs to be done for chalk-ir changes (Niko)</li>\n<li>One way to maybe help performance would be to cache program clause creation</li>\n<li>Should think about potential other solvers</li>\n<li>Going to add tracing into chalk (David and Jack)</li>\n<li>Going to create projects on wg-traits to get organized</li>\n</ul>",
        "id": 184940534,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340866
    },
    {
        "content": "<p>Yes :)</p>",
        "id": 184940539,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340869
    },
    {
        "content": "<p>Did I miss anything</p>",
        "id": 184940548,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340875
    },
    {
        "content": "<p>Sounds great, also, we're going to create a projects on wg-trait to try to get organized</p>",
        "id": 184940597,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340912
    },
    {
        "content": "<p>I think it'd be nice to try and create a plan of sorts for \"the next quarter\" or so -- maybe 6 weeks is a good choice -- and write a blog post about it</p>",
        "id": 184940652,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340933
    },
    {
        "content": "<p>seems like we're close</p>",
        "id": 184940656,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578340936
    },
    {
        "content": "<blockquote>\n<p>Sounds great, also, we're going to create a projects on wg-trait to try to get organized</p>\n</blockquote>\n<p>thanks, added</p>",
        "id": 184940683,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340955
    },
    {
        "content": "<p>I think a blog post would be cool</p>",
        "id": 184940724,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340980
    },
    {
        "content": "<p>I would say maybe 10 weeks?</p>",
        "id": 184940767,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578340997
    },
    {
        "content": "<p>depends on the scale of the goals</p>",
        "id": 184940784,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578341011
    },
    {
        "content": "<p>true</p>",
        "id": 184940804,
        "sender_full_name": "Jack Huey",
        "timestamp": 1578341021
    },
    {
        "content": "<p>I only chose 6 weeks because it's rust release cadence anyway, doesn't matter ;)</p>",
        "id": 184940858,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1578341043
    }
]
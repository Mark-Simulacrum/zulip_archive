[
    {
        "content": "<p>The following snippet works if we check that typeck found a hidden type for <code>Foo</code> in <code>BAZR</code> before we run mir borrowck to compute the hidden type. If we remove the early abort, then we get a cycle error, because computing the MIR for mir borrowck will do promotion, which will again try to reveal the hidden type so it can check whether it is <code>!Freeze</code>.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">type</span> <span class=\"nc\">Foo</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">impl</span><span class=\"w\"> </span><span class=\"nb\">Fn</span><span class=\"p\">()</span><span class=\"w\"> </span>-&gt; <span class=\"kt\">usize</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"k\">const</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">bar</span><span class=\"p\">()</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">Foo</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"k\">usize</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">BAZR</span>: <span class=\"nc\">Foo</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">bar</span><span class=\"p\">();</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Now... we could simply delay that check to later (essentially return an obligation from mir building?)</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"216206\">@lcnr</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span></p>",
        "id": 269436173,
        "sender_full_name": "oli",
        "timestamp": 1643213256
    },
    {
        "content": "<p>Uh.. :)</p>",
        "id": 269503738,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1643242799
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"124288\">@oli</span> I'll try to take some time and think about this but my schedule is pretty packed today :)</p>",
        "id": 269583126,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1643295066
    }
]
[
    {
        "content": "<p>So if we wanted to \"revert\" universes, how would we go about it? It's a bit tricky.</p>\n<p>I could of course just try to straight-up <code>git revert</code> and deal with the conflicts. Probably most of it comes from <span class=\"user-mention\" data-user-id=\"116113\">@lqd</span>'s changes to improve diagnostics. </p>\n<p>But what if we tried to reproduce the same semantics we had before, but in the new system. One challenge is that this semantics was a bit inconsistent and buggy (e.g., we had to move NLL to universes to deal with that).</p>\n<p>Certainly one thing we could do is to just layer the \"leak check\" back on for now. Basicallly, wherever we instantiate placeholders now, we would keep doing so -- but we would remember the universe and we would do a \"leak check\" that checks to see if any placeholders in this universe are related to some variable that is an outer universe. (We could even do this bidirectionally, to be as buggy as before.)</p>\n<p>That's...actually probably fairly easy to do.</p>",
        "id": 158651941,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550266884
    },
    {
        "content": "<p>interesting, is that somewhat of a backup plan or a likely direction ?</p>",
        "id": 158652157,
        "sender_full_name": "lqd",
        "timestamp": 1550267060
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116113\">@lqd</span> I see it just as a \"buy some time\" plan</p>",
        "id": 158652286,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267194
    },
    {
        "content": "<p>I don't think it's something we'd really want to do</p>",
        "id": 158652300,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267206
    },
    {
        "content": "<p>although it could be used in specific places as a kind of efficiency change</p>",
        "id": 158652319,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267222
    },
    {
        "content": "<p>it's coming on 5pm here so i'm probably not going to pursue this much tonight</p>",
        "id": 158652335,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267233
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116113\">@lqd</span> to elaborate a bit more, it's not that I think the new system is <em>wrong</em>, but there may be some subtleties, and there is some value in trying to preserve the existing behavior while we talk things out more fully</p>",
        "id": 158652434,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267306
    },
    {
        "content": "<p>(specifically, I think it may require changes in <em>other</em> parts of the lang that have been kind of \"papered over\")</p>",
        "id": 158652449,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267326
    },
    {
        "content": "<p>it's a least nice to have this possibility in case we need it !</p>",
        "id": 158652452,
        "sender_full_name": "lqd",
        "timestamp": 1550267330
    },
    {
        "content": "<p>Yeah, I'm looking a <em>bit</em> into what it would take</p>",
        "id": 158652651,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550267497
    },
    {
        "content": "<p>OK I started looking at this a bit</p>",
        "id": 158905031,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550600746
    },
    {
        "content": "<p>I didn't get too far but I think it would work</p>",
        "id": 158905057,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550600758
    },
    {
        "content": "<p>I'm debating whether this is something that e.g. might be a good fit for <span class=\"user-mention\" data-user-id=\"116010\">@Aaron Turon</span>, or whether to try and tackle it myself. Could be something to hand off a bit, I'm concerned about time.</p>",
        "id": 158905168,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550600806
    },
    {
        "content": "<p>i'm certainly game to try!</p>",
        "id": 158905203,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550600828
    },
    {
        "content": "<p>how confident are we that the leak check is the only difference?</p>",
        "id": 158905280,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550600876
    },
    {
        "content": "<p>lemme put that differently</p>",
        "id": 158905309,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550600882
    },
    {
        "content": "<p>one worry, given that we're close to release, is that we try to \"patch\" the universes code to not change the behavior, but we don't get it totally right</p>",
        "id": 158905372,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550600903
    },
    {
        "content": "<p>maybe a crater run of the patch could give us some confidence?</p>",
        "id": 158905381,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550600911
    },
    {
        "content": "<p>that would help, although the existing PR didn't show any problems in crater</p>",
        "id": 158906024,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601263
    },
    {
        "content": "<p>that said, I'm pretty confident that the leak check is the only difference</p>",
        "id": 158906041,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601276
    },
    {
        "content": "<p>I mean that is literally the thing that was replaced</p>",
        "id": 158906060,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601284
    },
    {
        "content": "<p>but really the question is, if we try to \"restore\" the old behavior, are we going to wind up \"preserving\" it</p>",
        "id": 158906077,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601299
    },
    {
        "content": "<p>it's hard to say</p>",
        "id": 158906095,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601304
    },
    {
        "content": "<p>hmm. so next release is feb 28</p>",
        "id": 158906147,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601337
    },
    {
        "content": "<p>certainly the sooner we can land, the better</p>",
        "id": 158906152,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601344
    },
    {
        "content": "<p>this suggests it's worth frontloading some effort to this afternoon</p>",
        "id": 158906166,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601359
    },
    {
        "content": "<p>and/or now-ish</p>",
        "id": 158906174,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601362
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> OK, that is a pretty tight deadline. i'm happy to start poking at it but would certainly need help. if you think it's easiest for you to just knock it out, totally fine</p>",
        "id": 158906447,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550601504
    },
    {
        "content": "<p>well, so, a thing we could do is to do some \"pair prog\" time on it</p>",
        "id": 158906471,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601535
    },
    {
        "content": "<p>with the goal of being able to \"hand off\"</p>",
        "id": 158906480,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601542
    },
    {
        "content": "<p>i.e., I have some time today, but I feel like time may be tight over next few days</p>",
        "id": 158906507,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601558
    },
    {
        "content": "<p>sure thing</p>",
        "id": 158906528,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550601574
    },
    {
        "content": "<p>I plan to start poking at this at 3pm my time</p>",
        "id": 158906557,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550601597
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> sgtm, i'll be ready to pair</p>",
        "id": 158906738,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550601715
    },
    {
        "content": "<p>we could  do zoom + record, for other WG-traits folks</p>",
        "id": 158906805,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550601745
    },
    {
        "content": "<p>sure</p>",
        "id": 158907715,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550602239
    },
    {
        "content": "<p>plus, others find it helpful to be able to review</p>",
        "id": 158907727,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550602248
    },
    {
        "content": "<p>particularly if I'm driving and making emacs jump all over the place :P</p>",
        "id": 158907733,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550602258
    },
    {
        "content": "<p>hah <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 158907747,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550602271
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116010\">@Aaron Turon</span> ok I'm planning to start on this soon</p>",
        "id": 158914885,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550607030
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> ready when you are!</p>",
        "id": 158914894,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550607041
    },
    {
        "content": "<p>ok, few more minutes</p>",
        "id": 158915109,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550607202
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116010\">@Aaron Turon</span> (and anyone else who wants), connect to <a href=\"https://zoom.us/j/181515793\" target=\"_blank\" title=\"https://zoom.us/j/181515793\">https://zoom.us/j/181515793</a></p>",
        "id": 158915234,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550607289
    },
    {
        "content": "<p>Was in the air for this meeting, but happy to review when it comes out on video</p>",
        "id": 158918817,
        "sender_full_name": "tmandry",
        "timestamp": 1550610260
    },
    {
        "content": "<p>so we didn't wind up doing any coding</p>",
        "id": 158920636,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550611787
    },
    {
        "content": "<p>but instead spent a while talking about the implications of subtyping and soundness</p>",
        "id": 158920648,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550611798
    },
    {
        "content": "<p>I convinced myself that the current coherence rules are definitely incorrect, in that they permit overlapping types</p>",
        "id": 158920720,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550611821
    },
    {
        "content": "<p>we also creeped each other out with some of the implications but failed so far to uncover a weaponized problem</p>",
        "id": 158920742,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550611846
    },
    {
        "content": "<p>and I feel mildly convinced that -- if such a problem exists -- it's because of <em>other</em> rules that need to be adjusted =)</p>",
        "id": 158920764,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550611860
    },
    {
        "content": "<p>so the question <em>now</em> is</p>",
        "id": 158924008,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614376
    },
    {
        "content": "<p>do I try to push through the \"bring back the leak check for now\" change?</p>",
        "id": 158924074,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614431
    },
    {
        "content": "<p>and, if not, maybe what other things...do we have to do</p>",
        "id": 158924132,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614447
    },
    {
        "content": "<p>thinking on it a bit, I realize that e.g. <a href=\"https://github.com/rust-lang/rust/issues/57639\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/57639\">#57639</a> kind of amounts to doing some limited form of the leak check</p>",
        "id": 158924183,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614483
    },
    {
        "content": "<p>OK -- i personally don't have quite enough of the pieces to  be able to connect the dots</p>",
        "id": 158924246,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614533
    },
    {
        "content": "<p>it does seem like getting the leak check re-instated is the obviously conservative thing to do</p>",
        "id": 158924325,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614573
    },
    {
        "content": "<p>and it's starting to feel like really figuring out what we want here may take some time</p>",
        "id": 158924335,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614586
    },
    {
        "content": "<p>whereas, IIUC, reinstating the leak check shouldn't be too hard</p>",
        "id": 158924343,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614598
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> ^</p>",
        "id": 158924370,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614618
    },
    {
        "content": "<p>Yeah, that is roughly my feeling. I think it remains true that the universe check is just \"more correct\", but that doesn't mean that it's right to institute it <em>now</em></p>",
        "id": 158924509,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614691
    },
    {
        "content": "<p>i.e., we might want to put through other mitigating changes first</p>",
        "id": 158924523,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614704
    },
    {
        "content": "<p>yeah</p>",
        "id": 158924540,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614722
    },
    {
        "content": "<p>in retrospect, I shouldn't have pushed through the full check, I always meant to reimplement the leak check in terms of universes anyway, but the clean crater run tempted me, and I confess I didn't anticipate all of these other interactions</p>",
        "id": 158924615,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614770
    },
    {
        "content": "<p>i mean the universe-based check seems a lot more elegant, i can understand the desire</p>",
        "id": 158924727,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614827
    },
    {
        "content": "<p>mostly I meant to take an \"in between\" step</p>",
        "id": 158924754,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614851
    },
    {
        "content": "<p>yeah</p>",
        "id": 158924759,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550614858
    },
    {
        "content": "<p>FWIW you technically have until ~Sunday night to land whatever it is; I will note that the queue has been quite slow so we'll want to have it up at least 9-12 hours before we expect it to land</p>",
        "id": 158924883,
        "sender_full_name": "simulacrum",
        "timestamp": 1550614927
    },
    {
        "content": "<p>(and if necessary there is technically some wiggle room on the release side -- we could slip by a day without affecting Thursday release)</p>",
        "id": 158924917,
        "sender_full_name": "simulacrum",
        "timestamp": 1550614967
    },
    {
        "content": "<p>Yeah, I'm just a bit nervous about things here</p>",
        "id": 158924934,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614981
    },
    {
        "content": "<p>how is the crater queue etc?</p>",
        "id": 158924943,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614984
    },
    {
        "content": "<p>for an e.g. check-only crater run?</p>",
        "id": 158924948,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614990
    },
    {
        "content": "<p>is that still reasonably quick</p>",
        "id": 158924956,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550614993
    },
    {
        "content": "<blockquote>\n<p>Yeah, I'm just a bit nervous about things here</p>\n</blockquote>\n<p>that is, I don't want to introduce ICEs etc</p>",
        "id": 158924967,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550615002
    },
    {
        "content": "<p>Crater queue is currently empty -- I believe check only is approx. 36 hours (<a href=\"https://crater.rust-lang.org/\" target=\"_blank\" title=\"https://crater.rust-lang.org/\">https://crater.rust-lang.org/</a>)</p>",
        "id": 158924968,
        "sender_full_name": "simulacrum",
        "timestamp": 1550615005
    },
    {
        "content": "<p>But <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> can give more accurate timeline on how long crater takes probably</p>",
        "id": 158925052,
        "sender_full_name": "simulacrum",
        "timestamp": 1550615047
    },
    {
        "content": "<p>check-only is ~1.5 days</p>",
        "id": 158925083,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1550615074
    },
    {
        "content": "<p>OK</p>",
        "id": 158925091,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550615084
    },
    {
        "content": "<p>I'll see if I can pull together a PR tonight/tomorrow morning</p>",
        "id": 158925101,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550615091
    },
    {
        "content": "<p>seems plausible</p>",
        "id": 158925110,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550615097
    },
    {
        "content": "<p>gotta go fix dinner now :)</p>",
        "id": 158925134,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550615107
    },
    {
        "content": "<p>ok, thanks <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span></p>",
        "id": 158925147,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550615117
    },
    {
        "content": "<p>I'm putting together some notes <a href=\"https://paper.dropbox.com/doc/The-move-to-universes-in-rustc--AX4MgFY_qFStpLwq1HT7ncjNAg-aODQm3DvOKf4Bwlnk6QpO\" target=\"_blank\" title=\"https://paper.dropbox.com/doc/The-move-to-universes-in-rustc--AX4MgFY_qFStpLwq1HT7ncjNAg-aODQm3DvOKf4Bwlnk6QpO\">here</a> for the move to universes in general</p>",
        "id": 158926674,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550616304
    },
    {
        "content": "<p>cool</p>",
        "id": 158928425,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550617691
    },
    {
        "content": "<p>PR implementing the revert strategy I floated here: <a href=\"https://github.com/rust-lang/rust/pull/58592\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/58592\">https://github.com/rust-lang/rust/pull/58592</a></p>",
        "id": 158967672,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550663091
    },
    {
        "content": "<p>Still doing some test runs locally</p>",
        "id": 158967676,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550663101
    },
    {
        "content": "<p>Did my best to summarize the universe situation here: <a href=\"https://github.com/rust-lang/rust/issues/56105#issuecomment-465634661\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/56105#issuecomment-465634661\">https://github.com/rust-lang/rust/issues/56105#issuecomment-465634661</a></p>",
        "id": 158987065,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550677872
    },
    {
        "content": "<p>(in case you haven't noticed, the leak-check revival PR <a href=\"https://github.com/rust-lang/rust/issues/58592\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/58592\">#58592</a> has been blocked from running the CI tests by the merciless tidy)</p>",
        "id": 158989487,
        "sender_full_name": "lqd",
        "timestamp": 1550679359
    },
    {
        "content": "<p>OK, i'm starting to review this morning</p>",
        "id": 158993377,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550682454
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116113\">@lqd</span> thanks -- I'm currently getting the tests to pass</p>",
        "id": 158994287,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550683220
    },
    {
        "content": "<p>and will then address the merciless tidy</p>",
        "id": 158994297,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550683227
    },
    {
        "content": "<p>done reviewing</p>",
        "id": 158996315,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550684732
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116010\">@Aaron Turon</span> I'll take a look -- so I also went over all the tests. Most of the new output made sense to me but for one example that surprised me.</p>",
        "id": 158997278,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550685388
    },
    {
        "content": "<p>This example used to error out but now does not:</p>\n<div class=\"codehilite\"><pre><span></span><span class=\"k\">fn</span> <span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">x</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">for</span><span class=\"o\">&lt;</span><span class=\"na\">&#39;a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"na\">&#39;b</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"o\">&lt;&amp;</span><span class=\"na\">&#39;a</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"na\">&#39;b</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">y</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">for</span><span class=\"o\">&lt;</span><span class=\"na\">&#39;a</span><span class=\"o\">&gt;</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"o\">&lt;&amp;</span><span class=\"na\">&#39;a</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"na\">&#39;a</span><span class=\"w\"> </span><span class=\"kt\">u8</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">z</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"mi\">22</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"n\">y</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">};</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</pre></div>\n\n\n<p>However, our \"LUB\" code (IIRC) is meant to enforce a strict equality check -- basically I don't know why this leak check would ever make something <strong>pass</strong> that did not before</p>",
        "id": 158997373,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550685468
    },
    {
        "content": "<p>Seems surprising</p>",
        "id": 158997382,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550685473
    },
    {
        "content": "<p>Although, looking in the git notes, I see :</p>\n<div class=\"codehilite\"><pre><span></span> This is needed for the universe-based code to handle\n    `old-lub-glb-object`; that test used to work sort of by accident\n    before with the old code.\n</pre></div>\n\n\n<p>from <a href=\"https://github.com/rust-lang/rust/commit/904a0bde93f0348f69914ee90b1f8b6e4e0d7cbc\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/commit/904a0bde93f0348f69914ee90b1f8b6e4e0d7cbc\">904a0bde93f0348f69914ee90b1f8b6e4e0d7cbc</a></p>",
        "id": 158997527,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550685568
    },
    {
        "content": "<p>so <em>something</em> is going on there</p>",
        "id": 158997542,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550685580
    },
    {
        "content": "<p>oh, I sort of maybe see how this change could make an error go away -- maybe we're getting an error more eagerly than we did before, we might apply the coercions rules better</p>",
        "id": 158997639,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550685617
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Do you feel comfortable backporting <a href=\"https://github.com/rust-lang/rust/pull/58056\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/58056\">https://github.com/rust-lang/rust/pull/58056</a> and <a href=\"https://github.com/rust-lang/rust/pull/58592\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/58592\">https://github.com/rust-lang/rust/pull/58592</a>? I've beta-nominated them and also nominated for the compiler team to approve tomorrow morning -- we might want to make sure they merge cleanly onto beta though</p>",
        "id": 159010501,
        "sender_full_name": "simulacrum",
        "timestamp": 1550693655
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> I do -- they are in \"seldom touched\" parts of the code that haven't really changed since beta</p>",
        "id": 159012691,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550695256
    },
    {
        "content": "<p>that said, I did want to maybe do a crater run on <a href=\"https://github.com/rust-lang/rust/issues/58592\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/58592\">#58592</a> if we <em>can</em></p>",
        "id": 159012711,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550695267
    },
    {
        "content": "<p>maybe we won't have time</p>",
        "id": 159012719,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550695277
    },
    {
        "content": "<p>we can hopefully at least do a perf run</p>",
        "id": 159012726,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550695285
    },
    {
        "content": "<p>I think we have time</p>",
        "id": 159019353,
        "sender_full_name": "simulacrum",
        "timestamp": 1550700154
    },
    {
        "content": "<p>the try build should be ready soon</p>",
        "id": 159019690,
        "sender_full_name": "lqd",
        "timestamp": 1550700386
    },
    {
        "content": "<p>right on <del>queue</del> cue</p>",
        "id": 159020123,
        "sender_full_name": "lqd",
        "timestamp": 1550700794
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> ^</p>",
        "id": 159020135,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550700812
    },
    {
        "content": "<p>Started crater, perf runs</p>",
        "id": 159020341,
        "sender_full_name": "simulacrum",
        "timestamp": 1550700987
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> thanks :)</p>",
        "id": 159020343,
        "sender_full_name": "lqd",
        "timestamp": 1550700989
    },
    {
        "content": "<p>btw, <span class=\"user-mention\" data-user-id=\"116010\">@Aaron Turon</span>, I was thinking that maybe -- as a \"next step\" once we deal with the immediate leak-check thing -- we might try adding some constraints such that <code>'empty</code> is not permitted to result</p>",
        "id": 159082074,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550766533
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> hm, ok. i'm feeling generally uneasy, in the sense that it feels hard to judge the implications of various choices. earlier i had convinced myself that <code>'empty</code> was totally fine to have around...</p>",
        "id": 159088554,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550771234
    },
    {
        "content": "<p>I'd like to talk out the dropck implications too</p>",
        "id": 159088659,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550771306
    },
    {
        "content": "<p>This is an \"underspecified\" area</p>",
        "id": 159088666,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550771315
    },
    {
        "content": "<p>Anyway not a thing we need to immediately discuss</p>",
        "id": 159088683,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550771326
    },
    {
        "content": "<p>I'm planning to r+ the PR as soon as I finish getting the stderr files blessed etc</p>",
        "id": 159088707,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550771365
    },
    {
        "content": "<p>OK, sounds good</p>",
        "id": 159088715,
        "sender_full_name": "Aaron Turon",
        "timestamp": 1550771380
    },
    {
        "content": "<p>Then I will attempt the backport</p>",
        "id": 159088802,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550771413
    },
    {
        "content": "<p>(which I expect to be fairly easy...)</p>",
        "id": 159088822,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550771426
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span>  should we treeclose as well to make sure it goes through?</p>",
        "id": 159089238,
        "sender_full_name": "centril",
        "timestamp": 1550771790
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> hmm good question! I don't really know. Maybe see if it lands naturally first? Does seem pretty imporatnt</p>",
        "id": 159091168,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550773409
    },
    {
        "content": "<p>If we're trying to avert delaying the release, it feels like extreme machinations are justified</p>",
        "id": 159091176,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550773420
    },
    {
        "content": "<p>I'd be happy if I saw a green travis mark first</p>",
        "id": 159091229,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550773443
    },
    {
        "content": "<p>though locally it seems to be doing well</p>",
        "id": 159091241,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550773448
    },
    {
        "content": "<p>definitely justified if we need to <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 159091242,
        "sender_full_name": "centril",
        "timestamp": 1550773449
    },
    {
        "content": "<p>I'm kind of happy to defer to release team on this point ;)</p>",
        "id": 159091244,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550773461
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> cool; I'll see what happens with travis and decide ^^</p>",
        "id": 159091276,
        "sender_full_name": "centril",
        "timestamp": 1550773501
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Delaying the release, beyond public perception, is essentially free (we'll have a few wrong dates in e.g. RELEASES.md but that doesn't really matter)</p>",
        "id": 159093968,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775429
    },
    {
        "content": "<p>I don't think there's any reason to treeclose -- we just need to make sure to retry as needed</p>",
        "id": 159094015,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775460
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> ok, yes. It's mostly public perception that I'm worried about. I think if it's on the scale of a few days etc it's fine. If we slip a release, or bump a week or something, that's a bigger deal</p>",
        "id": 159094027,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550775469
    },
    {
        "content": "<p>So basically in terms of stopping the release you have until Thursday morning -- we can build artifacts etc and be ready to go</p>",
        "id": 159094132,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775511
    },
    {
        "content": "<p>We should have crater and some nightly baking by that point</p>",
        "id": 159094172,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775538
    },
    {
        "content": "<p>I think we'll be fine more or less</p>",
        "id": 159094226,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775594
    },
    {
        "content": "<p>Realistically our 6-week model means that if we delay a release by a week I'm honestly not _too_ concerned</p>",
        "id": 159094302,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775619
    },
    {
        "content": "<p>As I think <span class=\"user-mention\" data-user-id=\"116010\">@Aaron Turon</span> mentioned that seems a lot better then shipping potential known bugs</p>",
        "id": 159094313,
        "sender_full_name": "simulacrum",
        "timestamp": 1550775629
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> the purpose of the tree-close is to avoid Niko or Aaron having to rebase and such... sure, we can retry all other PRs to make this one go first, but, treeclose seems cleaner and easier</p>",
        "id": 159095145,
        "sender_full_name": "centril",
        "timestamp": 1550776248
    },
    {
        "content": "<p>Sure, I meant that treeclose doesn't -- IIRC -- help with the retry bit and I presumed conflicts would be minimal anyway (i.e., we would emulate treeclose manually)</p>",
        "id": 159095670,
        "sender_full_name": "simulacrum",
        "timestamp": 1550776646
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> GG on being super quick with the retry :)</p>",
        "id": 159103462,
        "sender_full_name": "lqd",
        "timestamp": 1550782535
    },
    {
        "content": "<p>=P</p>",
        "id": 159103488,
        "sender_full_name": "centril",
        "timestamp": 1550782555
    },
    {
        "content": "<p>I hope CI issues don't keep happening like they did with the previous PR</p>",
        "id": 159103651,
        "sender_full_name": "lqd",
        "timestamp": 1550782661
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> happened again :/</p>",
        "id": 159106071,
        "sender_full_name": "lqd",
        "timestamp": 1550784565
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span>  CI is being real difficult <span aria-label=\"confused\" class=\"emoji emoji-1f615\" role=\"img\" title=\"confused\">:confused:</span></p>",
        "id": 159106077,
        "sender_full_name": "centril",
        "timestamp": 1550784568
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> argh</p>",
        "id": 159106221,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550784659
    },
    {
        "content": "<p>whats the command for treeclose?</p>",
        "id": 159106238,
        "sender_full_name": "centril",
        "timestamp": 1550784670
    },
    {
        "content": "<p><code>@bors treeclose=99</code>?</p>",
        "id": 159106248,
        "sender_full_name": "centril",
        "timestamp": 1550784680
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> probably knows</p>",
        "id": 159106645,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550784970
    },
    {
        "content": "<p>(closed tree and did retry, pending again)</p>",
        "id": 159106870,
        "sender_full_name": "centril",
        "timestamp": 1550785147
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> errors still look spurious, I Assume?</p>",
        "id": 159108976,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550786852
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> ye, but its testing now, 32 min in</p>",
        "id": 159109057,
        "sender_full_name": "centril",
        "timestamp": 1550786892
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/58592\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/58592\">#58592</a> merged <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> and the crater run is <a href=\"https://crater-reports.s3.amazonaws.com/pr-58592/index.html\" target=\"_blank\" title=\"https://crater-reports.s3.amazonaws.com/pr-58592/index.html\">done</a>: the 2 regressions it mentions don't seem related to the PR.</p>",
        "id": 159137707,
        "sender_full_name": "lqd",
        "timestamp": 1550821313
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116113\">@lqd</span>  yep, both spurious <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 159141991,
        "sender_full_name": "centril",
        "timestamp": 1550827349
    },
    {
        "content": "<p>I'm working on the beta backport now</p>",
        "id": 159148251,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550833757
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span>  do we want to crater the backport or just r+ right away?</p>",
        "id": 159148634,
        "sender_full_name": "centril",
        "timestamp": 1550834260
    },
    {
        "content": "<p>Don't know</p>",
        "id": 159148686,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550834290
    },
    {
        "content": "<p>One thing I wanted to check on was whether the new nightly (presuming it's issued) accrues any bug reports</p>",
        "id": 159148693,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550834308
    },
    {
        "content": "<p>currently my beta backport is stalled at building LLVM :P</p>",
        "id": 159148702,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550834321
    },
    {
        "content": "<p>but once that completes I expect to be able to put up a PR fairly easily</p>",
        "id": 159148708,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550834342
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> neat; what date were we doing beta=&gt;stable promotion this time? crater took 2 days on nightly, so ideally we should have crater done on monday and be able to merge on the same day if you want to wait for crater</p>",
        "id": 159148826,
        "sender_full_name": "centril",
        "timestamp": 1550834458
    },
    {
        "content": "<p>Regarding date, I'm not entirely sure, but I think that <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> said something about Sunday night being a deadline for things to land</p>",
        "id": 159148911,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550834546
    },
    {
        "content": "<p>There is also some flexibility here I think</p>",
        "id": 159148916,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550834554
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> ok hmm... if you want to get it in by sunday we can still start crater and merge before; at least we'll get a report after</p>",
        "id": 159149008,
        "sender_full_name": "centril",
        "timestamp": 1550834679
    },
    {
        "content": "<p>we might get crater done before monday as well...</p>",
        "id": 159149033,
        "sender_full_name": "centril",
        "timestamp": 1550834718
    },
    {
        "content": "<p>btw... the PR is still just beta-nominated... should we assume beta-accepted now as well?</p>",
        "id": 159149107,
        "sender_full_name": "centril",
        "timestamp": 1550834797
    },
    {
        "content": "<p>yeah, based on discussion in the compiler meeting I think so</p>",
        "id": 159149904,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550835695
    },
    {
        "content": "<p>still working on backport, running some tests</p>",
        "id": 159149910,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550835701
    },
    {
        "content": "<p>maybe 75% done</p>",
        "id": 159149913,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550835707
    },
    {
        "content": "<p>Backport PR: <a href=\"https://github.com/rust-lang/rust/pull/58641\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/58641\">https://github.com/rust-lang/rust/pull/58641</a></p>",
        "id": 159153643,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1550839411
    }
]
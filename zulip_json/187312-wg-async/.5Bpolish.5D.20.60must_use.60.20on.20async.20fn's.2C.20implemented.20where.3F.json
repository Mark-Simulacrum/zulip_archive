[
    {
        "content": "<p>Should this warning be in clippy: issue: <a href=\"https://github.com/rust-lang/rust/issues/78149\">https://github.com/rust-lang/rust/issues/78149</a>, my basic pr: <a href=\"https://github.com/rust-lang/rust/pull/89610\">https://github.com/rust-lang/rust/pull/89610</a> ?<br>\nto easily be able to make the warning work, not just on <code>async</code> fns, but also on things that use <code>async-trait</code> (so basically, <code>Box&lt;dyn Future&gt;</code>), it seems like its easiest to do this check after typechecking, and clippy has some really nice helpers to figure out if types are <code>Box</code> and what not</p>",
        "id": 256484125,
        "sender_full_name": "Gus Wynn",
        "timestamp": 1633554125
    },
    {
        "content": "<p>Hmm, good question. I'm never really clear on what should go in clippy versus in rustc.</p>",
        "id": 256488380,
        "sender_full_name": "eholk",
        "timestamp": 1633556034
    },
    {
        "content": "<p>My first impression is that since <code>must_use</code> is already in rustc, it makes sense for it to stay there. Is the main reason to move it out to be able to make more use of clippy's helpers?</p>",
        "id": 256488510,
        "sender_full_name": "eholk",
        "timestamp": 1633556087
    },
    {
        "content": "<p>I suppose. Also because clippy is a place that does wanting after typecking, not sure where else we do that? I did ask in compiler/help if the check_attrs pass has access to typck results, awaiting a reply</p>",
        "id": 256489584,
        "sender_full_name": "Gus Wynn",
        "timestamp": 1633556600
    },
    {
        "content": "<p>*warning after linting, and I think to make this warning work on more than just async fn's, I need typecking</p>",
        "id": 256489791,
        "sender_full_name": "Gus Wynn",
        "timestamp": 1633556714
    },
    {
        "content": "<p>When does <code>check_attrs</code> happen now?</p>",
        "id": 256489944,
        "sender_full_name": "eholk",
        "timestamp": 1633556788
    },
    {
        "content": "<p>It's in <code>Providers</code>, which makes me think it's a query, but I think typecking is also a provider.</p>",
        "id": 256490076,
        "sender_full_name": "Gus Wynn",
        "timestamp": 1633556875
    },
    {
        "content": "<p>Yeah, you <em>might</em> be able to ask for type checking in <code>check_attrs</code>, but there's a good chance you'll create cycles.</p>",
        "id": 256490192,
        "sender_full_name": "eholk",
        "timestamp": 1633556928
    },
    {
        "content": "<p>Hmm, I'll wait to see what compiler/help people say, they may have a good non-clippy place to locate this. The language and basic structure is definitely reviewable before the sprint meeting tomorrow tho!</p>",
        "id": 256490586,
        "sender_full_name": "Gus Wynn",
        "timestamp": 1633557147
    },
    {
        "content": "<p>Nice!</p>",
        "id": 256490626,
        "sender_full_name": "eholk",
        "timestamp": 1633557176
    },
    {
        "content": "<p>Although, I don't think there's a sprint meeting tomorrow. They're every two weeks.</p>",
        "id": 256490654,
        "sender_full_name": "eholk",
        "timestamp": 1633557193
    },
    {
        "content": "<p>Ugh, why is my calendar all messed up <span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span></p>",
        "id": 256491064,
        "sender_full_name": "Gus Wynn",
        "timestamp": 1633557411
    }
]
[
    {
        "content": "<p>So I was reading the <a href=\"https://github.com/sexxi-goose/reference/blob/closure-doc/src/types/closure.md#overall-capture-analysis-algorithm\">reference PR</a> and my feeling is that </p>\n<ul>\n<li>we need to improve the presentation of this algorithm =)</li>\n<li>I am still not thrilled with \"ref-unique\" being part of the modes that come from the initial analysis; it feels like it should be something we apply at the end, after truncation? I kind of forget where we landed on this</li>\n</ul>",
        "id": 249783944,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629237266
    },
    {
        "content": "<p>Oh I think I need to clean that up</p>",
        "id": 249783967,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629237292
    },
    {
        "content": "<p>I dont think we get ref uniq there anymore</p>",
        "id": 249783986,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629237304
    },
    {
        "content": "<p>The other question is where we landed when it comes to by-value access to copy types</p>",
        "id": 249786387,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238849
    },
    {
        "content": "<p>ExprUseVisitor never calls ByValue with Copy types</p>",
        "id": 249786427,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629238876
    },
    {
        "content": "<p>It automatically changes them to ImmBorrow</p>",
        "id": 249786443,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629238888
    },
    {
        "content": "<p>OK, great</p>",
        "id": 249786476,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238917
    },
    {
        "content": "<p>so really the modes are \"ref\", \"ref mut\", and \"move\"</p>",
        "id": 249786527,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238928
    },
    {
        "content": "<p>(so to speak)</p>",
        "id": 249786533,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238933
    },
    {
        "content": "<p>And when we have a move closure we deal with same way as others</p>",
        "id": 249786548,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629238945
    },
    {
        "content": "<p>Yes, that's correct</p>",
        "id": 249786556,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629238953
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281950\">Aman Arora</span> <a href=\"#narrow/stream/189812-t-compiler.2Fwg-rfc-2229/topic/capture.20analysis.20algorithm/near/249786548\">said</a>:</p>\n<blockquote>\n<p>And when we have a move closure we deal with same way as others</p>\n</blockquote>\n<p>what do you mean by this?</p>",
        "id": 249786577,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238967
    },
    {
        "content": "<p>I don't think having a move closure should affect how <code>ExprUseVisitor</code> classifies things, right?</p>",
        "id": 249786599,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238985
    },
    {
        "content": "<p>it just gets transformed to a \"move\" mode later on</p>",
        "id": 249786614,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629238993
    },
    {
        "content": "<p>Eg: x.y.z will become ByValue</p>",
        "id": 249786624,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629239004
    },
    {
        "content": "<p>Regardless of Copy</p>",
        "id": 249786635,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629239011
    },
    {
        "content": "<p>Exactly</p>",
        "id": 249786640,
        "sender_full_name": "Aman Arora",
        "timestamp": 1629239015
    },
    {
        "content": "<p><a href=\"https://hackmd.io/49cGGbsKTcy1s6uMeKWP0A#What-data-does-a-closure-use\">https://hackmd.io/49cGGbsKTcy1s6uMeKWP0A#What-data-does-a-closure-use</a></p>",
        "id": 249786727,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629239055
    },
    {
        "content": "<p><a href=\"https://hackmd.io/49cGGbsKTcy1s6uMeKWP0A#Capture-algorithm-precise-description\">https://hackmd.io/49cGGbsKTcy1s6uMeKWP0A#Capture-algorithm-precise-description</a></p>",
        "id": 249786742,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629239063
    },
    {
        "content": "<p>if you get a chance, check those and let me know if they sound right</p>",
        "id": 249786747,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1629239069
    }
]
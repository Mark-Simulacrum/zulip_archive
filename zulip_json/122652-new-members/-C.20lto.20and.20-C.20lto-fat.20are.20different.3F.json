[
    {
        "content": "<p>I noticed that when building WASM binaries at least the resulting size is different when using <code>-C lto</code> and <code>-C lto=fat</code> even though Cargo documentation suggests they are identical. Any hints why that is the case?</p>",
        "id": 268895781,
        "sender_full_name": "Nazar Mokrynskyi",
        "timestamp": 1642795190
    },
    {
        "content": "<p>I think -C lto defaults to -C lto=thin.</p>",
        "id": 268900445,
        "sender_full_name": "Amanieu",
        "timestamp": 1642797728
    },
    {
        "content": "<p>there might be differences what kind of data is included in the object files<br>\n<a href=\"https://github.com/rust-lang/cargo/blob/master/src/cargo/core/compiler/lto.rs#L8\">https://github.com/rust-lang/cargo/blob/master/src/cargo/core/compiler/lto.rs#L8</a></p>",
        "id": 268900712,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1642797858
    },
    {
        "content": "<p>I remember reading something about some kind of omni-lto that supports both thin and monolithic lto at the same time, but I don't remember if rust supports that <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 268900792,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1642797916
    },
    {
        "content": "<p>I thought so too, but documentation says that <code>true</code> and <code>\"fat\"</code> are the same: <a href=\"https://doc.rust-lang.org/cargo/reference/profiles.html#lto\">https://doc.rust-lang.org/cargo/reference/profiles.html#lto</a></p>",
        "id": 268901724,
        "sender_full_name": "Nazar Mokrynskyi",
        "timestamp": 1642798417
    },
    {
        "content": "<p>Fat lto seems to be the default for <code>-Clto</code>: <a href=\"https://github.com/rust-lang/rust/blob/cbaeec14f90b59a91a6b0f17fc046c66fa811892/compiler/rustc_session/src/session.rs#L602\">https://github.com/rust-lang/rust/blob/cbaeec14f90b59a91a6b0f17fc046c66fa811892/compiler/rustc_session/src/session.rs#L602</a></p>",
        "id": 268903519,
        "sender_full_name": "bjorn3",
        "timestamp": 1642799329
    },
    {
        "content": "<p>Is there anything else that I can check to see why is the actual difference happening?<br>\nI can reproduce binaries of a different size reliably.</p>",
        "id": 268904053,
        "sender_full_name": "Nazar Mokrynskyi",
        "timestamp": 1642799614
    }
]
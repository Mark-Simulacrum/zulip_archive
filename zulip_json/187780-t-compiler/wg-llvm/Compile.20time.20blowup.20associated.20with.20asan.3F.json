[
    {
        "content": "<p>Is anyone aware of a massive compile time increase associated with -Zsanitizer=address? I and a few others have noticed that when building crates for fuzzing that contain the crate curve25519-dalek in their dependency tree, curve25519-dalek's compile time explodes (16s -&gt; 570s) when asan is added among all the other flags that cargo-fuzz passes. It's hard for me (a non-expert) to tell if this is a bug or if asan doing its thing just generates an enormous number of basic blocks in this particular crate. I'm attaching the output of building an empty fuzz target in curve25519-dalek with <code>RUSTFLAGS=\"-Ztime-passes -Cllvm-args=--debug-pass=Details\" cargo +stage1 fuzz run fuzz_target_1</code> (my stage1 is just with debug info). I'm attaching as xz because it's too large for zulip with gzip. <a href=\"/user_uploads/4715/3BvlShU6jFIEntUsU4qYgbdW/passes.xz\">passes.xz</a></p>",
        "id": 262968197,
        "sender_full_name": "(Saethlin) Ben Kimock",
        "timestamp": 1638163202
    },
    {
        "content": "<p>well, asan includes tons of extra checks in your code that the optimizer has to churn through, so im not really surprised.<br>\nAsan + debuginfo + O3 + lto can easily blow up compiletimes.</p>",
        "id": 262975683,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1638172578
    },
    {
        "content": "<p>You're not wrong, but it feels like 35x is a bit rich. I've never seen another crate's compile time grow like this due to the collection of fuzzing flags + asan</p>",
        "id": 263017954,
        "sender_full_name": "(Saethlin) Ben Kimock",
        "timestamp": 1638197505
    }
]
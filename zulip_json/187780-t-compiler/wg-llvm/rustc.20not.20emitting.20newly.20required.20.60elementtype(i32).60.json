[
    {
        "content": "<p>I'm a bit puzzled by what I need to do to fix Rust against LLVM HEAD after <a href=\"https://github.com/llvm/llvm-project/commit/bec726f5d20ecfdc4a1cd4076ddc6edb35a317e5\">https://github.com/llvm/llvm-project/commit/bec726f5d20ecfdc4a1cd4076ddc6edb35a317e5</a> - <span class=\"user-mention\" data-user-id=\"133224\">@Nikita Popov</span> do you have any advice? I'm a little lost in the asm generation bits. The failure is visible at <a href=\"https://buildkite.com/llvm-project/rust-llvm-integrate-prototype/builds/7416#faacd19c-6b8a-453e-bb9f-ac6baea53475\">https://buildkite.com/llvm-project/rust-llvm-integrate-prototype/builds/7416#faacd19c-6b8a-453e-bb9f-ac6baea53475</a></p>",
        "id": 267238631,
        "sender_full_name": "durin42",
        "timestamp": 1641587088
    },
    {
        "content": "<p>I expect somewhere around <a href=\"https://github.com/rust-lang/rust/blob/e012a191d768adeda1ee36a99ef8b92d51920154/compiler/rustc_codegen_llvm/src/asm.rs#L27\">https://github.com/rust-lang/rust/blob/e012a191d768adeda1ee36a99ef8b92d51920154/compiler/rustc_codegen_llvm/src/asm.rs#L27</a> you need to add an ElementType attribute to all is_indirect constraints. I think this only affects llvm_asm, not asm.</p>",
        "id": 267240030,
        "sender_full_name": "Nikita Popov",
        "timestamp": 1641587903
    },
    {
        "content": "<p>Okay that helps, I'll see if I can get a patch figured out. Thanks, this is all new territory to me.</p>",
        "id": 267240204,
        "sender_full_name": "durin42",
        "timestamp": 1641588014
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/92794\">https://github.com/rust-lang/rust/issues/92794</a> filed to keep track of this. I've spent a couple of days trying to wrap my head around this enough to fix it, and I need to move on to other things.</p>\n<p>Do we know we have test coverage for asm!() such that that isn't also broken like this?</p>",
        "id": 267658072,
        "sender_full_name": "durin42",
        "timestamp": 1641941484
    },
    {
        "content": "<p>There are several <code>asm!()</code> tests.</p>",
        "id": 267658508,
        "sender_full_name": "bjorn3",
        "timestamp": 1641941713
    }
]
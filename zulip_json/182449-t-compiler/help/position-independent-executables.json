[
    {
        "content": "<p>Hi,<br>\nIt seems I can't get position-independent-executables unless I make a target.json and have position-independent-executables: true in it, is there a way to do this at the command line? I have -C relocation-model=pic, but it doesn't seem like it's enough.</p>",
        "id": 263375059,
        "sender_full_name": "joey",
        "timestamp": 1638403042
    },
    {
        "content": "<p>You need <code>-Crelocation-model=pie</code>. See <a href=\"https://github.com/rust-lang/rust/issues/88820\">#88820</a>.</p>",
        "id": 263417060,
        "sender_full_name": "bjorn3",
        "timestamp": 1638440674
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span> problem is that 'aarch64-unknown-none-softfloat' doesn't have position-indepdendent-executables: true, so <a href=\"https://github.com/rust-lang/rust/blob/02063124f96aac10f8c5c70653242b0704d397e0/compiler/rustc_codegen_ssa/src/back/link.rs#L1530\">https://github.com/rust-lang/rust/blob/02063124f96aac10f8c5c70653242b0704d397e0/compiler/rustc_codegen_ssa/src/back/link.rs#L1530</a> fails. and there' doesn't seem to be a way to pass that in</p>",
        "id": 263489234,
        "sender_full_name": "joey",
        "timestamp": 1638473438
    },
    {
        "content": "<p>Yeah, position-independent-executable:false indicates that the target doesn't support PIE executables, so rustc will refuse to make them. Why do you want a PIE executable for a bare-metal target? Executables with a DYN elf type (that includes PIE executables) need a crt object to perform relocations AFAIK.</p>",
        "id": 263490917,
        "sender_full_name": "bjorn3",
        "timestamp": 1638474315
    },
    {
        "content": "<p>well I don't mind if it's a static pie either, but I want to be able to be loaded at any address</p>",
        "id": 263491555,
        "sender_full_name": "joey",
        "timestamp": 1638474607
    },
    {
        "content": "<p>the code can relocate itself</p>",
        "id": 263491574,
        "sender_full_name": "joey",
        "timestamp": 1638474616
    },
    {
        "content": "<p>I think you will need to make your own target.</p>",
        "id": 263494077,
        "sender_full_name": "bjorn3",
        "timestamp": 1638475785
    },
    {
        "content": "<p>Ok, fair enough, I was wondering if I could go without thats all!</p>",
        "id": 263494156,
        "sender_full_name": "joey",
        "timestamp": 1638475810
    },
    {
        "content": "<p>it probably makes sense to be more specific about it anyway</p>",
        "id": 263494282,
        "sender_full_name": "joey",
        "timestamp": 1638475879
    }
]
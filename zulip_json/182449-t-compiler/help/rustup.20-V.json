[
    {
        "content": "<p>Hello!</p>\n<p>I'm not sure if this is a bug or not, hence this message</p>\n<p><code>rustup -V</code> reports active rustc version, but, <code>rustup +toolchain -V</code> seems to always report <code>(rustc does not exist)</code>. Is this intended?</p>",
        "id": 276524362,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648148196
    },
    {
        "content": "<p>For me <code>rustup +toolchain -V</code> also reports the rustup version and not \"(rustc does not exist)\".</p>",
        "id": 276524766,
        "sender_full_name": "bjorn3",
        "timestamp": 1648148394
    },
    {
        "content": "<p>aha! You're right, I tried it with +nightly now which reports</p>\n<div class=\"codehilite\"><pre><span></span><code>info: The currently active `rustc` version is `rustc 1.61.0-nightly (1eb72580d 2022-03-08)`\n</code></pre></div>\n\n<p>but on a toolchain like <code>nightly-2022-02-23-x86_64-unknown-linux-gnu</code>, i'm getting <code>(rustc does not exist)</code></p>\n<p>im on windows right now, I guess the issue is when querying non-compatible rustc's (that requires emulation).</p>",
        "id": 276525512,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648148711
    },
    {
        "content": "<p>Yeah probably.</p>",
        "id": 276525576,
        "sender_full_name": "bjorn3",
        "timestamp": 1648148741
    },
    {
        "content": "<p>is there perhaps any other way to query the version that would provide this, I want to do this specifically for targets that would maybe require emulation.</p>\n<p>I want to implement a feature in <code>cross-rs/cross</code> that warns when the target toolchain that is used in the docker container is not \"updated\"</p>",
        "id": 276525763,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648148835
    },
    {
        "content": "<p>(e.g a file in the toolchain folder or something)</p>",
        "id": 276525801,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648148861
    },
    {
        "content": "<p>Why are you using a rustc for a foreign system rather than adding a target for said system with the host compiler?</p>",
        "id": 276525875,
        "sender_full_name": "bjorn3",
        "timestamp": 1648148883
    },
    {
        "content": "<p>I think i answered that just now &lt;3, if it wasn't clear. cross mounts the toolchain folder into a docker image that can emulate the target via qemu (if needed). Since I want to make the warning appear from the <code>cross</code> binary and not docker, I need a way to query this information</p>",
        "id": 276526018,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648148971
    },
    {
        "content": "<p>You can run something like <code>qemu-x86_64 $(rustup +toolchain which rustc) -V</code> to get the rustc version for a toolchain when you need emulation.</p>",
        "id": 276526228,
        "sender_full_name": "bjorn3",
        "timestamp": 1648149069
    },
    {
        "content": "<p>yeah, I can do that if the qemu target is installed on the host, but we don't have any such assumptions on <code>cross</code>, we basically only assume docker and rustup is installed. I'll see if I can figure this out in a good way, otherwise maybe I'll make an issue or pr to add this metadata</p>",
        "id": 276526418,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648149167
    },
    {
        "content": "<p>the information i need is available!</p>\n<p>in <code>lib/rustlib/multirust-channel-manifest.toml</code> <code>.pkg.rust.version</code></p>",
        "id": 276529441,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648150925
    },
    {
        "content": "<p>Is that the date used by rustup (when it was released as nightly) or the one used by rustc (when it was built)? The date in the <code>rustc -V</code> output is nornally 1 day earlier than what rustup lists in the toolchain name.</p>",
        "id": 276534204,
        "sender_full_name": "bjorn3",
        "timestamp": 1648153260
    },
    {
        "content": "<p>seems to be <code>rustc -V</code></p>",
        "id": 276537710,
        "sender_full_name": "Emilgardis",
        "timestamp": 1648155046
    }
]
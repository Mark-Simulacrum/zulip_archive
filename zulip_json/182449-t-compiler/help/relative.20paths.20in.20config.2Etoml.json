[
    {
        "content": "<p>hey, I'm building rust alongside a freshly built llvm and clang. I want to tell the build to use my tools: <a href=\"https://github.com/rust-lang/rust/blob/master/config.toml.example#L630\">https://github.com/rust-lang/rust/blob/master/config.toml.example#L630</a></p>\n<p>but I need to use relative paths and I'm having some trouble. are paths relative to the root of the checkout, the build dir, the config.toml file, or somewhere else?</p>",
        "id": 265215816,
        "sender_full_name": "Collin Baker",
        "timestamp": 1639686963
    },
    {
        "content": "<p>in my project tree my rust checkout and llvm build dir are next to each other. if I set e.g. <code>cc = \"../llvm-build/bin/clang\"</code>, some dependencies actually use it but others fail with <code>error: linker ../llvm-build/bin/clang not found</code></p>",
        "id": 265215969,
        "sender_full_name": "Collin Baker",
        "timestamp": 1639687056
    },
    {
        "content": "<p>hmm, that might just be a bug in bootstrap somewhere</p>",
        "id": 265216067,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639687096
    },
    {
        "content": "<p>ah got it, that's reassuring at least. are the paths supposed to be relative to rust's git checkout?</p>",
        "id": 265216141,
        "sender_full_name": "Collin Baker",
        "timestamp": 1639687142
    },
    {
        "content": "<p>I would expect so? none of this is documented very well <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> you might be able to find some comments in <code>src/bootstrap</code></p>",
        "id": 265216210,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639687183
    },
    {
        "content": "<p>but yeah the place I would start looking is for a <code>cc</code> field on any of the structs in <code>src/bootstrap/config.rs</code> and work forward from there to where it's used</p>",
        "id": 265216539,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639687319
    },
    {
        "content": "<p>bootstrap doesn't take too long to recompile so you can add a bunch of print statements if that helps</p>",
        "id": 265216611,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639687334
    },
    {
        "content": "<p>yeah i'm impressed with how easy it is to hack on this stuff</p>",
        "id": 265216698,
        "sender_full_name": "Collin Baker",
        "timestamp": 1639687380
    },
    {
        "content": "<p>rust-analyzer is super helpful for getting jump to definition as well, it has plugins for vscode and vim</p>",
        "id": 265216862,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639687451
    },
    {
        "content": "<p>ok I'm starting to work on this. I'm finding relative paths cause errors in quite a few places</p>",
        "id": 267097764,
        "sender_full_name": "Collin Baker",
        "timestamp": 1641494469
    },
    {
        "content": "<p>where to I file a bug for rust's build system?</p>",
        "id": 267097785,
        "sender_full_name": "Collin Baker",
        "timestamp": 1641494482
    },
    {
        "content": "<p>rust-lang/rust</p>",
        "id": 267100275,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1641495781
    }
]
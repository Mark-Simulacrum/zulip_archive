[
    {
        "content": "<p>I'm trying to add a custom stdlib target for a kernel i'm writing to a private fork of rust, and I've got it building both the compiler and the stdlib, but the custom compiler complains that it can't find the crate for std, even though it's built and in the lib directory. This is the code, if it helps: <a href=\"https://github.com/pjht/rust\">https://github.com/pjht/rust</a></p>",
        "id": 274985121,
        "sender_full_name": "pjht",
        "timestamp": 1647010353
    },
    {
        "content": "<p>What <code>config.toml</code> and <code>x.py</code> command did you use?</p>",
        "id": 275008371,
        "sender_full_name": "bjorn3",
        "timestamp": 1647020845
    },
    {
        "content": "<p>./x.py build -i library/std, and this is the only line I set in config.toml: target = [\"x86_64-unknown-mikros\"]</p>",
        "id": 275008706,
        "sender_full_name": "pjht",
        "timestamp": 1647020995
    },
    {
        "content": "<p>The target list needs to include the host triple to be able to compile build scripts and proc macros.</p>",
        "id": 275009554,
        "sender_full_name": "bjorn3",
        "timestamp": 1647021369
    },
    {
        "content": "<p>Ah, that would explain an error that I was getting about can't build proc macros for crate chalk-drive. I'm building it now, i'll see if that fixed it.</p>",
        "id": 275010004,
        "sender_full_name": "pjht",
        "timestamp": 1647021568
    },
    {
        "content": "<p>Yup, that fixed it. Now I can do the full build too. I <em>thought</em> that note didn't apply to me, as I wasn't using it to compile for that target. but looks like I was wrong. <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>  Thanks!</p>",
        "id": 275010477,
        "sender_full_name": "pjht",
        "timestamp": 1647021733
    }
]
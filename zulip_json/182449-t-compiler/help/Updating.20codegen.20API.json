[
    {
        "content": "<p>If i am writing a custom backend for rustc, what toolchain should i keep up to date with? It seems the codegen backend api breaks a lot so i am not quite sure if i should be following nightly and fixing it when nightly updates or what?</p>",
        "id": 251432984,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1630434485
    },
    {
        "content": "<p>yeah, rustc_cg_clif regularly updates the toolchain</p>",
        "id": 251441112,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630437279
    },
    {
        "content": "<p>you can choose what toolchains you want to support though, you aren't forced to use the latest nightly as long as you use rust-toolchain</p>",
        "id": 251441179,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630437307
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> arent i forced to use nightly because of rustc_private?</p>",
        "id": 251442535,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1630437787
    },
    {
        "content": "<p>I have a bit of a confusing setup, my codegen needs llvm 7, but i cant really build llvm 7 every time someone wants to use the backend. So i was thinking i can set up github CI to build shared libs of it which i can then download automatically. But then id have to build new libs on every nightly release, which sounds problematic</p>",
        "id": 251443495,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1630438104
    },
    {
        "content": "<p>maybe i can set up a way to download prebuilt llvm like rustc can do. But that also gets confusing...</p>",
        "id": 251443718,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1630438191
    },
    {
        "content": "<p>because to build the codegen you need to also have rustc-dev installed and it just... its a mess</p>",
        "id": 251444013,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1630438280
    },
    {
        "content": "<p>I think what Joshua is referring to is that you can pin to a specific nightly, and then just update periodically when you have time.  For example: <a href=\"https://github.com/bjorn3/rustc_codegen_cranelift/blob/master/rust-toolchain\"><code>rust-toolchain</code></a> in cranelift.  There are more docs about pinning <a href=\"https://rust-lang.github.io/rustup/overrides.html#the-toolchain-file\">here</a>.</p>",
        "id": 251450212,
        "sender_full_name": "Eric Huss",
        "timestamp": 1630440388
    },
    {
        "content": "<p>I see</p>",
        "id": 251450278,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1630440416
    },
    {
        "content": "<p>Yeah, you need a nightly <em>channel</em>, but you can pick any specific nightly <em>toolchain</em></p>",
        "id": 251453634,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630441637
    }
]
[
    {
        "content": "<p>hello, everyone! working on my first PR to rust, and trying to figure out how to check whether a <code>ty::Ty</code> implements a specific trait, (in this case, <code>Sync</code>).</p>\n<p>Is something like this even possible? </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"c1\">// `Some(ref_ty)` if `target_ty` is `&amp;T` and `T` fails to impl `Sync`</span>\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">refers_to_non_sync</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"k\">match</span><span class=\"w\"> </span><span class=\"n\">target_ty</span><span class=\"p\">.</span><span class=\"n\">kind</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">ty</span>::<span class=\"n\">Ref</span><span class=\"p\">(</span><span class=\"n\">_</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">ref_ty</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">_</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"c1\">// TODO: check if `ref_ty` implements `Sync`; how, though...?</span>\n<span class=\"w\">        </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">is_ref_sync</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"n\">is_ref_sync</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nb\">Some</span><span class=\"p\">(</span><span class=\"n\">ref_ty</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"> </span><span class=\"k\">else</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"nb\">None</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">},</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">_</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"nb\">None</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"p\">};</span><span class=\"w\"></span>\n</code></pre></div>\n<p>The motivation for such behavior is to change a diagnostic message for when <code>&amp;T</code> is not <code>Send</code> b/c <code>T</code> is not <code>Sync</code> so it's also possible that this is just the wrong approach. </p>\n<ul>\n<li>relevant PR: <a href=\"https://github.com/rust-lang/rust/issues/87322\">#87322</a></li>\n<li>relevant issue: <a href=\"https://github.com/rust-lang/rust/issues/86507\">#86507</a></li>\n</ul>\n<p>(reposted from <a class=\"stream\" data-stream-id=\"147480\" href=\"/#narrow/stream/147480-t-compiler.2Fwg-diagnostics\">#t-compiler/wg-diagnostics</a> b/c I wasn't sure the best place to put this)</p>",
        "id": 246789877,
        "sender_full_name": "Chaz Kiker",
        "timestamp": 1626907409
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"419100\">@Chaz Kiker</span> not sure off the top of my head, but if you search <code>evaluate_obligation</code> in the codebase there should be examples</p>",
        "id": 246791183,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1626908323
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"419100\">Chaz Kiker</span> has marked this topic as resolved.</p>",
        "id": 246803674,
        "sender_full_name": "Notification Bot",
        "timestamp": 1626922176
    }
]
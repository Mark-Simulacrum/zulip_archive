[
    {
        "content": "<p>I'm trying to add a <code>note</code>  to the diagnostic in the <a href=\"https://github.com/rust-lang/rust/blob/066f01d81bfbed746f6b6cf27a0426d829e8e832/compiler/rustc_passes/src/dead.rs#L569-L583\"><code>warn_dead_code</code> function</a> but having trouble producing the sub-diagnostics in the right order. If I just call <code>lint.build(...).note(...).emit()</code>, the note is emitted after the message about the lint level that gets added in <code>build(...)</code> automatically:</p>\n<div class=\"codehilite\"><pre><span></span><code>error: field is never read: `guard`\n  --&gt; /home/sunjay/Documents/projects/rust/src/test/ui/lint/dead-code/drop-only-field-issue-81658.rs:15:5\n   |\nLL |     guard: MutexGuard&lt;&#39;a, T&gt;, //~ ERROR field is never read\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_guard`\n   |\nnote: the lint level is defined here\n  --&gt; /home/sunjay/Documents/projects/rust/src/test/ui/lint/dead-code/drop-only-field-issue-81658.rs:8:9\n   |\nLL | #![deny(dead_code)]\n   |         ^^^^^^^^^\n   = note: &lt;MY NOTE HERE&gt;\n</code></pre></div>\n<p>Notice the oddly placed <code>&lt;MY NOTE HERE&gt;</code> at the bottom. What I want is this:</p>\n<div class=\"codehilite\"><pre><span></span><code>error: field is never read: `guard`\n  --&gt; /home/sunjay/Documents/projects/rust/src/test/ui/lint/dead-code/drop-only-field-issue-81658.rs:15:5\n   |\nLL |     guard: MutexGuard&lt;&#39;a, T&gt;, //~ ERROR field is never read\n   |     ^^^^^^^^^^^^^^^^^^^^^^^^ help: if this is intentional, prefix it with an underscore: `_guard`\n   |\n   = note: &lt;MY NOTE HERE&gt;\nnote: the lint level is defined here\n  --&gt; /home/sunjay/Documents/projects/rust/src/test/ui/lint/dead-code/drop-only-field-issue-81658.rs:8:9\n   |\nLL | #![deny(dead_code)]\n   |         ^^^^^^^^^\n</code></pre></div>\n<p>Is there a way to achieve that? Right now I have a weird hack that uses the slice <code>reverse()</code> method on the <code>children</code> field of the <code>diagnostic</code>.</p>",
        "id": 229967720,
        "sender_full_name": "Sunjay Varma",
        "timestamp": 1615518235
    }
]
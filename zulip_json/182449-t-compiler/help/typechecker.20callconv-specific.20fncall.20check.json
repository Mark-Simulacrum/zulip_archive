[
    {
        "content": "<p>Where would be the right place to put a check that checks that a function call isn't trying to call a function with a certain call conv? (ptx-kernel in this case) I looked at fnctxt but i could not find a place for general \"check if calling this function is valid\". For this <a href=\"https://github.com/rust-lang/rust/pull/94703\">pr</a></p>",
        "id": 275117705,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1647119934
    },
    {
        "content": "<p>It should probably be done somewhere in typeck. You could trace back from intrinsicck to where function calls are checked and maybe insert this check there.</p>",
        "id": 275117996,
        "sender_full_name": "bjorn3",
        "timestamp": 1647120405
    },
    {
        "content": "<p><a href=\"http://intrinsic.rs\">intrinsic.rs</a> seems to be a dead-end, it just leads back to generic \"is this item fine?\" checks</p>",
        "id": 275118155,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1647120646
    },
    {
        "content": "<p>Right, forgot it checks at definition rather than call time.</p>",
        "id": 275118370,
        "sender_full_name": "bjorn3",
        "timestamp": 1647121023
    },
    {
        "content": "<p>Maybe here: <a href=\"https://github.com/rust-lang/rust/blob/f103b2969b0088953873dc1ac92eb3387c753596/compiler/rustc_typeck/src/check/callee.rs#L144\">https://github.com/rust-lang/rust/blob/f103b2969b0088953873dc1ac92eb3387c753596/compiler/rustc_typeck/src/check/callee.rs#L144</a> Not familiar with this code though.</p>",
        "id": 275118440,
        "sender_full_name": "bjorn3",
        "timestamp": 1647121088
    },
    {
        "content": "<p>hmm this looks like maybe a part of it but not the main place</p>",
        "id": 275118463,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1647121163
    }
]
[
    {
        "content": "<p>I'm currently trying to add support for Rust traits to an Auto-diff tool: <a href=\"https://github.com/wsmoses/Enzyme/pull/307\">https://github.com/wsmoses/Enzyme/pull/307</a><br>\nEnzyme is, to some extend, able to deduce the type/size of variables and generate the correct gradients.<br>\nIt is however preferable to pass a precise TypeTree along with each variable, such that Enzyme doesn't have to apply heuristics.</p>\n<p>Examples for the explicit handling of other types are here: <a href=\"https://github.com/wsmoses/Enzyme/pull/307/files#diff-7022452470a9ea83bd88f50e7a337b0f3e62ebcf34ca5055ecba36f7f91974ad\">https://github.com/wsmoses/Enzyme/pull/307/files#diff-7022452470a9ea83bd88f50e7a337b0f3e62ebcf34ca5055ecba36f7f91974ad</a><br>\nI have created a short example rust code which uses dyn Animal here: <a href=\"https://github.com/ZuseZ4/dwarf\">https://github.com/ZuseZ4/dwarf</a><br>\nFor convenience I've extracted relevant dwarf info into the README.md</p>\n<p>My issue here is that the Debug Info leads to a struct { pointer, vtable } struct of type { *mut u8, [usize; 3] }, no matter if I follow it's <br>\nelements, or its templateParams entry.<br>\nI am missing some kind of forward link here, in order to know that we might continue with any of [cat, horse, sheep, cow], to generate <br>\na SubTypetTree for each of the cases. </p>\n<p>Is there any general reason why such a forward link can't be included into the dwarf debug information of the animal variable?<br>\nAs a side note, I've been working on some other area of enzyme before, I've not implemented the TypeTree analysis for the other Rust types.</p>\n<p>I've found these two entries. To me they read like my issue could be solved, but would require to adjust the entire toolchain, is that correct?<br>\n<a href=\"https://rustc-dev-guide.rust-lang.org/debugging-support-in-rustc.html#dwarf-and-traits\">https://rustc-dev-guide.rust-lang.org/debugging-support-in-rustc.html#dwarf-and-traits</a><br>\n<a href=\"https://github.com/rust-lang/rust/issues/33014\">https://github.com/rust-lang/rust/issues/33014</a></p>",
        "id": 260616563,
        "sender_full_name": "Manuel Drehwald",
        "timestamp": 1636349046
    },
    {
        "content": "<p>How would this forward link actually work? The trait object could potentially point to any implementation of the trait, even ones that aren't in the current CU.</p>",
        "id": 260673898,
        "sender_full_name": "Kyle Huey",
        "timestamp": 1636386022
    }
]
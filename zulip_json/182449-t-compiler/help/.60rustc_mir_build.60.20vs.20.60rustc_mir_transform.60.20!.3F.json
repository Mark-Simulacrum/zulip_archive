[
    {
        "content": "<p>My first time trying to change something in the compiler. After looking around in the AST definition, and out of curiosity following the handling of unsafe blocks a bit through the compiler with rust-analyzer, I’ve ended up in <code>…/compiler/rustc_mir_build/src/check_unsafety.rs</code>. I wanted to change something to see if I could improve lints, but was quite confused when changes didn’t seem to make a difference. Grepping for an error message lead me to another occurrence in a different file, <code>…/compiler/rustc_mir_transform/src/check_unsafety.rs</code>; there seems to be quite a bit of duplication. What’s going on here? Where is this documented?</p>",
        "id": 269132773,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1643042390
    },
    {
        "content": "<p>you might have encountered <a href=\"https://github.com/rust-lang/project-thir-unsafeck\">https://github.com/rust-lang/project-thir-unsafeck</a> / <a class=\"stream\" data-stream-id=\"278509\" href=\"/#narrow/stream/278509-project-thir-unsafeck\">#project-thir-unsafeck</a></p>",
        "id": 269133158,
        "sender_full_name": "lcnr",
        "timestamp": 1643042540
    },
    {
        "content": "<p>the unsafety check in <code>mir_build</code> only runs with <code>-Zthir-unsafeck</code> which is supposed to replace the mir checker in <code>mir_transform</code> in the future but is not yet ready</p>",
        "id": 269133549,
        "sender_full_name": "lcnr",
        "timestamp": 1643042680
    },
    {
        "content": "<p>i don't know how far away we are from only using the thir check, but afaict that project group is currently mostly inactive</p>",
        "id": 269133679,
        "sender_full_name": "lcnr",
        "timestamp": 1643042736
    },
    {
        "content": "<p>Follow-up question; so if I were to open a PR to change a lint (this is about <code>unused_unsafe</code> for which I think I have an idea for a small, reasonable improvement), should I just ignore the stuff in <code>rustc_mir_build</code>? Or should the two implementations be kept “in sync”?</p>",
        "id": 269134363,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1643043004
    },
    {
        "content": "<p>Also, unrelated question, but I haven’t found a good source on this: How would I do “printf-debugging” in the compiler?</p>",
        "id": 269134554,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1643043085
    },
    {
        "content": "<p><a href=\"https://rustc-dev-guide.rust-lang.org/tracing.html\">https://rustc-dev-guide.rust-lang.org/tracing.html</a></p>",
        "id": 269137768,
        "sender_full_name": "The 8472",
        "timestamp": 1643044345
    },
    {
        "content": "<p>i think it's fine to ignore <code>rustc_mir_build</code> when changing stuff <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 269217072,
        "sender_full_name": "lcnr",
        "timestamp": 1643094763
    },
    {
        "content": "<p>alright ^^</p>",
        "id": 269236118,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1643106179
    }
]
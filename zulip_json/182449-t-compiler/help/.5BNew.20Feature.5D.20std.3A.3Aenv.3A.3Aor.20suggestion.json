[
    {
        "content": "<p>Is it practical to set default values when reading environment variables?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">or</span><span class=\"o\">&lt;</span><span class=\"n\">K</span>: <span class=\"nb\">AsRef</span><span class=\"o\">&lt;</span><span class=\"n\">OsStr</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">T</span>: <span class=\"nc\">FromStr</span><span class=\"o\">&gt;</span><span class=\"p\">(</span><span class=\"n\">k</span>: <span class=\"nc\">K</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">default</span>: <span class=\"nc\">T</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">T</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">v</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">var</span><span class=\"p\">(</span><span class=\"n\">k</span><span class=\"p\">);</span><span class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"n\">v</span><span class=\"p\">.</span><span class=\"n\">ok</span><span class=\"p\">().</span><span class=\"n\">and_then</span><span class=\"p\">(</span><span class=\"o\">|</span><span class=\"n\">s</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"p\">.</span><span class=\"n\">parse</span>::<span class=\"o\">&lt;</span><span class=\"n\">T</span><span class=\"o\">&gt;</span><span class=\"p\">().</span><span class=\"n\">ok</span><span class=\"p\">()).</span><span class=\"n\">unwrap_or</span><span class=\"p\">(</span><span class=\"n\">default</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>usecase:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">            </span><span class=\"n\">PostgresConfig</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">host</span>: <span class=\"nc\">or</span><span class=\"p\">(</span><span class=\"s\">\"POSTGRES_HOST\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"localhost\"</span><span class=\"p\">),</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">port</span>: <span class=\"nc\">or</span><span class=\"p\">(</span><span class=\"s\">\"POSTGRES_PORT\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"mi\">5432</span><span class=\"p\">),</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">user</span>: <span class=\"nc\">or</span><span class=\"p\">(</span><span class=\"s\">\"POSTGRES_USER\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"postgres\"</span><span class=\"p\">),</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">pwd</span>: <span class=\"nc\">or</span><span class=\"p\">(</span><span class=\"s\">\"POSTGRES_PASSWORD\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"postgres\"</span><span class=\"p\">),</span><span class=\"w\"></span>\n<span class=\"w\">                </span><span class=\"n\">name</span>: <span class=\"nc\">or</span><span class=\"p\">(</span><span class=\"s\">\"POSTGRES_DB\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"p\">.</span><span class=\"n\">name</span><span class=\"p\">),</span><span class=\"w\"></span>\n<span class=\"w\">            </span><span class=\"p\">},</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 263723654,
        "sender_full_name": "Chenyang Shao",
        "timestamp": 1638641910
    },
    {
        "content": "<p>Seems pretty easy to write on your own. I don't know that it needs to be in the standard library, it seems to be doing an awful lot</p>",
        "id": 263723779,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638642089
    }
]
[
    {
        "content": "<p>I'm doing some changes to std that make it no longer buildable by stage0. Is there a way to make stage0 std be built from an unmodified source?</p>\n<p>(I'm experimenting with addihg a <code>?Leak</code> trait that works  like <code>?Sized</code>. This means I have to write <code>T: ?Sized + ?Leak</code>  which is currently not accepted. I could <code>#[cfg(bootstrap)]</code> every single instance of it, but there are a lot...)</p>",
        "id": 274180644,
        "sender_full_name": "Dario Nieuwenhuis",
        "timestamp": 1646423759
    },
    {
        "content": "<p>Rustc itself often uses methods added to libstd before the bootstrap compiler is bumped to a new version with them, so it needs the libstd build from <code>library/std</code>.</p>",
        "id": 274181795,
        "sender_full_name": "bjorn3",
        "timestamp": 1646424271
    },
    {
        "content": "<p>so if I copy <code>library/std</code> to <code>library/std0</code> then apply my changes to <code>library/std</code> only</p>",
        "id": 274182576,
        "sender_full_name": "Dario Nieuwenhuis",
        "timestamp": 1646424672
    },
    {
        "content": "<p>is there any way to force the build system to build stage0 std from <code>std0</code> instead?</p>",
        "id": 274182612,
        "sender_full_name": "Dario Nieuwenhuis",
        "timestamp": 1646424695
    },
    {
        "content": "<p>oh well, I guess I can do this</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#[cfg_attr(bootstrap, path = </span><span class=\"s\">\"marker_bootstrap.rs\"</span><span class=\"cp\">)]</span><span class=\"w\"></span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">mod</span> <span class=\"nn\">marker</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 274184957,
        "sender_full_name": "Dario Nieuwenhuis",
        "timestamp": 1646425937
    },
    {
        "content": "<p>If you just need it locally for experimenting, one hack that can suffice is to build once without your changes, then build only with <code>--keep-stage-std 0</code> afterwards so it doesn't rebuild the library.</p>",
        "id": 274216201,
        "sender_full_name": "scottmcm",
        "timestamp": 1646450469
    }
]
[
    {
        "content": "<p>As of now, I have found two major dev tools - clippy and miri - that are suffering from crashes as a result of a malloc error.  They are as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>Crashed Thread:        1  rustc\n\nException Type:        EXC_CRASH (SIGABRT)\nException Codes:       0x0000000000000000, 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nApplication Specific Information:\nclippy-driver(20172,0x7000098d8000) malloc: *** error for object 0x600002e23b00: pointer being realloc&#39;d was not allocated\nabort() called\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>Crashed Thread:        1  rustc\n\nException Type:        EXC_CRASH (SIGABRT)\nException Codes:       0x0000000000000000, 0x0000000000000000\nException Note:        EXC_CORPSE_NOTIFY\n\nApplication Specific Information:\nmiri(14735,0x70000800a000) malloc: *** error for object 0x60000461ba00: pointer being realloc&#39;d was not allocated\nabort() called\n</code></pre></div>",
        "id": 265654824,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640071397
    },
    {
        "content": "<p>This issue seems to be localized to the MacOS nightly builds of rustc starting 2021-12-05 and onwards.</p>",
        "id": 265654937,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640071545
    },
    {
        "content": "<p>Would it be helpful to have the complete crash logs?</p>",
        "id": 265654986,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640071577
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/jEYqeOoZX9efmNcyYvJyaf5U/clippy-driver-2021-12-21-010508.ips\">clippy-driver-2021-12-21-010508.ips</a> <br>\n<a href=\"/user_uploads/4715/njY-z4ZKlBxhZ6Hp8HvKkZoN/miri-2021-12-20-182132.ips\">miri-2021-12-20-182132.ips</a> <br>\nit is 1 am for me, so I am leaving this here just in case it will be helpful for someone before I wake up again</p>",
        "id": 265655603,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640072281
    },
    {
        "content": "<p>text versions for non-mac users who'd like to help investigate as well<br>\n<a href=\"/user_uploads/4715/o335PeoN-YxjNQV6pvayOwY2/clippy.txt\">clippy.txt</a><br>\n<a href=\"/user_uploads/4715/vIdyoF8DDgrGp-A8GVYhpAaq/miri.txt\">miri.txt</a></p>",
        "id": 265655799,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640072456
    },
    {
        "content": "<p>Can you open an issue?</p>",
        "id": 265659349,
        "sender_full_name": "bjorn3",
        "timestamp": 1640075636
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"133247\">bjorn3</span> <a href=\"#narrow/stream/182449-t-compiler.2Fhelp/topic/Multiple.20Devtool.20crashes.20stemming.20from.20malloc.20error/near/265659349\">said</a>:</p>\n<blockquote>\n<p>Can you open an issue?</p>\n</blockquote>\n<p>On the rust repo?</p>",
        "id": 265700037,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640101725
    },
    {
        "content": "<p>Yes</p>",
        "id": 265703177,
        "sender_full_name": "bjorn3",
        "timestamp": 1640103187
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"457767\">@Keegan Bilodeau</span> Can you confirm where you installed Rust from?  Was it the official builds via rustup?</p>\n<p>Over at <a href=\"https://github.com/rust-lang/cargo/issues/10022\">https://github.com/rust-lang/cargo/issues/10022</a> we have determined that builds done without jemalloc have been crashing with a similar realloc failure.  I forgot to file an issue on it, but I have now opened <a href=\"https://github.com/rust-lang/rust/issues/92173\">#92173</a>.  Not sure if you have a similar situation.</p>",
        "id": 265725235,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640114974
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"120518\">Eric Huss</span> <a href=\"#narrow/stream/182449-t-compiler.2Fhelp/topic/Multiple.20Devtool.20crashes.20stemming.20from.20malloc.20error/near/265725235\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"457767\">Keegan Bilodeau</span> Can you confirm where you installed Rust from?  Was it the official builds via rustup?</p>\n<p>Over at <a href=\"https://github.com/rust-lang/cargo/issues/10022\">https://github.com/rust-lang/cargo/issues/10022</a> we have determined that builds done without jemalloc have been crashing with a similar realloc failure.  I forgot to file an issue on it, but I have now opened <a href=\"https://github.com/rust-lang/rust/issues/92173\">#92173</a>.  Not sure if you have a similar situation.</p>\n</blockquote>\n<p>I can confirm that I did install Rust officially through Rustup, so I have opened this issue on the rust repo <a href=\"https://github.com/rust-lang/rust/issues/92185\">https://github.com/rust-lang/rust/issues/92185</a></p>",
        "id": 265759576,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640140520
    },
    {
        "content": "<p>Also, I have determined that this issue specifically affects crates that involve proc macro crates, either it is a proc macro crate or it's a workspace that contains a proc macro crate.</p>",
        "id": 265759641,
        "sender_full_name": "Keegan Bilodeau",
        "timestamp": 1640140591
    }
]
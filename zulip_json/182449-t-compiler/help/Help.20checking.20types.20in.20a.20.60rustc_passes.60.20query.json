[
    {
        "content": "<p>I am trying to implement more checks for lang items and I need to be able to compare arbitrary types.  Currently I have tried to add to the <code>get_lang_items</code> query which is implemented in <code>rustc_passes::lang_items</code> however there I can only work with hir and it has led to awful pattern matches to just equate some types to hard coded types, and I don't believe it's possible to equate two types used in different places because the spans are different.</p>\n<p>I want to <strong>not</strong> collect the lang item at all if it's incorrect, or at least abort compilation immediately before the item is used because that can lead to ICEs and problems down the line when things are assumed.  This means I can't do the checks much later because type checking uses some lang items to complete.  I believe that this could be problematic if I want to use more type info in the lang item collection because trying to typecheck the declarations of the lang items would require using lang items and that would cycle.</p>\n<p>Does anyone have any guidance as where best to put this code and how I could equate arbitrary types (and hopefully make matching some hard coded types easier as well)</p>",
        "id": 261999237,
        "sender_full_name": "asquared31415",
        "timestamp": 1637273681
    }
]
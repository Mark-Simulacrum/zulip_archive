[
    {
        "content": "<p>Hello, I wrote a repr attribute in a proc_macro, but it doesn't seem to work. Define just like this: </p>\n<div class=\"codehilite\"><pre><span></span><code>#[proc_macro]\npub fn ffi_null_or(input: TokenStream) -&gt; TokenStream {\n    let str = input.to_string();\n    let mut params = str.split(&#39; &#39;);\n    let name = params.next().unwrap();\n    let value_type = params.next().unwrap();\n    let code = format!(\n        r#&quot;\n            #[repr(u8)]\n            pub enum {}OrNull {{\n                Null,\n                Value({})\n            }}\n        &quot;#,\n        name, value_type\n    );\n    code.parse().unwrap()\n}\n</code></pre></div>\n<p>And use like this: </p>\n<div class=\"codehilite\"><pre><span></span><code>ffi_null_or!(Int i64);\n</code></pre></div>\n<p>It can be compiled correctly, however the <code>bindings.h</code> generated by <code>cbindgen</code> dosen't contain the type named <code>IntOrNull</code>. Is my code wrong or something?</p>",
        "id": 267190478,
        "sender_full_name": "Wzh",
        "timestamp": 1641563261
    },
    {
        "content": "<p>Following in <a href=\"#narrow/stream/122651-general/topic/repr.20in.20proc_macro\">https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/repr.20in.20proc_macro</a></p>",
        "id": 267610900,
        "sender_full_name": "Daniel Henry-Mantilla",
        "timestamp": 1641920069
    }
]
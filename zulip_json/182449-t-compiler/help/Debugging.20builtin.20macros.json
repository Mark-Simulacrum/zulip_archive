[
    {
        "content": "<p>Hi all, I'm trying to debug what's happening in my own bug report,  <a href=\"https://github.com/rust-lang/rust/issues/89188\">#89188</a>. I suspect there's a problem with the <code>derive</code> macro, so what I want to do is to look at the code it actually expands to. The <code>ast</code> debugging options I've found are <code>-Z ast-json=yes</code> and <code>-Z unpretty=ast-tree,expanded</code>. Both these outputs are very verbose. Is there anything I can do to serialize any of these formats back into source code?</p>",
        "id": 254741430,
        "sender_full_name": "Audun Halland",
        "timestamp": 1632504454
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"294358\">@Audun Halland</span> Have you tried <code>cargo expand</code>?</p>",
        "id": 254742086,
        "sender_full_name": "Eric Huss",
        "timestamp": 1632504718
    },
    {
        "content": "<p>Hmm, I've heard about it.. Somehow I assumed it was for \"user-space\" macros.. If it works for builtins as well, then perfect. Thanks for the tip, I'll try it out :)</p>",
        "id": 254742354,
        "sender_full_name": "Audun Halland",
        "timestamp": 1632504824
    },
    {
        "content": "<p><code>cargo expand</code> (on recent nightly) gives <code>error: Unrecognized option: 'pretty'</code> <span aria-label=\"oh no\" class=\"emoji emoji-1f615\" role=\"img\" title=\"oh no\">:oh_no:</span></p>",
        "id": 254743102,
        "sender_full_name": "Audun Halland",
        "timestamp": 1632505120
    },
    {
        "content": "<p>Which version of <code>cargo expand</code> are you using and which nightly?</p>",
        "id": 254743233,
        "sender_full_name": "Eric Huss",
        "timestamp": 1632505176
    },
    {
        "content": "<p>answering my own question, yes, it's probably way outdated..</p>",
        "id": 254743283,
        "sender_full_name": "Audun Halland",
        "timestamp": 1632505198
    },
    {
        "content": "<p>You can use cargo expand on the playground</p>",
        "id": 254743344,
        "sender_full_name": "Giacomo Stevanato",
        "timestamp": 1632505208
    },
    {
        "content": "<p>I updated it, now it's working <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 254743406,
        "sender_full_name": "Audun Halland",
        "timestamp": 1632505236
    },
    {
        "content": "<p>Anyway, looks like the reason is that the macro tries to bound the <code>T::Shim&lt;'s&gt;</code> by <code>Clone</code>, however this introduces an unused <code>'s</code> parameter. It should probably be <code>for&lt;'s&gt; T::Shim&lt;'s&gt;: Clone</code></p>",
        "id": 254743514,
        "sender_full_name": "Giacomo Stevanato",
        "timestamp": 1632505282
    },
    {
        "content": "<p>yes, exactly, that fixes it</p>",
        "id": 254743778,
        "sender_full_name": "Audun Halland",
        "timestamp": 1632505391
    }
]
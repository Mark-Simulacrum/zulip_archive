[
    {
        "content": "<p>Hi, I'm attempting a change in the std lib and I've run into a problem with the bootstrap compiler ICE-ing. I extracted the relevant parts into a separate crate and found out that it was indeed a bug in a prior version (at least up to 2022-02-26) but seems to be fixed on latest nightly.</p>\n<p>Locally, rust is currently using 2022-02-22 beta build to bootstrap. How do I update that?</p>",
        "id": 274542011,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1646747096
    },
    {
        "content": "<p>Oh, I've found the bump-stage0 command, Trying that now</p>",
        "id": 274543496,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1646747733
    },
    {
        "content": "<p>The bootstrap compiler must not be nightly. For the nightly channel it is the latest beta. For the beta channel the latest stable and for the stable channel the previous stable. It is important that stable bootstraps from the previous stable and not some other version.</p>",
        "id": 274543875,
        "sender_full_name": "bjorn3",
        "timestamp": 1646747929
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"396593\">@Conrad Ludgate</span></p>",
        "id": 274543895,
        "sender_full_name": "bjorn3",
        "timestamp": 1646747942
    },
    {
        "content": "<p>If the latest beta compiler still ices the fix on nightly may need to be backported to beta.</p>",
        "id": 274544048,
        "sender_full_name": "bjorn3",
        "timestamp": 1646748006
    },
    {
        "content": "<p>Could you try to find which PR fixed it? You may be able to use <a href=\"https://github.com/rust-lang/cargo-bisect-rustc\">https://github.com/rust-lang/cargo-bisect-rustc</a> for that.</p>",
        "id": 274544234,
        "sender_full_name": "bjorn3",
        "timestamp": 1646748060
    },
    {
        "content": "<p>I'll look. It does seem to ICE on beta</p>",
        "id": 274544386,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1646748123
    },
    {
        "content": "<p>It was fixed inbetween the 2022-02-28 and 2022-03-01 builds it seems. (bisect only seems to find regressions, and not specific fixes). that said, the date range should be enough to filter through merged PRs</p>",
        "id": 274545706,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1646748746
    },
    {
        "content": "<p>Stab in the dark, might be <a href=\"https://github.com/rust-lang/rust/pull/94414\">https://github.com/rust-lang/rust/pull/94414</a> that fixed it</p>",
        "id": 274546701,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1646749207
    },
    {
        "content": "<p>Thanks for pointing me to that PR! I will probably need to apply the same change to the alternative codegen backend for rustc I wrote. As for your specific case I think you will have to wait until the next beta branch. If that PR is indeed responsible for fixing it, the ICE can only happen when using unstable features. If you can't work around it using eg a different version of your case gated behind <code>#[cfg(bootstrap)]</code> you may ask for it to be backported anyway. No guarantee that it will be accepted though.</p>",
        "id": 274548933,
        "sender_full_name": "bjorn3",
        "timestamp": 1646750182
    },
    {
        "content": "<p>I'm ok waiting. At least I know it's not my fault <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> I guess it's 4-5 weeks until the next beta is cut?</p>",
        "id": 274549613,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1646750504
    },
    {
        "content": "<p>april 5th I believe: <a href=\"https://forge.rust-lang.org/#no-tools-breakage-week\">https://forge.rust-lang.org/#no-tools-breakage-week</a></p>",
        "id": 274551501,
        "sender_full_name": "bjorn3",
        "timestamp": 1646751330
    }
]
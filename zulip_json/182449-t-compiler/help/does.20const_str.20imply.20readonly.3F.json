[
    {
        "content": "<p>does cg_ssa's <code>const_str(Symbol) -&gt; (Value, Value)</code> imply that the str is readonly? Im wondering if i should place it in the <code>__constant__</code> address space in CUDA</p>",
        "id": 261749889,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637132873
    },
    {
        "content": "<p>I am pretty sure cg_llvm places it in a readonly section, so go ahead and place it in the <code>__constant__</code> address space.</p>",
        "id": 261764187,
        "sender_full_name": "bjorn3",
        "timestamp": 1637143664
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span> it only places statics in readonly in <code>get_static</code> if they can be, if it uses <code>get_static</code> to also get things like defined symbols then yeah that makes sense. Although i only thought get_static was for <code>static FOO</code> type of things. Now that i think about it, it's probably for all symbols</p>",
        "id": 261830706,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637175134
    },
    {
        "content": "<p>It is very confusing because rustc requires you to define globals in like 7 different places <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 261830772,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637175164
    },
    {
        "content": "<p>And LLVM doesnt make it any easier, i had to rewrite <code>LLVMRustGetOrInsertGlobal</code> because it did not allow you to specify an address space <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 261830938,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637175240
    },
    {
        "content": "<p>the distinction between globals and statics is kind of confusing, im not sure if rustc always means <code>static FOO</code> type of things by \"static\", while globals is anything that rustc needs, like private or alloc globals</p>",
        "id": 261831629,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637175575
    },
    {
        "content": "<p>yeah it seems like get_static is for more than just <code>static</code>s, its called for thread locals as well as for GlobalAlloc things in scalar_to_backend</p>",
        "id": 261832859,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637176095
    },
    {
        "content": "<p>but i dont think llvm has a way to set a global's addrspace... ugh</p>",
        "id": 261833187,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1637176291
    }
]
[
    {
        "content": "<p>Which target are you compiling for? And which rustc version do you use?</p>",
        "id": 276361281,
        "sender_full_name": "bjorn3",
        "timestamp": 1648052954
    },
    {
        "content": "<p>And with cargo sysroot you mean -Zbuild-std, right?</p>",
        "id": 276361365,
        "sender_full_name": "bjorn3",
        "timestamp": 1648052987
    },
    {
        "content": "<p>âžœ rustc --version<br>\nrustc 1.60.0-nightly (84322efad 2022-01-23)<br>\ntarget:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"llvm-target\"</span>: <span class=\"s\">\"x86_64-unknown-none\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"data-layout\"</span>: <span class=\"s\">\"e-m:e-i64:64-f80:128-n8:16:32:64-S128\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"arch\"</span>: <span class=\"s\">\"x86_64\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"target-endian\"</span>: <span class=\"s\">\"little\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"target-pointer-width\"</span>: <span class=\"s\">\"64\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"target-c-int-width\"</span>: <span class=\"s\">\"32\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"os\"</span>: <span class=\"s\">\"none\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"executables\"</span>: <span class=\"nc\">true</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"panic-strategy\"</span>: <span class=\"s\">\"abort\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"disable-redzone\"</span>: <span class=\"nc\">true</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"s\">\"features\"</span>: <span class=\"s\">\"-mmx,-sse,+soft-float\"</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>compile command: <code>cargo build -Z build-std=core,alloc --target x86_64-unknown-none.json</code></p>",
        "id": 276361606,
        "sender_full_name": "yoru",
        "timestamp": 1648053061
    },
    {
        "content": "<p><a href=\"http://main.rs\">main.rs</a></p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#![no_main]</span><span class=\"w\"></span>\n<span class=\"cp\">#![no_std]</span><span class=\"w\"></span>\n\n<span class=\"k\">use</span><span class=\"w\"> </span><span class=\"n\">core</span>::<span class=\"n\">panic</span>::<span class=\"n\">PanicInfo</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"cp\">#[panic_handler]</span><span class=\"w\"></span>\n<span class=\"k\">fn</span> <span class=\"nf\">panic</span><span class=\"p\">(</span><span class=\"n\">_panic</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">PanicInfo</span><span class=\"o\">&lt;'</span><span class=\"nb\">_</span><span class=\"o\">&gt;</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"o\">!</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">loop</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"cp\">#[no_mangle]</span><span class=\"w\"></span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">extern</span><span class=\"w\"> </span><span class=\"s\">\"C\"</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">_start</span><span class=\"p\">()</span><span class=\"w\"> </span>-&gt; <span class=\"o\">!</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">loop</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 276363342,
        "sender_full_name": "yoru",
        "timestamp": 1648053662
    },
    {
        "content": "<p>Try updating rustc. It may be too old for the latest compiler-builtins.</p>",
        "id": 276377871,
        "sender_full_name": "bjorn3",
        "timestamp": 1648059352
    },
    {
        "content": "<p>I updated rustc to nightly-2022-03-24 and that solved the problem. Thanks!</p>",
        "id": 276425128,
        "sender_full_name": "yoru",
        "timestamp": 1648087035
    },
    {
        "content": "<p>But is there a way to use it with old version of rustc also, since sometime i don't want to use newest rustc because it can break thing?</p>",
        "id": 276425150,
        "sender_full_name": "yoru",
        "timestamp": 1648087077
    },
    {
        "content": "<p>I don't know how to tell cargo-systoot to use an older version of compiler-builtins. <code>cargo build -Zbuild-std</code> should always use the correct version though AFAIK.</p>",
        "id": 276437678,
        "sender_full_name": "bjorn3",
        "timestamp": 1648104337
    }
]
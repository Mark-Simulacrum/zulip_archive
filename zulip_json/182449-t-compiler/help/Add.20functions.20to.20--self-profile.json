[
    {
        "content": "<p>I'm working on adding a lint to check for missing variants/fields in matches/patterns of non_exhaustive types. It turns out this is super expensive 20% more wall-time. What I want to do is add a few of the functions in in this mod <a href=\"https://github.com/rust-lang/rust/blob/master/compiler/rustc_mir_build/src/thir/pattern/usefulness.rs#L1085\">https://github.com/rust-lang/rust/blob/master/compiler/rustc_mir_build/src/thir/pattern/usefulness.rs#L1085</a> is this possible? will rustc-perf play nice with <code>let _guard = cx.tcx.sess.prof.generic_activity(\"is_useful\");</code> (the <code>SelfProfileRef</code>)?</p>",
        "id": 251402514,
        "sender_full_name": "DevinR528",
        "timestamp": 1630423062
    },
    {
        "content": "<p>^^ it worked, should have just tried it <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 251402701,
        "sender_full_name": "DevinR528",
        "timestamp": 1630423142
    },
    {
        "content": "<p>you can write that more simply as <code>let _guard = cx.tcx.sess.timer(\"is_useful\");</code>, or as <code>cx.tcx.sess.time(|| my_function())</code> if you don't want the guard</p>",
        "id": 251405673,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1630424221
    }
]
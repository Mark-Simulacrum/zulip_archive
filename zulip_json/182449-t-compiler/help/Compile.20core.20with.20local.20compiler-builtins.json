[
    {
        "content": "<p>Hi all,<br>\nI'm adding a new llvm triple to rust for an embedded target, so I'm going through all the motions.<br>\nI'm a the point where I've needed to modify compiler-builtins (no C intrinsics for the platform)<br>\nHowever... I can't for the life of me figure out how to get cargo to pick up my local crate when I'm building core.<br>\nCan someone point me in the right direction?</p>",
        "id": 264537960,
        "sender_full_name": "Dominic DeMarco",
        "timestamp": 1639192910
    },
    {
        "content": "<p>I can change the version and path in Cargo.toml with a [patch.crates-io] override when I actually build rust from source, but then when I try to run cargo build -Zbuild-std=core, it still pulls it from the crates registry, so my changes are missing.</p>",
        "id": 264543668,
        "sender_full_name": "Dominic DeMarco",
        "timestamp": 1639201454
    },
    {
        "content": "<p>yes cargo creates a virtual manifest to pull std with -Z build-std so it won't apply your [patch]es</p>",
        "id": 264592736,
        "sender_full_name": "Alessandro Decina",
        "timestamp": 1639267153
    },
    {
        "content": "<p>you can try passing -Z build-std-features=compiler-builtins-mem</p>",
        "id": 264592750,
        "sender_full_name": "Alessandro Decina",
        "timestamp": 1639267178
    },
    {
        "content": "<p>(and the other features you need)</p>",
        "id": 264592757,
        "sender_full_name": "Alessandro Decina",
        "timestamp": 1639267187
    }
]
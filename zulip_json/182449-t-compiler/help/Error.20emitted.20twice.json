[
    {
        "content": "<p>Hi, I'm implementing a suggestion for lifetime mismatches, but I'm running into a problem, where there are two errors emitted for the same cause, causing my suggestions to be applied twice. Do you know of any way to fix this?</p>\n<p>minimal example</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span> <span class=\"nf\">foo</span><span class=\"p\">(</span><span class=\"n\">slice_a</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">mut</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"kt\">u8</span><span class=\"p\">],</span><span class=\"w\"> </span><span class=\"n\">slice_b</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">mut</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"kt\">u8</span><span class=\"p\">])</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">core</span>::<span class=\"n\">mem</span>::<span class=\"n\">swap</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">slice_a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">slice_b</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 258870472,
        "sender_full_name": "nilstrieb",
        "timestamp": 1635069781
    },
    {
        "content": "<p>Are the diagnostics identical? If so they are deduplicated normally. It is just ui tests that have this deduplication disabled: <a href=\"https://github.com/rust-lang/rust/blob/1ddd4e6d7ed446934abd428a08e18535faef5e03/src/tools/compiletest/src/runtest.rs#L1816\">https://github.com/rust-lang/rust/blob/1ddd4e6d7ed446934abd428a08e18535faef5e03/src/tools/compiletest/src/runtest.rs#L1816</a></p>",
        "id": 258878085,
        "sender_full_name": "bjorn3",
        "timestamp": 1635080853
    },
    {
        "content": "<p><code>// rustflags: -Zdeduplicate-diagnostics=yes</code> should re-enable the deduplication.</p>",
        "id": 258878154,
        "sender_full_name": "bjorn3",
        "timestamp": 1635080931
    },
    {
        "content": "<p>They are not exactly identical, they are basically \"error: slice_a flows into slice_b\" and \"error: slice_b flows into slice_a\". but since the spans and everything are the same (just inverted), the suggestion will be the exact same</p>",
        "id": 258886164,
        "sender_full_name": "nilstrieb",
        "timestamp": 1635092717
    },
    {
        "content": "<p>I guess rustfix shouldn't attempt to apply multiple overlapping suggestions.</p>",
        "id": 258887024,
        "sender_full_name": "bjorn3",
        "timestamp": 1635094055
    },
    {
        "content": "<p>I would land the suggestion as you have them and file a follow up ticket to silence the redundant error, because even without the suggestion we should tackle that</p>",
        "id": 258902252,
        "sender_full_name": "Esteban KÃ¼ber",
        "timestamp": 1635115195
    },
    {
        "content": "<p>ok, I'll do that, thank you for your help!</p>",
        "id": 258919898,
        "sender_full_name": "nilstrieb",
        "timestamp": 1635142144
    }
]
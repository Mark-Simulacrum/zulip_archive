[
    {
        "content": "<p>Hey, I was wondering if it would be useful to highlight <code>.await</code> as an \"exit point\" in Rust-Analyzer as well. It's a bit different from <code>return</code> and <code>?</code> in that it doesn't cause a value to be returned, but it does mark a point where the function can be cancelled, and in turn where destructors may be run.</p>",
        "id": 258359541,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634733717
    },
    {
        "content": "<p>(currently working on some writing on cancellation in Rust, and happened to think about how RA highlights exit points)</p>",
        "id": 258360158,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634733994
    },
    {
        "content": "<p>Is highlighting yield points separately not enough?</p>",
        "id": 258360481,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1634734123
    },
    {
        "content": "<p>Possibly!</p>",
        "id": 258360507,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734135
    },
    {
        "content": "<p>Because that we should already be doing</p>",
        "id": 258360526,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1634734144
    },
    {
        "content": "<p>if you put the cursor on the <code>.await</code> or <code>async</code> tokens it should highlight all  yield points of the context</p>",
        "id": 258360556,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1634734159
    },
    {
        "content": "<p>I guess I'm currently in the mindset of: \"it's not commonly understood that seeing <code>.await</code> in your code may mean your code never progresses past that point, and may cause destructors to run\".</p>",
        "id": 258360717,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734216
    },
    {
        "content": "<p>But maybe I'm overthinking it?</p>",
        "id": 258360785,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734247
    },
    {
        "content": "<p>maybe highlighting all yields points is indeed enough</p>",
        "id": 258360881,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734292
    },
    {
        "content": "<p>It might make sense to consider highlighting both as some grouped highlighting in certain cases(question there would be then, when?), but I personally consider yield and exit points to be different.</p>",
        "id": 258361085,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1634734368
    },
    {
        "content": "<p>_nods_, yeah</p>",
        "id": 258361353,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734478
    },
    {
        "content": "<p>Maybe we just need to keep this in mind when we want to answer questions like: \"where would the destructors for &lt;type&gt; be run?\"</p>",
        "id": 258361426,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734506
    },
    {
        "content": "<p>Which feels separate from what both exit points / yield points currently show in Rust</p>",
        "id": 258361491,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1634734532
    },
    {
        "content": "<p>Ye showing \"(possible) destruction points\" seems like a separate thing from the two</p>",
        "id": 258361982,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1634734712
    }
]
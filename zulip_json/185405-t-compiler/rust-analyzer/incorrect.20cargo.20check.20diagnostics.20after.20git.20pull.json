[
    {
        "content": "<p>Currently <code>cargo check --workspace --all-targets</code> outputs a bunch of nonsensical errors for me (<code>cargo build</code> and <code>cargo test</code> succeed):</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0412</span><span class=\"p\">]</span>: <span class=\"nc\">cannot</span><span class=\"w\"> </span><span class=\"n\">find</span><span class=\"w\"> </span><span class=\"k\">type</span> <span class=\"err\">`</span><span class=\"n\">TypeMismatch</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">hir</span><span class=\"err\">`</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">crates</span><span class=\"o\">/</span><span class=\"n\">ide_diagnostics</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">handlers</span><span class=\"o\">/</span><span class=\"n\">type_mismatch</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">18</span>:<span class=\"mi\">68</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">18</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"k\">pub</span><span class=\"p\">(</span><span class=\"k\">crate</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">type_mismatch</span><span class=\"p\">(</span><span class=\"n\">ctx</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">DiagnosticsContext</span><span class=\"o\">&lt;'</span><span class=\"nb\">_</span><span class=\"o\">&gt;</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">d</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">hir</span>::<span class=\"n\">TypeMismatch</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">Diagnostic</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">                                                                    </span><span class=\"o\">^^^^^^^^^^^^</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">found</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">hir</span><span class=\"err\">`</span><span class=\"w\"></span>\n</code></pre></div>\n<p>I'm seeing these incorrect diagnostics all the time when updating r-a. I'm not sure why that is though, this seems like a pretty bad cargo or rustc bug. Maybe some file timestamps get messed up when we run check-on-save? Is anyone else seeing this?</p>",
        "id": 276206555,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647962991
    },
    {
        "content": "<p>Yeah, I've ran into it a lot of times when switching branches while <code>cargo check</code> was running.</p>",
        "id": 276208523,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647963754
    },
    {
        "content": "<p>See <a href=\"#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Incremental.20compilation.20bug\">https://rust-lang.zulipchat.com/#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/Incremental.20compilation.20bug</a>, for one instance, although it might still happen without incremental.</p>",
        "id": 276208644,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647963799
    },
    {
        "content": "<p>I think I ran into that once so far (last week iirc), but figured that was incremental compilation being funky again. Though now that I think about that incremental is currently disabled is it not...</p>",
        "id": 276208648,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1647963800
    },
    {
        "content": "<p>It's disabled in <code>stable</code></p>",
        "id": 276208722,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647963833
    },
    {
        "content": "<p>I'm using beta because rustc is unusable for me without incremental</p>",
        "id": 276208920,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647963902
    },
    {
        "content": "<p>but if it also happens on stable then this looks like a Cargo bug</p>",
        "id": 276208958,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647963920
    },
    {
        "content": "<p>Ah well I am using nightly</p>",
        "id": 276209094,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1647963976
    }
]
[
    {
        "content": "<p>Hello, I'm working on <a href=\"https://github.com/rust-analyzer/rust-analyzer/pull/10204\">https://github.com/rust-analyzer/rust-analyzer/pull/10204</a>, which involves showing the type being dereferenced in a deref expression. I've added a test to see if the hover correctly displays type coercion for derf expressions. This test is failing, but the hover behaves correctly when I try it in VSCode. Does anybody have an idea why this would be the case? <a href=\"/user_uploads/4715/pOUxQogJOq-b0-eOWRZX6Pgh/Screen-Shot-2021-09-10-at-7.30.39-PM.png\">Screen-Shot-2021-09-10-at-7.30.39-PM.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/pOUxQogJOq-b0-eOWRZX6Pgh/Screen-Shot-2021-09-10-at-7.30.39-PM.png\" title=\"Screen-Shot-2021-09-10-at-7.30.39-PM.png\"><img src=\"/user_uploads/4715/pOUxQogJOq-b0-eOWRZX6Pgh/Screen-Shot-2021-09-10-at-7.30.39-PM.png\"></a></div>",
        "id": 252864422,
        "sender_full_name": "Theo",
        "timestamp": 1631316666
    },
    {
        "content": "<p>deref is not in the prelude, you need to import it</p>",
        "id": 252904062,
        "sender_full_name": "matklad",
        "timestamp": 1631361095
    },
    {
        "content": "<p>You probably are importing it in VS Code, but not in the test.</p>",
        "id": 252904072,
        "sender_full_name": "matklad",
        "timestamp": 1631361109
    },
    {
        "content": "<p>I tried importing deref in the test with <code>use std::ops::Deref;</code> and <code>//- minicore: deref</code>. The test still fails - I'm getting </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Type:                              &amp;i32\nDerefenced from: DerefExample&lt;&amp;&amp;&amp;&amp;&amp;i32&gt;\n</code></pre></div>\n<p>instead of </p>\n<div class=\"codehilite\" data-code-language=\"Text only\"><pre><span></span><code>Type:                          &amp;&amp;&amp;&amp;&amp;i32\nCoerced to:                        &amp;i32\nDerefenced from: DerefExample&lt;&amp;&amp;&amp;&amp;&amp;i32&gt;\n</code></pre></div>",
        "id": 252915176,
        "sender_full_name": "Theo",
        "timestamp": 1631372725
    },
    {
        "content": "<p>You need <code>core::ops::Deref</code>, it's mini<strong>core</strong></p>",
        "id": 252915597,
        "sender_full_name": "matklad",
        "timestamp": 1631373182
    },
    {
        "content": "<p>See the other tests with <code>minicore: deref</code></p>",
        "id": 252915611,
        "sender_full_name": "matklad",
        "timestamp": 1631373197
    },
    {
        "content": "<p>That did the trick, thanks for the help! Can't believe I didn't realize that <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 252916575,
        "sender_full_name": "Theo",
        "timestamp": 1631374097
    }
]
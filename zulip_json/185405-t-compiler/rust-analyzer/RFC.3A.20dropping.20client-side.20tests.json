[
    {
        "content": "<p>We have a couple of client-side tests (for runnables), but it feels like dealing with the npm ecosystem won't become any easier in the near future. <code>mocha</code> pulls in 77 dependencies including things like <a href=\"https://github.com/sindresorhus/has-flag/blob/main/index.js\">https://github.com/sindresorhus/has-flag/blob/main/index.js</a>. How would y'all feel about removing those tests?</p>",
        "id": 258875946,
        "sender_full_name": "Laurențiu",
        "timestamp": 1635077726
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/5_R5Awf1yZoOkDwzPU1THa-S/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/5_R5Awf1yZoOkDwzPU1THa-S/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/5_R5Awf1yZoOkDwzPU1THa-S/image.png\"></a></div>",
        "id": 258876082,
        "sender_full_name": "Laurențiu",
        "timestamp": 1635077908
    },
    {
        "content": "<p>if it's just about the test framework, maybe we can set up something minimal ourselves?</p>",
        "id": 258877030,
        "sender_full_name": "Florian Diebold",
        "timestamp": 1635079289
    },
    {
        "content": "<p>Yeah, we could also do that</p>",
        "id": 258877074,
        "sender_full_name": "Laurențiu",
        "timestamp": 1635079325
    },
    {
        "content": "<p>No super-strong opinion here -- I don't feel these tests bring a lot of value, but I also don't find them actively harmful. I guess, my perference would be:</p>\n<ul>\n<li>replace mocha with our own minimal test framework to remove roadbblock for writing better tests in the future</li>\n<li>reconsider how client-side testing is done overall. I have a gut feeling that we could benefit from a very-integrated tests, which opens a test project in VS Code and clicks around.</li>\n</ul>",
        "id": 258938526,
        "sender_full_name": "matklad",
        "timestamp": 1635156331
    },
    {
        "content": "<p>dependencies whose entire implementation is just a few lines is a bit par for the course in the npm world. That's what you get when you don't have a stdlib to speak of I'd say… in my book, generally there's little harm caused by that</p>\n<p>FWIW, I've recently used <a href=\"https://github.com/avajs/ava\">ava</a> which clocks in at \"just\" 60 deps and was quite a nice/lean setup + use experience.</p>",
        "id": 260698911,
        "sender_full_name": "Anatol Ulrich",
        "timestamp": 1636396136
    },
    {
        "content": "<p>I know it's common, and it's all fun and games until someone publishes a malicious <code>path-exists</code> package and you lose all your cookies, saved passwords and access tokens just because it's one of the 77 dependencies of the testing framework you've been using for 50 lines of tests that never failed and probably never will.</p>",
        "id": 260704331,
        "sender_full_name": "Laurențiu",
        "timestamp": 1636398701
    },
    {
        "content": "<p>It would be fine if we had a fancy test suite, but <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/editors/code/tests/unit/launch_config.test.ts\">these</a> are half of our tests.</p>",
        "id": 260705972,
        "sender_full_name": "Laurențiu",
        "timestamp": 1636399507
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu</span> <a href=\"#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/RFC.3A.20dropping.20client-side.20tests/near/260704331\">said</a>:</p>\n<blockquote>\n<p>I know it's common, and it's all fun and games until someone publishes a malicious <code>path-exists</code> package </p>\n</blockquote>\n<p>I mean you <em>could</em> vendor it all, probably little risk from just freezing stuff in time (that said, personally I would not do this)</p>",
        "id": 260736214,
        "sender_full_name": "Anatol Ulrich",
        "timestamp": 1636415729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu</span> <a href=\"#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/RFC.3A.20dropping.20client-side.20tests/near/260705972\">said</a>:</p>\n<blockquote>\n<p>It would be fine if we had a fancy test suite, but <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/editors/code/tests/unit/launch_config.test.ts\">these</a> are half of our tests.</p>\n</blockquote>\n<p>fair&gt;</p>",
        "id": 260736219,
        "sender_full_name": "Anatol Ulrich",
        "timestamp": 1636415731
    }
]
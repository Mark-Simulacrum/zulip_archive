[
    {
        "content": "<p>Just wondering but we have these two functions on <code>DefDatabase</code>,</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">    </span><span class=\"cp\">#[salsa::invoke(crate_def_map_wait)]</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"cp\">#[salsa::transparent]</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">fn</span> <span class=\"nf\">crate_def_map</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">krate</span>: <span class=\"nc\">CrateId</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">Arc</span><span class=\"o\">&lt;</span><span class=\"n\">DefMap</span><span class=\"o\">&gt;</span><span class=\"p\">;</span><span class=\"w\"></span>\n\n<span class=\"w\">    </span><span class=\"cp\">#[salsa::invoke(DefMap::crate_def_map_query)]</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">fn</span> <span class=\"nf\">crate_def_map_query</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">krate</span>: <span class=\"nc\">CrateId</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">Arc</span><span class=\"o\">&lt;</span><span class=\"n\">DefMap</span><span class=\"o\">&gt;</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n<p>what exactly is the purpose of having two where the first just calls the second one in its implementation?<br>\nIs it just for the perf scope?</p>",
        "id": 255264885,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1632850735
    },
    {
        "content": "<p>(Looking into completions performance right now and just saw that we are spending 22ms in <code>crate_def_map:wait</code>)</p>",
        "id": 255265111,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1632850811
    },
    {
        "content": "<p>yeah, that's for the extra profiling scope</p>",
        "id": 255265871,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1632851109
    }
]
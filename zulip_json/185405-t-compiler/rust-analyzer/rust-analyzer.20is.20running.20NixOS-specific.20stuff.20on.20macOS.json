[
    {
        "content": "<p>Hi all! I've run into a weird bug—Rust Analyzer isn't able to start on my Mac because the extension someone decided that it's running on nixOS. it tries build a rust-analyzer derivation, but it fails on <code>patchelf</code>. i'm not sure how it decided that my mac is a nixOS machine (as there isn't an /etc/os-release), but i wanted to raise this issue for attention. should I open an issue about this?</p>",
        "id": 275532449,
        "sender_full_name": "David Barsky",
        "timestamp": 1647446315
    },
    {
        "content": "<p>Yeah that seems bad</p>",
        "id": 275533631,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647446645
    },
    {
        "content": "<p>To be honest, I'm not sure why we're carrying that code – surely something that benefits precisely one distro should be patched in by that distro, especially since NixOS claims to be great at patching stuff.</p>",
        "id": 275533896,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647446738
    },
    {
        "content": "<p><a href=\"https://github.com/rust-analyzer/rust-analyzer/issues/11709\">https://github.com/rust-analyzer/rust-analyzer/issues/11709</a></p>",
        "id": 275534021,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647446777
    },
    {
        "content": "<p>ah, good to know. chris is a coworker of mine and and there's some rpms on macs for provisioning. wild stuff</p>",
        "id": 275534204,
        "sender_full_name": "David Barsky",
        "timestamp": 1647446845
    },
    {
        "content": "<p>is <a href=\"https://github.com/rust-analyzer/rust-analyzer/pull/11710/\">https://github.com/rust-analyzer/rust-analyzer/pull/11710/</a> out on nightly yet, or should I build from source?</p>",
        "id": 275534365,
        "sender_full_name": "David Barsky",
        "timestamp": 1647446885
    },
    {
        "content": "<p>It should be in the latest nightly</p>",
        "id": 275534532,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647446933
    },
    {
        "content": "<p>Not according to the git tag</p>",
        "id": 275534569,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647446947
    },
    {
        "content": "<p>3 days old <a href=\"https://github.com/rust-analyzer/rust-analyzer/releases/tag/nightly\">https://github.com/rust-analyzer/rust-analyzer/releases/tag/nightly</a></p>",
        "id": 275534605,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647446957
    },
    {
        "content": "<p>did nightlies break?</p>",
        "id": 275534621,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647446962
    },
    {
        "content": "<p>yeah, because of the same xtask thing that broke the metrics: <a href=\"https://github.com/rust-analyzer/rust-analyzer/runs/5562830724?check_suite_focus=true\">https://github.com/rust-analyzer/rust-analyzer/runs/5562830724?check_suite_focus=true</a></p>",
        "id": 275534928,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647447045
    },
    {
        "content": "<p>Yeah :(</p>",
        "id": 275534962,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647447057
    },
    {
        "content": "<p>i'm running nightly, but this was included in monday's release: <a href=\"https://rust-analyzer.github.io/thisweek/2022/03/14/changelog-120.html#fixes\">https://rust-analyzer.github.io/thisweek/2022/03/14/changelog-120.html#fixes</a></p>",
        "id": 275534985,
        "sender_full_name": "David Barsky",
        "timestamp": 1647447065
    },
    {
        "content": "<p>That NixOS fix is what broke the detection for you I think</p>",
        "id": 275535042,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647447085
    },
    {
        "content": "<p>the number of impacted users of this probably... ~30? and they're all my coworkers</p>",
        "id": 275535070,
        "sender_full_name": "David Barsky",
        "timestamp": 1647447098
    },
    {
        "content": "<p>I think you need <a href=\"https://github.com/rust-analyzer/rust-analyzer/pull/11710/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095\">https://github.com/rust-analyzer/rust-analyzer/pull/11710/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095</a></p>",
        "id": 275535072,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647447099
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"211727\">Jonas Schievink  [he/him]</span> <a href=\"#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/rust-analyzer.20is.20running.20NixOS-specific.20stuff.20on.20macOS/near/275535072\">said</a>:</p>\n<blockquote>\n<p>I think you need <a href=\"https://github.com/rust-analyzer/rust-analyzer/pull/11710/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095\">https://github.com/rust-analyzer/rust-analyzer/pull/11710/commits/f7cf3b5503b556f20859da6fe39a4d29dc3af095</a></p>\n</blockquote>\n<p>yeah, i think i'll do. i'll build from source + install, just like the old days :P</p>",
        "id": 275535215,
        "sender_full_name": "David Barsky",
        "timestamp": 1647447144
    },
    {
        "content": "<p>thanks all; i should've checked issues first. sorry about that!</p>",
        "id": 275535411,
        "sender_full_name": "David Barsky",
        "timestamp": 1647447216
    },
    {
        "content": "<p>You can also just stay on an older release</p>",
        "id": 275535463,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647447233
    },
    {
        "content": "<p>oh, huh, didn't know that was a thing!</p>",
        "id": 275535705,
        "sender_full_name": "David Barsky",
        "timestamp": 1647447302
    },
    {
        "content": "<p>Filed <a href=\"https://github.com/rust-analyzer/rust-analyzer/pull/11727\">https://github.com/rust-analyzer/rust-analyzer/pull/11727</a> for the metrics thing (untested)</p>",
        "id": 275536120,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647447440
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"211727\">Jonas Schievink  [he/him]</span> <a href=\"#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/rust-analyzer.20is.20running.20NixOS-specific.20stuff.20on.20macOS/near/275533896\">said</a>:</p>\n<blockquote>\n<p>To be honest, I'm not sure why we're carrying that code – surely something that benefits precisely one distro should be patched in by that distro, especially since NixOS claims to be great at patching stuff.</p>\n</blockquote>\n<p>I wonder what the other extensions do</p>",
        "id": 275536986,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647447728
    },
    {
        "content": "<p>rustup has NixOS support upstream too, but I don't maintain that so I don't have to care <span aria-label=\"halo\" class=\"emoji emoji-1f607\" role=\"img\" title=\"halo\">:halo:</span></p>",
        "id": 275537134,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647447797
    },
    {
        "content": "<p>great timing for a GHA outage <a href=\"https://www.githubstatus.com/\">https://www.githubstatus.com/</a></p>",
        "id": 275537435,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1647447893
    },
    {
        "content": "<p>Oh great, releases are still not working</p>",
        "id": 275614905,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647501866
    },
    {
        "content": "<p>Okay, we finally have the first nightly this week <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>",
        "id": 275629496,
        "sender_full_name": "Laurențiu",
        "timestamp": 1647511542
    }
]
[
    {
        "content": "<p>Hello all, first-time Zulip user here <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span><br>\nAs of a few weeks ago I get a warning from nvim LSP when opening a Rust file that looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>WARN][2021-10-03 15:35:02] .../lua/vim/lsp.lua:87      &quot;method rust-analyzer/inlayHints is not suppor\nted by any of the servers registered for the current buffer&quot;\n</code></pre></div>\n<p>I grepped around the code base and inlayHints <em>are</em> an experimental extension, but they are still very much present.</p>\n<p>I'll be digging into how the interaction between nvim LSP and rust-analyzer works in the coming days, but I wanted to open this early in case anyone can close this early with \"Yep,  we know this and someone will deal with it\" <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 265335003,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639763920
    },
    {
        "content": "<p><a href=\"https://github.com/simrat39/rust-tools.nvim/\">https://github.com/simrat39/rust-tools.nvim/</a> supports those</p>",
        "id": 265335471,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639764082
    },
    {
        "content": "<p>Ah so I might be able to just swap out the plugins outright...</p>",
        "id": 265335741,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639764177
    },
    {
        "content": "<p>Inlay hints are (still) a LSP extension specific to RA. I assume that error message is saying that the NVim LSP client doesn't understand the it</p>",
        "id": 265335874,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639764235
    },
    {
        "content": "<p>Which is normal, that's why it's an extension (unless we're missing a capability or something)</p>",
        "id": 265335977,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639764258
    },
    {
        "content": "<p>Hmm, actually the warning says that the server doesn't support inlay hints</p>",
        "id": 265340764,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639766289
    },
    {
        "content": "<p>That's a bit weird, maybe it's crashing?</p>",
        "id": 265340771,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639766293
    },
    {
        "content": "<p>I realize I pulled the nvim logs. Where would I find the RA logs?</p>",
        "id": 265343417,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639767555
    },
    {
        "content": "<p>I can also try the other plugin and see if it warns similarly</p>",
        "id": 265343452,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639767577
    },
    {
        "content": "<p>You can try to set something like <code>RA_LOG=info RA_LOG_FILE=/tmp/ra.log</code> before running Vim</p>",
        "id": 265343646,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639767625
    },
    {
        "content": "<p>Those are environment variables, so you might want to use <code>export</code></p>",
        "id": 265343657,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639767631
    },
    {
        "content": "<p>Does it happen every time? Are you testing on a specific project?</p>",
        "id": 265343749,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639767676
    },
    {
        "content": "<p>Happens every time, on any Rust project</p>",
        "id": 265344560,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639768001
    },
    {
        "content": "<p>What do you get for <code>rust-analyzer --version</code>?</p>",
        "id": 265345073,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639768237
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>❯ rust-analyzer --version\nrust-analyzer 7d6fcbc0b 2021-12-07 dev\n</code></pre></div>",
        "id": 265345149,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639768283
    },
    {
        "content": "<p>Yeah, I'm not sure what's up. Maybe NVim has an option to trace the LSP communication (RA has one too, <code>RA_LOG=lsp_server=debug</code>).</p>",
        "id": 265345418,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639768426
    },
    {
        "content": "<p>Unfortunately, I kinda' gave up on Vim, so I can't test</p>",
        "id": 265345432,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639768440
    },
    {
        "content": "<p>I have 226k lines of logs, but inlay hints almost don't appear at all? It pops up early as part of the config</p>\n<div class=\"codehilite\"><pre><span></span><code>        inlayHints_chainingHints: true,\n        inlayHints_maxLength: Some(\n            25,\n        ),\n        inlayHints_parameterHints: true,\n        inlayHints_typeHints: true,\n        inlayHints_hideNamedConstructorHints: false,\n</code></pre></div>\n<p>I also see</p>\n<div class=\"codehilite\"><pre><span></span><code>[INFO rust_analyzer::main_loop] handle_event(Request(Request { id: RequestId(I32(2)), method: &quot;rust-analyzer/inlayHints&quot;, params: Object({&quot;textDocument&quot;: Object({&quot;uri&quot;: String(&quot;file:///Users/felipesere/Development/rust/journal/src/main.rs&quot;)})}) }))\n[INFO rust_analyzer::global_state] handled rust-analyzer/inlayHints - (2) in 61.46µs\n</code></pre></div>",
        "id": 265347472,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639769416
    },
    {
        "content": "<p>Okay, so the server does respond to <code>rust-analyzer/inlayHints</code> at some point</p>",
        "id": 265347971,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639769519
    },
    {
        "content": "<p>Yeah so I get type hints, but the warning still pops up. I'll meddle with the other plugin over the coming days. Thanks for helping me getting those logs :)</p>",
        "id": 265361436,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639775700
    },
    {
        "content": "<p>Feel free to file an issue, especially if you find something actionable</p>",
        "id": 265361525,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639775748
    },
    {
        "content": "<p>I didn't even know that nvim supports inlay hints, I think that was one of the strong points of rust-tools</p>",
        "id": 265361595,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639775768
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu</span> <a href=\"#narrow/stream/185405-t-compiler.2Frust-analyzer/topic/nvim.20LSP.20warns.20on.20rust-analyzer.2FinlayHints/near/265345432\">said</a>:</p>\n<blockquote>\n<p>Unfortunately, I kinda' gave up on Vim, so I can't test</p>\n</blockquote>\n<p>I didn't even finish setting up these fancy new plugins, then I found out I should be using a different one for completions. And before setting that up, another, better, one appeared. And it seems that I could be using a Lua plugin manager, and maybe even rewrite my <code>init.vim</code> in Lua. I don't usually complain about churn in software, but this was too much even for me <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>.</p>",
        "id": 265362416,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639776206
    },
    {
        "content": "<p>Yeah , I feel that churn too. My dotfiles might get more commits than my work <span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span>‍♂️</p>",
        "id": 265362645,
        "sender_full_name": "Felipe Sere",
        "timestamp": 1639776330
    },
    {
        "content": "<p>So I thought I would give <a href=\"https://helix-editor.com/\">https://helix-editor.com/</a> a try. Vim wasn't my main editor anyway, and the nice thing about Helix is that everything works out of the box (not that it has too many features, but..)</p>",
        "id": 265362991,
        "sender_full_name": "Laurențiu",
        "timestamp": 1639776513
    }
]
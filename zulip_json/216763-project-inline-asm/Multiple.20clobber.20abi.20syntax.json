[
    {
        "content": "<p>In my <a href=\"https://github.com/rust-lang/rust/pull/89316#pullrequestreview-773232869\">PR</a> to support multiple <code>clobber_abi</code> arguments, the alternative syntax <code>clobber_abi(\"one\", \"two\")</code> was proposed (as opposed to <code>clobber_abi(\"one\"), clobber_abi(\"two\")</code>.</p>\n<p>The people who provided input and I favor the first syntax, combining all ABIs in one option.  I wanted to post it here for visibility to get more feedback on this.</p>",
        "id": 256673137,
        "sender_full_name": "asquared31415",
        "timestamp": 1633654612
    },
    {
        "content": "<p>That seems reasonable to me.</p>",
        "id": 256678163,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1633658916
    },
    {
        "content": "<p>I proposed the first syntax because it's more consistent with options</p>",
        "id": 256679521,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633660107
    },
    {
        "content": "<p>Note that IIRC <code>options</code> supports <code>options(one, two)</code> <em>and</em> <code>options(one), options(two)</code>.</p>",
        "id": 256893864,
        "sender_full_name": "Noah Lev",
        "timestamp": 1633808561
    },
    {
        "content": "<p>The ABNF says <code>[\",\" options]</code> instead of <code>*(\",\" options)</code> though</p>",
        "id": 256894136,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633808831
    },
    {
        "content": "<p>It probably needs to be updated.</p>",
        "id": 256895017,
        "sender_full_name": "Noah Lev",
        "timestamp": 1633809679
    },
    {
        "content": "<p>I always thought only one <code>options</code> can be used. Has it changed or is it always possible to use multiple options?</p>",
        "id": 256895116,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633809763
    },
    {
        "content": "<p>This works, for example:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#![feature(asm)]</span><span class=\"w\"></span>\n\n<span class=\"k\">fn</span> <span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">unsafe</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"fm\">asm!</span><span class=\"p\">(</span><span class=\"s\">\"\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">options</span><span class=\"p\">(</span><span class=\"n\">readonly</span><span class=\"p\">),</span><span class=\"w\"> </span><span class=\"n\">options</span><span class=\"p\">(</span><span class=\"n\">att_syntax</span><span class=\"p\">));</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 256895131,
        "sender_full_name": "Noah Lev",
        "timestamp": 1633809780
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303710\">Gary Guo</span> <a href=\"#narrow/stream/216763-project-inline-asm/topic/Multiple.20clobber.20abi.20syntax/near/256895116\">said</a>:</p>\n<blockquote>\n<p>I always thought only one <code>options</code> can be used. Has it changed or is it always possible to use multiple options?</p>\n</blockquote>\n<p>It's been possible since June 2020, which is when I implemented it.</p>",
        "id": 256895139,
        "sender_full_name": "Noah Lev",
        "timestamp": 1633809790
    },
    {
        "content": "<p>It checks that there are no duplicate options passed though.</p>",
        "id": 256895224,
        "sender_full_name": "Noah Lev",
        "timestamp": 1633809849
    },
    {
        "content": "<p>Thanks, I found the discussion. The macro argument is reasonable.</p>",
        "id": 256895343,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633809975
    },
    {
        "content": "<p>In that case we might want to do the same and allow both forms for <code>clobber_abi</code> as well?</p>",
        "id": 256895351,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633809988
    },
    {
        "content": "<p>That's a good point, I wasn't aware options allowed that.</p>",
        "id": 257273855,
        "sender_full_name": "asquared31415",
        "timestamp": 1634073570
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303710\">Gary Guo</span> <a href=\"#narrow/stream/216763-project-inline-asm/topic/Multiple.20clobber.20abi.20syntax/near/256894136\">said</a>:</p>\n<blockquote>\n<p>The ABNF says <code>[\",\" options]</code> instead of <code>*(\",\" options)</code> though</p>\n</blockquote>\n<p>This was fixed at some point between the beta unstable book and now</p>",
        "id": 257494890,
        "sender_full_name": "asquared31415",
        "timestamp": 1634198444
    },
    {
        "content": "<p>Yeah, I filed a PR to correct it</p>",
        "id": 257532411,
        "sender_full_name": "Gary Guo",
        "timestamp": 1634217336
    }
]
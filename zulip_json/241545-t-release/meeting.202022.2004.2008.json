[
    {
        "content": "<p>Meeting in 25 minutes.</p>\n<ul>\n<li>Release retro (cc <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span>)</li>\n<li>Blog post writer (<span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> by schedule, I think)</li>\n<li>Release notes writer (<span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> by schedule, I believe)</li>\n<li>Crater run (me)</li>\n</ul>",
        "id": 278317863,
        "sender_full_name": "simulacrum",
        "timestamp": 1649430486
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"2907\">@T-release</span> meeting!</p>",
        "id": 278320726,
        "sender_full_name": "simulacrum",
        "timestamp": 1649431809
    },
    {
        "content": "<p>(in a call, one sec)</p>",
        "id": 278320747,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649431816
    },
    {
        "content": "<p>It looks like we're missing <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> and <span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> regardless, so I'll give it until :40 and we can start then</p>",
        "id": 278321270,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432056
    },
    {
        "content": "<p>o/</p>",
        "id": 278321859,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432337
    },
    {
        "content": "<p>yay calls that go overtime</p>",
        "id": 278321888,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432349
    },
    {
        "content": "<p>(<span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> should also join soon)</p>",
        "id": 278321898,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432357
    },
    {
        "content": "<p>yep, hi</p>",
        "id": 278321913,
        "sender_full_name": "cuviper",
        "timestamp": 1649432365
    },
    {
        "content": "<p>alright</p>",
        "id": 278321927,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432369
    },
    {
        "content": "<p>ok, so, on the release</p>",
        "id": 278321948,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432378
    },
    {
        "content": "<p>the release went mostly well</p>",
        "id": 278321974,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432391
    },
    {
        "content": "<p>this time the bootstrap bump took way longer than expected than normal to prepare due to also having to make code changes to handle something related to <code>~const Drop</code>, but at least the FIXMEs were fairly noticeable</p>",
        "id": 278322086,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432428
    },
    {
        "content": "<p>the two main problems with the release were</p>",
        "id": 278322138,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432461
    },
    {
        "content": "<ul>\n<li>RLS was broken, again</li>\n</ul>",
        "id": 278322162,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432467
    },
    {
        "content": "<ul>\n<li>I didn't have permissions to publish cargo anymore after leaving core, we should add release-publishers as owner of those crates (until we move everything to promote-release and no manual access is needed)</li>\n</ul>",
        "id": 278322219,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432498
    },
    {
        "content": "<p>and that should be it</p>",
        "id": 278322273,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432521
    },
    {
        "content": "<p>ok</p>",
        "id": 278322399,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432576
    },
    {
        "content": "<p>I think we discussed a little on the release publishers angle</p>",
        "id": 278322436,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432589
    },
    {
        "content": "<p>(e.g., maybe deploying through rust-lang-owner via some kind of semi-automated interface makes sense)</p>",
        "id": 278322472,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432608
    },
    {
        "content": "<p>(and there's also <a class=\"stream-topic\" data-stream-id=\"242791\" href=\"/#narrow/stream/242791-t-infra/topic/automatic.20libs.20publishing\">#t-infra &gt; automatic libs publishing</a> to think about)</p>",
        "id": 278322515,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432638
    },
    {
        "content": "<p>yep, but if we want to automate that I don't think it's worth it to create an interface to publish with an audit log</p>",
        "id": 278322518,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432641
    },
    {
        "content": "<p>we should just move the script to promote-release and put some token there</p>",
        "id": 278322584,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432658
    },
    {
        "content": "<p>sure, yeah, that makes sense to me -- maybe a separate job from promote-release and have it auto-try publishing all rust-lang owned crates in the long run off of signed tags or something, something like that could be reasonable.</p>",
        "id": 278322680,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432711
    },
    {
        "content": "<p>anyway, more infra.</p>",
        "id": 278322712,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432725
    },
    {
        "content": "<p>yeah</p>",
        "id": 278322719,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432729
    },
    {
        "content": "<p>on RLS side, I'm not really sure</p>",
        "id": 278322740,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432739
    },
    {
        "content": "<p>(promote rust-analyzer already...)</p>",
        "id": 278322773,
        "sender_full_name": "cuviper",
        "timestamp": 1649432754
    },
    {
        "content": "<p>I guess rust-analyzer is rapidly moving along, so I'd rather not invest in improving RLS...</p>",
        "id": 278322778,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432757
    },
    {
        "content": "<p>Let's give it another few cycles and we can check back in.</p>",
        "id": 278322847,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432774
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278322680\">said</a>:</p>\n<blockquote>\n<p>sure, yeah, that makes sense to me -- maybe a separate job from promote-release and have it auto-try publishing all rust-lang owned crates in the long run off of signed tags or something, something like that could be reasonable.</p>\n</blockquote>\n<p>in the meantime, should we add release-publishers to the crates? it should be a temporary solution, but I'd prefer not to escalate privileges to rust-lang-owner when having to publish cargo</p>",
        "id": 278322861,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432784
    },
    {
        "content": "<p>what's the nature of the rls breakage, that it's not visible <em>before</em> promotion?</p>",
        "id": 278322892,
        "sender_full_name": "cuviper",
        "timestamp": 1649432799
    },
    {
        "content": "<p>it's visible, but it's just that RLS is permanently in broken toolstate (entering no breakages week already broken)</p>",
        "id": 278322944,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432820
    },
    {
        "content": "<p>the problem is that RLS really likes to use compiler internals so many compiler refactorings break it</p>",
        "id": 278322998,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432850
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278322861\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278322680\">said</a>:</p>\n<blockquote>\n<p>sure, yeah, that makes sense to me -- maybe a separate job from promote-release and have it auto-try publishing all rust-lang owned crates in the long run off of signed tags or something, something like that could be reasonable.</p>\n</blockquote>\n<p>in the meantime, should we add release-publishers to the crates? it should be a temporary solution, but I'd prefer not to escalate privileges to rust-lang-owner when having to publish cargo</p>\n</blockquote>\n<p>I think release-publishers sounds /ok/, but ultimately you're just escalating to a <a href=\"http://crates.io\">crates.io</a> token which has almost the same rights, correct? so it's not really a big difference.</p>",
        "id": 278323011,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432854
    },
    {
        "content": "<p>so we could make an effort during that no-breakage week</p>",
        "id": 278323028,
        "sender_full_name": "cuviper",
        "timestamp": 1649432863
    },
    {
        "content": "<p>I think RLS is sometimes permanently broken in a visible way, sometimes it's broken on builders we don't track toolstate for</p>",
        "id": 278323049,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432874
    },
    {
        "content": "<p>(where \"we\" can involve folks who actually know rls, perhaps)</p>",
        "id": 278323051,
        "sender_full_name": "cuviper",
        "timestamp": 1649432876
    },
    {
        "content": "<p>(e.g., parallel)</p>",
        "id": 278323055,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432878
    },
    {
        "content": "<p>c651ba8a5 on 2022-02-23 10:45:54 is when RLS last worked, sounds like</p>",
        "id": 278323122,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432897
    },
    {
        "content": "<p>which, well, was &gt;1 month ago</p>",
        "id": 278323138,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432905
    },
    {
        "content": "<blockquote>\n<p>I think release-publishers sounds /ok/, but ultimately you're just escalating to a <a href=\"http://crates.io\">crates.io</a> token which has almost the same rights, correct? so it's not really a big difference.</p>\n</blockquote>\n<p>that'd have only permissions to publish cargo and my personal crates, not all crates with rust-lang-owner in it</p>",
        "id": 278323164,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432922
    },
    {
        "content": "<p>I'm not too optimistic about us fixing it in a direct way.</p>",
        "id": 278323179,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432924
    },
    {
        "content": "<p>what's holding back rust-analyzer now?</p>",
        "id": 278323197,
        "sender_full_name": "cuviper",
        "timestamp": 1649432933
    },
    {
        "content": "<p>so it's kinda better and doesn't require going to 1pass -&gt; logging into -owner github -&gt; generating a token -&gt; revoking the token</p>",
        "id": 278323209,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432939
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278323164\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>I think release-publishers sounds /ok/, but ultimately you're just escalating to a <a href=\"http://crates.io\">crates.io</a> token which has almost the same rights, correct? so it's not really a big difference.</p>\n</blockquote>\n<p>that'd have only permissions to publish cargo and my personal crates, not all crates with rust-lang-owner in it</p>\n</blockquote>\n<p>Ah, ok, well, yeah, seems OK to do that.</p>",
        "id": 278323217,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432941
    },
    {
        "content": "<p>ok, I'll escalate to owner and do that after the meeting</p>",
        "id": 278323253,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432953
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278323197\">said</a>:</p>\n<blockquote>\n<p>what's holding back rust-analyzer now?</p>\n</blockquote>\n<p>I'm not sure what the current state is</p>",
        "id": 278323294,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432969
    },
    {
        "content": "<p>perfect being the enemy of good, especially when rls is actively bad</p>",
        "id": 278323353,
        "sender_full_name": "cuviper",
        "timestamp": 1649432995
    },
    {
        "content": "<p>re: rls, it's also annoying that sometimes racer is broken instead, which requires publishing a new version of the crate</p>",
        "id": 278323357,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649432997
    },
    {
        "content": "<p>I don't have much bandwidth to chase that down, but I suspect it's moving along pretty rapidly -- in theory, it's already shipped in every release, just not fully officially recomended</p>",
        "id": 278323360,
        "sender_full_name": "simulacrum",
        "timestamp": 1649432999
    },
    {
        "content": "<p>I think the problem is the rls package is stable, so we kinda have to continue providing a binary called <code>rls</code></p>",
        "id": 278323485,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433039
    },
    {
        "content": "<p>yeah, it's a little tricky for sure</p>",
        "id": 278323513,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433055
    },
    {
        "content": "<p><code>ln -s rust-analyzer rls</code> ?</p>",
        "id": 278323550,
        "sender_full_name": "cuviper",
        "timestamp": 1649433074
    },
    {
        "content": "<p>side note we still need <a href=\"https://github.com/rust-lang/rust/pull/95676\">https://github.com/rust-lang/rust/pull/95676</a> right?</p>",
        "id": 278323566,
        "sender_full_name": "DPC",
        "timestamp": 1649433082
    },
    {
        "content": "<p>I'm not sure what kind of CLI is expected or such.</p>",
        "id": 278323570,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433084
    },
    {
        "content": "<p>if they have the same interface sure! but I'm not sure that'd work out of the box</p>",
        "id": 278323575,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433086
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"120823\">DPC</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278323566\">said</a>:</p>\n<blockquote>\n<p>side note we still need <a href=\"https://github.com/rust-lang/rust/pull/95676\">https://github.com/rust-lang/rust/pull/95676</a> right?</p>\n</blockquote>\n<p>yeah, that'd fix RLS for a while</p>",
        "id": 278323613,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433107
    },
    {
        "content": "<p>LSP is supposed to be that interface, but I don't know if rls has any extensions</p>",
        "id": 278323630,
        "sender_full_name": "cuviper",
        "timestamp": 1649433118
    },
    {
        "content": "<p>a notable improvement would likely be to subtree rls and racer, so that fixing problems would be way easier</p>",
        "id": 278323680,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433127
    },
    {
        "content": "<p>I'd really rather avoid bringing in that full set int rust-lang/rust history forever for a \"short\" time.</p>",
        "id": 278323733,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433151
    },
    {
        "content": "<p>I think let's try to land <a href=\"https://github.com/rust-lang/rust/issues/95676\">#95676</a> soon, and then if we don't have rust-analyzer in say 2 cycles we can move forward with some of these options</p>",
        "id": 278323804,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433186
    },
    {
        "content": "<p>I'd need to check how big the RLS and racer issues are</p>",
        "id": 278323821,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433194
    },
    {
        "content": "<p>hmm, can we at least subtree racer into RLS? (<span class=\"user-mention\" data-user-id=\"153740\">@Igor Matuszewski</span>?)</p>",
        "id": 278323863,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433216
    },
    {
        "content": "<p>(\"<strong>Rump</strong> racer ...\")</p>",
        "id": 278323920,
        "sender_full_name": "cuviper",
        "timestamp": 1649433237
    },
    {
        "content": "<p>that'd remove a big obstacle when fixing bugs there, and I'm annoyed enough about fixing RLS that I'd be willing to spend time on that</p>",
        "id": 278323925,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433240
    },
    {
        "content": "<p>That I'd be fine with, or at least getting release-publishers access to the repo and <a href=\"http://crates.io\">crates.io</a> access.</p>",
        "id": 278323927,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433241
    },
    {
        "content": "<p>Anyway, let's move on I think -- Pietro sounds like you can follow up a little on the racer side at least.</p>",
        "id": 278324039,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433274
    },
    {
        "content": "<p>ok then</p>",
        "id": 278324041,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433275
    },
    {
        "content": "<p>yep</p>",
        "id": 278324045,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433277
    },
    {
        "content": "<p>My calendar says:</p>\n<p>Blog post writer (@cuviper by schedule, I think)<br>\nRelease notes writer (@tmandry by schedule, I believe)<br>\nCrater run (me)</p>",
        "id": 278324075,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433290
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> is not around today, but <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> does that work for you?</p>",
        "id": 278324106,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433303
    },
    {
        "content": "<p>yeah</p>",
        "id": 278324124,
        "sender_full_name": "cuviper",
        "timestamp": 1649433310
    },
    {
        "content": "<p>ok, great</p>",
        "id": 278324129,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433314
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-meeting then unless there's anything else...</p>",
        "id": 278324175,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433333
    },
    {
        "content": "<p>Does anyone have something to bring up?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if you're ready to end the meeting.</p>",
        "id": 278324176,
        "sender_full_name": "triagebot",
        "timestamp": 1649433333
    },
    {
        "content": "<p>are we having the meeting next friday since it's a day off in Europe? (Good Friday)</p>",
        "id": 278324234,
        "sender_full_name": "DPC",
        "timestamp": 1649433362
    },
    {
        "content": "<p>(in europe but italy <span aria-label=\"rolling eyes\" class=\"emoji emoji-1f644\" role=\"img\" title=\"rolling eyes\">:rolling_eyes:</span>)</p>",
        "id": 278324295,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433376
    },
    {
        "content": "<p>Happy to cancel it -- I suspect the only topic would be checkin on release notes and such anyway.</p>",
        "id": 278324325,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433391
    },
    {
        "content": "<p>(I'll go cancel the calendar event).</p>",
        "id": 278324343,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433401
    },
    {
        "content": "<p>anyway, the master history of rls + racer is 16mb, while rustc is 774mb</p>",
        "id": 278324366,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433415
    },
    {
        "content": "<p>not pushing for anything, just collected the stats</p>",
        "id": 278324388,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433426
    },
    {
        "content": "<p>alright, thanks all!</p>",
        "id": 278324401,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433433
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/meeting.202022.2004.2008/near/278324366\">said</a>:</p>\n<blockquote>\n<p>anyway, the master history of rls + racer is 16mb, while rustc is 774mb</p>\n</blockquote>\n<p>I'm not saying it's a big bump for sure percentage wise, but still 16mb is not trivial :)</p>",
        "id": 278324436,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433451
    },
    {
        "content": "<p>yeah</p>",
        "id": 278324463,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433462
    },
    {
        "content": "<p>if we do it might be worth just squashing to the last commit</p>",
        "id": 278324482,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433470
    },
    {
        "content": "<p>anyway, we can discuss it when we need to cross that bridge</p>",
        "id": 278324511,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433480
    },
    {
        "content": "<p>yep</p>",
        "id": 278324621,
        "sender_full_name": "simulacrum",
        "timestamp": 1649433503
    },
    {
        "content": "<p>would it help to make racer a submodule, so you can update and cargo-patch it without a published release?</p>",
        "id": 278325036,
        "sender_full_name": "cuviper",
        "timestamp": 1649433657
    },
    {
        "content": "<p>I'd just subtree it inside the rls repo for now, so that we don't even have to deal with a third repo</p>",
        "id": 278325169,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433716
    },
    {
        "content": "<p>(otherwise you'd have to fix racer -&gt; rls -&gt; rust)</p>",
        "id": 278325251,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649433735
    },
    {
        "content": "<p>ok</p>",
        "id": 278325330,
        "sender_full_name": "cuviper",
        "timestamp": 1649433770
    },
    {
        "content": "<p>ok escalated to -owner and added rust-lang/release-publishers to all cargo crates</p>",
        "id": 278364200,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649453049
    },
    {
        "content": "<p>had to add -owner to the release-publishers team to make it work, otherwise <a href=\"http://crates.io\">crates.io</a> wouldn't like that</p>",
        "id": 278364233,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1649453068
    }
]
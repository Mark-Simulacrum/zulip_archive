[
    {
        "content": "<p>Would someone be up for kicking off crater? Should be mostly a matter of looking at the 1.52 issue (which can be closed now) and rerunning the commands with bumped versions</p>",
        "id": 238182318,
        "sender_full_name": "simulacrum",
        "timestamp": 1620668401
    },
    {
        "content": "<p>alright going to go ahead and do this</p>",
        "id": 238471739,
        "sender_full_name": "simulacrum",
        "timestamp": 1620825580
    },
    {
        "content": "<p>fyi, crater is semi-broken due to a large amount of cargo-lockfile updates being required, see some discussion in <a class=\"stream-topic\" data-stream-id=\"246057\" href=\"/#narrow/stream/246057-t-cargo/topic/git.20dep.20getting.20updated.20in.20crater.20on.201.2E53.20beta\">#t-cargo &gt; git dep getting updated in crater on 1.53 beta</a> . I expect we'll just document this as known compat note, but in the meantime I expect to submit a PR against Crater so we can avoid digging through 1,500 regressions (mostly github repositories)</p>",
        "id": 239606083,
        "sender_full_name": "simulacrum",
        "timestamp": 1621522703
    },
    {
        "content": "<p>it's... unfortunate that bumping the version changes the lockfile</p>",
        "id": 239606214,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1621522747
    },
    {
        "content": "<p>is the new lockfile only supported on 1.53? or is it supported on older versions too?</p>",
        "id": 239606288,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1621522772
    },
    {
        "content": "<p>actually, let me write it on <a class=\"stream\" data-stream-id=\"246057\" href=\"/#narrow/stream/246057-t-cargo\">#t-cargo</a></p>",
        "id": 239606307,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1621522779
    },
    {
        "content": "<p>I'm not sure, but I suspect only 1.53+</p>",
        "id": 239606311,
        "sender_full_name": "simulacrum",
        "timestamp": 1621522780
    },
    {
        "content": "<p>this isn't the first time though and won't be the last</p>",
        "id": 239606343,
        "sender_full_name": "simulacrum",
        "timestamp": 1621522796
    },
    {
        "content": "<p>Ultimately MSRV is not something we usually care much about</p>",
        "id": 239606418,
        "sender_full_name": "simulacrum",
        "timestamp": 1621522807
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> did you have the time to go through all the regressions this weekend?</p>",
        "id": 242582319,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623669583
    },
    {
        "content": "<p>for reasons I can't really do much technical work today, so I can spend some time going through issues if you didn't get a chance</p>",
        "id": 242582379,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623669607
    },
    {
        "content": "<p>I unfortunately didn't and am likely to be short on time today - I did a cursory glance and nothing looked horrible but it wasn't even clicking into individual issues</p>",
        "id": 242582417,
        "sender_full_name": "simulacrum",
        "timestamp": 1623669636
    },
    {
        "content": "<p>ok I'll go through them to fill my day</p>",
        "id": 242582443,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623669656
    },
    {
        "content": "<p>Sounds good. I should be good for the actual release steps but this week is going to be busy for me fyi</p>",
        "id": 242582484,
        "sender_full_name": "simulacrum",
        "timestamp": 1623669689
    },
    {
        "content": "<p>opened <a href=\"https://hackmd.io/W6nE6oY_SHWDtnrODVZGOw?both\">https://hackmd.io/W6nE6oY_SHWDtnrODVZGOw?both</a> with my in-progress triage</p>",
        "id": 242602489,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623679882
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> you beat me to closing <a href=\"https://github.com/rust-lang/rust/issues/84297\">https://github.com/rust-lang/rust/issues/84297</a> by a couple seconds <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 242606151,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623681316
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> ok here is a summary of all the beta regressions <a href=\"https://hackmd.io/W6nE6oY_SHWDtnrODVZGOw\">https://hackmd.io/W6nE6oY_SHWDtnrODVZGOw</a></p>",
        "id": 242606240,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623681355
    },
    {
        "content": "<p>will now triage nightly regressions to make sure nothing was misclassified</p>",
        "id": 242606557,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623681467
    },
    {
        "content": "<p>nothing that seems to be tracked for the release for the regressions, I think, though definitely a few annoying at least issues to still have open</p>",
        "id": 242607471,
        "sender_full_name": "simulacrum",
        "timestamp": 1623681818
    },
    {
        "content": "<p>ok there were no misclassified nightly regressions</p>",
        "id": 242607478,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623681821
    },
    {
        "content": "<p>oh, there is also <a href=\"https://github.com/rust-lang/rust/issues/86286\">https://github.com/rust-lang/rust/issues/86286</a></p>",
        "id": 242610576,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623682938
    },
    {
        "content": "<p>not a regression</p>",
        "id": 242611674,
        "sender_full_name": "simulacrum",
        "timestamp": 1623683339
    },
    {
        "content": "<p>so we're not likely to backport or anything like that there</p>",
        "id": 242611698,
        "sender_full_name": "simulacrum",
        "timestamp": 1623683348
    },
    {
        "content": "<p>also shouldn't affect rustup which is the primary thing we care about imo</p>",
        "id": 242611745,
        "sender_full_name": "simulacrum",
        "timestamp": 1623683365
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242602489\">said</a>:</p>\n<blockquote>\n<p>opened <a href=\"https://hackmd.io/W6nE6oY_SHWDtnrODVZGOw?both\">https://hackmd.io/W6nE6oY_SHWDtnrODVZGOw?both</a> with my in-progress triage</p>\n</blockquote>\n<p>Thanks for putting this together</p>",
        "id": 242617764,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623685603
    },
    {
        "content": "<p>I am surprised we haven’t just reverted the injecting PR to resolve issue <a href=\"https://github.com/rust-lang/rust/issues/85713\">#85713</a></p>",
        "id": 242617803,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623685623
    },
    {
        "content": "<p>Let me look into that</p>",
        "id": 242617888,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623685658
    },
    {
        "content": "<p>Put up PR <a href=\"https://github.com/rust-lang/rust/issues/86300\">#86300</a> for that.</p>",
        "id": 242626653,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623689233
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> we still need <code>RUSTC_FORCE_INCREMENTAL</code> for 1.53, right?</p>",
        "id": 242628260,
        "sender_full_name": "cuviper",
        "timestamp": 1623689948
    },
    {
        "content": "<p>i.e. <a href=\"https://github.com/rust-lang/rust/issues/86004\">#86004</a></p>",
        "id": 242628289,
        "sender_full_name": "cuviper",
        "timestamp": 1623689965
    },
    {
        "content": "<p>Yep’ll we’ll need that on the 1.53 stable</p>",
        "id": 242628316,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623689976
    },
    {
        "content": "<p>I admit I’m somewhat regretting my prior stance on not putting RUSTC_FORCE_INCREMENTAL onto 1.53-beta</p>",
        "id": 242628428,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690014
    },
    {
        "content": "<p>(i.e.. I suspect that stance didn’t buy us much, and just made for headaches now)</p>",
        "id": 242628460,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690031
    },
    {
        "content": "<p>ok, are you still planning to commit this yourself? need help?</p>",
        "id": 242628796,
        "sender_full_name": "cuviper",
        "timestamp": 1623690170
    },
    {
        "content": "<p>i probably need help just knowing <em>when</em> and <em>where</em> to land it</p>",
        "id": 242628873,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690204
    },
    {
        "content": "<p>i.e. is now the time?</p>",
        "id": 242628955,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690240
    },
    {
        "content": "<p>and should it just be put up as a PR against the beta branch today?</p>",
        "id": 242629022,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690260
    },
    {
        "content": "<p>I'd say ASAP, yes, on <code>beta</code></p>",
        "id": 242629027,
        "sender_full_name": "cuviper",
        "timestamp": 1623690269
    },
    {
        "content": "<p>okay. I can do that.</p>",
        "id": 242629046,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690276
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> I was expecting to include it in the beta to stable PR, alongside any other last minute backports</p>",
        "id": 242629159,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690323
    },
    {
        "content": "<p>ah</p>",
        "id": 242629169,
        "sender_full_name": "cuviper",
        "timestamp": 1623690328
    },
    {
        "content": "<p>Mostly to avoid wasting a cycle of bors</p>",
        "id": 242629190,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690337
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> okay that works too</p>",
        "id": 242629195,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690339
    },
    {
        "content": "<p>But if you want to get a commit or patch or whatever that's guaranteed to cherry pick cleanly that's good prep work</p>",
        "id": 242629277,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690365
    },
    {
        "content": "<p>It should be a simple patch iirc so I don't expect problems</p>",
        "id": 242629290,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690377
    },
    {
        "content": "<p>in general, I'd rather we avoid such last minute additions</p>",
        "id": 242629324,
        "sender_full_name": "cuviper",
        "timestamp": 1623690403
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> okay, maybe I’ll put up a PR against <code>beta</code> marked as “DRAFT” and then point you at it?</p>",
        "id": 242629335,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690409
    },
    {
        "content": "<p>e.g. I don't see why this patch was waiting</p>",
        "id": 242629337,
        "sender_full_name": "cuviper",
        "timestamp": 1623690411
    },
    {
        "content": "<p>Sure that works</p>",
        "id": 242629348,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690418
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> as in, why didn’t we land it on <code>beta</code> earlier?</p>",
        "id": 242629375,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690428
    },
    {
        "content": "<p>It was waiting because we didn't want people to avoid beta because of thisd</p>",
        "id": 242629378,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690430
    },
    {
        "content": "<p>Yes, that</p>",
        "id": 242629385,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690436
    },
    {
        "content": "<p>namely at least one developer (Carol) was using beta because it fixed incr-comp for her</p>",
        "id": 242629420,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690452
    },
    {
        "content": "<p>hmm, well that sets a weird expectation IMO, if those same people are hoping the beta behavior will continue in stable</p>",
        "id": 242629517,
        "sender_full_name": "cuviper",
        "timestamp": 1623690483
    },
    {
        "content": "<p>yes, that is one reason why I’m regretting my prior stance</p>",
        "id": 242629534,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690496
    },
    {
        "content": "<p>I think everyone understood it wouldn't personally and I think it was the right choice</p>",
        "id": 242629559,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690507
    },
    {
        "content": "<p>well it's almost done now, but let's please not make a habit of that</p>",
        "id": 242629619,
        "sender_full_name": "cuviper",
        "timestamp": 1623690533
    },
    {
        "content": "<p>I don't generally like playing with channels but I don't think it was wrong to do so in this case</p>",
        "id": 242629633,
        "sender_full_name": "simulacrum",
        "timestamp": 1623690537
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242629619\">said</a>:</p>\n<blockquote>\n<p>well it's almost done now, but let's please not make a habit of that</p>\n</blockquote>\n<p>right, I’m personally planning to make a point of saying that this should <em>not</em> be used as precedent in future decisions</p>",
        "id": 242629691,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623690568
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242629335\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> okay, maybe I’ll put up a PR against <code>beta</code> marked as “DRAFT” and then point you at it?</p>\n</blockquote>\n<p>See PR <a href=\"https://github.com/rust-lang/rust/issues/86301\">#86301</a></p>",
        "id": 242633166,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623692030
    },
    {
        "content": "<p>okay, going to proceed here with 1.53 beta-&gt;stable promotion shortly</p>",
        "id": 242664164,
        "sender_full_name": "simulacrum",
        "timestamp": 1623707797
    },
    {
        "content": "<p>force pushed</p>",
        "id": 242664244,
        "sender_full_name": "simulacrum",
        "timestamp": 1623707880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> will you have time today to finish <a href=\"https://github.com/rust-lang/rust/pull/86301\">https://github.com/rust-lang/rust/pull/86301</a> or should I put that on my agenda before finalizing the promotion? I should have time, but of course would prefer to not spend it on this :)</p>",
        "id": 242666153,
        "sender_full_name": "simulacrum",
        "timestamp": 1623709247
    },
    {
        "content": "<p>ok, taking over here</p>",
        "id": 242671539,
        "sender_full_name": "simulacrum",
        "timestamp": 1623713293
    },
    {
        "content": "<p>Oh I didn’t realize the error messaging changes were never put into beta</p>",
        "id": 242671830,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623713557
    },
    {
        "content": "<p>Sorry about that.</p>",
        "id": 242671851,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623713590
    },
    {
        "content": "<p>ok, <a href=\"https://github.com/rust-lang/rust/pull/86317\">https://github.com/rust-lang/rust/pull/86317</a> is now open</p>",
        "id": 242672311,
        "sender_full_name": "simulacrum",
        "timestamp": 1623714045
    },
    {
        "content": "<p>Hopefully that passes CI, I'm not sure if my patch for the incremental test failures seen on the PR Felix opened will be sufficient</p>",
        "id": 242672340,
        "sender_full_name": "simulacrum",
        "timestamp": 1623714069
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> wait, are we keeping <a href=\"https://github.com/rust-lang/rust/issues/85667\">https://github.com/rust-lang/rust/issues/85667</a> in?</p>",
        "id": 242714703,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623753194
    },
    {
        "content": "<p>1300 regressed crates is <em>a lot</em></p>",
        "id": 242714716,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623753200
    },
    {
        "content": "<p>I don't know</p>",
        "id": 242720759,
        "sender_full_name": "simulacrum",
        "timestamp": 1623757566
    },
    {
        "content": "<p>It's the sort of case where we really don't have a framework to make a decision imo</p>",
        "id": 242720789,
        "sender_full_name": "simulacrum",
        "timestamp": 1623757594
    },
    {
        "content": "<p>It is technically allowed breakage</p>",
        "id": 242720998,
        "sender_full_name": "simulacrum",
        "timestamp": 1623757737
    },
    {
        "content": "<p>I would strongly prefer to back it down until we have less regressions</p>",
        "id": 242721641,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623758205
    },
    {
        "content": "<p>That's just not going to happen though? Like, these regressions are mostly pinned I think</p>",
        "id": 242722518,
        "sender_full_name": "simulacrum",
        "timestamp": 1623758825
    },
    {
        "content": "<p>With cargo update -p lexical-core many of them will be fixed I think. Maybe we should add an option to run cargo update (but without git deps ideally) in crater...</p>",
        "id": 242722674,
        "sender_full_name": "simulacrum",
        "timestamp": 1623758910
    },
    {
        "content": "<p>then I think we should consider other options rather than breaking 1.3k projects</p>",
        "id": 242723007,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623759123
    },
    {
        "content": "<p>we shouldn't break that many crates</p>",
        "id": 242723051,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623759141
    },
    {
        "content": "<p>also my understanding is that the libs team didn't even have a chance to discuss that due to mislabeling</p>",
        "id": 242723113,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623759186
    },
    {
        "content": "<p>they discussed that issue</p>",
        "id": 242728226,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762053
    },
    {
        "content": "<p>or at least, <span class=\"user-mention\" data-user-id=\"310399\">@Mara</span> left comments</p>",
        "id": 242728268,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762072
    },
    {
        "content": "<p>ultimately if we want to back out BITS I'm not opposed, I just don't really know either way</p>",
        "id": 242728373,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762107
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I'll hold off on dev-static'ing the stable release for now then? If we want to rebuild without BITS</p>",
        "id": 242728509,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762148
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242720789\">said</a>:</p>\n<blockquote>\n<p>It's the sort of case where we really don't have a framework to make a decision imo</p>\n</blockquote>\n<p>yeah, that's the problem. i honstely don't know what to do here. and discussions in the team meeting don't come to clear conclusions either. :/</p>",
        "id": 242729015,
        "sender_full_name": "Mara",
        "timestamp": 1623762386
    },
    {
        "content": "<p>Yeah, I've been lurking, and agree with Mark that I'm not sure reverting it is productive, because it doesn't seem like much will change between releases, but I'm also not unopposed to the revert. I think the important thing is that we should some kind of path laid out for the change to land or be removed. Rather than continue to just land and revert, and hope the number goes down.</p>",
        "id": 242729034,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623762400
    },
    {
        "content": "<p>cc <span class=\"user-group-mention\" data-user-group-id=\"2907\">@T-release</span></p>",
        "id": 242729069,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762421
    },
    {
        "content": "<p>Ultimately for me personally I'd be happy with confirmation that there are patch versions (i.e., cargo update is sufficient) for each \"channel\" published of the lexical-core crate</p>",
        "id": 242729129,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762456
    },
    {
        "content": "<p>Same</p>",
        "id": 242729163,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623762472
    },
    {
        "content": "<p>I asked yesterday but I don't think there's been a response; it's likely not too hard to figure out based on <a href=\"http://crates.io\">crates.io</a> history</p>",
        "id": 242729165,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762473
    },
    {
        "content": "<p>I don't think I'll have the time to try to figure that out, though</p>",
        "id": 242729229,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762492
    },
    {
        "content": "<p>if we want to land this IMO we should back it out right now and do a <code>cargo update</code> crater run</p>",
        "id": 242729339,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623762556
    },
    {
        "content": "<p>I decided I'll push up dev-static artifacts so we can get them out for testing, and then we can always rebuild them.</p>",
        "id": 242729346,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762561
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242729339\">said</a>:</p>\n<blockquote>\n<p>if we want to land this IMO we should back it out right now and do a <code>cargo update</code> crater run</p>\n</blockquote>\n<p>Is this a thing we can actually do? It'd be closer to cargo update -p lexical-core or so, I suspect; cargo update broadly will also bump git deps and we don't want that.</p>",
        "id": 242729397,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762594
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242729397\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242729339\">said</a>:</p>\n<blockquote>\n<p>if we want to land this IMO we should back it out right now and do a <code>cargo update</code> crater run</p>\n</blockquote>\n<p>Is this a thing we can actually do? It'd be closer to cargo update -p lexical-core or so, I suspect; cargo update broadly will also bump git deps and we don't want that.</p>\n</blockquote>\n<p>implementing support for that shouldn't be too hard</p>",
        "id": 242729457,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623762610
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242729165\">said</a>:</p>\n<blockquote>\n<p>I asked yesterday but I don't think there's been a response; it's likely not too hard to figure out based on <a href=\"http://crates.io\">crates.io</a> history</p>\n</blockquote>\n<p>I checked earlier, there is patches for all of the minor versions from about 2 months ago.</p>",
        "id": 242729485,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623762629
    },
    {
        "content": "<p>I think</p>",
        "id": 242729486,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623762630
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242729165\">said</a>:</p>\n<blockquote>\n<p>I asked yesterday but I don't think there's been a response; it's likely not too hard to figure out based on <a href=\"http://crates.io\">crates.io</a> history</p>\n</blockquote>\n<p><a href=\"/user_uploads/4715/cUcrofBS8XOqmnG2h7yMTihK/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/cUcrofBS8XOqmnG2h7yMTihK/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/cUcrofBS8XOqmnG2h7yMTihK/image.png\"></a></div>",
        "id": 242729501,
        "sender_full_name": "Mara",
        "timestamp": 1623762641
    },
    {
        "content": "<p>these were updated recently. checking now if they include the patch for BITS</p>",
        "id": 242729545,
        "sender_full_name": "Mara",
        "timestamp": 1623762669
    },
    {
        "content": "<p>that seems odd given that the discussion with myrrlyn was only ~20 days ago</p>",
        "id": 242729560,
        "sender_full_name": "simulacrum",
        "timestamp": 1623762677
    },
    {
        "content": "<p><a href=\"https://github.com/Alexhuszagh/rust-lexical/pull/56\">https://github.com/Alexhuszagh/rust-lexical/pull/56</a> was 13 feb</p>",
        "id": 242729734,
        "sender_full_name": "Mara",
        "timestamp": 1623762749
    },
    {
        "content": "<p>0.4.8, 0.5.1, 0.6.8, and 0.7.6 all include the BITS patch.</p>",
        "id": 242730217,
        "sender_full_name": "Mara",
        "timestamp": 1623762985
    },
    {
        "content": "<p>(checked the source on <a href=\"http://crates.io\">crates.io</a>, not on github)</p>",
        "id": 242730280,
        "sender_full_name": "Mara",
        "timestamp": 1623763011
    },
    {
        "content": "<p>ok, so that's all of the ones regressed on the crater run</p>",
        "id": 242730364,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763059
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I am personally inclined to not bother reverting and waiting for crater to get the cargo update logic implemented and run</p>",
        "id": 242730401,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763079
    },
    {
        "content": "<p>hmm</p>",
        "id": 242730468,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763100
    },
    {
        "content": "<p>How about a compatibility note?</p>",
        "id": 242730476,
        "sender_full_name": "cuviper",
        "timestamp": 1623763102
    },
    {
        "content": "<p>I guess I'm still really worried about breaking that many crates</p>",
        "id": 242730498,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763116
    },
    {
        "content": "<p>s/crates/projects, to be clear. in theory ~no <a href=\"http://crates.io\">crates.io</a> crate is going to break as those don't generally pin their dep</p>",
        "id": 242730550,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763143
    },
    {
        "content": "<p>still, that's a lot</p>",
        "id": 242730728,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763219
    },
    {
        "content": "<p>so reverting it would postpone the problem six weeks. is that just to give crates more time to upgrade their deps, or would we work on some workaround (compiler ignoring the constant in some cases, or renaming it, or..)?</p>",
        "id": 242730796,
        "sender_full_name": "Mara",
        "timestamp": 1623763257
    },
    {
        "content": "<p>if we can find a workaround that'd be great</p>",
        "id": 242730845,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763278
    },
    {
        "content": "<p>Basically I don't think reverting makes sense if we're going to end up landing it as-is, more time in the 'few cycles' range won't change anything</p>",
        "id": 242730851,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763283
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/uusvwS72Lnf_k1fppeL93Y8R/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/uusvwS72Lnf_k1fppeL93Y8R/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/uusvwS72Lnf_k1fppeL93Y8R/image.png\"></a></div>",
        "id": 242730871,
        "sender_full_name": "Mara",
        "timestamp": 1623763294
    },
    {
        "content": "<p>looks like by downloads (so, 'active' crates), most have updated already</p>",
        "id": 242730963,
        "sender_full_name": "Mara",
        "timestamp": 1623763323
    },
    {
        "content": "<p>Is that a stack graph? Or is that just new downloads?</p>",
        "id": 242731006,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763342
    },
    {
        "content": "<p>iirc it's stacked</p>",
        "id": 242731081,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763371
    },
    {
        "content": "<p>yeah, stacked</p>",
        "id": 242731103,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763378
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/ytxMcgXpvVgUB5XoK3HP2uaZ/image.png\">image.png</a> numbers</p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/ytxMcgXpvVgUB5XoK3HP2uaZ/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/ytxMcgXpvVgUB5XoK3HP2uaZ/image.png\"></a></div>",
        "id": 242731104,
        "sender_full_name": "Mara",
        "timestamp": 1623763379
    },
    {
        "content": "<p>this just seems to lend more credence to the idea that there's not much point in waiting another cycle</p>",
        "id": 242731133,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763390
    },
    {
        "content": "<p>this problem keeps popping up while extending the standard library though. varies a lot what the impact is, but we keep having to make this decision, which is too often driven by 'oh, out of time' :(   maybe we should set a meeting or something to talk about some kind of policy. or some more general mechanism to avoid breakage in the compiler.. idk</p>",
        "id": 242731361,
        "sender_full_name": "Mara",
        "timestamp": 1623763486
    },
    {
        "content": "<p>well, that's still a bit less than 1/3rd of the downloads that are still on the old versions</p>",
        "id": 242731429,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763528
    },
    {
        "content": "<p>if we had it (e.g., the std-version or whatever you suggested), I absolutely think we should/would use it.</p>",
        "id": 242731459,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763539
    },
    {
        "content": "<p>to some extent it's not yet clear that this is a problem we must tackle <em>now</em>, though, and the design space is complex.</p>",
        "id": 242731498,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763557
    },
    {
        "content": "<p>with this breakage if we intend add a mechanism like that I'd delay the stabilization until it's ready</p>",
        "id": 242731607,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763595
    },
    {
        "content": "<p>I really don't think that's a reasonable position</p>",
        "id": 242731636,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763610
    },
    {
        "content": "<p>we already track the stabilization version in the #[stable] attributes, so half of it is already done. the other half will take a lot of discussion though</p>",
        "id": 242731647,
        "sender_full_name": "Mara",
        "timestamp": 1623763614
    },
    {
        "content": "<p>like, that mechanism is so far off</p>",
        "id": 242731651,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763616
    },
    {
        "content": "<p>at least multiple cycles</p>",
        "id": 242731666,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763623
    },
    {
        "content": "<p>likely 6-12 months, IMO</p>",
        "id": 242731688,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763638
    },
    {
        "content": "<p>this doesn't seem to be a feature that has to land ASAP tho</p>",
        "id": 242731710,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763650
    },
    {
        "content": "<p>that's also true</p>",
        "id": 242731732,
        "sender_full_name": "Mara",
        "timestamp": 1623763666
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242731429\">said</a>:</p>\n<blockquote>\n<p>well, that's still a bit less than 1/3rd of the downloads that are still on the old versions</p>\n</blockquote>\n<p>Right, but we don't know which of those are also on the latest minor and which are older unpatched releases. So it's likely less than 1/3.</p>",
        "id": 242731737,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623763668
    },
    {
        "content": "<p>no, but there's usually 100-200 projects we break per cycle in this fashion</p>",
        "id": 242731761,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763678
    },
    {
        "content": "<p>if we want to take a strict policy, then we basically need to stop adding new things to std</p>",
        "id": 242731877,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763715
    },
    {
        "content": "<p>I am not convinced that's warranted</p>",
        "id": 242731892,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763722
    },
    {
        "content": "<p>I don't think being super strict is necessary, but like, here we're breaking 10x the amount you mentioned</p>",
        "id": 242731969,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623763759
    },
    {
        "content": "<p>but it's also 10x easier to fix the breakage this time, i suppose. since all the old versions of lexical-core have a patch available.</p>",
        "id": 242732049,
        "sender_full_name": "Mara",
        "timestamp": 1623763799
    },
    {
        "content": "<p>Yeah, the fix for most people is going to be quite easy.</p>",
        "id": 242732136,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763819
    },
    {
        "content": "<p>(but without a policy or something, i don't know if that makes it more okay to break things.)</p>",
        "id": 242732175,
        "sender_full_name": "Mara",
        "timestamp": 1623763838
    },
    {
        "content": "<p>We <em>do</em> have a policy that says this is explicitly allowed</p>",
        "id": 242732192,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763851
    },
    {
        "content": "<p>We have no policy saying otherwise</p>",
        "id": 242732202,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763855
    },
    {
        "content": "<p>right</p>",
        "id": 242732210,
        "sender_full_name": "Mara",
        "timestamp": 1623763858
    },
    {
        "content": "<p>That's part of my point</p>",
        "id": 242732213,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763861
    },
    {
        "content": "<p>Like, I am happy to discuss and we can try to set a different bar for breakage</p>",
        "id": 242732239,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763876
    },
    {
        "content": "<p>While I agree that the theoretical breakage of 1,300 would be bad, I'm not sure that the material breakage will be close to that. We have to account for the passage of time that's already happened and these patches being out for a release cycle before we can hold ourselves to that number.</p>",
        "id": 242732264,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623763884
    },
    {
        "content": "<p>And I'm happy to drop BITS from this release</p>",
        "id": 242732266,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763885
    },
    {
        "content": "<p>but realistically it seems like we have this \"fight\" each release, on different scales. I think that definitely points to needing a policy discussion, but until it happens, I'd rather not stranglehold ourselves to some arbitrary-ish standard</p>",
        "id": 242732422,
        "sender_full_name": "simulacrum",
        "timestamp": 1623763941
    },
    {
        "content": "<p>say we don't revert, and release it with this breakage. if it turns out to have too much negative impact, then we have a clear signal the policy should be changed.</p>",
        "id": 242732434,
        "sender_full_name": "Mara",
        "timestamp": 1623763946
    },
    {
        "content": "<p>we have no good way of determining that negative impact IMO</p>",
        "id": 242732568,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764013
    },
    {
        "content": "<p>that's part of the problem</p>",
        "id": 242732573,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764016
    },
    {
        "content": "<p>but it seems there is already some vague consensus that the current policy sets the bar too low</p>",
        "id": 242732575,
        "sender_full_name": "Mara",
        "timestamp": 1623764017
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242732568\">said</a>:</p>\n<blockquote>\n<p>we have no good way of determining that negative impact IMO</p>\n</blockquote>\n<p>number of issues opened? disappointed tweets? yeah, it's tricky.</p>",
        "id": 242732683,
        "sender_full_name": "Mara",
        "timestamp": 1623764051
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242732575\">said</a>:</p>\n<blockquote>\n<p>but it seems there is already some vague consensus that the current policy sets the bar too low</p>\n</blockquote>\n<p>I don't know if the bar is too low, I think the issue is that people have different heights of where the bar should be.</p>",
        "id": 242732703,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623764062
    },
    {
        "content": "<p>Implementing mitigation strategies like the std-version feature mentioned (not just on this issue, multiple times over the past several years at least), makes sense to me. But I don't think it would change where the bar is for me personally</p>",
        "id": 242732787,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764096
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"310399\">Mara</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242732434\">said</a>:</p>\n<blockquote>\n<p>say we don't revert, and release it with this breakage. if it turns out to have too much negative impact, then we have a clear signal the policy should be changed.</p>\n</blockquote>\n<p>Would the onus be on us to have a patch release then if it did go negatively? If it did go negative, I would want to course correct quickly.</p>",
        "id": 242732912,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623764156
    },
    {
        "content": "<p>But I'd tell people to do cargo update -p lexical-core, that's almost guaranteed to solve their problem</p>",
        "id": 242733052,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764204
    },
    {
        "content": "<p>A patch release seems really excessive</p>",
        "id": 242733066,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764211
    },
    {
        "content": "<p>Reverting in a patch release would break anyone that started using it. I'd only do that for a soundness issue.</p>",
        "id": 242733124,
        "sender_full_name": "cuviper",
        "timestamp": 1623764248
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/242732787\">said</a>:</p>\n<blockquote>\n<p>Implementing mitigation strategies like the std-version feature mentioned (not just on this issue, multiple times over the past several years at least), makes sense to me. But I don't think it would change where the bar is for me personally</p>\n</blockquote>\n<p>Sure, I think those are two separate things. One being \"What's an acceptable level of breakage in std?\", and the other being \"What lever can we pull when we want to make a change that exceeds that acceptable level?\".</p>",
        "id": 242733130,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623764251
    },
    {
        "content": "<p>Hm, well, I mean they definitely influence one another, I think</p>",
        "id": 242733326,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764315
    },
    {
        "content": "<p>the 'easy' option is obviously to do nothing</p>",
        "id": 242733371,
        "sender_full_name": "simulacrum",
        "timestamp": 1623764340
    },
    {
        "content": "<p>Yeah, but just so we're clear on the current topic of <code>::BITS</code> before we get distracted, I'm weakly in favor of doing nothing. If more people show up and feel like we should revert I have no problem with that.</p>",
        "id": 242733762,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623764494
    },
    {
        "content": "<p>I want to echo <a href=\"https://github.com/rust-lang/rust/issues/84133#issuecomment-819027170\">this comment</a> on the array-iter hack:</p>\n<blockquote>\n<p>but I am worried that we're using our power as language maintainers to sidestep an issue that regularly affects end-users of the language.</p>\n</blockquote>",
        "id": 242734697,
        "sender_full_name": "cuviper",
        "timestamp": 1623764870
    },
    {
        "content": "<p>on the other hand, end-users get to use semver. release breaking changes in a new major release. we don't have that option.</p>",
        "id": 242734882,
        "sender_full_name": "Mara",
        "timestamp": 1623764929
    },
    {
        "content": "<p>Yeah</p>",
        "id": 242734910,
        "sender_full_name": "cuviper",
        "timestamp": 1623764942
    },
    {
        "content": "<p>That's a big hammer though for changes that should otherwise be small</p>",
        "id": 242735084,
        "sender_full_name": "cuviper",
        "timestamp": 1623765010
    },
    {
        "content": "<p>Anyway, I do think we should go ahead and ship <code>BITS</code>, with a compat note</p>",
        "id": 242735485,
        "sender_full_name": "cuviper",
        "timestamp": 1623765173
    },
    {
        "content": "<p>And I think a patch-release revert should only be a severe option</p>",
        "id": 242735597,
        "sender_full_name": "cuviper",
        "timestamp": 1623765220
    },
    {
        "content": "<p>My only concern is that the fix is easy to find</p>",
        "id": 242762375,
        "sender_full_name": "tmandry",
        "timestamp": 1623775227
    },
    {
        "content": "<p>a compat note probably satisfies that, if it has enough of the keywords a user would search for after hitting this</p>",
        "id": 242763103,
        "sender_full_name": "tmandry",
        "timestamp": 1623775492
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> <a href=\"https://github.com/rust-lang/blog.rust-lang.org/pull/851\">https://github.com/rust-lang/blog.rust-lang.org/pull/851</a></p>",
        "id": 242779123,
        "sender_full_name": "simulacrum",
        "timestamp": 1623782223
    },
    {
        "content": "<p>looking</p>",
        "id": 242783429,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623783950
    },
    {
        "content": "<p>merged!</p>",
        "id": 242783775,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623784101
    },
    {
        "content": "<p>Are we settled on inaction for <code>BITS</code>?</p>",
        "id": 242903938,
        "sender_full_name": "cuviper",
        "timestamp": 1623860022
    },
    {
        "content": "<p>just compat notes, I think, I've not had time to submit a PR yet unfortunately</p>",
        "id": 242906824,
        "sender_full_name": "simulacrum",
        "timestamp": 1623861358
    },
    {
        "content": "<p>would be great if someone could own that!</p>",
        "id": 242906876,
        "sender_full_name": "simulacrum",
        "timestamp": 1623861366
    },
    {
        "content": "<p>I can do that. Should I call out <code>lexical-core</code> by name, or be more vague about it?</p>",
        "id": 242907196,
        "sender_full_name": "cuviper",
        "timestamp": 1623861491
    },
    {
        "content": "<p>should it go in the blog post too?</p>",
        "id": 242907332,
        "sender_full_name": "Mara",
        "timestamp": 1623861557
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> i think calling it out by name is useful, because then you can tell people to use <code>cargo update -p lexical-core</code> without updating all their other dependencies.</p>",
        "id": 242907464,
        "sender_full_name": "Mara",
        "timestamp": 1623861613
    },
    {
        "content": "<p>hm, I've thought about including the compat notes section in the blog post in some fashion, but I worry it puts too much emphasis on it</p>",
        "id": 242907582,
        "sender_full_name": "simulacrum",
        "timestamp": 1623861697
    },
    {
        "content": "<p>I think linking to it directly is probably not possible, right? or at least, that link will go stale, because the heading doesn't contain a date/release in it</p>",
        "id": 242907724,
        "sender_full_name": "simulacrum",
        "timestamp": 1623861735
    },
    {
        "content": "<p>I hope the plain release notes are enough for this -- should be google-able</p>",
        "id": 242907759,
        "sender_full_name": "cuviper",
        "timestamp": 1623861742
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/86380\">https://github.com/rust-lang/rust/pull/86380</a></p>",
        "id": 242952092,
        "sender_full_name": "cuviper",
        "timestamp": 1623883006
    },
    {
        "content": "<p>looks like there's a last minute clippy ICE</p>",
        "id": 242957603,
        "sender_full_name": "simulacrum",
        "timestamp": 1623887238
    },
    {
        "content": "<p><a href=\"https://internals.rust-lang.org/t/1-53-0-prerelease-testing/14884/2?u=mark_simulacrum\">https://internals.rust-lang.org/t/1-53-0-prerelease-testing/14884/2?u=mark_simulacrum</a></p>",
        "id": 242957604,
        "sender_full_name": "simulacrum",
        "timestamp": 1623887239
    },
    {
        "content": "<p>I ran out of time yesterday and today to do the beta promoting and master bootstrapping, but my day looks a little better tomorrow and friday so should be able to finish them then.</p>\n<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I suspect you'll be up earlier than I; I'm not sure we can do much about the Clippy ICE on such short notice, but maybe we could prepare a new set of artifacts with a backport... I'll try to kick off a stable-next PR so we have the artifacts for a decision tomorow morning right before going to bed (i.e., now)</p>",
        "id": 242965709,
        "sender_full_name": "simulacrum",
        "timestamp": 1623896417
    },
    {
        "content": "<p>looks like the fix is in 1.54, at least, so we don't need beta backports; it landed in <a href=\"https://github.com/rust-lang/rust/pull/84980\">https://github.com/rust-lang/rust/pull/84980</a></p>",
        "id": 242965817,
        "sender_full_name": "simulacrum",
        "timestamp": 1623896571
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/86390\">https://github.com/rust-lang/rust/pull/86390</a></p>",
        "id": 242966005,
        "sender_full_name": "simulacrum",
        "timestamp": 1623896848
    },
    {
        "content": "<p>ok with rustup-toolchain-install-master confirmed the new PR fixes the <a href=\"http://crates.io\">crates.io</a> ICE</p>",
        "id": 242987817,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623919070
    },
    {
        "content": "<p>+1 from me to release the new artifacts</p>",
        "id": 242987895,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623919109
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> we have another bug in rustfmt it looks like - <a href=\"https://github.com/rust-lang/rustfmt/issues/4874\">https://github.com/rust-lang/rustfmt/issues/4874</a></p>",
        "id": 243014501,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935498
    },
    {
        "content": "<p>My guess is it's not getting fixed today, so probably blocking on it doesn't make sense?</p>",
        "id": 243014534,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935518
    },
    {
        "content": "<p>But I would like a <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> from someone else on that decision before I proceed with the release</p>",
        "id": 243014607,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935533
    },
    {
        "content": "<p>cc <span class=\"user-group-mention\" data-user-group-id=\"2907\">@T-release</span></p>",
        "id": 243014611,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935537
    },
    {
        "content": "<p>should we ask the rustfmt wg?</p>",
        "id": 243014671,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623935566
    },
    {
        "content": "<p>also, this release is making me worried... or well, the past couple of releases</p>",
        "id": 243014693,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623935578
    },
    {
        "content": "<p>a lot of things are slipping</p>",
        "id": 243014703,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623935584
    },
    {
        "content": "<p>Yeah, I mean, there are very limited resources it seems to me. Not sure how much can be done about it.</p>",
        "id": 243014767,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935614
    },
    {
        "content": "<p>I'll see if I can ping the rustfmt folks</p>",
        "id": 243014805,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935629
    },
    {
        "content": "<p>DM'd <span class=\"user-mention\" data-user-id=\"320317\">@Caleb Cartwright</span> on discord</p>",
        "id": 243014959,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935700
    },
    {
        "content": "<p>As long as it's not <em>damaging</em> the missing files, I agree we don't need to block on this</p>",
        "id": 243015014,
        "sender_full_name": "cuviper",
        "timestamp": 1623935724
    },
    {
        "content": "<p>it doesn't seem <em>horrible</em> to me, the only thing I could see it affecting is autogenerated code</p>",
        "id": 243015094,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623935761
    },
    {
        "content": "<p>Sounds like he's looking into it so I'll wait a bit</p>",
        "id": 243015095,
        "sender_full_name": "simulacrum",
        "timestamp": 1623935761
    },
    {
        "content": "<p>Sounds like it's a bit indeterminate and won't be known what the timeline on a fix is for at least several hours for now</p>",
        "id": 243016016,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936129
    },
    {
        "content": "<p>I think we should move ahead</p>",
        "id": 243016043,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936139
    },
    {
        "content": "<p>Hmm, well for people who have format checking enabled in CI, what would the impact of this be? I don't think there would be any real effect since it's just not touching more files, but I want to make sure I'm not missing something.</p>",
        "id": 243016968,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623936524
    },
    {
        "content": "<p>It's my understanding that the files are essentially ignored by rustfmt</p>",
        "id": 243017019,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936551
    },
    {
        "content": "<p>so they'd not be checked or formatted either way</p>",
        "id": 243017041,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936562
    },
    {
        "content": "<p>and in-editor formatting should still work, since that usually runs rustfmt on an individual file I think (not cargo fmt)</p>",
        "id": 243017084,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936587
    },
    {
        "content": "<p>ok, presuming no comments in next ~5 minutes I'll kick off the release</p>",
        "id": 243017274,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936659
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/243017019\">said</a>:</p>\n<blockquote>\n<p>It's my understanding that the files are essentially ignored by rustfmt</p>\n</blockquote>\n<p>Right I'm just thinking of a situation where I push code that is not formatted, and that would be accepted in 1.53, but then would be rejected by 1.54. So this might come up for projects that are always the latest stable immediately, rather than those that pin and upgrade. But just running <code>cargo +nightly fmt</code> seems like a reasonable workaround if that is the case.</p>",
        "id": 243017559,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623936772
    },
    {
        "content": "<p>Well, minor changes to formatting happen regardless, but yes, that's a possible case I believe (presuming we backport the fix to 1.54, of course)</p>",
        "id": 243017721,
        "sender_full_name": "simulacrum",
        "timestamp": 1623936857
    },
    {
        "content": "<p>Also unrelated, I just realised that we're closer to 1.100.0 now than 1.0.0. That's odd to think about.</p>",
        "id": 243017788,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623936902
    },
    {
        "content": "<p>ok, kicking off stable build</p>",
        "id": 243019156,
        "sender_full_name": "simulacrum",
        "timestamp": 1623937483
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> can you DM steve on discord when you merge the blog post so he can tweet it?</p>",
        "id": 243020960,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623938209
    },
    {
        "content": "<p>sure</p>",
        "id": 243020983,
        "sender_full_name": "simulacrum",
        "timestamp": 1623938219
    },
    {
        "content": "<p>I'll ping now as a warning</p>",
        "id": 243020990,
        "sender_full_name": "simulacrum",
        "timestamp": 1623938223
    },
    {
        "content": "<p>ok, merging blog</p>",
        "id": 243028084,
        "sender_full_name": "simulacrum",
        "timestamp": 1623940975
    },
    {
        "content": "<p>hm, cargo release is going to be a problem, cc <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> <span class=\"user-mention\" data-user-id=\"120518\">@Eric Huss</span> </p>\n<div class=\"codehilite\"><pre><span></span><code>Caused by:\n  the remote server responded with an error: this crate exists but you don&#39;t seem to be an owner. If you believe this is a mistake, perhaps you need to accept an invitation to be an owner before publishing.\n</code></pre></div>",
        "id": 243028288,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941054
    },
    {
        "content": "<p>for <a href=\"https://crates.io/crates/cargo-util\">https://crates.io/crates/cargo-util</a></p>",
        "id": 243028296,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941061
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> generate a rust-lang-owner <a href=\"http://crates.io\">crates.io</a> token and use it for publishing?</p>",
        "id": 243028334,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623941080
    },
    {
        "content": "<p>yeah, I guess. I think I'd prefer we create a rust-lang/publishers or something team that we can add you and me to, so we're not using the owner credentials regularly</p>",
        "id": 243028432,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941127
    },
    {
        "content": "<p>yeah definitely</p>",
        "id": 243028454,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623941138
    },
    {
        "content": "<p><span aria-label=\"frown\" class=\"emoji emoji-1f641\" role=\"img\" title=\"frown\">:frown:</span>  Let me know if I can help in any way. There seems to be quite a few different github teams so it is a bit confusing to me (rust-lang-owner, rust-lang:libs, rust-lang-nursery:libs, and rust-lang:core).   I'm guessing maybe you usually have a token that works with rust-lang:core?</p>",
        "id": 243028963,
        "sender_full_name": "Eric Huss",
        "timestamp": 1623941309
    },
    {
        "content": "<p>well, I use my personal token and am on core</p>",
        "id": 243028999,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941326
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> do you think it makes sense to make this team in team repo? That's probably best, right?</p>",
        "id": 243029061,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941351
    },
    {
        "content": "<p>yeah I'd create a \"release-doers\" subteam of release to grant release-related perms</p>",
        "id": 243029116,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623941374
    },
    {
        "content": "<p>sounds good</p>",
        "id": 243029122,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941381
    },
    {
        "content": "<p>with a better name (release-drivers? release-managers?)</p>",
        "id": 243029132,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623941384
    },
    {
        "content": "<p>release-publishers? :)</p>",
        "id": 243029159,
        "sender_full_name": "simulacrum",
        "timestamp": 1623941398
    },
    {
        "content": "<p>even better!</p>",
        "id": 243029214,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623941405
    },
    {
        "content": "<p>ok, only cargo-util actually needed it this time, we can expand it to the other crates over time (it's a bit of a pain since I need to invite myself, then invite the team, then remove myself)</p>",
        "id": 243039715,
        "sender_full_name": "simulacrum",
        "timestamp": 1623945157
    },
    {
        "content": "<p>I don't have the patience to do that for the not actually relevant crates right this moment</p>",
        "id": 243039757,
        "sender_full_name": "simulacrum",
        "timestamp": 1623945173
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"219696\">XAMPPRocky</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/243017559\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/243017019\">said</a>:</p>\n<blockquote>\n<p>It's my understanding that the files are essentially ignored by rustfmt</p>\n</blockquote>\n<p>Right I'm just thinking of a situation where I push code that is not formatted, and that would be accepted in 1.53, but then would be rejected by 1.54. So this might come up for projects that are always the latest stable immediately, rather than those that pin and upgrade. But just running <code>cargo +nightly fmt</code> seems like a reasonable workaround if that is the case.</p>\n</blockquote>\n<p>bug fixes are covered under the formatting stability guarantee. obviously it's undesirable, but bugs are inevitable and it's allowed (and somewhat common) for a bug fix to result in rustfmt being able to format something it wasn't formatting prior to the fix.</p>\n<p>there's also some fairly long standing issues around mod resolution, and it's not uncommon in cases like this where new mod resolution bugs are introduced within rustfmt after there's impactful changes in rustc_parse and rustc_ast. one of the benefits (hopefully) of moving rustfmt to a subtree is that those types of changes will be made in tandem going forward vs. us having to retroactively try to figure out what changed in rustc and adapt rustfmt accordingly</p>",
        "id": 243043688,
        "sender_full_name": "Caleb Cartwright",
        "timestamp": 1623946700
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/243014693\">said</a>:</p>\n<blockquote>\n<p>also, this release is making me worried... or well, the past couple of releases</p>\n</blockquote>\n<p>is this specifically related to rustfmt or just in general? if the former i'd find it helpful if you could share some details with me at some point. i don't personally feel like our rate of bugs has really changed all that much, so more info would be most helpful</p>",
        "id": 243043958,
        "sender_full_name": "Caleb Cartwright",
        "timestamp": 1623946819
    },
    {
        "content": "<p>I think that was a general concern -- we've had a few things coming in last-minute</p>",
        "id": 243044319,
        "sender_full_name": "cuviper",
        "timestamp": 1623946991
    },
    {
        "content": "<p>yeah <span class=\"user-mention\" data-user-id=\"320317\">@Caleb Cartwright</span> it was not meant for rustfmt!</p>",
        "id": 243044649,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623947143
    },
    {
        "content": "<p>we just had a bunch of last-minute stuff for 1.53 and especially 1.52</p>",
        "id": 243044722,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623947165
    },
    {
        "content": "<p>gotcha, that makes sense thanks!</p>",
        "id": 243044744,
        "sender_full_name": "Caleb Cartwright",
        "timestamp": 1623947177
    },
    {
        "content": "<p>maybe our \"pre-release testing\" blog posts could also remind people to try the next beta?</p>",
        "id": 243044988,
        "sender_full_name": "cuviper",
        "timestamp": 1623947292
    },
    {
        "content": "<p>\"we're about to release this, but please also test for the future...\"</p>",
        "id": 243045016,
        "sender_full_name": "cuviper",
        "timestamp": 1623947309
    },
    {
        "content": "<p>I think we'd want to shuffle schedules around to do that or something like it - we don't usually have a beta by the prerelease post</p>",
        "id": 243045153,
        "sender_full_name": "simulacrum",
        "timestamp": 1623947383
    },
    {
        "content": "<p>if that shuffling is feasible, I think it would be helpful</p>",
        "id": 243045322,
        "sender_full_name": "cuviper",
        "timestamp": 1623947441
    },
    {
        "content": "<p>a thing we could do is moving everything a week before the release</p>",
        "id": 243045353,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623947456
    },
    {
        "content": "<p>so that we have a full week of pre-release testing (and the time to address it)</p>",
        "id": 243045384,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1623947468
    },
    {
        "content": "<p>we could also ask for beta feedback separately, but I don't want to cause fatigue</p>",
        "id": 243045385,
        "sender_full_name": "cuviper",
        "timestamp": 1623947468
    },
    {
        "content": "<p>should the relnotes be modified to explicitly note that RUSTC_FORCE_INCREMENTAL is still necessary to get incr-comp ?</p>",
        "id": 243045635,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623947570
    },
    {
        "content": "<p>on the one hand it doesn’t feel great to draw attention to the matter. on the other hand, not mentioning it at all is probably confusing to people who have been following the blog entries for 1.52.0 and 1.52.1</p>",
        "id": 243045755,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623947637
    },
    {
        "content": "<p>I have no feeling either way, seems fine to include to me. I can mention that the incr-comp was one of things someone asked about at work when talking about the new release, so anecdotally there’s definitely some people wondering.</p>",
        "id": 243046130,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623947810
    },
    {
        "content": "<p>Random inexperienced drive-by commenter here: it feels to me like it should be mentioned. The current behavior is a confusing exception to how a core part of the compilation process works. If incremental compilation is broken, which it currently is, that should be as visible as possible.</p>",
        "id": 243046138,
        "sender_full_name": "inquisitivecrystal",
        "timestamp": 1623947815
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E53.20release/near/243045353\">said</a>:</p>\n<blockquote>\n<p>a thing we could do is moving everything a week before the release</p>\n</blockquote>\n<p>I think this is the right approach for the future. A week is pretty substantial compared to a few days because it will give time for both professionals during the weekday and hobbyists during the weekend to test the new release. It also gives us more runway to address any issues that come up in the pre-release.</p>",
        "id": 243046555,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1623947994
    },
    {
        "content": "<p>I’ll make a PR against the blog post</p>",
        "id": 243046948,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623948171
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/blog.rust-lang.org/pull/854\">https://github.com/rust-lang/blog.rust-lang.org/pull/854</a></p>",
        "id": 243049211,
        "sender_full_name": "pnkfelix",
        "timestamp": 1623948969
    },
    {
        "content": "<p>ok, going to go ahead and actually branch beta and such now</p>",
        "id": 243066132,
        "sender_full_name": "simulacrum",
        "timestamp": 1623956001
    },
    {
        "content": "<p>branched, working on the stage0.txt changes...</p>",
        "id": 243066887,
        "sender_full_name": "simulacrum",
        "timestamp": 1623956375
    }
]
[
    {
        "content": "<p>We currently ship a rust- tarball/pkg/msi installer, which contains a variety of pieces:</p>\n<ul>\n<li>rustc</li>\n<li>std</li>\n<li>mingw (on mingw)</li>\n<li>rust-docs</li>\n<li>rust-demangler</li>\n<li>cargo</li>\n<li>rls</li>\n<li>rust-analyzer</li>\n<li>llvm-components</li>\n<li>clippy</li>\n<li>miri</li>\n<li>analysis</li>\n</ul>\n<p>This component means that when we're trying to split up builders to reduce CI times (for example), we need to be careful as splitting any of these off means they won't get built and this component will stop including them. My sense is that this component is likely not very much used (it's not used at all by rustup, for example), and maybe it's worth considering either streamlining it by dropping tooling or entirely dropping this in favor of users using individual installers and/or rustup.</p>\n<p>At minimum, I think we should consider dropping unstable and/or nightly-only components from this (e.g., llvm-components, rust-analyzer, miri)</p>",
        "id": 271843943,
        "sender_full_name": "simulacrum",
        "timestamp": 1644853424
    },
    {
        "content": "<p>(It would also help clean up rustbuild a little since the whole extended builds thing causes a lot of trailing throughout the code)</p>",
        "id": 271844141,
        "sender_full_name": "simulacrum",
        "timestamp": 1644853450
    },
    {
        "content": "<p>For some vague sense of usage stats, it looks like in the last 30 days the extended/combined component for x86_64-unknown-linux-gnu was downloaded ~100k times, and just the rustc- component was downloaded ~800k times. So the usage is definitely there for at least the linux one (in the small amount of stats we have, no other platform features, so presumably linux is dominant here).</p>\n<p>(rustup was downloaded 2.1 million times, for a sense of comparison to presumably other platforms usage).</p>",
        "id": 271845342,
        "sender_full_name": "simulacrum",
        "timestamp": 1644853879
    },
    {
        "content": "<p>If we even dropped it from macOS and windows, that would already likely help speed up the current set of slowest CI builders, fwiw.</p>",
        "id": 271845491,
        "sender_full_name": "simulacrum",
        "timestamp": 1644853908
    },
    {
        "content": "<p>Do you have stats on the <code>pkg</code> and <code>msi</code> files?</p>",
        "id": 271845650,
        "sender_full_name": "Eric Huss",
        "timestamp": 1644853948
    },
    {
        "content": "<p>the stats I'm looking at are cloudfront's popular objects report, so those are used less, but I don't think we can get more detailed in terms of how much.</p>",
        "id": 271845804,
        "sender_full_name": "simulacrum",
        "timestamp": 1644854010
    },
    {
        "content": "<p>I'm surprised they get downloaded 100k times</p>",
        "id": 271846064,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1644854105
    },
    {
        "content": "<p>Some sense of how much other platforms might be getting used:</p>\n<ul>\n<li>rust-std-1.58.1-x86_64-apple-darwin.tar.xz was downloaded 100k times (top downloads on any apple component)</li>\n<li>rust-std-1.58.1-x86_64-pc-windows-msvc.tar.xz was downloaded ~97k times (top downloads on any windows component)</li>\n</ul>",
        "id": 271846272,
        "sender_full_name": "simulacrum",
        "timestamp": 1644854180
    },
    {
        "content": "<p>I use the combined one for rustc+rust-std+cargo, as it's smaller than the separate packages. But even that is just for bootstrapping \"backup\" if the distro base fails for some reason.</p>",
        "id": 271846345,
        "sender_full_name": "cuviper",
        "timestamp": 1644854207
    },
    {
        "content": "<p>I'm not quite sure how to explain rust-std getting downloaded that much more often than rustc- -- maybe the stats are just not very accurate. It doesn't seem likely people are cross-compiling to apple or pc-windows...</p>",
        "id": 271846495,
        "sender_full_name": "simulacrum",
        "timestamp": 1644854277
    },
    {
        "content": "<p>(In case we were wondering, no one is using beta: 2M hits for channel-rust-stable.toml, 110k for channel-rust-beta.toml, and ~650k for channel-rust-nightly.toml)</p>",
        "id": 271846811,
        "sender_full_name": "simulacrum",
        "timestamp": 1644854403
    },
    {
        "content": "<p>Rustup uses beta in CI<br>\n(as do I personally)</p>",
        "id": 271847402,
        "sender_full_name": "Daniel Silverstone",
        "timestamp": 1644854543
    },
    {
        "content": "<p>Sure, I mean, there are /some/ users, but relatively little comparatively.</p>",
        "id": 271847575,
        "sender_full_name": "simulacrum",
        "timestamp": 1644854606
    },
    {
        "content": "<p>Though I suppose direct comparison is hard -- at least to nightly, since that ships much more often</p>",
        "id": 271848147,
        "sender_full_name": "simulacrum",
        "timestamp": 1644854840
    },
    {
        "content": "<p>I'm not surprised it gets used on Windows and Mac. I'm surprised it gets used much on Linux.</p>",
        "id": 271916360,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1644890045
    }
]
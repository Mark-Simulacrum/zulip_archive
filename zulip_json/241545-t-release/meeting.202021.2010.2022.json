[
    {
        "content": "<p>Meeting in ~30 minutes</p>\n<ul>\n<li>Release retrospective</li>\n<li>1.57 bootstrap problems<ul>\n<li>Should we be bumping our minimum LLVM direct to 12? LLVM 10 &amp; 11 have miscompilations in libcore's test suite, for example.</li>\n</ul>\n</li>\n<li>1.57 crater startup volunteer</li>\n</ul>",
        "id": 258724258,
        "sender_full_name": "simulacrum",
        "timestamp": 1634914942
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"2907\">@T-release</span> meeting!</p>",
        "id": 258728165,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916616
    },
    {
        "content": "<p>(wave all the things!)</p>",
        "id": 258728284,
        "sender_full_name": "cuviper",
        "timestamp": 1634916667
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> want to kick us off with anything that went wrong / well / neutral during release?</p>",
        "id": 258728299,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916673
    },
    {
        "content": "<p>sure</p>",
        "id": 258728328,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916687
    },
    {
        "content": "<p>the great thing is that both the stable and beta PRs went on the first try without the need of ad-hoc fixes! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 258728434,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916728
    },
    {
        "content": "<p>the work we did a couple cycles ago to prevent ad-hoc fixes from being needed is really paying off</p>",
        "id": 258728508,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916763
    },
    {
        "content": "<p>regarding the bootstrap update... I wasn't able to followup with that PR as I got busy+tired, but it seemed painful :(</p>",
        "id": 258728614,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916813
    },
    {
        "content": "<p>/end</p>",
        "id": 258728619,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916815
    },
    {
        "content": "<p>alright -- I didn't note anything in particular from an external perspective, though there has been a bunch of ICE reports with cargo fix around the edition</p>",
        "id": 258728679,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916841
    },
    {
        "content": "<p>I'm not sure how widespread it is in practice but there was probably ~5-10 issues filed</p>",
        "id": 258728745,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916854
    },
    {
        "content": "<p>only in fix though, right?</p>",
        "id": 258728766,
        "sender_full_name": "cuviper",
        "timestamp": 1634916863
    },
    {
        "content": "<p>yeah, I believe so</p>",
        "id": 258728775,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916868
    },
    {
        "content": "<p>which is bad, but not critical</p>",
        "id": 258728790,
        "sender_full_name": "cuviper",
        "timestamp": 1634916874
    },
    {
        "content": "<p>we may want to consider a point release, but it'll depend on how quickly we have a fix for the ice and whether it's easily backportable etc -- we can talk about that in a week or so</p>",
        "id": 258728833,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916899
    },
    {
        "content": "<p>sure</p>",
        "id": 258728869,
        "sender_full_name": "cuviper",
        "timestamp": 1634916920
    },
    {
        "content": "<p>yeah let's check in on that next week</p>",
        "id": 258728886,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916927
    },
    {
        "content": "<p>alright, moving on to 1.57 bootstrap</p>",
        "id": 258728909,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916941
    },
    {
        "content": "<p>I wouldn't expect the point release to go out before november anyway</p>",
        "id": 258728915,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634916946
    },
    {
        "content": "<p>mhm</p>",
        "id": 258728923,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916950
    },
    {
        "content": "<p>as Pietro mentioned there's been some problems with the bootstrap bump</p>",
        "id": 258728990,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916966
    },
    {
        "content": "<p><a class=\"stream-topic\" data-stream-id=\"241545\" href=\"/#narrow/stream/241545-t-release/topic/1.2E57.20bootstrap\">#t-release &gt; 1.57 bootstrap</a> has some discussion</p>",
        "id": 258729002,
        "sender_full_name": "simulacrum",
        "timestamp": 1634916972
    },
    {
        "content": "<p>but largely I think for <em>this</em> meeting I wanted to see what folks thought about our llvm 10 (soon to be 11) baseline guarantee being actually genuine</p>",
        "id": 258729080,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917010
    },
    {
        "content": "<p>depends what you mean by genuine</p>",
        "id": 258729139,
        "sender_full_name": "cuviper",
        "timestamp": 1634917039
    },
    {
        "content": "<p>well, basically, we've uncovered a miscompilation and it seems unlikely that we'll see upstream fixes (or patch releases). Maybe we just are fine with that (there's miscompilations not too uncommonly...) but I wanted to raise it</p>",
        "id": 258729273,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917090
    },
    {
        "content": "<p>I think we want a best effort, which means we can compile with those versions, and we produce IR that <em>should</em> work, but we can't be responsible for bugs in those external versions.</p>",
        "id": 258729282,
        "sender_full_name": "cuviper",
        "timestamp": 1634917092
    },
    {
        "content": "<p>okay</p>",
        "id": 258729303,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917098
    },
    {
        "content": "<p>maybe we can work around them, in some cases, but it's not always possible</p>",
        "id": 258729324,
        "sender_full_name": "cuviper",
        "timestamp": 1634917107
    },
    {
        "content": "<p>hmm, \"our own tests are failing with that version\" is not great for a guarantee</p>",
        "id": 258729350,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634917121
    },
    {
        "content": "<p>I would like it if we had build tests for all supported versions, not just min and current</p>",
        "id": 258729463,
        "sender_full_name": "cuviper",
        "timestamp": 1634917178
    },
    {
        "content": "<p>tests are a little fuzzier, but useful for initial PR CI</p>",
        "id": 258729493,
        "sender_full_name": "cuviper",
        "timestamp": 1634917196
    },
    {
        "content": "<p>hm</p>",
        "id": 258729605,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917236
    },
    {
        "content": "<p>(er, by \"build tests\" I mean just run the build with that version)</p>",
        "id": 258729621,
        "sender_full_name": "cuviper",
        "timestamp": 1634917245
    },
    {
        "content": "<p>I think adding an <code>llvm-NN</code> for each supported version is not that bad</p>",
        "id": 258729629,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634917247
    },
    {
        "content": "<p>a single builder seems OK, yeah</p>",
        "id": 258729653,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917257
    },
    {
        "content": "<p>For the time being, we'll just workaround the miscompilation (and resulting test failure), I suppose</p>",
        "id": 258729711,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917292
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/90153\">https://github.com/rust-lang/rust/issues/90153</a> is the issue fwiw</p>",
        "id": 258729739,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917303
    },
    {
        "content": "<p>I'm willing to also talk about what our minimum policy should be... it's rather ad hoc right now</p>",
        "id": 258729816,
        "sender_full_name": "cuviper",
        "timestamp": 1634917324
    },
    {
        "content": "<p>hmm, I'm wondering, are we comfortable supporting LLVM 10/11 if we know there is an unfixed miscompilation there?</p>",
        "id": 258729852,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634917346
    },
    {
        "content": "<p>I fear it's the nature of things that old versions have bugs -- just a question of how serious</p>",
        "id": 258729946,
        "sender_full_name": "cuviper",
        "timestamp": 1634917387
    },
    {
        "content": "<p>(the current version surely has bugs too)</p>",
        "id": 258729978,
        "sender_full_name": "cuviper",
        "timestamp": 1634917402
    },
    {
        "content": "<p>Yeah, I'm less worried about bugs, but I think we should write down somewhere perhaps that non-current LLVM versions are only supported in a best-effort fashion, or something like that?</p>",
        "id": 258730018,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917423
    },
    {
        "content": "<p>sure</p>",
        "id": 258730115,
        "sender_full_name": "cuviper",
        "timestamp": 1634917454
    },
    {
        "content": "<p>OTOH, it's not really that llvm of any version is guaranteed to not have bugs, as <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> notes, so maybe this isn't so different :)</p>",
        "id": 258730184,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917486
    },
    {
        "content": "<p>FWIW, I would actually be OK with bumping to LLVM 12 now -- my own needs are for Fedora, and F33 will be EOL before 1.58 comes out</p>",
        "id": 258730278,
        "sender_full_name": "cuviper",
        "timestamp": 1634917525
    },
    {
        "content": "<p>I think not many other distros rebase rust so frequently in stable branches</p>",
        "id": 258730312,
        "sender_full_name": "cuviper",
        "timestamp": 1634917544
    },
    {
        "content": "<p>Maybe something to consider. <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> would you be up for starting that conversation (maybe on a separate issue or the PR proposing bumping to llvm 11) and cc'ing wg-llvm on it?</p>",
        "id": 258730394,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917571
    },
    {
        "content": "<p>sure</p>",
        "id": 258730458,
        "sender_full_name": "cuviper",
        "timestamp": 1634917607
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span>.</p>",
        "id": 258730467,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634917611
    },
    {
        "content": "<p>Alright</p>",
        "id": 258730482,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917618
    },
    {
        "content": "<p>The other thing I wanted to touch on -- both this miscompilation and the other debug-assert issue were brought on by a change in behavior for Cargo, where the release profile now applies to tests as well</p>",
        "id": 258730554,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917654
    },
    {
        "content": "<p>(which enabled debug-asserts and CGU=1 in our case)</p>",
        "id": 258730570,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917664
    },
    {
        "content": "<p>We'll definitely have a release note for this, but I think there's probably no nice way to roll this out (e.g., warnings would be painful I suspect)</p>",
        "id": 258730681,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917710
    },
    {
        "content": "<p>mostly just a heads up rather than anything else, maybe someone will have an idea in the next 6 weeks :)</p>",
        "id": 258730724,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917733
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-topic</p>",
        "id": 258730746,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917745
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 258730751,
        "sender_full_name": "triagebot",
        "timestamp": 1634917746
    },
    {
        "content": "<p>is there a problem with that besides \"may expose codegen bugs\"?</p>",
        "id": 258730789,
        "sender_full_name": "cuviper",
        "timestamp": 1634917767
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> I think debug-asserts for example are not really codegen bugs</p>",
        "id": 258730840,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917796
    },
    {
        "content": "<p>hmm... ok, we can consider more later</p>",
        "id": 258730923,
        "sender_full_name": "cuviper",
        "timestamp": 1634917819
    },
    {
        "content": "<p>yeah</p>",
        "id": 258730934,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917824
    },
    {
        "content": "<p>alright</p>",
        "id": 258730939,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917826
    },
    {
        "content": "<p>last item I had for today -- is someone up for filing a 1.57 crater issue and kicking that off?</p>",
        "id": 258730955,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917840
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/88827\">https://github.com/rust-lang/rust/issues/88827</a> is the one for 1.56, should be fairly easy to copy from there</p>",
        "id": 258731027,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917872
    },
    {
        "content": "<p>won't have time unfortunately due to $things</p>",
        "id": 258731217,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1634917957
    },
    {
        "content": "<p>alright</p>",
        "id": 258731272,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917985
    },
    {
        "content": "<p>well, I'll try to find the time then</p>",
        "id": 258731293,
        "sender_full_name": "simulacrum",
        "timestamp": 1634917993
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-meeting</p>",
        "id": 258731324,
        "sender_full_name": "simulacrum",
        "timestamp": 1634918008
    },
    {
        "content": "<p>Does anyone have something to bring up?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if you're ready to end the meeting.</p>",
        "id": 258731327,
        "sender_full_name": "triagebot",
        "timestamp": 1634918008
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> thanks all!</p>",
        "id": 258731426,
        "sender_full_name": "simulacrum",
        "timestamp": 1634918044
    }
]
[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> ok, so I went through the open regressions for 1.47:</p>\n<ul>\n<li><a href=\"https://github.com/rust-lang/rust/issues/75982\">#75982</a>: error -&gt; ICE, not a big deal</li>\n<li><a href=\"https://github.com/rust-lang/rust/issues/76466\">#76466</a>: lld is broken on windows 32bit, which means no wasm there</li>\n<li><a href=\"https://github.com/rust-lang/rust/issues/76480\">#76480</a>: macro hygiene -- really not happy about this, but I think the compiler team already expressed their concerns on this</li>\n<li><a href=\"https://github.com/rust-lang/rust/issues/76736\">#76736</a>: internal rustc docs error, not sure why it's marked as regression at all</li>\n<li><a href=\"https://github.com/rust-lang/rust/issues/76980\">#76980</a>: ugh</li>\n</ul>",
        "id": 212238060,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840066
    },
    {
        "content": "<p>three big regressions... this is not great</p>",
        "id": 212238144,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840224
    },
    {
        "content": "<p>Yeah</p>",
        "id": 212238365,
        "sender_full_name": "simulacrum",
        "timestamp": 1601840535
    },
    {
        "content": "<p>I thought the lld thing was getting fixed?</p>",
        "id": 212238370,
        "sender_full_name": "simulacrum",
        "timestamp": 1601840552
    },
    {
        "content": "<p>That might be a release blocker tbh</p>",
        "id": 212238371,
        "sender_full_name": "simulacrum",
        "timestamp": 1601840559
    },
    {
        "content": "<p>I really can't help without windows hardware though :/</p>",
        "id": 212238377,
        "sender_full_name": "simulacrum",
        "timestamp": 1601840578
    },
    {
        "content": "<p>I can try look more into the hang thing</p>",
        "id": 212238385,
        "sender_full_name": "simulacrum",
        "timestamp": 1601840594
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> for lld, the last update was <a href=\"https://github.com/rust-lang/rust/issues/76466#issuecomment-702535214\">https://github.com/rust-lang/rust/issues/76466#issuecomment-702535214</a></p>",
        "id": 212238451,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840696
    },
    {
        "content": "<p>I have a windows disk on my computer, I guess I could try reproducing there tomorrow</p>",
        "id": 212238535,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840817
    },
    {
        "content": "<p>wait</p>",
        "id": 212238608,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840888
    },
    {
        "content": "<p>I don't have 32bit windows</p>",
        "id": 212238609,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840892
    },
    {
        "content": "<p>right</p>",
        "id": 212238611,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601840893
    },
    {
        "content": "<p>Does it work in wine32?<br>\n(not sure if msvc tools will install)</p>",
        "id": 212238639,
        "sender_full_name": "cuviper",
        "timestamp": 1601840969
    },
    {
        "content": "<p>seems unlikely</p>",
        "id": 212238706,
        "sender_full_name": "simulacrum",
        "timestamp": 1601841027
    },
    {
        "content": "<p>Maybe I can blindly apply the logic <span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span> suggested...</p>",
        "id": 212238709,
        "sender_full_name": "simulacrum",
        "timestamp": 1601841042
    },
    {
        "content": "<p>hmm, eddy's proposed change seems trivial enough</p>",
        "id": 212238711,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601841046
    },
    {
        "content": "<p>yeah, and do a try build to get the original poster to check if it works</p>",
        "id": 212238716,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601841054
    },
    {
        "content": "<p>I can investigate that after the hang, I like <span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span>'s idea of clashing symbols</p>",
        "id": 212238722,
        "sender_full_name": "simulacrum",
        "timestamp": 1601841075
    },
    {
        "content": "<p>This topic was moved by <span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> to <a class=\"stream-topic\" data-stream-id=\"131828\" href=\"/#narrow/stream/131828-t-compiler/topic/deepbinding.20proc.20macros\">#t-compiler &gt; deepbinding proc macros</a></p>",
        "id": 212241090,
        "sender_full_name": "Notification Bot",
        "timestamp": 1601844400
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> fwiw I think the hang is unlikely to get fixed anytime soon, but I also think it's not really a beta regression</p>",
        "id": 212243666,
        "sender_full_name": "simulacrum",
        "timestamp": 1601848951
    },
    {
        "content": "<p>in the sense that likely there are programs that failed similarly before</p>",
        "id": 212243672,
        "sender_full_name": "simulacrum",
        "timestamp": 1601848978
    },
    {
        "content": "<p>there's also <a href=\"https://github.com/rust-lang/rust/pull/77549\">https://github.com/rust-lang/rust/pull/77549</a> which is apparently a miscompile on beta but I've not looked in detail</p>",
        "id": 212243801,
        "sender_full_name": "simulacrum",
        "timestamp": 1601849217
    },
    {
        "content": "<p>posted an ask on lld <a href=\"https://github.com/rust-lang/rust/issues/76466#issuecomment-703323202\">https://github.com/rust-lang/rust/issues/76466#issuecomment-703323202</a>  for someone to try and reproduce with the fix</p>",
        "id": 212243906,
        "sender_full_name": "simulacrum",
        "timestamp": 1601849473
    },
    {
        "content": "<p>Will not be fixed:</p>\n<ul>\n<li><a href=\"https://github.com/rust-lang/rust/issues/75982\">#75982</a>: error -&gt; ICE -- fine</li>\n<li>\n<p><a href=\"https://github.com/rust-lang/rust/issues/76480\">#76480</a>: macro hygiene -- seems painful, but also unavoidable. proc macros<br>\n  relying on hygiene is just unstable today I guess (in the \"de facto\" sense)</p>\n</li>\n<li>\n<p><a href=\"https://github.com/rust-lang/rust/issues/76980\">#76980</a>: hang on x86_64-unknown-linux-gnu -- needs more investigation, but<br>\n  current theory is this is due to conflicting C++ STL being used, and is not<br>\n  really easily fixable</p>\n</li>\n</ul>\n<p>Hopefully fixable, but no confirmation yet:</p>\n<ul>\n<li><a href=\"https://github.com/rust-lang/rust/issues/76466\">#76466</a>: lld is broken on windows 32bit, which means no wasm there</li>\n</ul>",
        "id": 212244071,
        "sender_full_name": "simulacrum",
        "timestamp": 1601849826
    },
    {
        "content": "<p>that's my current summary</p>",
        "id": 212244072,
        "sender_full_name": "simulacrum",
        "timestamp": 1601849832
    },
    {
        "content": "<p>the macro hygiene change is documented in release notes, but the rest are <em>not</em></p>",
        "id": 212244128,
        "sender_full_name": "simulacrum",
        "timestamp": 1601849946
    },
    {
        "content": "<p>we may want to change that.</p>",
        "id": 212244129,
        "sender_full_name": "simulacrum",
        "timestamp": 1601849949
    },
    {
        "content": "<p>for what it's worth I just hit a compiler crash yesterday (assertion failure in LLVM), which I also bisected to the LLVM 11 change</p>",
        "id": 212248062,
        "sender_full_name": "tmandry",
        "timestamp": 1601856542
    },
    {
        "content": "<p>I can open an issue but since it's in Fuchsia, it's hard for others to reproduce</p>",
        "id": 212248076,
        "sender_full_name": "tmandry",
        "timestamp": 1601856593
    },
    {
        "content": "<p>I've been trying to get an IR reproducer to file upstream</p>",
        "id": 212248124,
        "sender_full_name": "tmandry",
        "timestamp": 1601856618
    },
    {
        "content": "<p>I think we're committed to the LLVM upgrade at this point</p>",
        "id": 212248719,
        "sender_full_name": "simulacrum",
        "timestamp": 1601857759
    },
    {
        "content": "<p>Thought so. I'll work on getting a fix upstream and see if we can backport it for the next release.</p>",
        "id": 212248918,
        "sender_full_name": "tmandry",
        "timestamp": 1601858077
    },
    {
        "content": "<p>I'd probably be willing to do a point release for an llvm bump if we can get a small patch fwiw</p>",
        "id": 212249076,
        "sender_full_name": "simulacrum",
        "timestamp": 1601858342
    },
    {
        "content": "<p>Though the release is not huge, and I have wondered if we're pushing too hard for 6 week cycle - it does feel like lately that has led to some last minute crunching</p>",
        "id": 212249091,
        "sender_full_name": "simulacrum",
        "timestamp": 1601858380
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/77543\">https://github.com/rust-lang/rust/pull/77543</a> sounds like it is a confirmed fix for the lld bug, so if someone is willing to r+ that I will include it in stable build as well</p>",
        "id": 212249147,
        "sender_full_name": "simulacrum",
        "timestamp": 1601858415
    },
    {
        "content": "<p>Gotta back out the ci change though</p>",
        "id": 212263564,
        "sender_full_name": "cuviper",
        "timestamp": 1601880022
    },
    {
        "content": "<p>yeah just got eddyb to take a look</p>",
        "id": 212289482,
        "sender_full_name": "simulacrum",
        "timestamp": 1601899343
    },
    {
        "content": "<p>promoting beta -&gt; stable</p>",
        "id": 212321117,
        "sender_full_name": "simulacrum",
        "timestamp": 1601914027
    },
    {
        "content": "<p>stable PR is up: <a href=\"https://github.com/rust-lang/rust/pull/77577\">https://github.com/rust-lang/rust/pull/77577</a></p>",
        "id": 212322824,
        "sender_full_name": "simulacrum",
        "timestamp": 1601914764
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> so we're releasing with the linux hang and that llvm crash <span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span>  saw in fuchsia?</p>",
        "id": 212325612,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601916148
    },
    {
        "content": "<p>it's not as bad as a release with the lld bug in it too</p>",
        "id": 212325632,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601916163
    },
    {
        "content": "<p>but it makes me worried anyway</p>",
        "id": 212325637,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601916168
    },
    {
        "content": "<p>that's the current expectation</p>",
        "id": 212325913,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916322
    },
    {
        "content": "<p>I am still investigating linux hang</p>",
        "id": 212325924,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916328
    },
    {
        "content": "<p>I don't know about the fuchsia crash, but it's possible it's been fixed since <span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> saw it too</p>",
        "id": 212325949,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916345
    },
    {
        "content": "<p>we had an llvm backport over the weekend</p>",
        "id": 212326031,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916379
    },
    {
        "content": "<p>I expect there's some more llvm bugs hiding in the weeds, fwiw, but I also think giving more time is unlikely to help (I mean we'd find them but not like llvm 10 is bugless either)</p>",
        "id": 212326105,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916429
    },
    {
        "content": "<p>the hang I expect affects almost no one</p>",
        "id": 212326129,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916446
    },
    {
        "content": "<p>hmm</p>",
        "id": 212326487,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601916642
    },
    {
        "content": "<p>I guess</p>",
        "id": 212326514,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601916665
    },
    {
        "content": "<p>I don't like it, but I'm not sure that's worth being the first release we delay</p>",
        "id": 212326542,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601916680
    },
    {
        "content": "<p>Yeah as I mentioned earlier I think that maybe 6 weeks is too short for these things to be discovered and fixed, not very clear</p>",
        "id": 212326603,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916712
    },
    {
        "content": "<p>not like we have developers to assign to this either :/</p>",
        "id": 212326625,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916719
    },
    {
        "content": "<p>is there a way to only upgrade LLVM on nightly? not sure if that makes sense to ask</p>",
        "id": 212326716,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1601916748
    },
    {
        "content": "<p>I mean we can revert llvm from beta, sure</p>",
        "id": 212326738,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916761
    },
    {
        "content": "<p>but historically at least I have not felt that we've discovered llvm bugs in nightly all that often</p>",
        "id": 212326757,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916772
    },
    {
        "content": "<p>(not sure whether smaller user base or whatever is responsible)</p>",
        "id": 212326782,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916785
    },
    {
        "content": "<p>it is also true that usually they take a long time to fix, often more than 6 weeks</p>",
        "id": 212326810,
        "sender_full_name": "simulacrum",
        "timestamp": 1601916800
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> wdyt about kicking off dev-static promotion with release notes as-is, and we'll push up an update to stable branch or master or w/e later this week with the linux thing</p>",
        "id": 212342075,
        "sender_full_name": "simulacrum",
        "timestamp": 1601924253
    },
    {
        "content": "<p>I'm still hopeful to have a better explanation than just \"Some crates\"</p>",
        "id": 212342090,
        "sender_full_name": "simulacrum",
        "timestamp": 1601924262
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> I'd have a generic line in place for a more detailed one</p>",
        "id": 212342172,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601924285
    },
    {
        "content": "<p>(left a suggestion, dunno if you saw it)</p>",
        "id": 212342193,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601924293
    },
    {
        "content": "<p>yeah :/</p>",
        "id": 212342589,
        "sender_full_name": "simulacrum",
        "timestamp": 1601924476
    },
    {
        "content": "<p>I guess if we link to the issue it's not the worst thing</p>",
        "id": 212342663,
        "sender_full_name": "simulacrum",
        "timestamp": 1601924517
    },
    {
        "content": "<p>r=me with that change</p>",
        "id": 212344514,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601925432
    },
    {
        "content": "<p>ok will do so in a bit</p>",
        "id": 212345504,
        "sender_full_name": "simulacrum",
        "timestamp": 1601925965
    },
    {
        "content": "<p>the issue for us was that this time, there were a lot of other breakages to fix before we got to LLVM</p>",
        "id": 212366771,
        "sender_full_name": "tmandry",
        "timestamp": 1601938821
    },
    {
        "content": "<p>had to fix hygiene stuff by upgrading crates, fix a bunch of mutable references to const items, and the type_length_limit / compile time slowdown in <a href=\"https://github.com/rust-lang/rust/issues/54540\">#54540</a></p>",
        "id": 212366808,
        "sender_full_name": "tmandry",
        "timestamp": 1601938866
    },
    {
        "content": "<p>and <code>#![deny(missing_docs)]</code> applying to pub extern items now, and linked-hash-map causing panics due to UB from <code>mem::uninitialized</code></p>",
        "id": 212367122,
        "sender_full_name": "tmandry",
        "timestamp": 1601939059
    },
    {
        "content": "<p>it's sort of death by a thousand cuts, plus <a href=\"https://github.com/rust-lang/rust/issues/54540\">#54540</a> taking quite awhile to resolve</p>",
        "id": 212367257,
        "sender_full_name": "tmandry",
        "timestamp": 1601939146
    },
    {
        "content": "<p>we are improving our processes to find breakages like this sooner, but they mask each other</p>",
        "id": 212367339,
        "sender_full_name": "tmandry",
        "timestamp": 1601939196
    },
    {
        "content": "<p>I think this may be one reason to discuss lengthening our release cycles, fwiw. Not sure yet.</p>",
        "id": 212419324,
        "sender_full_name": "simulacrum",
        "timestamp": 1601987109
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> the hang has been pretty well diagnosed, at least, as likely breaking proc macros with C++ code which is dynamically linked to the C++ standard library</p>",
        "id": 212419378,
        "sender_full_name": "simulacrum",
        "timestamp": 1601987143
    },
    {
        "content": "<p>I am not sure if we want to consider that worthwhile to delay the release for, but there seems to be at least several instances of it</p>",
        "id": 212419450,
        "sender_full_name": "simulacrum",
        "timestamp": 1601987164
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/77094\">https://github.com/rust-lang/rust/issues/77094</a></p>",
        "id": 212419458,
        "sender_full_name": "simulacrum",
        "timestamp": 1601987169
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"2907\">@T-release</span> ^</p>",
        "id": 212422265,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601988650
    },
    {
        "content": "<p>I feel like this is a really bad bug</p>",
        "id": 212422741,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601988886
    },
    {
        "content": "<p>but it'd also be the first time we delayed a release</p>",
        "id": 212422767,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601988895
    },
    {
        "content": "<p>to be clear, it is my impression (though I've not actually been able to build a test case, I've also not tried) that this must be pre-existing</p>",
        "id": 212422796,
        "sender_full_name": "simulacrum",
        "timestamp": 1601988912
    },
    {
        "content": "<p>like we didn't just start statically linking c++ std</p>",
        "id": 212422994,
        "sender_full_name": "simulacrum",
        "timestamp": 1601988992
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I'm not caught up on email yet (am I ever) but I think I don't see a testing announcement yet?</p>",
        "id": 212423276,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989116
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> no, was I supposed to do so?</p>",
        "id": 212423309,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601989133
    },
    {
        "content": "<p>no no</p>",
        "id": 212423316,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989136
    },
    {
        "content": "<p>just wanted to not duplicate it</p>",
        "id": 212423321,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989139
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 212423338,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601989145
    },
    {
        "content": "<p>the question in my mind is whether to indicate our uncertainty around this bug</p>",
        "id": 212423368,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989159
    },
    {
        "content": "<p>tbh I don't think we can fix it, or at least I don't know how</p>",
        "id": 212423381,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989169
    },
    {
        "content": "<p>DEEPBIND is the \"right idea\" but seems to not work in practice</p>",
        "id": 212423541,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989241
    },
    {
        "content": "<p>I feel like the scope of breakage is unclear, and we should know that before hitting the fire alarm. Would someone be able to summarise? Just looking at that issue I’m not sure how it affects 1.47.0’s release, since the issue says it was introduced in 1.46.0 which is already out.</p>",
        "id": 212423562,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1601989253
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"219696\">@XAMPPRocky</span> <a href=\"https://github.com/rust-lang/rust/issues/76980\">https://github.com/rust-lang/rust/issues/76980</a> is the actual issue</p>",
        "id": 212423888,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989402
    },
    {
        "content": "<p>The scope is kinda unclear, but I think I would probably say that any C++ code linked into a proc macro is likely unsound at least</p>",
        "id": 212423919,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989421
    },
    {
        "content": "<p>(it may of course work in practice, but is not guaranteed to do so)</p>",
        "id": 212423954,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989438
    },
    {
        "content": "<p>I think <a href=\"https://github.com/rust-lang/rust/issues/77094\">https://github.com/rust-lang/rust/issues/77094</a> has no evidence (yet) to say whether it's the same problem or not</p>",
        "id": 212424040,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989465
    },
    {
        "content": "<p>it's not impossible though, would just speak to this being stable/stable regression, in which case I think we should go ahead</p>",
        "id": 212424087,
        "sender_full_name": "simulacrum",
        "timestamp": 1601989493
    },
    {
        "content": "<p>prepared a blog post <a href=\"https://github.com/rust-lang/blog.rust-lang.org/pull/703\">https://github.com/rust-lang/blog.rust-lang.org/pull/703</a></p>",
        "id": 212425833,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990337
    },
    {
        "content": "<p>I included a paragraph about the c++ thing</p>",
        "id": 212425845,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990346
    },
    {
        "content": "<p>Well think we should figure out a timeline of when to commit to a decision on the release. I wonder if it would be good to instead of delaying the release, committing to a patch release, and say “hey if you use C++ in proc macros wait for a patch in a couple of weeks”? I have no experience with C++ so I don’t know how common that is.</p>",
        "id": 212425941,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1601990402
    },
    {
        "content": "<p>I don't know how common it is either</p>",
        "id": 212426029,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990447
    },
    {
        "content": "<p>Or what % of such cases was already broken / now broke</p>",
        "id": 212426054,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990465
    },
    {
        "content": "<p>I am hesitant to say \"we'll issue a patch release with a fix\" when we don't have one in mind yet</p>",
        "id": 212426082,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990481
    },
    {
        "content": "<p>has someone pinged eddyb about the issue? they did a lot of the work on the proc macro bridge</p>",
        "id": 212426551,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1601990723
    },
    {
        "content": "<p>I don't think it's a proc macro bridge issue</p>",
        "id": 212426569,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990734
    },
    {
        "content": "<p>like, there's nothing in our code that is leading to this</p>",
        "id": 212426586,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990746
    },
    {
        "content": "<p>or loading, rather</p>",
        "id": 212426596,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1601990747
    },
    {
        "content": "<p>I'll PM them though</p>",
        "id": 212426655,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990763
    },
    {
        "content": "<p>done</p>",
        "id": 212427111,
        "sender_full_name": "simulacrum",
        "timestamp": 1601990965
    },
    {
        "content": "<p>Either way blog post looks good to me, let’s see if that helps shine some light on the issue.</p>",
        "id": 212427331,
        "sender_full_name": "XAMPPRocky",
        "timestamp": 1601991059
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> I can tweet the issue from my personal account, which could hopefully lead some people to look into it</p>",
        "id": 212427444,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601991115
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> seems good</p>",
        "id": 212427530,
        "sender_full_name": "simulacrum",
        "timestamp": 1601991139
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/61539\">https://github.com/rust-lang/rust/issues/61539</a> and <a href=\"https://github.com/rust-lang/rust/issues/60593\">https://github.com/rust-lang/rust/issues/60593</a> are pointed out to me by eddyb</p>",
        "id": 212427561,
        "sender_full_name": "simulacrum",
        "timestamp": 1601991150
    },
    {
        "content": "<p><a href=\"https://twitter.com/pietroalbini/status/1313473376401457156\">https://twitter.com/pietroalbini/status/1313473376401457156</a></p>\n<div class=\"inline-preview-twitter\"><div class=\"twitter-tweet\"><a href=\"https://twitter.com/pietroalbini/status/1313473376401457156\"><img class=\"twitter-avatar\" src=\"https://pbs.twimg.com/profile_images/1041710703487410178/Uv7i_5q1_normal.jpg\"></a><p>There is a regression affecting the upcoming Rust 1.47.0 we're not sure how to address, and we'd love to get it fixed before the release comes out later this week. Any insights on this issue are deeply appreciated: <a href=\"https://t.co/8mpjNWTHjU\">https://github.com/rust-lang/rust/issues/76980</a></p><span>- Pietro Albini (@pietroalbini)</span></div></div>",
        "id": 212428199,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601991445
    },
    {
        "content": "<p>let's see how it goes</p>",
        "id": 212428206,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1601991449
    },
    {
        "content": "<p>there's also <a href=\"https://github.com/rust-lang/rust/pull/74021#issuecomment-704243634\">https://github.com/rust-lang/rust/pull/74021#issuecomment-704243634</a> now, which is a potential artifact rebuild I guess</p>",
        "id": 212428379,
        "sender_full_name": "simulacrum",
        "timestamp": 1601991532
    },
    {
        "content": "<p>I'll ask our libstdc++ maintainers if they have any ideas</p>",
        "id": 212429401,
        "sender_full_name": "cuviper",
        "timestamp": 1601991937
    },
    {
        "content": "<p>But I suspect the answer will be \"don't do that\" (mix dynamic/static)</p>",
        "id": 212429530,
        "sender_full_name": "cuviper",
        "timestamp": 1601991988
    },
    {
        "content": "<p>Okay, so my current thinking on this is that we'll put a note in the release blog post basically saying that \"We are aware of cases where C++ code linked into proc macros regressed in this release\" and point at the issue. I don't think it is known to affect enough people to warrant delaying the release. Hopefully that might also get some eyes on it and HN or whatever suggests a solution...</p>",
        "id": 212453495,
        "sender_full_name": "simulacrum",
        "timestamp": 1602002199
    },
    {
        "content": "<p>With some more discussion on the issue, I think we actually have a fix I am comfortable backporting to stable and removing this regression entirely - we can disable llvm thinlto without a significant performance hit (~3% wall times on larger crates) and get a statically linked LLVM, which seems to avoid the bug at least in my small reproduction.</p>",
        "id": 212508831,
        "sender_full_name": "simulacrum",
        "timestamp": 1602037394
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I would appreciate it if you could prepare a new stable build tomorrow when you wake up, so we can get maximal testing on it, but I will do so tomorrow when I wake up if not.</p>\n<p>I don't want to land this on master because in the immediate future it'll break the LLVM downloads from CI but I'm fairly confident we can get a fix on master relatively quickly.</p>",
        "id": 212508997,
        "sender_full_name": "simulacrum",
        "timestamp": 1602037593
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> I'll do!</p>",
        "id": 212522877,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602055785
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> <a href=\"https://github.com/rust-lang/rust/pull/77642\">https://github.com/rust-lang/rust/pull/77642</a></p>",
        "id": 212524763,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602057160
    },
    {
        "content": "<p>kicked off dev-static promotion</p>",
        "id": 212539176,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602066339
    },
    {
        "content": "<p>promotion is done, will publish the post after lunch <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span></p>",
        "id": 212545119,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602070540
    },
    {
        "content": "<p>merged the blog post, and a call for testing on my twitter</p>",
        "id": 212551863,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602074500
    },
    {
        "content": "<p><a href=\"https://twitter.com/pietroalbini/status/1313821630683123713\">https://twitter.com/pietroalbini/status/1313821630683123713</a></p>\n<div class=\"inline-preview-twitter\"><div class=\"twitter-tweet\"><a href=\"https://twitter.com/pietroalbini/status/1313821630683123713\"><img class=\"twitter-avatar\" src=\"https://pbs.twimg.com/profile_images/1041710703487410178/Uv7i_5q1_normal.jpg\"></a><p>Thanks to everyone who chimed in! We got a fix suitable to be included in 1.47.0! <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span>\n\nSince this is a last minute change we'd love for the community to test it before tomorrow's release. You can find out how to download the pre-release on our blog: <a href=\"https://t.co/eDnY0ToMkj\">https://blog.rust-lang.org/inside-rust/2020/10/07/1.47.0-prerelease-2.html</a> <a href=\"https://t.co/QTAlwv18Mw\">https://twitter.com/pietroalbini/status/1313473376401457156</a></p><span>- Pietro Albini (@pietroalbini)</span></div></div>",
        "id": 212551864,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602074501
    },
    {
        "content": "<p>a downside is that the <code>rustc</code> component got bigger -- <code>librustc_driver</code> has its static LLVM, but the package still contains <code>libLLVM</code> too</p>",
        "id": 212606807,
        "sender_full_name": "cuviper",
        "timestamp": 1602098468
    },
    {
        "content": "<p>huh, I did not expect that tbh, none of the other platforms ship it..</p>",
        "id": 212607502,
        "sender_full_name": "simulacrum",
        "timestamp": 1602098835
    },
    {
        "content": "<p>that might be because of recent changes to rustbuild, though, that I wouldn't want to backport</p>",
        "id": 212607539,
        "sender_full_name": "simulacrum",
        "timestamp": 1602098858
    },
    {
        "content": "<p>I'm not too worried about it</p>",
        "id": 212607568,
        "sender_full_name": "simulacrum",
        "timestamp": 1602098878
    },
    {
        "content": "<p>maybe because of <code>--enable-lld</code></p>",
        "id": 212607681,
        "sender_full_name": "cuviper",
        "timestamp": 1602098923
    },
    {
        "content": "<p>yeah that <em>should</em> be statically linked I think? But maybe only recently.</p>",
        "id": 212608761,
        "sender_full_name": "simulacrum",
        "timestamp": 1602099399
    },
    {
        "content": "<p>in the 1.47 test build, rust-lld is dynamically linked</p>",
        "id": 212608834,
        "sender_full_name": "cuviper",
        "timestamp": 1602099446
    },
    {
        "content": "<p>okay, yeah, then that's a recent change I think, or maybe I'm confusing macOS for linux again</p>",
        "id": 212608924,
        "sender_full_name": "simulacrum",
        "timestamp": 1602099485
    },
    {
        "content": "<p>kicking off release nowish</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span></p>",
        "id": 212681636,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160369
    },
    {
        "content": "<p>well, I want to check blog first</p>",
        "id": 212681674,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160386
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 212681712,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602160409
    },
    {
        "content": "<p>okay, pushed some updates and I think blog is ready</p>",
        "id": 212682375,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160697
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/blog.rust-lang.org/pull/702\">https://github.com/rust-lang/blog.rust-lang.org/pull/702</a></p>",
        "id": 212682377,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160698
    },
    {
        "content": "<p>can fix anything else we notice in the next hourish as we release, I'll kick off RCS</p>",
        "id": 212682417,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160714
    },
    {
        "content": "<p>kicked off RCS</p>",
        "id": 212682471,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160748
    },
    {
        "content": "<p>tagged</p>",
        "id": 212682890,
        "sender_full_name": "simulacrum",
        "timestamp": 1602160962
    },
    {
        "content": "<p>oh, hm, <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> triagebot is a bit eager on the tag I guess, which is a bit unfortunate</p>",
        "id": 212683945,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161507
    },
    {
        "content": "<p>since we don't actually have a release quite yet</p>",
        "id": 212683975,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161521
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> uh yeah</p>",
        "id": 212684063,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602161551
    },
    {
        "content": "<p>but like, I'm not sure what the trigger should be for it then</p>",
        "id": 212684077,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602161559
    },
    {
        "content": "<p>yeah :/</p>",
        "id": 212684084,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161566
    },
    {
        "content": "<p>either we push the tag as the blog post is merged</p>",
        "id": 212684095,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602161572
    },
    {
        "content": "<p>but then thanks is stale</p>",
        "id": 212684102,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161578
    },
    {
        "content": "<p>I guess -- one option -- is to poll the release blog list instead?</p>",
        "id": 212684119,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161591
    },
    {
        "content": "<p>\"stale\" the data is already there</p>",
        "id": 212684127,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602161596
    },
    {
        "content": "<p>like, the one we use for website</p>",
        "id": 212684134,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161598
    },
    {
        "content": "<p>the only stale thing is the \"beta\" title</p>",
        "id": 212684156,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602161612
    },
    {
        "content": "<p>sure, yeah, thanks is not too concerning</p>",
        "id": 212684172,
        "sender_full_name": "simulacrum",
        "timestamp": 1602161620
    },
    {
        "content": "<p>merged blog</p>",
        "id": 212689186,
        "sender_full_name": "simulacrum",
        "timestamp": 1602163796
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> does the blogpost link work on your end?</p>",
        "id": 212689604,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602163958
    },
    {
        "content": "<p>yes</p>",
        "id": 212689611,
        "sender_full_name": "simulacrum",
        "timestamp": 1602163964
    },
    {
        "content": "<p><a href=\"https://blog.rust-lang.org/2020/10/08/Rust-1.47.html\">https://blog.rust-lang.org/2020/10/08/Rust-1.47.html</a></p>",
        "id": 212689661,
        "sender_full_name": "simulacrum",
        "timestamp": 1602163982
    },
    {
        "content": "<p>ok I'll tweet!</p>",
        "id": 212689665,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602163985
    },
    {
        "content": "<p>could you HN/users/internals as well?</p>",
        "id": 212689704,
        "sender_full_name": "simulacrum",
        "timestamp": 1602164002
    },
    {
        "content": "<p>HN is already done by someone else</p>",
        "id": 212692433,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602165161
    },
    {
        "content": "<p>users: <a href=\"https://users.rust-lang.org/t/rust-1-47-0-has-been-released/49840\">https://users.rust-lang.org/t/rust-1-47-0-has-been-released/49840</a></p>",
        "id": 212692523,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602165199
    },
    {
        "content": "<p>I didn't remember ever doing the release posts on internals?</p>",
        "id": 212692543,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602165209
    },
    {
        "content": "<p>yeah seems fine</p>",
        "id": 212692638,
        "sender_full_name": "simulacrum",
        "timestamp": 1602165244
    },
    {
        "content": "<p>Quick question: Is there still a point release planned, after the bug with the hang is fixed? Clippy would like to backport an ICE fix. But a backport just for this Clippy ICE is not warranted IMO.</p>",
        "id": 212800752,
        "sender_full_name": "flip1995",
        "timestamp": 1602234881
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"264664\">@Philipp Krones</span> a point release is not planned yet, but please open a rustc issue/PR and add the <code>stable-nominated</code> label to it</p>",
        "id": 212801250,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602235243
    },
    {
        "content": "<p>that way when we need to decide whether to do the point release or not we remember to consider that clippy ICE</p>",
        "id": 212801275,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602235266
    },
    {
        "content": "<p>Alright, thanks. Will do, after I won the fight against Clippy's Windows CI</p>",
        "id": 212801394,
        "sender_full_name": "flip1995",
        "timestamp": 1602235350
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"264664\">@Philipp Krones</span> note that I think the hang has been fixed? I'm not aware yet of unfixed hangs in stable</p>",
        "id": 212807254,
        "sender_full_name": "simulacrum",
        "timestamp": 1602239316
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/241545-t-release/topic/1.2E47.20release/near/212807254\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"264664\">Philipp Krones</span> note that I think the hang has been fixed? I'm not aware yet of unfixed hangs in stable</p>\n</blockquote>\n<p>Ah perfect. I admittedly didn't read the whole thread carefully.</p>",
        "id": 212807314,
        "sender_full_name": "flip1995",
        "timestamp": 1602239378
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/77750\">https://github.com/rust-lang/rust/pull/77750</a></p>",
        "id": 212813194,
        "sender_full_name": "flip1995",
        "timestamp": 1602243498
    },
    {
        "content": "<p>Thanks! We'll discuss it a bit during today's release meeting.</p>",
        "id": 212813492,
        "sender_full_name": "simulacrum",
        "timestamp": 1602243691
    }
]
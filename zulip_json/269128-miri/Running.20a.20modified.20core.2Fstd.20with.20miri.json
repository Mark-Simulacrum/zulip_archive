[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120791\">@RalfJ</span> I saw your comment on <a href=\"https://github.com/rust-lang/miri/issues/1367\">https://github.com/rust-lang/miri/issues/1367</a>, I already have a PR up (<a href=\"https://github.com/rust-lang/rust/pull/91616\">https://github.com/rust-lang/rust/pull/91616</a>) with a fix, but I can't figure out how to test it. If there's any guidance on testing changes to core/std with miri, I'd really appreciate it (I have opened another SB issue on core and I suspect that won't be the last).</p>",
        "id": 264175756,
        "sender_full_name": "(Saethlin) Ben Kimock",
        "timestamp": 1638978921
    },
    {
        "content": "<p>Yes it's pretty easy actually since Miri builds the stdlib itself anyway. It uses xargo for that so all you have to do is set <code>XARGO_RUST_SRC</code> to the directory containing the rustc checkout (so, the one <em>above</em> <code>library</code>).<br>\nThis should be documented at <a href=\"https://github.com/rust-lang/miri/blob/master/CONTRIBUTING.md\">https://github.com/rust-lang/miri/blob/master/CONTRIBUTING.md</a>, sorry for that.<br>\n(Or maybe we should have a Miri env var for this, and then document that of course.)</p>",
        "id": 264176994,
        "sender_full_name": "RalfJ",
        "timestamp": 1638979369
    },
    {
        "content": "<p>Looks to me like something is opening XARGO_RUST_SRC/../Cargo.lock, so I do actually need to pass it the path /home/ben/rust/library.<br>\nAlso it seems like I need to manually delete ~/.cache/miri to get it to rebuild std if I make a change to std. Maybe another thing to PR.</p>",
        "id": 264182712,
        "sender_full_name": "(Saethlin) Ben Kimock",
        "timestamp": 1638981731
    },
    {
        "content": "<p>Also big thanks, found another SB problem in that function</p>",
        "id": 264182907,
        "sender_full_name": "(Saethlin) Ben Kimock",
        "timestamp": 1638981824
    },
    {
        "content": "<blockquote>\n<p>Looks to me like something is opening XARGO_RUST_SRC/../Cargo.lock, so I do actually need to pass it the path /home/ben/rust/library.</p>\n</blockquote>\n<p>you are right, sorry. and yes xargo will notice when the rust src dir changes but not when the <em>contents</em> of that dir change.</p>",
        "id": 264184826,
        "sender_full_name": "RalfJ",
        "timestamp": 1638982559
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/miri/pull/1949\">https://github.com/rust-lang/miri/pull/1949</a> should make it easier to learn about using miri with a modified stdlib :)</p>",
        "id": 265924590,
        "sender_full_name": "RalfJ",
        "timestamp": 1640272040
    }
]
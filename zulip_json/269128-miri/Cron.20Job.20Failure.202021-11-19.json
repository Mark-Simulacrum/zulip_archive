[
    {
        "content": "<p>Dear <span class=\"user-mention\" data-user-id=\"120791\">@RalfJ</span> and <span class=\"user-mention\" data-user-id=\"124288\">@oli</span></p>\n<p>It would appear that the Miri cron job build failed. Would you mind investigating this issue?</p>\n<p>Thanks in advance!<br>\nSincerely,<br>\nThe Miri Cronjobs Bot</p>",
        "id": 262080097,
        "sender_full_name": "miri cronjobs",
        "timestamp": 1637335227
    },
    {
        "content": "<p>We'll have to figure out what to do with <a href=\"https://github.com/rust-lang/rust/issues/91029\">https://github.com/rust-lang/rust/issues/91029</a> and <a href=\"https://github.com/rust-lang/rust/pull/89764#issuecomment-973588007\">https://github.com/rust-lang/rust/pull/89764#issuecomment-973588007</a></p>",
        "id": 262088412,
        "sender_full_name": "RalfJ",
        "timestamp": 1637338545
    },
    {
        "content": "<p>my inclination is to revert the PR that caused this, since this is unexpected fallout</p>",
        "id": 262088438,
        "sender_full_name": "RalfJ",
        "timestamp": 1637338556
    },
    {
        "content": "<p>I think that weird MIR is due to the way we generate drop code. We re-check the discriminant in order to decide whether to run drop code</p>",
        "id": 262088900,
        "sender_full_name": "oli",
        "timestamp": 1637338768
    },
    {
        "content": "<p>but in this case, there is nothing to do, so it collapses most of the code, but leaves a dead discriminant read in place</p>",
        "id": 262088946,
        "sender_full_name": "oli",
        "timestamp": 1637338794
    },
    {
        "content": "<p>we'd have to look through the -Zdump-mir=all list to see what happens in detail, but I think we may \"just\" need to do more cleanups</p>",
        "id": 262089062,
        "sender_full_name": "oli",
        "timestamp": 1637338831
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"124288\">oli</span> <a href=\"#narrow/stream/269128-miri/topic/Cron.20Job.20Failure.202021-11-19/near/262088900\">said</a>:</p>\n<blockquote>\n<p>I think that weird MIR is due to the way we generate drop code. We re-check the discriminant in order to decide whether to run drop code</p>\n</blockquote>\n<p>yeah we have to do that when dropping -- but this variable has been moved out of</p>",
        "id": 262097226,
        "sender_full_name": "RalfJ",
        "timestamp": 1637342062
    },
    {
        "content": "<p>and even if we fix the drop thing (I agree that we should), <a href=\"https://github.com/rust-lang/rust/pull/89764#issuecomment-973588007\">https://github.com/rust-lang/rust/pull/89764#issuecomment-973588007</a> remains a problem</p>",
        "id": 262097328,
        "sender_full_name": "RalfJ",
        "timestamp": 1637342114
    }
]
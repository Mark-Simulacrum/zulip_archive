[
    {
        "content": "<p>I saw 2 PRs already that failed with </p>\n<div class=\"codehilite\"><pre><span></span><code>[TIMING] TheBook { compiler: Compiler { stage: 2, host: TargetSelection { triple: &quot;x86_64-pc-windows-gnu&quot;, file: None } }, target: TargetSelection { triple: &quot;x86_64-pc-windows-gnu&quot;, file: None } } -- 3.075\nSet({&quot;library\\\\alloc&quot;, &quot;library\\\\core&quot;, &quot;library\\\\panic_abort&quot;, &quot;library\\\\panic_unwind&quot;, &quot;library\\\\proc_macro&quot;, &quot;library\\\\profiler_builtins&quot;, &quot;library\\\\std&quot;, &quot;library\\\\test&quot;, &quot;library\\\\unwind&quot;}) not skipped for &quot;bootstrap::doc::Std&quot; -- not in [&quot;src/test/ui&quot;]\nDocumenting stage2 std (x86_64-pc-windows-gnu)\n Documenting core v0.0.0 (D:\\a\\rust\\rust\\library\\core)\nthread &#39;&lt;unnamed&gt;&#39; panicked at &#39;attempt to subtract with overflow&#39;, C:\\Users\\runneradmin\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\rustc-rayon-core-0.3.1\\src\\sleep\\mod.rs:330:21\n\nerror: internal compiler error: unexpected panic\n\nerror: Unrecognized option: &#39;markdown-css&#39;\nerror: Unrecognized option: &#39;markdown-css&#39;\n\nRayon: detected unexpected panic; aborting\nthread &#39;&lt;unnamed&gt;&#39; panicked at &#39;called `Result::unwrap()` on an `Err` value: PoisonError { .. }&#39;, C:\\Users\\runneradmin\\.cargo\\registry\\src\\github.com-1ecc6299db9ec823\\rustc-rayon-core-0.3.1\\src\\sleep\\mod.rs:299\nerror: could not document `core`\nCaused by:\nCaused by:\n  process didn&#39;t exit successfully: `D:\\a\\rust\\rust\\build\\bootstrap/debug/rustdoc --edition=2018 --crate-type lib --crate-name core library\\core\\src\\lib.rs --target x86_64-pc-windows-gnu -o D:\\a\\rust\\rust\\build\\x86_64-pc-windows-gnu\\stage2-std\\x86_64-pc-windows-gnu\\doc --error-format=json --json=diagnostic-rendered-ansi --markdown-css rust.css --markdown-no-toc -Z unstable-options --resource-suffix 1.58.0 --index-page D:\\a\\rust\\rust\\src/doc/index.md -L dependency=D:\\a\\rust\\rust\\build\\x86_64-pc-windows-gnu\\stage2-std\\x86_64-pc-windows-gnu\\release\\deps -L dependency=D:\\a\\rust\\rust\\build\\x86_64-pc-windows-gnu\\stage2-std\\release\\deps -Zsymbol-mangling-version=legacy -Dwarnings -Wrustdoc::invalid_codeblock_attributes --crate-version &quot;1.58.0-nightly\n  (7dbdae0c4\n  2021-10-24)&quot; &quot;-Zcrate-attr=doc(html_root_url=\\&quot;https://doc.rust-lang.org/nightly/\\&quot;)&quot;` (exit code: 0xc0000409, STATUS_STACK_BUFFER_OVERRUN)\n\n\ncommand did not execute successfully: &quot;\\\\\\\\?\\\\D:\\\\a\\\\rust\\\\rust\\\\build\\\\x86_64-pc-windows-gnu\\\\stage0\\\\bin\\\\cargo.exe&quot; &quot;rustdoc&quot; &quot;--target&quot; &quot;x86_64-pc-windows-gnu&quot; &quot;-Zbinary-dep-depinfo&quot; &quot;-j&quot; &quot;8&quot; &quot;--release&quot; &quot;--locked&quot; &quot;--color&quot; &quot;always&quot; &quot;--features&quot; &quot;panic-unwind backtrace profiler compiler-builtins-c&quot; &quot;--manifest-path&quot; &quot;D:\\\\a\\\\rust\\\\rust\\\\library/test/Cargo.toml&quot; &quot;-p&quot; &quot;core&quot; &quot;-Zskip-rustdoc-fingerprint&quot; &quot;--&quot; &quot;--markdown-css&quot; &quot;rust.css&quot; &quot;--markdown-no-toc&quot; &quot;-Z&quot; &quot;unstable-options&quot; &quot;--resource-suffix&quot; &quot;1.58.0&quot; &quot;--index-page&quot; &quot;D:\\\\a\\\\rust\\\\rust\\\\src/doc/index.md&quot;\n\n\nBuild completed unsuccessfully in 1:08:04\nBuild completed unsuccessfully in 1:08:04\nmake: *** [Makefile:80: ci-mingw-subset-1] Error 1\n</code></pre></div>\n<p><a href=\"https://github.com/rust-lang/rust/pull/90042#issuecomment-950263825\">https://github.com/rust-lang/rust/pull/90042#issuecomment-950263825</a><br>\n<a href=\"https://github.com/rust-lang/rust/pull/90222#issuecomment-950269305\">https://github.com/rust-lang/rust/pull/90222#issuecomment-950269305</a></p>\n<p>Could this be related to <a href=\"https://github.com/rust-lang/rust/pull/89776\">https://github.com/rust-lang/rust/pull/89776</a> ?<br>\nIs there something we can do about that?</p>",
        "id": 258865969,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1635062620
    },
    {
        "content": "<p>yes, seems related.</p>\n<blockquote>\n<p>This code is not in upstream rayon but just in our fork, introduced here</p>\n</blockquote>\n<p>Guess it needs to be fixed</p>",
        "id": 258866846,
        "sender_full_name": "The 8472",
        "timestamp": 1635064140
    },
    {
        "content": "<p>I'll make a pr to temporarily disable the overflow checks again so we don't have to deal with the \"spurious\" ci failures for now, until the rayon dep is fixed</p>",
        "id": 258867205,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1635064702
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/90228\">https://github.com/rust-lang/rust/pull/90228</a></p>",
        "id": 258867452,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1635065067
    },
    {
        "content": "<p>lol, apparently you can't start a line in a commit message with an issue number like <a href=\"https://github.com/rust-lang/rust/issues/1234\">#1234</a>  because git will read that as \"commented out 1234\" and skip the entire line when saving the message :D</p>",
        "id": 258867655,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1635065445
    },
    {
        "content": "<p>Issue for the rustc_rayon bug: <a href=\"https://github.com/rust-lang/rust/issues/90227\">#90227</a></p>\n<p>In any case overflowing to <code>usize:MAX</code> <a href=\"https://github.com/rust-lang/rustc-rayon/blob/c8ec88d8a2236d1fe19d65a4ab38834f76d256b7/rayon-core/src/sleep/mod.rs#L330\">in this subtraction</a> can't be the intended behavior. So it seems enabling overflow checks will help us avoid real bugs like this in the long run.</p>",
        "id": 258868294,
        "sender_full_name": "Hans Kratz",
        "timestamp": 1635066397
    }
]
[
    {
        "content": "<p>fresh topic</p>",
        "id": 193574123,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528693
    },
    {
        "content": "<p>first, nominations: <a href=\"https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-nominated+label%3AT-compiler\" title=\"https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-nominated+label%3AT-compiler\">https://github.com/rust-lang/rust/issues?q=is%3Aopen+label%3AI-nominated+label%3AT-compiler</a></p>",
        "id": 193574212,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528760
    },
    {
        "content": "<p>nom 1/8: \"ICEs should always print the top of the query stack.\" <a href=\"https://github.com/rust-lang/rust/issues/70953\" title=\"https://github.com/rust-lang/rust/issues/70953\">#70953</a></p>",
        "id": 193574280,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528784
    },
    {
        "content": "<p>we discussed <a href=\"https://github.com/rust-lang/rust/issues/70953\" title=\"https://github.com/rust-lang/rust/issues/70953\">#70953</a> yesterday I believe</p>",
        "id": 193574291,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528789
    },
    {
        "content": "<p>I think we w- yeah</p>",
        "id": 193574295,
        "sender_full_name": "eddyb",
        "timestamp": 1586528793
    },
    {
        "content": "<p>(just trying to be thorough/mechanical, as I am a replicant after all)</p>",
        "id": 193574351,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528820
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span> suggested always emitting backtraces but I recall there being issues with that. but maybe they've been fixed</p>",
        "id": 193574362,
        "sender_full_name": "eddyb",
        "timestamp": 1586528826
    },
    {
        "content": "<p>(e.g. <code>libbacktrace</code> used to be much slower IIRC)</p>",
        "id": 193574380,
        "sender_full_name": "eddyb",
        "timestamp": 1586528838
    },
    {
        "content": "<p>yeah. I think there was general support for the idea? Anyway if anyone objects, please post on issue itself</p>",
        "id": 193574395,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528851
    },
    {
        "content": "<p>nom 2/8: \"Fix staticlib name for *-pc-windows-gnu targets\" <a href=\"https://github.com/rust-lang/rust/issues/70937\" title=\"https://github.com/rust-lang/rust/issues/70937\">#70937</a></p>",
        "id": 193574407,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528860
    },
    {
        "content": "<p>If there are no major issues, that would be great to always print it <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 193574418,
        "sender_full_name": "centril",
        "timestamp": 1586528868
    },
    {
        "content": "<p>we also discussed <a href=\"https://github.com/rust-lang/rust/issues/70937\" title=\"https://github.com/rust-lang/rust/issues/70937\">#70937</a> yesterday</p>",
        "id": 193574429,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528877
    },
    {
        "content": "<p>there were no objections but a general feeling that this area needs an owner?</p>",
        "id": 193574481,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528889
    },
    {
        "content": "<p>so if you have objections to <a href=\"https://github.com/rust-lang/rust/issues/70937\" title=\"https://github.com/rust-lang/rust/issues/70937\">#70937</a>, please post on the ticket</p>",
        "id": 193574528,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528930
    },
    {
        "content": "<p>Maybe we should reach out to the winapi crate owner</p>",
        "id": 193574540,
        "sender_full_name": "centril",
        "timestamp": 1586528938
    },
    {
        "content": "<p>is that retep?</p>",
        "id": 193574550,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528948
    },
    {
        "content": "<p>we could use more windows experts</p>",
        "id": 193574551,
        "sender_full_name": "centril",
        "timestamp": 1586528949
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> believe so</p>",
        "id": 193574562,
        "sender_full_name": "centril",
        "timestamp": 1586528957
    },
    {
        "content": "<p>about this specific change, or about being a windows owner?</p>",
        "id": 193574571,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586528961
    },
    {
        "content": "<p>windows owner</p>",
        "id": 193574580,
        "sender_full_name": "centril",
        "timestamp": 1586528967
    },
    {
        "content": "<p>They got cc'd on the issue</p>",
        "id": 193574591,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1586528976
    },
    {
        "content": "<p>ah <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 193574600,
        "sender_full_name": "centril",
        "timestamp": 1586528983
    },
    {
        "content": "<p>I think in the past we've let e.g. acrichto handle stuff like this but it always lead to having a lot on their plate</p>",
        "id": 193574612,
        "sender_full_name": "eddyb",
        "timestamp": 1586528994
    },
    {
        "content": "<p>They have less on their plate now <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 193574681,
        "sender_full_name": "centril",
        "timestamp": 1586529011
    },
    {
        "content": "<p>I can reach out to retep, see if they object to being our domain expert here</p>",
        "id": 193574688,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529014
    },
    {
        "content": "<p>(I think achricto has plenty on their plate, its just hidden behind NDAs)</p>",
        "id": 193574723,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529038
    },
    {
        "content": "<p>but what do I know</p>",
        "id": 193574757,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529059
    },
    {
        "content": "<p>IOW I think having dedicated experts is better than just throwing everything nobody else in the compiler team can handle in the general direction of one person</p>",
        "id": 193574768,
        "sender_full_name": "eddyb",
        "timestamp": 1586529063
    },
    {
        "content": "<p>nom 3/8: \"[WIP] Rename mir::Rvalue to Op.\" <a href=\"https://github.com/rust-lang/rust/issues/70928\" title=\"https://github.com/rust-lang/rust/issues/70928\">#70928</a></p>",
        "id": 193574805,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529083
    },
    {
        "content": "<p>oh boy this one</p>",
        "id": 193574810,
        "sender_full_name": "eddyb",
        "timestamp": 1586529090
    },
    {
        "content": "<p>what was motivation here?</p>",
        "id": 193574832,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529104
    },
    {
        "content": "<p>so we started doing some renames years ago</p>",
        "id": 193574833,
        "sender_full_name": "eddyb",
        "timestamp": 1586529105
    },
    {
        "content": "<p>My reaction to this PR is sorta: \"but why?\"</p>",
        "id": 193574845,
        "sender_full_name": "centril",
        "timestamp": 1586529114
    },
    {
        "content": "<p>we got rid of \"lvalue\" and \"rvalue\" in rustc</p>",
        "id": 193574847,
        "sender_full_name": "eddyb",
        "timestamp": 1586529114
    },
    {
        "content": "<p><em>except</em> we sort of left <code>mir::Rvalue</code> behind</p>",
        "id": 193574904,
        "sender_full_name": "eddyb",
        "timestamp": 1586529127
    },
    {
        "content": "<p>We use Value vs. Place in the reference and UCG</p>",
        "id": 193574928,
        "sender_full_name": "centril",
        "timestamp": 1586529143
    },
    {
        "content": "<p>so it's just sitting there, orphaned from \"official terminology\"</p>",
        "id": 193574932,
        "sender_full_name": "eddyb",
        "timestamp": 1586529146
    },
    {
        "content": "<p>right</p>",
        "id": 193574939,
        "sender_full_name": "eddyb",
        "timestamp": 1586529150
    },
    {
        "content": "<p>(I didn't like it much, but I've accepted it ^^)</p>",
        "id": 193574954,
        "sender_full_name": "centril",
        "timestamp": 1586529166
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"126931\">@centril</span> 's argument on the ticket that <code>Op</code> is far harder to grep for than <code>Rvalue</code> is a very strong case</p>",
        "id": 193574955,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529166
    },
    {
        "content": "<p><code>\\bOp\\b</code> :P?</p>",
        "id": 193574971,
        "sender_full_name": "eddyb",
        "timestamp": 1586529180
    },
    {
        "content": "<p>but okay yeah it's probably too short</p>",
        "id": 193574983,
        "sender_full_name": "eddyb",
        "timestamp": 1586529192
    },
    {
        "content": "<p>(in particular because <code>Op</code> is a prefix of <code>Operand</code>)</p>",
        "id": 193574986,
        "sender_full_name": "centril",
        "timestamp": 1586529192
    },
    {
        "content": "<p>My personal preference is that we leave it be as is</p>",
        "id": 193574992,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529195
    },
    {
        "content": "<p>bikeshed-wise I don't care too much what we rename it to, it just reminds me every time I see it of a job not finished</p>",
        "id": 193575014,
        "sender_full_name": "eddyb",
        "timestamp": 1586529216
    },
    {
        "content": "<p>(or at least wait until we come up with a better new name)</p>",
        "id": 193575025,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529223
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> hmm can we use an FCP to \"vote\" on this?</p>",
        "id": 193575029,
        "sender_full_name": "eddyb",
        "timestamp": 1586529226
    },
    {
        "content": "<p>I guess so</p>",
        "id": 193575042,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529233
    },
    {
        "content": "<p>I guess that doesn't account for the bikeshed aspect</p>",
        "id": 193575073,
        "sender_full_name": "eddyb",
        "timestamp": 1586529242
    },
    {
        "content": "<p><code>Operation</code> is the direct longform alternative</p>",
        "id": 193575147,
        "sender_full_name": "eddyb",
        "timestamp": 1586529281
    },
    {
        "content": "<p>should I do an rfcbot fcp close, or fcp postpone ...</p>",
        "id": 193575161,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529294
    },
    {
        "content": "<p>Does \"Operation\" make semantic sense?</p>",
        "id": 193575177,
        "sender_full_name": "centril",
        "timestamp": 1586529303
    },
    {
        "content": "<p>I think close is the right thing here</p>",
        "id": 193575180,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529304
    },
    {
        "content": "<p>heh I forget it has that many options</p>",
        "id": 193575186,
        "sender_full_name": "eddyb",
        "timestamp": 1586529307
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> it's an operation on operands that produces a value</p>",
        "id": 193575198,
        "sender_full_name": "eddyb",
        "timestamp": 1586529315
    },
    {
        "content": "<p>Operation feels more \"impure\" to me (terminatorkind)</p>",
        "id": 193575205,
        "sender_full_name": "centril",
        "timestamp": 1586529320
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span>  fair</p>",
        "id": 193575241,
        "sender_full_name": "centril",
        "timestamp": 1586529342
    },
    {
        "content": "<p><code>Operator</code> would be confusing because of the expectation of\"operator is either  unary or binary (but not other things)\", but kind of funny to consider</p>",
        "id": 193575322,
        "sender_full_name": "eddyb",
        "timestamp": 1586529368
    },
    {
        "content": "<p>\"Rvalue\" seems memorable and sorta unique at least</p>",
        "id": 193575377,
        "sender_full_name": "centril",
        "timestamp": 1586529404
    },
    {
        "content": "<p>Should we move on?</p>",
        "id": 193575395,
        "sender_full_name": "centril",
        "timestamp": 1586529417
    },
    {
        "content": "<p>(if we're bikeshedding, I'd be curious to know if <code>Expr</code> is taken)</p>",
        "id": 193575433,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529436
    },
    {
        "content": "<p>anyway</p>",
        "id": 193575439,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529442
    },
    {
        "content": "<p>it's not</p>",
        "id": 193575440,
        "sender_full_name": "eddyb",
        "timestamp": 1586529442
    },
    {
        "content": "<p>better to move on, before it sinks in that I should've just finished the job years ago :P</p>",
        "id": 193575447,
        "sender_full_name": "eddyb",
        "timestamp": 1586529455
    },
    {
        "content": "<p>nom 4/8: Compile regression \"cannot infer an appropriate lifetime for lifetime parameter\" <a href=\"https://github.com/rust-lang/rust/issues/70917\" title=\"https://github.com/rust-lang/rust/issues/70917\">#70917</a></p>",
        "id": 193575463,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529469
    },
    {
        "content": "<p>this is once again a lang team nom, right? <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span></p>",
        "id": 193575471,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529478
    },
    {
        "content": "<p>pretty sure we discussed it last night</p>",
        "id": 193575519,
        "sender_full_name": "eddyb",
        "timestamp": 1586529488
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> lang did discuss; so now it is t-compiler</p>",
        "id": 193575525,
        "sender_full_name": "centril",
        "timestamp": 1586529492
    },
    {
        "content": "<p>yeah and we're waiting on a crater run</p>",
        "id": 193575531,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529495
    },
    {
        "content": "<p>so nothing to discuss yet</p>",
        "id": 193575546,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529499
    },
    {
        "content": "<p>oh wow I love that ability</p>",
        "id": 193575554,
        "sender_full_name": "eddyb",
        "timestamp": 1586529506
    },
    {
        "content": "<p>other than to report the lang team findings</p>",
        "id": 193575561,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529510
    },
    {
        "content": "<p>I will try to make a point-release for <code>proptest</code></p>",
        "id": 193575566,
        "sender_full_name": "centril",
        "timestamp": 1586529514
    },
    {
        "content": "<p>(to just run crater on arbitrary PRs after the fact)</p>",
        "id": 193575582,
        "sender_full_name": "eddyb",
        "timestamp": 1586529527
    },
    {
        "content": "<p>That's not really \"t-compiler\", but I guess it is, a bit? :D</p>",
        "id": 193575583,
        "sender_full_name": "centril",
        "timestamp": 1586529528
    },
    {
        "content": "<p>nom 5/8: <code>forbid</code> overwritten by later <code>allow</code> on the same \"scope level\" <a href=\"https://github.com/rust-lang/rust/issues/70819\" title=\"https://github.com/rust-lang/rust/issues/70819\">#70819</a></p>",
        "id": 193575606,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529542
    },
    {
        "content": "<p>Left a question for you on that one</p>",
        "id": 193575643,
        "sender_full_name": "centril",
        "timestamp": 1586529568
    },
    {
        "content": "<p>wait, I thought I would have remembered if we had talked about <em>this</em> in lang team meeting last night</p>",
        "id": 193575646,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529571
    },
    {
        "content": "<p>we didn't have the time</p>",
        "id": 193575657,
        "sender_full_name": "centril",
        "timestamp": 1586529580
    },
    {
        "content": "<p>the lang team aspect was the fact that the attribute semantics is visible in the source text</p>",
        "id": 193575671,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529589
    },
    {
        "content": "<p>so 1. is it a bug about how <code>#![forbid(X)] #![allow(X)]</code> is handled today</p>",
        "id": 193575730,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529608
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> sure; but is there a design question re. the semantics?</p>",
        "id": 193575757,
        "sender_full_name": "centril",
        "timestamp": 1586529627
    },
    {
        "content": "<p>and 2. should we strive to ensure the command line lint handling matches the source level attribute lint handling</p>",
        "id": 193575771,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529637
    },
    {
        "content": "<p>ah I see, <span class=\"user-mention\" data-user-id=\"120791\">@RalfJ</span> has commented further since then</p>",
        "id": 193575793,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529656
    },
    {
        "content": "<p>and that scope levels are relevant</p>",
        "id": 193575805,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529666
    },
    {
        "content": "<p>I believe both instances Ralf has mentioned re. attributes are bugs</p>",
        "id": 193575831,
        "sender_full_name": "centril",
        "timestamp": 1586529685
    },
    {
        "content": "<p>(in the current semantics)</p>",
        "id": 193575854,
        "sender_full_name": "centril",
        "timestamp": 1586529698
    },
    {
        "content": "<p>okay well if everyone is probably in agreement that this is indeed a bug</p>",
        "id": 193575885,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529715
    },
    {
        "content": "<p>then it probably can be retagged as just T-compiler</p>",
        "id": 193575909,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529722
    },
    {
        "content": "<p>and I'm inclined to remove T-lang from the issue then. I mostly wanted to make sure that they were onboard for changing things here, since I think the attribute (mis)handling is ... old ...?</p>",
        "id": 193575970,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529746
    },
    {
        "content": "<p>(and that this therefore would be a breaking change, though one that I suspect will not matter much in practice...)</p>",
        "id": 193576009,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529774
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> happy to discuss it at T-Lang if you wish though</p>",
        "id": 193576011,
        "sender_full_name": "centril",
        "timestamp": 1586529776
    },
    {
        "content": "<p>yeah the only reason why it might break people is if they're doing e.g.</p>\n<div class=\"codehilite\"><pre><span></span>// #![forbid(warnings)]\n// #![deny(unused)]\n</pre></div>",
        "id": 193576038,
        "sender_full_name": "simulacrum",
        "timestamp": 1586529799
    },
    {
        "content": "<p>if you believe that is necessary; but it would be good to leave a clarifying comment on issue though</p>",
        "id": 193576039,
        "sender_full_name": "centril",
        "timestamp": 1586529799
    },
    {
        "content": "<p>shrug</p>",
        "id": 193576044,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529804
    },
    {
        "content": "<p>I do think a clarifying comment is necessary</p>",
        "id": 193576055,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529812
    },
    {
        "content": "<p>and I no longer am certain it needs discussion at T-lang meeting</p>",
        "id": 193576060,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529820
    },
    {
        "content": "<p>(N.B. this is a lint, so not breaking in the RFC 1122 sense)</p>",
        "id": 193576061,
        "sender_full_name": "centril",
        "timestamp": 1586529822
    },
    {
        "content": "<p>I'll follow up later.</p>",
        "id": 193576065,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529827
    },
    {
        "content": "<p>Its in the <em>handling</em> of lints... it seems like thats more fundamental, no?</p>",
        "id": 193576121,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529849
    },
    {
        "content": "<p>maybe I misunderstnad. but we don't need to debate that now</p>",
        "id": 193576130,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529859
    },
    {
        "content": "<p>alright</p>",
        "id": 193576164,
        "sender_full_name": "centril",
        "timestamp": 1586529870
    },
    {
        "content": "<p>nom 6/8: \"WIP toward LLVM Code Coverage for Rust\" <a href=\"https://github.com/rust-lang/rust/issues/70680\" title=\"https://github.com/rust-lang/rust/issues/70680\">#70680</a></p>",
        "id": 193576189,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529894
    },
    {
        "content": "<p>I think this one should be bumped to MCP / design meeting</p>",
        "id": 193576214,
        "sender_full_name": "centril",
        "timestamp": 1586529908
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span> has some concerns</p>",
        "id": 193576244,
        "sender_full_name": "centril",
        "timestamp": 1586529915
    },
    {
        "content": "<p>yeah I don't think we can resolve the Q's here in a quick triage session</p>",
        "id": 193576267,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529928
    },
    {
        "content": "<p>I suspect a MCP will fit</p>",
        "id": 193576283,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529939
    },
    {
        "content": "<p>but ... it also seems like it is undergoing active redesign?</p>",
        "id": 193576310,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529954
    },
    {
        "content": "<p>MCP would make me happy</p>",
        "id": 193576332,
        "sender_full_name": "eddyb",
        "timestamp": 1586529962
    },
    {
        "content": "<p>Lang team and libs team might need to be consulted, if this is ever to reach stable</p>",
        "id": 193576342,
        "sender_full_name": "centril",
        "timestamp": 1586529962
    },
    {
        "content": "<p>(based on feedback provided)</p>",
        "id": 193576365,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529964
    },
    {
        "content": "<p>I have opinions because I almost got paid to do this in the past and did research on approaches and technical details</p>",
        "id": 193576404,
        "sender_full_name": "eddyb",
        "timestamp": 1586529989
    },
    {
        "content": "<p>so maybe the right answer here is to 1. advertise this PR to the T-compiler team at large (which we are doing here), and 2. tell PR author that we think a MCP is warranted.</p>",
        "id": 193576420,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586529997
    },
    {
        "content": "<p>but it's probably more important that <em>other</em> (than me) people think the design is good</p>",
        "id": 193576443,
        "sender_full_name": "eddyb",
        "timestamp": 1586530009
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> sgtm</p>",
        "id": 193576446,
        "sender_full_name": "centril",
        "timestamp": 1586530010
    },
    {
        "content": "<p>okay. I can follow up there</p>",
        "id": 193576456,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530018
    },
    {
        "content": "<p>nom 7/8: \"Use the niche optimization if other variant are small enough\" <a href=\"https://github.com/rust-lang/rust/issues/70477\" title=\"https://github.com/rust-lang/rust/issues/70477\">#70477</a></p>",
        "id": 193576486,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530036
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span> I think your concerns are pretty valid and important that we listen to you in particular</p>",
        "id": 193576487,
        "sender_full_name": "centril",
        "timestamp": 1586530037
    },
    {
        "content": "<p>oh <a href=\"https://github.com/rust-lang/rust/issues/70477\" title=\"https://github.com/rust-lang/rust/issues/70477\">#70477</a> is pretty cool</p>",
        "id": 193576538,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530070
    },
    {
        "content": "<p>but I don't have the energy to fight people who want to their own thing</p>",
        "id": 193576549,
        "sender_full_name": "eddyb",
        "timestamp": 1586530079
    },
    {
        "content": "<p>at least with <a href=\"https://github.com/rust-lang/rust/issues/70477\" title=\"https://github.com/rust-lang/rust/issues/70477\">#70477</a> I can keep finding edge cases for them to consider :P</p>",
        "id": 193576650,
        "sender_full_name": "eddyb",
        "timestamp": 1586530114
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> see the two bullet-points in <a href=\"https://github.com/rust-lang/rust/pull/70477#issuecomment-607725781\" title=\"https://github.com/rust-lang/rust/pull/70477#issuecomment-607725781\">https://github.com/rust-lang/rust/pull/70477#issuecomment-607725781</a></p>",
        "id": 193576678,
        "sender_full_name": "eddyb",
        "timestamp": 1586530137
    },
    {
        "content": "<p>that is my main concern with their approach</p>",
        "id": 193576701,
        "sender_full_name": "eddyb",
        "timestamp": 1586530151
    },
    {
        "content": "<p>yeah I saw that comment and considered quoting it here, thanks for linking it</p>",
        "id": 193576721,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530164
    },
    {
        "content": "<p>so it seems like part of the issue (maybe the only issue) ...</p>",
        "id": 193576743,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530179
    },
    {
        "content": "<p>is that the approached encoded in the PR attempts to ensure that it always picks a better choice</p>",
        "id": 193576767,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530194
    },
    {
        "content": "<blockquote>\n<p>I want to land this, but I'm not comfortable with it unless one of these two things happen:<br>\n- the implementation gets a formal model, where we can prove things about all possible cases<br>\n- we check instead of assuming the conditions are sufficient</p>\n</blockquote>\n<p>I think this is pretty reasonable; more soundness holes is not something we need atm <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 193576832,
        "sender_full_name": "centril",
        "timestamp": 1586530208
    },
    {
        "content": "<p>but it is unproven that it is actually improving</p>",
        "id": 193576833,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530208
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> at least no layout should be unsound :P</p>",
        "id": 193576864,
        "sender_full_name": "eddyb",
        "timestamp": 1586530220
    },
    {
        "content": "<p>but to be clear</p>",
        "id": 193576867,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530223
    },
    {
        "content": "<p>its not injecting soundness holes</p>",
        "id": 193576874,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530227
    },
    {
        "content": "<p>just potential size regressions, right?</p>",
        "id": 193576888,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530232
    },
    {
        "content": "<p>(which is bad, but not bad on the level of unsound)</p>",
        "id": 193576900,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530246
    },
    {
        "content": "<p>and the approach <span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span> has been advocating</p>",
        "id": 193576919,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530255
    },
    {
        "content": "<p>oh; if that's the case then...</p>",
        "id": 193576935,
        "sender_full_name": "centril",
        "timestamp": 1586530264
    },
    {
        "content": "<p>is instead to just compute \"both\" layouts (which in general ... might be N layouts, no?)</p>",
        "id": 193576948,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530272
    },
    {
        "content": "<p>and choose the best one? Does that sound right?</p>",
        "id": 193576961,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530283
    },
    {
        "content": "<p>yeah</p>",
        "id": 193576969,
        "sender_full_name": "eddyb",
        "timestamp": 1586530288
    },
    {
        "content": "<p>So we would speculate, that is</p>",
        "id": 193576997,
        "sender_full_name": "centril",
        "timestamp": 1586530305
    },
    {
        "content": "<p>the reason I even bring up \"checking instead of assuming\" is that I've tried to come up with all the conditions for doing this the \"clever predicate\" way</p>",
        "id": 193577007,
        "sender_full_name": "eddyb",
        "timestamp": 1586530309
    },
    {
        "content": "<p>and it's a nightmare to reason about</p>",
        "id": 193577031,
        "sender_full_name": "eddyb",
        "timestamp": 1586530321
    },
    {
        "content": "<p>and in other parts of the compiler we just collect \"candidates\" and pick from there</p>",
        "id": 193577108,
        "sender_full_name": "eddyb",
        "timestamp": 1586530340
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> chimed in on the ticket with support for <span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span> 's feedback</p>",
        "id": 193577110,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530341
    },
    {
        "content": "<p>which I respect even more now, that I know places where not doing that has caused a lot of wasted time trying to think through \"clever decision-making logic\"</p>",
        "id": 193577155,
        "sender_full_name": "eddyb",
        "timestamp": 1586530368
    },
    {
        "content": "<p>and I am of a similar mindset. Even if the PR author believes the conditions they have encoded are easy enough to reason about, we need to think of long term maintenance</p>",
        "id": 193577167,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530372
    },
    {
        "content": "<p>another thing is that I've received complaints over the years that the layout code is a complex mess</p>",
        "id": 193577204,
        "sender_full_name": "eddyb",
        "timestamp": 1586530397
    },
    {
        "content": "<p>the only concern I have is</p>",
        "id": 193577210,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530402
    },
    {
        "content": "<p>how expensive is it to try multiple layouts?</p>",
        "id": 193577220,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530411
    },
    {
        "content": "<p>which is mostly a byproduct of what it grew out of (the old straight-to-LLVM ADT layout logic)</p>",
        "id": 193577230,
        "sender_full_name": "eddyb",
        "timestamp": 1586530419
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> I think it would be easy to measure that, just nobody has done it</p>",
        "id": 193577243,
        "sender_full_name": "eddyb",
        "timestamp": 1586530429
    },
    {
        "content": "<p>it should not have downstream effects, at least</p>",
        "id": 193577251,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530434
    },
    {
        "content": "<p>i.e. I was briefly worried about exponential blowup</p>",
        "id": 193577302,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530447
    },
    {
        "content": "<p>from nested enum types</p>",
        "id": 193577307,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530450
    },
    {
        "content": "<p>yeah, no, once you pick a layout it's done</p>",
        "id": 193577319,
        "sender_full_name": "eddyb",
        "timestamp": 1586530457
    },
    {
        "content": "<p>but that should not occur, because we should compute the layout for an enum and stick with it regardless of any context it occurs in</p>",
        "id": 193577358,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530474
    },
    {
        "content": "<p>so yeah</p>",
        "id": 193577365,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530475
    },
    {
        "content": "<p>I'm happy to leave a note here too</p>",
        "id": 193577412,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530502
    },
    {
        "content": "<p>the way we'd measure this is to not early-return if we found a niche candidate, but just stash it in a variable and check it after we compute the regular layout</p>",
        "id": 193577428,
        "sender_full_name": "eddyb",
        "timestamp": 1586530510
    },
    {
        "content": "<p>its a little worrisome that the PR author has been so adamantly opposed to incorporating your suggestion</p>",
        "id": 193577447,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530522
    },
    {
        "content": "<p>I may have even suggested this exact thing to the PR author or someone else in the past and nobody has tried it</p>",
        "id": 193577454,
        "sender_full_name": "eddyb",
        "timestamp": 1586530525
    },
    {
        "content": "<p>/me should just go for it, it's like, what, a 5-line change?</p>",
        "id": 193577483,
        "sender_full_name": "eddyb",
        "timestamp": 1586530545
    },
    {
        "content": "<p>(this is how I can spend weeks in weeds)</p>",
        "id": 193577495,
        "sender_full_name": "eddyb",
        "timestamp": 1586530557
    },
    {
        "content": "<p>anyway, I can leave a note here too</p>",
        "id": 193577533,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530563
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/ad.20hoc.20triage.20meeting.202020.2E04.2E10.20.2354818/near/193577447\" title=\"#narrow/stream/131828-t-compiler/topic/ad.20hoc.20triage.20meeting.202020.2E04.2E10.20.2354818/near/193577447\">said</a>:</p>\n<blockquote>\n<p>its a little worrisome that the PR author has been so adamantly opposed to incorporating your suggestion</p>\n</blockquote>\n<p>at least I'm glad that they try to understand and resolve every edge case I throw at them</p>",
        "id": 193577564,
        "sender_full_name": "eddyb",
        "timestamp": 1586530587
    },
    {
        "content": "<p>after I read the comment thread more carefully, to better understand the PR author's Point of View</p>",
        "id": 193577567,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530587
    },
    {
        "content": "<p>nom 8/8: \"Should enum discriminants have generics in scope?\" <a href=\"https://github.com/rust-lang/rust/issues/70453\" title=\"https://github.com/rust-lang/rust/issues/70453\">#70453</a></p>",
        "id": 193577603,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530614
    },
    {
        "content": "<p>this is once again a lang team nomination</p>",
        "id": 193577608,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530620
    },
    {
        "content": "<p>I believe</p>",
        "id": 193577615,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530622
    },
    {
        "content": "<p>yeah</p>",
        "id": 193577629,
        "sender_full_name": "centril",
        "timestamp": 1586530635
    },
    {
        "content": "<p>this time just to check your boxes</p>",
        "id": 193577636,
        "sender_full_name": "centril",
        "timestamp": 1586530640
    },
    {
        "content": "<p>(whcih was discussed last night and is in lang team prompt for FCP now)</p>",
        "id": 193577644,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530644
    },
    {
        "content": "<p>btw if someone is bored, here's a bit of layout math that the author led me to find out <a href=\"https://github.com/rust-lang/rust/pull/70477#discussion_r403269107\" title=\"https://github.com/rust-lang/rust/pull/70477#discussion_r403269107\">https://github.com/rust-lang/rust/pull/70477#discussion_r403269107</a></p>",
        "id": 193577650,
        "sender_full_name": "eddyb",
        "timestamp": 1586530651
    },
    {
        "content": "<p>so e.g., <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span>'s box, hint hint <span aria-label=\"slight smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"slight smile\">:slight_smile:</span></p>",
        "id": 193577652,
        "sender_full_name": "centril",
        "timestamp": 1586530651
    },
    {
        "content": "<p>so okay, that's all the nominations and we're basically out of time</p>",
        "id": 193577697,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530673
    },
    {
        "content": "<p>I'll go back through the notes here and write up the comments I promised.</p>",
        "id": 193577759,
        "sender_full_name": "pnkfelix",
        "timestamp": 1586530689
    },
    {
        "content": "<p>someone should write a paper on the algebra of layouts</p>",
        "id": 193577774,
        "sender_full_name": "eddyb",
        "timestamp": 1586530702
    },
    {
        "content": "<p>Excellent, thanks <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span></p>",
        "id": 193577787,
        "sender_full_name": "centril",
        "timestamp": 1586530708
    },
    {
        "content": "<p>and how alignments interact with everything</p>",
        "id": 193577792,
        "sender_full_name": "eddyb",
        "timestamp": 1586530711
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119009\">@eddyb</span>  interesting; seems like that could be a MSc thesis even</p>",
        "id": 193577822,
        "sender_full_name": "centril",
        "timestamp": 1586530736
    },
    {
        "content": "<p>or BSc if not</p>",
        "id": 193577835,
        "sender_full_name": "centril",
        "timestamp": 1586530742
    },
    {
        "content": "<p>(it's likely that on average, most permutations of field order result in the same number of padding bytes, it's really hard to even make examples which go against that)</p>",
        "id": 193577876,
        "sender_full_name": "eddyb",
        "timestamp": 1586530774
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span> y'all</p>",
        "id": 193578063,
        "sender_full_name": "centril",
        "timestamp": 1586530851
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/ad.20hoc.20triage.20meeting.202020.2E04.2E10.20.2354818/near/193577167\" title=\"#narrow/stream/131828-t-compiler/topic/ad.20hoc.20triage.20meeting.202020.2E04.2E10.20.2354818/near/193577167\">said</a>:</p>\n<blockquote>\n<p>and I am of a similar mindset. Even if the PR author believes the conditions they have encoded are easy enough to reason about, we need to think of long term maintenance</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> so here's some good news, I went and tried doing the most minimal \"two layouts cost measurement\" version of this, and it's largely perf-neutral: <a href=\"https://github.com/rust-lang/rust/pull/71045#issuecomment-612579390\" title=\"https://github.com/rust-lang/rust/pull/71045#issuecomment-612579390\">https://github.com/rust-lang/rust/pull/71045#issuecomment-612579390</a></p>",
        "id": 193709548,
        "sender_full_name": "eddyb",
        "timestamp": 1586691671
    },
    {
        "content": "<p>the PR author also did something similar, but got a regression: <a href=\"https://github.com/rust-lang/rust/pull/70477#issuecomment-612493899\" title=\"https://github.com/rust-lang/rust/pull/70477#issuecomment-612493899\">https://github.com/rust-lang/rust/pull/70477#issuecomment-612493899</a></p>",
        "id": 193709611,
        "sender_full_name": "eddyb",
        "timestamp": 1586691726
    },
    {
        "content": "<p>so we now have to figure out where the slowdown comes from. which seems productive</p>",
        "id": 193709619,
        "sender_full_name": "eddyb",
        "timestamp": 1586691771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/ad.20hoc.20triage.20meeting.202020.2E04.2E10.20.2354818/near/193574688\" title=\"#narrow/stream/131828-t-compiler/topic/ad.20hoc.20triage.20meeting.202020.2E04.2E10.20.2354818/near/193574688\">said</a>:</p>\n<blockquote>\n<p>I can reach out to retep, see if they object to being our domain expert here</p>\n</blockquote>\n<p>I don't object.</p>",
        "id": 194626627,
        "sender_full_name": "Peter Rabbit",
        "timestamp": 1587346123
    }
]
[
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> , do you mind if I ask you some newbie questions about trying to bootstrap <code>rustc</code> in windows?</p>",
        "id": 162802962,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554716972
    },
    {
        "content": "<p>Fire away. <code>msvc</code> or <code>gnu</code>? =P</p>",
        "id": 162803040,
        "sender_full_name": "Zoxc",
        "timestamp": 1554717019
    },
    {
        "content": "<p>I'm trying to do msvc</p>",
        "id": 162803081,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717067
    },
    {
        "content": "<p>currently when I run <code>C:\\Python27\\python.exe x.py build</code>, ...</p>",
        "id": 162803160,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717135
    },
    {
        "content": "<p>I get a bunch of errors</p>",
        "id": 162803166,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717143
    },
    {
        "content": "<p>saying \"SecurityProtocol: Cannot convert null to type System.Net.SecurityProtocolType\" due to invalid enumeration values\"</p>",
        "id": 162803192,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717169
    },
    {
        "content": "<p>and then that seems like its showing me a pseudo-call stack saying that is arising due to a call to DownloadFile</p>",
        "id": 162803207,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717196
    },
    {
        "content": "<p>where its trying to download the beta build for bootstrapping</p>",
        "id": 162803216,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717209
    },
    {
        "content": "<p>(<a href=\"http://static.rust-lang.org/dist/2019-03-20/rust-std-beta-x86_64-pc-windows-msvc.tar.gz.sha256\" target=\"_blank\" title=\"http://static.rust-lang.org/dist/2019-03-20/rust-std-beta-x86_64-pc-windows-msvc.tar.gz.sha256\">static.rust-lang.org/dist/2019-03-20/rust-std-beta-x86_64-pc-windows-msvc.tar.gz.sha256</a>)</p>",
        "id": 162803228,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717234
    },
    {
        "content": "<p>I cannot easily cut-and-paste the text itself, so I've been trying to transcribe it. Maybe I should post a screen grab of the window ...)</p>",
        "id": 162803310,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717295
    },
    {
        "content": "<p>Are you on the latest Wimdows 10? Might be a PowerShell version mismatch</p>",
        "id": 162803339,
        "sender_full_name": "Zoxc",
        "timestamp": 1554717342
    },
    {
        "content": "<p>Windows 7 i think</p>",
        "id": 162803398,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717363
    },
    {
        "content": "<p>yeah Windows 7 Sevice Pack 1</p>",
        "id": 162803412,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717382
    },
    {
        "content": "<p>You recommend using Windows 10 instead?</p>",
        "id": 162803417,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717389
    },
    {
        "content": "<p>I'm not wedded to any particular Windows version; I just had thought from past experience than when using a VirtualBox or VMWare like setup, you're usually better off going with an older version of Windows due to the performance overhead of virtualization</p>",
        "id": 162803447,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717442
    },
    {
        "content": "<p>Try installing a newer PowerShell or .NET version</p>",
        "id": 162803555,
        "sender_full_name": "Zoxc",
        "timestamp": 1554717555
    },
    {
        "content": "<p>okay, but don't worry about upgrading my Windows 7 yet? I'll see, thanks!</p>",
        "id": 162803654,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717663
    },
    {
        "content": "<p>Windows 7 should work fine, but I haven't tried it</p>",
        "id": 162803754,
        "sender_full_name": "Zoxc",
        "timestamp": 1554717762
    },
    {
        "content": "<p>hmm. there's this table with four different links depending on whether one wants PS (PowerShell) 3.0, 4.0, 5.0, or 5.1</p>",
        "id": 162803856,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717861
    },
    {
        "content": "<p>which one do you have? I guessI could jump right to 5.1</p>",
        "id": 162803861,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717873
    },
    {
        "content": "<p>(technically I guess its the version of the Window Management Framework (WMF)</p>",
        "id": 162803875,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554717899
    },
    {
        "content": "<p>5.1</p>",
        "id": 162803890,
        "sender_full_name": "Zoxc",
        "timestamp": 1554717912
    },
    {
        "content": "<p>thanks <span class=\"user-mention\" data-user-id=\"116466\">@Zoxc</span> ! Now I've gotten past the download step. (And have hit an entirely new error, of course)</p>",
        "id": 162805261,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554719516
    },
    {
        "content": "<p>Did you fix it too? =P</p>",
        "id": 162805922,
        "sender_full_name": "Zoxc",
        "timestamp": 1554720340
    },
    {
        "content": "<p>no</p>",
        "id": 162806090,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720528
    },
    {
        "content": "<p>at this point I'm downloading a Windows 10 VM</p>",
        "id": 162806091,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720537
    },
    {
        "content": "<p>rather than keep trying to dissect every thing that pops up</p>",
        "id": 162806102,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720550
    },
    {
        "content": "<p>Which error did you get? You should get a VM with copy and paste =P</p>",
        "id": 162806116,
        "sender_full_name": "Zoxc",
        "timestamp": 1554720575
    },
    {
        "content": "<p>I couldn't exactly tell what the error was. the message was pretty malformed</p>",
        "id": 162806174,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720609
    },
    {
        "content": "<p>it was complaining that the command I was trying to run was not compatible with my version of windows</p>",
        "id": 162806189,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720628
    },
    {
        "content": "<p>but it wrote \"%1\" rather than the command name</p>",
        "id": 162806192,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720638
    },
    {
        "content": "<p>in the diagnostic</p>",
        "id": 162806195,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720642
    },
    {
        "content": "<p>which I assume is some sort of interpolation bug</p>",
        "id": 162806202,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720654
    },
    {
        "content": "<p>:/</p>",
        "id": 162806214,
        "sender_full_name": "Zoxc",
        "timestamp": 1554720664
    },
    {
        "content": "<p>e.g. someone writing a message assuming .bat semantics, maybe?</p>",
        "id": 162806218,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720668
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/7ZVUXknMF8A_A_76_lFb1mSc/Screen-Shot-2019-04-08-at-12.52.43.png\" target=\"_blank\" title=\"Screen-Shot-2019-04-08-at-12.52.43.png\">Screen-Shot-2019-04-08-at-12.52.43.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/7ZVUXknMF8A_A_76_lFb1mSc/Screen-Shot-2019-04-08-at-12.52.43.png\" target=\"_blank\" title=\"Screen-Shot-2019-04-08-at-12.52.43.png\"><img src=\"/user_uploads/4715/7ZVUXknMF8A_A_76_lFb1mSc/Screen-Shot-2019-04-08-at-12.52.43.png\"></a></div>",
        "id": 162806349,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720814
    },
    {
        "content": "<p>I will admit that my problem may stem from using VS 2019</p>",
        "id": 162806404,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720847
    },
    {
        "content": "<p>I did see the note saying that bootstrapping only works in certain (older) versions of Visual Studio</p>",
        "id": 162806410,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720862
    },
    {
        "content": "<p>Seems like something is trying to run x64-64 binaries on x86-32 Windows</p>",
        "id": 162806453,
        "sender_full_name": "Zoxc",
        "timestamp": 1554720922
    },
    {
        "content": "<p>but the path here (<a href=\"https://github.com/rust-lang/rust#msvc\" target=\"_blank\" title=\"https://github.com/rust-lang/rust#msvc\">https://github.com/rust-lang/rust#msvc</a>) is not present on my (admittedly, free aka no-frills) Visual Studio install</p>",
        "id": 162806458,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720927
    },
    {
        "content": "<p>hmm maybe it is indeed a 32-bit version, let me see</p>",
        "id": 162806470,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720944
    },
    {
        "content": "<p>oh yeah this is absolutely 32-bit</p>",
        "id": 162806538,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720972
    },
    {
        "content": "<p>so running vcvars64.bat is certainly not going to work then</p>",
        "id": 162806554,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554720994
    },
    {
        "content": "<p>You'll want <a href=\"https://github.com/Zoxc/rust/tree/vs2019\" target=\"_blank\" title=\"https://github.com/Zoxc/rust/tree/vs2019\">https://github.com/Zoxc/rust/tree/vs2019</a> for VS 2019 support =P</p>",
        "id": 162806570,
        "sender_full_name": "Zoxc",
        "timestamp": 1554721018
    },
    {
        "content": "<p>is there a free version of VS that doesn't require using a branch off of master?</p>",
        "id": 162806600,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721067
    },
    {
        "content": "<p>VS 2017 Community</p>",
        "id": 162806675,
        "sender_full_name": "Zoxc",
        "timestamp": 1554721120
    },
    {
        "content": "<p>Got to wait for <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> to wake up for VS 2019 support on master</p>",
        "id": 162806710,
        "sender_full_name": "Zoxc",
        "timestamp": 1554721175
    },
    {
        "content": "<p>let me see if I can grab that...</p>",
        "id": 162806712,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721176
    },
    {
        "content": "<p>I can't find an installer for VS 2017 Community. Microsoft seems to be pushing 2019 hard. <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 162806992,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721465
    },
    {
        "content": "<p><a href=\"https://visualstudio.microsoft.com/downloads/\" target=\"_blank\" title=\"https://visualstudio.microsoft.com/downloads/\">https://visualstudio.microsoft.com/downloads/</a></p>",
        "id": 162807008,
        "sender_full_name": "Zoxc",
        "timestamp": 1554721492
    },
    {
        "content": "<p>I tried that. even though it has a separate section for 2017, ... the Installer app it then gives you does a search for \"Available\" versions</p>",
        "id": 162807131,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721606
    },
    {
        "content": "<p>and only shows 2019 for me. <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 162807134,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721612
    },
    {
        "content": "<p>(looking)</p>",
        "id": 162807155,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721634
    },
    {
        "content": "<p>going to \"older downlolads\" takes me to a \"My Benefits\" page under <a href=\"http://my.visualstudio.com\" target=\"_blank\" title=\"http://my.visualstudio.com\">my.visualstudio.com</a> that says \"Sorry, we couldn't find any downloads for you.\"</p>",
        "id": 162807250,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721726
    },
    {
        "content": "<p>/me should probably set a timer to limit how much more time he invests in this today</p>",
        "id": 162807284,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554721788
    },
    {
        "content": "<p>weird, I just saw a glimpse of 2017 under a different run of the installer.</p>",
        "id": 162807800,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554722307
    },
    {
        "content": "<p>okay so let me see if I can get that working</p>",
        "id": 162807807,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554722319
    },
    {
        "content": "<p>(oh wow, moving my VirtualBox VM's window off of my laptop screen and onto the external monitor's screen seems to have made the UX way way way more responsive...)</p>",
        "id": 162808094,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554722665
    },
    {
        "content": "<p>is the laptop high-dpi and the monitor not? maybe it's doing some really inefficient scaling?</p>",
        "id": 162808786,
        "sender_full_name": "Daniel Carosone",
        "timestamp": 1554723420
    },
    {
        "content": "<p>downgrading from VirtualBox 6.0 to VirtualBox 5.2 seems like it may be a workaround</p>",
        "id": 162809357,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554724018
    },
    {
        "content": "<blockquote>\n<p>yeah Windows 7 Sevice Pack 1</p>\n</blockquote>\n<p>I have successfully built Rust on Windows 7</p>",
        "id": 162830513,
        "sender_full_name": "nagisa",
        "timestamp": 1554739536
    },
    {
        "content": "<p>nothing special happened</p>",
        "id": 162830520,
        "sender_full_name": "nagisa",
        "timestamp": 1554739540
    },
    {
        "content": "<p>That was a longish time ago tho</p>",
        "id": 162830596,
        "sender_full_name": "nagisa",
        "timestamp": 1554739571
    },
    {
        "content": "<p>I am having a more productive experience with my attempt atop Windows 10</p>",
        "id": 162911820,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554817886
    },
    {
        "content": "<p>Are you producing more data for Microsoft?</p>",
        "id": 162911924,
        "sender_full_name": "Zoxc",
        "timestamp": 1554817943
    },
    {
        "content": "<p>but this may be in part because Microsoft's set of free 90-day VirtualBox VM's only has 32-bit x86 for Windows 7. If you want/need x86_64, then you need to grab their Windows 10 VM</p>",
        "id": 162911926,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554817944
    },
    {
        "content": "<p>my attempt atop Windows 10 is currently building LLVM. I never got that far with my 32-bit Windows 7 VM</p>",
        "id": 162912038,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554818034
    },
    {
        "content": "<p>VS 2019 now work on master =P<br>\nHave you tried VMware?</p>",
        "id": 163101841,
        "sender_full_name": "Zoxc",
        "timestamp": 1554991317
    },
    {
        "content": "<p>in the past I used VMware</p>",
        "id": 163101900,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554991332
    },
    {
        "content": "<p>and maybe I should indeed use it now, since I suspect its performance is superior to VirtualBox</p>",
        "id": 163101922,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554991358
    },
    {
        "content": "<p>but various points in Mozilla's and/or Microsoft's infrastructure were pushing me to VirtualBox here</p>",
        "id": 163101942,
        "sender_full_name": "pnkfelix",
        "timestamp": 1554991382
    },
    {
        "content": "<p>okay so at this point I've gotten a used Windows laptop</p>",
        "id": 164782419,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878201
    },
    {
        "content": "<p>and I've installed both VS Studio 2017 Express edition, and VS Studio 2019 Community edition</p>",
        "id": 164782486,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878224
    },
    {
        "content": "<p>I'm trying to figure out how to do this <em>without</em> purchasing anything</p>",
        "id": 164782500,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878256
    },
    {
        "content": "<p>(to best emulate what some of our contributors need to do)</p>",
        "id": 164782512,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878268
    },
    {
        "content": "<p>and I still have not managed to bootstrap Rust</p>",
        "id": 164782513,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878273
    },
    {
        "content": "<p>mostly because I keep hitting what I assume are environment setup issues</p>",
        "id": 164782534,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878316
    },
    {
        "content": "<p>Which issues? =P</p>",
        "id": 164782716,
        "sender_full_name": "Zoxc",
        "timestamp": 1556878559
    },
    {
        "content": "<p>well</p>",
        "id": 164782765,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878568
    },
    {
        "content": "<p>my \"most successful\" runs tend to end with a link step problem</p>",
        "id": 164782769,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878579
    },
    {
        "content": "<p>with a mismatch between x86 and x64</p>",
        "id": 164782780,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878598
    },
    {
        "content": "<p>I'm doing another run right now, in order to transcribe the actual message</p>",
        "id": 164782789,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878617
    },
    {
        "content": "<p>but my main question, for anyone who like me is trying to bootstrap atop windows using free Visual Studio  downloads, is: What command prompt are you starting with?</p>",
        "id": 164782823,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878672
    },
    {
        "content": "<p>my current run is using \"x64 Native Tools Command Prompt for VS 2019\"</p>",
        "id": 164782878,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878689
    },
    {
        "content": "<p>I use plain powershell with python, cmake and git in PATH</p>",
        "id": 164782890,
        "sender_full_name": "Zoxc",
        "timestamp": 1556878725
    },
    {
        "content": "<p>I assume after running powershell, you need to invoke some other script to set up environment variables?</p>",
        "id": 164782908,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878759
    },
    {
        "content": "<p>cmake, the cc crate  and rustc will detect and use VS tools on their own</p>",
        "id": 164782909,
        "sender_full_name": "Zoxc",
        "timestamp": 1556878763
    },
    {
        "content": "<p>something analogous to vcvarsall.bat?</p>",
        "id": 164782911,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878767
    },
    {
        "content": "<p>hmm</p>",
        "id": 164782912,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878771
    },
    {
        "content": "<p>okay let me try powershell then</p>",
        "id": 164782915,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556878776
    },
    {
        "content": "<p>I'll use a msys2 shell if I need to run <code>run-make</code> tests, as those need bash</p>",
        "id": 164783185,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879070
    },
    {
        "content": "<p>just to be clear ...</p>",
        "id": 164783193,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879084
    },
    {
        "content": "<p>the detection that the cmake, cc, rustc crates do ... you're saying that works only in powershell?</p>",
        "id": 164783211,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879104
    },
    {
        "content": "<p>or it supposedly works in any terminal?</p>",
        "id": 164783215,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879110
    },
    {
        "content": "<p>because ... if its any terminal ... then I would imagine I'm going to run into the same essential problem.</p>",
        "id": 164783227,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879136
    },
    {
        "content": "<p>It works in any terminal</p>",
        "id": 164783232,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879141
    },
    {
        "content": "<p>But <code>vcvarsall.bat</code> might do something that overrides them</p>",
        "id": 164783239,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879158
    },
    {
        "content": "<p>Are you on x64 now?</p>",
        "id": 164783283,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879167
    },
    {
        "content": "<p>Are you using Visual Studio as your compiler? Or are you using ... what's it called ...</p>",
        "id": 164783284,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879168
    },
    {
        "content": "<p>... whatever the way to get gcc and/or clang atop windows is ...?</p>",
        "id": 164783297,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879205
    },
    {
        "content": "<p>I use msvc not mingw</p>",
        "id": 164783331,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879262
    },
    {
        "content": "<p>okay.</p>",
        "id": 164783337,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879271
    },
    {
        "content": "<p>did you do any customization of your environment that you can remember, in terms of what environment variables are set by default in your shell?</p>",
        "id": 164783386,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879307
    },
    {
        "content": "<p>or are you using whatever the vanilla install of MSVC?</p>",
        "id": 164783391,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879318
    },
    {
        "content": "<p>(and which MSVC is it? Are you on 2019 Community?)</p>",
        "id": 164783395,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879328
    },
    {
        "content": "<p>(sorry for all the questions; I'm trying to gather as much info as I can up front so I can replicate a supposedly known-to-work environment)</p>",
        "id": 164783426,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879362
    },
    {
        "content": "<p>clang-cl is msvc-like just for the record</p>",
        "id": 164783427,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879364
    },
    {
        "content": "<p>I haven't done any setup for environment variables specific to Rust</p>",
        "id": 164783440,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879394
    },
    {
        "content": "<p>I have VS 2017 and VS 2019 now, not sure which is used, but it worked when only VS 2019 was installed</p>",
        "id": 164783505,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879448
    },
    {
        "content": "<p>okay</p>",
        "id": 164783621,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879609
    },
    {
        "content": "<p>I've been meaning to look more at Powershell anyway, especially after wycats' tweets raving about it</p>",
        "id": 164783631,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556879642
    },
    {
        "content": "<p>It's terrible. I just use it because it's VS Code's default, and I just run x.py in it =P</p>",
        "id": 164783680,
        "sender_full_name": "Zoxc",
        "timestamp": 1556879691
    },
    {
        "content": "<p>so you run as a subshell of a VS Code editor instance?</p>",
        "id": 164787882,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556884644
    },
    {
        "content": "<p>(that may be an important detail; its possible VS Code sets up envionment variables. I've just been trying to run in vanilla terminals, either cmd.exe, or the various bat scripts added to the Start Menu by Visual Studio install(s)</p>",
        "id": 164787946,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556884700
    },
    {
        "content": "<p>I use the VS Code terminal yes. That should not be important</p>",
        "id": 164788237,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885033
    },
    {
        "content": "<p>A build from a clean slate (no build folder) with cmd.exe or powershell should not fail. File a bug if it's not from missing tools</p>",
        "id": 164788336,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885141
    },
    {
        "content": "<p>are you saying that the current readme is wrong, here: <a href=\"https://github.com/rust-lang/rust/blob/master/README.md#msvc\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/blob/master/README.md#msvc\">https://github.com/rust-lang/rust/blob/master/README.md#msvc</a></p>",
        "id": 164788661,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885517
    },
    {
        "content": "<p>where it says you may need to call the appropriate vcvars file before running the bootstrap?</p>",
        "id": 164788716,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885533
    },
    {
        "content": "<p>Visual Studio 2013 is a bit of a clue =P</p>",
        "id": 164788731,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885563
    },
    {
        "content": "<p>or are you just saying that VS 2019 is one of the Visual Studio versions that should (now) work out of the box</p>",
        "id": 164788733,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885567
    },
    {
        "content": "<p>yeah well there is that \"(or later)\" next to that. :)</p>",
        "id": 164788738,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885578
    },
    {
        "content": "<p>Probably dates the instructions to 2012</p>",
        "id": 164788739,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885580
    },
    {
        "content": "<p>it'd be nice if we actually listed the versions that we know work</p>",
        "id": 164788750,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885588
    },
    {
        "content": "<p>or maybe just the ones that we use for the CI testing</p>",
        "id": 164788755,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885608
    },
    {
        "content": "<p>Our MSVC CI testing is a bit strange, it runs inside msys2 :/</p>",
        "id": 164788808,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885644
    },
    {
        "content": "<p>I do not recommend that</p>",
        "id": 164788819,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885677
    },
    {
        "content": "<p>hmm. and the CI builds might be inheriting environment state from the outer msys2, right?</p>",
        "id": 164788846,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885718
    },
    {
        "content": "<p>Not might. They are</p>",
        "id": 164788960,
        "sender_full_name": "Zoxc",
        "timestamp": 1556885856
    },
    {
        "content": "<p>yeah that's unfortunate</p>",
        "id": 164788967,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885871
    },
    {
        "content": "<p>I can understand having to fire off a build as some sort of subshell of msys2</p>",
        "id": 164789027,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885909
    },
    {
        "content": "<p>just as an artifact of travis</p>",
        "id": 164789031,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885916
    },
    {
        "content": "<p>but it would be good to find some way to isolate the inner subshell's environment state</p>",
        "id": 164789037,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556885931
    },
    {
        "content": "<p>(i am now wondering if my earlier environmental link issues are in fact <em>because</em> i kept running vcvarsall.bat or friends while trying to use VS 2019, based on earlier evidence that doing so was necessary for VS 2017)</p>",
        "id": 164790800,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556887652
    },
    {
        "content": "<p>I still haven't seen a successful bootstrap, but my most recent problems may well originate from my attempts to run <code>x.py</code> outside of the root of the git checkout of rust.git</p>",
        "id": 164790863,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556887688
    },
    {
        "content": "<p>Giving up for today; filed \"cl.exe handling of llvm\\include broken for VS 2019?\" <a href=\"https://github.com/rust-lang/rust/issues/60507\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/60507\">#60507</a></p>",
        "id": 164794672,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556890932
    },
    {
        "content": "<p>Looks like something doesn't handle spaces correctly</p>",
        "id": 164794828,
        "sender_full_name": "Zoxc",
        "timestamp": 1556891067
    },
    {
        "content": "<p>So probably don't put the repo in a path with spaces</p>",
        "id": 164795404,
        "sender_full_name": "Zoxc",
        "timestamp": 1556891431
    },
    {
        "content": "<p>does <em>anything</em> work correctly with paths in spaces?</p>",
        "id": 164795839,
        "sender_full_name": "eddyb",
        "timestamp": 1556891718
    },
    {
        "content": "<p>I keep hearing about this in various situations</p>",
        "id": 164795850,
        "sender_full_name": "eddyb",
        "timestamp": 1556891732
    },
    {
        "content": "<p>(the sad answer is probably \"malware, if that\")</p>",
        "id": 164795875,
        "sender_full_name": "eddyb",
        "timestamp": 1556891752
    },
    {
        "content": "<p>Plenty of things works correctly with spaces in path. Unix build systems and shell scripts always fail horribly though</p>",
        "id": 164796052,
        "sender_full_name": "Zoxc",
        "timestamp": 1556891871
    },
    {
        "content": "<p>They're pretty much perfectly designed to induce bugs</p>",
        "id": 164796224,
        "sender_full_name": "Zoxc",
        "timestamp": 1556891963
    },
    {
        "content": "<p>there are ways to make it work, but, yeah, using spaces to separate things was a mistake</p>",
        "id": 164796270,
        "sender_full_name": "eddyb",
        "timestamp": 1556892001
    },
    {
        "content": "<p>you have to do silly things like <code>\"$foo\"</code></p>",
        "id": 164796324,
        "sender_full_name": "eddyb",
        "timestamp": 1556892009
    },
    {
        "content": "<p>What do people do here, put their git checkout into C:\\rust.git\\ ?</p>",
        "id": 164796649,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556892243
    },
    {
        "content": "<p>well, <code>C:\\Users\\eddy\\Projects</code> doesn't have any spaces in it :P</p>",
        "id": 164796711,
        "sender_full_name": "eddyb",
        "timestamp": 1556892293
    },
    {
        "content": "<p>I used <code>C:\\Users\\wwiser\\Code\\rust</code></p>",
        "id": 164796743,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556892309
    },
    {
        "content": "<p>but, yeah, especially if you have two partitions, I wouldn't be surprised by <code>D:\\Projects\\rust</code></p>",
        "id": 164796749,
        "sender_full_name": "eddyb",
        "timestamp": 1556892315
    },
    {
        "content": "<p>I store all my data on a separate partition from <code>C:</code></p>",
        "id": 164796755,
        "sender_full_name": "Zoxc",
        "timestamp": 1556892322
    },
    {
        "content": "<p>I also don't have a username with a space =P</p>",
        "id": 164796837,
        "sender_full_name": "Zoxc",
        "timestamp": 1556892369
    },
    {
        "content": "<p>I got my machine with the account already set up with a space in my user name :(</p>",
        "id": 164801514,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895644
    },
    {
        "content": "<p>and I decided it would not be worth the effort to attempt to revise thaet</p>",
        "id": 164801526,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895654
    },
    {
        "content": "<p>AFAICT one can not easily rename themselves in Windows.</p>",
        "id": 164801542,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895668
    },
    {
        "content": "<p>maybe you can make a directory hard link?</p>",
        "id": 164801554,
        "sender_full_name": "eddyb",
        "timestamp": 1556895679
    },
    {
        "content": "<p>in NTFS?</p>",
        "id": 164801562,
        "sender_full_name": "eddyb",
        "timestamp": 1556895684
    },
    {
        "content": "<p>are we really not going to support this use case?</p>",
        "id": 164801571,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895694
    },
    {
        "content": "<p>so you run stuff from <code>C:\\Users\\felix\\...</code> etc.</p>",
        "id": 164801576,
        "sender_full_name": "eddyb",
        "timestamp": 1556895699
    },
    {
        "content": "<p>i guess this maybe worthy of a meta-policy discussion at a higher level.</p>",
        "id": 164801648,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895727
    },
    {
        "content": "<p>at the very least, something to mention at the compiler team meeting. Maybe directory hard links are indeed an appropriate work around</p>",
        "id": 164801671,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895750
    },
    {
        "content": "<p>but ... what about a developer who does not have Admin rights to their workstation?</p>",
        "id": 164801689,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895769
    },
    {
        "content": "<p>I agree with fixing spaces in paths, but this is assuming we can do anything about it</p>",
        "id": 164801694,
        "sender_full_name": "eddyb",
        "timestamp": 1556895775
    },
    {
        "content": "<p>I think anyone can create a directory under C: btw, but I could be wrong</p>",
        "id": 164801714,
        "sender_full_name": "eddyb",
        "timestamp": 1556895787
    },
    {
        "content": "<p>I've done it before, at Adobe, i think by striving to switch to relative paths</p>",
        "id": 164801735,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895809
    },
    {
        "content": "<p>but maybe that is not always an option</p>",
        "id": 164801746,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895820
    },
    {
        "content": "<p>(e.g. when the relative/absolute path is embedded in the final product)</p>",
        "id": 164801757,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556895832
    },
    {
        "content": "<p>I agree that we should fix this to support spaces in paths. However, it seems like there should be another way to create a folder without any spaces in the path.</p>",
        "id": 164801854,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556895897
    },
    {
        "content": "<p>At least on my pc, I'm not prompted for elevated privileges to create a folder at <code>C:\\</code></p>",
        "id": 164801880,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556895917
    },
    {
        "content": "<p>(This also is probably going to prompt me to file a bug with Mozilla IT on how they set up Windows Laptops; they really should have asked me for a user name)</p>",
        "id": 164802028,
        "sender_full_name": "pnkfelix",
        "timestamp": 1556896030
    },
    {
        "content": "<p>I am prompted if I try to create a new folder under <code>C:\\Users</code>. So at least on Win 10, creating a folder at the root of the drive might be a workaround?</p>",
        "id": 164802043,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556896050
    },
    {
        "content": "<p>I remember being surprised I can just do this in XP/Win7</p>",
        "id": 164802110,
        "sender_full_name": "eddyb",
        "timestamp": 1556896090
    },
    {
        "content": "<p>so this should work in every  version, assuming we're not confused about it</p>",
        "id": 164802125,
        "sender_full_name": "eddyb",
        "timestamp": 1556896106
    },
    {
        "content": "<p>Creating a folder at the root is also \"nice\" because it helps you avoid path length limitations</p>",
        "id": 164802138,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556896131
    },
    {
        "content": "<p>(<code>MAX_PATH</code> = 260 characters unless you use \"long paths\" which are the <code>\\\\?\\</code> style paths the win32 api supports)</p>",
        "id": 164802321,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556896266
    },
    {
        "content": "<p>yeah I think the compiler uses those long paths a lot</p>",
        "id": 164802650,
        "sender_full_name": "eddyb",
        "timestamp": 1556896534
    },
    {
        "content": "<p>It <em>should</em> be using <code>\\\\?\\</code> style paths at the appropriate places just like it <em>should</em> handle paths with spaces in them. ¯\\_(ツ)_/¯</p>",
        "id": 164803142,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1556896808
    },
    {
        "content": "<blockquote>\n<p>I remember being surprised I can just do this in XP/Win7</p>\n</blockquote>\n<p>You cannot \"just\" create a directory under <code>C:</code> without being an administrative account under W10</p>",
        "id": 164831463,
        "sender_full_name": "nagisa",
        "timestamp": 1556918504
    },
    {
        "content": "<p>(in general W10 is now sane-by-default as far as things you can do to system-like directories go)</p>",
        "id": 164831530,
        "sender_full_name": "nagisa",
        "timestamp": 1556918537
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> I usually build rustc in a shell that is specifically launched by finding a \"x64 shell\" somewhere in the start menu</p>",
        "id": 164831540,
        "sender_full_name": "nagisa",
        "timestamp": 1556918573
    },
    {
        "content": "<p>if I cannot find it there, I go and dig around <code>Program Files</code> for it.</p>",
        "id": 164831558,
        "sender_full_name": "nagisa",
        "timestamp": 1556918593
    },
    {
        "content": "<p>that's the Visual C++ Tools thing, right?</p>",
        "id": 164832845,
        "sender_full_name": "eddyb",
        "timestamp": 1556919886
    },
    {
        "content": "<p>Yeah, something like that.</p>",
        "id": 164839943,
        "sender_full_name": "nagisa",
        "timestamp": 1556927666
    }
]
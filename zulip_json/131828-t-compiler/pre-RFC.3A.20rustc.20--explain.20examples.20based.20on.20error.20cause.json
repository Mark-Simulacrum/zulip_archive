[
    {
        "content": "<p>I'm a relatively inexperienced end-user. Though this is something I'm sure has been discussed before, I couldn't find anything.</p>\n<p>On running <code>rustc --explain &lt;EXXXX&gt;</code>, a generic code example going over the error  is presented. This presents an excellent theoretical and practical overview of Rust used in error, however it is left to the user to asosciate this with their specific use-case. Mapping the <code>--explain</code> output to the users use case incurs a cognitive load that could possibly be eased by the compiler itself.</p>\n<p>Currently,  the content of <code>--explain</code>appears to be strictly defined by the error number. By taking information from the source of the error, the compiler could generate output that could be thought of as \"super-detailed compiler error\", or \"Error explanation based on a specific instance of a compiler error\" </p>\n<p>For example, error <code>E0271</code> example looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>trait Trait { type AssociatedType; }\n\nfn foo&lt;T&gt;(t: T) where T: Trait&lt;AssociatedType=u32&gt; {\n    println!(&quot;in foo&quot;);\n}\n\nimpl Trait for i8 { type AssociatedType = &amp;&#39;static str; }\n\nfoo(3_i8);\n</code></pre></div>\n\n\n<blockquote>\n<p>This is because of a type mismatch between the associated type of some<br>\ntrait (e.g., <code>T::Bar</code>, where <code>T</code> implements <code>trait Quux { type Bar; }</code>)<br>\nand another type <code>U</code> that is required to be equal to <code>T::Bar</code>, but is not.<br>\nExamples follow.</p>\n<p>Here is that same example again, with some explanatory comments:</p>\n</blockquote>\n<div class=\"codehilite\"><pre><span></span><code>trait Trait { type AssociatedType; }\n\nfn foo&lt;T&gt;(t: T) where T: Trait&lt;AssociatedType=u32&gt; {\n//                    ~~~~~~~~ ~~~~~~~~~~~~~~~~~~\n//                        |            |\n//         This says `foo` can         |\n//           only be used with         |\n//              some type that         |\n//         implements `Trait`.         |\n//                                     |\n//                             This says not only must\n//                             `T` be an impl of `Trait`\n//                             but also that the impl\n//                             must assign the type `u32`\n//                             to the associated type.\n    println!(&quot;in foo&quot;);\n}\n\nimpl Trait for i8 { type AssociatedType = &amp;&#39;static str; }\n//~~~~~~~~~~~~~~~   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~\n//      |                             |\n// `i8` does have                     |\n// implementation                     |\n// of `Trait`...                      |\n//                     ... but it is an implementation\n//                     that assigns `&amp;&#39;static str` to\n//                     the associated type.\n\nfoo(3_i8);\n// Here, we invoke `foo` with an `i8`, which does not satisfy\n// the constraint `&lt;i8 as Trait&gt;::AssociatedType=u32`, and\n// therefore the type-checker complains with this error code.\n</code></pre></div>\n\n\n<p>The compiler error:</p>\n<div class=\"codehilite\"><pre><span></span><code>error[E0271]: type mismatch resolving `for&lt;&#39;r&gt; &lt;for&lt;&#39;s&gt; fn(seed::browser::url::Url, &amp;&#39;s mut seed::app::orders::container::OrdersContainer&lt;Message, _, _&gt;) -&gt; Model&lt;&#39;s&gt; {init::&lt;seed::app::orders::container::OrdersContainer&lt;Message, _, _&gt;&gt;} as std::ops::FnOnce&lt;(seed::browser::url::Url, &amp;&#39;r mut seed::app::orders::container::OrdersContainer&lt;Message, _, _&gt;)&gt;&gt;::Output == _`\n  --&gt; src/lib.rs:21:5\n   |\n21 |     App::start(&quot;app&quot;, init, update, view);\n   |     ^^^^^^^^^^ expected bound lifetime parameter, found concrete lifetime\n   |\n   = note: required by `seed::app::App::&lt;Ms, Mdl, INodes, GMs&gt;::start`\n</code></pre></div>\n\n\n<p>and the line of code:</p>\n<div class=\"codehilite\"><pre><span></span><code>    App::start(&quot;app&quot;, init, update, view);\n</code></pre></div>\n\n\n<p>When understanding the compiler error, and the explanation, there is a lot of information going on. There remains a gap, however, in clearly showing how the three groups of information/data come together.</p>\n<p>What I would like to propose, is a way for the compiler to intelligently draw these three together. If we take the purpose of <code>--explain</code> to be that it eases the developers burden of understanding the root of the error, it currently provides an excellent reference. If, in addition to serving as a reference, it can also draw  concrete and explicit connections between the reference entry and the immediate problem at hand, the burden could be further reduced.</p>",
        "id": 204376172,
        "sender_full_name": "Ben",
        "timestamp": 1595202782
    },
    {
        "content": "<p>Perhaps this is a discussion for WG-Diagnostics? cc <span class=\"user-mention\" data-user-id=\"119031\">@Esteban Küber</span></p>",
        "id": 204377687,
        "sender_full_name": "Léo Lanteri Thauvin",
        "timestamp": 1595205679
    },
    {
        "content": "<p>That makes sense. I'll move things over there.</p>",
        "id": 204377971,
        "sender_full_name": "Ben",
        "timestamp": 1595206256
    },
    {
        "content": "<p>moved: <a href=\"#narrow/stream/147480-t-compiler.2Fwg-diagnostics/topic/pre-rfc.20discussion.3A.20connecting.20--explain.20and.20compiler.20errors/near/204378025\">https://rust-lang.zulipchat.com/#narrow/stream/147480-t-compiler.2Fwg-diagnostics/topic/pre-rfc.20discussion.3A.20connecting.20--explain.20and.20compiler.20errors/near/204378025</a></p>",
        "id": 204378048,
        "sender_full_name": "Ben",
        "timestamp": 1595206434
    }
]
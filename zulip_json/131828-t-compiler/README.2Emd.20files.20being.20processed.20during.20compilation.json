[
    {
        "content": "<p>While working on <a href=\"https://github.com/rust-lang/rust/pull/94316\">https://github.com/rust-lang/rust/pull/94316</a>, which improved parsing of string literals, I printed out some of the strings being processed by <code>unescape_str_or_byte_str</code>, and saw something unexpected: the contents of <code>README.md</code> files from the crate.</p>",
        "id": 273166778,
        "sender_full_name": "nnethercote",
        "timestamp": 1645746774
    },
    {
        "content": "<p>E.g. <a href=\"https://github.com/RustCrypto/formats/blob/019454fda0b824534b43e3952ff36c887c21e1a4/pkcs8/README.md\">this README.md</a> while compiling the <code>pkcs8</code> crate.</p>",
        "id": 273166858,
        "sender_full_name": "nnethercote",
        "timestamp": 1645746839
    },
    {
        "content": "<p>It's scanned not just once, but 73 times(!)</p>",
        "id": 273166926,
        "sender_full_name": "nnethercote",
        "timestamp": 1645746870
    },
    {
        "content": "<p>I've seen this on a couple of other crates, too.</p>",
        "id": 273166939,
        "sender_full_name": "nnethercote",
        "timestamp": 1645746880
    },
    {
        "content": "<p>Such as <code>der-0.6.0-pre.0</code> and <code>bitvec-1.0.0</code>.</p>",
        "id": 273166968,
        "sender_full_name": "nnethercote",
        "timestamp": 1645746905
    },
    {
        "content": "<p>This is on <code>cargo check</code> builds.</p>\n<p>A Callgrind profile suggests this is happening within<code>&lt;rustc_lint::builtin::MissingDoc as rustc_lint::passes::LateLintPass&gt;::enter_lint_attrs</code>?</p>",
        "id": 273167075,
        "sender_full_name": "nnethercote",
        "timestamp": 1645746966
    },
    {
        "content": "<p>I admit, this has bamboozled me</p>",
        "id": 273167103,
        "sender_full_name": "nnethercote",
        "timestamp": 1645747007
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>    /// The `missing_docs` lint detects missing documentation for public items.\n</code></pre></div>",
        "id": 273167165,
        "sender_full_name": "nnethercote",
        "timestamp": 1645747076
    },
    {
        "content": "<p>Apparently it looks in README.md files as part of this?!</p>",
        "id": 273167216,
        "sender_full_name": "nnethercote",
        "timestamp": 1645747091
    },
    {
        "content": "<p><a href=\"https://github.com/RustCrypto/formats/blob/019454fda0b824534b43e3952ff36c887c21e1a4/pkcs8/src/lib.rs#L3\">https://github.com/RustCrypto/formats/blob/019454fda0b824534b43e3952ff36c887c21e1a4/pkcs8/src/lib.rs#L3</a></p>",
        "id": 273167260,
        "sender_full_name": "bjorn3",
        "timestamp": 1645747134
    },
    {
        "content": "<p>The readme is explicitly included as crate level documentation.</p>",
        "id": 273167288,
        "sender_full_name": "bjorn3",
        "timestamp": 1645747162
    },
    {
        "content": "<p>Ah, yes! thank you</p>",
        "id": 273167417,
        "sender_full_name": "nnethercote",
        "timestamp": 1645747219
    },
    {
        "content": "<p>Still surprising it's processed so many times</p>",
        "id": 273167576,
        "sender_full_name": "nnethercote",
        "timestamp": 1645747312
    },
    {
        "content": "<p>Yeah, that does seem surprising. I'd be interested if we could reduce the number of parsings.</p>",
        "id": 273168327,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1645747844
    },
    {
        "content": "<p>(the same thing is done for <a href=\"https://github.com/bitvecto-rs/bitvec/blob/a7a82c67206d6e3ced67294883f6d1baaae7d74c/src/lib.rs#L1\">bitvec</a> and <a href=\"https://github.com/RustCrypto/formats/blob/9d902f034f074d83ea8615ed1eeed785abef4e6b/der/src/lib.rs#L3\">der</a>)</p>",
        "id": 273169816,
        "sender_full_name": "lqd",
        "timestamp": 1645749080
    },
    {
        "content": "<p>And any crate <a href=\"https://crates.io/crates/doc-comment/reverse_dependencies\">depending on</a> (200+) <a href=\"https://docs.rs/doc-comment/latest/doc_comment/\">doc-comment</a> is likely to do the same.</p>",
        "id": 273184304,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1645758805
    }
]
[
    {
        "content": "<p>I want to talk about a survey</p>",
        "id": 224492149,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936098
    },
    {
        "content": "<p>So the essential idea was to choose some fixed point in the compiler's history</p>",
        "id": 224493421,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936421
    },
    {
        "content": "<p>and then make a little script that would check out that version, build it from scratch (gathing timings), make some set of \"representative\" changes, building each one (gathering more timings)</p>",
        "id": 224493524,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936467
    },
    {
        "content": "<p>and then send the results back to us</p>",
        "id": 224493539,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936472
    },
    {
        "content": "<p>What's a \"representative change\"? Well, one candidate would be the commit history going forward, or the bors merge points</p>",
        "id": 224493628,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936500
    },
    {
        "content": "<p>I'm not personally so sure that's truly <em>representative</em> of the kind of code people try to inject when they're experimenting locally</p>",
        "id": 224493678,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936525
    },
    {
        "content": "<p>but the commit history at least its easy to \"generate\" (since its already there for the plucking)</p>",
        "id": 224493761,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936556
    },
    {
        "content": "<p>this also depends what part of the compiler you're working on, rustdoc doesn't have as much problems with incremental</p>",
        "id": 224493766,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936558
    },
    {
        "content": "<p>and I imagine modifying rustc_resolve and other things <em>after</em> rustc_middle isn't so bad</p>",
        "id": 224493805,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936570
    },
    {
        "content": "<p>Right. Maybe the simplest thing would be to just make semi-trivial modifications (e.g. injecting a <code>debug!</code>) into some subset of the rustc_crates</p>",
        "id": 224494011,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936632
    },
    {
        "content": "<p>hmm, maybe not <code>debug!</code></p>",
        "id": 224494049,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936646
    },
    {
        "content": "<p><code>info!</code></p>",
        "id": 224494056,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936652
    },
    {
        "content": "<p><code>println!</code> might be better</p>",
        "id": 224494069,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936658
    },
    {
        "content": "<p>well I don't want to mess up test suite etc</p>",
        "id": 224494094,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936665
    },
    {
        "content": "<p>do you want to measure different configurations? like <code>debug = true</code>, <code>debug-logging = true</code>?</p>",
        "id": 224494174,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936696
    },
    {
        "content": "<p>(specifically the compile time, obviously runtime will be slower with logging)</p>",
        "id": 224494228,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936718
    },
    {
        "content": "<p>One potential problem with just injecting one <code>info!</code> per crate is that we might \"get lucky\" in terms of codegen-unit partitioning. Maybe.</p>",
        "id": 224494230,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936719
    },
    {
        "content": "<p>I debate about this. I personally do use <code>debug = true</code>, but I get impression it might not be representative of what other contributors do.</p>",
        "id": 224494320,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936743
    },
    {
        "content": "<p>maybe that's the <em>first</em> thing: a micro-survey, where we just say to every contributor: email us your typical config.toml (or up to three config.tomls if you toggle between some)</p>",
        "id": 224494428,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936785
    },
    {
        "content": "<p>I really like that, it's easy to put together the questions and quick to answer</p>",
        "id": 224494500,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936817
    },
    {
        "content": "<p>Does anyone see a reason <em>not</em> to do this? Or something else I should ask for in tandem?</p>",
        "id": 224494631,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611936852
    },
    {
        "content": "<p>I would worry about saturating our survey ability</p>",
        "id": 224494731,
        "sender_full_name": "simulacrum",
        "timestamp": 1611936901
    },
    {
        "content": "<p>I think we can expect responses for the first decently, but after that I expect people to start ignoring</p>",
        "id": 224494782,
        "sender_full_name": "simulacrum",
        "timestamp": 1611936921
    },
    {
        "content": "<p>and config.toml -- to me -- does not sound like high order bit</p>",
        "id": 224494802,
        "sender_full_name": "simulacrum",
        "timestamp": 1611936930
    },
    {
        "content": "<p>but I also don't know what <em>would</em> be</p>",
        "id": 224494844,
        "sender_full_name": "simulacrum",
        "timestamp": 1611936950
    },
    {
        "content": "<p>we could include it as part of the larger survey</p>",
        "id": 224494848,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936951
    },
    {
        "content": "<p>I think for <code>debug</code> especially we should plan for about half of people to have it enabled</p>",
        "id": 224494921,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936967
    },
    {
        "content": "<p>and measure that even if we measure no other changes</p>",
        "id": 224494948,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611936979
    },
    {
        "content": "<p>But what is the point of it? Seeing how fast compiler builds are outside of CI and maybe your machine?</p>",
        "id": 224494979,
        "sender_full_name": "Laurențiu",
        "timestamp": 1611936989
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> do you think the benchmark script approach makes sense?</p>",
        "id": 224495009,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937001
    },
    {
        "content": "<p>what I'm trying to get at is that if our aim is to expand the set of contributors, by enabling people who currently cannot contribute well, then they <em>won't know</em></p>",
        "id": 224495020,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937005
    },
    {
        "content": "<p>or <em>can't answer</em> these questions</p>",
        "id": 224495043,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937016
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu Nicola</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224494979\">said</a>:</p>\n<blockquote>\n<p>But what is the point of it? Seeing how fast compiler builds are outside of CI and maybe your machine?</p>\n</blockquote>\n<p>seeing how fast it is to bootstrap the compiler</p>",
        "id": 224495048,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937017
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224495020\">said</a>:</p>\n<blockquote>\n<p>what I'm trying to get at is that if our aim is to expand the set of contributors, by enabling people who currently cannot contribute well, then they <em>won't know</em></p>\n</blockquote>\n<p>ahhh this is a good point - we could say <em>if</em> you've made a config.toml before, please post it</p>",
        "id": 224495146,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937044
    },
    {
        "content": "<p>I also don't really know what a survey gives us in terms of data</p>",
        "id": 224495178,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937054
    },
    {
        "content": "<p>like, cool, I guess, if we can know how bad things are</p>",
        "id": 224495201,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937061
    },
    {
        "content": "<p>I think the research question is too broad</p>",
        "id": 224495216,
        "sender_full_name": "oliver",
        "timestamp": 1611937067
    },
    {
        "content": "<p>but things are bad <em>for me</em> on 3950x hardware realistically</p>",
        "id": 224495225,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937071
    },
    {
        "content": "<p>not \"so bad\"</p>",
        "id": 224495240,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937076
    },
    {
        "content": "<p>but bad enough that even I get distracted</p>",
        "id": 224495305,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937089
    },
    {
        "content": "<p>right, so I think there are thresholds</p>",
        "id": 224495323,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937096
    },
    {
        "content": "<p>so do we really need to know how bad things can get?</p>",
        "id": 224495326,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937098
    },
    {
        "content": "<p>between unusably bad</p>",
        "id": 224495328,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937099
    },
    {
        "content": "<p>vs irritatingly bad</p>",
        "id": 224495347,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937107
    },
    {
        "content": "<p>and its subjective, the line between unusable and irritating</p>",
        "id": 224495378,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937117
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>seeing how fast it is to bootstrap the compiler\n</code></pre></div>\n<p>So say it takes users on average 50 minutes for an initial build and 3 for an incremental one. How is that actionable?</p>\n<p>I don't want to seem negative, but I'm really curious about what follows</p>",
        "id": 224495394,
        "sender_full_name": "Laurențiu",
        "timestamp": 1611937123
    },
    {
        "content": "<p>but the times themselves are objective</p>",
        "id": 224495407,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937126
    },
    {
        "content": "<p>So I personally would like to know 1. how long are the different parts taking, and how long do typical workflows take, and 2. do you deem this merely irritating, or unusable.</p>",
        "id": 224495509,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937167
    },
    {
        "content": "<p>(for each  workflow, that is)</p>",
        "id": 224495531,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937178
    },
    {
        "content": "<p>I wonder if there is a platform question here - do new contributors use Windows or macOS at higher rates than regular contributors, and does that have an impact?</p>",
        "id": 224495539,
        "sender_full_name": "davidtwco",
        "timestamp": 1611937181
    },
    {
        "content": "<p>the original idea was to measure <em>incremental</em> times</p>",
        "id": 224495547,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937186
    },
    {
        "content": "<p>and to see if small changes had an outsized impact</p>",
        "id": 224495563,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937196
    },
    {
        "content": "<p>and that would give an idea where incremental can improve</p>",
        "id": 224495632,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937206
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224495509\">said</a>:</p>\n<blockquote>\n<p>So I personally would like to know 1. how long are the different parts taking, and how long do typical workflows take, and 2. do you deem this merely irritating, or unusable.</p>\n</blockquote>\n<p>I guess - what I would like to get out of this - is <em>why</em> you want to know these things</p>",
        "id": 224495644,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937214
    },
    {
        "content": "<p>e.g., if you want incremental cases that cause slow recompiles, give me an hour or two and I could find some just by trying to tackle a bug or two?</p>",
        "id": 224495713,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937251
    },
    {
        "content": "<p>Well, there are some workflows that may be fast for me and you and that are slow for others: its good to know about that.</p>",
        "id": 224495736,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937260
    },
    {
        "content": "<p>(why do we need to survey for that data)</p>",
        "id": 224495743,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937262
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224495736\">said</a>:</p>\n<blockquote>\n<p>Well, there are some workflows that may be fast for me and you and that are slow for others: its good to know about that.</p>\n</blockquote>\n<p>what would cause that disparity?</p>",
        "id": 224495779,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937277
    },
    {
        "content": "<p>but there are also cases where we would just swallow how long it takes, but a new contributor wont</p>",
        "id": 224495798,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937284
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224495798\">said</a>:</p>\n<blockquote>\n<p>but there are also cases where we would just swallow how long it takes, but a new contributor wont</p>\n</blockquote>\n<p>fyi this is definitely true already, if I had to compile rustc on my laptop I just wouldn't contribute</p>",
        "id": 224495860,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937315
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224495779\">said</a>:</p>\n<blockquote>\n<p>what would cause that disparity?</p>\n</blockquote>\n<p>memory hierarchy issues, mostly I expect</p>",
        "id": 224495861,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937315
    },
    {
        "content": "<p>I guess what I'm trying to get at is that <em>if</em> it was true that I didn't really have a problem, then surveying to figure out what caused problems for people with weaker/slower/etc hardware, makes sense. But since <em>I</em> do have a problem, then I imagine people with different computers would just have <em>more</em> problems, but likely <em>also</em> have the ones I have</p>",
        "id": 224495957,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937346
    },
    {
        "content": "<p>and I think the budget for surveying is small</p>",
        "id": 224495968,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937352
    },
    {
        "content": "<p>so trying to get to a point where good/excellent hardware means you don't have any problems, and <em>then</em> surveying makes more sense to me</p>",
        "id": 224496009,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937374
    },
    {
        "content": "<p>Okay so I will state up front: The original goal for teh survey was when I figured the first sprint would be about incremental bootstrap performance</p>",
        "id": 224496031,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937380
    },
    {
        "content": "<p>And we thought we could benefit from better understanding the pain points</p>",
        "id": 224496066,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937398
    },
    {
        "content": "<p>Since the budget for surveying is small, I do agree wih that</p>",
        "id": 224496093,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937412
    },
    {
        "content": "<p>I think it could be prudent to table the idea</p>",
        "id": 224496152,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937433
    },
    {
        "content": "<p>Right, I'm saying that I do not think a survey gives us a significantly better understanding than we can derive on our own with some testing/investment</p>",
        "id": 224496153,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937434
    },
    {
        "content": "<p>That's the part I'm not sure about</p>",
        "id": 224496252,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937456
    },
    {
        "content": "<p>(How long does a no-op <code>./x.py check</code> take these days?)</p>",
        "id": 224496275,
        "sender_full_name": "Laurențiu",
        "timestamp": 1611937464
    },
    {
        "content": "<p>We don't know if our own measurements are representative</p>",
        "id": 224496281,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937468
    },
    {
        "content": "<p>without comparing them against reality</p>",
        "id": 224496298,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937476
    },
    {
        "content": "<p>in terms of our contributors</p>",
        "id": 224496317,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937483
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224495957\">said</a>:</p>\n<blockquote>\n<p>I guess what I'm trying to get at is that <em>if</em> it was true that I didn't really have a problem, then surveying to figure out what caused problems for people with weaker/slower/etc hardware, makes sense. But since <em>I</em> do have a problem, then I imagine people with different computers would just have <em>more</em> problems, but likely <em>also</em> have the ones I have</p>\n</blockquote>\n<p>do you agree with this principle?</p>",
        "id": 224496321,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937484
    },
    {
        "content": "<p>I think that we do have problems, and that our contributors have more problems</p>",
        "id": 224496374,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937511
    },
    {
        "content": "<p>I am not sure that focusing just on the problems that we see</p>",
        "id": 224496397,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937520
    },
    {
        "content": "<p>will maximize benefit for our contributors</p>",
        "id": 224496414,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937526
    },
    {
        "content": "<p>the biggest bang for our buck may come from something that you and I do not observe</p>",
        "id": 224496447,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937545
    },
    {
        "content": "<p>personally I do agree that solving the problems we can see first is a good idea because we can test it easily</p>",
        "id": 224496466,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937551
    },
    {
        "content": "<p>like it's very easy to see \"this uses 2 GB less of memory\" and it helps everyone</p>",
        "id": 224496492,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937562
    },
    {
        "content": "<p>I agree with that</p>",
        "id": 224496534,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937566
    },
    {
        "content": "<p>Optimizing for testing it easily makes a lot of sense</p>",
        "id": 224496569,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937583
    },
    {
        "content": "<p>and it <em>is</em> likely to help everyone to some degree</p>",
        "id": 224496586,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937591
    },
    {
        "content": "<p>I agree that it may not maximize the benefits on weak hardware</p>",
        "id": 224496620,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937607
    },
    {
        "content": "<p>But I also think - ultimately - it is unlikely to <em>hurt</em></p>",
        "id": 224496655,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937620
    },
    {
        "content": "<p>Look, here's another example: I don't know how many people cannot do incremental in practice due to disk space usage issues</p>",
        "id": 224496658,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937621
    },
    {
        "content": "<p>so if I spend a lot of time making incremental performance awesome</p>",
        "id": 224496708,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937643
    },
    {
        "content": "<p>I think surveying for \"how much disk space\" would be quite reasonable</p>",
        "id": 224496718,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937647
    },
    {
        "content": "<p>without addressing the disk space usage problem</p>",
        "id": 224496723,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937648
    },
    {
        "content": "<p>It might also be worth testing on all major platforms. If most compiler contributors are on MacOS or Linux, they might not be aware of slowness on Windows. But I think we're covered on that front?</p>",
        "id": 224496726,
        "sender_full_name": "Laurențiu",
        "timestamp": 1611937649
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu Nicola</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224496726\">said</a>:</p>\n<blockquote>\n<p>It might also be worth it to test on all major platforms. If most compiler contributors are on MacOS or Linux, they might not be aware of slowness on Windows</p>\n</blockquote>\n<p>yeah I think <span class=\"user-mention\" data-user-id=\"116107\">@davidtwco</span> pointed out something similar.</p>",
        "id": 224496789,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937675
    },
    {
        "content": "<p>what I am saying is that <em>if</em> we survey, I sort of want us to have some idea of brackets, and it's hard to do that right now</p>",
        "id": 224496793,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937678
    },
    {
        "content": "<p>Another approach here</p>",
        "id": 224496859,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937687
    },
    {
        "content": "<p>the survey doesn't have to be big cost</p>",
        "id": 224496878,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937696
    },
    {
        "content": "<p>we could build it into x.py</p>",
        "id": 224496888,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937699
    },
    {
        "content": "<p>e.g. for disk space, I would rather ask \"can you dedicate 50GB to rustc\", not \"how much disk space do you have?\"</p>",
        "id": 224496890,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937700
    },
    {
        "content": "<p>where it just samples the info, and asks the contributor if they're comfortable sending it back to us</p>",
        "id": 224496927,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937719
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224496888\">said</a>:</p>\n<blockquote>\n<p>we could build it into x.py</p>\n</blockquote>\n<p>I can personally say I'd probably fill it out once or twice but not more</p>",
        "id": 224496932,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937721
    },
    {
        "content": "<p>Opt-in build telemetry? :)</p>",
        "id": 224496944,
        "sender_full_name": "Laurențiu",
        "timestamp": 1611937726
    },
    {
        "content": "<p>like, even if it's just a click</p>",
        "id": 224496954,
        "sender_full_name": "simulacrum",
        "timestamp": 1611937729
    },
    {
        "content": "<p>I worry that timing measurements are \"only\" going to be a proxy for the hardware people have access to.</p>",
        "id": 224496983,
        "sender_full_name": "Esteban Küber",
        "timestamp": 1611937743
    },
    {
        "content": "<p>Okay?</p>",
        "id": 224497075,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937781
    },
    {
        "content": "<p>as in, we're better off asking what hardware they have directly?</p>",
        "id": 224497109,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937791
    },
    {
        "content": "<p>(which is, to be honest, part of what I was imagining could be built into x.py)</p>",
        "id": 224497188,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937809
    },
    {
        "content": "<p>not without asking what they are using it for?</p>",
        "id": 224497216,
        "sender_full_name": "oliver",
        "timestamp": 1611937818
    },
    {
        "content": "<p>(of course we again run into potential privacy issues.)</p>",
        "id": 224497237,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937824
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281739\">oliver</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224497216\">said</a>:</p>\n<blockquote>\n<p>not without asking what they are using it for?</p>\n</blockquote>\n<p>Sorry, what? Asking the contributor what they are building rustc for, you mean?</p>",
        "id": 224497348,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611937865
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu Nicola</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224496275\">said</a>:</p>\n<blockquote>\n<p>(How long does a no-op <code>./x.py check</code> take these days?)</p>\n</blockquote>\n<div class=\"codehilite\"><pre><span></span><code>&gt; time xpy check\nUpdating only changed submodules\nSubmodules updated in 0.01 seconds\n    Finished dev [unoptimized + debuginfo] target(s) in 0.09s\nChecking stage0 std artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)\n    Finished release [optimized + debuginfo] target(s) in 0.09s\nChecking stage0 compiler artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)\n    Finished release [optimized + debuginfo] target(s) in 0.13s\nChecking stage0 rustdoc artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)\n    Finished release [optimized + debuginfo] target(s) in 0.09s\nChecking stage0 cranelift artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)\n    Finished release [optimized + debuginfo] target(s) in 0.03s\nChecking stage0 clippy artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)\n    Finished release [optimized + debuginfo] target(s) in 0.09s\nChecking stage0 bootstrap artifacts (x86_64-unknown-linux-gnu -&gt; x86_64-unknown-linux-gnu)\n    Finished release [optimized + debuginfo] target(s) in 0.09s\nBuild completed successfully in 0:00:01\n\nreal    0m1.335s\nuser    0m1.201s\nsys 0m0.168s\n</code></pre></div>",
        "id": 224497390,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611937875
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224497348\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"281739\">oliver</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224497216\">said</a>:</p>\n<blockquote>\n<p>not without asking what they are using it for?</p>\n</blockquote>\n<p>Sorry, what? Asking the contributor what they are building rustc for, you mean?</p>\n</blockquote>\n<p>in what ways they are they building yes</p>",
        "id": 224497481,
        "sender_full_name": "oliver",
        "timestamp": 1611937913
    },
    {
        "content": "<p>still confused, sorry</p>",
        "id": 224497917,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611938047
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"281739\">@oliver</span> can you spell out what you were objecting to? I've said so many objectionable things, I cannot keep them all straight.</p>",
        "id": 224498010,
        "sender_full_name": "pnkfelix",
        "timestamp": 1611938085
    },
    {
        "content": "<p>As in rustdoc vs stdlib vs rustc?</p>",
        "id": 224498019,
        "sender_full_name": "Esteban Küber",
        "timestamp": 1611938087
    },
    {
        "content": "<p>it's a sampling problem, on one hand there are millions of combinations of hardware<br>\nand on the other hand probably many thousands of  ways of building rust</p>",
        "id": 224498178,
        "sender_full_name": "oliver",
        "timestamp": 1611938131
    },
    {
        "content": "<p>Also, I find that cargo check is not as useful to me. I usually need to get to the point of running a specific test with debug log printing to figure things out.</p>",
        "id": 224498179,
        "sender_full_name": "Esteban Küber",
        "timestamp": 1611938131
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281739\">oliver</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224498178\">said</a>:</p>\n<blockquote>\n<p>it's a sampling problem, on one hand there are millions of combinations of hardware<br>\nand on the other hand probably many thousands of  ways of building rust</p>\n</blockquote>\n<p>I don't think we need to know every possible way to build rust to improve the common cases</p>",
        "id": 224498263,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938156
    },
    {
        "content": "<p>and I don't think gathering all that data should be a goal</p>",
        "id": 224498326,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938166
    },
    {
        "content": "<p>but if you ask for a random sample there is going to be a lot of noise</p>",
        "id": 224498357,
        "sender_full_name": "oliver",
        "timestamp": 1611938180
    },
    {
        "content": "<p>and it's not clear you wouldn't be better off setting up a controlled experiment</p>",
        "id": 224498460,
        "sender_full_name": "oliver",
        "timestamp": 1611938217
    },
    {
        "content": "<p>I think that's the takeaway, yes, we should improve cases we know about first before asking for more data in a survey</p>",
        "id": 224498553,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938259
    },
    {
        "content": "<p>Do we have any wording in our contributor documentation that tries to set expectations about the hardware and time that's currently necessary to build rustc? It's not a solution, but it'd be better if people knew going in that it might be slow or use a lot of resources, rather than finding that out after they've went and read about a bug to solve or w/e.</p>",
        "id": 224498663,
        "sender_full_name": "davidtwco",
        "timestamp": 1611938291
    },
    {
        "content": "<p>yes, let me find it</p>",
        "id": 224498694,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938303
    },
    {
        "content": "<p><a href=\"https://rustc-dev-guide.rust-lang.org/getting-started.html#system-requirements\">https://rustc-dev-guide.rust-lang.org/getting-started.html#system-requirements</a></p>",
        "id": 224498707,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938309
    },
    {
        "content": "<p>Ah, great, I should have just went and checked <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 224498727,
        "sender_full_name": "davidtwco",
        "timestamp": 1611938320
    },
    {
        "content": "<p>I would be interested to find out whether or not the current 'default' build<br>\nas it's bundled is actually the optimal performance setting</p>",
        "id": 224499058,
        "sender_full_name": "oliver",
        "timestamp": 1611938451
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"281739\">oliver</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224499058\">said</a>:</p>\n<blockquote>\n<p>I would be interested to find out whether or not the current 'default' build<br>\nas it's bundled is actually the optimal performance setting</p>\n</blockquote>\n<p>I don't think 'optimal performance setting' should be a goal tbh, <code>debug = true</code> can slow things down but also makes the build much more useful</p>",
        "id": 224499117,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938483
    },
    {
        "content": "<p>I really think we should focus on making the common case better, since it will help <em>every</em> kind of build</p>",
        "id": 224499144,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938497
    },
    {
        "content": "<p>the common case isn't just pull from master and compile?</p>",
        "id": 224499273,
        "sender_full_name": "oliver",
        "timestamp": 1611938538
    },
    {
        "content": "<p>by \"common case\" I mean \"things that are true no matter your configuration\"</p>",
        "id": 224499312,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938557
    },
    {
        "content": "<p>e.g. rustc_middle will be slow no matter what</p>",
        "id": 224499318,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1611938564
    },
    {
        "content": "<p>I agree with you, just that personally this discussion makes me doubt<br>\nmy configuration and I'm not sure what to do about it <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 224499638,
        "sender_full_name": "oliver",
        "timestamp": 1611938688
    },
    {
        "content": "<p>though fwiw I still doubt sending you my specs will influence anything</p>",
        "id": 224499778,
        "sender_full_name": "oliver",
        "timestamp": 1611938739
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224496658\">said</a>:</p>\n<blockquote>\n<p>Look, here's another example: I don't know how many people cannot do incremental in practice due to disk space usage issues</p>\n</blockquote>\n<p>I can't use incremental due to the disk space usage requirement. I may be a bit of an extreme example, but I need to regularly clean my target dirs even when not building rustc. Right now I for example have 1.9GB of free space. When cleaning all my target dirs I have about 5GB of free space.</p>",
        "id": 224504277,
        "sender_full_name": "bjorn3",
        "timestamp": 1611940528
    },
    {
        "content": "<p>I did that for a couple of years, then finally got a 1 TB SSD :-) (and more or less stopped coding anyway :(). Might be harder on a Mac.</p>",
        "id": 224506756,
        "sender_full_name": "Laurențiu",
        "timestamp": 1611941621
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224496658\">said</a>:</p>\n<blockquote>\n<p>Look, here's another example: I don't know how many people cannot do incremental in practice due to disk space usage issues</p>\n</blockquote>\n<p>I have enough space for it, but I can definitely imagine that for many people 30 GB of build artifacts is too much <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 224522928,
        "sender_full_name": "Noah Lev",
        "timestamp": 1611949245
    },
    {
        "content": "<p>(Which is how large one of my <code>build/</code> dirs is.)</p>",
        "id": 224523023,
        "sender_full_name": "Noah Lev",
        "timestamp": 1611949288
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"119031\">Esteban Küber</span> <a href=\"#narrow/stream/131828-t-compiler/topic/contributor.20survey.20in.20advance.20of.202021.20sprint.201/near/224498179\">said</a>:</p>\n<blockquote>\n<p>Also, I find that cargo check is not as useful to me. I usually need to get to the point of running a specific test with debug log printing to figure things out.</p>\n</blockquote>\n<p>I rarely use <code>x.py check</code>, but recently I've been refactoring a bit in rustdoc and it blew me away how much faster it is than <code>x.py build</code> <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 224523577,
        "sender_full_name": "Noah Lev",
        "timestamp": 1611949525
    },
    {
        "content": "<p>Building rustc was definitely one of the main reasons I recently bought a bigger SSD ^^</p>",
        "id": 224536319,
        "sender_full_name": "Nadrieril",
        "timestamp": 1611955809
    }
]
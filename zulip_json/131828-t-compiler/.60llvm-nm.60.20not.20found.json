[
    {
        "content": "<p>Hello, I just cloned the compiler and run the test-suite. Commit: <code>g6d7aa4763fe</code>, it seems that with <code>download-ci-llvm = true</code> in <code>config.toml</code>, I get the following failures with <code>./x.py test</code>:</p>\n<div class=\"codehilite\"><pre><span></span><code>---- [run-make] run-make-fulldeps/static-nobundle stdout ----\n\nerror: make failed\nstatus: exit status: 2\ncommand: &quot;make&quot;\nstdout:\n------------------------------------------\ncc -ffunction-sections -fdata-sections -fPIC -m64 -arch x86_64 -stdlib=libc++ -c -o /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle/libaaa.o aaa.c\nar crus /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle/libaaa.a /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle/libaaa.o\nDYLD_LIBRARY_PATH=&quot;/Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle:/Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/stage1/lib:&quot; &#39;/Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/stage1/bin/rustc&#39; --out-dir /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle -L /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle  bbb.rs --crate-type=rlib\n# Check that bbb does NOT contain the definition of `native_func`\n# We&#39;re using the llvm-nm instead of the system nm to ensure it\n# is compatible with the LLVM bitcode generated by rustc.\n&quot;/Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/ci-llvm/bin/llvm-nm&quot; /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle/libbbb.rlib | &quot;/Users/hameerabbasi/Quansight/rust/src/etc/cat-and-grep.sh&quot; -ve &quot;T _*native_func&quot;\n[[[ begin stdout ]]]\n\n[[[ end stdout ]]]\n&quot;/Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/ci-llvm/bin/llvm-nm&quot; /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle/libbbb.rlib | &quot;/Users/hameerabbasi/Quansight/rust/src/etc/cat-and-grep.sh&quot; -e &quot;U _*native_func&quot;\n[[[ begin stdout ]]]\n\n[[[ end stdout ]]]\nError: cannot match: U _*native_func\nrm /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/test/run-make-fulldeps/static-nobundle/static-nobundle/libaaa.o\n\n------------------------------------------\nstderr:\n------------------------------------------\nwarning: library kind `static-nobundle` has been superseded by specifying modifier `-bundle` with library kind `static`\n --&gt; bbb.rs:4:22\n  |\n4 | #[link(name = &quot;aaa&quot;, kind = &quot;static-nobundle&quot;)]\n  |                      ^^^^^^^^^^^^^^^^^^^^^^^^\n\nwarning: 1 warning emitted\n\n/bin/dash: 1: /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/ci-llvm/bin/llvm-nm: not found\n/bin/dash: 1: /Users/hameerabbasi/Quansight/rust/build/x86_64-apple-darwin/ci-llvm/bin/llvm-nm: not found\nmake: *** [all] Error 1\n\n------------------------------------------\n\n\n\nfailures:\n    [run-make] run-make-fulldeps/static-nobundle\n\ntest result: FAILED. 0 passed; 1 failed; 228 ignored; 0 measured; 0 filtered out; finished in 0.13s\n</code></pre></div>",
        "id": 272595626,
        "sender_full_name": "Hameer Abbasi",
        "timestamp": 1645367270
    },
    {
        "content": "<p>Likely caused by <a href=\"https://github.com/rust-lang/rust/issues/94023\">#94023</a>.</p>",
        "id": 272596549,
        "sender_full_name": "bjorn3",
        "timestamp": 1645368424
    },
    {
        "content": "<p>Hm, probably we need to bump the stamp to download a new copy with llvm-nm included</p>",
        "id": 272597677,
        "sender_full_name": "simulacrum",
        "timestamp": 1645369642
    },
    {
        "content": "<p>Where's this stamp?</p>",
        "id": 272802823,
        "sender_full_name": "Krasimir Georgiev",
        "timestamp": 1645536943
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/blob/master/src/bootstrap/download-ci-llvm-stamp\">https://github.com/rust-lang/rust/blob/master/src/bootstrap/download-ci-llvm-stamp</a></p>",
        "id": 272803344,
        "sender_full_name": "bjorn3",
        "timestamp": 1645537193
    },
    {
        "content": "<p>thank you! <a href=\"https://github.com/rust-lang/rust/pull/94259\">https://github.com/rust-lang/rust/pull/94259</a></p>",
        "id": 272804237,
        "sender_full_name": "Krasimir Georgiev",
        "timestamp": 1645537563
    }
]
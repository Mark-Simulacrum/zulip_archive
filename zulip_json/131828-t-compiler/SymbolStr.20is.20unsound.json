[
    {
        "content": "<p>Every time I use SymbolStr I feel that its soundness is fishy, and I just realized it is indeed unsound since you can get <code>&amp;'static str</code> from <code>SymbolStr</code> with <code>&amp;**Box::leak(Box::new(x))</code></p>",
        "id": 255901319,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633211844
    },
    {
        "content": "<p>cc <a href=\"https://github.com/rust-lang/rust/issues/83295\">https://github.com/rust-lang/rust/issues/83295</a></p>",
        "id": 255902211,
        "sender_full_name": "simulacrum",
        "timestamp": 1633212765
    },
    {
        "content": "<p>but yeah, this is \"known\"</p>",
        "id": 255902213,
        "sender_full_name": "simulacrum",
        "timestamp": 1633212769
    },
    {
        "content": "<p>Couldn't it just be changed from <code>as_str(self) -&gt; SymbolStr</code> to <code>with_str&lt;F: FnOnce(&amp;str)&gt;(self, f: F)</code>?</p>",
        "id": 255903026,
        "sender_full_name": "Gary Guo",
        "timestamp": 1633213599
    },
    {
        "content": "<p>I think \"yes\", but that complicates all the call sites and makes them generally pretty painful</p>",
        "id": 255903327,
        "sender_full_name": "simulacrum",
        "timestamp": 1633213931
    }
]
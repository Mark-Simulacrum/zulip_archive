[
    {
        "content": "<p>Hi all. I'm dealing with <a href=\"https://github.com/rust-lang/rust/issues/79009\">#79009</a>, as I have already described in <a href=\"https://github.com/rust-lang/rust/issues/79009#issuecomment-826952708\">https://github.com/rust-lang/rust/issues/79009#issuecomment-826952708</a>.</p>\n<p>An important problem is that different versions of GDB can have different behaviors. Older GDB treats generators as structs and newer GDB treats generators as enums (the latter is consistent with rustc). So we may need something like</p>\n<div class=\"codehilite\"><pre><span></span><code> // max-gdb-version 9.2\n</code></pre></div>\n<p>or</p>\n<div class=\"codehilite\"><pre><span></span><code> // define-gdb-prefix old 8.0 ..= 9.2\n // define-gdb-prefix new 9.2 ..= 10.2\n</code></pre></div>\n<p>or even this</p>\n<div class=\"codehilite\"><pre><span></span><code> // define-gdb-prefix old ..= 9.2\n // define-gdb-prefix new 9.2 ..\n</code></pre></div>\n<p>which means we use <code>gdb-old</code> if the version of GDB is less than or equal to 9.2 and we use <code>gdb-new</code> otherwise (i.e. if the version of GDB is greater than 9.2).<br>\nTherefore, it enables us to write</p>\n<div class=\"codehilite\"><pre><span></span><code> // gdb-command:print b\n // gdb-old-check:$1 = generator_objects::main::generator-0 {__0: 0x[...], &lt;&lt;variant&gt;&gt;: {[...]}}\n // gdb-new-check:$1 = generator_objects::main::generator-0::Suspend0{c: 6, d: 7}\n</code></pre></div>\n<p>I think it is useful. Currently it seems that we only have <code>min-gdb-version</code> and <code>ignore-gdb-version</code> and they are not enough.</p>\n<p>Does this make sense?</p>",
        "id": 236285090,
        "sender_full_name": "lrh2000",
        "timestamp": 1619500957
    }
]
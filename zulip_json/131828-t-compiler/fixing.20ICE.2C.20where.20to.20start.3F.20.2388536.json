[
    {
        "content": "<p>putting the constant in their own <code>const</code> definition and then using it in the alias doesn't panic either</p>",
        "id": 262478536,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637684699
    },
    {
        "content": "<p>ok I got the logs <a href=\"/user_uploads/4715/Dt0oQtezluYcMrwDySyLc-nn/logs.txt\">logs.txt</a></p>",
        "id": 262480067,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637685460
    },
    {
        "content": "<p>it seems this is happening when calling <code>process_method_call</code> for the <code>end</code> method.</p>",
        "id": 262480465,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637685631
    },
    {
        "content": "<p>so I guess nobody is setting the <code>typeck_results</code> to <code>Some(_)</code> for exprs inside type aliases</p>",
        "id": 262480785,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637685799
    },
    {
        "content": "<p>The only method setting <code>maybe_typeck_results</code> is <code>nest_typeck_results</code> so I'd say it needs to be called before we visit the TyAlias item.</p>",
        "id": 262481783,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637686322
    },
    {
        "content": "<p>seems reasonable :) <span class=\"user-mention\" data-user-id=\"232957\">@Jack Huey</span> would know better than me though</p>",
        "id": 262483154,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1637686855
    },
    {
        "content": "<p>I'm actually not quite sure tbh</p>",
        "id": 262483342,
        "sender_full_name": "Jack Huey",
        "timestamp": 1637686936
    },
    {
        "content": "<p>Ok so inside <code>visit_ty</code> there is this arm for <code>Path</code>s</p>",
        "id": 262485229,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637687785
    },
    {
        "content": "<p>I think nobody is processing the constants inside the generic parameters of the segments</p>",
        "id": 262485257,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637687805
    },
    {
        "content": "<p>and then when we visit said constant we get the panic</p>",
        "id": 262489741,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637689629
    },
    {
        "content": "<p>I tried to call <code>nest_typeck_results</code> while processing a type alias and these are the logs:</p>\n<div class=\"codehilite\"><pre><span></span><code>INFO rustc_save_analysis Dumping crate playground\nDEBUG rustc_save_analysis::dump_visitor visit_item Item { ident: #0, def_id: DefId(0:1 ~ playground[19ef]::{misc#0}), ...\nDEBUG rustc_save_analysis::dump_visitor visit_item Item { ident: std#1, def_id: DefId(0:2 ~ playground[19ef]::std), ...\nDEBUG rustc_save_analysis::dump_visitor visit_item Item { ident: Foo#0, def_id: DefId(0:3 ~ playground[19ef]::Foo),  ...\nDEBUG rustc_save_analysis::dump_visitor process_struct Item { ident: Foo#0, def_id: DefId(0:3 ~ playground[19ef]::Foo), ...\nDEBUG rustc_save_analysis::dump_visitor nest_typeck_results DefId(0:3 ~ playground[19ef]::Foo)\nDEBUG rustc_save_analysis::dump_visitor visit_item Item { ident: Bar#0, def_id: DefId(0:6 ~ playground[19ef]::Bar), ...\nDEBUG rustc_save_analysis::dump_visitor nest_typeck_results DefId(0:6 ~ playground[19ef]::Bar)\nDEBUG rustc_save_analysis::dump_visitor visit_expr Block(Block { stmts: [], expr: Some(Expr { hir_id: HirId { owner: DefId(0:6 ~ playground[19ef]::Bar), local_id: 9 }, ...\nDEBUG rustc_save_analysis::dump_visitor visit_expr Unary(Deref, Expr { hir_id: HirId { owner: DefId(0:6 ~ playground[19ef]::Bar), local_id: 8 }, ...\nDEBUG rustc_save_analysis::dump_visitor visit_expr MethodCall(PathSegment { ident: end#0, hir_id: Some(HirId { owner: DefId(0:6 ~ playground[19ef]::Bar), local_id: 3 }), ...\nDEBUG rustc_save_analysis::dump_visitor process_method_call Expr { hir_id: HirId { owner: DefId(0:6 ~ playground[19ef]::Bar), local_id: 8 }, ...\n</code></pre></div>",
        "id": 262497997,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637693657
    },
    {
        "content": "<p>So I'm calling <code>nest_typeck_results</code> on <code>DefId(0:6 ~ playground[19ef]::Bar)</code> (which is the alias) but then when <code>process_method_call</code> gets called it still panics.</p>",
        "id": 262498129,
        "sender_full_name": "Christian Poveda",
        "timestamp": 1637693720
    }
]
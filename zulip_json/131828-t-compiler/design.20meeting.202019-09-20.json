[
    {
        "content": "<p>Dear <span class=\"user-group-mention\" data-user-group-id=\"897\">@T-compiler/meeting</span>: Design meeting today in <strong>20 minutes</strong>. </p>\n<p>Topic: Target tier policy, <a href=\"https://github.com/rust-lang/compiler-team/issues/166\" target=\"_blank\" title=\"https://github.com/rust-lang/compiler-team/issues/166\">compiler-team#166</a></p>\n<p>Feel free to pre-read <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span>'s <a href=\"https://gist.github.com/joshtriplett/40191791541ea2a3d61b7fe1d381a0e7\" target=\"_blank\" title=\"https://gist.github.com/joshtriplett/40191791541ea2a3d61b7fe1d381a0e7\">proposal</a> =)</p>",
        "id": 176193713,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568987019
    },
    {
        "content": "<p>Also: looking for volunteers to do a summary after the fact.</p>\n<p>Example: <a href=\"https://github.com/rust-lang/compiler-team/pull/173\" target=\"_blank\" title=\"https://github.com/rust-lang/compiler-team/pull/173\">https://github.com/rust-lang/compiler-team/pull/173</a> (which summarized our last design meeting)</p>",
        "id": 176193791,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568987057
    },
    {
        "content": "<p>I'm here and ready.</p>",
        "id": 176194158,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568987334
    },
    {
        "content": "<p>BTW, <span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span>, are you able to attend this meeting about target tierse? I, uh, meant to ask you earlier, but I don't think I did.</p>",
        "id": 176194773,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568987822
    },
    {
        "content": "<p>o/</p>",
        "id": 176195089,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568988060
    },
    {
        "content": "<p>OK <span class=\"user-group-mention\" data-user-group-id=\"897\">@T-compiler/meeting</span> -- design meeting is now. I'll give till 10:03 for people to show up</p>",
        "id": 176195121,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988084
    },
    {
        "content": "<h1>Announcements</h1>",
        "id": 176195122,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988084
    },
    {
        "content": "<p>OK, shall we get started?</p>",
        "id": 176195375,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988250
    },
    {
        "content": "<p>I guess not a lot of announcements since yesterday :)</p>",
        "id": 176195381,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988256
    },
    {
        "content": "<p><span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 176195389,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988261
    },
    {
        "content": "<p>I'll just add one: next week is the planning meeting</p>",
        "id": 176195390,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988262
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span>, care to start?</p>",
        "id": 176195395,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988267
    },
    {
        "content": "<p>So: I've gotten various review requests for adding new targets (at tier 3), other people have as well, and everyone has thus far just evaluated them independently and assumed sufficient authority to accept them, while often observing the lack of a policy anywhere to support them.</p>",
        "id": 176195575,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988377
    },
    {
        "content": "<p>I've also had discussions with people about what it takes to move targets up to a higher tier.</p>",
        "id": 176195594,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988395
    },
    {
        "content": "<p>I'd like to add that I feel like (a) I often don't know what tier something is and (b) it's very confusing to me how to prioritize bugs that are not in \"mainstream\" platforms</p>",
        "id": 176195600,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988408
    },
    {
        "content": "<p>And for that, the answer has always firmly been \"I don't know\", with perhaps a dash of \"maybe ask the core team or something\".</p>",
        "id": 176195604,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988412
    },
    {
        "content": "<p>(from POV of \"compiler team dev\")</p>",
        "id": 176195609,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988416
    },
    {
        "content": "<p>I also feel that tier policy is something that needs to very carefully consider the failure modes that it can fall into.</p>",
        "id": 176195732,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988503
    },
    {
        "content": "<p>Thinking about it from a perspective of how we prioritize things: when we make a target tier 2, or tier 1, as far as I can tell we currently assume that this means anyone who breaks the build or tests has the sole responsibility to fix it. Even if for a platform they don't understand or have access to.</p>",
        "id": 176195774,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988545
    },
    {
        "content": "<p>wait is that right? Do we do CI for all of our tier 2 targets?</p>",
        "id": 176195831,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568988582
    },
    {
        "content": "<p>we do cross-compiling for all tier 2 targets</p>",
        "id": 176195845,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568988596
    },
    {
        "content": "<p>Can we just review briefly what tier 1/2/3 mean?</p>",
        "id": 176195847,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988597
    },
    {
        "content": "<p>Let's, yes.</p>",
        "id": 176195913,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988616
    },
    {
        "content": "<p>(then some tier 2 target also run their tests inside qemu today)</p>",
        "id": 176195922,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568988622
    },
    {
        "content": "<p>I think it is:</p>\n<p>- Tier 1 -- fully supported. We run tests and fix bugs.<br>\n- Tier 2 -- we run builds, but do not run tests; I am not clear on how much we support this<br>\n- Tier 3 -- we let you land code but do not block on it building</p>",
        "id": 176195944,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988637
    },
    {
        "content": "<p>Right now: tier 3 means \"this target exists in the source and people can build it if they want\". There are some tier 3 targets for which we also build binaries for rustup. Then tier 2 means we guarantee builds but not tests passing, and tier 1 means we guarantee builds and tests.</p>",
        "id": 176195966,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988655
    },
    {
        "content": "<p>do we distribute all tier 2 targets with rustup?</p>",
        "id": 176195986,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988672
    },
    {
        "content": "<p>to add to that, in practice \"tier 2\" we actually test some one CI, so we effectively put the burden on PR authors to fix tests. For \"tier 3\" there's also a strong sentiment that you should fix platforms in your PR if it's small, so it's effectively that we do frequently block on building it (asking users to build it locally)</p>",
        "id": 176196007,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988695
    },
    {
        "content": "<p><a href=\"https://forge.rust-lang.org/release/platform-support.html\" target=\"_blank\" title=\"https://forge.rust-lang.org/release/platform-support.html\">https://forge.rust-lang.org/release/platform-support.html</a></p>",
        "id": 176196015,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988704
    },
    {
        "content": "<p>tbh the tier distinction I think is pretty fuzzy today and there's probably more exceptions to the rules than there are rules</p>",
        "id": 176196023,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988716
    },
    {
        "content": "<blockquote>\n<p>do we distribute all tier 2 targets with rustup?</p>\n</blockquote>\n<p>mostly, there is a \"tier 2.5\" that's not shipped but built</p>",
        "id": 176196078,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568988727
    },
    {
        "content": "<p>it may be best to go over <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span>'s proposal for new tiers though?</p>",
        "id": 176196089,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988733
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> are you saying we test <strong>some</strong> Tier 2 targets on CI? (but not all)</p>",
        "id": 176196091,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> correct yeah, for example wasm/arm/aarch64 are all \"tier 2\" but we test them on CI (same w/ emscripten)</p>",
        "id": 176196103,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988756
    },
    {
        "content": "<p>One other interesting distinction...</p>",
        "id": 176196115,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988766
    },
    {
        "content": "<p>that's where the current tier distinction is probably too fuzzy to talk about since it's just so fuzzy with so many exceptions</p>",
        "id": 176196126,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988774
    },
    {
        "content": "<p>For tier 2, we don't test builds of <code>rustc</code> itself (e.g. for raspberry Pi), right? I think that has been a reason we see some bugs arise that compiler team is not prepared to address</p>",
        "id": 176196136,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568988785
    },
    {
        "content": "<p>Some targets are things that we actually build <em>hosted toolchains</em> for (such as a binary of rustc and cargo running <em>on</em> ARM Linux), but most targets we just cross-compile std and core.</p>",
        "id": 176196155,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988802
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> correct we only actually run compilers on x86/x86_64 platforms</p>",
        "id": 176196156,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988803
    },
    {
        "content": "<p>(note that whether or not we build rustc/cargo for a target also frequently evolves over time to add more wrenches)</p>",
        "id": 176196194,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568988834
    },
    {
        "content": "<p>OK. So I agree it's probably not worth getting too far into the weeds of what we do today, but I do think it's worth trying to highlight all the \"columns\" -- i.e., the traditional tier description leaves out lots of important details (which may even indicate we want more tiers...)</p>",
        "id": 176196258,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988853
    },
    {
        "content": "<p>For today, I don't think we need to cover \"which platforms do we build rustc and cargo for\". That's less a <em>support</em> policy than it is a \"which platforms do people need\" policy.</p>",
        "id": 176196269,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988862
    },
    {
        "content": "<p>What I do want to cover is the tier policy proposal. I wrote it up largely as a straw proposal, to garner feedback, but I <em>think</em> I covered most of what we're likely to care about for adding new tiers.</p>",
        "id": 176196351,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988935
    },
    {
        "content": "<p>To me, though the high order bit is what level of support we are expected to provide when things go wrong. I think then it is kind of:</p>\n<p>- Tier 3 -- none at all.<br>\n- Tier 2 -- Rust org will notify you, but there should be some dedicated folks who will fix independently (sort of like tools)<br>\n- Tier 1 -- we block PRs (and maybe WASM is just misclassified, for example) ?</p>",
        "id": 176196356,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988938
    },
    {
        "content": "<p>yep, sounds good, sorry</p>",
        "id": 176196366,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568988947
    },
    {
        "content": "<p>That's an interesting point, actually.</p>",
        "id": 176196431,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988968
    },
    {
        "content": "<p>(we block PRs on some arm virtualized testing too)</p>",
        "id": 176196437,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568988975
    },
    {
        "content": "<p>There are some \"tier 2\" platforms for which we <em>should</em> run tests.</p>",
        "id": 176196438,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568988977
    },
    {
        "content": "<p>But also, I would argue that for both tier 2 and tier 1, we do need dedicated folks \"on call\" who care about a target, unless we specifically say that it's a target for which we can expect everyone to pitch in with no special expertise needed.</p>",
        "id": 176196508,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989026
    },
    {
        "content": "<p>Today, at least, we do block PRs on tier 2 building and tier 1 passing tests.</p>",
        "id": 176196579,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989082
    },
    {
        "content": "<p>(And on some tier 2 passing tests.)</p>",
        "id": 176196619,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989087
    },
    {
        "content": "<p>I agree with <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span>'s observation that in practice we do treat WASM targets as tier 1.</p>",
        "id": 176196638,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989105
    },
    {
        "content": "<p>(And we ought to put out a press release to that effect. ;) )</p>",
        "id": 176196648,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989117
    },
    {
        "content": "<p>I definitely like the idea of \"dedicated folks\"</p>",
        "id": 176196679,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989148
    },
    {
        "content": "<p>I think the tier 2 / tier 1 distinction still makes sense: guaranteed build versus guaranteed tests pass.</p>",
        "id": 176196681,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989150
    },
    {
        "content": "<p>should we use a different term than \"tier X\", and instead maintain a table, with instructions on what to do in order for a platform to get a check mark</p>",
        "id": 176196717,
        "sender_full_name": "Tshepang Lekhonkhobe",
        "timestamp": 1568989175
    },
    {
        "content": "<p>I've also thought about having \"instructions for debugging problems\" -- i.e., I'd like to know how to run qemu etc</p>",
        "id": 176196732,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989195
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Yeah, that's a good idea.</p>",
        "id": 176196802,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989235
    },
    {
        "content": "<p>In the proposal I had this: \"should use any such issue as an opportunity to educate the Rust community about portability to their target.\"</p>",
        "id": 176196807,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989241
    },
    {
        "content": "<blockquote>\n<p>should we use a different term than \"tier X\", and instead maintain a table, with instructions on what to do in order for a platform to get a check mark</p>\n</blockquote>\n<p>(I was wondering the same, and it's probably a good idea, but I do think it's still useful to have broad categories -- i.e., to be tier 1, you need all these boxes checked -- in any case I think we can defer this detail slightly)</p>",
        "id": 176196858,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989283
    },
    {
        "content": "<p>But I'm going to add a bullet point saying \"If possible, instructions for the Rust community for how to build and run tests for the platform, ideally using emulation.\"</p>",
        "id": 176196863,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989285
    },
    {
        "content": "<p>I guess I would say that, absent such instructions, they should not expect any assistance -- and we should not block on tests :)</p>",
        "id": 176196891,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989306
    },
    {
        "content": "<p>Yeah, you <em>have</em> to have such instructions for tier 1 (though they're allowed to be \"you need xyz hardware\"), and you <em>should</em> have such instructions for tier 2 or if not you're expected to be pageable at 3am. :)</p>",
        "id": 176196972,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989358
    },
    {
        "content": "<p>Any thoughts on the proposal requirements as written? Would it be helpful for me to go over the tiers one by one?</p>",
        "id": 176197122,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989496
    },
    {
        "content": "<p>When it comes to this idea of \"dedicated folks\" to contact for Tier 2 issues, that the set of such folks needs to be larger than 1 person for support to be viable? and if this is right, do we have any idea where the threshold lies?</p>",
        "id": 176197130,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568989504
    },
    {
        "content": "<p>One thing I think is pretty important to consider here as well is that we've got a relatively good track record of figuring out what tiers are. Although it slightly changes over time we generally all seem to always have agreement there's three tiers and a vague sense of commonality amongst the requirements. What I don't think we have a great process for is movement between tiers and addition to tiers. For example wasm didn't exactly go through a formal process to get tested on CI (nor did really anything else). I think it's definitely important to flesh out the process a bit in terms of how things get added to tiers, where/when they get moved, etc.</p>",
        "id": 176197154,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568989526
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span>'s proposal highlights much of this already, just wanted to highlight the highlight</p>",
        "id": 176197169,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568989542
    },
    {
        "content": "<blockquote>\n<p>if not you're expected to be pageable at 3am. :)</p>\n</blockquote>\n<p>regarding that, a thing I haven't seen addressed in the proposal is what happens when some requirements are not meet anymore, do we downgrade tiers? is that a breaking change (I think so)?</p>",
        "id": 176197226,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568989567
    },
    {
        "content": "<blockquote>\n<p>I think it's definitely important to flesh out the process a bit in terms of how things get added to tiers, where/when they get moved, etc.</p>\n</blockquote>\n<p>yes, I wanted to emphasize this -- and also that the doc doesn't mention the release or infra teams, but it seems like they have a role in this too</p>",
        "id": 176197239,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989580
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> I think I'd put it this way:<br>\nThe easier your target is for people to handle, the less people you need on call.</p>",
        "id": 176197245,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989582
    },
    {
        "content": "<p>(my question <em>may</em> be in the weeds, but it seems relevant in terms of giving guidance as to when a target could possibly be promoted from tier 3 to tier 2)</p>",
        "id": 176197255,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568989594
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> I did mention those teams, actually.</p>",
        "id": 176197266,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989608
    },
    {
        "content": "<p>(ok, I missed it <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span>)</p>",
        "id": 176197278,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989617
    },
    {
        "content": "<blockquote>\n<p>is that a breaking change (I think so)?</p>\n</blockquote>\n<p>I think only Tier 1 should carry any expectation of permanence</p>",
        "id": 176197323,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989650
    },
    {
        "content": "<p>to some degree there's also \"breaking changes\" compatibility within a tier, for example how much of a breaking change is it to increase our kernel requirement for libstd on x86_64 Linux? Increasing the required emscripten version for the emscripten targets? Adding atomics to a wasm target? (etc)</p>",
        "id": 176197328,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568989655
    },
    {
        "content": "<p>sorry I don't want to pile on too much here</p>",
        "id": 176197340,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568989665
    },
    {
        "content": "<p>not sure how much release is interested in this -- infra should be at least consulted even on tier 2 though, if only for CI capacity</p>",
        "id": 176197362,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568989680
    },
    {
        "content": "<p>I just added a new point under all three tiers for instructions/documentation.</p>",
        "id": 176197399,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989684
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> although permanence is also a good question, Apple itself is killing <code>i686-apple-darwin</code>, so how long should we keep it alive?</p>",
        "id": 176197420,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568989694
    },
    {
        "content": "<p>(c.f. cygwin)</p>",
        "id": 176197449,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989724
    },
    {
        "content": "<p>(we might have to kill that targert soon<em>ish</em> due to the CI platform deprecating old images anyway)</p>",
        "id": 176197465,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568989733
    },
    {
        "content": "<p>it seems like we're getting too afield -- perhaps the best answer is going to be that we should try to have some known people who decide the answer, and outline some rough criteria</p>",
        "id": 176197494,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989755
    },
    {
        "content": "<p><span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 176197530,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989784
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> so overall I really liked your proposal, I'd like to give you a chance to steer the conversation here towards the point you would most like to dig into</p>",
        "id": 176197628,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989812
    },
    {
        "content": "<p>Roughly speaking, I think \"if a target stops meeting the requirements, and especially if it blocks ongoing work in the Rust community, the compiler team will determine if that target needs to be downgraded\".</p>",
        "id": 176197651,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989829
    },
    {
        "content": "<p>(i.e., we're at the 30 minute point, so I want to make sure we get to everything)</p>",
        "id": 176197654,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568989830
    },
    {
        "content": "<p>does the document cover removing a target entirely? Taking it from tier 3 to nothing?</p>",
        "id": 176197681,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568989859
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> It doesn't, but it should. Something like \"If a tier 3 target shows no signs of activity and has not built for some time, and removing it would improve the quality of the Rust codebase, we may post a PR to remove it; any such PR will be CCed to people who have previously worked on the platform, to check potential interest.\"</p>",
        "id": 176197817,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989940
    },
    {
        "content": "<p>Sound good?</p>",
        "id": 176197832,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989949
    },
    {
        "content": "<p>OK, so focusing on the key points here:</p>",
        "id": 176197867,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568989976
    },
    {
        "content": "<p>Let's start with \"Is there any objection to the description of tier 3?\". I'd like to ratify consensus on what (minimal) requirements we have to merge a PR adding a new tier 3 target.</p>",
        "id": 176197919,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990008
    },
    {
        "content": "<p>For reference, the text:<br>\nAt this tier, the Rust project provides no official support for a target, so we<br>\nplace minimal requirements on the introduction of targets.</p>\n<p>- No central decision is required to add a new tier 3 target. Reviewers may<br>\n  always use their own best judgment regarding the quality of work, and the<br>\n  suitability of a target for the Rust project.<br>\n- If a reviewer wishes to consult a broader team for additional guidance, they<br>\n  should contact the compiler team.<br>\n- If the proposer of a target wishes to appeal the rejection of a target, they<br>\n  may contact the compiler team.<br>\n- Tier 3 targets must use naming consistent with any existing targets; for<br>\n  instance, a target for a similar CPU or OS should not gratuitously use an<br>\n  inconsistent name for that CPU or OS. Targets should normally use the same<br>\n  names as used elsewhere in the broader ecosystem (such as in other toolchains),<br>\n  unless they have a very good reason to diverge.<br>\n- Tier 3 targets may have unusual requirements to build or use, but must not<br>\n  create legal issues for the Rust project or for developers who work on those<br>\n  targets.<br>\n- Where possible, tier 3 targets may wish to provide documentation for the Rust<br>\n  community for how to build and run tests for the platform, ideally using<br>\n  emulation.<br>\n- Patches adding or updating tier 3 targets must not break any existing target.</p>",
        "id": 176198001,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990052
    },
    {
        "content": "<p>I imagine the \"no central decision required\" is the most potentially controversial part, but I'm on board. We're basically saying \"we'll assume it's ok but be prepared to withdraw if problems arise\"</p>",
        "id": 176198038,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990083
    },
    {
        "content": "<p>I do think we need to add some level of consensus beyond just the reviewer</p>",
        "id": 176198069,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568990110
    },
    {
        "content": "<p>for example I would prefer to not add a target which completely changes how libcore/libstd are organized</p>",
        "id": 176198082,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568990123
    },
    {
        "content": "<p>We're also saying \"if you want a central decision, or the reviewer wants a central decision, they should poke the compiler team\", so we're saying <em>which</em> team has responsibility.</p>",
        "id": 176198086,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990127
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> I think that falls under \"best judgment regarding the quality of work and the suitability of a target for the Rust project\".</p>",
        "id": 176198182,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990170
    },
    {
        "content": "<p>well we can always run with it in practice and see how it fares</p>",
        "id": 176198208,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568990191
    },
    {
        "content": "<p>I personally am willing to try the text as written</p>",
        "id": 176198216,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990197
    },
    {
        "content": "<p>yeah it sounds good</p>",
        "id": 176198228,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990207
    },
    {
        "content": "<p>If a reviewer looks at a PR that massively overhauls libcore in order to make a new target work, and doesn't say \"uh, hey, other people should review this\", they're kinda not doing their job as a reviewer.</p>",
        "id": 176198235,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990208
    },
    {
        "content": "<p>and we can tell the reviewers to be conservative in their decisions</p>",
        "id": 176198241,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990210
    },
    {
        "content": "<blockquote>\n<p>If a reviewer looks at a PR that massively overhauls libcore in order to make a new target work, and doesn't say \"uh, hey, other people should review this\", they're kinda not doing their job as a reviewer.</p>\n</blockquote>\n<p>I think you should make that explicit</p>",
        "id": 176198253,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990218
    },
    {
        "content": "<p>Fair. Writing that down...</p>",
        "id": 176198267,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990229
    },
    {
        "content": "<p>the main question I have is whether the compiler team really will have the knowledge to always make the call.</p>",
        "id": 176198269,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990230
    },
    {
        "content": "<p>I think we should say:</p>\n<p>- Non-intrusive PRs can be accepted without add'l process</p>",
        "id": 176198274,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990234
    },
    {
        "content": "<p>but if they don't, I think the compiler team will realize it</p>",
        "id": 176198282,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990237
    },
    {
        "content": "<p>(and then pull in the additional teams)</p>",
        "id": 176198292,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990248
    },
    {
        "content": "<p>yeah, I'm actually not sure compile team is best for this (And elsehwere) but I thikn we're not he worst. I think we <em>may</em> want to instead have it be like release team or something. But I was going to wait till later to raise that.</p>",
        "id": 176198316,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990270
    },
    {
        "content": "<p>whichever team it is is going to have to pull in other teams in the end, I think</p>",
        "id": 176198334,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990281
    },
    {
        "content": "<p>tbh 90% of the code changes for a new target are typically in libcore/libstd</p>",
        "id": 176198402,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568990301
    },
    {
        "content": "<p>and like one new target file in the compiler</p>",
        "id": 176198408,
        "sender_full_name": "Alex Crichton",
        "timestamp": 1568990308
    },
    {
        "content": "<p>not sure how the release team has a stake, especially in tier 3 platforms</p>",
        "id": 176198414,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990314
    },
    {
        "content": "<p>Done: <br>\n- If a proposed target or target-specific patch substantially changes code<br>\n  shared with other targets (not just target-specific code), the reviewer<br>\n  should consult the compiler team.</p>",
        "id": 176198424,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990323
    },
    {
        "content": "<p>Regarding the release team: right now, I wrote that new tier 1 targets require release and compiler team approval, new tier 2 requires compiler team approval, and new tier 3 doesn't need any approval (unless invasive).</p>",
        "id": 176198486,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990379
    },
    {
        "content": "<p>Open to changing that, as long as we have a clear path/ownership.</p>",
        "id": 176198496,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990392
    },
    {
        "content": "<p>since it sounds like tier 2 targets do impose CI building (and some testing?) overhead, we may need T-infrastructure approval for new tier 2, right?</p>",
        "id": 176198565,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990420
    },
    {
        "content": "<p>I'd like an infra approval for tier 2 and 1 at least</p>",
        "id": 176198579,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990431
    },
    {
        "content": "<p>( that is perhaps somewhat implicit, isn't it? i.e., if the requirement to be tier 2 is to have CI support, and infra adds CI ... )</p>",
        "id": 176198636,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990470
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I currently have this in tier 1:</p>\n<blockquote>\n<p>If running the testsuite requires additional infrastructure (such as systems running the target), the target development team shall arrange to provide such resources to the Rust project, to the satisfaction and approval of the Rust infrastructure team.</p>\n</blockquote>\n<p>Should I just change that so that tier 2 and tier 1 need the infrastructure team to sign off on the CI requirements/changes to build and test?</p>",
        "id": 176198637,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990471
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span></p>",
        "id": 176198664,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990493
    },
    {
        "content": "<p>Will do, that's reasonable.</p>",
        "id": 176198674,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990503
    },
    {
        "content": "<p>(And I'll mention that that will often happen in the course of reviewing the PR adding the target to CI.)</p>",
        "id": 176198722,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990522
    },
    {
        "content": "<p>OK, then let's see if we can make some progress on the higher tiers.</p>",
        "id": 176198768,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990543
    },
    {
        "content": "<p>Right now, here's what I have for tier 2. I'm going to additionally add the requirement for infra signoff on CI.</p>\n<p>At this tier, the Rust project guarantees that a target builds, and will reject<br>\npatches that fail to build on a target. Thus, we place requirements that ensure<br>\nthe target will not block forward progress of the Rust project.</p>\n<p>- Any new tier 2 target requires compiler team approval.<br>\n- Any new tier 2 target must have a designated team of developers on call to<br>\n  consult on target-specific build-breaking issues, or if necessary to develop<br>\n  target-specific language or library implementation details. (This team should<br>\n  in almost all cases have at least 2 developers.)<br>\n- The target must not place undue burden on Rust developers not specifically<br>\n  concerned with that target. Rust developers may be expected to not<br>\n  gratuitously break a tier 2 target, but are not expected to become experts in<br>\n  every tier 2 target. and are not expected to provide target-specific<br>\n  implementations for every tier 2 target.<br>\n- The target development team should not only fix target-specific issues, but<br>\n  should use any such issue as an opportunity to educate the Rust community<br>\n  about portability to their target.<br>\n- The target must build reliably in CI.<br>\n- Building the target must not take substantially longer than other targets.<br>\n- Tier 2 targets must cross-compile from existing targets, and must not require<br>\n  builds on specific target hardware.<br>\n- Where possible, tier 2 targets should to provide documentation for the Rust<br>\n  community for how to build and run tests for the platform, ideally using<br>\n  emulation.<br>\n- The target development team should regularly run the testsuite for the<br>\n  target, and should fix any test failures in a reasonably timely fashion.<br>\n- All tier 3 requirements apply.</p>",
        "id": 176198844,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990597
    },
    {
        "content": "<p>I do think it'd be useful to try and outline the criteria by which compiler team should decide</p>",
        "id": 176198955,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990674
    },
    {
        "content": "<p>Highlighting a few specific points: even if we're only build-testing, I think it's important that the target development team regularly run the testsuite and make sure it passes. A target that never passes the testsuite isn't a good look.</p>",
        "id": 176198956,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990675
    },
    {
        "content": "<p>for example, how many users is enough?</p>",
        "id": 176198964,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990679
    },
    {
        "content": "<p>(or is that not something we should consider)</p>",
        "id": 176198988,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990700
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> So, tier 1 I did have a requirement for that.</p>",
        "id": 176199004,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990708
    },
    {
        "content": "<blockquote>\n<p>Highlighting a few specific points: even if we're only build-testing, I think it's important that the target development team regularly run the testsuite and make sure it passes. A target that never passes the testsuite isn't a good look.</p>\n</blockquote>\n<p>like, there should be a dedicated site where one can see how recently that dev team ran the test suite successfully or something?</p>",
        "id": 176199022,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990727
    },
    {
        "content": "<p>Tier 1 I had this: \"Tier 1 targets must have substantial, widespread interest within the developer community, and must serve the ongoing needs of multiple production users of Rust.\"</p>",
        "id": 176199025,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990727
    },
    {
        "content": "<p>basically I think it's ok if we want to say \"the expectation is that we will approve Tier 2 targets if other requirements are met\"</p>",
        "id": 176199031,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990733
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> Not going to require that, just that they actually work on testsuite failures regularly.</p>",
        "id": 176199042,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990749
    },
    {
        "content": "<p>but maybe that's too strong -- but if it's not these requirements, then what is the basis for saying no?</p>",
        "id": 176199107,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990777
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Reasonable question. I think there's a certain judgment involved, but it's a lot less than tier 1.</p>",
        "id": 176199110,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990780
    },
    {
        "content": "<p>Let's talk that out.</p>",
        "id": 176199118,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990785
    },
    {
        "content": "<p>I think we shouldn't approve a super-niche target as tier 1.</p>",
        "id": 176199127,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990796
    },
    {
        "content": "<p>(I'm just thinking through the questions I will have when somebody asks :)</p>",
        "id": 176199132,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990801
    },
    {
        "content": "<p>but the CI won't report testsuite failures for tier 2 (because CI doesn't necessarily run tests for that tier), so one won't necessarily know until some user tries it out, right?</p>",
        "id": 176199133,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990801
    },
    {
        "content": "<blockquote>\n<p>basically I think it's ok if we want to say \"the expectation is that we will approve Tier 2 targets if other requirements are met\"</p>\n</blockquote>\n<p>(to be clear, I meant this only for Tier 2 -- I don't think there should be a \"Default yes\" for Tier 1 at all)</p>",
        "id": 176199166,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990838
    },
    {
        "content": "<p>I'm just trying to dig into \"the testsuite failing is not a good look\" -- its a statement I agree with, and I'm wondering how we can make it easy for T-compiler to be able to respond when someone files an issue about it.</p>",
        "id": 176199176,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990853
    },
    {
        "content": "<p>I think it's completely reasonable to approve a niche target for tier 2, as long as there's <em>some</em> interest. But, for instance, I'd want to have some reasonable basis on which to say \"we're not supporting m68k even if there are 1-2 dedicated developers trying to keep it alive\". ;)</p>",
        "id": 176199177,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990853
    },
    {
        "content": "<blockquote>\n<p>how we can make it easy for T-compiler to be able to respond when someone files an issue about it.</p>\n</blockquote>\n<p>(I guess the answer here is that you CC the relevant dev team for such issues)</p>",
        "id": 176199225,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568990882
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> I think it suffices to say \"the target development team should not only be regularly <em>using</em> the target, they should be <em>testing</em> the target\". :)</p>",
        "id": 176199238,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990885
    },
    {
        "content": "<p>ok, so it sounds like we want Tier 2 targets to have a \"reasonably large community of active users\" or smething like that?</p>",
        "id": 176199252,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990897
    },
    {
        "content": "<p>about testing the target</p>",
        "id": 176199262,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990915
    },
    {
        "content": "<blockquote>\n<p>(I guess the answer here is that you CC the relevant dev team for such issues)</p>\n</blockquote>\n<p>(this would also fit the ICE-breaker mechanism we are forming)</p>",
        "id": 176199263,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568990915
    },
    {
        "content": "<p>we had a tier 2 platform a few months ago that developed their own parallel CI and had a bot posting a comment on each PR breaking the build</p>",
        "id": 176199297,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990949
    },
    {
        "content": "<p>should we clarify they should <em>not</em> do that in the policy?</p>",
        "id": 176199300,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990957
    },
    {
        "content": "<p>I don't think I'd say \"reasonably large\" (e.g. i686-unknown-uefi is going to be niche by design) but that it needs to have some value for people other than as an exercise.</p>",
        "id": 176199311,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568990969
    },
    {
        "content": "<p>(we (t-infra) already told that target not to do that in the past)</p>",
        "id": 176199338,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568990995
    },
    {
        "content": "<p>I don't mind a tier 3 platform existing just as a pure toy with no value other than \"ain't that awesome\".</p>",
        "id": 176199386,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991009
    },
    {
        "content": "<p>hmm so having a parallel CI system seems like good practice, but I guess the part you're objecting to is the part where it implies that the PR author should care ?</p>",
        "id": 176199392,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991019
    },
    {
        "content": "<p>yeah that was the concern</p>",
        "id": 176199401,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991028
    },
    {
        "content": "<p>because they were implicitly self-promoting themselves to tier 1 level of commitment from PR authors</p>",
        "id": 176199423,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991046
    },
    {
        "content": "<p>(Which target was that? You can PM if you'd prefer.)</p>",
        "id": 176199444,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991058
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> Seems reasonable. A comment that disclaims itself as informational and tags in some response team but says \"you don't need to do anything unless we send a patch\" seems more acceptable.</p>",
        "id": 176199465,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991076
    },
    {
        "content": "<blockquote>\n<p>I don't think I'd say \"reasonably large\" (e.g. i686-unknown-uefi is going to be niche by design) but that it needs to have some value for people other than as an exercise.</p>\n</blockquote>\n<p>if you find a good way to phrase this, I'm on board; I think it should be added to the list of Tier 2 criteria though, and I think the \"compiler-team approval\" bullet should be phrased, \"Ultimately, the compiler + infra teams will be the one to formally decide if these criteria are met\" or something like that. We probably have enough wiggle room in the \"it should not place undue burden on Rust team\" to reject things that are a pain anyway.</p>",
        "id": 176199473,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991082
    },
    {
        "content": "<blockquote>\n<p>Seems reasonable. A comment that disclaims itself as informational and tags in some response team but says \"you don't need to do anything unless we send a patch\" seems more acceptable.</p>\n</blockquote>\n<p>I was going to suggest the same -- that the wording matters a lot.</p>",
        "id": 176199490,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991105
    },
    {
        "content": "<p>hmm, I don't want to end in a world where we have tons of bots from different targets posting on a PR</p>",
        "id": 176199556,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991132
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116015\">@Alex Crichton</span> had opinions on this too I remember</p>",
        "id": 176199563,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991140
    },
    {
        "content": "<p>(I'd also be ok with prohibiting the bot practice explicitly)</p>",
        "id": 176199570,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991144
    },
    {
        "content": "<p>Alright. I'll add a comment that automated build/test bots are acceptable, but must not post comments to PRs that put the onus on the PR author or community to fix them, as that would implicitly raise the tier of the target.</p>",
        "id": 176199587,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991154
    },
    {
        "content": "<p>(we could instead encourage some kind of dashboard for the target, and maybe link to it from our webpage, so people can get an up-to-date view on the status -- but this is beyond the level of detail (probably) of this doc)</p>",
        "id": 176199625,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991186
    },
    {
        "content": "<p>(I wonder if labels rather than comments could help here ...?)</p>",
        "id": 176199638,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991197
    },
    {
        "content": "<p>OK. Let's leave that issue alone for the moment then.</p>",
        "id": 176199640,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991198
    },
    {
        "content": "<p>(Time-check: 7 minutes remaining :)</p>",
        "id": 176199663,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991213
    },
    {
        "content": "<p>How do people feel about ratifying the tier 2 policy (with an addition of infra signoff requirements, and some notion of \"must be useful\")?</p>",
        "id": 176199687,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991230
    },
    {
        "content": "<p>nit: the phrase \"must cross-compile from existing targets\" is ambiguous as to whether it means \"from all existing targets\" or \"from some existing target\"</p>",
        "id": 176199816,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991307
    },
    {
        "content": "<p>I'm pretty sure the latter is what is intended</p>",
        "id": 176199851,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991340
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> In practice the requirement is \"must compile on the targets used for CI infrastructure\". :)</p>",
        "id": 176199858,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991349
    },
    {
        "content": "<p>I'll document that more clearly, because that's the real requirement.</p>",
        "id": 176199958,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991395
    },
    {
        "content": "<p>with an addition about \"no bots\" that seems fine for me</p>",
        "id": 176199963,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991400
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> \"no bots\" or \"no bots that put work on others, and stop if we tell you to stop\"?</p>",
        "id": 176199996,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991427
    },
    {
        "content": "<p>what's the advantage of accepting experimental targets (think those that are not expected to reach tier 2), when they could be maintained outside the tree</p>",
        "id": 176200019,
        "sender_full_name": "Tshepang Lekhonkhobe",
        "timestamp": 1568991449
    },
    {
        "content": "<p>I'd personally say no bots at all, otherwise we'll get to a point where we will be swarmed</p>",
        "id": 176200020,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991450
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"119529\">@Tshepang Lekhonkhobe</span> Coordinating work and building from the official tree without divergence/forks.</p>",
        "id": 176200053,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991475
    },
    {
        "content": "<blockquote>\n<p>\"no bots\" or \"no bots that put work on others, and stop if we tell you to stop\"?</p>\n</blockquote>\n<p>I think a general clause like \"you should not take actions to imply that PR authors should fix your bugs; this includes bots that post on PRs that break your target\"</p>",
        "id": 176200097,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991484
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Fair. In that case, people can always <em>ask</em> a team if they really want to do that, with an expectation that they'll get a \"no\".</p>",
        "id": 176200126,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991511
    },
    {
        "content": "<p>yep. like, it wouldnt' be better if they used a human to post those comments :)</p>",
        "id": 176200139,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991524
    },
    {
        "content": "<p>Even further -- don't post on our PRs without authorization from infra team (who may reach out to compiler, etc) about tier N targets being broken by that PR</p>",
        "id": 176200154,
        "sender_full_name": "simulacrum",
        "timestamp": 1568991540
    },
    {
        "content": "<p>(It might be a reasonable thing to do, for instance, for a tier 2 target that has coordinated with the compiler team to do a \"tier 1 dry run\", with permission. ;) )</p>",
        "id": 176200160,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991543
    },
    {
        "content": "<p>OK: How do people feel about ratifying the tier 2 policy (with an addition of infra signoff requirements, and some notion of \"must be useful\", and a \"no bots or putting work on PR authors\" clause)?</p>",
        "id": 176200265,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991603
    },
    {
        "content": "<p>(And I'd ask people to look over the tier 1 policy asynchronously and offer feedback.)</p>",
        "id": 176200322,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991634
    },
    {
        "content": "<p>I'm planning to submit this policy as documentation linked from the forge tier page and a couple of other places. (Suggestions for a home for it welcome.)</p>",
        "id": 176200372,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991671
    },
    {
        "content": "<p>We may want an RFC here; I think we should also try to rationalize our existing tiers into the policy</p>",
        "id": 176200433,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991705
    },
    {
        "content": "<p>but we can discuss that async</p>",
        "id": 176200438,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991710
    },
    {
        "content": "<p>yeah, an RFC could be good</p>",
        "id": 176200452,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991719
    },
    {
        "content": "<p>let me rephrase, I think we do want an RFC :)</p>",
        "id": 176200506,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991734
    },
    {
        "content": "<p>I think an RFC would also give it the appropriate weight so it's not \"just\" a policy document ratified internally but sort of 'community agreed upon'</p>",
        "id": 176200526,
        "sender_full_name": "simulacrum",
        "timestamp": 1568991751
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Some of our existing tiers may inherently be exceptions; we don't, for instance, expect a team on call for x86_64-unknown-linux-gnu. :)</p>",
        "id": 176200530,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991753
    },
    {
        "content": "<p>well t-compiler as a whole is on call for that target :P</p>",
        "id": 176200541,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991770
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> well, that may be true, but I think studying the exceptions will help us see problems</p>",
        "id": 176200558,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991784
    },
    {
        "content": "<p>Agreed.</p>",
        "id": 176200581,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991790
    },
    {
        "content": "<p>OK. I'll post an RFC then.</p>",
        "id": 176200592,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991800
    },
    {
        "content": "<p>Thank you, everyone, for the clear feedback!</p>",
        "id": 176200594,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991805
    },
    {
        "content": "<p>We're out of time. I'm really glad we've made progress on this.</p>",
        "id": 176200610,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991820
    },
    {
        "content": "<p>thank <em>you</em> for dealing with this mess <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 176200614,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568991821
    },
    {
        "content": "<p>Yes, thanks <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span>! <span aria-label=\"heart eyes\" class=\"emoji emoji-1f60d\" role=\"img\" title=\"heart eyes\">:heart_eyes:</span></p>",
        "id": 176200641,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991833
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> No problem. I'm somewhat motivated; I have three targets I want to move to tier 2, myself. ;)</p>",
        "id": 176200645,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991838
    },
    {
        "content": "<p>(Namely, <code>x86_64-linux-kernel</code>,<code>x86_64-unknown-uefi</code>, and <code>i686-unknown-uefi</code>.)</p>",
        "id": 176200729,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991870
    },
    {
        "content": "<p>Josh, if you're going to be editing the doc to incorporate suggestions for the meeting, can you also open a PR against the compiler-team repo as the meeting summary? I think it could just include the final doc along with a link to this zulip stream</p>",
        "id": 176200730,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991870
    },
    {
        "content": "<blockquote>\n<p>Also: looking for volunteers to do a summary after the fact.</p>\n<p>Example: <a href=\"https://github.com/rust-lang/compiler-team/pull/173\" target=\"_blank\" title=\"https://github.com/rust-lang/compiler-team/pull/173\">https://github.com/rust-lang/compiler-team/pull/173</a> (which summarized our last design meeting)</p>\n</blockquote>\n<p>I'm repeating this, basically</p>",
        "id": 176200755,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991893
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> Sure, I can do that.</p>",
        "id": 176200756,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991896
    },
    {
        "content": "<p>(well, zulip streams are not visible to people without zulip accounts, unfortunately...)</p>",
        "id": 176200760,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991901
    },
    {
        "content": "<p>but I don't think the summary has to be \"minutes\" necessarily :)</p>",
        "id": 176200768,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991903
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> Oh. :(</p>",
        "id": 176200779,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991909
    },
    {
        "content": "<blockquote>\n<p>(well, zulip streams are not visible to people without zulip accounts, unfortunately...)</p>\n</blockquote>\n<p>not my problem :P</p>",
        "id": 176200784,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991910
    },
    {
        "content": "<p>but also, there is an archive</p>",
        "id": 176200786,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991913
    },
    {
        "content": "<p><a href=\"https://zulip-archive.rust-lang.org/\" target=\"_blank\" title=\"https://zulip-archive.rust-lang.org/\">https://zulip-archive.rust-lang.org/</a></p>",
        "id": 176200810,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991930
    },
    {
        "content": "<p>not the most readable thing ever though :)</p>",
        "id": 176200920,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991946
    },
    {
        "content": "<p>but that can be improved...</p>",
        "id": 176200923,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991950
    },
    {
        "content": "<p>oh i wasn't aware of that</p>",
        "id": 176200925,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991952
    },
    {
        "content": "<p>when did that go online?</p>",
        "id": 176200931,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991960
    },
    {
        "content": "<p>I'm not sure who set that up :) but big thanks to them...</p>",
        "id": 176200976,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991966
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> On the topic of CI, what would it take for CI to assume that it can run qemu-kvm VMs? That would help for testing UEFI targets, for instance, as well as other interesting x86_64 targets.</p>",
        "id": 176200989,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568991978
    },
    {
        "content": "<p>we should link to <em>that</em> from the compiler website, IMO</p>",
        "id": 176200990,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568991979
    },
    {
        "content": "<p>sounds good</p>",
        "id": 176200999,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1568991988
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> I think we're already running some qemu tests on CI</p>",
        "id": 176201012,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568992002
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> With KVM acceleration, though?</p>",
        "id": 176201022,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1568992012
    },
    {
        "content": "<p>I gotta go, but before I do, thanks everyone in <span class=\"user-group-mention\" data-user-group-id=\"897\">@T-compiler/meeting</span> for attending!</p>",
        "id": 176201048,
        "sender_full_name": "pnkfelix",
        "timestamp": 1568992032
    },
    {
        "content": "<p>that I'm not sure, we'd need to look into it</p>",
        "id": 176201049,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1568992033
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> zulip archive went online about a month ago, we're using a prototype from the zulip folks -- see some discussion here: <a href=\"#narrow/stream/122653-zulip/topic/public.20logs.20.2F.20streams\" title=\"#narrow/stream/122653-zulip/topic/public.20logs.20.2F.20streams\">https://rust-lang.zulipchat.com/#narrow/stream/122653-zulip/topic/public.20logs.20.2F.20streams</a></p>",
        "id": 176201987,
        "sender_full_name": "simulacrum",
        "timestamp": 1568992738
    },
    {
        "content": "<p>repo is <a href=\"https://github.com/rust-lang/zulip_archive\" target=\"_blank\" title=\"https://github.com/rust-lang/zulip_archive\">https://github.com/rust-lang/zulip_archive</a> feel free to ping me for redeploys and such</p>",
        "id": 176202027,
        "sender_full_name": "simulacrum",
        "timestamp": 1568992771
    },
    {
        "content": "<p>Sadly missed this meeting;</p>\n<blockquote>\n<p>the ongoing needs of multiple production users of Rust.\"</p>\n</blockquote>\n<p>This feels vague -- I'd expect tier 1 toolchains to serve the needs of a huge number of users (and not from the same company)</p>",
        "id": 176220823,
        "sender_full_name": "centril",
        "timestamp": 1569005735
    },
    {
        "content": "<p>(like in the 1000s)</p>",
        "id": 176220915,
        "sender_full_name": "centril",
        "timestamp": 1569005795
    },
    {
        "content": "<p>@Centril I'll clarify. By \"multiple production users\" I meant distinct entities.</p>",
        "id": 176224945,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1569008968
    },
    {
        "content": "<p>Many people but all from the same company doesn't count as \"multiple production users\", even if they work on different products.</p>",
        "id": 176224946,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1569008968
    },
    {
        "content": "<p>Minutes at <a href=\"https://github.com/rust-lang/compiler-team/pull/181\" target=\"_blank\" title=\"https://github.com/rust-lang/compiler-team/pull/181\">https://github.com/rust-lang/compiler-team/pull/181</a><br>\n<span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span></p>",
        "id": 176239322,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1569023217
    },
    {
        "content": "<p>Missed the mtg too. As somebody who kinda-sorta looks after a bunch of T2/T3 architectures, I think their current status T2/T3 status is perfectly fine, but we should have a more precise definition of how much each target is supported</p>",
        "id": 176249050,
        "sender_full_name": "nagisa",
        "timestamp": 1569041346
    },
    {
        "content": "<p>Rather than a T1-3 a table with Y/N for various things would help, where things would be: binaries provided, tests run, can x-compile to etc.</p>",
        "id": 176249057,
        "sender_full_name": "nagisa",
        "timestamp": 1569041382
    },
    {
        "content": "<p>Even then targets which have <code>N</code> for all of the columns (say AVR) make sense.</p>",
        "id": 176249103,
        "sender_full_name": "nagisa",
        "timestamp": 1569041428
    },
    {
        "content": "<p>Yes but \"multitude\" can mean 5, 10, 100, ...</p>",
        "id": 176261282,
        "sender_full_name": "centril",
        "timestamp": 1569065837
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"126931\">@centril</span> I don't want to give a hard number. It's up to the team to judge. It also balances with other factors, such as difficulty of building and maintaining the target.</p>",
        "id": 176322192,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1569178789
    },
    {
        "content": "<blockquote>\n<p>but we should have a more precise definition of how much each target is supported</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"123586\">@nagisa</span> yeah, having to look in the specification files or CI to see if compiler-builtins is built, libcore is built, libstd is built, whether there are CI tests running, etc. is a pain.</p>",
        "id": 176462633,
        "sender_full_name": "gnzlbg",
        "timestamp": 1569331277
    },
    {
        "content": "<p>Another thing that's hard to tell is whether one of the Tier-1 compilers is actually able to cross-compile for a different target</p>",
        "id": 176462803,
        "sender_full_name": "gnzlbg",
        "timestamp": 1569331379
    },
    {
        "content": "<p>AFAICT we don't test that, e.g., x86_64-unknown-linux-gnu is able to cross-compile, e.g., compiler-builtins or libcore for all the target triplets it accepts</p>",
        "id": 176462850,
        "sender_full_name": "gnzlbg",
        "timestamp": 1569331414
    },
    {
        "content": "<p>So we end up with target-triples in tree that are actually impossible to target</p>",
        "id": 176462960,
        "sender_full_name": "gnzlbg",
        "timestamp": 1569331490
    }
]
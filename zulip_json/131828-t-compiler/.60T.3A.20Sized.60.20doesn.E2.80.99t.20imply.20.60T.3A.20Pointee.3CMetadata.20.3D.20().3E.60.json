[
    {
        "content": "<p>Hello. <a href=\"https://github.com/rust-lang/rust/pull/81172\">https://github.com/rust-lang/rust/pull/81172</a> implemented the pointer metadata RFC so that the <code>Pointee</code>trait is always implemented for all types (similar to <code>DiscriminantKind</code>). When asked for <code>&lt;T as Pointee&gt;::Metadata</code>, thereâ€™s compiler code that resolves it to <code>()</code> if <code>T: Sized</code>. However a <code>T: Pointee&lt;Metadata=()&gt;</code> bound (a.k.a. <code>T: Thin</code>) does not seem to hold automatically in generic contexts that have <code>T: Sized</code> <a href=\"https://github.com/rust-lang/rust/issues/93959#issuecomment-1038374128\">https://github.com/rust-lang/rust/issues/93959#issuecomment-1038374128</a> Could/should that be changed with more compiler magic?</p>",
        "id": 271761557,
        "sender_full_name": "Simon Sapin",
        "timestamp": 1644781125
    },
    {
        "content": "<p>Should we even have <code>pub trait Sized: Thin {}</code> ?</p>",
        "id": 271761576,
        "sender_full_name": "Simon Sapin",
        "timestamp": 1644781180
    },
    {
        "content": "<p>(Simply adding that in <code>core</code> is not enough: <a href=\"https://github.com/rust-lang/rust/issues/93959#issuecomment-1038374128\">https://github.com/rust-lang/rust/issues/93959#issuecomment-1038374128</a>)</p>",
        "id": 271761736,
        "sender_full_name": "Simon Sapin",
        "timestamp": 1644781385
    },
    {
        "content": "<blockquote>\n<p>does not seem to hold automatically in generic contexts that have <code>T: Sized</code></p>\n</blockquote>\n<p>Might be fixed by adding some more logic to <code>confirm_pointee_candidate</code> in <code>rustc_trait_selection::traits::project</code>.</p>",
        "id": 271764567,
        "sender_full_name": "Michael Goulet (compiler-errors)",
        "timestamp": 1644785150
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"219747\">@Simon Sapin</span> I think I have a working branch that satisfies <code>T: Pointee&lt;Metadata = ()&gt;</code> if <code>T: Sized</code>. Let me put up a PR.</p>",
        "id": 271768109,
        "sender_full_name": "Michael Goulet (compiler-errors)",
        "timestamp": 1644790075
    },
    {
        "content": "<p>Nice, thanks!</p>",
        "id": 271768163,
        "sender_full_name": "Simon Sapin",
        "timestamp": 1644790113
    }
]
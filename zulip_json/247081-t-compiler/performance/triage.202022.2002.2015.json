[
    {
        "content": "<p>Hey y'all. I forgot to start triage today; I'll be taking care of it tomorrow.</p>",
        "id": 272071047,
        "sender_full_name": "pnkfelix",
        "timestamp": 1644983962
    },
    {
        "content": "<p>okay starting triage now</p>",
        "id": 272135370,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645027256
    },
    {
        "content": "<p>Dumb question: Why isn't PR <a href=\"https://github.com/rust-lang/rust/issues/94021\">#94021</a> \"Inline a few trivial conversion functions\" classified as an improvement?  The summary says \"103 results were found to be statistically significant but too small to be relevant.\", but several of the results are -0.75% or better, all the way up to -1.06%. Is -1% too small to note?</p>",
        "id": 272181357,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645046812
    },
    {
        "content": "<p>We need it to be definitely relevant for master commits (try builds only require at least probably relevance). Definitely relevant currently requires a 'medium' change -- which I believe means it's over the significance threshold by more than 3x</p>",
        "id": 272181886,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047064
    },
    {
        "content": "<p>triage PR: <a href=\"https://github.com/rust-lang/rustc-perf/pull/1173\">https://github.com/rust-lang/rustc-perf/pull/1173</a></p>",
        "id": 272181916,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645047083
    },
    {
        "content": "<p>TWIR PR: <a href=\"https://github.com/rust-lang/this-week-in-rust/pull/2950\">https://github.com/rust-lang/this-week-in-rust/pull/2950</a></p>",
        "id": 272181933,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645047093
    },
    {
        "content": "<p>though I do see a couple that are over there, at least at first glance - e.g., 3.35x</p>",
        "id": 272181934,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047093
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202022.2002.2015/near/272181886\">said</a>:</p>\n<blockquote>\n<p>We need it to be definitely relevant for master commits (try builds only require at least probably relevance). Definitely relevant currently requires a 'medium' change -- which I believe means it's over the significance threshold by more than 3x</p>\n</blockquote>\n<p>okay. I manually reclassified it as \"improvement\" in this weeks report</p>",
        "id": 272181966,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645047114
    },
    {
        "content": "<p>and I'll go back over the data later</p>",
        "id": 272181972,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645047120
    },
    {
        "content": "<p>seems good</p>",
        "id": 272181973,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047121
    },
    {
        "content": "<p>actually, I think I'm misreading code -- let me actually rip out the calc_new_sig threading, it seems pretty clear we're going with it</p>",
        "id": 272182046,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047149
    },
    {
        "content": "<p>oh, we're more fancy than just 3x</p>",
        "id": 272182111,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047187
    },
    {
        "content": "<p>The current logic is that we need to be &gt;3x significance threshold <em>and</em> avg(significance magnitude, change magnitude)  is at least medium</p>",
        "id": 272182276,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047270
    },
    {
        "content": "<p>er, no</p>",
        "id": 272182297,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047282
    },
    {
        "content": "<p>just that the average is at least medium</p>",
        "id": 272182303,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047286
    },
    {
        "content": "<p>which basically means that &gt;3x and change &gt; 1% I think?</p>",
        "id": 272182370,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047323
    },
    {
        "content": "<p>(or one of those is significantly higher, of course)</p>",
        "id": 272182380,
        "sender_full_name": "simulacrum",
        "timestamp": 1645047332
    },
    {
        "content": "<p>hmm, I see. in this case the ones that were &gt;=3x significance were below 1% change (just barely), and the one that was above 1% change was below 3x significance (just barely in one case)</p>",
        "id": 272186870,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645049686
    },
    {
        "content": "<p>So, probably still worth calling out as an actual improvement, given how borderline it was, but it wouldnt have been a disaster to classify it as non-change...</p>",
        "id": 272187065,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645049731
    },
    {
        "content": "<p>Thanks for the fix <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> ! I caught it on TWIR but forgot to back port my fix <span aria-label=\"joy\" class=\"emoji emoji-1f602\" role=\"img\" title=\"joy\">:joy:</span></p>",
        "id": 272196002,
        "sender_full_name": "pnkfelix",
        "timestamp": 1645055428
    },
    {
        "content": "<p>I spent a bit of time bashing my head over how to classify relevance. It's fairly easy to make a definition of \"significance\" that's based (at least loosely) in statistical significance, but relevance is often much more subjective. Ideally you want the change to be sufficiently large <em>and</em> the magnitude of the change to be sufficiently large. This avoids classifying changes from 0.01% to 0.2% (a 20x change!) as relevant since the actual change is still small.</p>",
        "id": 272230786,
        "sender_full_name": "rylev",
        "timestamp": 1645088552
    },
    {
        "content": "<p>An additional challenge with this is that some test cases are more variable than others. Ideally, we would be able to account for this variance and report relevance when we're sure that the change we're seeing is real and not just noise (or primarily contributed to by noise)</p>",
        "id": 272230882,
        "sender_full_name": "rylev",
        "timestamp": 1645088615
    },
    {
        "content": "<p>maybe subtract <del>variance</del> deviation from the magnitude?</p>",
        "id": 272251592,
        "sender_full_name": "The 8472",
        "timestamp": 1645100842
    }
]
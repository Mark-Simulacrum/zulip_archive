[
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/88219\">https://github.com/rust-lang/rust/pull/88219</a> both makes rustdoc use parallel threads on Linux and changes the parallel threading scheme to be more efficient. I want to test just the perf improvements from making it more efficient - is there a way to run tests on windows? Otherwise I can only measure the combined effect because it's just not enabled at all on linux</p>",
        "id": 250250068,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1629599719
    },
    {
        "content": "<p>hmm, I guess I could make one PR which tests enabling it and another which tests enabling it and making it more efficient and compare the two. That seems kind of a lot of work, but easier than adding windows support to perf</p>",
        "id": 250250118,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1629599780
    },
    {
        "content": "<p>If you can run it locally, the collector now also works on windows, e.g. <a href=\"https://github.com/rust-lang/rustc-perf/pull/885\">https://github.com/rust-lang/rustc-perf/pull/885</a></p>",
        "id": 250257623,
        "sender_full_name": "lqd",
        "timestamp": 1629612515
    },
    {
        "content": "<p>I tried to follow the instruction and got this error (with some debugging):</p>\n<div class=\"codehilite\"><pre><span></span><code>Running await-call-tree: Check + [Full, IncrFull, IncrUnchanged, IncrPatched]\n[collector\\src\\etw_parser.rs:163] &amp;h.name = &quot;P-Start&quot;\n[collector\\src\\etw_parser.rs:163] &amp;h.name = &quot;P-Start&quot;\n[collector\\src\\etw_parser.rs:163] &amp;h.name = &quot;P-End&quot;\n[collector\\src\\etw_parser.rs:163] &amp;h.name = &quot;P-Start&quot;\n[collector\\src\\etw_parser.rs:163] &amp;h.name = &quot;P-End&quot;\n[collector\\src\\etw_parser.rs:163] &amp;h.name = &quot;CSwitch&quot;\nthread &#39;main&#39; panicked at &#39;could not find header: Pmc&#39;, collector\\src\\etw_parser.rs:164:14\n</code></pre></div>",
        "id": 254886581,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1632620222
    },
    {
        "content": "<p>Maybe it's because I'm on Windows 8.1 and the Windows Performance Toolkit is old, not sure.</p>",
        "id": 254886608,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1632620260
    },
    {
        "content": "<p>Please file an issue - we should at least try to figure out what's wrong</p>",
        "id": 254888160,
        "sender_full_name": "simulacrum",
        "timestamp": 1632621638
    },
    {
        "content": "<p>Done - <a href=\"https://github.com/rust-lang/rustc-perf/issues/1032\">https://github.com/rust-lang/rustc-perf/issues/1032</a>.</p>",
        "id": 254929808,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1632661432
    }
]
[
    {
        "content": "<p>Should I be adding an empty <code>[workspace]</code> to <code>Cargo.toml</code> of new benchmarks? I didn't do that with <code>cargo-0.60.0</code>, but I can add it now and put it on my checklist for future ones.</p>",
        "id": 275721104,
        "sender_full_name": "nnethercote",
        "timestamp": 1647548882
    },
    {
        "content": "<p>Hm</p>",
        "id": 275721218,
        "sender_full_name": "simulacrum",
        "timestamp": 1647548930
    },
    {
        "content": "<p>I think it's necessary if you want to directly cd &amp;&amp; cargo ...</p>",
        "id": 275721232,
        "sender_full_name": "simulacrum",
        "timestamp": 1647548939
    },
    {
        "content": "<p>seems like a good standard practice, we should get the download script to insert it</p>",
        "id": 275721261,
        "sender_full_name": "simulacrum",
        "timestamp": 1647548953
    },
    {
        "content": "<p>It would need to handle if there is already a <code>[workspace]</code>, e.g. <code>diesel</code></p>",
        "id": 275721623,
        "sender_full_name": "nnethercote",
        "timestamp": 1647549099
    },
    {
        "content": "<p>Maybe just grep for workspace in the <code>Cargo.toml</code>, and if it's already present, don't do anything but print a message saying \"I didn't add workspace\"</p>",
        "id": 275721716,
        "sender_full_name": "nnethercote",
        "timestamp": 1647549127
    },
    {
        "content": "<p><code>ripgrep</code> and <code>serde</code> are other examples that already have workspaces</p>",
        "id": 275722019,
        "sender_full_name": "nnethercote",
        "timestamp": 1647549256
    },
    {
        "content": "<p>is the perf-config.json file now also mandatory for benchmark categorization ?</p>",
        "id": 275722077,
        "sender_full_name": "lqd",
        "timestamp": 1647549284
    },
    {
        "content": "<p>Yeah, if it's already there it should be fine out of the box I suspect</p>",
        "id": 275722985,
        "sender_full_name": "simulacrum",
        "timestamp": 1647549656
    },
    {
        "content": "<p>@lqd: yes, perf-config.json is mandatory, and the <code>download</code> command adds one</p>",
        "id": 275724008,
        "sender_full_name": "nnethercote",
        "timestamp": 1647550018
    },
    {
        "content": "<p>Interesting that <a href=\"https://perf.rust-lang.org/status.html\">https://perf.rust-lang.org/status.html</a> lists every benchmarks that's ever been in the suite, even long-gone ones like <code>hyper</code></p>",
        "id": 275724237,
        "sender_full_name": "nnethercote",
        "timestamp": 1647550122
    },
    {
        "content": "<p>It's for the same reason we have graphs for them, I think.</p>",
        "id": 275725657,
        "sender_full_name": "simulacrum",
        "timestamp": 1647550685
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rustc-perf/pull/1183#pullrequestreview-893497484\">https://github.com/rust-lang/rustc-perf/pull/1183#pullrequestreview-893497484</a> I did that originally, but then we kind of decided against it?</p>",
        "id": 275790721,
        "sender_full_name": "Jakub Beránek",
        "timestamp": 1647603590
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"266526\">@Jakub Beránek</span> is adding the <code>[workspace]</code> after doing the lockfile generation ok?</p>",
        "id": 275948681,
        "sender_full_name": "nnethercote",
        "timestamp": 1647753280
    },
    {
        "content": "<p>I think that it should be fine (if the Cargo.toml doesn't already contain a workspace attribute, of course).</p>",
        "id": 275951127,
        "sender_full_name": "Jakub Beránek",
        "timestamp": 1647757580
    }
]
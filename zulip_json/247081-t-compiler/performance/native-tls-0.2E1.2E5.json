[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> I'd like to move <code>native-tls-0.1.5</code> and <code>rust-mozjs</code> out of <code>collector/benchmarks/</code>, because they can cause confusion there -- they look like actual benchmarks.</p>",
        "id": 274060754,
        "sender_full_name": "nnethercote",
        "timestamp": 1646353059
    },
    {
        "content": "<p>I'm looking at <code>native-tls-0.1.5</code> first. <code>tokio-webpush-simple/</code> has a symlink to the actual <code>native-tls-0.1.5</code> one directory down. Do you know why this is a symlink? Any reason why <code>native-tls-0.1.5</code> couldn't just be within <code>tokio-webpush-simple/</code>?</p>",
        "id": 274060860,
        "sender_full_name": "nnethercote",
        "timestamp": 1646353126
    },
    {
        "content": "<p>My rough recollection is that I thought it would be used by more benchmarks</p>",
        "id": 274061429,
        "sender_full_name": "simulacrum",
        "timestamp": 1646353507
    },
    {
        "content": "<p>But seems fine to move or duplicate</p>",
        "id": 274061443,
        "sender_full_name": "simulacrum",
        "timestamp": 1646353517
    },
    {
        "content": "<p>I just tried removing the symlink and putting <code>native-tls-0.1.5</code> within <code>tokio-webpush-simple</code>, it seems to work</p>",
        "id": 274061449,
        "sender_full_name": "nnethercote",
        "timestamp": 1646353522
    },
    {
        "content": "<p>Why does this crate need special handling?</p>",
        "id": 274061469,
        "sender_full_name": "nnethercote",
        "timestamp": 1646353542
    },
    {
        "content": "<p>It's the openssl issue, IIRC, where stubbing it out helps</p>",
        "id": 274061529,
        "sender_full_name": "simulacrum",
        "timestamp": 1646353567
    },
    {
        "content": "<p>I believe that native tls in tree is cut down from the normal version upstream</p>",
        "id": 274061571,
        "sender_full_name": "simulacrum",
        "timestamp": 1646353601
    },
    {
        "content": "<p>Sorry, what is the OpenSSL issue?</p>",
        "id": 274061631,
        "sender_full_name": "nnethercote",
        "timestamp": 1646353647
    },
    {
        "content": "<p>I'm not sure if you remember but there was a period of time where if you had the wrong openssl headers or something we failed to run because openssl (the rust crate) required a particular version</p>",
        "id": 274061869,
        "sender_full_name": "simulacrum",
        "timestamp": 1646353807
    },
    {
        "content": "<p>I think this native-tls patch was aimed at fixing that</p>",
        "id": 274062046,
        "sender_full_name": "simulacrum",
        "timestamp": 1646353823
    },
    {
        "content": "<p>ok, thanks</p>",
        "id": 274062145,
        "sender_full_name": "nnethercote",
        "timestamp": 1646353911
    },
    {
        "content": "<p>As for <code>rust-mozjs</code>... I don't think it's used. I just tried renaming it <code>rust-mozjs-2</code> and style-servo compiled fine; it's the only benchmark that uses it.</p>",
        "id": 274062477,
        "sender_full_name": "nnethercote",
        "timestamp": 1646354175
    },
    {
        "content": "<p>But <code>style-servo/components/script/Cargo.toml</code> has <code>js = {git = \"https://github.com/servo/rust-mozjs\", features = [\"promises\"]}</code></p>",
        "id": 274062510,
        "sender_full_name": "nnethercote",
        "timestamp": 1646354224
    },
    {
        "content": "<p>/me deletes it</p>",
        "id": 274062912,
        "sender_full_name": "nnethercote",
        "timestamp": 1646354544
    },
    {
        "content": "<p>CI should confirm, but seems good</p>",
        "id": 274063413,
        "sender_full_name": "simulacrum",
        "timestamp": 1646354933
    },
    {
        "content": "<p>Getting a CI failure twice in a row, on this:</p>\n<div class=\"codehilite\"><pre><span></span><code>E: Failed to fetch http://azure.archive.ubuntu.com/ubuntu/pool/main/g/glibc/libc6-dbg_2.31-0ubuntu9.2_amd64.deb  404  Not Found [IP: 40.81.13.82 80]\n</code></pre></div>",
        "id": 274063467,
        "sender_full_name": "nnethercote",
        "timestamp": 1646354989
    },
    {
        "content": "<p>Doesn't sound like my fault</p>",
        "id": 274063476,
        "sender_full_name": "nnethercote",
        "timestamp": 1646354996
    },
    {
        "content": "<p>Yes, I think it's in master. Needs some investigation and a fix</p>",
        "id": 274063999,
        "sender_full_name": "simulacrum",
        "timestamp": 1646355396
    },
    {
        "content": "<p>It's failing when running <code>sudo apt install -y valgrind</code>, weird</p>",
        "id": 274065149,
        "sender_full_name": "nnethercote",
        "timestamp": 1646356221
    },
    {
        "content": "<p>Try sudo apt update first. There may be a new version of glibc and the mirror having deleted the old one.</p>",
        "id": 274091473,
        "sender_full_name": "bjorn3",
        "timestamp": 1646379741
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rustc-perf/pull/1190\">https://github.com/rust-lang/rustc-perf/pull/1190</a> this should fix it, it worked for <a href=\"https://github.com/rust-lang/rustc-perf/runs/5420212641?check_suite_focus=true\">https://github.com/rust-lang/rustc-perf/runs/5420212641?check_suite_focus=true</a>.</p>",
        "id": 274103969,
        "sender_full_name": "Jakub Ber√°nek",
        "timestamp": 1646387006
    }
]
[
    {
        "content": "<p>getting absurdly late start on this week's triage, sorry y'all. <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 274736142,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646852604
    },
    {
        "content": "<p>Rollup of 9 pull requests <a href=\"https://github.com/rust-lang/rust/pull/94541\">#94541</a></p>\n<ul>\n<li>Arithmetic mean of relevant regressions: 1.5%</li>\n<li>Largest regression in <a href=\"https://perf.rust-lang.org/compare.html?start=8769f4ef2fe1efddd1f072485f97f568e7328f79&amp;end=2f\\\n8d1a835b4e7feaf625f74d0d5cb9b84dbc845a&amp;stat=instructions:u\">instruction counts</a>: 3.9% on <code>full</code> builds of <code>deeply-nested-async check</code></li>\n</ul>",
        "id": 274752589,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646860077
    },
    {
        "content": "<p>not clear on what PR in the rollup caused the regressions. (Also, can someone remind me: Do we not do perf runs on rollups ahead of time because ... it would overload the perf runner? Because people doing rollups would not know what to do with the results? I'm having difficulty understanding why we wouldn't do this safeguard <em>ahead</em> of time here.)</p>",
        "id": 274752730,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646860153
    },
    {
        "content": "<p>The regressions more significant than 1% are isolated to <code>deeply-nested-async</code> (which is consistently seeing between 3-4% regression) and <code>ctfe-stress-4</code> (which is seeing 1.2% regression).</p>",
        "id": 274752965,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646860284
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202022.2003.2009/near/274752730\">said</a>:</p>\n<blockquote>\n<p>not clear on what PR in the rollup caused the regressions. (Also, can someone remind me: Do we not do perf runs on rollups ahead of time because ... it would overload the perf runner? Because people doing rollups would not know what to do with the results? I'm having difficulty understanding why we wouldn't do this safeguard <em>ahead</em> of time here.)</p>\n</blockquote>\n<p>(i moved follow up notes here over to <a class=\"stream-topic\" data-stream-id=\"247081\" href=\"/#narrow/stream/247081-t-compiler.2Fperformance/topic/why.20no.20perf.20runs.20on.20rollup.20PRs.20before.20merge.3F\">#t-compiler/performance &gt; why no perf runs on rollup PRs before merge?</a>  )</p>",
        "id": 274753810,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646860786
    },
    {
        "content": "<p>the deeply-nested-async regressions <a href=\"https://perf.rust-lang.org/detailed-query.html?sort_idx=-11&amp;commit=2f8d1a835b4e7feaf625f74d0d5cb9b84dbc845a&amp;base_commit=8769f4ef2fe1efddd1f072485f97f568e7328f79&amp;benchmark=deeply-nested-async-check&amp;scenario=full\">appear to be</a> in check_mod_privacy, according to self-profile results.</p>",
        "id": 274755829,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646861805
    },
    {
        "content": "<p>(ctfe-stress-4 doesn't have as much useful info in its <a href=\"https://perf.rust-lang.org/detailed-query.html?commit=2f8d1a835b4e7feaf625f74d0d5cb9b84dbc845a&amp;base_commit=8769f4ef2fe1efddd1f072485f97f568e7328f79&amp;benchmark=ctfe-stress-4-check&amp;scenario=incr-full\">detailed results</a> ...)</p>",
        "id": 274756115,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646861952
    },
    {
        "content": "<p>At this point, looking at the chart, deeply-nested-async regressed with PR <a href=\"https://github.com/rust-lang/rust/issues/94541\">#94541</a> and stayed at the regressed level until PR <a href=\"https://github.com/rust-lang/rust/issues/94570\">#94570</a> landed. Once the latter landed, deeply-nested-async improved by 6.9%. (The 6.9% improvement was registered in PR <a href=\"https://github.com/rust-lang/rust/issues/95470\">#95470</a> both <a href=\"https://github.com/rust-lang/rust/pull/94570#issuecomment-1058839731\">before merge</a> and <a href=\"https://github.com/rust-lang/rust/pull/94570#issuecomment-1059367507\">after merge</a>, which leads me to think that the improvement there is legitimate, but it wasn't a matter of it undoing the regression; just masking it...</p>",
        "id": 274758200,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646863113
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116083\">pnkfelix</span> <a href=\"#narrow/stream/247081-t-compiler.2Fperformance/topic/triage.202022.2003.2009/near/274758200\">said</a>:</p>\n<blockquote>\n<p>it wasn't a matter of it undoing the regression; just masking it...</p>\n</blockquote>\n<p>The concrete numbers support this, I think. check_mod_privacy took <a href=\"https://perf.rust-lang.org/detailed-query.html?commit=2f8d1a835b4e7feaf625f74d0d5cb9b84dbc845a&amp;benchmark=deeply-nested-async-check&amp;scenario=full\">0.076 s</a> with <a href=\"https://github.com/rust-lang/rust/issues/94541\">#94541</a>, and still takes <a href=\"https://perf.rust-lang.org/detailed-query.html?commit=b4bf56cd66ca83e908fd43bde4c627f94b2a8a9f&amp;base_commit=047f9c4bc4e26df4f54c3c76af3e963782ed05e4&amp;benchmark=deeply-nested-async-check&amp;scenario=full\">0.072 s</a> with <a href=\"https://github.com/rust-lang/rust/issues/94570\">#94570</a>. Before <a href=\"https://github.com/rust-lang/rust/issues/94541\">#94541</a>, it took <a href=\"https://perf.rust-lang.org/detailed-query.html?commit=8769f4ef2fe1efddd1f072485f97f568e7328f79&amp;benchmark=deeply-nested-async-check&amp;scenario=full\">0.067 s</a></p>",
        "id": 274758898,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646863432
    },
    {
        "content": "<p>though at this point I think this all still might be in the noise, especially since I didn't see anything in the rollup PR that seemed like it could affect <code>check_mod_privacy</code> ...</p>",
        "id": 274758981,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646863474
    },
    {
        "content": "<p>marking as triaged</p>",
        "id": 274759216,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646863600
    },
    {
        "content": "<p>Support GATs in Rustdoc <a href=\"https://github.com/rust-lang/rust/pull/94009\">#94009</a></p>\n<ul>\n<li>Arithmetic mean of relevant regressions: 0.8%</li>\n<li>Largest regression in <a href=\"https://perf.rust-lang.org/compare.html?start=40d3040ae19b8c43c0027bc6d3e9805e5ee5e0ee&amp;end=6d\\\n7684101a51f1c375ec84aef5d2fbdeb214bbc2&amp;stat=instructions:u\">instruction counts</a>: 1.1% on <code>full</code> builds of <code>ctfe-stress-4 doc</code></li>\n</ul>",
        "id": 274760087,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646864046
    },
    {
        "content": "<p>Already triaged by rustdoc team. <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 274760434,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646864211
    },
    {
        "content": "<p>rustdoc: Stop textually replacing <code>Self</code> in doc links before resolving them <a href=\"https://github.com/rust-lang/rust/pull/93805\">#93805</a></p>\n<ul>\n<li>Arithmetic mean of relevant regressions: 0.3%</li>\n<li>Arithmetic mean of all relevant changes: 0.3%</li>\n<li>Largest regression in <a href=\"https://perf.rust-lang.org/compare.html?start=0cbef1c6a7f4ee33cd41d91778544c5399f10f39&amp;end=16\\\n61e4c7e0e68b4297aec095064d80566d4ea2b1&amp;stat=instructions:u\">instruction counts</a>: 1.0% on <code>full</code> builds of <code>serde doc</code></li>\n</ul>",
        "id": 274760621,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646864283
    },
    {
        "content": "<p>rustdoc team left comment; they did not expect a regression here.</p>",
        "id": 274760651,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646864296
    },
    {
        "content": "<p>to be fair, the only notable regression, I think, was to serde doc. Everything else is very low, e.g. 0.27%</p>",
        "id": 274760729,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646864319
    },
    {
        "content": "<p>okay, triage report PR is up here: <a href=\"https://github.com/rust-lang/rustc-perf/pull/1198\">https://github.com/rust-lang/rustc-perf/pull/1198</a></p>",
        "id": 274766517,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646867542
    },
    {
        "content": "<p>wait, I forgot to write a summary <span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span></p>",
        "id": 274766565,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646867579
    },
    {
        "content": "<p>okay, fixed that</p>",
        "id": 274766732,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646867667
    },
    {
        "content": "<p>and TWIR PR is up here: <a href=\"https://github.com/rust-lang/this-week-in-rust/pull/3024\">https://github.com/rust-lang/this-week-in-rust/pull/3024</a></p>",
        "id": 274766889,
        "sender_full_name": "pnkfelix",
        "timestamp": 1646867787
    }
]
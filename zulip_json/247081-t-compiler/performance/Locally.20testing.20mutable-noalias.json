[
    {
        "content": "<p>I'm trying to get some idea of the impact of <code>mutable-noalias</code>, so I figured I'd start with the rustc-perf suite. I built the compiler with <code>RUSTFLAGS_BOOTSTRAP=-Zmutable-noalias=yes x build --stage 2</code> then I ran the collector with these arguments:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">bench_local</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">id</span><span class=\"w\"> </span><span class=\"n\">yes</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"n\">home</span><span class=\"o\">/</span><span class=\"n\">ben</span><span class=\"o\">/</span><span class=\"n\">rust</span><span class=\"o\">/</span><span class=\"n\">build</span><span class=\"o\">/</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">unknown</span><span class=\"o\">-</span><span class=\"n\">linux</span><span class=\"o\">-</span><span class=\"n\">gnu</span><span class=\"o\">/</span><span class=\"n\">stage2</span><span class=\"o\">/</span><span class=\"n\">bin</span><span class=\"o\">/</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">scenarios</span><span class=\"w\"> </span><span class=\"n\">Full</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">profiles</span><span class=\"w\"> </span><span class=\"n\">Check</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">iterations</span><span class=\"w\"> </span><span class=\"mi\">20</span><span class=\"w\"></span>\n</code></pre></div>\n<p>I found that switching to <code>mutable-noalias=no</code> was a 0.0% difference with some incredible precision, only about +/- 0.05% across benchmarks.</p>\n<p>Did I do something wrong here? I feel like I should have seen <em>something</em>.</p>",
        "id": 278595809,
        "sender_full_name": "Ben Kimock (Saethlin)",
        "timestamp": 1649701217
    },
    {
        "content": "<p>RUSTFLAGS_BOOTSTRAP will not affect the stage 2 binary, I believe, so that seems unsurprising. You probably want regular RUSTFLAGS.</p>",
        "id": 278595938,
        "sender_full_name": "simulacrum",
        "timestamp": 1649701284
    },
    {
        "content": "<p>Would it affect the stage 1 binary?</p>",
        "id": 278602260,
        "sender_full_name": "Ben Kimock (Saethlin)",
        "timestamp": 1649704005
    },
    {
        "content": "<p>You are benchmarking the stage 2 binary.</p>",
        "id": 278602960,
        "sender_full_name": "bjorn3",
        "timestamp": 1649704392
    },
    {
        "content": "<p>Uhhhh yeah but I could be benchmarking the stage 1 binary</p>",
        "id": 278603315,
        "sender_full_name": "Ben Kimock (Saethlin)",
        "timestamp": 1649704583
    },
    {
        "content": "<p><span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span> I just totally missed the part of the dev guide that explains this</p>",
        "id": 278603615,
        "sender_full_name": "Ben Kimock (Saethlin)",
        "timestamp": 1649704768
    }
]
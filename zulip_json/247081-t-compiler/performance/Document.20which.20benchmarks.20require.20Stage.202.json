[
    {
        "content": "<p>Is it possible to document which rustc-perf benchmarks actually require a stage 2 rustc? I was running a subset of the benches yesterday, and I simply assumed stage 2 was needed for the ones I was running, but I realize that may not have been the case. I'd be happy to submit the updated documentation myself if someone points me to where I can find that information</p>",
        "id": 261371478,
        "sender_full_name": "Jake",
        "timestamp": 1636825174
    },
    {
        "content": "<p>I don't think any of them require it</p>",
        "id": 261371542,
        "sender_full_name": "simulacrum",
        "timestamp": 1636825264
    },
    {
        "content": "<p>but not 100% sure -- the servo ones might still be on plugins? I think we dropped that though.</p>",
        "id": 261371544,
        "sender_full_name": "simulacrum",
        "timestamp": 1636825285
    },
    {
        "content": "<p>I should be able to just test this by running the suite locally using stage1 but only doing <code>Full</code> runs right?</p>",
        "id": 261371595,
        "sender_full_name": "Jake",
        "timestamp": 1636825355
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/247081-t-compiler.2Fperformance/topic/Document.20which.20benchmarks.20require.20Stage.202/near/261371544\">said</a>:</p>\n<blockquote>\n<p>but not 100% sure -- the servo ones might still be on plugins? I think we dropped that though.</p>\n</blockquote>\n<p>Only the script crate uses a plugin. It doesn't seem like the script crate is benchmarked.</p>",
        "id": 261371613,
        "sender_full_name": "bjorn3",
        "timestamp": 1636825440
    },
    {
        "content": "<p>They may not require it but they wouldn't be comparable to a stage 2 run because the compiler itself would be built with an older compiler, so less optimized. So for comparisons both would have to be stage1.</p>",
        "id": 261371659,
        "sender_full_name": "The 8472",
        "timestamp": 1636825481
    },
    {
        "content": "<p>I believe <code>--stage 1</code> and <code>--stage 2</code> use the same rustc binary but with <code>--stage 1</code> not having a sysroot unless you do <code>full-bootstrap = true</code> in which case rustc is rebuilt, though it should still result in the same rustc binary.</p>",
        "id": 261371739,
        "sender_full_name": "bjorn3",
        "timestamp": 1636825581
    },
    {
        "content": "<p>ah well, I guess I still don't understand the stages</p>",
        "id": 261371781,
        "sender_full_name": "The 8472",
        "timestamp": 1636825662
    },
    {
        "content": "<p>Yeah this is fine I think, the collector README just says you need stage 2 to run local benchmarks right now, so replacing that with a note that stage 1 is fine as long as you use it consistently seems good. I'm gonna make sure this local test passes and if so I'll submit the PR</p>",
        "id": 261371786,
        "sender_full_name": "Jake",
        "timestamp": 1636825665
    },
    {
        "content": "<p>Happy to take a PR.</p>",
        "id": 261372051,
        "sender_full_name": "simulacrum",
        "timestamp": 1636825992
    }
]
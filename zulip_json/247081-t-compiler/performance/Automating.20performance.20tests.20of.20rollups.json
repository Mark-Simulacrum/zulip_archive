[
    {
        "content": "<p>It seems to me that it's not uncommon that there are some performance regressions (or improvements) in rollups that were not expected. It's quite difficult to find what PR caused the regression in that case and currently it is done manually, which is quite cumbersome.</p>\n<p>What about creating some automation for this? Some script could go through a rollup, try each PR in isolation (or maybe better yet try to revert just that PR if it helps), perf. test it and let the user know what could be the culprit. It could be a local script that would execute on one's computer, but then the environment would not be the same as on CI. Ideally it could actually spawn the perf. tests on CI, benchmark all (or selected) rollup PRs and then create some summary that would quickly show what could be the culprit. Even more ideally, it could do this without creating N useless PRs.</p>",
        "id": 276442128,
        "sender_full_name": "Jakub Beránek",
        "timestamp": 1648109160
    },
    {
        "content": "<p>We already have <code>@rust-timer make-pr-for</code>. Seems to have a bug around rollups though: <a href=\"https://github.com/rust-lang/rustc-perf/issues/832\">https://github.com/rust-lang/rustc-perf/issues/832</a></p>",
        "id": 276457969,
        "sender_full_name": "bjorn3",
        "timestamp": 1648119010
    },
    {
        "content": "<p>And what does <code>make-pr-for</code> do? (where can I find the code for the timer bot btw?)</p>",
        "id": 276459800,
        "sender_full_name": "Jakub Beránek",
        "timestamp": 1648120092
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rustc-perf/blob/master/site/src/request_handlers/github.rs\">https://github.com/rust-lang/rustc-perf/blob/master/site/src/request_handlers/github.rs</a> IIRC</p>",
        "id": 276461036,
        "sender_full_name": "lqd",
        "timestamp": 1648120842
    },
    {
        "content": "<p>Ooh, I see, thanks, so it already is partly automated.</p>",
        "id": 276463117,
        "sender_full_name": "Jakub Beránek",
        "timestamp": 1648122227
    },
    {
        "content": "<p>Yeah, fixing it would be great</p>",
        "id": 276486219,
        "sender_full_name": "simulacrum",
        "timestamp": 1648133297
    },
    {
        "content": "<p>I think I at one point diagnosed it and left a comment somewhere</p>",
        "id": 276486271,
        "sender_full_name": "simulacrum",
        "timestamp": 1648133320
    }
]
[
    {
        "content": "<p>I just made a PR to add a new benchmark: <a href=\"https://github.com/rust-lang/rustc-perf/pull/1033\">https://github.com/rust-lang/rustc-perf/pull/1033</a></p>",
        "id": 254956393,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685434
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span></p>",
        "id": 254956395,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685436
    },
    {
        "content": "<p>What's the runtime of that test like with latest(ish) master? (just <code>time rustc foo.rs</code> should be OK for measuring or similar)</p>",
        "id": 254956470,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685479
    },
    {
        "content": "<p>2-3 seconds</p>",
        "id": 254956482,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685493
    },
    {
        "content": "<p>hm, ok, seems not terrible</p>",
        "id": 254956514,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685515
    },
    {
        "content": "<p>a little faster (1 second) would be ideal, but this doesn't seem easy to scale down, so it's OK</p>",
        "id": 254956528,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685530
    },
    {
        "content": "<p>Think I have a fix for perf regression in <a href=\"https://github.com/rust-lang/rust/issues/88862\">#88862</a>, but this seems like a really important case to have a benchmark for</p>",
        "id": 254956529,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685532
    },
    {
        "content": "<p>Once that fix gets merged, it'll go down to .3 seconds</p>",
        "id": 254956553,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685555
    },
    {
        "content": "<p>oh, ok</p>",
        "id": 254956557,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685560
    },
    {
        "content": "<p>well then seems fine :)</p>",
        "id": 254956589,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685563
    },
    {
        "content": "<p>I'll merge the PR once CI passes (which'll just check the benchmark) and we can go from there</p>",
        "id": 254956632,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685597
    },
    {
        "content": "<p>great</p>",
        "id": 254956658,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685620
    },
    {
        "content": "<p>I realized: there should probably be some short blurb somewhere in the README of basically \"How to add a benchmark\"</p>",
        "id": 254956690,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685654
    },
    {
        "content": "<p>yeah, we should add that -- happy to take a PR :)</p>",
        "id": 254956790,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685748
    },
    {
        "content": "<p>Is there anything to keep in mind other than 1) Add the benchmark into <code>collector/benchmarks</code> and 2) Add some info in the README?</p>",
        "id": 254956826,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685795
    },
    {
        "content": "<p>Should it include \"try to keep the benchmark to less than a second\"?</p>",
        "id": 254956880,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632685811
    },
    {
        "content": "<p>Hm, I think that pretty much covers it</p>",
        "id": 254957044,
        "sender_full_name": "simulacrum",
        "timestamp": 1632685961
    },
    {
        "content": "<p>okay cool</p>",
        "id": 254957106,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632686033
    },
    {
        "content": "<p>I think one second is probably a good thing to mention but more of a \"hint\", and in any case all benchmarks are evaluated on a need basis -- if it tracks a regression, that's more likely to get added, particularly if it's a relatively minimal example</p>",
        "id": 254957109,
        "sender_full_name": "simulacrum",
        "timestamp": 1632686037
    },
    {
        "content": "<p>(it should also note that 1 second can exclude deps, in case that's relevant)</p>",
        "id": 254957162,
        "sender_full_name": "simulacrum",
        "timestamp": 1632686061
    },
    {
        "content": "<p>okay, I'll make a PR shortly</p>",
        "id": 254957366,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632686264
    },
    {
        "content": "<p>gotta go make some food</p>",
        "id": 254957373,
        "sender_full_name": "Jack Huey",
        "timestamp": 1632686269
    }
]
[
    {
        "content": "<p>Starting triage now</p>",
        "id": 255207859,
        "sender_full_name": "rylev",
        "timestamp": 1632832208
    },
    {
        "content": "<p>One interesting change between calcNewSig and the old sig is <a href=\"https://perf.rust-lang.org/compare.html?start=583437a6dd58ee266839d2dac940642a0752a6dd&amp;end=3e8f32e1c52ca493c862facb7a69e7c3f1f97a18&amp;stat=instructions:u\">this</a> is considered a regression in the old scheme and a \"probably relevant\" in the new scheme. The change is limited to one test case but the change is fairly large 2% change which 16 times bigger than the significance threshold. The reason we don't show this is because the change is rated as a \"medium\" siuze magnitude. This seems wrong.</p>",
        "id": 255208127,
        "sender_full_name": "rylev",
        "timestamp": 1632832324
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rustc-perf/blob/ff5938c1ae2f1098345ea3bdc5a74dad707bfc73/site/src/comparison.rs#L877\">Here</a> is where we calculate magnitude of change. I think it's wrong to require a jump from 6 times the significance threshold to 18 times in order to go from a medium size change to a large one.</p>",
        "id": 255208291,
        "sender_full_name": "rylev",
        "timestamp": 1632832408
    },
    {
        "content": "<p>Again this is all arbitrary, but it feels wrong.</p>",
        "id": 255208334,
        "sender_full_name": "rylev",
        "timestamp": 1632832428
    },
    {
        "content": "<p>A cursory Google search doesn't return an obvious and common way to rank outliers (this is pushing my stats knowledge to its limit I'm afraid).</p>",
        "id": 255208650,
        "sender_full_name": "rylev",
        "timestamp": 1632832577
    },
    {
        "content": "<p>This medium to large change threshold used to be less than 10 times the significance threshold for medium and less than 25 times the significance threshold for large, but this was reduced a week ago</p>",
        "id": 255209205,
        "sender_full_name": "rylev",
        "timestamp": 1632832861
    },
    {
        "content": "<p>I created a PR that we can consider merging: <a href=\"https://github.com/rust-lang/rustc-perf/pull/1036\">https://github.com/rust-lang/rustc-perf/pull/1036</a>. This moves the very large threshold to be 12x the significance threshold instead of 18x</p>",
        "id": 255209958,
        "sender_full_name": "rylev",
        "timestamp": 1632833217
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> I'm surprised to see a 10x sig threshold change on a change to only std lib doc comments (<a href=\"https://perf.rust-lang.org/compare.html?start=9620f3a84b079decfdc2e557be007580b097fe43&amp;end=addb4da686a97da46159f0123cb6cdc2ce3d7fdb&amp;stat=instructions:u\">here</a>). Any thoughts on what could be causing that?</p>",
        "id": 255212765,
        "sender_full_name": "rylev",
        "timestamp": 1632834443
    },
    {
        "content": "<p>The detailed view shows most of the regression in metadata_decode_entry_adt_def; maybe the size of the doc-comments has increased and the crate is so small it makes a noticeable difference?</p>",
        "id": 255214116,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1632835038
    },
    {
        "content": "<p>I think we're emitting a diagnostic we weren't before</p>",
        "id": 255222034,
        "sender_full_name": "simulacrum",
        "timestamp": 1632838015
    },
    {
        "content": "<p>(or at least, that's my theory)</p>",
        "id": 255222049,
        "sender_full_name": "simulacrum",
        "timestamp": 1632838019
    },
    {
        "content": "<p>will try to verify</p>",
        "id": 255222074,
        "sender_full_name": "simulacrum",
        "timestamp": 1632838027
    },
    {
        "content": "<p>hm, no, that isn't it</p>",
        "id": 255222636,
        "sender_full_name": "simulacrum",
        "timestamp": 1632838215
    },
    {
        "content": "<p>check_mod_liveness just ... didn't run in the parent?</p>",
        "id": 255222967,
        "sender_full_name": "simulacrum",
        "timestamp": 1632838339
    },
    {
        "content": "<p>presumably incrunchanged changed the incr cache a little, trying to dump that now</p>",
        "id": 255224455,
        "sender_full_name": "simulacrum",
        "timestamp": 1632838864
    },
    {
        "content": "<p>-Zdump-dep-graph seems to just.. not work</p>",
        "id": 255228559,
        "sender_full_name": "simulacrum",
        "timestamp": 1632840315
    },
    {
        "content": "<p>ah, you need to pass query dep graph too...</p>",
        "id": 255230058,
        "sender_full_name": "simulacrum",
        "timestamp": 1632840876
    },
    {
        "content": "<p>Are we reasonably confident this wasn't a fluke? Would running the benchmark with these artifacts locally help?</p>",
        "id": 255250767,
        "sender_full_name": "rylev",
        "timestamp": 1632848194
    },
    {
        "content": "<p>I'm working on investigating</p>",
        "id": 255251513,
        "sender_full_name": "simulacrum",
        "timestamp": 1632848421
    },
    {
        "content": "<p>I'm pretty sure it's not a fluke in some sense, but I can't explain it just yet</p>",
        "id": 255251568,
        "sender_full_name": "simulacrum",
        "timestamp": 1632848435
    },
    {
        "content": "<p>the query/dump dep graph are ICE'ing for me even in super simple programs, so that's stalling some of the work</p>",
        "id": 255251608,
        "sender_full_name": "simulacrum",
        "timestamp": 1632848452
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> any insight into what how you're investigating would be much appreciated. I'm not familiar with the best way to look into incremental compilation issues</p>",
        "id": 255251660,
        "sender_full_name": "rylev",
        "timestamp": 1632848474
    },
    {
        "content": "<p>yeah I'll be sure to write it up</p>",
        "id": 255251689,
        "sender_full_name": "simulacrum",
        "timestamp": 1632848491
    },
    {
        "content": "<p>It's definitely possible rustc is spending more time on an <code>allow</code>ed lint or something</p>",
        "id": 255261397,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1632849586
    },
    {
        "content": "<p>I don't think it's that</p>",
        "id": 255262715,
        "sender_full_name": "simulacrum",
        "timestamp": 1632850018
    },
    {
        "content": "<p>there's a clear difference in query execution, some dependency edge is red now</p>",
        "id": 255262756,
        "sender_full_name": "simulacrum",
        "timestamp": 1632850033
    },
    {
        "content": "<p>PR is up: <a href=\"https://github.com/rust-lang/rustc-perf/pull/1037\">https://github.com/rust-lang/rustc-perf/pull/1037</a></p>",
        "id": 255273791,
        "sender_full_name": "rylev",
        "timestamp": 1632853791
    },
    {
        "content": "<p>well, that was fun</p>",
        "id": 255316931,
        "sender_full_name": "simulacrum",
        "timestamp": 1632871526
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/89343\">https://github.com/rust-lang/rust/pull/89343</a> fixes -Zquery-dep-graph</p>",
        "id": 255316942,
        "sender_full_name": "simulacrum",
        "timestamp": 1632871534
    },
    {
        "content": "<p>will try to get back to investigating this bug now</p>",
        "id": 255316953,
        "sender_full_name": "simulacrum",
        "timestamp": 1632871543
    },
    {
        "content": "<p>sorry for meta, but what's up with the  \"YYYY DD MM\" date in the topic?</p>",
        "id": 255322804,
        "sender_full_name": "cuviper",
        "timestamp": 1632875444
    },
    {
        "content": "<p>oh wow yeah that's a very unfortunate format</p>",
        "id": 255338971,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1632888532
    }
]
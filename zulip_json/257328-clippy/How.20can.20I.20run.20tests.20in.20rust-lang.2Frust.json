[
    {
        "content": "<p>How can I run clippy tests locally from a local checkout of rust-lang/rust? I'm trying to fix tests that are broken <a href=\"https://github.com/rust-lang/rust/pull/83213#issuecomment-828163855\">in my PR</a>, and I want to make sure my fixes actually work before pushing to CI</p>",
        "id": 236702660,
        "sender_full_name": "rylev",
        "timestamp": 1619713116
    },
    {
        "content": "<p><code>x.py test src/tools/clippy</code> errors out locally.</p>",
        "id": 236702886,
        "sender_full_name": "rylev",
        "timestamp": 1619713201
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"224872\">@rylev</span> <em>tests</em> should always work, what's the error?</p>",
        "id": 236704712,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1619713890
    },
    {
        "content": "<p>If you rebase over master I just today merged <code>--bless</code> support too</p>",
        "id": 236704749,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1619713906
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">     </span><span class=\"n\">Running</span><span class=\"w\"> </span><span class=\"n\">tests</span><span class=\"err\">\\</span><span class=\"n\">compile</span><span class=\"o\">-</span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">rs</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">build</span><span class=\"err\">\\</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">pc</span><span class=\"o\">-</span><span class=\"n\">windows</span><span class=\"o\">-</span><span class=\"n\">msvc</span><span class=\"err\">\\</span><span class=\"n\">stage1</span><span class=\"o\">-</span><span class=\"n\">tools</span><span class=\"err\">\\</span><span class=\"n\">x86_64</span><span class=\"o\">-</span><span class=\"n\">pc</span><span class=\"o\">-</span><span class=\"n\">windows</span><span class=\"o\">-</span><span class=\"n\">msvc</span><span class=\"err\">\\</span><span class=\"n\">release</span><span class=\"err\">\\</span><span class=\"n\">deps</span><span class=\"err\">\\</span><span class=\"n\">compile_test</span><span class=\"o\">-</span><span class=\"mi\">966</span><span class=\"n\">a93c750f401a2</span><span class=\"p\">.</span><span class=\"n\">exe</span><span class=\"p\">)</span><span class=\"w\"></span>\n\n<span class=\"n\">running</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">test</span><span class=\"w\"></span>\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">compile_test</span><span class=\"w\"> </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"n\">FAILED</span><span class=\"w\"></span>\n\n<span class=\"n\">failures</span>:\n\n<span class=\"o\">----</span><span class=\"w\"> </span><span class=\"n\">compile_test</span><span class=\"w\"> </span><span class=\"n\">stdout</span><span class=\"w\"> </span><span class=\"o\">----</span><span class=\"w\"></span>\n<span class=\"n\">thread</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">compile_test</span><span class=\"o\">'</span><span class=\"w\"> </span><span class=\"n\">panicked</span><span class=\"w\"> </span><span class=\"n\">at</span><span class=\"w\"> </span><span class=\"o\">'</span><span class=\"na\">Found</span><span class=\"w\"> </span><span class=\"n\">multiple</span><span class=\"w\"> </span><span class=\"n\">rlibs</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"k\">crate</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">regex</span><span class=\"err\">`</span>: <span class=\"err\">`</span><span class=\"s\">\"C:</span><span class=\"se\">\\\\</span><span class=\"s\">Users</span><span class=\"se\">\\\\</span><span class=\"s\">ryanl</span><span class=\"se\">\\\\</span><span class=\"s\">Code</span><span class=\"se\">\\\\</span><span class=\"s\">rust</span><span class=\"se\">\\\\</span><span class=\"s\">build</span><span class=\"se\">\\\\</span><span class=\"s\">x86_64-pc-windows-msvc</span><span class=\"se\">\\\\</span><span class=\"s\">stage1-tools</span><span class=\"se\">\\\\</span><span class=\"s\">x86_64-pc-windows-msvc</span><span class=\"se\">\\\\</span><span class=\"s\">release</span><span class=\"se\">\\\\</span><span class=\"s\">deps</span><span class=\"se\">\\\\</span><span class=\"s\">libregex-015d389567c92b80.rlib\"</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">and</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"s\">\"C:</span><span class=\"se\">\\\\</span><span class=\"s\">Users</span><span class=\"se\">\\\\</span><span class=\"s\">ryanl</span><span class=\"se\">\\\\</span><span class=\"s\">Code</span><span class=\"se\">\\\\</span><span class=\"s\">rust</span><span class=\"se\">\\\\</span><span class=\"s\">build</span><span class=\"se\">\\\\</span><span class=\"s\">x86_64-pc-windows-msvc</span><span class=\"se\">\\\\</span><span class=\"s\">stage1-tools</span><span class=\"se\">\\\\</span><span class=\"s\">x86_64-pc-windows-msvc</span><span class=\"se\">\\\\</span><span class=\"s\">release</span><span class=\"se\">\\\\</span><span class=\"s\">deps</span><span class=\"se\">\\\\</span><span class=\"s\">libregex-f51fec5b24dead06.rlib\"</span><span class=\"o\">'</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">src</span><span class=\"err\">\\</span><span class=\"n\">tools</span><span class=\"err\">\\</span><span class=\"n\">clippy</span><span class=\"err\">\\</span><span class=\"n\">tests</span><span class=\"err\">\\</span><span class=\"n\">compile</span><span class=\"o\">-</span><span class=\"n\">test</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">51</span>:<span class=\"mi\">25</span><span class=\"w\"></span>\n<span class=\"n\">note</span>: <span class=\"nc\">run</span><span class=\"w\"> </span><span class=\"n\">with</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">RUST_BACKTRACE</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">environment</span><span class=\"w\"> </span><span class=\"n\">variable</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">display</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"w\"> </span><span class=\"n\">backtrace</span><span class=\"w\"></span>\n\n\n<span class=\"n\">failures</span>:\n    <span class=\"nc\">compile_test</span><span class=\"w\"></span>\n\n<span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">result</span>: <span class=\"nc\">FAILED</span><span class=\"p\">.</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">passed</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">ignored</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">measured</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"mi\">0</span><span class=\"w\"> </span><span class=\"n\">filtered</span><span class=\"w\"> </span><span class=\"n\">out</span><span class=\"p\">;</span><span class=\"w\"> </span><span class=\"n\">finished</span><span class=\"w\"> </span><span class=\"k\">in</span><span class=\"w\"> </span><span class=\"mf\">0.00</span><span class=\"n\">s</span><span class=\"w\"></span>\n\n<span class=\"n\">error</span>: <span class=\"nc\">test</span><span class=\"w\"> </span><span class=\"n\">failed</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">rerun</span><span class=\"w\"> </span><span class=\"n\">pass</span><span class=\"w\"> </span><span class=\"o\">'--</span><span class=\"n\">test</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"o\">-</span><span class=\"n\">test</span><span class=\"o\">'</span><span class=\"w\"></span>\n\n\n<span class=\"n\">command</span><span class=\"w\"> </span><span class=\"n\">did</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">execute</span><span class=\"w\"> </span><span class=\"n\">successfully</span>: <span class=\"s\">\"</span><span class=\"se\">\\\\\\\\</span><span class=\"s\">?</span><span class=\"se\">\\\\</span><span class=\"s\">C:</span><span class=\"se\">\\\\</span><span class=\"s\">Users</span><span class=\"se\">\\\\</span><span class=\"s\">ryanl</span><span class=\"se\">\\\\</span><span class=\"s\">Code</span><span class=\"se\">\\\\</span><span class=\"s\">rust</span><span class=\"se\">\\\\</span><span class=\"s\">build</span><span class=\"se\">\\\\</span><span class=\"s\">x86_64-pc-windows-msvc</span><span class=\"se\">\\\\</span><span class=\"s\">stage0</span><span class=\"se\">\\\\</span><span class=\"s\">bin</span><span class=\"se\">\\\\</span><span class=\"s\">cargo.exe\"</span><span class=\"w\"> </span><span class=\"s\">\"test\"</span><span class=\"w\"> </span><span class=\"s\">\"--target\"</span><span class=\"w\"> </span><span class=\"s\">\"x86_64-pc-windows-msvc\"</span><span class=\"w\"> </span><span class=\"s\">\"-Zbinary-dep-depinfo\"</span><span class=\"w\"> </span><span class=\"s\">\"-j\"</span><span class=\"w\"> </span><span class=\"s\">\"8\"</span><span class=\"w\"> </span><span class=\"s\">\"--release\"</span><span class=\"w\"> </span><span class=\"s\">\"--manifest-path\"</span><span class=\"w\"> </span><span class=\"s\">\"C:</span><span class=\"se\">\\\\</span><span class=\"s\">Users</span><span class=\"se\">\\\\</span><span class=\"s\">ryanl</span><span class=\"se\">\\\\</span><span class=\"s\">Code</span><span class=\"se\">\\\\</span><span class=\"s\">rust</span><span class=\"se\">\\\\</span><span class=\"s\">src/tools/clippy</span><span class=\"se\">\\\\</span><span class=\"s\">Cargo.toml\"</span><span class=\"w\"> </span><span class=\"s\">\"--\"</span><span class=\"w\"></span>\n<span class=\"n\">expected</span><span class=\"w\"> </span><span class=\"n\">success</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">got</span>: <span class=\"nc\">exit</span><span class=\"w\"> </span><span class=\"n\">code</span>: <span class=\"mi\">101</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 236704830,
        "sender_full_name": "rylev",
        "timestamp": 1619713931
    },
    {
        "content": "<p>Oh that one - try clearing the build dir it points to</p>",
        "id": 236704893,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1619713957
    },
    {
        "content": "<p>I need to fix it properly at some point</p>",
        "id": 236704915,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1619713969
    },
    {
        "content": "<p>/me tries clearing the deps folder</p>",
        "id": 236705132,
        "sender_full_name": "rylev",
        "timestamp": 1619714044
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> that seems to have worked! Thanks!</p>",
        "id": 236705540,
        "sender_full_name": "rylev",
        "timestamp": 1619714195
    }
]
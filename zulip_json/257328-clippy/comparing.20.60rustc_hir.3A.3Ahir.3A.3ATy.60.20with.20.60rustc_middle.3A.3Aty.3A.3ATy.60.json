[
    {
        "content": "<p>I wanted to compare a function return type that I extracted using <code>Node::fn_decl()</code>, with an expression type to see if they matches.</p>\n<p>But as I was very excited to put them into <code>clippy_utils::same_type_and_consts</code>, I found out that those <code>Ty</code>s are totally different things and got a bit disappointed. So, are there any conversion methods between these two or other ways to do the comparison?</p>\n<p>Thanks!</p>",
        "id": 275629452,
        "sender_full_name": "Jonathan Lee",
        "timestamp": 1647511515
    },
    {
        "content": "<p>In this case I think <a href=\"https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TyCtxt.html#method.fn_sig\"><code>TyCtxt::fn_sig</code></a> might help?</p>",
        "id": 275632582,
        "sender_full_name": "Léo Lanteri Thauvin",
        "timestamp": 1647513338
    },
    {
        "content": "<p>For the details of the difference between <code>hir::Ty</code> and <code>ty::Ty</code> see <a href=\"https://rustc-dev-guide.rust-lang.org/ty.html#rustc_hirty-vs-tyty\">the rustc-dev-guide</a></p>",
        "id": 275633105,
        "sender_full_name": "Léo Lanteri Thauvin",
        "timestamp": 1647513611
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"255061\">Léo Lanteri Thauvin</span> <a href=\"#narrow/stream/257328-clippy/topic/comparing.20.60rustc_hir.3A.3Ahir.3A.3ATy.60.20with.20.60rustc_middle.3A.3Aty.3A.3ATy.60/near/275632582\">said</a>:</p>\n<blockquote>\n<p>In this case I think <a href=\"https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/ty/context/struct.TyCtxt.html#method.fn_sig\"><code>TyCtxt::fn_sig</code></a> might help?</p>\n</blockquote>\n<p>Thanks~ maybe that'll helps avoiding using <code>rustc_typeck::hir_ty_to_ty</code>, I'll take a look.</p>",
        "id": 275633108,
        "sender_full_name": "Jonathan Lee",
        "timestamp": 1647513616
    },
    {
        "content": "<p>If all things should fail, there is still <code>hir_ty_to_ty</code>. But you have to be careful with that, because it could lead to ICEs. I think the <code>use_self</code> lint has some comments on how this function can/can't be used.</p>\n<p>If you have to use it, just open a WIP PR and I can help you verify the correct usage.</p>",
        "id": 275636439,
        "sender_full_name": "flip1995",
        "timestamp": 1647515517
    }
]
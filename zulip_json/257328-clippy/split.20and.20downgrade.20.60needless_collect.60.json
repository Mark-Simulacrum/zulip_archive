[
    {
        "content": "<p>Many false positives have been reported for <code>needless_collect</code>, so I think it's time to downgrade it to nursery. But false positives have been reported for the indirect usage, not for the direct usage. So, IMO it would be better that <code>needless_collect</code> is split into two and the indirect usage is downgraded to nursery. What do you think?<br>\n<a href=\"https://github.com/rust-lang/rust-clippy/issues/6420#issuecomment-984176013\">https://github.com/rust-lang/rust-clippy/issues/6420#issuecomment-984176013</a></p>",
        "id": 263377664,
        "sender_full_name": "Takayuki Nakata",
        "timestamp": 1638404717
    },
    {
        "content": "<p>Sounds reasonable. Lint name for the nursery one? <code>needless_indirect_collect</code>? <code>needless_delayed_collect</code>? </p>\n<p>Another option would be adding a configuration.</p>",
        "id": 263409679,
        "sender_full_name": "flip1995",
        "timestamp": 1638436278
    },
    {
        "content": "<p>I don't have a strong opinion for naming, but I like <code>needless_indirect_collect</code>.</p>",
        "id": 263438498,
        "sender_full_name": "Takayuki Nakata",
        "timestamp": 1638452676
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"264664\">flip1995</span> <a href=\"#narrow/stream/257328-clippy/topic/split.20and.20downgrade.20.60needless_collect.60/near/263409679\">said</a>:</p>\n<blockquote>\n<p>Another option would be adding a configuration.</p>\n</blockquote>\n<p>I'm not so sure about adding a configuration to separate enabling  nursery and not-nursery for a lint. Seems like it's out of place here? <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 263438797,
        "sender_full_name": "dswijj",
        "timestamp": 1638452825
    },
    {
        "content": "<p>Not for the lint group. But that you can re-activate the behavior on linting indirect calls to <code>collect</code>.</p>",
        "id": 263497623,
        "sender_full_name": "flip1995",
        "timestamp": 1638477666
    },
    {
        "content": "<p>So the configuration would default to linting only direct <code>collect</code>s. That has the benefit of removing most FPs without requiring yet another lint that will need to be maintained, documented, searched, etc. I like it.</p>",
        "id": 263502853,
        "sender_full_name": "llogiq",
        "timestamp": 1638480546
    },
    {
        "content": "<p>But the configuration is quite binary, you can either switch it off or on, right?<br>\nIf you have lints, you can switch them on/off on a crate/file/block/line basis, deny it here, allow it there. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 263503578,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1638480883
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"217864\">matthiaskrgr</span> <a href=\"#narrow/stream/257328-clippy/topic/split.20and.20downgrade.20.60needless_collect.60/near/263503578\">said</a>:</p>\n<blockquote>\n<p>But the configuration is quite binary, you can either switch it off or on, right?<br>\nIf you have lints, you can switch them on/off on a crate/file/block/line basis, deny it here, allow it there. <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>\n</blockquote>\n<p>Yeah, this elaborates my concern well. Separating it into a new lint decouples it pretty nicely, while also allowing us to keep track of the work to improve the said lint.</p>",
        "id": 263528796,
        "sender_full_name": "dswijj",
        "timestamp": 1638498703
    },
    {
        "content": "<p>I'd just downgrade the whole thing. But that's just me.</p>",
        "id": 263666173,
        "sender_full_name": "Cameron Steffen",
        "timestamp": 1638573522
    },
    {
        "content": "<p>Or call the new lint <code>needless_collect_nursery</code> with the idea that we can always move some individual cases back to <code>needless_collect</code>. I just don't think the \"indirect\" distinction is very meaningful to the user.</p>",
        "id": 263666578,
        "sender_full_name": "Cameron Steffen",
        "timestamp": 1638573851
    },
    {
        "content": "<p>Rustc does this with <code>min_needless_collect</code> and <code>needless_collect</code>, maybe that would work here?</p>",
        "id": 263671124,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638577696
    },
    {
        "content": "<p><code>needless_collect</code>, <code>maybe_not_so_needless_collect</code> <span aria-label=\"upside down\" class=\"emoji emoji-1f643\" role=\"img\" title=\"upside down\">:upside_down:</span></p>",
        "id": 263695746,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1638610766
    },
    {
        "content": "<p>Splitting the lint looks good, but naming is difficult...</p>",
        "id": 263796004,
        "sender_full_name": "Takayuki Nakata",
        "timestamp": 1638747906
    },
    {
        "content": "<p>I don't want to confuse users with inappropriate naming. If we can't come up with a good naming, I'm thinking of downgrading the whole lint <code>needless_collect</code>. It should be possible to split the lint later.</p>",
        "id": 263796233,
        "sender_full_name": "Takayuki Nakata",
        "timestamp": 1638748244
    },
    {
        "content": "<p>Would be sad if the direct usage lint (with low FP rate) gets pushed out of the default set</p>",
        "id": 263830004,
        "sender_full_name": "Dirkjan Ochtman",
        "timestamp": 1638786005
    },
    {
        "content": "<p>Especially if the only reason for doing so would be that we cannot come up with a name for the alternative?</p>",
        "id": 263830048,
        "sender_full_name": "Dirkjan Ochtman",
        "timestamp": 1638786024
    },
    {
        "content": "<p>Yeah, a bad name would be better than pushing out the direct usage lint, imo.</p>",
        "id": 263830272,
        "sender_full_name": "dswijj",
        "timestamp": 1638786151
    },
    {
        "content": "<p>It makes sense for the buggy lint to have a less desirable name.</p>",
        "id": 265506573,
        "sender_full_name": "Cameron Steffen",
        "timestamp": 1639956738
    },
    {
        "content": "<p>This applies to <code>unnecessary_to_owned</code> too <a href=\"https://github.com/rust-lang/rust-clippy/issues/8148\">rust-lang/rust-clippy#8148</a></p>",
        "id": 266853230,
        "sender_full_name": "Cameron Steffen",
        "timestamp": 1641325213
    }
]
[
    {
        "content": "<p>I’m going to remote in to the DTK and update the OS and Xcode versions sometime. Any objections?</p>\n<p>/cc <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span></p>",
        "id": 213651076,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1602940034
    },
    {
        "content": "<p>Sounds good to me.</p>",
        "id": 213653387,
        "sender_full_name": "simulacrum",
        "timestamp": 1602943360
    },
    {
        "content": "<p>go for it!</p>",
        "id": 213657343,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602949302
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> no luck. I installed a newer Xcode, but can't update the OS. Maybe we have to ask MacStadium?</p>",
        "id": 213671785,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1602970447
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> is there an error message I can give to the macstadium folks, or any context?</p>",
        "id": 213754014,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603095026
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> not much of one:</p>\n<p><a href=\"/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png\"></a></div><p>I've tried it over a few days so it's not transient. I tried to download the OS update by hand, but since the machine isn't tied to my account / a Rust account, I don't think that works.</p>",
        "id": 213782830,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1603113338
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> is it possible to do it from the CLI?</p>",
        "id": 213782878,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603113362
    },
    {
        "content": "<p>maybe it shows more detailed error messages</p>",
        "id": 213782924,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603113370
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code> % softwareupdate -i &#39;macOS Big Sur Beta 10-20A5395g&#39;\nSoftware Update Tool\n\nFinding available software\n2020-10-19 06:18:54.414 softwareupdate[11439:2664983] Creating client/daemon connection: 11714DB4-27F6-4109-923F-7CC49C74E87A\nDownloading macOS Big Sur Beta 10\ndownloading: 100.00%\nFailed to download &amp; prepare update: Error Domain=SUMacControllerError Code=7721 &quot;[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)]&quot; UserInfo={NSUnderlyingError=0x13f919be0 {Error Domain=MobileSoftwareUpdateErrorDomain Code=7 &quot;No service connection&quot; UserInfo={NSLocalizedDescription=No service connection}}, SUMacControllerErrorIndicationsMask=0, NSDebugDescription=[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)], NSLocalizedDescription=Failed to launch the software update installer. Please try again.}\n</code></pre></div>",
        "id": 213783393,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1603113592
    },
    {
        "content": "<blockquote>\n<p>[MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)]</p>\n</blockquote>\n<p><span aria-label=\"eyes\" class=\"emoji emoji-1f440\" role=\"img\" title=\"eyes\">:eyes:</span></p>",
        "id": 213783532,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1603113643
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> you have any free time to ping MacStadium?</p>",
        "id": 214342732,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1603474497
    },
    {
        "content": "<p>gah</p>",
        "id": 214342764,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603474513
    },
    {
        "content": "<p>no</p>",
        "id": 214342766,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603474514
    },
    {
        "content": "<p>one sec, doing another thing</p>",
        "id": 214342789,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603474526
    },
    {
        "content": "<p>No hurries, just checking in :-)</p>",
        "id": 214342791,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1603474528
    },
    {
        "content": "<p>If it's feasible for me to do the contacting, I'm happy to do so.</p>",
        "id": 214343491,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1603474874
    },
    {
        "content": "<p>I just know you did the initial contact</p>",
        "id": 214343518,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1603474892
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> if you write a message I can relay it to support</p>",
        "id": 214343804,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1603475043
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>We would like to update our DTK to the newest beta of macOS Big Sur. However, when we try to do so via remote screen sharing, we always get an error. Is this something that requires on-premise permissions to update?\n\nA screenshot of the error:\n\nhttps://rust-lang.zulipchat.com/user_uploads/4715/wGeuSlp28Z63D77FgTLjJfBf/image.png\n\nAnd the error when trying to update via command line:\n\n&gt; % softwareupdate -i &#39;macOS Big Sur Beta 10-20A5395g&#39;\n&gt; Software Update Tool\n&gt;\n&gt; Finding available software\n&gt; 2020-10-19 06:18:54.414 softwareupdate[11439:2664983] Creating client/daemon connection: 11714DB4-27F6-4109-923F-7CC49C74E87A\n&gt; Downloading macOS Big Sur Beta 10\n&gt; downloading: 100.00%\n&gt; Failed to download &amp; prepare update: Error Domain=SUMacControllerError Code=7721 &quot;[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)]&quot; UserInfo={NSUnderlyingError=0x13f919be0 {Error Domain=MobileSoftwareUpdateErrorDomain Code=7 &quot;No service connection&quot; UserInfo={NSLocalizedDescription=No service connection}}, SUMacControllerErrorIndicationsMask=0, NSDebugDescription=[SUMacControllerErrorPreflightWakeupFailed=7721] Failed to perform PreflightWakeup operation: [MobileSoftwareUpdateErrorDomain(MSU):MSU_ERR_INTERNAL_ERROR(7)], NSLocalizedDescription=Failed to launch the software update installer. Please try again.}\n\nThank you!\n</code></pre></div>",
        "id": 215716492,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604585727
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> ^</p>",
        "id": 215716509,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604585733
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> opened the ticket!</p>",
        "id": 215730889,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1604591557
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> provisioned an account for macstadium support, they're going to try and apply the update manually</p>",
        "id": 215759382,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1604603176
    },
    {
        "content": "<p>Wunderbar</p>",
        "id": 215760206,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604603573
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> try again?</p>",
        "id": 215772149,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1604609440
    },
    {
        "content": "<p>they should've applied the patch</p>",
        "id": 215772173,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1604609451
    },
    {
        "content": "<p>Neat! I’m out with Vivian at the moment, but maybe in a few hours. Thank you!</p>",
        "id": 215772226,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604609484
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> I've no idea what they did, but I don't think they did it to our machine... it hasn't been rebooted. When I rebooted it, it still lists the update as available. I still can't apply the update as my user.</p>",
        "id": 215851322,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604672334
    },
    {
        "content": "<p>Unless they mean that they downloaded the beta _installer_ for us</p>",
        "id": 215855051,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604673962
    },
    {
        "content": "<p>Which I'll now run. What's the worst that can happen.</p>",
        "id": 215855133,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604673996
    },
    {
        "content": "<p>restarting. <a href=\"http://butt.holdings/\">http://butt.holdings/</a></p>",
        "id": 215858925,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604675565
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/WOKCneo9ybr_8j2EuHgnHKgN/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/WOKCneo9ybr_8j2EuHgnHKgN/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/WOKCneo9ybr_8j2EuHgnHKgN/image.png\"></a></div>",
        "id": 215862613,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604677155
    },
    {
        "content": "<p>Well, I can log in, and the OS version is different, so that's good.</p>\n<p>Annnnnnnnd it looks like I can download the Big Sur Release Candidate, so lets do it all over.</p>",
        "id": 215863087,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604677371
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/qp25cTTYcrLETDcWnVOdVZs5/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/qp25cTTYcrLETDcWnVOdVZs5/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/qp25cTTYcrLETDcWnVOdVZs5/image.png\"></a></div><p>Kinda neat that screen sharing works during an update</p>",
        "id": 215867492,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604679128
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/SS35beLiHpPYBrfxxWyNcq9L/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/SS35beLiHpPYBrfxxWyNcq9L/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/SS35beLiHpPYBrfxxWyNcq9L/image.png\"></a></div>",
        "id": 215869220,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604679919
    },
    {
        "content": "<p>Ooh, and an Xcode 12.2 RC as well.</p>",
        "id": 215869471,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604680035
    },
    {
        "content": "<p>closed the macstadium support ticket</p>",
        "id": 215871628,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1604680965
    },
    {
        "content": "<p>C'mon, Apple:</p>\n<div class=\"codehilite\"><pre><span></span><code> % cc --version\n\nobjc[4261]: Class AMSupportURLConnectionDelegate is implemented in both ?? (0x21013a750) and ?? (0x1149242b8). One of the two will be used. Which one is undefined.\nobjc[4261]: Class AMSupportURLSession is implemented in both ?? (0x21013a7a0) and ?? (0x114924308). One of the two will be used. Which one is undefined.\n\nApple clang version 12.0.0 (clang-1200.0.32.27)\nTarget: arm64-apple-darwin20.1.0\nThread model: posix\nInstalledDir: /Applications/Xcode-beta.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre></div>\n<p>How you gonna have warnings like that in your own tools.</p>",
        "id": 215883554,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604686512
    },
    {
        "content": "<p>Hmm. Rosetta isn't installed by default, and the error you get from the command line is useless:</p>\n<div class=\"codehilite\"><pre><span></span><code>% cmake --version\nzsh: bad CPU type in executable: cmake\n</code></pre></div>",
        "id": 215884859,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604687119
    },
    {
        "content": "<p>Now to rebuild everything. _really_ wish that rustfmt hadn't been broken for the last weeks</p>",
        "id": 215885618,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604687412
    },
    {
        "content": "<p>Ugh. Forgot to open Xcode once to it could download other components</p>",
        "id": 215927972,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604717630
    },
    {
        "content": "<p>Well, this isn't good.</p>\n<div class=\"codehilite\"><pre><span></span><code>% cargo +stage1 run\n   Compiling x v0.1.0 (/private/tmp/x)\n    Finished dev [unoptimized + debuginfo] target(s) in 0.41s\n     Running `target/debug/x`\nzsh: killed     cargo +stage1 run\n</code></pre></div>",
        "id": 215928392,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604718263
    },
    {
        "content": "<p>Hmm</p>\n<div class=\"codehilite\"><pre><span></span><code>% cargo +nightly-x86_64-apple-darwin run --target aarch64-apple-darwin\n   Compiling x v0.1.0 (/private/tmp/x)\n&lt;jemalloc&gt;: Unsupported system page size\n    Finished dev [unoptimized + debuginfo] target(s) in 0.54s\n     Running `target/aarch64-apple-darwin/debug/x`\nHello, world!\n</code></pre></div>",
        "id": 215928522,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604718498
    },
    {
        "content": "<p>Ok, I don't know exactly what's going on, but I think this is one of the artifacts of bouncing between x86_64 / arm64 processes. I was able to fix the problem using a shim rustc that forced arm64:</p>\n<div class=\"codehilite\" data-code-language=\"Bash\"><pre><span></span><code><span class=\"ch\">#!/usr/bin/env bash</span>\n<span class=\"nb\">exec</span> arch --arm64 /Users/shepmaster/Projects/rust/full/build/aarch64-apple-darwin/stage2/bin/rustc <span class=\"nv\">$@</span>\n</code></pre></div>\n<div class=\"codehilite\"><pre><span></span><code>RUSTC=/tmp/foorustc cargo +stage2 build\n</code></pre></div>",
        "id": 215962129,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604766263
    },
    {
        "content": "<p>And then rebuilt/reinstalled rustup. Now things seem to be working:</p>\n<div class=\"codehilite\"><pre><span></span><code>% cargo +stage2 run\n   Compiling x v0.1.0 (/private/tmp/x)\n    Finished dev [unoptimized + debuginfo] target(s) in 0.39s\n     Running `target/debug/x`\nHello, world!\n</code></pre></div>",
        "id": 215962162,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1604766339
    },
    {
        "content": "<p>Gonna update to the released versions of macOS and Xcode.</p>",
        "id": 216696859,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1605317770
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/45mi5OQMkVGnEbKID0lx-mOh/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/45mi5OQMkVGnEbKID0lx-mOh/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/45mi5OQMkVGnEbKID0lx-mOh/image.png\"></a></div>",
        "id": 216700278,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1605321642
    },
    {
        "content": "<p>nailed it</p>",
        "id": 216700282,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1605321650
    },
    {
        "content": "<p>FWIW I'm enabling the ability to run lldb via ssh:</p>\n<div class=\"codehilite\"><pre><span></span><code> % DevToolsSecurity -enable\nDeveloper mode is now enabled.\n</code></pre></div>",
        "id": 216795288,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1605450615
    }
]
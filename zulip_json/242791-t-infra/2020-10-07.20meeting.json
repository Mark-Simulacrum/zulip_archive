[
    {
        "content": "<p>I'm leading a Rust training this week, so I won't be able to make it to the meeting.</p>",
        "id": 212298525,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1601904481
    },
    {
        "content": "<p>o/</p>",
        "id": 212562297,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079227
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"2943\">@T-infra</span> meeting!</p>",
        "id": 212562543,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079328
    },
    {
        "content": "<p>o/</p>",
        "id": 212562566,
        "sender_full_name": "kennytm",
        "timestamp": 1602079342
    },
    {
        "content": "<p>ok, let's start</p>",
        "id": 212562834,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079453
    },
    {
        "content": "<p>first off we have a beta nomination: <a href=\"https://github.com/rust-lang/rust/pull/77407\">https://github.com/rust-lang/rust/pull/77407</a></p>",
        "id": 212562863,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079473
    },
    {
        "content": "<p>this backports some changes I'm making to build-manifest, that are needed for the new promote-release</p>",
        "id": 212562978,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079526
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> from me on getting this rolled out, we have enough testing in nightly now that I'm fine with it</p>",
        "id": 212563034,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079556
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> await</p>",
        "id": 212563134,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079588
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 212563136,
        "sender_full_name": "triagebot",
        "timestamp": 1602079589
    },
    {
        "content": "<p>ok! let's move on</p>",
        "id": 212563163,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079605
    },
    {
        "content": "<p>this is the first meeting of the month, so let's go through the P-medium issues</p>",
        "id": 212563206,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079625
    },
    {
        "content": "<p>wasm emscripten tests for std/alloc/core/etc not running <a href=\"https://github.com/rust-lang/rust/issues/75633\">#75633</a></p>",
        "id": 212563240,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079640
    },
    {
        "content": "<p>this was claimed by <span class=\"user-mention\" data-user-id=\"252217\">@Khionu Sybiern</span>, but no update was posted since last month</p>",
        "id": 212563295,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079670
    },
    {
        "content": "<p>I'd wait to see if they made some progress on it</p>",
        "id": 212563371,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079690
    },
    {
        "content": "<p>Cargotest enhancements <a href=\"https://github.com/rust-lang/rust/issues/70659\">#70659</a></p>",
        "id": 212563407,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079703
    },
    {
        "content": "<p>this was claimed by <span class=\"user-mention\" data-user-id=\"225192\">@Nell Shamrell-Harrington</span>, but no update was posted either</p>",
        "id": 212563458,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079725
    },
    {
        "content": "<p>(I know she's busy between jobs!)</p>",
        "id": 212563474,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079736
    },
    {
        "content": "<p>Run 32bit test suite on PR CI? <a href=\"https://github.com/rust-lang/rust/issues/69823\">#69823</a></p>",
        "id": 212563506,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079752
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> ?</p>",
        "id": 212563509,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079754
    },
    {
        "content": "<p>no news</p>",
        "id": 212563523,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079759
    },
    {
        "content": "<p>I don't know that I expect any either</p>",
        "id": 212563567,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079783
    },
    {
        "content": "<p>we need a min version llvm update first I think</p>",
        "id": 212563583,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079792
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span> can you leave a comment on the issue?</p>",
        "id": 212563647,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079810
    },
    {
        "content": "<p>also like with clippy there's some question of \"is this right thing to do\"</p>",
        "id": 212563668,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079821
    },
    {
        "content": "<p>will leave a comment</p>",
        "id": 212563676,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079825
    },
    {
        "content": "<p>thanks <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 212563741,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079859
    },
    {
        "content": "<p>Re-enable LLVM and debug assertions for slow builders <a href=\"https://github.com/rust-lang/rust/issues/59637\">#59637</a></p>",
        "id": 212563782,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079883
    },
    {
        "content": "<p>there is a PR up for it, but my understanding is that there are some builders that are failing those assertions: <a href=\"https://github.com/rust-lang/rust/pull/75199\">https://github.com/rust-lang/rust/pull/75199</a></p>",
        "id": 212563815,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079904
    },
    {
        "content": "<p>yeah I think someone was investigating and maybe fixed it?</p>",
        "id": 212563896,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079930
    },
    {
        "content": "<p>ah, <a href=\"https://github.com/rust-lang/rust/issues/76859\">#76859</a> is still open</p>",
        "id": 212563941,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079952
    },
    {
        "content": "<p>I guess we need to bug <span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> about that</p>",
        "id": 212563973,
        "sender_full_name": "simulacrum",
        "timestamp": 1602079967
    },
    {
        "content": "<p>we just did :D</p>",
        "id": 212563986,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602079974
    },
    {
        "content": "<p>no, they're not subscribed to this stream</p>",
        "id": 212564101,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080031
    },
    {
        "content": "<p>I pinged incr comp wg on the thread though</p>",
        "id": 212564118,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080038
    },
    {
        "content": "<p>that also works</p>",
        "id": 212564162,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080043
    },
    {
        "content": "<p>ok then!</p>",
        "id": 212564168,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080046
    },
    {
        "content": "<p>that's all for our nominated issues</p>",
        "id": 212564182,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080053
    },
    {
        "content": "<p>the only item on our agenda is an update on the promote-release changes</p>",
        "id": 212564248,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080091
    },
    {
        "content": "<p>I created a scheduled event on aws to do a dev nightly build each night, but today I discovered an issue with it</p>",
        "id": 212564347,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080142
    },
    {
        "content": "<p>o/</p>",
        "id": 212564357,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1602080148
    },
    {
        "content": "<p>basically, the current setup was that AWS EventBridge called a Lambda function which checked if a release needed to happen and, if so, started the actual release process</p>",
        "id": 212564503,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080200
    },
    {
        "content": "<p>the Lambda was needed to avoid spinning up a VM every hour to try and do dev-static stable releases, which are in an hourly cron</p>",
        "id": 212564553,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080238
    },
    {
        "content": "<p>unfortunately the delivery policy for async lambdas is \"at least once\", and both yesterday and today it happened that the lambda was called twice, resulting in two parallel release processes happening</p>",
        "id": 212564645,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080275
    },
    {
        "content": "<p>the solution I reached today was to remove the lambda and have AWS EventBridge start the release process directly, but that means we should not have the dev-static stable release on cron so frequently</p>",
        "id": 212564761,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080308
    },
    {
        "content": "<p>and my current proposal was to have it be manual (with <code>./start-release.py dev stable</code> from the simpleinfra repo)</p>",
        "id": 212564834,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080344
    },
    {
        "content": "<p>any thoughts?</p>",
        "id": 212564867,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080356
    },
    {
        "content": "<p>I am fine with that.</p>",
        "id": 212564878,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080361
    },
    {
        "content": "<p>We could also deduplicate somehow, but seems hard.</p>",
        "id": 212564899,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080369
    },
    {
        "content": "<p>yeah, I don't really want to manage that, it's just error-prone</p>",
        "id": 212564958,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080397
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> await</p>",
        "id": 212565028,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080417
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 212565030,
        "sender_full_name": "triagebot",
        "timestamp": 1602080418
    },
    {
        "content": "<p>ok! I guess I can do the rest of the \"what did I change for promote-release\" :)</p>",
        "id": 212565090,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080451
    },
    {
        "content": "<p>so, last friday I mistakenly started a production nightly build with the new release process, which broke stuff</p>",
        "id": 212565147,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080479
    },
    {
        "content": "<p>the breakage was not due to the new release process, but because we had two nightlies released the same day</p>",
        "id": 212565201,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080503
    },
    {
        "content": "<p>I posted a small postmortem on the issue: <a href=\"https://github.com/rust-lang/rustup/issues/2504#issuecomment-702749774\">https://github.com/rust-lang/rustup/issues/2504#issuecomment-702749774</a></p>",
        "id": 212565285,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080529
    },
    {
        "content": "<p>as a followup with that, I made a merged PR to the new release tooling that:</p>\n<ul>\n<li>fixes the underlying problem that caused issues with two nightlies released in a single day</li>\n<li>adds a safeguard to prevent publishing multiple nightlies a day anyway, which can be explicitly disabled if we need to</li>\n</ul>",
        "id": 212565442,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080594
    },
    {
        "content": "<p>there is an equivalent PR to the current release tooling in RCS, <span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> is waiting for the stable release to happen before merging it</p>",
        "id": 212565487,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080616
    },
    {
        "content": "<p>/me is not aware of that, but it's probably true.</p>",
        "id": 212565506,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080629
    },
    {
        "content": "<p>aware of what?</p>",
        "id": 212565523,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080637
    },
    {
        "content": "<p>Oh, I recall it now, okay</p>",
        "id": 212565573,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080646
    },
    {
        "content": "<p>yeah</p>",
        "id": 212565627,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080677
    },
    {
        "content": "<p>and I'm also working on a local branch to move gpg signatures and checksum generation over to promote-release</p>",
        "id": 212565667,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080699
    },
    {
        "content": "<p>and... that's all on the updates</p>",
        "id": 212565685,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080705
    },
    {
        "content": "<p>moving on another really small topic</p>",
        "id": 212565753,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080744
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"117568\">@Aidan Hobson Sayers</span> and <span class=\"user-mention\" data-user-id=\"225192\">@Nell Shamrell-Harrington</span> are missing checkboxes on the aarch64 tier 1 rfc <a href=\"https://github.com/rust-lang/rfcs/pull/2959#issuecomment-696632770\">https://github.com/rust-lang/rfcs/pull/2959#issuecomment-696632770</a></p>",
        "id": 212565786,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080759
    },
    {
        "content": "<p>and... that's all I got</p>",
        "id": 212565841,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080767
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-meeting</p>",
        "id": 212565849,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080770
    },
    {
        "content": "<p>Does anyone have something to bring up?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if you're ready to end the meeting.</p>",
        "id": 212565852,
        "sender_full_name": "triagebot",
        "timestamp": 1602080770
    },
    {
        "content": "<p>thanks everyone for attending then!</p>",
        "id": 212565928,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080798
    },
    {
        "content": "<p>\\o</p>",
        "id": 212565929,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1602080798
    },
    {
        "content": "<p>\\o</p>",
        "id": 212565937,
        "sender_full_name": "kennytm",
        "timestamp": 1602080805
    },
    {
        "content": "<p>\\o</p>",
        "id": 212565946,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1602080812
    },
    {
        "content": "<p>\\o</p>",
        "id": 212565959,
        "sender_full_name": "simulacrum",
        "timestamp": 1602080817
    }
]
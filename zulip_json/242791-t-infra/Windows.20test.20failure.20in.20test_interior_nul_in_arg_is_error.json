[
    {
        "content": "<p>A lot of PRs seem to fail bors with the same error currently:<br>\n<a href=\"https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+test_interior_nul_in_arg_is_error\">https://github.com/rust-lang/rust/pulls?q=is%3Apr+is%3Aopen+test_interior_nul_in_arg_is_error</a></p>",
        "id": 265793972,
        "sender_full_name": "RalfJ",
        "timestamp": 1640172895
    },
    {
        "content": "<p>Hm, looking at those tests I'd guess the most likely explanation is that <code>rustc</code> is not in the test's PATH for some reason.</p>",
        "id": 265818549,
        "sender_full_name": "Chris Denton",
        "timestamp": 1640187778
    },
    {
        "content": "<p>Closed the tree</p>",
        "id": 265827778,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640192701
    },
    {
        "content": "<p>Does anyone know how these tests work at all?  How does <code>rustc</code> get into PATH?</p>",
        "id": 265830422,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640194104
    },
    {
        "content": "<p>I would just add that all we need is some application that will be in PATH on every supported platform. This would need to be something supplied by Rust for non-POSIX systems. A simple implementation of, e.g. echo would do it.</p>",
        "id": 265831294,
        "sender_full_name": "Chris Denton",
        "timestamp": 1640194571
    },
    {
        "content": "<p>Hm, it seems like it may be easiest to compile hello world and put that into path ourselves for these tests if we need that kind of guarantee...</p>",
        "id": 265831416,
        "sender_full_name": "simulacrum",
        "timestamp": 1640194656
    },
    {
        "content": "<p>For a unit test, I think that would be a bit awkward.  We do that in cargo's testsuite, but it is not very clean.  (We have a dummy \"echo\" binary.)</p>",
        "id": 265831522,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640194706
    },
    {
        "content": "<p>Yeah, that would likely mean wanting to move it to a UI test. Obviously, that has its own difficulties (e.g., with private item access etc)</p>",
        "id": 265831817,
        "sender_full_name": "simulacrum",
        "timestamp": 1640194882
    },
    {
        "content": "<p>it should be fine to have some cfg's though if necessary to get something that \"should\" be in PATH...</p>",
        "id": 265831835,
        "sender_full_name": "simulacrum",
        "timestamp": 1640194901
    },
    {
        "content": "<p>The complicating factor would be the Windows resolver tests. Those tests need something that's in PATH but not in system directories.</p>",
        "id": 265833163,
        "sender_full_name": "Chris Denton",
        "timestamp": 1640195657
    },
    {
        "content": "<p>Does it need a valid executable?  If not, it could just create a temp directory, add an empty file, and check how it resolves.</p>",
        "id": 265833398,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640195801
    },
    {
        "content": "<p>Yeah, that'll work.</p>",
        "id": 265833452,
        "sender_full_name": "Chris Denton",
        "timestamp": 1640195846
    },
    {
        "content": "<p>It looks like there was a new windows image release: <a href=\"https://github.com/actions/virtual-environments/releases/tag/win19%2F20211219.1\">https://github.com/actions/virtual-environments/releases/tag/win19%2F20211219.1</a></p>",
        "id": 265835138,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640196603
    },
    {
        "content": "<p>Which updated the OS version from build 2300 to 2366</p>",
        "id": 265835162,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640196624
    },
    {
        "content": "<p>What a weird thing for windows to change.</p>",
        "id": 265835169,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640196631
    },
    {
        "content": "<p>i'm going to be gone for a couple hours, so i wont be able to follow up until later</p>",
        "id": 265835677,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640196931
    },
    {
        "content": "<p>I PR'd <a href=\"https://github.com/rust-lang/rust/issues/92201\">#92201</a> which should hopefully get the queue moving again.</p>",
        "id": 265841435,
        "sender_full_name": "Chris Denton",
        "timestamp": 1640200417
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"260325\">@Chris Denton</span>!</p>",
        "id": 265860622,
        "sender_full_name": "Eric Huss",
        "timestamp": 1640211647
    }
]
[
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Can&#39;t find any online and idle self-hosted runner in the current repository, account/organization that matches the required labels: &#39;self-hosted , ARM64 , linux&#39;\nWaiting for a self-hosted runner to pickup this job...\n</code></pre></div>\n<p>in <a href=\"https://github.com/rust-lang-ci/rust/runs/4476963486?check_suite_focus=true\">https://github.com/rust-lang-ci/rust/runs/4476963486?check_suite_focus=true</a></p>\n<p>Is there a way to avoid this somehow?<br>\nIt makes the entire ci build even more prone to timing out :(<br>\n<a href=\"/user_uploads/4715/WZ4MJPI9JL08797ztJBx1asD/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/WZ4MJPI9JL08797ztJBx1asD/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/WZ4MJPI9JL08797ztJBx1asD/image.png\"></a></div>",
        "id": 264378484,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639089860
    },
    {
        "content": "<p>how often does it happen?</p>",
        "id": 264378840,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639090062
    },
    {
        "content": "<p>huh why are there no registered runners?</p>",
        "id": 264378945,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639090128
    },
    {
        "content": "<p>huh both runners are in this state</p>",
        "id": 264381321,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639091793
    },
    {
        "content": "<div class=\"codehilite\"><pre><span></span><code>Dec 09 22:08:23 ubuntu start-gha-runner[1213]: --------------------------------------------------------------------------------\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |        ____ _ _   _   _       _          _        _   _                      |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |       / ___(_) |_| | | |_   _| |__      / \\   ___| |_(_) ___  _ __  ___      |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |      | |  _| | __| |_| | | | | &#39;_ \\    / _ \\ / __| __| |/ _ \\| &#39;_ \\/ __|     |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |      | |_| | | |_|  _  | |_| | |_) |  / ___ \\ (__| |_| | (_) | | | \\__ \\     |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |       \\____|_|\\__|_| |_|\\__,_|_.__/  /_/   \\_\\___|\\__|_|\\___/|_| |_|___/     |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |                                                                              |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |                       Self-hosted runner registration                        |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: |                                                                              |\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: --------------------------------------------------------------------------------\nDec 09 22:08:23 ubuntu start-gha-runner[1213]: # Authentication\nDec 09 22:08:25 ubuntu start-gha-runner[1213]: √ Connected to GitHub\nDec 09 22:08:26 ubuntu start-gha-runner[1213]: # Runner Registration\nDec 09 22:08:26 ubuntu start-gha-runner[1213]: √ Runner successfully added\nDec 09 22:08:28 ubuntu start-gha-runner[1213]: √ Runner connection is good\nDec 09 22:08:28 ubuntu start-gha-runner[1213]: # Runner settings\nDec 09 22:08:28 ubuntu start-gha-runner[1213]: √ Settings Saved.\nDec 09 22:08:30 ubuntu start-gha-runner[1868]: √ Connected to GitHub\nDec 09 22:08:30 ubuntu start-gha-runner[1868]: Current runner version: &#39;2.285.1-rust1&#39;\nDec 09 22:08:30 ubuntu start-gha-runner[1868]: 2021-12-09 22:08:30Z: Listening for Jobs\nDec 09 22:08:34 ubuntu start-gha-runner[1868]: 2021-12-09 22:08:34Z: Running job: auto (aarch64-gnu, self-hosted, ARM64, linux)\nDec 09 22:08:45 ubuntu sudo[2230]:      gha : TTY=unknown ; PWD=/gha/_work/rust/rust ; USER=root ; COMMAND=/usr/bin/apt-get install -y python3-setuptools python3-wheel\nDec 09 22:08:45 ubuntu sudo[2230]: pam_unix(sudo:session): session opened for user root by (uid=0)\nDec 09 22:08:46 ubuntu sudo[2230]: pam_unix(sudo:session): session closed for user root\nDec 09 22:08:53 ubuntu sudo[2344]:      gha : TTY=unknown ; PWD=/gha/_work/rust/rust ; USER=root ; COMMAND=/usr/bin/mkdir -p /etc/docker\nDec 09 22:08:53 ubuntu sudo[2344]: pam_unix(sudo:session): session opened for user root by (uid=0)\nDec 09 22:08:53 ubuntu sudo[2344]: pam_unix(sudo:session): session closed for user root\nDec 09 22:08:53 ubuntu sudo[2347]:      gha : TTY=unknown ; PWD=/gha/_work/rust/rust ; USER=root ; COMMAND=/usr/bin/tee /etc/docker/daemon.json\nDec 09 22:08:53 ubuntu sudo[2347]: pam_unix(sudo:session): session opened for user root by (uid=0)\nDec 09 22:08:53 ubuntu sudo[2347]: pam_unix(sudo:session): session closed for user root\nDec 09 22:08:53 ubuntu sudo[2349]:      gha : TTY=unknown ; PWD=/gha/_work/rust/rust ; USER=root ; COMMAND=/usr/sbin/service docker restart\nDec 09 22:08:53 ubuntu sudo[2349]: pam_unix(sudo:session): session opened for user root by (uid=0)\nDec 09 22:08:54 ubuntu sudo[2349]: pam_unix(sudo:session): session closed for user root\nDec 09 22:23:49 ubuntu start-gha-runner[1868]: 2021-12-09 22:23:49Z: Job auto (aarch64-gnu, self-hosted, ARM64, linux) completed with result: Canceled\nDec 09 22:23:49 ubuntu start-gha-runner[1868]: An error occurred: Access denied. System:ServiceIdentity;DDDDDDDD-DDDD-DDDD-DDDD-DDDDDDDDDDDD needs View permissions to perform the action.\nDec 09 22:23:49 ubuntu start-gha-runner[931]: warning: failed to eject the CD-ROM\nDec 09 22:23:49 ubuntu start-gha-runner[931]: Traceback (most recent call last):\nDec 09 22:23:49 ubuntu start-gha-runner[931]:   File &quot;/usr/local/bin/start-gha-runner&quot;, line 39, in &lt;module&gt;\nDec 09 22:23:49 ubuntu start-gha-runner[931]:     subprocess.run([&quot;./run.sh&quot;], env=env, check=True)\nDec 09 22:23:49 ubuntu start-gha-runner[931]:   File &quot;/usr/lib/python3.8/subprocess.py&quot;, line 516, in run\nDec 09 22:23:49 ubuntu start-gha-runner[931]:     raise CalledProcessError(retcode, process.args,\nDec 09 22:23:49 ubuntu start-gha-runner[931]: subprocess.CalledProcessError: Command &#39;[&#39;./run.sh&#39;]&#39; returned non-zero exit status 2.\n</code></pre></div>",
        "id": 264381323,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639091797
    },
    {
        "content": "<p>restarted both VMs</p>",
        "id": 264381359,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639091830
    },
    {
        "content": "<p>dunno why the autorestart got stuck</p>",
        "id": 264381369,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639091836
    },
    {
        "content": "<p>ok runners are back online <span class=\"user-mention\" data-user-id=\"217864\">@matthiaskrgr</span></p>",
        "id": 264381685,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639092078
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/242791-t-infra/topic/aarch64.20job.20runner.20delayed/near/264378840\">said</a>:</p>\n<blockquote>\n<p>how often does it happen?</p>\n</blockquote>\n<p>no idea  <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span> <br>\nI just noticed it right now, but will try to keep an eye on it</p>",
        "id": 264381801,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639092160
    },
    {
        "content": "<p>I closed the tree, all PRs are still failing with the aarch64-gnu runner not starting.</p>",
        "id": 264404243,
        "sender_full_name": "Eric Huss",
        "timestamp": 1639113293
    },
    {
        "content": "<p>uff <a href=\"https://github.com/actions/runner/issues/1545\">https://github.com/actions/runner/issues/1545</a></p>",
        "id": 264413826,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639123844
    },
    {
        "content": "<p>let me open a support ticket</p>",
        "id": 264413829,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639123848
    },
    {
        "content": "<p>sent a high-priority ticket and CC'd infra@</p>",
        "id": 264414573,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639124457
    },
    {
        "content": "<p>still no reply on the support ticket</p>",
        "id": 264432643,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639135135
    },
    {
        "content": "<p>still no reply</p>",
        "id": 264439697,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639139336
    },
    {
        "content": "<p>(if we have someone from github lurking here, the enterprise support ticket is 1422775)</p>",
        "id": 264440439,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639139750
    },
    {
        "content": "<p>What's their SLA for high-priority tickets?</p>",
        "id": 264445060,
        "sender_full_name": "eggyal",
        "timestamp": 1639142249
    },
    {
        "content": "<p>\"&lt; 8hr\" for high priority tickets</p>",
        "id": 264445329,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142381
    },
    {
        "content": "<p>(we don't have premium enterprise support, just regular enterprise support)</p>",
        "id": 264445419,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142407
    },
    {
        "content": "<p>Fair enough.  Seems to be affecting a fair few projects though.  Kinda surprised there's no \"we're investigating reports\" (yet) on <a href=\"http://githubstatus.com\">githubstatus.com</a></p>",
        "id": 264445648,
        "sender_full_name": "eggyal",
        "timestamp": 1639142522
    },
    {
        "content": "<p>well its only one of the runners..<br>\nit's not like gha was completely broken by this</p>",
        "id": 264445875,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639142609
    },
    {
        "content": "<p>True true.  Just on the related GHA issue there's been quite a few \"me toos\" .</p>",
        "id": 264446172,
        "sender_full_name": "eggyal",
        "timestamp": 1639142725
    },
    {
        "content": "<p>my understanding is that <em>all</em> self-hosted runners brick themselves after 15 minutes</p>",
        "id": 264446229,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142751
    },
    {
        "content": "<p>(so there is not even a point in me restarting ours)</p>",
        "id": 264446310,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142773
    },
    {
        "content": "<p>tbh I can see how this slipped in if their end-to-end tests perform shorter than 15 minutes builds</p>",
        "id": 264446382,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142813
    },
    {
        "content": "<p>can we work around with a  while <code>sleep 600</code>; echo . ; done   loop or something?</p>",
        "id": 264446495,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639142865
    },
    {
        "content": "<p>I mean, I don't think it's a problem of not having any output</p>",
        "id": 264446570,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142891
    },
    {
        "content": "<p>mmh :/</p>",
        "id": 264446588,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639142897
    },
    {
        "content": "<p>from the error message I guess they mistakenly set the expiration of one of the tokens self-hosted runners use to communicate with github to 15 minutes</p>",
        "id": 264446616,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142913
    },
    {
        "content": "<p>\"An error occurred: Access denied. System:ServiceIdentity;DDDDDDDD-DDDD-DDDD-DDDD-DDDDDDDDDDDD needs View permissions to perform the action.\"</p>",
        "id": 264446648,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142929
    },
    {
        "content": "<p>and one of the error messages in the github issue is \"TaskAgentJobTokenExpiredException received renew job request 783714, job is no longer valid, stop renew job request.\"</p>",
        "id": 264446748,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639142984
    },
    {
        "content": "<p><a href=\"https://www.githubstatus.com/incidents/tc051c121cs7\">https://www.githubstatus.com/incidents/tc051c121cs7</a></p>",
        "id": 264460189,
        "sender_full_name": "eggyal",
        "timestamp": 1639148977
    },
    {
        "content": "<p><a href=\"https://github.com/actions/runner/issues/1546#issuecomment-991135687\">https://github.com/actions/runner/issues/1546#issuecomment-991135687</a></p>",
        "id": 264476050,
        "sender_full_name": "eggyal",
        "timestamp": 1639155665
    },
    {
        "content": "<p>GitHub report the issue is now resolved.</p>",
        "id": 264487371,
        "sender_full_name": "eggyal",
        "timestamp": 1639160398
    },
    {
        "content": "<p>great!<br>\nretrying <a href=\"https://github.com/rust-lang/rust/pull/91715\">https://github.com/rust-lang/rust/pull/91715</a></p>",
        "id": 264488051,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639160678
    },
    {
        "content": "<p>wait</p>",
        "id": 264489998,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161549
    },
    {
        "content": "<p>we need to restart the runners</p>",
        "id": 264490002,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161552
    },
    {
        "content": "<p>doing so in a sec</p>",
        "id": 264490004,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161555
    },
    {
        "content": "<p>oh ok</p>",
        "id": 264490021,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639161566
    },
    {
        "content": "<p>well so far it has been runnning fine <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 264490043,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639161576
    },
    {
        "content": "<p>oh</p>",
        "id": 264490392,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161723
    },
    {
        "content": "<p>then I might've just killed it <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 264490429,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161729
    },
    {
        "content": "<p>my bad <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 264490442,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161738
    },
    {
        "content": "<p>anyway we got a fresh set of VMs now</p>",
        "id": 264490487,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639161752
    },
    {
        "content": "<p>it has only been running for a couple of minutes, no biggie <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 264490559,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639161791
    },
    {
        "content": "<p>mh the rest of the jobs is still running can you somehow force-stop the entire ci run for a clean retry?</p>",
        "id": 264490705,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639161854
    },
    {
        "content": "<p>== clock drift check ==<br>\n  local time: Fri Dec 10 18:41:55 UTC 2021<br>\nSession terminated, killing shell... ...killed.<br>\ntime=\"2021-12-10T18:41:55Z\" level=error msg=\"error waiting for container: unexpected EOF\"<br>\n  network time:</p>",
        "id": 264494345,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639163472
    },
    {
        "content": "<p>on aarch64<br>\nshould I just retry?</p>",
        "id": 264494411,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639163510
    },
    {
        "content": "<p>oh wait nevermind, I thought that was just the error of the build you cancelled, came in a bit late</p>",
        "id": 264494530,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1639163565
    },
    {
        "content": "<p>The build failed again without apparent error, are the CI VMs up again?</p>",
        "id": 264502295,
        "sender_full_name": "The 8472",
        "timestamp": 1639167493
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330154\">The 8472</span> <a href=\"#narrow/stream/242791-t-infra/topic/aarch64.20job.20runner.20delayed/near/264502295\">said</a>:</p>\n<blockquote>\n<p>The build failed again without apparent error, are the CI VMs up again?</p>\n</blockquote>\n<p>Why do you think it failed?  It looks to be running to me: <a href=\"https://github.com/rust-lang-ci/rust/runs/4487387044\">https://github.com/rust-lang-ci/rust/runs/4487387044</a></p>",
        "id": 264502791,
        "sender_full_name": "Eric Huss",
        "timestamp": 1639167752
    },
    {
        "content": "<p>Drop treeclosed as it seems to be running fine?</p>",
        "id": 264503653,
        "sender_full_name": "Nikita Popov",
        "timestamp": 1639168181
    },
    {
        "content": "<p>done</p>",
        "id": 264504060,
        "sender_full_name": "Eric Huss",
        "timestamp": 1639168381
    },
    {
        "content": "<p>Ah, I only looked at the bors comments, not the actual status.</p>",
        "id": 264504304,
        "sender_full_name": "The 8472",
        "timestamp": 1639168506
    },
    {
        "content": "<p>is this acting up again? GH seems to be complaining the runner is offline</p>\n<p><a href=\"https://github.com/rust-lang-ci/rust/runs/4643912256?check_suite_focus=true\">https://github.com/rust-lang-ci/rust/runs/4643912256?check_suite_focus=true</a></p>\n<blockquote>\n<p>Can't find any online and idle self-hosted runner in the current repository, account/organization that matches the required labels: 'self-hosted , ARM64 , linux'<br>\nWaiting for a self-hosted runner to pickup this job...</p>\n</blockquote>",
        "id": 266207264,
        "sender_full_name": "Caleb Cartwright",
        "timestamp": 1640641596
    },
    {
        "content": "<p>likely due to <a href=\"#narrow/stream/242791-t-infra/topic/gha.20runner.20update\">https://rust-lang.zulipchat.com/#narrow/stream/242791-t-infra/topic/gha.20runner.20update</a>, not sure that we ever made that update</p>",
        "id": 266207303,
        "sender_full_name": "simulacrum",
        "timestamp": 1640641655
    },
    {
        "content": "<p>bumped, I think, but not sure I got it right.</p>",
        "id": 266207611,
        "sender_full_name": "simulacrum",
        "timestamp": 1640641982
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/242791-t-infra/topic/aarch64.20job.20runner.20delayed/near/266207611\">said</a>:</p>\n<blockquote>\n<p>bumped, I think, but not sure I got it right.</p>\n</blockquote>\n<p>awesome thank you! i have to deal with managing self-hosted runners at my day job so somewhat familiar with the associated \"joys\", can't imagine how much \"fun\" it is with the custom fork <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 266207831,
        "sender_full_name": "Caleb Cartwright",
        "timestamp": 1640642201
    }
]
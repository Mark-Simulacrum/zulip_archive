[
    {
        "content": "<p>Hi all, I am getting reports that people are unable to install some parts of recent toolchains -- <a href=\"https://github.com/rust-lang/rustup/issues/2855\">https://github.com/rust-lang/rustup/issues/2855</a></p>\n<p>Is there something we need to tweak on the CDN?</p>",
        "id": 255402060,
        "sender_full_name": "Daniel Silverstone",
        "timestamp": 1632923354
    },
    {
        "content": "<p>hm</p>",
        "id": 255402195,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923402
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span></p>",
        "id": 255402235,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923404
    },
    {
        "content": "<p>I suspect this is probably a missing invalidation, but it is a bit weird</p>",
        "id": 255402259,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923412
    },
    {
        "content": "<p>(in particular browser vs. curl behavior being different is surprising)</p>",
        "id": 255402289,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923425
    },
    {
        "content": "<p>I am a little hesitant to just run an invalidation; seems like that could just hide a problem we have, but it's probably the right thing to do</p>",
        "id": 255402379,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923461
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> so, I would run an invalidation right now as that would likely fix the problem</p>",
        "id": 255402465,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923493
    },
    {
        "content": "<p>what I'm worried is, this could be something like what happened last year with cloudfront having broken caches for a subset of users</p>",
        "id": 255402528,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923512
    },
    {
        "content": "<p>I can run the invalidation now if you confirm</p>",
        "id": 255402543,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923518
    },
    {
        "content": "<p>hm</p>",
        "id": 255402705,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923573
    },
    {
        "content": "<p>invalidation seems good</p>",
        "id": 255402730,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923580
    },
    {
        "content": "<p>the alternative is to file a support ticket and wait, I guess</p>",
        "id": 255402746,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923589
    },
    {
        "content": "<p>I tested the commands in <a href=\"https://github.com/rust-lang/rustup/issues/2855#issuecomment-929982924\">https://github.com/rust-lang/rustup/issues/2855#issuecomment-929982924</a>, and they are returning the same sha to me</p>",
        "id": 255402832,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923629
    },
    {
        "content": "<p>which leads me to believe it's a problem with a regional pop</p>",
        "id": 255402860,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923642
    },
    {
        "content": "<p>if it happens again we need people to give us the <code>X-Amz-Cf-Id</code> header responses, as that's what aws support needs (given what they asked the last time)</p>",
        "id": 255403003,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923689
    },
    {
        "content": "<p>ok doing an invalidation</p>",
        "id": 255403011,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923692
    },
    {
        "content": "<p>yeah, sounds good</p>",
        "id": 255403106,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923726
    },
    {
        "content": "<p>running the invalidation</p>",
        "id": 255403454,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1632923859
    },
    {
        "content": "<p>we can also turn off the auto-compression, which might patch over the cause. static.r-l.o doesn't contain much compressible data I'd guess (manifests only?)</p>",
        "id": 255403753,
        "sender_full_name": "simulacrum",
        "timestamp": 1632923966
    },
    {
        "content": "<p>Thanks for jumping on this -- I imagine it has been screwing with a bunch of people on that pop <span aria-label=\"confused\" class=\"emoji emoji-1f615\" role=\"img\" title=\"confused\">:confused:</span></p>",
        "id": 255404857,
        "sender_full_name": "Daniel Silverstone",
        "timestamp": 1632924297
    }
]
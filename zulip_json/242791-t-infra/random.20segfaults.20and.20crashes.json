[
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/90812\">https://github.com/rust-lang/rust/issues/90812</a><br>\nany ideas what could cause this?</p>",
        "id": 261355416,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1636802554
    },
    {
        "content": "<p>one of the crashes has a glibc malloc validation failing, i.e. it's some flavor of heap corruption</p>",
        "id": 261356971,
        "sender_full_name": "The 8472",
        "timestamp": 1636804973
    },
    {
        "content": "<p>but they're happening in stage 0 and stage 1 rustc</p>",
        "id": 261357059,
        "sender_full_name": "The 8472",
        "timestamp": 1636805104
    },
    {
        "content": "<p>If this only started happening recently then it might be a native lib that got updated. or something that landed and got backported to beta too</p>",
        "id": 261357147,
        "sender_full_name": "The 8472",
        "timestamp": 1636805200
    },
    {
        "content": "<p>Last beta commit was 12 days ago, so that shouldn't be it.</p>",
        "id": 261357432,
        "sender_full_name": "The 8472",
        "timestamp": 1636805657
    },
    {
        "content": "<p>It would be great if we had a lightweight Rust library with which we could capture the stacktraces of all threads on segfaults. AFAICS there is currently only crashpad and friends.</p>",
        "id": 261357676,
        "sender_full_name": "Hans Kratz",
        "timestamp": 1636806109
    },
    {
        "content": "<p>it says core dumped. getting the core dumps as CI artifacts would help too</p>",
        "id": 261357783,
        "sender_full_name": "The 8472",
        "timestamp": 1636806257
    },
    {
        "content": "<p>The lone core file is usually not enough. You also need the binary and all dynamic libraries + debug information.</p>",
        "id": 261357895,
        "sender_full_name": "Hans Kratz",
        "timestamp": 1636806478
    },
    {
        "content": "<p>The needed files could be enumerated from the core format and bundled along with it. But yeah, the money option would be to keep the CI runner going after a crash and let someone SSH into it to just gdb the core dump there.</p>",
        "id": 261358022,
        "sender_full_name": "The 8472",
        "timestamp": 1636806646
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"330154\">The 8472</span> <a href=\"#narrow/stream/242791-t-infra/topic/random.20segfaults.20and.20crashes/near/261358022\">said</a>:</p>\n<blockquote>\n<p>The needed files could be enumerated from the core format and bundled along with it. But yeah, the money option would be to keep the CI runner going after a crash and let someone SSH into it to just gdb the core dump there.</p>\n</blockquote>\n<p>runners have credentials in them, we don't really want to let people ssh into them</p>",
        "id": 261358091,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1636806741
    },
    {
        "content": "<p>well, then core dumps would also be a problem since they'd contain the environment variables</p>",
        "id": 261358154,
        "sender_full_name": "The 8472",
        "timestamp": 1636806857
    },
    {
        "content": "<p>cc <a href=\"#narrow/stream/122651-general/topic/rustc.20SIGSEGV.20during.20'Building.20stage1.20std.20artifacts\">https://rust-lang.zulipchat.com/#narrow/stream/122651-general/topic/rustc.20SIGSEGV.20during.20'Building.20stage1.20std.20artifacts</a>'</p>",
        "id": 261408377,
        "sender_full_name": "matthiaskrgr",
        "timestamp": 1636882699
    },
    {
        "content": "<p>We haven't seen this for two days now. Anyone any idea why it started happening and subsequently stopped?</p>",
        "id": 261913296,
        "sender_full_name": "Hans Kratz",
        "timestamp": 1637233707
    }
]
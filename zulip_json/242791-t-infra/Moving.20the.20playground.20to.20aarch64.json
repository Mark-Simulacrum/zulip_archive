[
    {
        "content": "<p>Mostly musing: The crates in the playground all appear to build on <code>aarch64-unknown-linux-gnu</code>. Would it be worth moving to an ARM EC2 instance?</p>",
        "id": 267269375,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641609328
    },
    {
        "content": "<p>There'd be lots of details to hammer out, of course.</p>",
        "id": 267269432,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641609363
    },
    {
        "content": "<p>Considering we've not yet even moved off the current instance (right?), due to stalling out on <a href=\"https://github.com/rust-lang/simpleinfra/pull/78\">https://github.com/rust-lang/simpleinfra/pull/78</a>, it doesn't seem worthwhile to add another step to this</p>",
        "id": 267269930,
        "sender_full_name": "simulacrum",
        "timestamp": 1641609965
    },
    {
        "content": "<p>Sure, but ideally once that is merged, it should be \"easy\" to move to a different instance.</p>",
        "id": 267270368,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641610499
    },
    {
        "content": "<p>True.</p>",
        "id": 267270757,
        "sender_full_name": "simulacrum",
        "timestamp": 1641610858
    },
    {
        "content": "<p>tbh I'm not sure it'll make much of a difference</p>",
        "id": 267288828,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1641637722
    },
    {
        "content": "<p>Not even for money or money per core (eg getting more cores)?</p>",
        "id": 267301674,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641656526
    },
    {
        "content": "<p>I mean definitely</p>",
        "id": 267303021,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1641658469
    },
    {
        "content": "<p>but the playground is such a tiny expense compared to the rest of our aws account</p>",
        "id": 267303025,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1641658480
    },
    {
        "content": "<p>Well, I'd like to have the playground not be resource limited to provide a better experience. I'm operating under the assumption that more cores would help that.</p>",
        "id": 267308357,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641665970
    },
    {
        "content": "<p>well, yes, but more cores are not limited to aarch64</p>",
        "id": 267308840,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1641666616
    },
    {
        "content": "<p>As a user, it might be nice to have a choice of either target, to play with stuff like asm or intrinsics.</p>",
        "id": 267314705,
        "sender_full_name": "cuviper",
        "timestamp": 1641674935
    },
    {
        "content": "<p>Orthogonally to what architecture it runs on, it'd be nice to have \"ASM\" options for both x86-64 and aarch64.</p>",
        "id": 267345419,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1641717193
    },
    {
        "content": "<p>(I realize I can use godbolt for that, but the playground seems much more convenient.)</p>",
        "id": 267345432,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1641717208
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/242791-t-infra/topic/Moving.20the.20playground.20to.20aarch64/near/267314705\">said</a>:</p>\n<blockquote>\n<p>to play with stuff like asm or intrinsics.</p>\n</blockquote>\n<p>What kind of \"play\"? As mentioned, we could probably generate assembly for many platforms with comparative ease. Fully compiling or even executing is more painful.</p>",
        "id": 267365670,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641746074
    },
    {
        "content": "<p>Don't you need to compile in order to generate assembly?</p>",
        "id": 267368312,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1641749624
    },
    {
        "content": "<p>In particular, wouldn't generating asm for both x86-64 and aarch64 require building the playground crates for both?</p>",
        "id": 267368367,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1641749663
    },
    {
        "content": "<p>Or am I missing something about how the asm option works?</p>",
        "id": 267368379,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1641749690
    },
    {
        "content": "<p>mmm crates. yeah, I was just thinking that rustc can cross-compile trivially, but we would have to build the crates AoT as well.</p>",
        "id": 267376485,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641760565
    },
    {
        "content": "<p>crates with bundled C libraries are often... painful to cross compile. the \"same OS different arch\" case makes it more likely to work, though, but IME anything that that uses the <code>cmake</code> crate will have a hard time. (conversely stuff that uses <code>cc</code> tends to cross-compile more painlessly)</p>",
        "id": 267541811,
        "sender_full_name": "Thom Chiovoloni",
        "timestamp": 1641882872
    },
    {
        "content": "<p>you shouldnt need to do this to just generate the asm tho</p>",
        "id": 267541829,
        "sender_full_name": "Thom Chiovoloni",
        "timestamp": 1641882894
    },
    {
        "content": "<p>The playground container already can compile for aarch64-linux-unknown. I know because I forgot to specify the architecture locally :-)</p>",
        "id": 267619784,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641923654
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/FzxyPnMCeCR96AJFU6MqZo6L/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/FzxyPnMCeCR96AJFU6MqZo6L/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/FzxyPnMCeCR96AJFU6MqZo6L/image.png\"></a></div>",
        "id": 267619921,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641923713
    },
    {
        "content": "<p>Of note is that it's not cross compilation. Just compiling on aarch64 (inside Docker)</p>",
        "id": 267620023,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641923757
    }
]
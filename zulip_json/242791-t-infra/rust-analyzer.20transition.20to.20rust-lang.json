[
    {
        "content": "<p>Hello everyone <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span><br>\nThe rust-analyzer team is currently planning the transition to the rust-lang repo, so I wanted to start a quick discussion regarding the CI side of things for rust-analyzer. This mainly involves two parts, the rust-analyzer CI testsuite, and the vscode extension release part, so I am just gonna quickly go over how we roughly do things right now.</p>\n<p>Regarding the VSCode extension, we build the server for a few architectures to be shipped via the vscode marketplace, the current CI script for that is <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/.github/workflows/release.yaml\">here</a>. We currently do this with nightlies, and weekly \"stable\" releases. For the VSCode extension we are not planning to get in sync with rust's release cycle. We might want to use the rustup component as a <a href=\"#narrow/stream/301329-t-devtools/topic/rust-analyzer.20ro.20rust-lang.20org.20transition/near/276493090\">fallback</a> for the architectures we can't ship binaries over the marketplace for.</p>\n<p>Otherwise regarding general CI, we obviously <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/.github/workflows/ci.yaml\">run our tests</a>. We <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/.github/workflows/publish.yml\">publish</a> all of r-a's crates weekly for libraries/applications to consume. We run <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/.github/workflows/metrics.yaml\">metrics</a> after each merged PR to watch out for some forms of regressions. We also apparently <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/.github/workflows/rustdoc.yaml\">publish rustdocs</a>, but I don't think this works properly, at least I don't see where this can be accessed from as using the github page 404's for me.</p>\n<p>I'm mainly bringing this up now to get attention towards it and see if some details have to be discussed or if there are questions to be asked, as I am myself a bit unsure what the work here will entail. The actual work for this will probably come up only after we've transferred the repo(s) over.</p>",
        "id": 276722331,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1648295864
    },
    {
        "content": "<p>hi lukas! I'll take a look late next week, as I'll be busy with $work until mid next week, sorry!</p>",
        "id": 276726446,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1648301680
    },
    {
        "content": "<p>a quick thing though would be to add the <code>rust-lang-owner</code> github account as an owner of the rust-analyzer org and all its crates, so that we could better integrate it with our infrastructure</p>",
        "id": 276726481,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1648301742
    },
    {
        "content": "<p>We sent out an invite to the <code>rust-lang-owner</code> account for the <code>rust-analyzer</code> github team. We'll merge/split our repos appropriately next. I'll keep you updated after we've done that and figured out the next steps that might involve this team.</p>",
        "id": 277142726,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1648646254
    },
    {
        "content": "<p>On another note, we currently also have a somewhat open-question regarding the other repo's of the rust-analyzer org that are used as libraries by the main repo. <code>smol_str</code>, <code>lsp-server</code>, <code>countme</code>, <code>ungrammar</code>, <code>expect-test</code>, <code>rowan</code>, <code>text-size</code>. The last stance of us regading that is to merge most of them into the main repo, see <a href=\"https://github.com/rust-analyzer/rust-analyzer/issues/10307\">https://github.com/rust-analyzer/rust-analyzer/issues/10307</a>.<br>\nWhat are your thoughts on this? Would keeping them separate and moving them over be fine, or would it be preferred in general to merge most of them into the main repo.</p>",
        "id": 277436199,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1648827336
    }
]
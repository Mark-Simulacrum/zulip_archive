[
    {
        "content": "<p>I won't be able to attend again this week — more Rust training <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> </p>\n<p>Rustfmt finally got built last week, so my concern from last week has been addressed.</p>\n<p>My only point this week: is there a way we can get that M1 from Apple / MacStadium? I wasn't sure if there was an ongoing cost associated with it or anything. I think <strong>simulacrum</strong> has knowledge in this area.</p>",
        "id": 235173913,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1618836502
    },
    {
        "content": "<p>o/</p>",
        "id": 235214383,
        "sender_full_name": "simulacrum",
        "timestamp": 1618851648
    },
    {
        "content": "<p>o/</p>",
        "id": 235214408,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618851660
    },
    {
        "content": "<p>ping <span class=\"user-group-mention\" data-user-group-id=\"2943\">@T-infra</span></p>",
        "id": 235214488,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618851702
    },
    {
        "content": "<p>meeting time!</p>",
        "id": 235214497,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618851706
    },
    {
        "content": "<p>o/</p>",
        "id": 235214509,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618851710
    },
    {
        "content": "<p>lots of items on the agenda today</p>",
        "id": 235214804,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618851816
    },
    {
        "content": "<p>first up, <a href=\"https://github.com/rust-lang/infra-team/issues/39\">https://github.com/rust-lang/infra-team/issues/39</a></p>",
        "id": 235214822,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618851823
    },
    {
        "content": "<p>this does overlap with something the core team is looking at atm (repo stability guarantees), so I'm inclined to postpone it for now</p>",
        "id": 235215019,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618851888
    },
    {
        "content": "<p>this feels like more of a policy question, yeah</p>",
        "id": 235215028,
        "sender_full_name": "simulacrum",
        "timestamp": 1618851894
    },
    {
        "content": "<p>I think the toggle to allow it is easy</p>",
        "id": 235215045,
        "sender_full_name": "simulacrum",
        "timestamp": 1618851899
    },
    {
        "content": "<p>I do think we should write back</p>",
        "id": 235215080,
        "sender_full_name": "simulacrum",
        "timestamp": 1618851910
    },
    {
        "content": "<p>hmm, so, when I last looked at github perms the only switch present is \"allow all members\" or \"only owners can create repos\"</p>",
        "id": 235215082,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618851911
    },
    {
        "content": "<p>and we definitely do not want <em>all</em> members to create repos under rust-lang</p>",
        "id": 235215150,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618851929
    },
    {
        "content": "<p>I'd like to suggest that one of the three(!) core team members on infra suggest that for now someone, e.g., me, is happy to work with people on a one-off basis as needed, expecting it to be pretty low overhead. this has been historical practice regardless.</p>",
        "id": 235215223,
        "sender_full_name": "simulacrum",
        "timestamp": 1618851957
    },
    {
        "content": "<p>yeah I definitely think it's not worth automating this right now</p>",
        "id": 235215355,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852005
    },
    {
        "content": "<p>an idea I had around this to avoid the answer to creating repos being \"DM pietro or mark\" was to create an internal repository when team members can open issues to request new repos or perms change</p>",
        "id": 235215394,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852030
    },
    {
        "content": "<p>that way those changes are tracked too</p>",
        "id": 235215403,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852036
    },
    {
        "content": "<p>but we can defer that if y'all think so</p>",
        "id": 235215429,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852049
    },
    {
        "content": "<p>the infra-team repo seems as good as any :) but I'm not necessarily thinking we need much process here</p>",
        "id": 235215442,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852056
    },
    {
        "content": "<p>I like that - we can review it in triage and assign out. a week lag isn't bad</p>",
        "id": 235215554,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852091
    },
    {
        "content": "<p>I don't think even waiting for the team to discuss the repo is needed</p>",
        "id": 235215648,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852132
    },
    {
        "content": "<p>like, if there is a need for a repo I don't see a problem with someone in infra just creating it</p>",
        "id": 235215709,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852159
    },
    {
        "content": "<p>ok, I'm happy to write a reply on the issue - unless folks here want to coordinate that reply; I feel like there's a reasonable response for now to give</p>",
        "id": 235215748,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852184
    },
    {
        "content": "<p>but still moving those convos around repos and permissions out of DMs into a repo would probably be good</p>",
        "id": 235215754,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852187
    },
    {
        "content": "<p>everything sounds great</p>",
        "id": 235215782,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852196
    },
    {
        "content": "<p>let's move on</p>",
        "id": 235215839,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852209
    },
    {
        "content": "<p>retention for prometheus metrics</p>",
        "id": 235215869,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852226
    },
    {
        "content": "<p>I think this was actually last week? Not sure if Pietro had more to say</p>",
        "id": 235215900,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852243
    },
    {
        "content": "<p>so, the retention was increased ot 30 days</p>",
        "id": 235215908,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852245
    },
    {
        "content": "<p>I'm not sure whether we want to track investigating storing more than that</p>",
        "id": 235215965,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852278
    },
    {
        "content": "<p>I'm leaning towards it not being a huge priority right now personally, but I'm curious of others' opinions</p>",
        "id": 235215996,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852300
    },
    {
        "content": "<p>I vote leave it until it gets brought up</p>",
        "id": 235216134,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852350
    },
    {
        "content": "<p>I think we should leave it at 30 for now; it's already significantly more useful (at least for me) for prioritizing certain work to get a longer time sense of how bad things are, and more than that requires some planning (whereas this felt like it was an easy win)</p>",
        "id": 235216146,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852354
    },
    {
        "content": "<p>great then!</p>",
        "id": 235216213,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852386
    },
    {
        "content": "<p>wow we're steaming through</p>",
        "id": 235216240,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852396
    },
    {
        "content": "<p>next up, <a href=\"http://crates.io\">crates.io</a> access to prometheus</p>",
        "id": 235216268,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852404
    },
    {
        "content": "<p>I think the thing on my end was to test and do an upgrade of our prometheus version</p>",
        "id": 235216355,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852441
    },
    {
        "content": "<p>yep</p>",
        "id": 235216389,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852444
    },
    {
        "content": "<p>did not have a chance to do that yet</p>",
        "id": 235216411,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852450
    },
    {
        "content": "<p>and aside from that, there was some additional work to do around checking auth (i.e. whether we need an nginx forwarder)</p>",
        "id": 235216446,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852470
    },
    {
        "content": "<p>to refresh my memory, this related to <a href=\"https://paper.dropbox.com/doc/crates.io-monitoring--BJKdRsoX6dehQacm~yv46gcJAg-JWf5AxfJ1Nbc3lLuNcaTy\">https://paper.dropbox.com/doc/crates.io-monitoring--BJKdRsoX6dehQacm~yv46gcJAg-JWf5AxfJ1Nbc3lLuNcaTy</a> for the final option? or the second to last?</p>",
        "id": 235216512,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852511
    },
    {
        "content": "<p>but I am personally leaning towards approving the remote-write proposal on my end, it feels like a pretty good fit for what we need and is largely what heroku suggests</p>",
        "id": 235216522,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852514
    },
    {
        "content": "<p>well, nginx will be needed anyway to setup the virtual host and https, it's more on whether we want nginx or prometheus to handle auth</p>",
        "id": 235216524,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852514
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"117568\">Aidan Hobson Sayers</span> <a href=\"#narrow/stream/242791-t-infra/topic/meeting.202021-04-19/near/235216512\">said</a>:</p>\n<blockquote>\n<p>to refresh my memory, this related to <a href=\"https://paper.dropbox.com/doc/crates.io-monitoring--BJKdRsoX6dehQacm~yv46gcJAg-JWf5AxfJ1Nbc3lLuNcaTy\">https://paper.dropbox.com/doc/crates.io-monitoring--BJKdRsoX6dehQacm~yv46gcJAg-JWf5AxfJ1Nbc3lLuNcaTy</a> for the final option? or the second to last?</p>\n</blockquote>\n<p>final option</p>",
        "id": 235216550,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852527
    },
    {
        "content": "<p>not sure I understand virtual host or https - is there more perhaps that I'm missing then?</p>",
        "id": 235216576,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852543
    },
    {
        "content": "<p>it might be worth fleshing out the last option as I'm pretty sure it's the one we should go with, as we've also learned some more over the past few weeks</p>",
        "id": 235216621,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852562
    },
    {
        "content": "<p>(in particular e.g. that heroku itself already 'does this' just with their own push system)</p>",
        "id": 235216692,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852579
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/242791-t-infra/topic/meeting.202021-04-19/near/235216576\">said</a>:</p>\n<blockquote>\n<p>not sure I understand virtual host or https - is there more perhaps that I'm missing then?</p>\n</blockquote>\n<p>well, that ec2 instance needs to serve both <a href=\"http://grafana.rust-lang.org\">grafana.rust-lang.org</a> and <a href=\"http://prometheus.infra.rust-lang.org\">prometheus.infra.rust-lang.org</a>, so we need nginx with the two <code>server {}</code> blocks to properly route the traffic coming to port 80</p>",
        "id": 235216765,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852617
    },
    {
        "content": "<p>ah I see</p>",
        "id": 235216961,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852696
    },
    {
        "content": "<p>ok! well, seems good to detail the plan a tad more - does that seem reasonable?</p>",
        "id": 235217017,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852728
    },
    {
        "content": "<p>hm <span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> <span class=\"user-mention\" data-user-id=\"117568\">@Aidan Hobson Sayers</span> ^</p>",
        "id": 235217321,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852851
    },
    {
        "content": "<p>maybe zulip is failing me</p>",
        "id": 235217346,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852856
    },
    {
        "content": "<p>nono just got a phone call</p>",
        "id": 235217365,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852864
    },
    {
        "content": "<p>oh ok</p>",
        "id": 235217372,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852867
    },
    {
        "content": "<p>I'd love to hear what aidan thinks before putting more effort into it</p>",
        "id": 235217391,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852878
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/242791-t-infra/topic/meeting.202021-04-19/near/235216621\">said</a>:</p>\n<blockquote>\n<p>it might be worth fleshing out the last option as I'm pretty sure it's the one we should go with, as we've also learned some more over the past few weeks</p>\n</blockquote>\n<p>given this, I'm convinced</p>",
        "id": 235217439,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852910
    },
    {
        "content": "<p>(the part where heroku does this)</p>",
        "id": 235217461,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852922
    },
    {
        "content": "<p>ok!</p>",
        "id": 235217547,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852955
    },
    {
        "content": "<p>it still makes me a bit sad, but at least we're not treading new ground :D</p>",
        "id": 235217548,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618852956
    },
    {
        "content": "<p>well, heroku doesn't do this with <em>prometheus</em></p>",
        "id": 235217576,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852968
    },
    {
        "content": "<p>they do, or at least, for some platforms - they noted as such in a blog post</p>",
        "id": 235217596,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852980
    },
    {
        "content": "<p>they're doing it with their own monitoring client and proprietary backend</p>",
        "id": 235217598,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852980
    },
    {
        "content": "<p>oh</p>",
        "id": 235217608,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852985
    },
    {
        "content": "<p>they just don't use the remote write api</p>",
        "id": 235217610,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852985
    },
    {
        "content": "<p>well then I missed that message <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 235217635,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852995
    },
    {
        "content": "<p>but really it's all the same</p>",
        "id": 235217637,
        "sender_full_name": "simulacrum",
        "timestamp": 1618852995
    },
    {
        "content": "<p>ok!</p>",
        "id": 235217639,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618852996
    },
    {
        "content": "<p>so, this mess is all for instance-level metrics on <a href=\"http://crates.io\">crates.io</a></p>",
        "id": 235217662,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853014
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116155\">Jake Goulding</span> <a href=\"#narrow/stream/242791-t-infra/topic/meeting.202021-04-19/near/235173913\">said</a>:</p>\n<blockquote>\n<p>I won't be able to attend again this week — more Rust training <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> </p>\n<p>Rustfmt finally got built last week, so my concern from last week has been addressed.</p>\n<p>My only point this week: is there a way we can get that M1 from Apple / MacStadium? I wasn't sure if there was an ongoing cost associated with it or anything. I think <strong>simulacrum</strong> has knowledge in this area.</p>\n</blockquote>\n<p>just want to deal with this item next</p>",
        "id": 235217669,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853018
    },
    {
        "content": "<p>(oh sorry - are we done with <a href=\"http://crates.io\">crates.io</a> monitoring?)</p>",
        "id": 235217720,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853044
    },
    {
        "content": "<p>I have a small point :)</p>",
        "id": 235217754,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853051
    },
    {
        "content": "<p>for service-level metrics we can handle <a href=\"http://crates.io\">crates.io</a> the same way we handle any other service</p>",
        "id": 235217783,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853065
    },
    {
        "content": "<p>I have a PR up for <a href=\"http://crates.io\">crates.io</a> to implement the scaffolding for metrics, once that's merged anything against giving the <a href=\"http://crates.io\">crates.io</a> team access to grafana?</p>",
        "id": 235217828,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853094
    },
    {
        "content": "<p>(there is not a way to properly prevent the <a href=\"http://crates.io\">crates.io</a> team from accessing other metrics, and we're doing the same thing with the <a href=\"http://docs.rs\">docs.rs</a> team)</p>",
        "id": 235217881,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853125
    },
    {
        "content": "<p>hm, I don't think there's anything sensitive on it (or should be)</p>",
        "id": 235217895,
        "sender_full_name": "simulacrum",
        "timestamp": 1618853127
    },
    {
        "content": "<p>so seems OK</p>",
        "id": 235217902,
        "sender_full_name": "simulacrum",
        "timestamp": 1618853134
    },
    {
        "content": "<p>seems alright</p>",
        "id": 235217906,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853134
    },
    {
        "content": "<p><span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span>.</p>",
        "id": 235217916,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853140
    },
    {
        "content": "<p>that's all from me</p>",
        "id": 235217919,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853144
    },
    {
        "content": "<p>ok - the M1 macs thing</p>",
        "id": 235217990,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853177
    },
    {
        "content": "<p>I need to set up time with the foundation (including mark+pietro) on this point, if it's referring to what I think it is. so, 'in progress'</p>",
        "id": 235218033,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853207
    },
    {
        "content": "<p>it's kinda similar but different</p>",
        "id": 235218058,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853228
    },
    {
        "content": "<p>I can fill more details in in the private stream after the meeting</p>",
        "id": 235218079,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853238
    },
    {
        "content": "<p>the two remaining topics look big, and I need to run on the dot. maybe we can quickly talk about github access token migration?</p>",
        "id": 235218192,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853284
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> looks like this one is yours?</p>",
        "id": 235218265,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853328
    },
    {
        "content": "<p>they're not urgent</p>",
        "id": 235218277,
        "sender_full_name": "simulacrum",
        "timestamp": 1618853336
    },
    {
        "content": "<p>we can skip till next week</p>",
        "id": 235218282,
        "sender_full_name": "simulacrum",
        "timestamp": 1618853340
    },
    {
        "content": "<p>great - I'll punt them out then</p>",
        "id": 235218307,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853351
    },
    {
        "content": "<p>that's all for this week then!</p>",
        "id": 235218324,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853360
    },
    {
        "content": "<p>thanks all</p>",
        "id": 235218331,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853362
    },
    {
        "content": "<p>\\o</p>",
        "id": 235218333,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1618853363
    },
    {
        "content": "<p>\\o</p>",
        "id": 235218334,
        "sender_full_name": "Aidan Hobson Sayers",
        "timestamp": 1618853363
    },
    {
        "content": "<p>\\o</p>",
        "id": 235218376,
        "sender_full_name": "simulacrum",
        "timestamp": 1618853392
    }
]
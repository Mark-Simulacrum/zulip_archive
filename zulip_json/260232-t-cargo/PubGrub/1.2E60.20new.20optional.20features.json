[
    {
        "content": "<p>I just saw this new syntax on the release notes of rust 1.60 which enables a question mark <code>?</code> for optional dependencies in features:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[dependencies]</span><span class=\"w\"></span>\n<span class=\"n\">serde</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"1.0.133\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">optional</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"n\">rgb</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">version</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"s\">\"0.8.25\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">optional</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">true</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"k\">[features]</span><span class=\"w\"></span>\n<span class=\"n\">serde</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"p\">[</span><span class=\"s\">\"dep:serde\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"s\">\"rgb?/serde\"</span><span class=\"p\">]</span><span class=\"w\"></span>\n</code></pre></div>\n<p>In the above example, the <code>rgb/serde</code> feature should only be activated if both the <code>serde</code> feature and the <code>rgb</code> dependencies are required.</p>\n<p>This brings some complication in the <a href=\"https://pubgrub-rs-guide.netlify.app/limitations/optional_deps.html\">optional dependency pubgrub doc example</a> which doesn't correspond anymore to the equivalent in cargo.</p>",
        "id": 278399114,
        "sender_full_name": "Matthieu Pizenberg",
        "timestamp": 1649496223
    },
    {
        "content": "<p>At a technical level in Cargo this all gets handled outside the resolver. <code>dep:</code> is handled as part of parsing the file, <code>?/</code> is handled as a clean up pass after resolution is run.<br>\nBut the PubGrub docs do need an update, thanks for pointing that out!</p>",
        "id": 278406905,
        "sender_full_name": "Eh2406",
        "timestamp": 1649506101
    }
]
[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span>  here is the topic</p>",
        "id": 269617235,
        "sender_full_name": "apiraino",
        "timestamp": 1643308365
    },
    {
        "content": "<p>This is a topic to keep in touch about the implementation of this document:<br>\n<a href=\"https://lang-team.rust-lang.org/decision_process.html\">https://lang-team.rust-lang.org/decision_process.html</a></p>\n<p>specifically the triagebot part for handling the decision making on RFC<br>\n<a href=\"https://lang-team.rust-lang.org/decision_process/examples.html\">https://lang-team.rust-lang.org/decision_process/examples.html</a></p>\n<p>and these rustbot commands<br>\n<a href=\"https://lang-team.rust-lang.org/decision_process/reference.html#rustbot-commands\">https://lang-team.rust-lang.org/decision_process/reference.html#rustbot-commands</a></p>",
        "id": 269617509,
        "sender_full_name": "apiraino",
        "timestamp": 1643308469
    },
    {
        "content": "<p>As someone looking at this \"from the outside\", I'm a bit confused. Aren't these features the same as the ones supported by rfcbot?</p>",
        "id": 269807063,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643406343
    },
    {
        "content": "<p>The details are a little different; it could be feasible to modify rfcbot, but generally I tend to prefer consolidating into rustbot to reduce the number of bots over time.</p>",
        "id": 269807908,
        "sender_full_name": "simulacrum",
        "timestamp": 1643406785
    },
    {
        "content": "<p>FWIW, one of the things I like about rfcbot is that it has a webpage that shows all the active FCPs and all the ones waiting on me</p>",
        "id": 269808560,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643407158
    },
    {
        "content": "<p>yeah, we'd want to preserve something like that for sure. one of the reasons for moving it into rustbot is to more easily integrate with things like agenda generation and such</p>",
        "id": 269816344,
        "sender_full_name": "simulacrum",
        "timestamp": 1643411479
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"300743\">@Sean Chen (he/him)</span> who is also interested in helping with this</p>",
        "id": 270052045,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643643918
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> how is it going? is there a way to split some tasks with Sean too? do you need help or something?</p>",
        "id": 270052129,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643643947
    },
    {
        "content": "<p>Is there a PR or issue I could take a look at to get a bit more context into this? <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 270052806,
        "sender_full_name": "Sean Chen (he/him)",
        "timestamp": 1643644156
    },
    {
        "content": "<p>Hi <span class=\"user-mention\" data-user-id=\"300743\">@Sean Chen (he/him)</span> I'll be looking into this today in the afternoon/night. Will you be around? There are still no concrete issues although I'll try to have a plan as today's goal.</p>",
        "id": 270063244,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643647560
    },
    {
        "content": "<p>What time zone are you in <span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span>?</p>",
        "id": 270071485,
        "sender_full_name": "Sean Chen (he/him)",
        "timestamp": 1643650522
    },
    {
        "content": "<p>I'm in UTC-6 and will be working from 18:00 to 21:00</p>",
        "id": 270072659,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643650923
    },
    {
        "content": "<p>Ok, I think we'll have to coordinate asynchronously in that case. If you could write up some thoughts / what you're planning as far as how to tackle this, that would be helpful <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 270077213,
        "sender_full_name": "Sean Chen (he/him)",
        "timestamp": 1643652496
    },
    {
        "content": "<p>yep, that's the idea. I'll be writing here what I find</p>",
        "id": 270083361,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643654849
    },
    {
        "content": "<p>Ok, so I read a lot and came with this document full of questions and my idea of how the implementation can be <a href=\"https://hackmd.io/FygRGdIDQn2FlRYrib7H2w\">https://hackmd.io/FygRGdIDQn2FlRYrib7H2w</a> <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span>  can you give it a look? <span class=\"user-mention\" data-user-id=\"250987\">@apiraino</span> ?</p>",
        "id": 270240281,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643732938
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> great that you did this document</p>",
        "id": 270260121,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643739725
    },
    {
        "content": "<p>most of the questions I guess should be answered by <span class=\"user-group-mention silent\" data-user-group-id=\"1977\">T-lang</span></p>",
        "id": 270260177,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643739750
    },
    {
        "content": "<p>and/or <span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span></p>",
        "id": 270260242,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643739773
    },
    {
        "content": "<p>maybe opening a topic on <a class=\"stream\" data-stream-id=\"213817\" href=\"/#narrow/stream/213817-t-lang\">#t-lang</a>, sharing this for discussions is the way to go</p>",
        "id": 270260323,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643739806
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> (sorry for subscribing you here) <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span></p>",
        "id": 270260447,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1643739844
    },
    {
        "content": "<p>Ok, I'll do that referencing the same document</p>",
        "id": 270266331,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643742093
    },
    {
        "content": "<p>I left some quick inline comments</p>",
        "id": 270266495,
        "sender_full_name": "simulacrum",
        "timestamp": 1643742151
    },
    {
        "content": "<p>but will need a bigger block of time to answer some of the deeper questions :)</p>",
        "id": 270266539,
        "sender_full_name": "simulacrum",
        "timestamp": 1643742172
    },
    {
        "content": "<p>Ok, I'll wait a little bit more. Also to not have duplicate channels for this. But ye tell me if we should actually move it to <a class=\"stream\" data-stream-id=\"196563\" href=\"/#narrow/stream/196563-t-lang.2Fmeta\">#t-lang/meta</a></p>",
        "id": 270269039,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643743094
    },
    {
        "content": "<p>I'll leave that up to <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> I think</p>",
        "id": 270270242,
        "sender_full_name": "simulacrum",
        "timestamp": 1643743540
    },
    {
        "content": "<p>I would propose that implementation of triagebot be here, but details of \"how does the process work\" should be #t-lang/meta.</p>",
        "id": 270270581,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1643743672
    },
    {
        "content": "<p>Super helpful write-up <span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span>; thanks for putting it together <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span><br>\nI wonder if the diagram would be helpful to have in the decision process reference.</p>",
        "id": 270271023,
        "sender_full_name": "Sean Chen (he/him)",
        "timestamp": 1643743839
    },
    {
        "content": "<p>it might be helpful to put it somewhere once we get to a good enough definition. I don't think the one I put there will be the final version</p>",
        "id": 270304740,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1643757211
    },
    {
        "content": "<p>Hi. After the responses to my questions I have a better understanding of the implementation that is needed. I'll be writing the details shortly</p>",
        "id": 272752495,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1645495316
    },
    {
        "content": "<p>Thanks y'all for the patience. Now the details</p>\n<p>Given what was discussed in #t-lang/meta the idea is (just like the docs say, and now I understand) to keep track of the decision state composed by (maybe) the following fields of a struct:</p>\n<ul>\n<li>period start (datetime)</li>\n<li>original start (datetime)</li>\n<li>everyone's status (some sort of mapping user -&gt; Option&lt;status&gt; ) for this decision</li>\n<li>everyone's history (perhaps a vec of previous status, just for rendering the state of things)</li>\n<li>current reversibility state (some enum)</li>\n<li>proposed resolution (some enum with few known variants and a field for arbitrary resolutions)</li>\n</ul>\n<p>this state would derive Serialize/Deserialize and be stored as json in the original comment that the bot posts (not visibble to humans) and from it a nice UI could be rendered (initially an html/markdown table, perhaps eventually an image/svg with even better UI).</p>\n<p>Every time the bot is called by someone (someone allowed to execute commands) this state is read and deserialized, the action applied to it, serialized again and stored in the same comment, and the UI modified to reflect the state.</p>\n<p>To implement this I would like to have some \"pure\" implementation somewhere that I can add tests to. The initial test suite would be the examples provided in the docs.</p>\n<p>So here are some questions I have for the next part:</p>\n<ul>\n<li>Where can that code (the pure implementation) live? (I guess I could just add it under src/ but maybe there's a better place)</li>\n<li>Is there currently a way of running a timer or something? this is necessary to ping people that haven't responded when they place a hold.</li>\n</ul>\n<p><span class=\"user-mention\" data-user-id=\"300743\">@Sean Chen (he/him)</span> would you like to help me figure out a few things that we need for this? For instance, how to run the timer, how to check all the decisions that are on hold, how to get a reference to the initial bot comment in a thread, etc.</p>",
        "id": 273578058,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1646096774
    },
    {
        "content": "<p>Hey <span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span>, sorry for the late response. Is there anything I can still help you with on this endeavor? <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 274139239,
        "sender_full_name": "Sean Chen (he/him)",
        "timestamp": 1646405546
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> I think we would want it to stay a markdown table. And it needs to have links to the various comments setting statuses.</p>",
        "id": 274171704,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646419330
    },
    {
        "content": "<p>Pinging people who have placed a hold can be deferred; it's not as essential as the main functionality.</p>",
        "id": 274171823,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646419388
    },
    {
        "content": "<p>Ok, so this is what I have so far: <a href=\"https://gitlab.com/categulario/decisionprocess\">https://gitlab.com/categulario/decisionprocess</a></p>\n<p>still a WIP but it shows what I have in mind. If that module works then in can be plugged into the triagebot either as a dependency or just move the code somewhere in  the repo. At first I started writing the code inside triagebot but then just took it away to gain a few seconds on every cargo check :/</p>\n<p><a href=\"https://gitlab.com/categulario/decisionprocess/-/blob/main/res/start_of_a_process__3.md\">as part of</a> <a href=\"https://gitlab.com/categulario/decisionprocess/-/blob/main/src/lib.rs#L216\">the tests</a> I'm aiming to match the expected output from the examples.</p>",
        "id": 275657950,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1647526195
    },
    {
        "content": "<p>Do ye think this is the right approach? <span class=\"user-mention\" data-user-id=\"250987\">@apiraino</span> <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> <span class=\"user-mention\" data-user-id=\"300743\">@Sean Chen (he/him)</span> ?</p>",
        "id": 275658429,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1647526376
    },
    {
        "content": "<p>Seems reasonable to me. I do think you want to replace all the HashMap usage with either BTreeMap or some other ordered map.</p>",
        "id": 275692225,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1647536202
    },
    {
        "content": "<p>Then you can just walk through it sequentially.</p>",
        "id": 275692285,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1647536228
    },
    {
        "content": "<p>Also, I don't think I see where the table body is being formatted?</p>",
        "id": 275692694,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1647536374
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> Thank you so much for working on this!</p>",
        "id": 275693150,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1647536473
    },
    {
        "content": "<p>I'm really looking forward to using it.</p>",
        "id": 275693169,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1647536481
    },
    {
        "content": "<p>Thanks for your response <span class=\"user-mention\" data-user-id=\"239881\">@Josh Triplett</span> ! You're right, I'd probably benefit from using some ordered map, thank you.</p>",
        "id": 275701197,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1647539555
    },
    {
        "content": "<p>And yes, I haven't pushed the changes with the table formatting, but they're next</p>",
        "id": 275701230,
        "sender_full_name": "Abraham Toriz",
        "timestamp": 1647539576
    },
    {
        "content": "<p>super exciting :)</p>",
        "id": 275728231,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1647551749
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> I'm late to the party. First of all, thank you for working on this. Your proposal seems fine to me, I like how the states representation looks like in the Markdown files you suggest as example <span aria-label=\"thumbs up\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"thumbs up\">:thumbs_up:</span><br>\nA few quick thoughts off the top of my head:</p>",
        "id": 275966183,
        "sender_full_name": "apiraino",
        "timestamp": 1647781677
    },
    {
        "content": "<p>By looking at the <a href=\"https://lang-team.rust-lang.org/decision_process/reference.html#rustbot-commands\">the T-lang document</a>, I understand the commans needed to implement this workflow. I think the code responsible to handle this workflow can be moved in the triagebot repo as a \"sub-service\" under <code>./src/handlers</code> as you also suggest (I think the general idea of the triagebot is to keep the various services separated). But I'd probably ask <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> here for a more sensible piece of advice.</p>",
        "id": 275966223,
        "sender_full_name": "apiraino",
        "timestamp": 1647781689
    },
    {
        "content": "<blockquote>\n<p>Is there currently a way of running a timer or something? this is necessary to ping people that haven't responded when they place a hold.</p>\n</blockquote>\n<p>This would be something cool to have (also for <span class=\"user-group-mention silent\" data-user-group-id=\"2403\">WG-prioritization</span> and I guess <span class=\"user-group-mention silent\" data-user-group-id=\"3132\">WG-triage</span> ). I may be at fault here but my understanding is that there's currently no way in github we can have this for free, I think all the \"pinging\" is run basically manually in different ways.</p>",
        "id": 275966238,
        "sender_full_name": "apiraino",
        "timestamp": 1647781736
    },
    {
        "content": "<p>Yes, src/handlers seems right to me as well.</p>",
        "id": 275969914,
        "sender_full_name": "simulacrum",
        "timestamp": 1647786597
    },
    {
        "content": "<p>I think <span class=\"user-mention\" data-user-id=\"468892\">@Chaz Kiker</span> was maybe looking into writing support for events in X hours/days but we don't really have anything like that yet. It'll likely be easiest to handroll a solution with the (already existing) database, which I think shouldn't be too hard.</p>",
        "id": 275969988,
        "sender_full_name": "simulacrum",
        "timestamp": 1647786697
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"472626\">@Abraham Toriz</span> great, I've also just seen this, thanks for doing the work <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 276106951,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1647893414
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/224082-triagebot/topic/Implementing.20new.20decision-making.20triagebot.20process/near/275969988\">said</a>:</p>\n<blockquote>\n<p>I think <span class=\"user-mention silent\" data-user-id=\"468892\">Chaz Kiker</span> was maybe looking into writing support for events in X hours/days but we don't really have anything like that yet. It'll likely be easiest to handroll a solution with the (already existing) database, which I think shouldn't be too hard.</p>\n</blockquote>\n<p>just noticed this PR <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span> <br>\n<a href=\"https://github.com/rust-lang/triagebot/issues/1595\">https://github.com/rust-lang/triagebot/issues/1595</a></p>",
        "id": 276153098,
        "sender_full_name": "apiraino",
        "timestamp": 1647935874
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"250987\">@apiraino</span> just read through all of this thread &amp; those documents — looks really great. </p>\n<p>Once I finish up with the current feature I'm working on for triagebot, I'll touch base with <span class=\"user-mention\" data-user-id=\"116122\">@simulacrum</span> and flesh out that <a href=\"https://github.com/rust-lang/triagebot/issues/1595\">cronjob issue</a> a bit more — that'll prolly be the next thing I pick up (if that aligns with everybody's hopes for progress on this front) :)</p>",
        "id": 276285467,
        "sender_full_name": "Chaz Kiker",
        "timestamp": 1648007349
    },
    {
        "content": "<p>also thanks for such detailed &amp; well thought out documents</p>",
        "id": 276285624,
        "sender_full_name": "Chaz Kiker",
        "timestamp": 1648007589
    }
]
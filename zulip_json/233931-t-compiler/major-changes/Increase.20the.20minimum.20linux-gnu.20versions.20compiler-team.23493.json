[
    {
        "content": "<p>A new proposal has been announced: <a href=\"https://github.com/rust-lang/compiler-team/issues/493\">Increase the minimum linux-gnu versions #493</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>",
        "id": 274209882,
        "sender_full_name": "triagebot",
        "timestamp": 1646442665
    },
    {
        "content": "<p>cc <span class=\"user-group-mention\" data-user-group-id=\"4493\">@T-libs</span> <span class=\"user-group-mention\" data-user-group-id=\"2907\">@T-release</span></p>",
        "id": 274209901,
        "sender_full_name": "cuviper",
        "timestamp": 1646442690
    },
    {
        "content": "<p><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 274216281,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646450642
    },
    {
        "content": "<p>I think we should consider not mandating that Android have the same minimum. That seems like an independent decision.</p>",
        "id": 274216335,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646450698
    },
    {
        "content": "<p>But in any case, this is great.</p>",
        "id": 274216341,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646450713
    },
    {
        "content": "<p>Are you ok with keeping the other libc targets in sync on the kernel version? What's the benefit in letting Android be different?</p>",
        "id": 274221542,
        "sender_full_name": "cuviper",
        "timestamp": 1646457985
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"138448\">@cuviper</span> I'd expect that we should set our Android support on the basis of Android OS version, and that seems likely to result in a newer kernel requirement than for other platforms.</p>",
        "id": 274222907,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646459992
    },
    {
        "content": "<p>For glibc and musl targets, I think it makes sense to choose based on what the longest-term support enterprise distro needs.</p>",
        "id": 274222988,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460019
    },
    {
        "content": "<p>For Android, I think it makes sense to look at Android OS adoption rates, and have a percentage-of-users cutoff that we re-evaluate periodically.</p>",
        "id": 274223045,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460047
    },
    {
        "content": "<p>I expect we are in fact due for a raise on Android, but I'll leave that to someone else. I wouldn't like that to effect an older kernel base, but if it's newer, then great.</p>",
        "id": 274223147,
        "sender_full_name": "cuviper",
        "timestamp": 1646460196
    },
    {
        "content": "<p>To be clear, I'm <em>not</em> suggesting that right now we update our Android requirements to be newer. Rather, I'm suggesting that we not commit to our Android requirements being the same as everything else.</p>",
        "id": 274223148,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460199
    },
    {
        "content": "<p>The only thing I'm asking for in <em>this</em> MCP is to not make any future commitments to our Android version being in sync or supporting kernels of the same age.</p>",
        "id": 274223195,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460246
    },
    {
        "content": "<p>Right now the language is \"For consistency in std libs implementation, all <code>*-linux-*</code> targets should ideally follow the same minimum kernel version\"</p>",
        "id": 274223221,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460294
    },
    {
        "content": "<p>AFAIK the Android API level did not specify kernel min until relatively recently. Before that, device manufacturers did tend to lag AOSP.</p>",
        "id": 274223222,
        "sender_full_name": "cuviper",
        "timestamp": 1646460294
    },
    {
        "content": "<p>So it might still be nice for us to put a 3.2 floor on that.</p>",
        "id": 274223243,
        "sender_full_name": "cuviper",
        "timestamp": 1646460347
    },
    {
        "content": "<p>Floor yes, just not ceiling. ;)</p>",
        "id": 274223287,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460366
    },
    {
        "content": "<p>Sure</p>",
        "id": 274223290,
        "sender_full_name": "cuviper",
        "timestamp": 1646460381
    },
    {
        "content": "<p>How about:<br>\nFor consistency in Linux std library implementations, all general-purpose Linux userspace targets (<code>-linux-gnu</code>, <code>-linux-musl</code>, <code>-linux-uclibc</code>) should have the same minimum kernel version, and <code>-linux-android</code> should not require any older kernel than that (though it may choose to require newer).</p>",
        "id": 274223358,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460483
    },
    {
        "content": "<p>(Concrete use case I'm imagining: Android-specific portions of the standard library <em>might</em> sometimes have the option of using a new syscall and not having to have a fallback implementation.)</p>",
        "id": 274223393,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646460566
    },
    {
        "content": "<p>I guess I took it implicitly that each target should be the same <em>or higher</em>. For instance, riscv probably needs something newer just to exist.</p>",
        "id": 274223743,
        "sender_full_name": "cuviper",
        "timestamp": 1646461000
    },
    {
        "content": "<p>Where currently unspecified, we'll take it at the min 3.2</p>",
        "id": 274223761,
        "sender_full_name": "cuviper",
        "timestamp": 1646461049
    },
    {
        "content": "<p>Oh, fair; yes, other CPUs may raise the bar too.</p>",
        "id": 274223828,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646461164
    },
    {
        "content": "<p>(meta: should MCPs be edited with updates like this?)</p>",
        "id": 274223843,
        "sender_full_name": "cuviper",
        "timestamp": 1646461190
    },
    {
        "content": "<p>As long as they haven't been seconded that seems fine.</p>",
        "id": 274223879,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646461203
    },
    {
        "content": "<p>Well, I'm not at a computer right now anyway <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 274223920,
        "sender_full_name": "cuviper",
        "timestamp": 1646461263
    },
    {
        "content": "<p>I'm not particular on the exact phrasing. I'd be happy with anything that explicitly establishes the property you're describing, where we set a minimum bar and then specific CPU or library variants may raise it further.</p>",
        "id": 274223928,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646461270
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"492\">@T-compiler</span>: Proposal <a href=\"https://github.com/rust-lang/compiler-team/issues/493#issuecomment-1062947709\">#493</a> has been seconded, and will be approved in 10 days if no objections are raised.</p>",
        "id": 274690782,
        "sender_full_name": "triagebot",
        "timestamp": 1646834287
    },
    {
        "content": "<p>Does this need checkbox sign-offs, or can we just let it FCP in time alone?</p>",
        "id": 274860334,
        "sender_full_name": "cuviper",
        "timestamp": 1646930039
    },
    {
        "content": "<p>I think we should FCP the PR which makes these changes and that FCP can be compiler + release teams.</p>",
        "id": 274861690,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1646930592
    },
    {
        "content": "<p>I've opened <a href=\"https://github.com/rust-lang/rust/issues/95026\">#95026</a>, so we can do FCP sign-offs there</p>",
        "id": 275587403,
        "sender_full_name": "cuviper",
        "timestamp": 1647471189
    },
    {
        "content": "<p>This proposal has been accepted: <a href=\"https://github.com/rust-lang/compiler-team/issues/493\">#493</a>.</p>",
        "id": 276389095,
        "sender_full_name": "triagebot",
        "timestamp": 1648064464
    }
]
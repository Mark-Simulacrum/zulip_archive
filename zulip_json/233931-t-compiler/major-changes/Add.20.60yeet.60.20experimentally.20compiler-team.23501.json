[
    {
        "content": "<p>A new proposal has been announced: <a href=\"https://github.com/rust-lang/compiler-team/issues/501\">Add <code>yeet</code> experimentally #501</a>. It will be announced at the next meeting to try and draw attention to it, but usually MCPs are not discussed during triage meetings. If you think this would benefit from discussion amongst the team, consider proposing a design meeting.</p>",
        "id": 276746612,
        "sender_full_name": "triagebot",
        "timestamp": 1648329938
    },
    {
        "content": "<p>Ooooh yes. I want to second but I feel like I'd just be doing it for mir interpret and the funny keyword</p>",
        "id": 276746854,
        "sender_full_name": "oli",
        "timestamp": 1648330230
    },
    {
        "content": "<p>I would've thought this to be a lang team MCP as the compiler change seems trivial and well motivated if the language change is ok</p>",
        "id": 276746889,
        "sender_full_name": "oli",
        "timestamp": 1648330288
    },
    {
        "content": "<p>I'll ask in the lang meeting what people would expect there.  There's sortof a <em>de facto</em> initiative around the area (<a href=\"https://github.com/rust-lang/lang-team/blob/327d9db5f66e0a61328a13bf0d4e48216949a52f/design-meeting-minutes/2022-03-09-lang-roadmap.md#q-which-active-initiatives-are-missing\">https://github.com/rust-lang/lang-team/blob/327d9db5f66e0a61328a13bf0d4e48216949a52f/design-meeting-minutes/2022-03-09-lang-roadmap.md#q-which-active-initiatives-are-missing</a>), but maybe it should be <em>de jure</em> before opening a PR.</p>",
        "id": 276750946,
        "sender_full_name": "scottmcm",
        "timestamp": 1648335889
    },
    {
        "content": "<p>Using a compound keyword so that whatever syntax you use can't be ambiguous with identifiers <span aria-label=\"clap\" class=\"emoji emoji-1f44f\" role=\"img\" title=\"clap\">:clap:</span></p>",
        "id": 276759601,
        "sender_full_name": "Esteban Küber",
        "timestamp": 1648349229
    },
    {
        "content": "<p>I'm glad you like it, <span class=\"user-mention\" data-user-id=\"119031\">@Esteban Küber</span>, but I think it's simpler than that.  I'm just hiding it behind <code>do</code>, which is already a keyword.  (<code>try {</code> used to be spelled <code>do catch {</code> on nightly for the same reason.) </p>\n<p>Ideally I'd use <code>k#yeet</code> or similar, thanks to <a href=\"https://github.com/rust-lang/rfcs/issues/3101\">rfcs#3101</a>, but I don't know how to reliably feature-gate something that I think would have tokenizer impact, so I think this is better when it's just at \"might be removed at any point\" experimentation level.</p>",
        "id": 276768859,
        "sender_full_name": "scottmcm",
        "timestamp": 1648361356
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"125270\">@scottmcm</span> <a href=\"#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20.60yeet.60.20experimentally.20compiler-team.23501/near/276768859\">said</a>:</p>\n<blockquote>\n<p>Ideally I'd use <code>k#yeet</code> or similar, thanks to <a href=\"https://github.com/rust-lang/rfcs/issues/3101\">rfcs#3101</a>, but I don't know how to reliably feature-gate something that I think would have tokenizer impact, so I think this is better when it's just at \"might be removed at any point\" experimentation level.</p>\n</blockquote>\n<p>using <code>k#</code> for this seems better to me. we reserved prefixes like that specifically for things like this. it does mean adding it to the tokenizer, but if that's tricky, then we should probably fix that instead of (ab)using the <code>do</code> keyword.</p>",
        "id": 277160277,
        "sender_full_name": "Mara",
        "timestamp": 1648653237
    },
    {
        "content": "<p><strong>Compiler folks</strong>: Is there anyone who would be willing to give me mentoring instructions on how to make a feature-gated change to do <code>k#yeet</code> on nightly?  Or, more simply, give a good idea on how pervasive or complicated (or easy) such a change would be?</p>",
        "id": 277170420,
        "sender_full_name": "scottmcm",
        "timestamp": 1648657658
    },
    {
        "content": "<p>I would look for where the existing feature gating for <code>k#keyword</code> is, change it to add a new feature gate, and check that gate in the same place. I expect it will be either in rustc_lexer or rustc_parser.</p>",
        "id": 277172540,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648658485
    },
    {
        "content": "<p>Probably the easiest way to find it is to trigger the feature error on playground and the search for the error name</p>",
        "id": 277172759,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648658553
    },
    {
        "content": "<p>AKA break it until you make it</p>",
        "id": 277173203,
        "sender_full_name": "cuviper",
        "timestamp": 1648658729
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20.60yeet.60.20experimentally.20compiler-team.23501/near/277172540\">said</a>:</p>\n<blockquote>\n<p>I would look for where the existing feature gating for <code>k#keyword</code> is</p>\n</blockquote>\n<p>There isn't any feature gating for it, though, AFAIK.  It's just a hard tokenization error.</p>\n<p>I could probably figure how to make it <em>work</em>; I'm most unsure about how to keep it from being stable -- especially inside <code>#[cfg]</code> and such.</p>",
        "id": 277176665,
        "sender_full_name": "scottmcm",
        "timestamp": 1648659972
    },
    {
        "content": "<p>Why would it be a hard error inside a <code>cfg</code>? I would expect it to error only if it's compiled</p>",
        "id": 277177911,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648660548
    },
    {
        "content": "<p>That prevents things like <code>#[cfg(nightly)] k#yeet \"foo\";</code></p>",
        "id": 277178018,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648660582
    },
    {
        "content": "<p>Anyway, <span class=\"user-mention\" data-user-id=\"125270\">@scottmcm</span> <a href=\"https://doc.rust-lang.org/beta/nightly-rustc/rustc_feature/index.html\">https://doc.rust-lang.org/beta/nightly-rustc/rustc_feature/index.html</a> mentions rustc_ast_passes/src/feature_gate.rs, look around there</p>",
        "id": 277180765,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648661878
    },
    {
        "content": "<p>Cfg'ed code still needs to be parsed to know where it ends. <code>#[cfg(nightly)]</code> only really works nicely on <code>mod</code> items with external source.</p>",
        "id": 277180965,
        "sender_full_name": "bjorn3",
        "timestamp": 1648661972
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/233931-t-compiler.2Fmajor-changes/topic/Add.20.60yeet.60.20experimentally.20compiler-team.23501/near/277180765\">said</a>:</p>\n<blockquote>\n<p>Anyway, <span class=\"user-mention silent\" data-user-id=\"125270\">scottmcm</span> <a href=\"https://doc.rust-lang.org/beta/nightly-rustc/rustc_feature/index.html\">https://doc.rust-lang.org/beta/nightly-rustc/rustc_feature/index.html</a> mentions rustc_ast_passes/src/feature_gate.rs, look around there</p>\n</blockquote>\n<p>Yeah, my MVP does that already &lt;<a href=\"https://github.com/scottmcm/rust/commit/do-yeet#diff-0e671850197410b3d51dfa88222d5b28bb9dded13f6dc7c3b85903412250d02dR616\">https://github.com/scottmcm/rust/commit/do-yeet#diff-0e671850197410b3d51dfa88222d5b28bb9dded13f6dc7c3b85903412250d02dR616</a>&gt;, but it's for the AST.</p>\n<p>That doesn't do things like \"you can't use it in a <code>macro_rules!</code> macro\", AFAIK.</p>",
        "id": 277181178,
        "sender_full_name": "scottmcm",
        "timestamp": 1648662074
    },
    {
        "content": "<p>Am I wrong in remembering that prefix for arbitrary keywords is <code>r#</code> not <code>k#</code>?</p>",
        "id": 277540824,
        "sender_full_name": "nagisa",
        "timestamp": 1648919723
    },
    {
        "content": "<p>oh, it might be the other way around, to make a keyword into an identifier (e.g. <code>r#type</code>…)</p>",
        "id": 277540836,
        "sender_full_name": "nagisa",
        "timestamp": 1648919754
    },
    {
        "content": "<p>Yeah, <code>r#</code> is raw identifier prefix.</p>",
        "id": 277541718,
        "sender_full_name": "Connor Horman",
        "timestamp": 1648921037
    }
]
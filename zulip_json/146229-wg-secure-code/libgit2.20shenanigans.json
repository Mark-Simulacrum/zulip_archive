[
    {
        "content": "<p>I'm wondering if it might make sense to switch (back) to HTTP as a way to fetch the advisory DB <a href=\"https://github.com/rustsec/rustsec/issues/431\">https://github.com/rustsec/rustsec/issues/431</a></p>",
        "id": 252940596,
        "sender_full_name": "Tony Arcieri",
        "timestamp": 1631400216
    },
    {
        "content": "<p>getting rid of the C code and OpenSSL sounds nice</p>",
        "id": 252940607,
        "sender_full_name": "Tony Arcieri",
        "timestamp": 1631400237
    },
    {
        "content": "<p>Yeah, using rustls in place of OpenSSL is tempting. HTTP fetching would be somewhat inefficient, but with the entire DB being at 300kb right now (zipped) I don't think we'll hit any practical snags anytime soon</p>",
        "id": 252940770,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631400427
    },
    {
        "content": "<p>For the HTTP client I suggest <code>attohttpc</code>. It has Happy Eyeballs and optional native-tls support that <code>ureq</code> lacks.</p>",
        "id": 252940856,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631400530
    },
    {
        "content": "<p>And we really don't need <code>async</code> in the likes of <code>reqwest</code> etc.</p>",
        "id": 252940874,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631400565
    },
    {
        "content": "<p>Optional native-tls is useful for platforms that are not supported by rustls</p>",
        "id": 252941230,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631400979
    },
    {
        "content": "<p>with a <code>rustsec-admin</code> controlled build process, we can just splat the whole database out into a single flat file</p>",
        "id": 252941823,
        "sender_full_name": "Tony Arcieri",
        "timestamp": 1631401627
    },
    {
        "content": "<p>that's actually how it used to work</p>",
        "id": 252941828,
        "sender_full_name": "Tony Arcieri",
        "timestamp": 1631401636
    },
    {
        "content": "<p>Github already does it for us</p>",
        "id": 252941831,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631401640
    },
    {
        "content": "<p><a href=\"https://github.com/rustsec/rustsec/archive/refs/heads/main.zip\">https://github.com/rustsec/rustsec/archive/refs/heads/main.zip</a></p>",
        "id": 252941839,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631401655
    },
    {
        "content": "<p>There is probably even some CDN key with which we can check if it has changed since last request or not</p>",
        "id": 252941887,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631401688
    },
    {
        "content": "<p>The CDN that <a href=\"http://crates.io\">crates.io</a> uses allows checking if the content stayed the same since our last request via something called <code>etag</code>. We use that in <code>cargo supply-chain</code>: <br>\n<a href=\"https://github.com/rust-secure-code/cargo-supply-chain/blob/bd8bc42b8ecd6b74f8641cb2f4c6d3bec7e42716/src/crates_cache.rs#L137\">https://github.com/rust-secure-code/cargo-supply-chain/blob/bd8bc42b8ecd6b74f8641cb2f4c6d3bec7e42716/src/crates_cache.rs#L137</a></p>",
        "id": 252942025,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631401880
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"132721\">@Tony Arcieri</span> I see you made some <code>rustsec</code> changes, I assume another release is imminent? Could you also rename the OSV feature to <code>osv-export</code> in both places where it's used before you push the release? I'm lazy and don't want to set up a development environment from scratch just to change a string in two places.</p>",
        "id": 252942228,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631402127
    },
    {
        "content": "<p>aah, umm can you send a PR?</p>",
        "id": 252942240,
        "sender_full_name": "Tony Arcieri",
        "timestamp": 1631402154
    },
    {
        "content": "<p>Probably! I'll do that.</p>",
        "id": 252942686,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631402695
    },
    {
        "content": "<p>OK done: <a href=\"https://github.com/rustsec/rustsec/pull/434\">https://github.com/rustsec/rustsec/pull/434</a></p>",
        "id": 252943349,
        "sender_full_name": "Shnatsel",
        "timestamp": 1631403549
    }
]
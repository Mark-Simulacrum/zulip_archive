[
    {
        "content": "<p>After we talked yesterday, I was thinking about the \"an origin is accessed\" information (I also just read your remaining discussion from tonight, but want to get this out first). If I have some variable that is <code>var_used_at</code> some position, and the <code>use_of_var_derefs_origin</code> o, then I take it o is accessed (same for the <code>drop</code> versions of these). If <code>x</code> is some <code>Foo&lt;'a, 'b&gt; { a: &amp;'a mut Bar, b: &amp;'b mut Baz }</code>, presumably a use of <code>x</code> derefs both <code>'a</code> and <code>'b</code>?</p>",
        "id": 251037592,
        "sender_full_name": "Domenic Quirl",
        "timestamp": 1630136656
    },
    {
        "content": "<p>Further, I am wondering about how currently paths relate to origins</p>",
        "id": 251037606,
        "sender_full_name": "Domenic Quirl",
        "timestamp": 1630136687
    },
    {
        "content": "<p>There is <code>path_accessed_at</code>, which seems to me like the closest thing to the use of a path, but afaik there is no relation that relates paths to origins (except if <code>path_is_var</code> and the variable facts apply)?</p>",
        "id": 251037697,
        "sender_full_name": "Domenic Quirl",
        "timestamp": 1630136792
    },
    {
        "content": "<p>What I am wondering is code like </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"w\"> </span><span class=\"p\">};</span><span class=\"w\"> </span><span class=\"c1\">// Foo from above</span>\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">p</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">.</span><span class=\"n\">a</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"n\">bar</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">.</span><span class=\"n\">b</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"nb\">drop</span><span class=\"p\">(</span><span class=\"n\">p</span><span class=\"p\">);</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 251037736,
        "sender_full_name": "Domenic Quirl",
        "timestamp": 1630136880
    },
    {
        "content": "<p>where paths are borrowed individually, which can't deref all origins of the root <code>x</code></p>",
        "id": 251037813,
        "sender_full_name": "Domenic Quirl",
        "timestamp": 1630136953
    },
    {
        "content": "<p>My intuition is that, currently, this is encoded in the loan facts (that is, there will be a loan issued for the borrow with a new origin, and a corresponding subset that relates it to <code>'a</code>/<code>'b</code>), but is not explicit in the other facts. Is that correct?</p>",
        "id": 251037939,
        "sender_full_name": "Domenic Quirl",
        "timestamp": 1630137122
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"337115\">Domenic Quirl</span> <a href=\"#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/Clarifying.20fact.20generation.20for.20Variables.2FPaths.2FOrigins/near/251037592\">said</a>:</p>\n<blockquote>\n<p>...presumably a use of <code>x</code> derefs both <code>'a</code> and <code>'b</code>?</p>\n</blockquote>\n<p>correct</p>",
        "id": 251072756,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1630174413
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"337115\">Domenic Quirl</span> <a href=\"#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/Clarifying.20fact.20generation.20for.20Variables.2FPaths.2FOrigins/near/251037939\">said</a>:</p>\n<blockquote>\n<p>My intuition is that, currently, this is encoded in the loan facts (that is, there will be a loan issued for the borrow with a new origin, and a corresponding subset that relates it to <code>'a</code>/<code>'b</code>), but is not explicit in the other facts. Is that correct?</p>\n</blockquote>\n<p>I think so</p>",
        "id": 251072811,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1630174447
    },
    {
        "content": "<p>have to double check but that sounds plausible :)</p>",
        "id": 251072819,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1630174457
    }
]
[
    {
        "content": "<p>Is there a reason <em>not</em> to merge nikomatsakis/polonius.next#4 ?</p>",
        "id": 259534252,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635518615
    },
    {
        "content": "<p>The <code>invalidate_origin</code> facts it produces aren't correct, and it will need to be updated to use the <code>Deref</code> PR you just merged.</p>",
        "id": 259534383,
        "sender_full_name": "Dylan MacKenzie (ecstatic-morse)",
        "timestamp": 1635518678
    },
    {
        "content": "<p>the fact that it does something wrong doesn't seem like a reason not to merge</p>",
        "id": 259535043,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635518953
    },
    {
        "content": "<p>but needing a rebase does :)</p>",
        "id": 259535049,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635518957
    },
    {
        "content": "<p>I'd be inclined to handle the former by filing an issue and a follow-up PR</p>",
        "id": 259535067,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635518966
    },
    {
        "content": "<p>yup it'll need to be rebased since the deref PR changes all the commits w/ snapshots</p>",
        "id": 259535530,
        "sender_full_name": "lqd",
        "timestamp": 1635519149
    },
    {
        "content": "<p>Do we wanna just revert the Deref PR, merge lqd's and then I can update mine on top of <code>main</code>?</p>",
        "id": 259535968,
        "sender_full_name": "Dylan MacKenzie (ecstatic-morse)",
        "timestamp": 1635519352
    },
    {
        "content": "<p>I'll update and rebase it when I get off of work</p>",
        "id": 259536108,
        "sender_full_name": "lqd",
        "timestamp": 1635519411
    },
    {
        "content": "<p>(in a couple hours at most)</p>",
        "id": 259536170,
        "sender_full_name": "lqd",
        "timestamp": 1635519437
    },
    {
        "content": "<p>it seems like we can squash-and-rebase <span class=\"user-mention\" data-user-id=\"116113\">@lqd</span>'s PR probably</p>",
        "id": 259536210,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635519456
    },
    {
        "content": "<p>without great difficulty?</p>",
        "id": 259536218,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635519461
    },
    {
        "content": "<p>I didn't do that when I rebased before so that it's easier to review commit by commit</p>",
        "id": 259536390,
        "sender_full_name": "lqd",
        "timestamp": 1635519525
    },
    {
        "content": "<p>it's not like it's so complicated that this has great value ^^</p>",
        "id": 259536481,
        "sender_full_name": "lqd",
        "timestamp": 1635519575
    },
    {
        "content": "<p>it certainly makes for an easier review</p>",
        "id": 259536821,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635519702
    },
    {
        "content": "<p>seems less important to me when it's a huge block of new code but yes :)</p>",
        "id": 259536847,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635519711
    },
    {
        "content": "<p>ok, then I'll rebase it properly asap :)</p>",
        "id": 259537051,
        "sender_full_name": "lqd",
        "timestamp": 1635519790
    },
    {
        "content": "<p>I left a bunch of comments</p>",
        "id": 259539325,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635520720
    },
    {
        "content": "<p>overall looks good!</p>",
        "id": 259539374,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635520748
    },
    {
        "content": "<p>sorry I think I'll squash and rebase actually, it's not that easy over 80 commits and since it's a bunch of new code having many commits won't be that useful</p>",
        "id": 259550129,
        "sender_full_name": "lqd",
        "timestamp": 1635525088
    },
    {
        "content": "<p>Ok: </p>\n<ul>\n<li>I've merged the revert</li>\n<li>I've rebased and kept the easier-to-review 85 commits</li>\n<li>I've addressed some of the review comments by refactoring subset emission to handle generic types, refactored variance slighty to support contravariance (but we can't parse or test it yet)</li>\n<li>I've replied to the other comments: the simplistic invalidations will be fixed by dylan's PR <a href=\"https://github.com/rust-lang/rust/issues/10\">#10</a>; the \"relate_ty\" structure we kinda already have as you've noticed later, but it's more cluttered (like the rest of the code ... needs some cleanup once it's more stable) because there's more things to support than just types (borrow expressions, calls, etc)</li>\n<li>we didn't have CI, mostly because our tests require soufflé and they had issues with their packaging quotas, so I've added a GHA workflow using dylan's soufflé .deb</li>\n</ul>",
        "id": 259704958,
        "sender_full_name": "lqd",
        "timestamp": 1635560995
    },
    {
        "content": "<p>so if anyone wants to do another quick pass, that'd be cool. we could maybe integrate some of the discussions about the TODO comments, in the TODO comments themselves (apart from the one(s) needing an answer from niko).</p>\n<p>otherwise, it feels like an acceptable first step, so that we can add the other pieces from dylan's PRs, to support projections and therefore unrolling, subsets from calls depending on the fn signature, correct invalidations, etc (and what you cooked up today :)</p>",
        "id": 259705121,
        "sender_full_name": "lqd",
        "timestamp": 1635561218
    },
    {
        "content": "<p>Reading now</p>",
        "id": 259911181,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635796118
    },
    {
        "content": "<p>we should add bors</p>",
        "id": 259911356,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635796208
    },
    {
        "content": "<p>but merged!</p>",
        "id": 259911362,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635796210
    },
    {
        "content": "<p>Guess I have to rebase <a href=\"https://github.com/nikomatsakis/polonius.next/pull/15\">https://github.com/nikomatsakis/polonius.next/pull/15</a> :)</p>",
        "id": 259911401,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635796228
    },
    {
        "content": "<p>done!</p>",
        "id": 259923917,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635802087
    }
]
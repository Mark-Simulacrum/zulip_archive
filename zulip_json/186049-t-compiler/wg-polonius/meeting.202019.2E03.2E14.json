[
    {
        "content": "<p>Hello <span class=\"user-group-mention\" data-user-group-id=\"1184\">@WG-polonius</span> !</p>",
        "id": 160817953,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594407
    },
    {
        "content": "<p>Sorry i'm running late</p>",
        "id": 160817955,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594410
    },
    {
        "content": "<p>we had our first lang team working group session today</p>",
        "id": 160817961,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594417
    },
    {
        "content": "<p>and it ran over</p>",
        "id": 160817964,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594419
    },
    {
        "content": "<p>Are people around?</p>",
        "id": 160817970,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594422
    },
    {
        "content": "<p>I am! Just barely, given that my internal clock is at 07:14 in the morning and I just pulled an all-nighter</p>",
        "id": 160818052,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594463
    },
    {
        "content": "<p>Oh dear</p>",
        "id": 160818058,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594470
    },
    {
        "content": "<p>However, I am now back in Sweden</p>",
        "id": 160818066,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594478
    },
    {
        "content": "<p><span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 160818119,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594506
    },
    {
        "content": "<p>Not that I have anything against Australia</p>",
        "id": 160818134,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594520
    },
    {
        "content": "<p>But Sweden works better with my personal time zone ;)</p>",
        "id": 160818149,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594528
    },
    {
        "content": "<p>So here is our <a href=\"https://paper.dropbox.com/doc/Polonius-Roadmap--AZXjruBlcxXk4tkzZ33wNI6GAg-hk3a9ynduUN2gk1A0NNTF\" target=\"_blank\" title=\"https://paper.dropbox.com/doc/Polonius-Roadmap--AZXjruBlcxXk4tkzZ33wNI6GAg-hk3a9ynduUN2gk1A0NNTF\">Roadmap Paper Document</a></p>",
        "id": 160818169,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594539
    },
    {
        "content": "<p>Let's quickly review where we're at</p>",
        "id": 160818177,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594546
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"204115\">@Albin Stjerna</span> implemented the hybrid sketch in <a href=\"https://github.com/rust-lang-nursery/polonius/issues/102\" target=\"_blank\" title=\"https://github.com/rust-lang-nursery/polonius/issues/102\">polonius#102</a></p>",
        "id": 160818243,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594570
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116118\">@Matthew Jasper</span> wrote mentoring instructions <span aria-label=\"tada\" class=\"emoji emoji-1f389\" role=\"img\" title=\"tada\">:tada:</span></p>",
        "id": 160818255,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594582
    },
    {
        "content": "<p>I failed to do my tasks, mostly:</p>\n<ul>\n<li>Review lqd’s pr  @Nicholas M </li>\n<li>Prepare walkthrough of how polonius code works @Nicholas M</li>\n</ul>",
        "id": 160818281,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594609
    },
    {
        "content": "<p>I sort of started on reviewing the PR though :)</p>",
        "id": 160818283,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594613
    },
    {
        "content": "<p>but I guess we should figure out <span class=\"user-mention\" data-user-id=\"204115\">@Albin Stjerna</span> what is a good next step, right? Do you feel like you are starting to understand how Polonius codebase is working?</p>",
        "id": 160818301,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594628
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span>  N.B the document you linked to is some sort of meetning minutes from 2019.03.14</p>",
        "id": 160818314,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594656
    },
    {
        "content": "<p>whoops</p>",
        "id": 160818370,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594691
    },
    {
        "content": "<p>fixed</p>",
        "id": 160818379,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594700
    },
    {
        "content": "<p>I hope</p>",
        "id": 160818399,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594717
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> I feel like I understand it better than I did before, but I haven't fully grasped what every data structure does and how it interacts with datafrog yet</p>",
        "id": 160818400,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594719
    },
    {
        "content": "<p>But it's a good start, I think</p>",
        "id": 160818407,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594726
    },
    {
        "content": "<p>So yes I was thinking about datafrog</p>",
        "id": 160818411,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594728
    },
    {
        "content": "<p>Hmm</p>",
        "id": 160818423,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594740
    },
    {
        "content": "<p>so I think one thing we could do</p>",
        "id": 160818436,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594748
    },
    {
        "content": "<p>is to try to do a walk-through in which we connect the <em>naive</em> rules to their <em>datafrog</em> variants</p>",
        "id": 160818443,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594759
    },
    {
        "content": "<p>that wouldn't really take much prep from my part and might be a nice piece of documentation to have</p>",
        "id": 160818449,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594769
    },
    {
        "content": "<p>That sounds like a good idea</p>",
        "id": 160818454,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594773
    },
    {
        "content": "<p>we could try to do that (e.g.) tomorrow</p>",
        "id": 160818457,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594776
    },
    {
        "content": "<p>but what is a good next <em>task</em></p>",
        "id": 160818468,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594791
    },
    {
        "content": "<p>I feel like we want to start trying to pivot towards deeper understanding of the rules themselves</p>",
        "id": 160818535,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594807
    },
    {
        "content": "<p>Yes, me too, because they are very abstract as they stand</p>",
        "id": 160818553,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594825
    },
    {
        "content": "<p>I think <a href=\"https://github.com/rust-lang-nursery/polonius/issues/102\" target=\"_blank\" title=\"https://github.com/rust-lang-nursery/polonius/issues/102\">polonius#102</a> looks good bw</p>",
        "id": 160818595,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594873
    },
    {
        "content": "<p>I'm inclined to merge it</p>",
        "id": 160818601,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594878
    },
    {
        "content": "<p>I did skim the Static Program Analysis (Møller &amp; Schwartzbach) on the plane(s), and I felt like that gave me some additional intuitions</p>",
        "id": 160818603,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594881
    },
    {
        "content": "<p>One task we had talked about was to modify rustc</p>",
        "id": 160818606,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594884
    },
    {
        "content": "<p>Ok, so I'll drop the WIP then</p>",
        "id": 160818609,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594886
    },
    {
        "content": "<p>I might rename <code>my_xx</code> to just <code>xx</code></p>",
        "id": 160818619,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594900
    },
    {
        "content": "<p>but that's just a nit</p>",
        "id": 160818680,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594930
    },
    {
        "content": "<blockquote>\n<p>One task we had talked about was to modify rustc</p>\n</blockquote>\n<p>i.e., to use this new hybrid</p>",
        "id": 160818685,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594936
    },
    {
        "content": "<p>but I don't really think that's going to teach you a lot</p>",
        "id": 160818692,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594941
    },
    {
        "content": "<p>might be a good task regardless, just to get you used to the <em>rustc</em> workflow a bit</p>",
        "id": 160818699,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594950
    },
    {
        "content": "<p>it seems like maybe working with <a href=\"https://github.com/rust-lang/polonius/pull/99\" target=\"_blank\" title=\"https://github.com/rust-lang/polonius/pull/99\">https://github.com/rust-lang/polonius/pull/99</a> (<span class=\"user-mention\" data-user-id=\"116113\">@lqd</span>'s PR) is a good next step</p>",
        "id": 160818716,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594971
    },
    {
        "content": "<p>I had it like that in my first version, but then I noticed that another variable shadows that one, which isn't a problem but I wasn't sure what best practices looked like so I went with a unique name</p>",
        "id": 160818722,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552594980
    },
    {
        "content": "<p>oh ok</p>",
        "id": 160818740,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594987
    },
    {
        "content": "<p>I should look a bit more closely :)</p>",
        "id": 160818746,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552594997
    },
    {
        "content": "<p>hmm maybe an alternative would be</p>",
        "id": 160818750,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595002
    },
    {
        "content": "<p>Yes, I think so, and it might be a good way of giving me a feeling for How It All Fits Together</p>",
        "id": 160818765,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595020
    },
    {
        "content": "<p>The rustc integration, that is</p>",
        "id": 160818769,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595023
    },
    {
        "content": "<p>yeah, so let's at least do that</p>",
        "id": 160818775,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595030
    },
    {
        "content": "<p>But what does that mean concretely, that rustc has an option to run the hybrid analysis on the fly?</p>",
        "id": 160818856,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595076
    },
    {
        "content": "<p>Yes so right now</p>",
        "id": 160818894,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595100
    },
    {
        "content": "<p>rustc has an option to use polonius, with the <code>-Zpolonius</code> flag (<code>-Z</code> are for unstable flags)</p>",
        "id": 160818922,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595118
    },
    {
        "content": "<p>I don't recall which algorithm it uses by default, but I think you can use <code>POLONIUS_ALGORITHM=foo</code> to select</p>",
        "id": 160818930,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595134
    },
    {
        "content": "<p>but I think hybrid is the right <em>default</em> choice</p>",
        "id": 160818938,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595148
    },
    {
        "content": "<p>Ah, OK, so a first-first step would be for me to figure out what it's currently doing, and then modifying that</p>",
        "id": 160819001,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595180
    },
    {
        "content": "<p>yeo</p>",
        "id": 160819031,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595222
    },
    {
        "content": "<p>this should be very easy in terms of the diff</p>",
        "id": 160819043,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595229
    },
    {
        "content": "<p>It will also need you to upgrade the polonius version</p>",
        "id": 160819066,
        "sender_full_name": "Matthew Jasper",
        "timestamp": 1552595255
    },
    {
        "content": "<p>Is there a benchmark collection anywhere by the way? It would be interesting to see how the hybrid compares to running the full analysis for something that actually needs the full analysis</p>",
        "id": 160819072,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595258
    },
    {
        "content": "<p>we basically have to <a href=\"https://github.com/rust-lang/rust/blob/bc44841ad2a2ad5f6c5e67b9e35ed8e7e71d4dc7/src/librustc_mir/borrow_check/nll/mod.rs#L174-L176\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/blob/bc44841ad2a2ad5f6c5e67b9e35ed8e7e71d4dc7/src/librustc_mir/borrow_check/nll/mod.rs#L174-L176\">change this line</a></p>",
        "id": 160819077,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595261
    },
    {
        "content": "<blockquote>\n<p>It will also need you to upgrade the polonius version</p>\n</blockquote>\n<p>ah, good point</p>",
        "id": 160819081,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595265
    },
    {
        "content": "<p>Ah, so it becomes \"Hybrid\" in stead of \"DatafrogOpt\"</p>",
        "id": 160819145,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595291
    },
    {
        "content": "<p>For the default value</p>",
        "id": 160819156,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595302
    },
    {
        "content": "<blockquote>\n<p>Is there a benchmark collection anywhere by the way? It would be interesting to see how the hybrid compares to running the full analysis for something that actually needs the full analysis</p>\n</blockquote>\n<p>yes, so, we have <a href=\"http://perf.rust-lang.org\" target=\"_blank\" title=\"http://perf.rust-lang.org\">perf.rust-lang.org</a>, and a little while back <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> went ahead and did some work to run polonius benchmarks, which I think we discussed <a href=\"#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/finding.20perf.20spikes\" title=\"#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/finding.20perf.20spikes\">in this Zulip topic</a></p>",
        "id": 160819157,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595303
    },
    {
        "content": "<p>we should probably write out that procedure more carefully</p>",
        "id": 160819171,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595314
    },
    {
        "content": "<p>it'd be nice to do the mesurements and confirm what we expect</p>",
        "id": 160819176,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595321
    },
    {
        "content": "<p>we could add that as a \"work item\" for the week</p>",
        "id": 160819192,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595336
    },
    {
        "content": "<p>Yes, I think it's a good idea to start measuring early</p>",
        "id": 160819222,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595363
    },
    {
        "content": "<p>\"You can only make as well as you measure\"</p>",
        "id": 160819231,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595369
    },
    {
        "content": "<p>Also, the history might be interesting in itself</p>",
        "id": 160819250,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595383
    },
    {
        "content": "<p>confirm</p>",
        "id": 160819302,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595403
    },
    {
        "content": "<p>one nice thing would be if we include in the wg-polonius directory</p>",
        "id": 160819342,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595416
    },
    {
        "content": "<p>a write-up of the steps to follow</p>",
        "id": 160819356,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595431
    },
    {
        "content": "<p>I mean this directory: <a href=\"https://github.com/rust-lang/compiler-team/tree/master/working-groups/polonius\" target=\"_blank\" title=\"https://github.com/rust-lang/compiler-team/tree/master/working-groups/polonius\">https://github.com/rust-lang/compiler-team/tree/master/working-groups/polonius</a></p>",
        "id": 160819359,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595435
    },
    {
        "content": "<p>but it could also live on the rust-lang/polonius repo</p>",
        "id": 160819367,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595439
    },
    {
        "content": "<p><em>somewhere</em>\\</p>",
        "id": 160819374,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595441
    },
    {
        "content": "<p>I'd probably put it in the compiler-team repo, and we can also record measurements in a file in there</p>",
        "id": 160819396,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595460
    },
    {
        "content": "<p>Ah, with results you mean?</p>",
        "id": 160819424,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595483
    },
    {
        "content": "<p>e.g., a little <code>measurements</code> directory</p>",
        "id": 160819428,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595490
    },
    {
        "content": "<p>correct</p>",
        "id": 160819433,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595493
    },
    {
        "content": "<p>(I'd like us to be using those directories to include \"work products\" from the work we're doing)</p>",
        "id": 160819441,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595503
    },
    {
        "content": "<p>How are the measurements currently taken?</p>",
        "id": 160819453,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595513
    },
    {
        "content": "<p>there is a harness, that's why I linked to the zulip topic</p>",
        "id": 160819513,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595527
    },
    {
        "content": "<p>I think it was explained in there what to do :)</p>",
        "id": 160819520,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595532
    },
    {
        "content": "<p>Ah, OK, then I can just start from there</p>",
        "id": 160819548,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595549
    },
    {
        "content": "<p>the topic is called <a href=\"#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/finding.20perf.20spikes\" title=\"#narrow/stream/186049-t-compiler.2Fwg-polonius/topic/finding.20perf.20spikes\">\"finding perf spikes\"</a></p>",
        "id": 160819553,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595551
    },
    {
        "content": "<p>you could probably also ping <span class=\"user-mention\" data-user-id=\"116266\">@Santiago Pastorino</span> for advice</p>",
        "id": 160819557,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595559
    },
    {
        "content": "<p>(or the folks who were discussing in that topic)</p>",
        "id": 160819573,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595571
    },
    {
        "content": "<p>ok, so we have two work items, I'm not sure how much time they will take, maybe enough, but I think we should be thinking about the <em>next</em> step</p>",
        "id": 160819604,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595604
    },
    {
        "content": "<p>I see a few options</p>",
        "id": 160819608,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595606
    },
    {
        "content": "<p>agreed</p>",
        "id": 160819623,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595630
    },
    {
        "content": "<ul>\n<li>there are ways to improve hybrid that we could talk about -- in particular, we can use the results from the location insensitive analysis to make the datafrog-opt faster</li>\n</ul>",
        "id": 160819632,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595639
    },
    {
        "content": "<p>but I think that's not the right thing to do</p>",
        "id": 160819661,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595643
    },
    {
        "content": "<p>it feels a bit premature</p>",
        "id": 160819689,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595654
    },
    {
        "content": "<p>I think that's what we do after we have tried everything else</p>",
        "id": 160819697,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595662
    },
    {
        "content": "<p>and I'm not super keen to make datafrog-opt more complex than it already is until we're sure we're happy</p>",
        "id": 160819705,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595672
    },
    {
        "content": "<p>another option I see would be</p>",
        "id": 160819712,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595681
    },
    {
        "content": "<ul>\n<li>moving more computation out from rustc and into polonius, <em>probably</em> liveness?</li>\n</ul>",
        "id": 160819732,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595698
    },
    {
        "content": "<p>so, right now, the polonius gets a set of input facts generated by rustc</p>",
        "id": 160819746,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595707
    },
    {
        "content": "<p>ah</p>",
        "id": 160819774,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595735
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/polonius/blob/ecafafba28e4903b9fe7a7df19b87d97541c3c62/polonius-engine/src/facts.rs#L4-L29\" target=\"_blank\" title=\"https://github.com/rust-lang/polonius/blob/ecafafba28e4903b9fe7a7df19b87d97541c3c62/polonius-engine/src/facts.rs#L4-L29\">these ones</a></p>",
        "id": 160819775,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595735
    },
    {
        "content": "<p>but in some cases rustc has to do a fair amount of work to generate those facts,</p>",
        "id": 160819787,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595752
    },
    {
        "content": "<p>and some of this work can/should be moved into polonius</p>",
        "id": 160819794,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595758
    },
    {
        "content": "<p>ah, and that work might be redundant with work later done by datafrog</p>",
        "id": 160819843,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595772
    },
    {
        "content": "<p>of course, because it also propagates constraints</p>",
        "id": 160819849,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595780
    },
    {
        "content": "<p>in fact, if I have understood things correctly, it only propagates and never searches/backtracks, right?</p>",
        "id": 160819874,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552595798
    },
    {
        "content": "<p>the goal I think would be that the set of facts is ultimately something we can read <em>fairly</em> directly from the MIR and type-check results</p>",
        "id": 160819884,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595804
    },
    {
        "content": "<blockquote>\n<p>in fact, if I have understood things correctly, it only propagates and never searches/backtracks, right?</p>\n</blockquote>\n<p>right, datalog does not require backtracking to solve</p>",
        "id": 160819894,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595816
    },
    {
        "content": "<p>I believe the only fact that is presently computed via a very \"datalog-y like analysis\" is <a href=\"https://github.com/rust-lang/polonius/blob/ecafafba28e4903b9fe7a7df19b87d97541c3c62/polonius-engine/src/facts.rs#L24-L25\" target=\"_blank\" title=\"https://github.com/rust-lang/polonius/blob/ecafafba28e4903b9fe7a7df19b87d97541c3c62/polonius-engine/src/facts.rs#L24-L25\">region_live_at</a></p>",
        "id": 160819914,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595836
    },
    {
        "content": "<p>I guess hmm a simple thing we could start with</p>",
        "id": 160819935,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595867
    },
    {
        "content": "<p>might be to modify rustc to generalize more basic liveness facts -- e.g., this variable is defined here, this variable is used there</p>",
        "id": 160819998,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595888
    },
    {
        "content": "<p>and then we could write some datafrog code to compute liveness, even if we don't use it for anything</p>",
        "id": 160820009,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595900
    },
    {
        "content": "<p>(Yet)</p>",
        "id": 160820013,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595905
    },
    {
        "content": "<p>it's a first step towards the change I'm talking about, and it would definitely mean you understand all the parts</p>",
        "id": 160820025,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595921
    },
    {
        "content": "<p>I think we'll need a few more bits of things after that to complete the change</p>",
        "id": 160820058,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595952
    },
    {
        "content": "<p>(as it happens, the Lark compiler that I mentioned already does this)</p>",
        "id": 160820066,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595958
    },
    {
        "content": "<p>if we did a video session tomorrow <span class=\"user-mention\" data-user-id=\"204115\">@Albin Stjerna</span> we could walk through what will be required</p>",
        "id": 160820087,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595982
    },
    {
        "content": "<p>I'll record it, post it to youtube, then you can look back over it ;)</p>",
        "id": 160820092,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552595993
    },
    {
        "content": "<p>Always a good thing to have :)</p>",
        "id": 160820152,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596007
    },
    {
        "content": "<p>Ok, so would that calculation be done in Polonius and then fed back into rustc, or is it only needed for the borrowcheck?</p>",
        "id": 160820194,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596049
    },
    {
        "content": "<p>the latter, it is only needed for borrow check</p>",
        "id": 160820216,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596065
    },
    {
        "content": "<p>Hmm, would 14:00 Boston / 19:00 CET work for you?</p>",
        "id": 160820232,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596081
    },
    {
        "content": "<p>Ah, Ok, then I see why you would want to move it</p>",
        "id": 160820235,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596085
    },
    {
        "content": "<p>I could maybe do earlier instead</p>",
        "id": 160820237,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596087
    },
    {
        "content": "<blockquote>\n<p>Ok, so would that calculation be done in Polonius and then fed back into rustc, or is it only needed for the borrowcheck?</p>\n</blockquote>\n<p>(actually some other parts of the compiler do similar calculations, but they do them somewhat differently)</p>",
        "id": 160820259,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596108
    },
    {
        "content": "<blockquote>\n<p>Hmm, would 14:00 Boston / 19:00 CET work for you?</p>\n</blockquote>\n<p>or we could do monday</p>",
        "id": 160820272,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596119
    },
    {
        "content": "<p>say at 10:30 Boston / 15:30 CET or 11:00 Boston / 16:00 CET</p>",
        "id": 160820363,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596161
    },
    {
        "content": "<p>I'd like to do it soon, so you can get started :)</p>",
        "id": 160820381,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596176
    },
    {
        "content": "<p>but then maybe just starting out by trying to upgrade the version of polonius rustc uses / change that line will keep ya busy for one day ;)</p>",
        "id": 160820407,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596197
    },
    {
        "content": "<p>Yes, me too. I would prefer tomorrow to Monday, because I have a meeting at 15:00 CET (probably a short one)</p>",
        "id": 160820414,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596206
    },
    {
        "content": "<p>ok, let's do tomorrow then. Does that time work? I could .. maybe also do 11:00 / 16:00 tomorrow.</p>",
        "id": 160820440,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596224
    },
    {
        "content": "<p>I think it would, but it doesn't hurt to pipeline a few things</p>",
        "id": 160820453,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596231
    },
    {
        "content": "<p>(Also, if you're online, I might be able to do earlier, we could play it a bit by ear and I can ping you)</p>",
        "id": 160820527,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596262
    },
    {
        "content": "<blockquote>\n<p>ok, let's do tomorrow then. Does that time work? I could .. maybe also do 11:00 / 16:00 tomorrow.</p>\n</blockquote>\n<p>let's do this. That leaves my afternoon more free</p>",
        "id": 160820561,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596294
    },
    {
        "content": "<p>12:00 Boston would be perfect for me (I get off work at the library 16:00 CET), but anything goes after that really</p>",
        "id": 160820565,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596299
    },
    {
        "content": "<p>Ah, ok, then never mind</p>",
        "id": 160820583,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596306
    },
    {
        "content": "<p>I can't do 12:00 so let's do 14:00 / 19:00</p>",
        "id": 160820601,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596327
    },
    {
        "content": "<p>I would probably be home around 16:20 or so though</p>",
        "id": 160820668,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596363
    },
    {
        "content": "<p>If that works for you</p>",
        "id": 160820687,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596367
    },
    {
        "content": "<p>hmm</p>",
        "id": 160820754,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596425
    },
    {
        "content": "<p>I'm not sure how much time we'll need</p>",
        "id": 160820763,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596429
    },
    {
        "content": "<p>I guess we could <em>try</em> it then, say for 30 minutes, that might suffice</p>",
        "id": 160820769,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596435
    },
    {
        "content": "<p>and continu later</p>",
        "id": 160820771,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596437
    },
    {
        "content": "<p>Yes, which could even have the advantage of giving me some time to research things for a later session if we need one</p>",
        "id": 160820799,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596464
    },
    {
        "content": "<p>er wait</p>",
        "id": 160820801,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596469
    },
    {
        "content": "<p>I was doing math wrong</p>",
        "id": 160820805,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596474
    },
    {
        "content": "<p>...relate</p>",
        "id": 160820808,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596478
    },
    {
        "content": "<p>well wait</p>",
        "id": 160820810,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596480
    },
    {
        "content": "<p>no I wasn't</p>",
        "id": 160820836,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596483
    },
    {
        "content": "<p>ok, perfect</p>",
        "id": 160820856,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596485
    },
    {
        "content": "<p>we'll do 11:30 / 16:30</p>",
        "id": 160820866,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596492
    },
    {
        "content": "<p>Great!</p>",
        "id": 160820889,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596514
    },
    {
        "content": "<p>ping me when you get back <span class=\"user-mention\" data-user-id=\"204115\">@Albin Stjerna</span> and we can start a few minutes earlier  :)</p>",
        "id": 160820897,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596519
    },
    {
        "content": "<p>Sure!</p>",
        "id": 160820901,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596525
    },
    {
        "content": "<p>ok, very good. enough for 1 day?</p>",
        "id": 160820909,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596528
    },
    {
        "content": "<p>Yes, definitely!</p>",
        "id": 160820916,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552596537
    },
    {
        "content": "<p>ps <span class=\"user-mention\" data-user-id=\"116118\">@Matthew Jasper</span> I'm assuming you have enough to do and are mostly watching along?</p>",
        "id": 160820933,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552596550
    },
    {
        "content": "<p>Yes, I have enough to do with normal NLL</p>",
        "id": 160820949,
        "sender_full_name": "Matthew Jasper",
        "timestamp": 1552596570
    },
    {
        "content": "<p>Ok, but I guess that's it for the meeting? I don't think I have anything else</p>",
        "id": 160821987,
        "sender_full_name": "Amanda Stjerna",
        "timestamp": 1552597312
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"204115\">@Albin Stjerna</span> oh, yes I think it is :)</p>",
        "id": 160822964,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1552597984
    }
]
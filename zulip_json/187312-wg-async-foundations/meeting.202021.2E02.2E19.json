[
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1172\">@WG-async-foundations</span> <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 227002844,
        "sender_full_name": "tmandry",
        "timestamp": 1613757668
    },
    {
        "content": "<p>Happy friday, everyone</p>",
        "id": 227003033,
        "sender_full_name": "tmandry",
        "timestamp": 1613757737
    },
    {
        "content": "<p>We've had quite a few things land lately:</p>\n<ul>\n<li>Diagnostic involving the type of an async block refers to <code>generator</code>'s <a href=\"https://github.com/rust-lang/rust/issues/81457\">#81457</a></li>\n<li>Improve error message for \"return type cannot contain a projection or <code>Self</code>...\" <a href=\"https://github.com/rust-lang/rust/issues/78600\">#78600</a></li>\n<li>Impossible case reached: src/librustc_ty/needs_drop.rs:111 <a href=\"https://github.com/rust-lang/rust/issues/72685\">#72685</a></li>\n<li>Stabilize the Wake trait <a href=\"https://github.com/rust-lang/rust/issues/74304\">#74304</a></li>\n<li>Unhelpful \"cannot infer type\" error for ? in async block with unclear Result Err type <a href=\"https://github.com/rust-lang/rust/issues/77880\">#77880</a></li>\n</ul>",
        "id": 227003242,
        "sender_full_name": "tmandry",
        "timestamp": 1613757827
    },
    {
        "content": "<p>Thanks to everyone who helped out.</p>",
        "id": 227003263,
        "sender_full_name": "tmandry",
        "timestamp": 1613757837
    },
    {
        "content": "<p>howdy</p>",
        "id": 227003431,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613757894
    },
    {
        "content": "<p>It looks like <code>Wake</code> is set to stabilize in 1.51, thanks for pushing on this <span class=\"user-mention\" data-user-id=\"211722\">@Yoshua Wuyts</span>!</p>",
        "id": 227003468,
        "sender_full_name": "tmandry",
        "timestamp": 1613757912
    },
    {
        "content": "<p>Glad I could help! ^^</p>",
        "id": 227003511,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613757939
    },
    {
        "content": "<p>Are there any other updates folks would like to share?</p>",
        "id": 227003624,
        "sender_full_name": "tmandry",
        "timestamp": 1613757980
    },
    {
        "content": "<p>obviously, new meeting time :)</p>",
        "id": 227003674,
        "sender_full_name": "tmandry",
        "timestamp": 1613758013
    },
    {
        "content": "<p>I'm working on a new async vision doc PR</p>",
        "id": 227003718,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758035
    },
    {
        "content": "<p>Incorporating the feedback</p>",
        "id": 227003730,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758044
    },
    {
        "content": "<p>and elaborating on the process as I see it playing out</p>",
        "id": 227003746,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758048
    },
    {
        "content": "<p>one of the things I didn't really convey in the original PR...</p>",
        "id": 227003768,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758062
    },
    {
        "content": "<p>...that I envision this as being a process that people can contribute to</p>",
        "id": 227003804,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758080
    },
    {
        "content": "<p>i.e., I was trying to skech out what the structure of the document would look like, but not at all what its complete contents would be :)</p>",
        "id": 227003869,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758093
    },
    {
        "content": "<p>anyway you can see some of my in progress writing <a href=\"https://nikomatsakis.github.io/wg-async-foundations/\">on my fork</a></p>",
        "id": 227003910,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758115
    },
    {
        "content": "<p>but if folks are excited to contribute to the doc, please leave comments and/or ping me and <span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> to discuss :)</p>",
        "id": 227003961,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758150
    },
    {
        "content": "<p>my hope is that we can have a first draft of the doc by... mid march? and then check in on it quarterly</p>",
        "id": 227003986,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758163
    },
    {
        "content": "<p>to give an idea of timeline :)</p>",
        "id": 227004011,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758179
    },
    {
        "content": "<p>/me done typing</p>",
        "id": 227004022,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758184
    },
    {
        "content": "<p>ok one more thing :)</p>",
        "id": 227004144,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758224
    },
    {
        "content": "<p>one thing I was adding that was missing in the original is \"FAQ\" sections on the narratives (see e.g. <a href=\"https://nikomatsakis.github.io/wg-async-foundations/vision/status_quo.html#bob-reads-the-async-book-gets-a-bit-stressed-out\">here</a>)</p>",
        "id": 227004185,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758243
    },
    {
        "content": "<p>although oops that FAQ has a \"bug\" in that the final version (\"Why doesn't the async book send Bob to tokio's tutorial (or other tutorials)?\") doesn't belong in the \"status quo\" narrative imo</p>",
        "id": 227004235,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758274
    },
    {
        "content": "<p>it's more sketching rationale for a proposed solution</p>",
        "id": 227004286,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758288
    },
    {
        "content": "<p>and not observations or evidence</p>",
        "id": 227004299,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758294
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021.2E02.2E19/near/227004185\">said</a>:</p>\n<blockquote>\n<p>one thing I was adding that was missing in the original is \"FAQ\" sections on the narratives (see e.g. <a href=\"https://nikomatsakis.github.io/wg-async-foundations/vision/status_quo.html#bob-reads-the-async-book-gets-a-bit-stressed-out\">here</a>)</p>\n</blockquote>\n<p>Oh I didn't see the little <code>&gt; FAQ</code> there at first, but I do now</p>",
        "id": 227004399,
        "sender_full_name": "tmandry",
        "timestamp": 1613758334
    },
    {
        "content": "<p>maybe a bit subtle :)</p>",
        "id": 227004415,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758348
    },
    {
        "content": "<p>can play with the CSS at some point :)</p>",
        "id": 227004451,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758371
    },
    {
        "content": "<p>Well I'm very excited about the prospect of having a concrete vision for async more broadly</p>",
        "id": 227004490,
        "sender_full_name": "tmandry",
        "timestamp": 1613758389
    },
    {
        "content": "<p>I don't have any updates but popping into say hi and that I am trying to ramp back up on general wg things. Hopefully ill have some more time over the next few months to help out. :)</p>",
        "id": 227004516,
        "sender_full_name": "Lucio Franco",
        "timestamp": 1613758396
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021.2E02.2E19/near/227004490\">said</a>:</p>\n<blockquote>\n<p>Well I'm very excited about the prospect of having a concrete vision for async more broadly</p>\n</blockquote>\n<p>on this topic--</p>",
        "id": 227004628,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758449
    },
    {
        "content": "<p>one of the things I've been debating about is the \"scope\" of this document</p>",
        "id": 227004646,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758458
    },
    {
        "content": "<p>I definitely want to do outreach to the core teams of various runtimes to get their take and contributions</p>",
        "id": 227004670,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758470
    },
    {
        "content": "<p>I've started doing that already</p>",
        "id": 227004674,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758473
    },
    {
        "content": "<p>that's probably where it should start, but I do think that some of the problems we will observe are problems that the <em>Rust org</em> may not be the right ones to solve</p>",
        "id": 227004767,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758512
    },
    {
        "content": "<p>so I imagine that part of the vision will be talking about e.g. \"Sally goes and finds an excellent crate on <a href=\"http://crates.io\">crates.io</a>\" or whatever</p>",
        "id": 227004812,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758531
    },
    {
        "content": "<p>and/or things about the libraries or services Sally is using</p>",
        "id": 227004860,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758546
    },
    {
        "content": "<p>this is where the outreach comes in, I guess, both to convey what seems important and to get feedback on whether that's feasible / makes sense</p>",
        "id": 227004932,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758567
    },
    {
        "content": "<p>makes sense</p>",
        "id": 227004984,
        "sender_full_name": "tmandry",
        "timestamp": 1613758603
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> do you have any plans to eventually ratify/bless the async tenets through e.g. an RFC process?</p>",
        "id": 227005012,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613758623
    },
    {
        "content": "<p>Not quite sure what the process for that should be</p>",
        "id": 227005025,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613758632
    },
    {
        "content": "<p>I've been debating about that :)</p>",
        "id": 227005032,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758636
    },
    {
        "content": "<p>I do want to do <em>something</em> like that, yes</p>",
        "id": 227005042,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758640
    },
    {
        "content": "<p>cool; yeah I don't have a clear idea of what that would be either, but glad the direction is being considered</p>",
        "id": 227005122,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613758677
    },
    {
        "content": "<p>I figured I'd start by iterating on how the doc should look/work and worry about process a bit later</p>",
        "id": 227005127,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758682
    },
    {
        "content": "<p>but it does raise a good question</p>",
        "id": 227005184,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758694
    },
    {
        "content": "<p>\"who are the ultimate decision makers\" -- I view this as a recommendaton for lang team to ratify, and/or libs/tools</p>",
        "id": 227005209,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758713
    },
    {
        "content": "<p>I've kind of been assuming the vision would be a starting point for more concrete/elaborate individual RFCs</p>",
        "id": 227005289,
        "sender_full_name": "tmandry",
        "timestamp": 1613758754
    },
    {
        "content": "<p>but I suppose ratifying the overall vision makes sense</p>",
        "id": 227005312,
        "sender_full_name": "tmandry",
        "timestamp": 1613758765
    },
    {
        "content": "<p>I'm not sure if it does</p>",
        "id": 227005329,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758778
    },
    {
        "content": "<p>well</p>",
        "id": 227005338,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758783
    },
    {
        "content": "<p>so for sure we should \"present\" it and get feedback</p>",
        "id": 227005350,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758790
    },
    {
        "content": "<p>I think ultimately  I would kind of like it if the tenets and things were being laid out more in advance:)</p>",
        "id": 227005433,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758813
    },
    {
        "content": "<p>anyway it doesn't make sense for us to lay out a vision for RFCs that the teams wouldn't agree with ...</p>",
        "id": 227005461,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758825
    },
    {
        "content": "<p>right</p>",
        "id": 227005506,
        "sender_full_name": "tmandry",
        "timestamp": 1613758853
    },
    {
        "content": "<p>(one last thing, I left out the roadmap in my initial PR... but I see that \"roadmap\" as being the concrete steps we're actually thinking of taking in the \"short term\")</p>",
        "id": 227005578,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758887
    },
    {
        "content": "<p>One benefit in particular I see in (somehow) ratifying the tenets is as a tool to prevent re-litigating certain points over and over again on RFCs -- this would give us some base principles to point back to</p>",
        "id": 227005637,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613758917
    },
    {
        "content": "<p>right</p>",
        "id": 227005668,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758924
    },
    {
        "content": "<p>well I certainly think we should continue working on this and perhaps be more explicit about how folks can pitch in</p>",
        "id": 227005721,
        "sender_full_name": "tmandry",
        "timestamp": 1613758950
    },
    {
        "content": "<p>but for now I think we can move on to other topics</p>",
        "id": 227005752,
        "sender_full_name": "tmandry",
        "timestamp": 1613758971
    },
    {
        "content": "<p>agreed on both counts :)</p>",
        "id": 227005763,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758973
    },
    {
        "content": "<p>all 3, I guess</p>",
        "id": 227005772,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613758978
    },
    {
        "content": "<p>Okay, a final update on our RFCs:</p>\n<ul>\n<li><a href=\"https://github.com/rust-lang/rfcs/pull/2996#issuecomment-780984524\">Stream RFC finished FCP</a></li>\n<li><a href=\"https://github.com/rust-lang/rfcs/pull/3014#issuecomment-777746485\"><code>must_not_suspend</code> RFC entered FCP</a></li>\n</ul>",
        "id": 227005807,
        "sender_full_name": "tmandry",
        "timestamp": 1613758997
    },
    {
        "content": "<p>Thanks so much to <span class=\"user-mention\" data-user-id=\"225192\">@Nell Shamrell-Harrington</span> and <span class=\"user-mention\" data-user-id=\"248777\">@Bhargav Voleti</span> for pushing on these</p>",
        "id": 227005821,
        "sender_full_name": "tmandry",
        "timestamp": 1613759010
    },
    {
        "content": "<p>I guess the former needs to be merged</p>",
        "id": 227005825,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759013
    },
    {
        "content": "<p>I can do that</p>",
        "id": 227005834,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759019
    },
    {
        "content": "<p>Do we have a tracking issue already?</p>",
        "id": 227005850,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759030
    },
    {
        "content": "<p>I opened one for the trait impl</p>",
        "id": 227005872,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759042
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/79024\">https://github.com/rust-lang/rust/issues/79024</a></p>",
        "id": 227005946,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759059
    },
    {
        "content": "<p>ah, this covers the RFC too</p>",
        "id": 227005965,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759072
    },
    {
        "content": "<p>btw -- I don't think this impacts this group in particular -- but the <a class=\"stream\" data-stream-id=\"268952\" href=\"/#narrow/stream/268952-edition-2021\">#edition 2021</a> effort is well underway. We're collecting into the <a href=\"https://docs.google.com/spreadsheets/d/1chZ2SL9T444nvU9al1kQ7TJMwC3IVQQV2xIv1HWGQ_k/edit#gid=0\">2021 Edition Tracking Doc</a> lists of planned changes. If you think there are items that should be included, drop a comment in there. Mind you that at this point the idea should probably be well underway already.</p>",
        "id": 227006013,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759098
    },
    {
        "content": "<p>Moving on, we have one new issue to triage</p>",
        "id": 227006132,
        "sender_full_name": "tmandry",
        "timestamp": 1613759153
    },
    {
        "content": "<h2>Make async futures <code>Unpin</code> if they don't borrow anything across <code>.await</code>s <a href=\"https://github.com/rust-lang/rust/issues/82187\">#82187</a></h2>",
        "id": 227006149,
        "sender_full_name": "tmandry",
        "timestamp": 1613759160
    },
    {
        "content": "<p>hmm, I think the plan of record was not to do this, for the reason given in the first comment</p>",
        "id": 227006242,
        "sender_full_name": "tmandry",
        "timestamp": 1613759208
    },
    {
        "content": "<p>(it makes it too easy to make breaking changes)</p>",
        "id": 227006253,
        "sender_full_name": "tmandry",
        "timestamp": 1613759215
    },
    {
        "content": "<p>looks like there's discussion around making an explicit annotation that it will always be <code>Unpin</code>, and enforcing at compile time</p>",
        "id": 227006408,
        "sender_full_name": "tmandry",
        "timestamp": 1613759288
    },
    {
        "content": "<p>I think it's fine to work on a design proposal here</p>",
        "id": 227006456,
        "sender_full_name": "tmandry",
        "timestamp": 1613759309
    },
    {
        "content": "<p>nothing actionable for us right now, I don't think</p>",
        "id": 227006470,
        "sender_full_name": "tmandry",
        "timestamp": 1613759319
    },
    {
        "content": "<p>Okay, I think that wraps up everything we have to talk about today</p>",
        "id": 227006691,
        "sender_full_name": "tmandry",
        "timestamp": 1613759423
    },
    {
        "content": "<p>Oh, one last thing that seems important</p>",
        "id": 227006717,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759434
    },
    {
        "content": "<p>there's conversations ongoing about opening the merge window for breaking changes for various futures-rs libraries</p>",
        "id": 227006773,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759465
    },
    {
        "content": "<p>those could probably use some eyes before we commit to making any changes</p>",
        "id": 227006828,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759494
    },
    {
        "content": "<p>is that what was being discussed in <a class=\"stream-topic\" data-stream-id=\"187312\" href=\"/#narrow/stream/187312-wg-async-foundations/topic/futures-core.201.2E0.2E0.20.2F.20futures.200.2E4.2E0\">#wg-async-foundations &gt; futures-core 1.0.0 / futures 0.4.0</a> ?</p>",
        "id": 227006833,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759495
    },
    {
        "content": "<p>yes</p>",
        "id": 227006839,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759499
    },
    {
        "content": "<p>I haven't really caught up with that yet</p>",
        "id": 227006843,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759500
    },
    {
        "content": "<p>I want to ensure if we decide to make breaking changes, we do so consciously and have a good justification to -- more eyes on this is probably a good idea</p>",
        "id": 227006962,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759541
    },
    {
        "content": "<p>(anyway, that's it)</p>",
        "id": 227007186,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613759632
    },
    {
        "content": "<p>thanks--</p>",
        "id": 227007193,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759638
    },
    {
        "content": "<p>one challenge with those libraries is that the set of decision makers is not as clear as I would like :(</p>",
        "id": 227007252,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759648
    },
    {
        "content": "<p>we should discuss <em>that</em> too</p>",
        "id": 227007275,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759656
    },
    {
        "content": "<p>I see them as falling under lang/libs jurisdiction probably, ultimately</p>",
        "id": 227007300,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759668
    },
    {
        "content": "<p>lang insofar as they represent \"core things\" like Stream</p>",
        "id": 227007322,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759683
    },
    {
        "content": "<p>but I think these more general teams aren't always the best decision makers in cases like these</p>",
        "id": 227007341,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759696
    },
    {
        "content": "<p>well let me rephrase that</p>",
        "id": 227007383,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759713
    },
    {
        "content": "<p>they're not tracing super closely, but this is maybe good</p>",
        "id": 227007403,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759724
    },
    {
        "content": "<p>since big chanes then require a pretty good write-up and justification to help people with relatively little context understand what's going on</p>",
        "id": 227007429,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1613759741
    },
    {
        "content": "<p>That does (to me) open the question of how much is delegated to working groups. Can the working group be empowered with decision making around the crates that fall within that group? It seems normally yes, but if there are exceptions, it'd probably help to know _when_ something is an exception and needs to be escalated.</p>",
        "id": 227007790,
        "sender_full_name": "Sean McArthur",
        "timestamp": 1613759893
    },
    {
        "content": "<p>anyway, apologies for tacking on that point there at the end. Thanks for running the meeting <span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span>!</p>",
        "id": 227008494,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1613760237
    },
    {
        "content": "<p>no worries, it's an important thing to talk about</p>",
        "id": 227013380,
        "sender_full_name": "tmandry",
        "timestamp": 1613762198
    }
]
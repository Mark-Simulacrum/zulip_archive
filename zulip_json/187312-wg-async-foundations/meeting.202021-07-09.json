[
    {
        "content": "<p>Hey <span class=\"user-group-mention\" data-user-group-id=\"1172\">@WG-async-foundations</span>! <span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> is out today, I just remembered.</p>",
        "id": 245469868,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850381
    },
    {
        "content": "<p>Let's kick off with a few minutes for </p>\n<h1>Announcements</h1>",
        "id": 245469880,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850392
    },
    {
        "content": "<ul>\n<li>I opened <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/222\">wg-async-foundations#222</a>; I am attempting to incorporate the comments from the hackmd and diagram and keep that \"live updated\".</li>\n</ul>",
        "id": 245469951,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850448
    },
    {
        "content": "<p>Anything else exciting going on?</p>",
        "id": 245469977,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850462
    },
    {
        "content": "<ul>\n<li>The US of America declared its independence 2021-1776 years + a few days ago. <span aria-label=\"fireworks\" class=\"emoji emoji-1f386\" role=\"img\" title=\"fireworks\">:fireworks:</span></li>\n</ul>",
        "id": 245470050,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850484
    },
    {
        "content": "<ul>\n<li><span class=\"user-mention\" data-user-id=\"421986\">@Eric Holk</span> is here, which is fun for me. Hi Eric!</li>\n</ul>",
        "id": 245470110,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850517
    },
    {
        "content": "<p>Hi!</p>",
        "id": 245470130,
        "sender_full_name": "eholk",
        "timestamp": 1625850524
    },
    {
        "content": "<p>I was trying to view the skill tree(s)? linked to the repo and I can't a link where the tree(s) are rendered.  Can you point me in the right direction?</p>",
        "id": 245470142,
        "sender_full_name": "Doc Jones",
        "timestamp": 1625850531
    },
    {
        "content": "<p>I'm kind of lurking and trying to get up to speed on the current state of async with the hope of contributing more.</p>",
        "id": 245470183,
        "sender_full_name": "eholk",
        "timestamp": 1625850548
    },
    {
        "content": "<p>The skill tree is kind of outdated, I replaced it with <a href=\"http://smallcultfollowing.com/async-harmonic-synthesis.svg\">this manually constructed diagram</a> for now</p>",
        "id": 245470198,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850553
    },
    {
        "content": "<p>In some personal news: I've successfully moved countries! I've been pretty inactive for the past few months, but expect to become more active around the working group again ~ soon ~ (:</p>",
        "id": 245470219,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625850566
    },
    {
        "content": "<p>I do hope to bring it back into skill-tree format, hopefully extending that tool to produce prettier output :)</p>",
        "id": 245470252,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850582
    },
    {
        "content": "<p>more like the diagram</p>",
        "id": 245470258,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850586
    },
    {
        "content": "<p>If anybody would be into collaborating on that</p>",
        "id": 245470296,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850602
    },
    {
        "content": "<p>I would be <em>so excited</em></p>",
        "id": 245470336,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850605
    },
    {
        "content": "<p>OK, let's sync up</p>",
        "id": 245470375,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850624
    },
    {
        "content": "<p><a href=\"https://hackmd.io/S8eYagcPSnezRmTdEwyB4Q\">Weekly meeting hackmd</a></p>",
        "id": 245470408,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850646
    },
    {
        "content": "<p>Agenda is usually:</p>\n<ul>\n<li>Triage</li>\n<li>Vision doc</li>\n</ul>",
        "id": 245470436,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850664
    },
    {
        "content": "<p>in some order</p>",
        "id": 245470443,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850666
    },
    {
        "content": "<p>let's do it in that order</p>",
        "id": 245470450,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850669
    },
    {
        "content": "<h1>Triage</h1>",
        "id": 245470455,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850670
    },
    {
        "content": "<p>No <a href=\"https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues\">untriaged issues</a> this week!</p>",
        "id": 245470475,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850684
    },
    {
        "content": "<p>Let's cast an eye on the <a href=\"https://github.com/orgs/rust-lang/projects/2\">project board</a></p>",
        "id": 245470615,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850736
    },
    {
        "content": "<p>we've not seen a lot of motion here lately</p>",
        "id": 245470744,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850797
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"225192\">@Nell Shamrell-Harrington</span> any updates on <a href=\"https://github.com/rust-lang/rust/issues/80658\">#80658</a>?</p>",
        "id": 245470763,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850809
    },
    {
        "content": "<p>I don't think we'll go through the on-deck issues in detail, but let me ask whether anybody here is looking for something to hack on</p>",
        "id": 245470813,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850836
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"421986\">@Eric Holk</span> I have a good one for you if you want to get into rustc hacking :)</p>",
        "id": 245470870,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850847
    },
    {
        "content": "<p>Yeah, I'd love to!</p>",
        "id": 245470885,
        "sender_full_name": "eholk",
        "timestamp": 1625850857
    },
    {
        "content": "<p>Really? :)</p>",
        "id": 245470898,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850862
    },
    {
        "content": "<p>That'd be great, there's one issue in particular  that will take some tricky work</p>",
        "id": 245470914,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850872
    },
    {
        "content": "<p>but would be high impact I think</p>",
        "id": 245470917,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850875
    },
    {
        "content": "<p>let me find it</p>",
        "id": 245470926,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850876
    },
    {
        "content": "<p>Cool. I may be slow getting started, since I forgot most of what I know about rustc, but this will be a good way to learn.</p>",
        "id": 245470964,
        "sender_full_name": "eholk",
        "timestamp": 1625850900
    },
    {
        "content": "<p>We could setup a time to chat about it</p>",
        "id": 245470988,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850914
    },
    {
        "content": "<p>Sounds good</p>",
        "id": 245470998,
        "sender_full_name": "eholk",
        "timestamp": 1625850920
    },
    {
        "content": "<p>Oh, side note: <a href=\"https://github.com/rust-lang/rust/issues/76168\">https://github.com/rust-lang/rust/issues/76168</a> is mabe fixed ...?</p>",
        "id": 245471002,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850921
    },
    {
        "content": "<p>I fixed an ICE like that recently</p>",
        "id": 245471015,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850929
    },
    {
        "content": "<p>nope</p>",
        "id": 245471060,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625850961
    },
    {
        "content": "<p>oh, ok, so <span class=\"user-mention\" data-user-id=\"421986\">@Eric Holk</span> <a href=\"https://github.com/rust-lang/rust/issues/57017\">https://github.com/rust-lang/rust/issues/57017</a> is the issue I was thinking of</p>",
        "id": 245471178,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851019
    },
    {
        "content": "<p>it's a big of a complex one, it's probably more like something we could try to peel off some of the cases</p>",
        "id": 245471197,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851028
    },
    {
        "content": "<p>we had a big write-up about this at some point</p>",
        "id": 245471227,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851049
    },
    {
        "content": "<p>ah <a href=\"https://github.com/rust-lang/rust/issues/69663\">https://github.com/rust-lang/rust/issues/69663</a></p>",
        "id": 245471277,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851075
    },
    {
        "content": "<p>that's the general tracing issue</p>",
        "id": 245471281,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851080
    },
    {
        "content": "<p>anyway, I'll leave it for now</p>",
        "id": 245471367,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851109
    },
    {
        "content": "<p>Ah, so is 57017 a specific instance of 69663?</p>",
        "id": 245471369,
        "sender_full_name": "eholk",
        "timestamp": 1625851110
    },
    {
        "content": "<p>yes, and we had a hackmd somewhere with notes from a call where we dug into this</p>",
        "id": 245471383,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851120
    },
    {
        "content": "<p>I'm trying to find it</p>",
        "id": 245471392,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851124
    },
    {
        "content": "<p>but I'll do it later</p>",
        "id": 245471397,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851126
    },
    {
        "content": "<p>remind me :)</p>",
        "id": 245471399,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851128
    },
    {
        "content": "<p>Sounds good</p>",
        "id": 245471403,
        "sender_full_name": "eholk",
        "timestamp": 1625851131
    },
    {
        "content": "<p>alternatively, I could give you some easier ones to start</p>",
        "id": 245471407,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851132
    },
    {
        "content": "<p>That's okay too :)</p>",
        "id": 245471425,
        "sender_full_name": "eholk",
        "timestamp": 1625851140
    },
    {
        "content": "<p>I've encountered this one and it is awfully confusing when it happens <a href=\"https://github.com/rust-lang/rust/issues/71723\">https://github.com/rust-lang/rust/issues/71723</a> :)</p>",
        "id": 245471447,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851155
    },
    {
        "content": "<p>I'll read over the bug and try to get a sense for what it is, and maybe we can chat some more about it afterwards?</p>",
        "id": 245471458,
        "sender_full_name": "eholk",
        "timestamp": 1625851160
    },
    {
        "content": "<p>but let's just sync you + me later on</p>",
        "id": 245471465,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851164
    },
    {
        "content": "<p>perfect</p>",
        "id": 245471466,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851165
    },
    {
        "content": "<p>Sounds good</p>",
        "id": 245471483,
        "sender_full_name": "eholk",
        "timestamp": 1625851174
    },
    {
        "content": "<h1>Vision document</h1>",
        "id": 245471485,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851175
    },
    {
        "content": "<p>So I think there are two useful things to talk about here</p>",
        "id": 245471495,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851182
    },
    {
        "content": "<ul>\n<li>Pending PRs, first off</li>\n</ul>",
        "id": 245471500,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851185
    },
    {
        "content": "<ul>\n<li>Next steps around shiny future and how to proceed</li>\n</ul>",
        "id": 245471507,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851191
    },
    {
        "content": "<h1>status quo: Alan missing C# async <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/214\">wg-async-foundations#214</a></h1>",
        "id": 245471615,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851247
    },
    {
        "content": "<p>Last time we said this was basically ready to merge but for some tweaks from <span class=\"user-mention\" data-user-id=\"116114\">@Paul Faria</span></p>",
        "id": 245471644,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851266
    },
    {
        "content": "<p>I think those got made</p>",
        "id": 245471648,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851269
    },
    {
        "content": "<p>So I'm just gonna merge this</p>",
        "id": 245471672,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851289
    },
    {
        "content": "<h1>Add src/vision/status_quo/barbara_polls_a_mutex.md <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/210\">wg-async-foundations#210</a></h1>",
        "id": 245471710,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851316
    },
    {
        "content": "<p>No motion here, <span class=\"user-mention\" data-user-id=\"224872\">@rylev</span> had some suggestions, but the author didn't follow up</p>",
        "id": 245471781,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851335
    },
    {
        "content": "<p>I'm inclined to just merge and call it a day :)</p>",
        "id": 245471793,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851343
    },
    {
        "content": "<h1>status_quo: add \"variant Go\", \"alan builds a task scheduler\" <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/209\">wg-async-foundations#209</a></h1>",
        "id": 245471865,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851391
    },
    {
        "content": "<p>There was quite a bit of iteration</p>",
        "id": 245471878,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851403
    },
    {
        "content": "<p>It looks like it hasn't changed since May</p>",
        "id": 245471902,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851414
    },
    {
        "content": "<p>I'm again inclined to just merge at this point, since we're trying to wrap up status quo stories</p>",
        "id": 245472009,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851456
    },
    {
        "content": "<p>imperfect or not</p>",
        "id": 245472012,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851458
    },
    {
        "content": "<p>ok, done. :)</p>",
        "id": 245472119,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851520
    },
    {
        "content": "<p>We're going to need a PR adding these 3 stories to SUMMARY.md</p>",
        "id": 245472144,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851530
    },
    {
        "content": "<p>Everyone is quiet, folks still arond? :)</p>",
        "id": 245472158,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851540
    },
    {
        "content": "<p>If so, let's discuss </p>\n<h1>Next steps around shiny future and how to proceed</h1>",
        "id": 245472183,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851552
    },
    {
        "content": "<p>One thing I realized in working on this latest draft is that it offers some clearer paths -- i.e., I've kind of broken up the sections into <em>relatively</em> independent chunks, and I've tried to identify the big unknowns or sources of controversy. I don't think I'm quite done there but I'm wodnering about having some focused discussions on particular points.</p>",
        "id": 245472332,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851602
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245472144\">said</a>:</p>\n<blockquote>\n<p>We're going to need a PR adding these 3 stories to SUMMARY.md</p>\n</blockquote>\n<p>I can do this since I need to correct the last one based on filenames vs titles.</p>",
        "id": 245472401,
        "sender_full_name": "Doc Jones",
        "timestamp": 1625851642
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245471793\">said</a>:</p>\n<blockquote>\n<p>I'm inclined to just merge and call it a day :)</p>\n</blockquote>\n<p>In such  cases, I'd first ping the author (they may have just forgotten) first</p>",
        "id": 245472444,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625851662
    },
    {
        "content": "<p>I also want to put a bit more effort into the <em>experiences</em> and discuss those -- it seems like that is what's most important to me, is getting alignment on how we want using async rust to feel. I'm wondering how to capture some of the tradeoffs we've seen arising (e.g., <span class=\"user-mention\" data-user-id=\"348152\">@Dario Nieuwenhuis</span> has pointed out some values -- like explicitness -- that I'm not sure I share to the full degree that they do)</p>",
        "id": 245472453,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851666
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400241\">Zeeshan Ali</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245472444\">said</a>:</p>\n<blockquote>\n<p>In such  cases, I'd first ping the author (they may have just forgotten) first</p>\n</blockquote>\n<p>I merged instead. I did ping and ask for follow-up PRs if they wanted to produce them.</p>",
        "id": 245472593,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851721
    },
    {
        "content": "<p>(which would be welcome!)</p>",
        "id": 245472624,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851737
    },
    {
        "content": "<p>I guess I'd like to hear from people around how <em>they</em> would like to participate in the shiny future discussions-- I basically imagine either 1:1 or some group brainstorming / discussions. Both seem viable, and they're not exclusive.</p>",
        "id": 245472812,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851825
    },
    {
        "content": "<p>I've also added some thoughts on <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/222\">wg-async-foundations#222</a>, e.g., a request for people to do coherent reviews instead of peacemeal comments and avoid tons of back/forth. Another place where suggestions on how to make the PR most productive would be welcome.</p>",
        "id": 245472902,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851864
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"394977\">Doc Jones</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245472401\">said</a>:</p>\n<blockquote>\n<p>I can do this since I need to correct the last one based on filenames vs titles.</p>\n</blockquote>\n<p>(thanks!)</p>",
        "id": 245473076,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851933
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245472812\">said</a>:</p>\n<blockquote>\n<p>I guess I'd like to hear from people around how <em>they</em> would like to participate in the shiny future discussions-- I basically imagine either 1:1 or some group brainstorming / discussions. Both seem viable, and they're not exclusive.</p>\n</blockquote>\n<p>can't say for others but for me at least that's actually the best way to contribute here.</p>",
        "id": 245473126,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625851957
    },
    {
        "content": "<p>which is</p>",
        "id": 245473155,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625851973
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245472812\">said</a>:</p>\n<blockquote>\n<p>I guess I'd like to hear from people around how <em>they</em> would like to participate in the shiny future discussions-- I basically imagine either 1:1 or some group brainstorming / discussions. Both seem viable, and they're not exclusive.</p>\n</blockquote>\n<p>both work for me -- though also been considering writing a post or two -- maybe that could be helpful too?</p>",
        "id": 245473305,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625852045
    },
    {
        "content": "<p>Yes, posts are great</p>",
        "id": 245473346,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852071
    },
    {
        "content": "<p>One thing I noticed while poking at the doc today that's bugging me a bit</p>",
        "id": 245473395,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852106
    },
    {
        "content": "<p>one of the key ideas underlying this whole approach is that we should move away from \"poll functions\" and towards <code>async fn</code> in traits</p>",
        "id": 245473440,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852143
    },
    {
        "content": "<p>I'd try to be available for both kinds of meetings. I think 1:1s are good for going deeper, but group discussions are good for getting wider alignment.</p>",
        "id": 245473451,
        "sender_full_name": "Matthias247",
        "timestamp": 1625852150
    },
    {
        "content": "<p>\"some group brainstorming / discussions\"</p>\n<p>Has my vote.  The struggle bus has bus stops at these locations.</p>",
        "id": 245473517,
        "sender_full_name": "Doc Jones",
        "timestamp": 1625852171
    },
    {
        "content": "<p>The \"inline async functions\" is one approach to that, it has some pros/cons, but it's at least a way to produce code very similar to what we are doing now.</p>",
        "id": 245473523,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852175
    },
    {
        "content": "<p>However, it doesn't allow you to reproduce the <code>Fn/FnMut/FnOnce</code> hierarchy</p>",
        "id": 245473553,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852201
    },
    {
        "content": "<p>Really, <code>AsyncFnOnce</code> and <code>Async</code>/<code>Future</code> are the same thing, afaict</p>",
        "id": 245473565,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852212
    },
    {
        "content": "<p>I had some more docs around this topic also on my TODO list - but my changes to get to those at the moment are rather minimal due to other responsibilities</p>",
        "id": 245473617,
        "sender_full_name": "Matthias247",
        "timestamp": 1625852247
    },
    {
        "content": "<p>I wrote about this <a href=\"https://nikomatsakis.github.io/wg-async-foundations/vision/harmonic/portable_generic_code/function.html\">here</a></p>",
        "id": 245473622,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852256
    },
    {
        "content": "<p>I was thinking a bit about the idea that has been floated from time to time of having a kind of \"fixed max size\" for futures</p>",
        "id": 245473661,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852280
    },
    {
        "content": "<p>(perhaps tunable or configurable)</p>",
        "id": 245473706,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852290
    },
    {
        "content": "<p>(actually I should port over some more notes into the \"dyn async fn in traits\", I realize I left a bunch out)</p>",
        "id": 245473760,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852324
    },
    {
        "content": "<p>anyway, one thing I was wondeing, <span class=\"user-mention\" data-user-id=\"204219\">@Matthias247</span>, have you ever done profiling of the size of futures in e.g. production code within amazon?</p>",
        "id": 245473797,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852345
    },
    {
        "content": "<p>(cc <span class=\"user-mention\" data-user-id=\"125250\">@Wesley Wiser</span>, same question, different company)</p>",
        "id": 245473814,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852356
    },
    {
        "content": "<blockquote>\n<p>nikomatsakis: However, it doesn't allow you to reproduce the Fn/FnMut/FnOnce hierarchy<br>\nnikomatsakis: Really, AsyncFnOnce and Async/Future are the same thing, afaict</p>\n</blockquote>\n<p>It's something I thought about too. Would be great if one could write <code>async fn myfunc(callback: impl AsyncFnOnce)</code> and get exactly the same semantics as with synchronous functions. It isn't really that easy with passing the current version of <code>Future</code> due to lifetime differences.</p>",
        "id": 245473817,
        "sender_full_name": "Matthias247",
        "timestamp": 1625852358
    },
    {
        "content": "<p>I imagine some of the existing compiler flags would tell you, but I'm not sure how much grepping and interpretation is required (<span class=\"user-mention\" data-user-id=\"116083\">@pnkfelix</span> might know)</p>",
        "id": 245473879,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852402
    },
    {
        "content": "<p>(really same question to anyone :)</p>",
        "id": 245473924,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852408
    },
    {
        "content": "<p>I'm thinking of <code>rustc -Zprint-type-sizes=yes</code></p>",
        "id": 245473972,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852445
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"204219\">Matthias247</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245473817\">said</a>:</p>\n<blockquote>\n<p>Would be great if one could write <code>async fn myfunc(callback: impl AsyncFnOnce)</code> and get exactly the same semantics as with synchronous functions. It isn't really that easy with passing the current version of <code>Future</code> due to lifetime differences.</p>\n</blockquote>\n<p>I don't quite understand what you mean by this, can you elaborate a bit?</p>",
        "id": 245474032,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852487
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"204219\">Matthias247</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245473451\">said</a>:</p>\n<blockquote>\n<p>I'd try to be available for both kinds of meetings. I think 1:1s are good for going deeper, but group discussions are good for getting wider alignment.</p>\n</blockquote>\n<p>I guess the question is how to structure group discussions to ensure they are productive. I think that the groupings may be a good way. I'll think about it. I'd like to try and schedule some for next week.</p>",
        "id": 245474076,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852510
    },
    {
        "content": "<blockquote>\n<p>anyway, one thing I was wondeing, @Matthias247, have you ever done profiling of the size of futures in e.g. production code within amazon?</p>\n</blockquote>\n<p>I haven't done for amazon, since my main project has mostly a  mix of poll function adapters and <code>#[async_trait]</code> and therefore isn't super suspectible to <code>Future</code> bloat. But I experienced that problem in a  hobby project where I tried to build a pure <code>async fn</code> library for embedded - which is how I initially found the <code>Future</code>-sizing problem and made <span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span> aware of it.</p>\n<p>For amazon, try to get in contact with fgaud@ who I think had recently some findings about it.</p>",
        "id": 245474080,
        "sender_full_name": "Matthias247",
        "timestamp": 1625852512
    },
    {
        "content": "<p>I haven't personally and I'm not sure who else internally at MS might have. I know there has been some investigation to the code size weight of async here but not the size of futures directly.</p>",
        "id": 245474092,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1625852518
    },
    {
        "content": "<p>I remember that e.g. <span class=\"user-mention\" data-user-id=\"224872\">@rylev</span> submitted a story that was based on stack overflow due to very large futures</p>",
        "id": 245474161,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852543
    },
    {
        "content": "<p>Ah that could be.</p>",
        "id": 245474180,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1625852552
    },
    {
        "content": "<p>and I know there was a similar problem that cropped up at Amazon once</p>",
        "id": 245474182,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852554
    },
    {
        "content": "<p>I do think that <code>-Zprint-type-sizes</code> is one option. <span class=\"user-mention\" data-user-id=\"124288\">@oli</span> recently added a different compiler flag that will inform you about <em>moves</em> that surpass a given byte size threshold.</p>",
        "id": 245474229,
        "sender_full_name": "pnkfelix",
        "timestamp": 1625852588
    },
    {
        "content": "<p>i'd be curious to see it</p>",
        "id": 245474267,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852611
    },
    {
        "content": "<p>I guess it takes a bit of doing to figure out, e.g., yo'd want to know which types embed which other types?</p>",
        "id": 245474290,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852623
    },
    {
        "content": "<p>I am imagining now a nice graphviz visualization :)</p>",
        "id": 245474338,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852644
    },
    {
        "content": "<p>Probably relevant for this is Boats' post on <a href=\"https://without.boats/blog/futures-and-segmented-stacks/\">Futures and Segmented Stacks</a></p>",
        "id": 245474430,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625852691
    },
    {
        "content": "<p>One last thing: meeting time</p>",
        "id": 245474432,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852691
    },
    {
        "content": "<p>Yes, segmented stacks are somewhat on my mind as we talk about this...</p>",
        "id": 245474498,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852707
    },
    {
        "content": "<p>I forwarded the question to our team. Will let you know if some has more data-points.</p>",
        "id": 245474529,
        "sender_full_name": "Matthias247",
        "timestamp": 1625852720
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245474338\">said</a>:</p>\n<blockquote>\n<p>I am imagining now a nice graphviz visualization :)</p>\n</blockquote>\n<p>Or one of those fancy treemaps like some disk utilities give you :)</p>\n<p><a href=\"/user_uploads/4715/iXAkeHQm_wAILTbaCdqtkcwI/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/iXAkeHQm_wAILTbaCdqtkcwI/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/iXAkeHQm_wAILTbaCdqtkcwI/image.png\"></a></div>",
        "id": 245474532,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1625852722
    },
    {
        "content": "<p>...also in the discussions around how to manage recursive async fns</p>",
        "id": 245474545,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852734
    },
    {
        "content": "<p>...or async fn in dyn trait :)</p>",
        "id": 245474669,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852763
    },
    {
        "content": "<p>I've been wondering for a while now if we could have a clippy lint similar to <a href=\"https://rust-lang.github.io/rust-clippy/master/#large_enum_variant\"><code>large_enum_variant</code></a> but for Future sizes</p>",
        "id": 245474777,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625852782
    },
    {
        "content": "<p>seems like it would be useful</p>",
        "id": 245475010,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852834
    },
    {
        "content": "<p>Segmented stacks or some other solution for recursive functions would be nice. I've hit this pretty much every time I try to start writing async code.</p>",
        "id": 245475069,
        "sender_full_name": "eholk",
        "timestamp": 1625852875
    },
    {
        "content": "<p>do you meant that you hit compilation errors?</p>",
        "id": 245475201,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852926
    },
    {
        "content": "<p>or do you mean that you hit perf problems because of too many allocations :)</p>",
        "id": 245475217,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852935
    },
    {
        "content": "<p>Compilation errors</p>",
        "id": 245475243,
        "sender_full_name": "eholk",
        "timestamp": 1625852952
    },
    {
        "content": "<p>see also <a href=\"https://nikomatsakis.github.io/wg-async-foundations/vision/harmonic/async_fn_everywhere/recursive_async_fn.html\">https://nikomatsakis.github.io/wg-async-foundations/vision/harmonic/async_fn_everywhere/recursive_async_fn.html</a></p>",
        "id": 245475262,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852963
    },
    {
        "content": "<p>Mostly because the way I play with any new feature is by writing recursive functions</p>",
        "id": 245475272,
        "sender_full_name": "eholk",
        "timestamp": 1625852975
    },
    {
        "content": "<p>the solutions discussed there (e.g., <code>box async fn</code> etc) also apply to manually reducing the size of futures</p>",
        "id": 245475282,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852982
    },
    {
        "content": "<p>heh, ok</p>",
        "id": 245475295,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625852988
    },
    {
        "content": "<p>in general this doesn't seem to come up that much in most discussions I have with people</p>",
        "id": 245475319,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853001
    },
    {
        "content": "<p>Yeah, that was my impression too</p>",
        "id": 245475393,
        "sender_full_name": "eholk",
        "timestamp": 1625853024
    },
    {
        "content": "<p>ok, well, seems good. let's end the meeting for now (can keep chatting async, of course). Comments/reviews on the doc are welcome, and I'll think about scheduling up some group discussion slots around particular topics.</p>",
        "id": 245475530,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853113
    },
    {
        "content": "<p>I plan to keep working on this today and pushing updates, I think</p>",
        "id": 245475547,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853120
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245474432\">said</a>:</p>\n<blockquote>\n<p>One last thing: meeting time</p>\n</blockquote>\n<p>let's talk about this next time?</p>",
        "id": 245475680,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625853174
    },
    {
        "content": "<p>oh, right :) I forgot I never followed up</p>",
        "id": 245476144,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853398
    },
    {
        "content": "<p>tl;dr maybe we should pick a different one :)</p>",
        "id": 245476148,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853403
    },
    {
        "content": "<p>e.g. I know this doesn't work for <span class=\"user-mention\" data-user-id=\"224872\">@rylev</span></p>",
        "id": 245476162,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853410
    },
    {
        "content": "<p>friday evening is paricularly rough for europeans</p>",
        "id": 245476182,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625853422
    },
    {
        "content": "<p>Moving meeting times would be very helpful for me, but I am usually able to catch up async. My involvement in the working group has slowed so I don't want everyone to have to change their plans just for me <span aria-label=\"blush\" class=\"emoji emoji-1f60a\" role=\"img\" title=\"blush\">:blush:</span></p>",
        "id": 245697340,
        "sender_full_name": "rylev",
        "timestamp": 1626101619
    },
    {
        "content": "<p>Heh, I'd also like to not spend my Friday evenings in meetings  -- any other day would be better tbh.</p>",
        "id": 245823841,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1626182671
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"211722\">Yoshua Wuyts</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-09/near/245823841\">said</a>:</p>\n<blockquote>\n<p>Heh, I'd also like to not spend my Friday evenings in meetings  -- any other day would be better tbh.</p>\n</blockquote>\n<p>Saturday?</p>",
        "id": 245824127,
        "sender_full_name": "Doc Jones",
        "timestamp": 1626182815
    },
    {
        "content": "<p>I don't think weekends would work for most people</p>",
        "id": 245824889,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1626183152
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116114\">@Paul Faria</span> I see that you added the \"alan_misses_c_sharp_async.md\" to Summary.md.  Did you add the rest that were merged? If so, thank you and I can remove it  from my todo list.</p>",
        "id": 245826659,
        "sender_full_name": "Doc Jones",
        "timestamp": 1626183974
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"211722\">@Yoshua Wuyts</span> What about some weekday other than Friday?</p>",
        "id": 245841727,
        "sender_full_name": "Emmanuel Antony",
        "timestamp": 1626189857
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"394977\">@Doc Jones</span> I only added it as part of the commit that added alan_misses...md.  So only the one file.</p>",
        "id": 245843181,
        "sender_full_name": "Paul Faria",
        "timestamp": 1626190534
    }
]
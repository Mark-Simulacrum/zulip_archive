[
    {
        "content": "<p>Hi <span class=\"user-group-mention\" data-user-group-id=\"1172\">@WG-async-foundations</span> - Our weekly triage meeting still be starting in about four minutes.</p>",
        "id": 258975682,
        "sender_full_name": "eholk",
        "timestamp": 1635175616
    },
    {
        "content": "<p>Okay, it's 8:30 my time, so let's begin</p>",
        "id": 258976362,
        "sender_full_name": "eholk",
        "timestamp": 1635175855
    },
    {
        "content": "<p>Our agenda for today:</p>\n<ul>\n<li>Announcements<br>\n    - (add items)</li>\n<li>[eholk] New issue <a href=\"https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues\">triage</a></li>\n<li>Discussion on progress/blockers around sprint bugs</li>\n</ul>",
        "id": 258976447,
        "sender_full_name": "eholk",
        "timestamp": 1635175882
    },
    {
        "content": "<p>Let's start with announcements. I don't have anything to announce here, but I'll pause for a moment in case anyone else has anything to announce.</p>",
        "id": 258976522,
        "sender_full_name": "eholk",
        "timestamp": 1635175905
    },
    {
        "content": "<p>Okay, it sounds like no one else has announcements either. Let's move on.</p>",
        "id": 258976834,
        "sender_full_name": "eholk",
        "timestamp": 1635176035
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-topic</p>",
        "id": 258976838,
        "sender_full_name": "eholk",
        "timestamp": 1635176038
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 258976842,
        "sender_full_name": "triagebot",
        "timestamp": 1635176039
    },
    {
        "content": "<p>Okay, next up is new issue triage</p>",
        "id": 258976949,
        "sender_full_name": "eholk",
        "timestamp": 1635176076
    },
    {
        "content": "<p>We have <a href=\"https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues\">no new issues</a>!</p>",
        "id": 258976975,
        "sender_full_name": "eholk",
        "timestamp": 1635176089
    },
    {
        "content": "<p>So I guess this will be a short topic. Let's move on<br>\n<span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-topic</p>",
        "id": 258977050,
        "sender_full_name": "eholk",
        "timestamp": 1635176119
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 258977052,
        "sender_full_name": "triagebot",
        "timestamp": 1635176120
    },
    {
        "content": "<p>The last item is discussing progress/blockers on bugs we're working on for this sprint.</p>",
        "id": 258977122,
        "sender_full_name": "eholk",
        "timestamp": 1635176154
    },
    {
        "content": "<p>I got some time to work on <a href=\"https://github.com/rust-lang/rust/issues/57478\">#57478</a> last week, implementing the new drop tracking algorithm <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> and I worked out.</p>",
        "id": 258977239,
        "sender_full_name": "eholk",
        "timestamp": 1635176188
    },
    {
        "content": "<p>ah, nice</p>",
        "id": 258977328,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176238
    },
    {
        "content": "<p>Progress is going well. I've got all but one of the generator/async-await tests passing, including a new test case for <a href=\"https://github.com/rust-lang/rust/issues/57478\">#57478</a>. <code>addassign-yield.rs</code> still fails, but I'll look into that more today</p>",
        "id": 258977331,
        "sender_full_name": "eholk",
        "timestamp": 1635176240
    },
    {
        "content": "<p>how'd it go?</p>",
        "id": 258977333,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176240
    },
    {
        "content": "<p>did you try any of examples from issues?</p>",
        "id": 258977382,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176262
    },
    {
        "content": "<p>oh, I guess <a href=\"https://github.com/rust-lang/rust/issues/57478\">#57478</a> is that</p>",
        "id": 258977402,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176272
    },
    {
        "content": "<p>so far it only supports straight line control flow, but I think the approach is structured in a way that will make it a lot easier to handle other things</p>",
        "id": 258977461,
        "sender_full_name": "eholk",
        "timestamp": 1635176286
    },
    {
        "content": "<p>I'm connecting something here, actually</p>",
        "id": 258977466,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176289
    },
    {
        "content": "<p>Yes, this case passes now too:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">struct</span> <span class=\"nc\">Foo</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"k\">impl</span><span class=\"w\"> </span><span class=\"o\">!</span><span class=\"nb\">Send</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"w\"> </span><span class=\"p\">{}</span><span class=\"w\"></span>\n\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">_</span>: <span class=\"nc\">impl</span><span class=\"w\"> </span><span class=\"nb\">Send</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"o\">||</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">guard</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">Foo</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nb\">drop</span><span class=\"p\">(</span><span class=\"n\">guard</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"kr\">yield</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">};</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 258977486,
        "sender_full_name": "eholk",
        "timestamp": 1635176303
    },
    {
        "content": "<p>We've been working a new version of the polonius algorithm we call <a href=\"http://polonius.next\">polonius.next</a></p>",
        "id": 258977504,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176310
    },
    {
        "content": "<p>nice!</p>",
        "id": 258977510,
        "sender_full_name": "eholk",
        "timestamp": 1635176321
    },
    {
        "content": "<p>one of the things we found the last time we were digging into it is that it probably needs a notion of \"value goes dead\"</p>",
        "id": 258977518,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176325
    },
    {
        "content": "<p>which we were hoping to avoid :)</p>",
        "id": 258977524,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176331
    },
    {
        "content": "<p>ah, I guess it's not <em>quite</em> the same</p>",
        "id": 258977536,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176335
    },
    {
        "content": "<p>feels \"related\" though</p>",
        "id": 258977578,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176358
    },
    {
        "content": "<p>That sounds related...</p>",
        "id": 258977581,
        "sender_full_name": "eholk",
        "timestamp": 1635176361
    },
    {
        "content": "<p>I've been imprecise with my wording around variables, values, temporaries, places, etc.</p>",
        "id": 258977627,
        "sender_full_name": "eholk",
        "timestamp": 1635176385
    },
    {
        "content": "<p>yeah, it's related, but going dead is more general</p>",
        "id": 258977628,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176385
    },
    {
        "content": "<p>i.e., it happens after the last use of any variable</p>",
        "id": 258977687,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176403
    },
    {
        "content": "<p>last week was a short week for me and I havenâ€™t had time to dig into <a href=\"https://github.com/rust-lang/rust/issues/74256\">#74256</a>, so nothing to report from me</p>",
        "id": 258977719,
        "sender_full_name": "tmandry",
        "timestamp": 1635176416
    },
    {
        "content": "<p>still, there is a distinct notion of being \"live\" (may be actively used) and \"drop-live\" (may be dropped)</p>",
        "id": 258977723,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176417
    },
    {
        "content": "<p>I do wonder if ultimately these will want to be the foundation for the generator analysis</p>",
        "id": 258977763,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176439
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> - do you mean something like using <a href=\"http://polonius.next\">polonius.next</a> to do the generator type analysis?</p>",
        "id": 258977815,
        "sender_full_name": "eholk",
        "timestamp": 1635176469
    },
    {
        "content": "<p>(I haven't done anything on my issue, but I do hope to carve out some time for that)</p>",
        "id": 258977817,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176471
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"421986\">@eholk</span> not entirely sure what I mean; I meant more like \"there might be some common inputs to both\"</p>",
        "id": 258977840,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176491
    },
    {
        "content": "<p>Ah, makes sense</p>",
        "id": 258977854,
        "sender_full_name": "eholk",
        "timestamp": 1635176501
    },
    {
        "content": "<p>One thing I <em>have</em> wondered is whether moving polonius to occur on THIR</p>",
        "id": 258977857,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176504
    },
    {
        "content": "<p>might actually be better than MIR</p>",
        "id": 258977874,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176511
    },
    {
        "content": "<p>anyway, that's a bit down the way</p>",
        "id": 258977928,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176524
    },
    {
        "content": "<p>it's just that MIR plays double duty as an analysis IR + an optimization IR, and I think as a result it does neither job perfectly</p>",
        "id": 258977963,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176540
    },
    {
        "content": "<p>on the other hand, that is its beauty :)</p>",
        "id": 258977990,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176552
    },
    {
        "content": "<p>:)</p>",
        "id": 258978005,
        "sender_full_name": "eholk",
        "timestamp": 1635176559
    },
    {
        "content": "<p>I'll stop now, just musings for now</p>",
        "id": 258978024,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176572
    },
    {
        "content": "<p>but maybe we'll wind up connecting things down the road</p>",
        "id": 258978031,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176577
    },
    {
        "content": "<p>makes me feel good about this overall direction, in any case</p>",
        "id": 258978051,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176585
    },
    {
        "content": "<p>It does feel like we have a lot of circularities in the compiler. It'd be nice to eliminate them, but I suspect the way that works is by merging three or four distinct components/phases into one mega phase, so I'm not sure that's better.</p>",
        "id": 258978094,
        "sender_full_name": "eholk",
        "timestamp": 1635176605
    },
    {
        "content": "<p>The drop tracking stuff I'm doing ends up making three passes over the IR, which is a little sad. The first is <code>ExprUseVisitor</code> to find things that are dropped. Then there's another pass that uses the results of <code>ExprUseVisitor</code> to figure out ranges where things are dropped, and finally there's the existing pass which now consults the drop ranges found in the previous phase.</p>",
        "id": 258978275,
        "sender_full_name": "eholk",
        "timestamp": 1635176682
    },
    {
        "content": "<p>I've tried a few different ways of factoring that though and this one seems to work the best. Sticking with it at least until I get the whole algorithm working seems like a good idea.</p>",
        "id": 258978413,
        "sender_full_name": "eholk",
        "timestamp": 1635176751
    },
    {
        "content": "<p>Anyway, I'm optimistic that by later this week I can have something pretty close to being ready for review.</p>",
        "id": 258978581,
        "sender_full_name": "eholk",
        "timestamp": 1635176820
    },
    {
        "content": "<p>great!</p>",
        "id": 258978612,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176833
    },
    {
        "content": "<p>3 walks of the generator source is probably not a big deal</p>",
        "id": 258978633,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176844
    },
    {
        "content": "<p>(perf wise)</p>",
        "id": 258978655,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176855
    },
    {
        "content": "<p>Yeah.. It doesn't seem like there are many generators (yet)</p>",
        "id": 258978684,
        "sender_full_name": "eholk",
        "timestamp": 1635176865
    },
    {
        "content": "<p>Although async programs probably have a lot more</p>",
        "id": 258978747,
        "sender_full_name": "eholk",
        "timestamp": 1635176884
    },
    {
        "content": "<p>Anyway, that's all I have to update.</p>",
        "id": 258978814,
        "sender_full_name": "eholk",
        "timestamp": 1635176916
    },
    {
        "content": "<p>Does anyone else have anything to discuss?</p>",
        "id": 258978827,
        "sender_full_name": "eholk",
        "timestamp": 1635176923
    },
    {
        "content": "<p>If not, we can wrap up early</p>",
        "id": 258978959,
        "sender_full_name": "eholk",
        "timestamp": 1635176981
    },
    {
        "content": "<p>Not me</p>",
        "id": 258978960,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176982
    },
    {
        "content": "<p>I plan to dig into my item later on</p>",
        "id": 258978973,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176987
    },
    {
        "content": "<p>But I haven't gotten to it yet</p>",
        "id": 258978981,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1635176993
    },
    {
        "content": "<p>(neither)</p>",
        "id": 258978996,
        "sender_full_name": "Yoshua Wuyts [he/they]",
        "timestamp": 1635177000
    },
    {
        "content": "<p>Alright, thanks everyone!</p>",
        "id": 258979068,
        "sender_full_name": "eholk",
        "timestamp": 1635177019
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-meeting</p>",
        "id": 258979077,
        "sender_full_name": "eholk",
        "timestamp": 1635177023
    },
    {
        "content": "<p>Does anyone have something to bring up?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if you're ready to end the meeting.</p>",
        "id": 258979078,
        "sender_full_name": "triagebot",
        "timestamp": 1635177024
    }
]
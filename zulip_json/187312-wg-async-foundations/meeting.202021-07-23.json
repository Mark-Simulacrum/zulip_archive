[
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1172\">@WG-async-foundations</span> meeting!</p>",
        "id": 247004123,
        "sender_full_name": "tmandry",
        "timestamp": 1627059668
    },
    {
        "content": "<p>Agenda</p>\n<ul>\n<li>Announcements / open forum</li>\n<li>Triage</li>\n<li>Ongoing work updates</li>\n</ul>",
        "id": 247004305,
        "sender_full_name": "tmandry",
        "timestamp": 1627059768
    },
    {
        "content": "<p>Are there any announcements?</p>",
        "id": 247004333,
        "sender_full_name": "tmandry",
        "timestamp": 1627059787
    },
    {
        "content": "<p>None from me.</p>",
        "id": 247004377,
        "sender_full_name": "eholk",
        "timestamp": 1627059816
    },
    {
        "content": "<p>Niko and I have been talking about <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/222\">wg-async-foundations#222</a> aka \"Harmonic Synthesis alpha\", I think we should merge it soon</p>",
        "id": 247004586,
        "sender_full_name": "tmandry",
        "timestamp": 1627059896
    },
    {
        "content": "<p>Which isn't to say it's done or perfect, hence alpha, but represents a good starting point</p>",
        "id": 247004666,
        "sender_full_name": "tmandry",
        "timestamp": 1627059928
    },
    {
        "content": "<p>See e.g. discussions on <a href=\"https://nikomatsakis.github.io/wg-async-foundations/vision/deliverables.html\">deliverables</a> that might be of interest</p>",
        "id": 247004703,
        "sender_full_name": "tmandry",
        "timestamp": 1627059949
    },
    {
        "content": "<p>(Niko is out today, btw)</p>",
        "id": 247004788,
        "sender_full_name": "tmandry",
        "timestamp": 1627059973
    },
    {
        "content": "<p>One thing we discussed is adding narratives from the shiny future to contrast with the status quo, like we originally planned</p>",
        "id": 247004824,
        "sender_full_name": "tmandry",
        "timestamp": 1627060001
    },
    {
        "content": "<p>I think this would be worth doing, since it represents a different \"perspective\" on the future from the \"user guide from the future,\" for instance</p>",
        "id": 247004894,
        "sender_full_name": "tmandry",
        "timestamp": 1627060047
    },
    {
        "content": "<p>Anyway, looks like we can move on</p>",
        "id": 247004952,
        "sender_full_name": "tmandry",
        "timestamp": 1627060075
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-topic</p>",
        "id": 247004962,
        "sender_full_name": "tmandry",
        "timestamp": 1627060078
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 247004964,
        "sender_full_name": "triagebot",
        "timestamp": 1627060079
    },
    {
        "content": "<p>I think adding the shiny futures stories seems like a good idea</p>",
        "id": 247005014,
        "sender_full_name": "eholk",
        "timestamp": 1627060088
    },
    {
        "content": "<p>Niko had offered to outline some as a starting point at least</p>",
        "id": 247005087,
        "sender_full_name": "tmandry",
        "timestamp": 1627060127
    },
    {
        "content": "<p>Okay, looking like it's just you and me :)</p>",
        "id": 247005124,
        "sender_full_name": "tmandry",
        "timestamp": 1627060147
    },
    {
        "content": "<p>Seems like it :)</p>",
        "id": 247005130,
        "sender_full_name": "eholk",
        "timestamp": 1627060153
    },
    {
        "content": "<p>That reminds me, we also discussed picking a different time that's more Europe-friendly</p>",
        "id": 247005139,
        "sender_full_name": "tmandry",
        "timestamp": 1627060159
    },
    {
        "content": "<p>Yeah, there was some discussion about that a week or two ago</p>",
        "id": 247005162,
        "sender_full_name": "eholk",
        "timestamp": 1627060176
    },
    {
        "content": "<p>I think we will do this, but we didn't get to it before Niko went on vacation so it might potentially take a couple of weeks <span aria-label=\"sad\" class=\"emoji emoji-2639\" role=\"img\" title=\"sad\">:sad:</span></p>",
        "id": 247005279,
        "sender_full_name": "tmandry",
        "timestamp": 1627060220
    },
    {
        "content": "<p>anyway</p>",
        "id": 247005344,
        "sender_full_name": "tmandry",
        "timestamp": 1627060248
    },
    {
        "content": "<p>Sounds good to me. I'm happy to meet earlier if it means Europe can come.</p>",
        "id": 247005349,
        "sender_full_name": "eholk",
        "timestamp": 1627060253
    },
    {
        "content": "<h1><a href=\"https://github.com/search?q=org%3Arust-lang+is%3Aissue+label%3AA-async-await+is%3Aopen+-label%3AAsyncAwait-Triaged&amp;type=Issues\">New issues</a></h1>",
        "id": 247005382,
        "sender_full_name": "tmandry",
        "timestamp": 1627060266
    },
    {
        "content": "<h2>Moved value is considered as held across an await in async fn <a href=\"https://github.com/rust-lang/rust/issues/87309\">#87309</a></h2>",
        "id": 247005410,
        "sender_full_name": "tmandry",
        "timestamp": 1627060281
    },
    {
        "content": "<p>This sounds like the sort of thing you're working on, <span class=\"user-mention\" data-user-id=\"421986\">@eholk</span></p>",
        "id": 247005469,
        "sender_full_name": "tmandry",
        "timestamp": 1627060304
    },
    {
        "content": "<p>I was just going to say the same thing :)</p>",
        "id": 247005486,
        "sender_full_name": "eholk",
        "timestamp": 1627060313
    },
    {
        "content": "<p>From the title, it sounds like another instance of <a href=\"https://github.com/rust-lang/rust/issues/69663\">https://github.com/rust-lang/rust/issues/69663</a></p>",
        "id": 247005515,
        "sender_full_name": "eholk",
        "timestamp": 1627060322
    },
    {
        "content": "<p>that's what I was looking for</p>",
        "id": 247005622,
        "sender_full_name": "tmandry",
        "timestamp": 1627060368
    },
    {
        "content": "<p>The test case looks really similar to the one in 57017, with an <code>await</code> inside a <code>match</code>.</p>",
        "id": 247005687,
        "sender_full_name": "eholk",
        "timestamp": 1627060409
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/57017\">https://github.com/rust-lang/rust/issues/57017</a></p>",
        "id": 247005723,
        "sender_full_name": "eholk",
        "timestamp": 1627060430
    },
    {
        "content": "<p>pro tip: You can prefix a number with # in this zulip and it will link to the rust-lang/rust issue :)</p>",
        "id": 247005820,
        "sender_full_name": "tmandry",
        "timestamp": 1627060460
    },
    {
        "content": "<p>oh, nice!</p>",
        "id": 247005832,
        "sender_full_name": "eholk",
        "timestamp": 1627060468
    },
    {
        "content": "<p>it does look similar, I'll comment on the issue</p>",
        "id": 247005899,
        "sender_full_name": "tmandry",
        "timestamp": 1627060498
    },
    {
        "content": "<p>I just thought everyone was really fast with their markdown link syntax. Does it work for other github links too?</p>",
        "id": 247005900,
        "sender_full_name": "eholk",
        "timestamp": 1627060498
    },
    {
        "content": "<p>you can do <a href=\"https://github.com/rust-lang/wg-async-foundations/issues/123\">wg-async-foundations#123</a></p>",
        "id": 247005944,
        "sender_full_name": "tmandry",
        "timestamp": 1627060518
    },
    {
        "content": "<p>ah, cool</p>",
        "id": 247005978,
        "sender_full_name": "eholk",
        "timestamp": 1627060539
    },
    {
        "content": "<p>and it also works with pull requests</p>",
        "id": 247005988,
        "sender_full_name": "tmandry",
        "timestamp": 1627060543
    },
    {
        "content": "<p>nice!</p>",
        "id": 247006073,
        "sender_full_name": "eholk",
        "timestamp": 1627060572
    },
    {
        "content": "<h2>Confusing error: Immutable reference to future is not a future <a href=\"https://github.com/rust-lang/rust/issues/87211\">#87211</a></h2>",
        "id": 247006200,
        "sender_full_name": "tmandry",
        "timestamp": 1627060632
    },
    {
        "content": "<p>whoops</p>",
        "id": 247006247,
        "sender_full_name": "tmandry",
        "timestamp": 1627060661
    },
    {
        "content": "<p>I commented on this issue instead of the other one</p>",
        "id": 247006267,
        "sender_full_name": "tmandry",
        "timestamp": 1627060669
    },
    {
        "content": "<p>Is awaiting something you can do on an immutable reference? It seems like making progress on a future is likely to need mutation, but maybe not?</p>",
        "id": 247006599,
        "sender_full_name": "eholk",
        "timestamp": 1627060827
    },
    {
        "content": "<p>yes, it does need mutation</p>",
        "id": 247006648,
        "sender_full_name": "tmandry",
        "timestamp": 1627060856
    },
    {
        "content": "<p>this looks like it would be a pretty easy issue to fix</p>",
        "id": 247006686,
        "sender_full_name": "tmandry",
        "timestamp": 1627060872
    },
    {
        "content": "<p>Oh, I guess that's the bug, that the error message is unclear even if the behavior is correct.</p>",
        "id": 247006687,
        "sender_full_name": "eholk",
        "timestamp": 1627060873
    },
    {
        "content": "<p>right</p>",
        "id": 247006711,
        "sender_full_name": "tmandry",
        "timestamp": 1627060885
    },
    {
        "content": "<p>so, if anyone is interested in looking at this I can help point you in the right direction</p>",
        "id": 247006898,
        "sender_full_name": "tmandry",
        "timestamp": 1627060973
    },
    {
        "content": "<p>in fact I'm going to write up very brief mentoring instructions</p>",
        "id": 247006995,
        "sender_full_name": "tmandry",
        "timestamp": 1627061039
    },
    {
        "content": "<p>done</p>",
        "id": 247007382,
        "sender_full_name": "tmandry",
        "timestamp": 1627061221
    },
    {
        "content": "<p>thanks!</p>",
        "id": 247007399,
        "sender_full_name": "eholk",
        "timestamp": 1627061231
    },
    {
        "content": "<p>sorry for doing that in the middle fo the meeting but I knew I wasn't going to get to it after :)</p>",
        "id": 247007420,
        "sender_full_name": "tmandry",
        "timestamp": 1627061243
    },
    {
        "content": "<p>No worries</p>",
        "id": 247007429,
        "sender_full_name": "eholk",
        "timestamp": 1627061250
    },
    {
        "content": "<p>Okay, that's the last issue to triage</p>",
        "id": 247007508,
        "sender_full_name": "tmandry",
        "timestamp": 1627061284
    },
    {
        "content": "<p>only other thing on the agenda is</p>\n<h1>ongoing work updates</h1>",
        "id": 247007551,
        "sender_full_name": "tmandry",
        "timestamp": 1627061309
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"421986\">@eholk</span> want to talk about the <a href=\"https://github.com/rust-lang/rust/issues/69663\">#69663</a> at all?</p>",
        "id": 247007645,
        "sender_full_name": "tmandry",
        "timestamp": 1627061371
    },
    {
        "content": "<p>Sure!</p>",
        "id": 247007651,
        "sender_full_name": "eholk",
        "timestamp": 1627061376
    },
    {
        "content": "<p>I've been looking at it. Niko and I met some and he showed me around <code>generator_interior.rs</code>, <code>regions.rs</code>, etc., and some of the past discussion around the issue.</p>",
        "id": 247007741,
        "sender_full_name": "eholk",
        "timestamp": 1627061408
    },
    {
        "content": "<p>I'm mostly still trying to grok the code, so not a ton of progress to report yet.</p>",
        "id": 247007770,
        "sender_full_name": "eholk",
        "timestamp": 1627061425
    },
    {
        "content": "<p>cool, and no worries</p>",
        "id": 247007812,
        "sender_full_name": "tmandry",
        "timestamp": 1627061444
    },
    {
        "content": "<p>is there a doc with the approach you discussed anywhere?</p>",
        "id": 247007851,
        "sender_full_name": "tmandry",
        "timestamp": 1627061461
    },
    {
        "content": "<p>I looked at <code>ExprUseVisitor</code>, and it seems like it's sort of the right direction since it tracks <code>consume</code> and <code>borrow</code> events, but I'm not sure it's exactly the right fit.</p>",
        "id": 247007891,
        "sender_full_name": "eholk",
        "timestamp": 1627061481
    },
    {
        "content": "<p>Let me see if I can find some docs</p>",
        "id": 247007922,
        "sender_full_name": "eholk",
        "timestamp": 1627061494
    },
    {
        "content": "<p><em>nods</em></p>",
        "id": 247007952,
        "sender_full_name": "tmandry",
        "timestamp": 1627061516
    },
    {
        "content": "<p>These are the notes from earlier that he shared with me: <a href=\"https://hackmd.io/Qr4rGglfSMGEDItP5YWgtA\">https://hackmd.io/Qr4rGglfSMGEDItP5YWgtA</a></p>",
        "id": 247007998,
        "sender_full_name": "eholk",
        "timestamp": 1627061524
    },
    {
        "content": "<p>And notes from out discussion: <a href=\"https://hackmd.io/VNyp5bUuT2KiI1WWd5P23g\">https://hackmd.io/VNyp5bUuT2KiI1WWd5P23g</a></p>",
        "id": 247008052,
        "sender_full_name": "eholk",
        "timestamp": 1627061555
    },
    {
        "content": "<p>it would be great if we could just have the MIR for analysis but that's.. kinda hard :)</p>",
        "id": 247008087,
        "sender_full_name": "tmandry",
        "timestamp": 1627061572
    },
    {
        "content": "<p>Yeah, I'm looking at whether we can make the HIR approximation more precise instead.</p>",
        "id": 247008131,
        "sender_full_name": "eholk",
        "timestamp": 1627061599
    },
    {
        "content": "<p>Although that does make me a little nervous that we'll end up with subtly different behavior between the HIR approximation and the actual check in MIR.</p>",
        "id": 247008302,
        "sender_full_name": "eholk",
        "timestamp": 1627061659
    },
    {
        "content": "<p>I think that's definitely the reasonable approach and can probably get quite far</p>",
        "id": 247008318,
        "sender_full_name": "tmandry",
        "timestamp": 1627061668
    },
    {
        "content": "<p>we may (well, that's already the case), but there are redundant checks to prevent something like that from causing unsoundness</p>",
        "id": 247008395,
        "sender_full_name": "tmandry",
        "timestamp": 1627061705
    },
    {
        "content": "<p>the HIR is not allowed to be <em>more</em> precise than the MIR</p>",
        "id": 247008454,
        "sender_full_name": "tmandry",
        "timestamp": 1627061735
    },
    {
        "content": "<p>I think my rough plan is to filter the <code>live_across_yield</code> values in <code>generator_interior.rs</code> to remove values that were dropped earlier.</p>",
        "id": 247008457,
        "sender_full_name": "eholk",
        "timestamp": 1627061737
    },
    {
        "content": "<p>Although I'm still working out exactly <em>how</em> to make that happen :)</p>",
        "id": 247008497,
        "sender_full_name": "eholk",
        "timestamp": 1627061756
    },
    {
        "content": "<p>I'm also not sure yet how multiple yields in the same scope are handled.</p>",
        "id": 247008646,
        "sender_full_name": "eholk",
        "timestamp": 1627061817
    },
    {
        "content": "<p>yeah, I remember looking into this at one point but never got very far</p>",
        "id": 247008744,
        "sender_full_name": "tmandry",
        "timestamp": 1627061870
    },
    {
        "content": "<p>Anyway, I think that's all I've got for <a href=\"https://github.com/rust-lang/rust/issues/69663\">#69663</a></p>",
        "id": 247008957,
        "sender_full_name": "eholk",
        "timestamp": 1627061940
    },
    {
        "content": "<p>I was just thinking it would be cool if we could sort of \"incrementally\" build MIR, e.g. starting with just a CFG representation of the HIR, partial type info, no drops / landing pads, and then building up to the full representation</p>",
        "id": 247009159,
        "sender_full_name": "tmandry",
        "timestamp": 1627062015
    },
    {
        "content": "<p>but it probably wouldn't work</p>",
        "id": 247009199,
        "sender_full_name": "tmandry",
        "timestamp": 1627062043
    },
    {
        "content": "<p>It might...</p>",
        "id": 247009222,
        "sender_full_name": "eholk",
        "timestamp": 1627062054
    },
    {
        "content": "<p>It sounds kind of like a nanopass style compiler, which I'm a fan of</p>",
        "id": 247009241,
        "sender_full_name": "eholk",
        "timestamp": 1627062065
    },
    {
        "content": "<p>well, it might be worth looking into at some point :)</p>",
        "id": 247009286,
        "sender_full_name": "tmandry",
        "timestamp": 1627062096
    },
    {
        "content": "<p>Agreed</p>",
        "id": 247009315,
        "sender_full_name": "eholk",
        "timestamp": 1627062116
    },
    {
        "content": "<p>it would likely be a huge architecture change, so it'd have to be very well motivated</p>",
        "id": 247009322,
        "sender_full_name": "tmandry",
        "timestamp": 1627062121
    },
    {
        "content": "<p>I suspect we'll end up with a lot of the same benefits by having HIR, THIR, and MIR</p>",
        "id": 247009420,
        "sender_full_name": "eholk",
        "timestamp": 1627062160
    },
    {
        "content": "<p>but the main motivation is to reuse the MIR/CFG building logic rather than approximating it in HIR passes</p>",
        "id": 247009434,
        "sender_full_name": "tmandry",
        "timestamp": 1627062170
    },
    {
        "content": "<p>But having three intermediate representations suggests we'll need more in the future...</p>",
        "id": 247009457,
        "sender_full_name": "eholk",
        "timestamp": 1627062182
    },
    {
        "content": "<p>the concept of MLIR is sort of inspiring me here. from what I hear it's kind of like an \"extensible IR\" where you can add different stages of representation and progressively lower one to the other</p>",
        "id": 247009647,
        "sender_full_name": "tmandry",
        "timestamp": 1627062275
    },
    {
        "content": "<p>I want to add a topic.  Planning for  GloRuWriClu applied to The Async Book is under way.  <span class=\"user-mention\" data-user-id=\"218683\">@Alice Ryhl</span>  has accepted the role as one of the experts.  Next week Niko will be connecting with an org called writethedocs to recruit a technical editor and I'm meeting with the guys at Duckly to arrange access to their platform for pair programming.</p>\n<p>We are still definition stage, but it is moving.  :)</p>",
        "id": 247009730,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062322
    },
    {
        "content": "<p>That's awesome!</p>",
        "id": 247009803,
        "sender_full_name": "tmandry",
        "timestamp": 1627062362
    },
    {
        "content": "<p>I'm so excited for this</p>",
        "id": 247009877,
        "sender_full_name": "tmandry",
        "timestamp": 1627062385
    },
    {
        "content": "<p>okay, I think we can wrap up now</p>",
        "id": 247009947,
        "sender_full_name": "tmandry",
        "timestamp": 1627062424
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-meeting</p>",
        "id": 247009955,
        "sender_full_name": "tmandry",
        "timestamp": 1627062428
    },
    {
        "content": "<p>Does anyone have something to bring up?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if you're ready to end the meeting.</p>",
        "id": 247009956,
        "sender_full_name": "triagebot",
        "timestamp": 1627062429
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"394977\">@Doc Jones</span> - that's awesome!</p>",
        "id": 247009963,
        "sender_full_name": "eholk",
        "timestamp": 1627062434
    },
    {
        "content": "<p>Me too.  I plan to be a mentee.  We still have a couple of other roles to fill.  Thanks for the title, Tyler. :)</p>",
        "id": 247009999,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062455
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-23/near/247009877\">said</a>:</p>\n<blockquote>\n<p>I'm so excited for this</p>\n</blockquote>\n<p>I've long had dreams of doing major changes to the async book</p>",
        "id": 247010039,
        "sender_full_name": "tmandry",
        "timestamp": 1627062477
    },
    {
        "content": "<p>title? :)</p>",
        "id": 247010135,
        "sender_full_name": "tmandry",
        "timestamp": 1627062514
    },
    {
        "content": "<p>Yes. You came up with the GloRuWriClu</p>",
        "id": 247010187,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062542
    },
    {
        "content": "<p>oh, maybe I did</p>",
        "id": 247010232,
        "sender_full_name": "tmandry",
        "timestamp": 1627062569
    },
    {
        "content": "<p>it was more of a collaboration :p</p>",
        "id": 247010351,
        "sender_full_name": "tmandry",
        "timestamp": 1627062611
    },
    {
        "content": "<p>Yes, true.</p>",
        "id": 247010384,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062624
    },
    {
        "content": "<p>anyway, this is all exciting stuff :)</p>",
        "id": 247010435,
        "sender_full_name": "tmandry",
        "timestamp": 1627062649
    },
    {
        "content": "<p>I look forward to stuff happening on the book!</p>",
        "id": 247010448,
        "sender_full_name": "Alice Ryhl",
        "timestamp": 1627062655
    },
    {
        "content": "<p>and as for the meeting itself, thanks all, until next time <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 247010564,
        "sender_full_name": "tmandry",
        "timestamp": 1627062716
    },
    {
        "content": "<p>Oh hi!   <span class=\"user-mention\" data-user-id=\"218683\">@Alice Ryhl</span></p>",
        "id": 247010566,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062717
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span>  Should we report on the progress of the project in this meeting?</p>",
        "id": 247010823,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062834
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116883\">@tmandry</span>   ??</p>",
        "id": 247011186,
        "sender_full_name": "Doc Jones",
        "timestamp": 1627062988
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"394977\">@Doc Jones</span> I would love to hear progress updates in the meeting, if you can make it</p>",
        "id": 247041665,
        "sender_full_name": "tmandry",
        "timestamp": 1627080839
    }
]
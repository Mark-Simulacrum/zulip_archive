[
    {
        "content": "<p>Hi, no meeting today?</p>",
        "id": 244730531,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245284
    },
    {
        "content": "<p>yes there is, sorry, just getting back from an appt :)</p>",
        "id": 244730708,
        "sender_full_name": "tmandry",
        "timestamp": 1625245368
    },
    {
        "content": "<p><span class=\"user-group-mention\" data-user-group-id=\"1172\">@WG-async-foundations</span></p>",
        "id": 244730919,
        "sender_full_name": "tmandry",
        "timestamp": 1625245447
    },
    {
        "content": "<p>wave</p>",
        "id": 244730940,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245454
    },
    {
        "content": "<p>no issues to triage today, so we can dive right in to updates</p>",
        "id": 244730994,
        "sender_full_name": "tmandry",
        "timestamp": 1625245480
    },
    {
        "content": "<p>Greetings!</p>",
        "id": 244731010,
        "sender_full_name": "Nell Shamrell-Harrington",
        "timestamp": 1625245489
    },
    {
        "content": "<p>Well, I have a slight update</p>",
        "id": 244731034,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245506
    },
    {
        "content": "<p>I was hoping we can discuss the <code>is_ready!</code> stabilization <a href=\"https://github.com/rust-lang/rust/pull/81050\">PR</a> briefly?</p>",
        "id": 244731099,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245546
    },
    {
        "content": "<p>I've been working on a revised draft of the \"shiny future\" document -- let me upload an SVG so people can see what it looks like -- I've also been doing an associated write-up of the design and some other details.</p>",
        "id": 244731101,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245547
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400241\">Zeeshan Ali</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244731099\">said</a>:</p>\n<blockquote>\n<p>I was hoping we can discuss the <code>is_ready!</code> stabilization <a href=\"https://github.com/rust-lang/rust/pull/81050\">PR</a> briefly?</p>\n</blockquote>\n<p>yes, let's!</p>",
        "id": 244731111,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245552
    },
    {
        "content": "<p>there were as many naming ideas as the number of commenters :)</p>",
        "id": 244731205,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245589
    },
    {
        "content": "<p><code>if_ready</code> (the latest update) sounds perfect to me at least. I think <span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> you also liked it?</p>",
        "id": 244731310,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245643
    },
    {
        "content": "<p>I do</p>",
        "id": 244731338,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245660
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"400241\">Zeeshan Ali</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244731205\">said</a>:</p>\n<blockquote>\n<p>there were as many naming ideas as the number of commenters :)</p>\n</blockquote>\n<p>that's what makes it a good bikeshed ;)</p>",
        "id": 244731342,
        "sender_full_name": "tmandry",
        "timestamp": 1625245663
    },
    {
        "content": "<p>yeah, I like <code>if_ready!</code> as well</p>",
        "id": 244731364,
        "sender_full_name": "tmandry",
        "timestamp": 1625245681
    },
    {
        "content": "<p>any objections?</p>",
        "id": 244731483,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245739
    },
    {
        "content": "<p>I think the final decision maker is technically the libs team</p>",
        "id": 244731580,
        "sender_full_name": "tmandry",
        "timestamp": 1625245797
    },
    {
        "content": "<p>but we can give our recommendation</p>",
        "id": 244731608,
        "sender_full_name": "tmandry",
        "timestamp": 1625245804
    },
    {
        "content": "<p>that sounds right</p>",
        "id": 244731643,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245808
    },
    {
        "content": "<p>yeah, that's what I thought too</p>",
        "id": 244731649,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245813
    },
    {
        "content": "<p>so if there are not objections, I'll comment there saying <code>if_ready!</code> has our blessing?</p>",
        "id": 244731691,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625245841
    },
    {
        "content": "<p>I say go ahead :)</p>",
        "id": 244731746,
        "sender_full_name": "tmandry",
        "timestamp": 1625245872
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"261224\">@triagebot</span> end-topic</p>",
        "id": 244731752,
        "sender_full_name": "tmandry",
        "timestamp": 1625245875
    },
    {
        "content": "<p>Does anyone have something to add on the current topic?<br>\nReact with <span aria-label=\"working on it\" class=\"emoji emoji-1f6e0\" role=\"img\" title=\"working on it\">:working_on_it:</span> if you have something to say.<br>\nReact with <span aria-label=\"all good\" class=\"emoji emoji-2705\" role=\"img\" title=\"all good\">:all_good:</span> if not.</p>",
        "id": 244731755,
        "sender_full_name": "triagebot",
        "timestamp": 1625245875
    },
    {
        "content": "<p>I'm looking at the <a href=\"https://github.com/orgs/rust-lang/projects/2\">project board</a></p>",
        "id": 244731894,
        "sender_full_name": "tmandry",
        "timestamp": 1625245945
    },
    {
        "content": "<p>there were some issues in \"On deck\" that could be cleaned up</p>",
        "id": 244731911,
        "sender_full_name": "tmandry",
        "timestamp": 1625245961
    },
    {
        "content": "<p>either as claimed or done</p>",
        "id": 244731917,
        "sender_full_name": "tmandry",
        "timestamp": 1625245966
    },
    {
        "content": "<p>that makes sense</p>",
        "id": 244731947,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625245986
    },
    {
        "content": "<p>let's go through and update the claimed issues</p>",
        "id": 244731983,
        "sender_full_name": "tmandry",
        "timestamp": 1625246018
    },
    {
        "content": "<ul>\n<li>Async fn does not compile if lifetime does not appear in bounds (sometimes) <a href=\"https://github.com/rust-lang/rust/issues/63033\">#63033</a></li>\n</ul>",
        "id": 244732012,
        "sender_full_name": "tmandry",
        "timestamp": 1625246034
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> you're assigned</p>",
        "id": 244732021,
        "sender_full_name": "tmandry",
        "timestamp": 1625246039
    },
    {
        "content": "<p>uh oh</p>",
        "id": 244732074,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246048
    },
    {
        "content": "<p>don't worry, I'm next :P</p>",
        "id": 244732099,
        "sender_full_name": "tmandry",
        "timestamp": 1625246064
    },
    {
        "content": "<p>hmm</p>",
        "id": 244732123,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246080
    },
    {
        "content": "<p>specifically with</p>\n<ul>\n<li>Internal compiler error with async, const generics, and ?-operator <a href=\"https://github.com/rust-lang/rust/issues/84841\">#84841</a></li>\n</ul>",
        "id": 244732165,
        "sender_full_name": "tmandry",
        "timestamp": 1625246100
    },
    {
        "content": "<p>I mean obviously I didn't write any mentoring instructions</p>",
        "id": 244732227,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246133
    },
    {
        "content": "<p>I guess I should release my claim-- I don't know that I will have time for that</p>",
        "id": 244732238,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246144
    },
    {
        "content": "<p>I feel like I'm pretty underwater right now :)</p>",
        "id": 244732270,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246157
    },
    {
        "content": "<p>sounds good, updating the status is the purpose of this :)</p>",
        "id": 244732333,
        "sender_full_name": "tmandry",
        "timestamp": 1625246175
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244732165\">said</a>:</p>\n<blockquote>\n<p>specifically with</p>\n<ul>\n<li>Internal compiler error with async, const generics, and ?-operator <a href=\"https://github.com/rust-lang/rust/issues/84841\">#84841</a></li>\n</ul>\n</blockquote>\n<p>..I did investigate some and posted and <a href=\"https://github.com/rust-lang/rust/issues/84841#issuecomment-857332465\">update</a>, but did not finish</p>",
        "id": 244732345,
        "sender_full_name": "tmandry",
        "timestamp": 1625246183
    },
    {
        "content": "<p>niko, I was wondering if you have any thoughts on reading that comment</p>",
        "id": 244732400,
        "sender_full_name": "tmandry",
        "timestamp": 1625246216
    },
    {
        "content": "<p>reading</p>",
        "id": 244732463,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246256
    },
    {
        "content": "<ul>\n<li>Note when opaque future from async fn is involved in a type mismatch is unclear <a href=\"https://github.com/rust-lang/rust/issues/80658\">#80658</a><br>\n  – <span class=\"user-mention\" data-user-id=\"225192\">@Nell Shamrell-Harrington</span> is working on this and has a PR up (<a href=\"https://github.com/rust-lang/rust/issues/86705\">#86705</a>)</li>\n</ul>",
        "id": 244732503,
        "sender_full_name": "tmandry",
        "timestamp": 1625246281
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244732400\">said</a>:</p>\n<blockquote>\n<p>niko, I was wondering if you have any thoughts on reading that comment</p>\n</blockquote>\n<p>hmm</p>",
        "id": 244732544,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246285
    },
    {
        "content": "<p>I'm wondering also if this is related to the ICEs that the RFC 2229 project group was seeing</p>",
        "id": 244732584,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246303
    },
    {
        "content": "<p>I've submitted a partial fix here <a href=\"https://github.com/rust-lang/rust/pull/86705\">https://github.com/rust-lang/rust/pull/86705</a></p>",
        "id": 244732589,
        "sender_full_name": "Nell Shamrell-Harrington",
        "timestamp": 1625246305
    },
    {
        "content": "<p>It looks vaguely familiar</p>",
        "id": 244732591,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246306
    },
    {
        "content": "<p>oh, lol, just saw the rest of your message</p>",
        "id": 244732607,
        "sender_full_name": "Nell Shamrell-Harrington",
        "timestamp": 1625246316
    },
    {
        "content": "<p>and those ICEs were going down a similar path</p>",
        "id": 244732608,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246317
    },
    {
        "content": "<p>okay, if we can find the issue let's mention it..</p>",
        "id": 244732717,
        "sender_full_name": "tmandry",
        "timestamp": 1625246397
    },
    {
        "content": "<p>I'm debating about poking into it</p>",
        "id": 244732771,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246406
    },
    {
        "content": "<p>anyway, I'll tag it</p>",
        "id": 244732796,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246415
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/86743\">https://github.com/rust-lang/rust/issues/86743</a></p>",
        "id": 244732825,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246440
    },
    {
        "content": "<p>there's one such issue</p>",
        "id": 244732827,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246443
    },
    {
        "content": "<p>I'm out next week and probably won't have time to dig in today, but think I can follow up the following week</p>",
        "id": 244733014,
        "sender_full_name": "tmandry",
        "timestamp": 1625246539
    },
    {
        "content": "<ul>\n<li>Indexing via index method and [idx] sugar works differently in async blocks/functions <a href=\"https://github.com/rust-lang/rust/issues/72956\">#72956</a></li>\n</ul>",
        "id": 244733052,
        "sender_full_name": "tmandry",
        "timestamp": 1625246560
    },
    {
        "content": "<p>this has been inactive since February</p>",
        "id": 244733089,
        "sender_full_name": "tmandry",
        "timestamp": 1625246576
    },
    {
        "content": "<p>we can probably unassign</p>",
        "id": 244733143,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246601
    },
    {
        "content": "<p>it seems like the issue has to do with a temporary being created?</p>",
        "id": 244733154,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246607
    },
    {
        "content": "<p>yeah, I think I'll release the assignment and ask them to to re-claim if they want to keep investigating</p>",
        "id": 244733159,
        "sender_full_name": "tmandry",
        "timestamp": 1625246609
    },
    {
        "content": "<p>looking at it again, if I had to guess, I would think it has to do with that code that decides an approx. of what is live across an await</p>",
        "id": 244733204,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246626
    },
    {
        "content": "<p>^ yeah I think it did</p>",
        "id": 244733222,
        "sender_full_name": "tmandry",
        "timestamp": 1625246637
    },
    {
        "content": "<p>(which I still think would be a great ergonomics win for us to work more on...sigh)</p>",
        "id": 244733342,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246690
    },
    {
        "content": "<p>that would be an interesting/useful issue to work on indeed</p>",
        "id": 244733439,
        "sender_full_name": "tmandry",
        "timestamp": 1625246750
    },
    {
        "content": "<ul>\n<li>Async function leads to a \"more general type\" error <a href=\"https://github.com/rust-lang/rust/issues/71723\">#71723</a></li>\n</ul>",
        "id": 244733459,
        "sender_full_name": "tmandry",
        "timestamp": 1625246762
    },
    {
        "content": "<p>also inactive</p>",
        "id": 244733502,
        "sender_full_name": "tmandry",
        "timestamp": 1625246767
    },
    {
        "content": "<ul>\n<li>More friendly error msg when await on NONE ASYNC fn/block or return a obj that implements deprecated Future <a href=\"https://github.com/rust-lang/rust/issues/66731\">#66731</a></li>\n</ul>",
        "id": 244733565,
        "sender_full_name": "tmandry",
        "timestamp": 1625246803
    },
    {
        "content": "<p>This one is from March</p>",
        "id": 244733603,
        "sender_full_name": "tmandry",
        "timestamp": 1625246819
    },
    {
        "content": "<p>It looks like an MCP was written</p>",
        "id": 244733648,
        "sender_full_name": "tmandry",
        "timestamp": 1625246845
    },
    {
        "content": "<p>and approved</p>",
        "id": 244733656,
        "sender_full_name": "tmandry",
        "timestamp": 1625246849
    },
    {
        "content": "<p>ok, I'll do the same dance as before</p>",
        "id": 244733706,
        "sender_full_name": "tmandry",
        "timestamp": 1625246875
    },
    {
        "content": "<p>well ok</p>",
        "id": 244733777,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246890
    },
    {
        "content": "<p>so I remember this one</p>",
        "id": 244733781,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246892
    },
    {
        "content": "<p>there was a problem</p>",
        "id": 244733789,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246896
    },
    {
        "content": "<p>it doesn't look like <span class=\"user-mention\" data-user-id=\"383558\">@Henry Boisdequin</span> left notes?</p>",
        "id": 244733830,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246912
    },
    {
        "content": "<p>in any case, the problem we encontered was that my suggested fix was adding a <code>Span</code> somewhere</p>",
        "id": 244733849,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246924
    },
    {
        "content": "<p>or something like that</p>",
        "id": 244733856,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246927
    },
    {
        "content": "<blockquote>\n<p>Embed the hir_id of the _awaited expression_ into DesugaringKind</p>\n</blockquote>\n<p>I <em>really</em> thought I had done this before</p>",
        "id": 244733862,
        "sender_full_name": "tmandry",
        "timestamp": 1625246929
    },
    {
        "content": "<p>maybe a <code>DefId</code>?</p>",
        "id": 244733863,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246930
    },
    {
        "content": "<p>ah, right, a <code>HirId</code></p>",
        "id": 244733885,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246940
    },
    {
        "content": "<p>the problem was that this resulted in a crate cycle</p>",
        "id": 244733901,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246949
    },
    {
        "content": "<p>I think that <code>DesugaringKind</code> is part of the span</p>",
        "id": 244733929,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246960
    },
    {
        "content": "<p>and so we were doing a hack to encode a hirid as like <code>(u32, u32)</code></p>",
        "id": 244733943,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246969
    },
    {
        "content": "<p>it didn't feel great :)</p>",
        "id": 244733949,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625246974
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244733862\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>Embed the hir_id of the _awaited expression_ into DesugaringKind</p>\n</blockquote>\n<p>I <em>really</em> thought I had done this before</p>\n</blockquote>\n<p>guess not, I can't find it anywhere</p>",
        "id": 244734124,
        "sender_full_name": "tmandry",
        "timestamp": 1625247062
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244733949\">said</a>:</p>\n<blockquote>\n<p>it didn't feel great :)</p>\n</blockquote>\n<p>but it still seems \"ok\" to me</p>",
        "id": 244734169,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247083
    },
    {
        "content": "<p>I guess conceptually we could mvoe <code>HirId</code> definition to another crate</p>",
        "id": 244734209,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247115
    },
    {
        "content": "<p>I forget if we tried that</p>",
        "id": 244734219,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247121
    },
    {
        "content": "<p>ohh you mean a crate cycle in rustc itself</p>",
        "id": 244734279,
        "sender_full_name": "tmandry",
        "timestamp": 1625247133
    },
    {
        "content": "<p>that makes sense :)</p>",
        "id": 244734302,
        "sender_full_name": "tmandry",
        "timestamp": 1625247149
    },
    {
        "content": "<p>okay, well it seems like we should still release the assignment for now, ideally with a message about the state of things</p>",
        "id": 244734355,
        "sender_full_name": "tmandry",
        "timestamp": 1625247201
    },
    {
        "content": "<p>yes</p>",
        "id": 244734358,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247202
    },
    {
        "content": "<p>I can leave a sumamry</p>",
        "id": 244734370,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247209
    },
    {
        "content": "<p>okay, well, we ended up with the same number of claimed issues as we started with :)</p>",
        "id": 244734512,
        "sender_full_name": "tmandry",
        "timestamp": 1625247278
    },
    {
        "content": "<p>but not all the same issues</p>",
        "id": 244734526,
        "sender_full_name": "tmandry",
        "timestamp": 1625247285
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116009\">@nikomatsakis</span> did you want to share the diagram you're working on?</p>",
        "id": 244734596,
        "sender_full_name": "tmandry",
        "timestamp": 1625247326
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/issues/66731#issuecomment-873155946\">https://github.com/rust-lang/rust/issues/66731#issuecomment-873155946</a></p>",
        "id": 244734745,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247398
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116883\">tmandry</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244734596\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> did you want to share the diagram you're working on?</p>\n</blockquote>\n<p>yes</p>",
        "id": 244734747,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247400
    },
    {
        "content": "<p>one sec</p>",
        "id": 244734753,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247402
    },
    {
        "content": "<p>I'm trying to export to SVG :)</p>",
        "id": 244735027,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247540
    },
    {
        "content": "<p>ok</p>",
        "id": 244735067,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247566
    },
    {
        "content": "<p><a href=\"http://smallcultfollowing.com/async-harmonic-synthesis.svg\">http://smallcultfollowing.com/async-harmonic-synthesis.svg</a></p>",
        "id": 244735070,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247566
    },
    {
        "content": "<p>note that many of these things are links</p>",
        "id": 244735088,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247575
    },
    {
        "content": "<p>so I've been trying together the \"full vision\" and to identify those areas of controversy or where more design is needed</p>",
        "id": 244735123,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247591
    },
    {
        "content": "<p>the idea is to link out the \"experiences\" I think we are shooting for</p>",
        "id": 244735211,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247621
    },
    {
        "content": "<p>along with the status quo stories that show where we fall short</p>",
        "id": 244735219,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247627
    },
    {
        "content": "<p>and then the designs we claim will achieve it</p>",
        "id": 244735226,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247631
    },
    {
        "content": "<p>the designs are linked into a hackmd for now that has more details</p>",
        "id": 244735234,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247639
    },
    {
        "content": "<p>Ohh, that overview is cool!</p>",
        "id": 244735282,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625247668
    },
    {
        "content": "<p>they are grouped by the \"experience\" I think they create</p>",
        "id": 244735287,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247672
    },
    {
        "content": "<p>looks cool!</p>",
        "id": 244735288,
        "sender_full_name": "Nell Shamrell-Harrington",
        "timestamp": 1625247672
    },
    {
        "content": "<p>and those groups have dependencies because, for it to be completely done, I think we have to work out the designs/details</p>",
        "id": 244735310,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247693
    },
    {
        "content": "<p>but note that many of the stickies are \"green\" (meaning I think we can work on them) even now-- that's because there's work we can do even if we don't know everything yet</p>",
        "id": 244735347,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247713
    },
    {
        "content": "<p>so e.g. I think we can work on generators</p>",
        "id": 244735417,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247732
    },
    {
        "content": "<p>even though I would like to propose a different async iterator trait than today's stream</p>",
        "id": 244735431,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247742
    },
    {
        "content": "<p>(because I want it to be <code>async fn next(&amp;mut self)</code>)</p>",
        "id": 244735446,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247750
    },
    {
        "content": "<p>the source material for this is still basically <a href=\"https://hackmd.io/LP_UgLXOQOqHX2MocNk15g\">Async Shiny Future v3</a></p>",
        "id": 244735482,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247773
    },
    {
        "content": "<p>I hope to finish this up over the weekend and then start shopping it around to people for feedback and to argue about specific points</p>",
        "id": 244735514,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247786
    },
    {
        "content": "<p>I think there's probalby some amount of prototyping too-- like I'm not entirely sure if the \"std library\" approach I want to do can work (though I hope it can)</p>",
        "id": 244735537,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247802
    },
    {
        "content": "<p>I don't think I got around to writing that up :)</p>",
        "id": 244735555,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247810
    },
    {
        "content": "<p>but I think we could try prototyping it and <em>see</em> if we can make it work</p>",
        "id": 244735593,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247831
    },
    {
        "content": "<p>anyway, thoughts on the presentation? content?</p>",
        "id": 244735696,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247865
    },
    {
        "content": "<p>(it's a lot to digest...)</p>",
        "id": 244735706,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247871
    },
    {
        "content": "<p>(I'm making this in \"lucidspark\", right now, though eventually I'd like to revamp the skill-tree crate to generate something more like this...)</p>",
        "id": 244735789,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625247907
    },
    {
        "content": "<p>Without going into specific points, the wider brush strokes seem to cover a lot of ground — which I think is what we need. Excited for this!</p>",
        "id": 244735866,
        "sender_full_name": "Yoshua Wuyts",
        "timestamp": 1625247953
    },
    {
        "content": "<p>so what I'd like to do, <span class=\"user-mention\" data-user-id=\"211722\">@Yoshua Wuyts</span>, is to finish this up, and then I figured I'd schedule some 1:1 calls (you were on my list...) to dig into it</p>",
        "id": 244736045,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248035
    },
    {
        "content": "<p>the final step that I haven't figured out quite how to add is \"roadmap\" -- as in, what things should we do <em>first</em> -- to some extent I think that's not up to us (the WG) to decide</p>",
        "id": 244736108,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248074
    },
    {
        "content": "<p>by which I mean: if we can get agreement on the overall future we want to try (at least tentative agreement), then it's a question of who is motivated to do what. e.g. I have some influence on what people at amazon do :)</p>",
        "id": 244736200,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248111
    },
    {
        "content": "<p>but I don't know how much time other people will have to pursue things</p>",
        "id": 244736247,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248137
    },
    {
        "content": "<p>so the hope is that having this plan can let us scale up to more folks without coordination overhead killing us</p>",
        "id": 244736277,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248150
    },
    {
        "content": "<p>(and/or RFC threads)</p>",
        "id": 244736336,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248184
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"211722\">Yoshua Wuyts</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244735866\">said</a>:</p>\n<blockquote>\n<p>Without going into specific points, the wider brush strokes seem to cover a lot of ground — which I think is what we need. Excited for this!</p>\n</blockquote>\n<p>it is, I think, pretty ambitous, but I did draw the line at a few places</p>",
        "id": 244736444,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248217
    },
    {
        "content": "<p>e.g., I'm tempted to try for something where (most) functions can be compiled as sync or async</p>",
        "id": 244736472,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248232
    },
    {
        "content": "<p>but I'm afraid :)</p>",
        "id": 244736479,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248234
    },
    {
        "content": "<p>(you'll find some notes on that at the bottom)</p>",
        "id": 244736498,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248250
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244736472\">said</a>:</p>\n<blockquote>\n<p>e.g., I'm tempted to try for something where any function can be compiled as sync or async</p>\n</blockquote>\n<p>I was looking at that. monomorphization time errors are one way of handling the \"edge cases\", or maybe all sync-only functions just monomorphize as sync in an async context and we lint on it</p>",
        "id": 244736530,
        "sender_full_name": "tmandry",
        "timestamp": 1625248271
    },
    {
        "content": "<p>yeah, there are some options.</p>",
        "id": 244736548,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248286
    },
    {
        "content": "<p>I do think it's worth a bit more discussion, just because the potential gain is so huge</p>",
        "id": 244736571,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248298
    },
    {
        "content": "<p>one thing that had not occurred to me until toying with the doc -- this might permit us to make <code>?</code> \"work\" in iterator chains</p>",
        "id": 244736601,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248320
    },
    {
        "content": "<p>by work I mean return from the surrounding function (or catch block)</p>",
        "id": 244736664,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248337
    },
    {
        "content": "<p>the idea would be that you compile the iterator functions in \"async mode\"</p>",
        "id": 244736683,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248350
    },
    {
        "content": "<p>and then they can stop</p>",
        "id": 244736720,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248368
    },
    {
        "content": "<p>idk if it would really work, but.. maybe...</p>",
        "id": 244736733,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248375
    },
    {
        "content": "<p>obviously that would require an edition, but what a game changer it could be</p>",
        "id": 244736794,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248406
    },
    {
        "content": "<blockquote>\n<p>You never never author or invoke a “poll”-style function directly</p>\n</blockquote>\n<p>I'm curious about how this can work. How would people impl <code>futures::Stream</code> and <code>futures::Sink</code> etc?</p>",
        "id": 244736916,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625248454
    },
    {
        "content": "<p>You and your daughter would need to do a new song about editions :)</p>",
        "id": 244736925,
        "sender_full_name": "Nell Shamrell-Harrington",
        "timestamp": 1625248460
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244736683\">said</a>:</p>\n<blockquote>\n<p>the idea would be that you compile the iterator functions in \"async mode\"</p>\n</blockquote>\n<p>I feel like you're taking a lot of implicit steps here, but I sorta follow, I think</p>",
        "id": 244736964,
        "sender_full_name": "tmandry",
        "timestamp": 1625248477
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"400241\">@Zeeshan Ali</span> the doc covers a bit of it, but the tl;dr is that (a) we rework all the traits to use <code>async fn</code></p>",
        "id": 244736967,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248478
    },
    {
        "content": "<p>and (b) we have a variant of async fn that compiles to something like a poll function</p>",
        "id": 244737001,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248494
    },
    {
        "content": "<p>this is what I call \"inline\" async fn</p>",
        "id": 244737004,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248498
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244736967\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"400241\">Zeeshan Ali</span> the doc covers a bit of it, but the tl;dr is that (a) we rework all the traits to use <code>async fn</code></p>\n</blockquote>\n<p>Ah yes, async in traits is going to be a reality at some point. I completely forgot about that. :)</p>",
        "id": 244737058,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625248527
    },
    {
        "content": "<p>so stream becomes</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">trait</span><span class=\"w\"> </span><span class=\"n\">AsyncIter</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">type</span> <span class=\"nc\">Item</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">async</span><span class=\"w\"> </span><span class=\"k\">fn</span> <span class=\"nf\">next</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"bp\">self</span><span class=\"p\">)</span><span class=\"w\"> </span>-&gt; <span class=\"nc\">Self</span>::<span class=\"n\">Item</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 244737062,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248529
    },
    {
        "content": "<p>the read/write traits are more interesting</p>",
        "id": 244737090,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248543
    },
    {
        "content": "<p>if you kept the obvious design and used my technique, you could read <em>or</em> write but not both</p>",
        "id": 244737126,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248560
    },
    {
        "content": "<p>this is why the doc includes an altered design that <span class=\"user-mention\" data-user-id=\"224941\">@Carl Lerche</span> proposed</p>",
        "id": 244737185,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248572
    },
    {
        "content": "<p>where basically you have a \"readiness\" async fn and then sync functions to copy data</p>",
        "id": 244737221,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248595
    },
    {
        "content": "<p>obviously for io-uring we'll need some different traits (but we knew that)</p>",
        "id": 244737237,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248605
    },
    {
        "content": "<p>(or any zero-copy scenario)</p>",
        "id": 244737251,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248612
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244737185\">said</a>:</p>\n<blockquote>\n<p>this is why the doc includes an altered design that <span class=\"user-mention silent\" data-user-id=\"224941\">Carl Lerche</span> proposed</p>\n</blockquote>\n<p>I still gotta read that. It came out last week and I was busy driving to Denmark and getting married etc :-D</p>",
        "id": 244737255,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625248613
    },
    {
        "content": "<p>priorities</p>",
        "id": 244737272,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248623
    },
    {
        "content": "<p>that was the most wedding-related emoji I could find :)</p>",
        "id": 244737311,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248654
    },
    {
        "content": "<p>but anyway. Yeah with async traits, all that is easy. Sorry for the distraction</p>",
        "id": 244737323,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625248663
    },
    {
        "content": "<p>well, it's not that easy</p>",
        "id": 244737343,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248671
    },
    {
        "content": "<p>it's a good question</p>",
        "id": 244737345,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248673
    },
    {
        "content": "<p>see the <a href=\"https://hackmd.io/uAI0q9ZiSwyUkmGQQkyXXg?view#%E2%80%9CInline%E2%80%9D-async-fn-in-traits\">inline async in traits</a> section for more details</p>",
        "id": 244737415,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248694
    },
    {
        "content": "<p><a href=\"https://hackmd.io/bKfiVPRpTvyX8JK_Ng2EWA\">there's a detailed writeup here</a></p>",
        "id": 244737426,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248703
    },
    {
        "content": "<p>gotta run</p>",
        "id": 244737468,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248741
    },
    {
        "content": "<p>but I'd love comments async! (pun definitely intended)</p>",
        "id": 244737481,
        "sender_full_name": "nikomatsakis",
        "timestamp": 1625248751
    },
    {
        "content": "<p>Thanks. Yeah I know of those plans/hopes. Just didn't think that's related <span aria-label=\"face palm\" class=\"emoji emoji-1f926\" role=\"img\" title=\"face palm\">:face_palm:</span></p>",
        "id": 244737505,
        "sender_full_name": "Zeeshan Ali",
        "timestamp": 1625248768
    },
    {
        "content": "<p>okay, we're at the end of our time. thanks everyone <span aria-label=\"wave\" class=\"emoji emoji-1f44b\" role=\"img\" title=\"wave\">:wave:</span></p>",
        "id": 244737660,
        "sender_full_name": "tmandry",
        "timestamp": 1625248827
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116009\">nikomatsakis</span> <a href=\"#narrow/stream/187312-wg-async-foundations/topic/meeting.202021-07-02/near/244735070\">said</a>:</p>\n<blockquote>\n<p><a href=\"http://smallcultfollowing.com/async-harmonic-synthesis.svg\">http://smallcultfollowing.com/async-harmonic-synthesis.svg</a></p>\n</blockquote>\n<p>Nice map!</p>\n<p>I added some comments on the various docs</p>",
        "id": 244746214,
        "sender_full_name": "Matthias247",
        "timestamp": 1625253291
    }
]
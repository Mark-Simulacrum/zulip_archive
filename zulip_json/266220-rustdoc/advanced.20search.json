[
    {
        "content": "<p>Right now our search box has a lot of functionality:</p>\n<ul>\n<li>filter by crate</li>\n<li>filter by item type</li>\n<li>search in returned values or parameters</li>\n<li>exact match</li>\n<li>pattern search (vec -&gt; usize)</li>\n<li>multiple searches at once (\"as_ref,as_mut_ref\")</li>\n</ul>\n<p>Most of these require the user to type syntax in the search box, which is hard to remember. Also many people don't notice the <code>?</code> that explains the search syntax.</p>\n<p>I propose that on a search results page, there should be an \"advanced search\" link that presents a form with multiple inputs to make it easier to construct a complex query.</p>\n<p><a href=\"https://www.google.com/advanced_search\">An example from Google</a>:</p>\n<p><a href=\"/user_uploads/4715/Kj9-0SAcxIHC3DJdaTn4tdwe/image.png\">image.png</a> </p>\n<p>An <a href=\"https://github.com/search/advanced\">example from GitHub</a>:</p>\n<p><a href=\"/user_uploads/4715/P6fQmxoTGAtH25n_gc0YlUgY/image.png\">image.png</a> </p>\n<p>An <a href=\"https://www.flickr.com/search/advanced/\">example from Flickr</a>:</p>\n<p><a href=\"/user_uploads/4715/0VfoB5U9OpWgSUE2Ax2Xg8e5/image.png\">image.png</a> </p>\n<p>An <a href=\"https://twitter.com/search-advanced\">example from Twitter</a>:</p>\n<p><a href=\"/user_uploads/4715/cl1gr2v39J4XzhjhLYgRicmz/image.png\">image.png</a></p>",
        "id": 265431679,
        "sender_full_name": "jsha",
        "timestamp": 1639850644
    },
    {
        "content": "<p>Ah yes, that's what we discussed about. Thanks for opening the topic! For more context:</p>\n<p>I'm currently splitting <a href=\"https://github.com/rust-lang/rust/pull/90630\">https://github.com/rust-lang/rust/pull/90630</a> as much as possible in smaller PRs. Once this is done, <span class=\"user-mention\" data-user-id=\"315412\">@jsha</span> suggested this UI so users can handle the search much more efficiently. That would also allow us to remove this part from the help popup too.</p>",
        "id": 265438426,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639856661
    },
    {
        "content": "<p>I'm not a fan of advanced search forms; they always feel like a pain to use.</p>",
        "id": 265443693,
        "sender_full_name": "Noah Lev",
        "timestamp": 1639861778
    },
    {
        "content": "<p>In the case of searches like <code>vec -&gt; usize</code>, I really think we should leave it as syntax like Hoogle rather than creating a form for it</p>",
        "id": 265443762,
        "sender_full_name": "Noah Lev",
        "timestamp": 1639861825
    },
    {
        "content": "<p>When I do a search in rustdoc, I want to be able to do it quickly; filling out a form, meanwhile, is slow</p>",
        "id": 265443771,
        "sender_full_name": "Noah Lev",
        "timestamp": 1639861849
    },
    {
        "content": "<p>I don't think I've ever even used Google's advanced search (I didn't even realize it existed)</p>",
        "id": 265443861,
        "sender_full_name": "Noah Lev",
        "timestamp": 1639861968
    },
    {
        "content": "<p>the idea here is that advanced search is an on-ramp to the syntax. E.g. if you check the \"exact match\" box it puts quotes around whatever you have typed so far. If you filter by type <code>fn</code>, it puts <code>fn: </code> in front of your search.</p>\n<p>I think the current way we have it, with syntax tucked away in a help menu, is incurring a big complexity burden without a corresponding benefit because many people don't realize what's possible.</p>\n<p>There was a Discord thread <span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> linked a while back where some folks were wishing for functionality that already existed. When told about the <code>?</code> menu they said approximately \"nothing about <code>?</code> screams 'cool stuff here' to me.\" I think 'advanced search' does scream that a little more.</p>\n<p>Also a big part of my personal motivation here is that I'd like to move the \"all crates\" dropdown onto the search results page, as part of the overall decluttering project. For most page visits it's not relevant, and it takes up super-prime real estate at the top of the page.</p>",
        "id": 265457021,
        "sender_full_name": "jsha",
        "timestamp": 1639882192
    },
    {
        "content": "<blockquote>\n<p>the idea here is that advanced search is an on-ramp to the syntax. E.g. if you check the \"exact match\" box it puts quotes around whatever you have typed so far. If you filter by type fn, it puts fn:  in front of your search.</p>\n</blockquote>\n<p>Ah, that was not obvious to me from your description. I can see the value of that.</p>",
        "id": 265495457,
        "sender_full_name": "Noah Lev",
        "timestamp": 1639941583
    },
    {
        "content": "<blockquote>\n<p>Also a big part of my personal motivation here is that I'd like to move the \"all crates\" dropdown onto the search results page, as part of the overall decluttering project. For most page visits it's not relevant, and it takes up super-prime real estate at the top of the page.</p>\n</blockquote>\n<p>I agree it'd be good to move the all crates dropdown out of the primary visual space; the only downside I see is that it might slow down searches since you'd be narrowing after the search was performed?</p>",
        "id": 265495537,
        "sender_full_name": "Noah Lev",
        "timestamp": 1639941639
    },
    {
        "content": "<p>The search takes less than 100ms to run, so that should be fine. ;)</p>",
        "id": 265497824,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639944740
    },
    {
        "content": "<p>Are you sure that's true for large crates? IME rustdoc's output doesn't scale very well ...</p>",
        "id": 265509406,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639960257
    },
    {
        "content": "<p>For very big crates, it's indeed a bit slower. But still under a second for the biggest I could find (stm32 iirc).</p>",
        "id": 265537382,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639991460
    }
]
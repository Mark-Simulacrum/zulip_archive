[
    {
        "content": "<p>Does anyone have any insight why a function marked with <code>#[target_feature(...)]</code> would prevent doctests from running for that function?</p>",
        "id": 262960264,
        "sender_full_name": "Eric Huss",
        "timestamp": 1638151095
    },
    {
        "content": "<p>I have no idea, sorry. Doctests are very hacky in general.</p>",
        "id": 262960769,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638151786
    },
    {
        "content": "<p>Oh, I see, <code>#[target_feature]</code> is treated as <code>#[doc(cfg(target_feature=\"...\"))]</code></p>",
        "id": 262960840,
        "sender_full_name": "Eric Huss",
        "timestamp": 1638151898
    },
    {
        "content": "<p>That should probably be documented somewhere.</p>",
        "id": 262960892,
        "sender_full_name": "Eric Huss",
        "timestamp": 1638151935
    },
    {
        "content": "<p>... I was not aware that was the case <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 262960954,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638152074
    },
    {
        "content": "<p>And I wouldn't expect it to impact doctests? Doc(cfg) should only affect the html rendering</p>",
        "id": 262960960,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638152102
    },
    {
        "content": "<p>My impression from <a href=\"https://github.com/rust-lang/rust/issues/43348\">#43348</a> is that doc(cfg) affecting doctests was intentional.  </p>\n<p>And I think it sorta makes sense.  You don't want to run tests for functions that don't work on the current architecture.  It would be nice if there was some indication it was skipped, but the test harness doesn't really support that. (They could maybe be \"ignored\", but people have different opinions about what <code>ignore</code> should be used for.)</p>",
        "id": 262963244,
        "sender_full_name": "Eric Huss",
        "timestamp": 1638155808
    }
]
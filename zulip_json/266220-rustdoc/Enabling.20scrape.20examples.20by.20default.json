[
    {
        "content": "<p>There was some confusion in my <a href=\"https://github.com/rust-lang/cargo/pull/10343\">Cargo PR</a> about when/how the scrape examples feature would be enabled.</p>\n<p>I think that once the feature is stabilized, it should be enabled by default when you run <code>cargo doc</code>. If it requires a flag, I suspect most people would never use it. </p>\n<p>It will definitely increase the height of any given item's documentation. But if someone wants to skim the documentation top-to-bottom, I think it's already true today that they either need to use the section-minimize <code>[-]</code> mechanism, or they use the table of contents in the left sidebar. </p>\n<p>Additionally, I think if the entire section is hidden behind an expander, a lot of people will never use it. I just today ran a study where I watched someone write Rust code while using documentation with scraped examples. Even with the first example being shown by default, they still didn't notice it or the \"more examples\" button until I pointed it out.</p>\n<p>cc <span class=\"user-mention\" data-user-id=\"210316\">@GuillaumeGomez</span></p>",
        "id": 270305617,
        "sender_full_name": "Will Crichton",
        "timestamp": 1643757623
    },
    {
        "content": "<p>Again, I'm sorry. And I think you're right about making it enabled by default. It's just that the intent changes.</p>",
        "id": 270306359,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643757969
    },
    {
        "content": "<p>So currently, with your feature there is one example displayed and we can expand to see more of them. What I suggest is to hide them all by default in a \"see examples where this item is used\" and when expanded, we display all of them.</p>",
        "id": 270306477,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758038
    },
    {
        "content": "<p>Does it sound reasonable?</p>",
        "id": 270306483,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758044
    },
    {
        "content": "<p>That would at least prevent to increase the page total height crazily and provide a nice information as well.</p>",
        "id": 270306524,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758067
    },
    {
        "content": "<p>Also cc <span class=\"user-mention\" data-user-id=\"315412\">@jsha</span> since you're our expert here :)</p>",
        "id": 270306628,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758116
    },
    {
        "content": "<p>So one thing I've been thinking about lately - it might be good to give each method its own page? For instance that's how MDN does it: <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/Node#methods\">https://developer.mozilla.org/en-US/docs/Web/API/Node#methods</a></p>",
        "id": 270306631,
        "sender_full_name": "jsha",
        "timestamp": 1643758117
    },
    {
        "content": "<p>That is, not its own page just for scrape-examples, but its own page in general.</p>",
        "id": 270306664,
        "sender_full_name": "jsha",
        "timestamp": 1643758134
    },
    {
        "content": "<p>That would explode the number of files</p>",
        "id": 270306720,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758171
    },
    {
        "content": "<p>But to the specific issue - I think <span class=\"user-mention\" data-user-id=\"265377\">@Will Crichton</span> is right that if we hide examples by default they are not very useful.</p>",
        "id": 270306757,
        "sender_full_name": "jsha",
        "timestamp": 1643758193
    },
    {
        "content": "<p>Hum ok...</p>",
        "id": 270306862,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758233
    },
    {
        "content": "<p>We could reduce the size of the minimized viewer. Right now it shows a maximum of 10 lines, but that could be e.g. 5 instead.</p>",
        "id": 270306938,
        "sender_full_name": "Will Crichton",
        "timestamp": 1643758272
    },
    {
        "content": "<p>I have two \"issues\" with this: I already told the first (I think making something very apparent, would somewhat fix the issue) but it seems I'm the only one so it's fine, but the second is that it would make doc examples mostly useless (which might be a good or bad thing, not sure). Doc examples are also tests, so not sure on the impact there</p>",
        "id": 270307094,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758354
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"265377\">Will Crichton</span> <a href=\"#narrow/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default/near/270306938\">said</a>:</p>\n<blockquote>\n<p>We could reduce the size of the minimized viewer. Right now it shows a maximum of 10 lines, but that could be e.g. 5 instead.</p>\n</blockquote>\n<p>That could be an idea, indeed!</p>",
        "id": 270307104,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758365
    },
    {
        "content": "<p><del>On a side note: I still think that the help link on <strong>every</strong> example is way too much. Again, it increases the page size for a very small gain.</del></p>\n<p>EDIT: I actually see it on <a href=\"https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and\">https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and</a> but not in the rustdoc source code. Nevermind then!</p>",
        "id": 270307337,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758500
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"210316\">GuillaumeGomez</span> <a href=\"#narrow/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default/near/270307094\">said</a>:</p>\n<blockquote>\n<p>I have two \"issues\" with this: [...] the second is that it would make doc examples mostly useless (which might be a good or bad thing, not sure). Doc examples are also tests, so not sure on the impact there</p>\n</blockquote>\n<p>I think doc examples still have a role. A scraped example isn't necessarily pedagogic -- it's just an instance of usage, that may be complicated by all kinds of context. Whereas a doc example can be designed to help specifically explain the item being documented.</p>",
        "id": 270307822,
        "sender_full_name": "Will Crichton",
        "timestamp": 1643758756
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"210316\">GuillaumeGomez</span> <a href=\"#narrow/stream/266220-rustdoc/topic/Enabling.20scrape.20examples.20by.20default/near/270307337\">said</a>:</p>\n<blockquote>\n<p><del>On a side note: I still think that the help link on <strong>every</strong> example is way too much. Again, it increases the page size for a very small gain.</del></p>\n<p>EDIT: I actually see it on <a href=\"https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and\">https://willcrichton.net/example-analyzer/warp/trait.Filter.html#method.and</a> but not in the rustdoc source code. Nevermind then!</p>\n</blockquote>\n<p>That feature is still in a PR: <a href=\"https://github.com/rust-lang/rust/pull/93217\">https://github.com/rust-lang/rust/pull/93217</a></p>",
        "id": 270307890,
        "sender_full_name": "Will Crichton",
        "timestamp": 1643758797
    },
    {
        "content": "<p>I'll comment on the PR directly then, thanks for the pointer!</p>\n<blockquote>\n<p>I think doc examples still have a role. A scraped example isn't necessarily pedagogic -- it's just an instance of usage, that may be complicated by all kinds of context. Whereas a doc example can be designed to help specifically explain the item being documented.</p>\n</blockquote>\n<p>Well, I guess we'll see how it'll unroll in the end.</p>\n<p>My main worry is that the page size will dramatically increase but I guess it's not really a valid argument. I like having usage in examples too. <em>sigh</em></p>\n<p>Well, let's try to minimize the impact on the global height and it's fine for me. Thanks a lot for working on this feature, I really like it. :)</p>",
        "id": 270308237,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643758972
    },
    {
        "content": "<p>FWIW, I like the current approach of just showing one example by default and having a toggle to show more.</p>",
        "id": 270612659,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643920110
    },
    {
        "content": "<p>Also, we can always tweak this later, even after stabilization.</p>",
        "id": 270612679,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643920122
    },
    {
        "content": "<p>One small nitpick: the current phrasing of the heading is \"Examples found in repository\". Would \"Examples found in crate\" be better, or would it be confusing because it doesn't (yet) show examples found in the actual crate source code?</p>",
        "id": 270612798,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643920171
    },
    {
        "content": "<p>Examples can be found outside the crate being documented, if there are multiple crates in the Cargo workspace.</p>",
        "id": 270617992,
        "sender_full_name": "Will Crichton",
        "timestamp": 1643922531
    },
    {
        "content": "<p>Yeah, ok</p>",
        "id": 270618052,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643922576
    }
]
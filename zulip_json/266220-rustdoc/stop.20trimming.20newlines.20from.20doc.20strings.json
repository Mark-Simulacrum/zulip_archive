[
    {
        "content": "<p>Newlines are currently trimmed, surprisingly, from <code>doc</code> attributes (<a href=\"https://github.com/rust-lang/rust/issues/91201\">#91201</a>). PR <a href=\"https://github.com/rust-lang/rust/issues/92357\">#92357</a> fixes this, but I realize it's potentially a breaking change. What should we do?</p>",
        "id": 266290666,
        "sender_full_name": "Noah Lev",
        "timestamp": 1640724114
    },
    {
        "content": "<p>cc <span class=\"user-mention\" data-user-id=\"210316\">@GuillaumeGomez</span></p>",
        "id": 266290670,
        "sender_full_name": "Noah Lev",
        "timestamp": 1640724120
    },
    {
        "content": "<p>To be more precise, it is a breaking change for mixed doc comments because each different doc comment is trimmed, which isn't the case anymore. However, the start and end of the merged doc comments are trimmed by <code>pulldown-cmark</code>.</p>",
        "id": 266290848,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1640724248
    },
    {
        "content": "<p>So, just a fix, not sure if breaking change applies here.</p>",
        "id": 266290860,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1640724266
    },
    {
        "content": "<p>I meant \"breaking\" in the sense that it'll change rustdoc's output; limited breaking changes are usually ok if they fix bugs. I still want to get some feedback from other people before approving it though :)</p>",
        "id": 266290956,
        "sender_full_name": "Noah Lev",
        "timestamp": 1640724347
    },
    {
        "content": "<p>I see. Well, let's see if everyone is fine with it then.</p>",
        "id": 266291056,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1640724433
    },
    {
        "content": "<p>I'm fine with <a href=\"https://github.com/rust-lang/rust/issues/92357\">#92357</a></p>",
        "id": 266360973,
        "sender_full_name": "jsha",
        "timestamp": 1640797127
    },
    {
        "content": "<p>Does T-compiler need to chime in for <a href=\"https://github.com/rust-lang/rust/issues/92357\">#92357</a> or can I remove the <code>T-compiler</code> label?</p>",
        "id": 266418385,
        "sender_full_name": "apiraino",
        "timestamp": 1640860114
    },
    {
        "content": "<p>I think it's fine to remove the label but I'm not 100% sure if we should. We're changing compiler source code after all.</p>",
        "id": 266422085,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1640864090
    },
    {
        "content": "<p>ok. Since it's labeled <code>s-waiting-on-team</code> &amp;&amp; <code>T-compiler</code> it will end on their table today, so just wanted to be sure to provide some context for them</p>",
        "id": 266424647,
        "sender_full_name": "apiraino",
        "timestamp": 1640866959
    },
    {
        "content": "<p>I wonder if we should move that code to rustdoc ... does it need to be in the compiler?</p>",
        "id": 266466007,
        "sender_full_name": "Noah Lev",
        "timestamp": 1640906051
    },
    {
        "content": "<p>It's used by other external tools (I think clippy) iirc</p>",
        "id": 266511341,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1640966914
    },
    {
        "content": "<p>not clippy, but RLS:</p>\n<div class=\"codehilite\"><pre><span></span><code>/home/jnelson/rust-lang/rust/compiler/rustc_save_analysis/src/lib.rs\n13:use rustc_ast::util::comments::beautify_doc_string;\n828:                result.push_str(beautify_doc_string(val).as_str());\n</code></pre></div>",
        "id": 266636811,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1641163395
    }
]
[
    {
        "content": "<p>@_<strong>Joshua Nelson|232545</strong> <a href=\"#narrow/stream/122651-general/topic/Glacier.20but.20for.20non-ICE.20bugs/near/266263171\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"330154\">The 8472</span> <a href=\"#narrow/stream/122651-general/topic/Glacier.20but.20for.20non-ICE.20bugs/near/266222116\">said</a>:</p>\n<blockquote>\n<p>yeah, considering what they're doing UI tests run damn fast. ~130 CPU-milliseconds  per test.</p>\n</blockquote>\n<p>rustdoc UI tests are like 10x slower than this for some reason, it would be nice to track down why</p>\n</blockquote>\n<p>Do you mean src/test/rustdoc or src/test/rustdoc-ui? because the latter are only ~5 slower for me</p>",
        "id": 271768527,
        "sender_full_name": "The 8472",
        "timestamp": 1644790625
    },
    {
        "content": "<p>The latter I assume. But both are slow</p>",
        "id": 271770099,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1644792774
    },
    {
        "content": "<p>For the first it's because we need to generate docs and check the generated DOM</p>",
        "id": 271770178,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1644792849
    },
    {
        "content": "<p>I've been meaning to look into the performance issues with the non-UI tests for rustdoc for a while now because it really is quite slow</p>",
        "id": 271913616,
        "sender_full_name": "Noah Lev",
        "timestamp": 1644887688
    },
    {
        "content": "<p>From profiles it looks like it's doing a lot of metadata loading, more than regular UI tests, the call tree under <code>rustdoc::passes::collect_trait_impls::collect_trait_impls</code></p>",
        "id": 271952780,
        "sender_full_name": "The 8472",
        "timestamp": 1644920404
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/93954\">https://github.com/rust-lang/rust/pull/93954</a> might help with some of the tests, at least.</p>",
        "id": 271966066,
        "sender_full_name": "simulacrum",
        "timestamp": 1644927954
    },
    {
        "content": "<p>That will only effect <code>src/test/rustdoc-json</code></p>",
        "id": 272098518,
        "sender_full_name": "Nixon Enraght-Moony",
        "timestamp": 1645007850
    }
]
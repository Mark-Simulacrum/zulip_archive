[
    {
        "content": "<p>I have an interesting problem for y'all. I'm hitting an error in <a href=\"https://github.com/rust-lang/rust/issues/88019\">#88019</a> because the changes I'm making there lead to doctests running on non-exported macros. Previously, doctests were only run on exported macros. I'm not entirely sure what to do about it. Keeping the old behavior is trivial, but it may not be desirable. After all, it's probably bad for the tests to silently be ignored, particularly when that doesn't match with the behavior for other private items. At the same time, starting to run them is backwards incompatible, as the error I'm getting demonstrates.</p>",
        "id": 249445313,
        "sender_full_name": "inquisitivecrystal",
        "timestamp": 1628924017
    },
    {
        "content": "<p>The simplest thing to do is probably to leave a FIXME. Then, in future. someone can make it so that the test generates a warning but doesn't actually fail.</p>",
        "id": 249445486,
        "sender_full_name": "inquisitivecrystal",
        "timestamp": 1628924306
    },
    {
        "content": "<p>I think a FIXME is a good idea, that makes it less likely we have to revert. That said I definitely think we should run these tests, for two reasons:</p>\n<ul>\n<li>it's only a test failure, not a compile failure, and the code is actually wrong - the breakage isn't needless, the user was presumably expecting these tests to run or they wouldn't have written them</li>\n<li>not many people are going to be writing doctests on private macros and also using --document-private-items when testing</li>\n</ul>",
        "id": 249462295,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1628951154
    }
]
[
    {
        "content": "<p>Hi everyone. <a href=\"https://github.com/rust-lang/rust/pull/91735\">https://github.com/rust-lang/rust/pull/91735</a> is removing all our <code>.svg</code> images and is instead generating one font to handle all of them as one. It also takes all of the icons from the fontawesome font for coherency.</p>\n<p>The only problem is how the font is generated from the icon: by using an external website. <span class=\"user-mention\" data-user-id=\"307537\">@Noah Lev</span> emitted a concern about this and I agree with them. I'm not too sure what's the best way to ensure we won't be stuck in the future because of this.</p>\n<p>What do you think?</p>",
        "id": 265138123,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639651774
    },
    {
        "content": "<p>hmm why is that not using font-awesome-as-a-crate?</p>",
        "id": 265138917,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639652260
    },
    {
        "content": "<p>Yeah I think any tool we use here should be reproducible and not rely on a web based service existing. What we should also have is clear instructions for how to generate the font documented in the folder alongside the files for its component icons</p>\n<p>There are likely open source or otherwise free tools for this.</p>",
        "id": 265139006,
        "sender_full_name": "Manish Goregaokar",
        "timestamp": 1639652297
    },
    {
        "content": "<blockquote>\n<p>hmm why is that not using font-awesome-as-a-crate?</p>\n</blockquote>\n<p>Too big for our use. Importing a whole font for 4 images isn't worth it.</p>",
        "id": 265145503,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639656207
    },
    {
        "content": "<p>Just like what <span class=\"user-mention\" data-user-id=\"132040\">@Manish Goregaokar</span> suggested: having a free tool and even if possible a script to do it automatically would be the best I think.</p>",
        "id": 265145627,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639656288
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"210316\">GuillaumeGomez</span> <a href=\"#narrow/stream/266220-rustdoc/topic/Generate.20font.20for.20icons/near/265145503\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>hmm why is that not using font-awesome-as-a-crate?</p>\n</blockquote>\n<p>Too big for our use. Importing a whole font for 4 images isn't worth it.</p>\n</blockquote>\n<p>do you mean in rustdoc itself, or in the generated documentation?</p>",
        "id": 265147915,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639657642
    },
    {
        "content": "<p>the generated documentation</p>",
        "id": 265148689,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658115
    },
    {
        "content": "<p>font-awesome-as-a-crate doesn't include all the icons in the generated documentation</p>",
        "id": 265148834,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658183
    },
    {
        "content": "<p>it allows grabbing the raw svg when you need to include an icon in the html</p>",
        "id": 265149107,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658310
    },
    {
        "content": "<p>Except we don't want the svg, we want one font to reduce the number of downloads</p>",
        "id": 265149184,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658374
    },
    {
        "content": "<p>we currently have svg and this PR is replacing them with one font</p>",
        "id": 265149201,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658388
    },
    {
        "content": "<p>I mean you can inline the SVGs</p>",
        "id": 265149316,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658436
    },
    {
        "content": "<p>especially if you use them only once in the page (like the settings cog)</p>",
        "id": 265149333,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658452
    },
    {
        "content": "<p>and even for repeated icons (like the flask for experimental features) compression should cut down the costs</p>",
        "id": 265149472,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658534
    },
    {
        "content": "<p>having everything inline in the page also prevents the icons appearing later while the font is being loaded</p>",
        "id": 265149529,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658577
    },
    {
        "content": "<p>Inlining SVG means duplicating the SVG content into all the files</p>",
        "id": 265149673,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658650
    },
    {
        "content": "<p>which means increasing quite a lot the rendered HTML size overall</p>",
        "id": 265149679,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658662
    },
    {
        "content": "<p>icons are quite small tbh, and <a href=\"http://docs.rs\">docs.rs</a> also inlines the icons</p>",
        "id": 265149707,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658684
    },
    {
        "content": "<p>I really don't think it's a good idea</p>",
        "id": 265149734,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658700
    },
    {
        "content": "<p><a href=\"https://github.blog/2016-02-22-delivering-octicons-with-svg/\">https://github.blog/2016-02-22-delivering-octicons-with-svg/</a></p>",
        "id": 265149752,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639658709
    },
    {
        "content": "<p>Also, <a href=\"http://docs.rs\">docs.rs</a> has very few different pages</p>",
        "id": 265149760,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639658712
    },
    {
        "content": "<p>Using SVGs makes them practically uncolorable with CSS</p>",
        "id": 265184651,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639673725
    },
    {
        "content": "<p>if they're inline svgs it's possible to change their color with css</p>",
        "id": 265184856,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1639673814
    },
    {
        "content": "<p>There was another problem with font awesome as a crate. The license is forbidden by tidy.</p>",
        "id": 265185225,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639673969
    },
    {
        "content": "<p>But we could just vendor them for now as we're already doing</p>",
        "id": 265186134,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639674297
    },
    {
        "content": "<p>the license of the crate is the license of font-awesome, so vendoring them doesn't actually help</p>",
        "id": 265186270,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639674339
    },
    {
        "content": "<p>As for the repeating inlines, we could use <code>&lt;use&gt;</code> but I don't think it would be worth it given how small the icons are.</p>",
        "id": 265186441,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639674401
    },
    {
        "content": "<p>It was found we're already using the font awesome brush icon</p>",
        "id": 265186829,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639674577
    },
    {
        "content": "<p>yes, and that's in direct violation of the license and I've had to email core about it</p>",
        "id": 265186992,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639674628
    },
    {
        "content": "<p>please let's not make it worse</p>",
        "id": 265187001,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639674633
    },
    {
        "content": "<p>I'm certainly not advocating for making anything worse haha. I'll let the PR wait until we've figured out the license stuff.</p>",
        "id": 265190641,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639676257
    }
]
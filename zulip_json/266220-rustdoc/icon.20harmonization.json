[
    {
        "content": "<p>I posted an issue about harmonizing the icon styles internally within rustdoc, and externally with <a href=\"http://crates.io\">crates.io</a> and <a href=\"http://docs.rs\">docs.rs</a>. @pitaj stepped up and has a proposal: <a href=\"https://github.com/rust-lang/rust/issues/91309#issuecomment-986137027\">https://github.com/rust-lang/rust/issues/91309#issuecomment-986137027</a>. Thoughts?</p>",
        "id": 263745878,
        "sender_full_name": "jsha",
        "timestamp": 1638673468
    },
    {
        "content": "<p>If I understand correctly, it adds a whole new font for a few icons, which isn't great in my opinion. What would be better would be to just extract the icons we want and to distribute them with rustdoc. Of course, if it's already what's suggested, then looks good to me!</p>",
        "id": 263767179,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1638708952
    },
    {
        "content": "<p>agreed. I wouldn't accept adding a whole font just for the icons. i believe pitaj is on the same page and would use the individual SVG files.</p>",
        "id": 263776798,
        "sender_full_name": "jsha",
        "timestamp": 1638722434
    },
    {
        "content": "<p>Yeah my plan is to use individual svgs</p>",
        "id": 263779625,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1638725840
    },
    {
        "content": "<p>Perfect then. <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 263780416,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1638726888
    },
    {
        "content": "<p>One thing that I would consider, if it's possible, is to pull in <a href=\"https://docs.rs/font-awesome-as-a-crate/latest/font_awesome_as_a_crate/\">font-awesome-as-a-crate</a>, and generate an icons.css file with all of the icons that rustdoc uses. That crate is produced by <a href=\"http://docs.rs\">docs.rs</a> already.</p>",
        "id": 263783906,
        "sender_full_name": "Michael Howell",
        "timestamp": 1638731472
    },
    {
        "content": "<p>I would like to use font-awesome-as-a-crate, but it doesn't appear to be useable in a const context. It does seem a little weird to me that it generates a giant match at compile time instead of just creating a bunch of namespaced <code>const &amp;str</code></p>",
        "id": 263796393,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1638748542
    },
    {
        "content": "<p>I guess with how their templating works, they need it to work in a dynamic context (but it could be expanded to support either pretty easily). As it is, I'll need to introduce some error handling to map their error type over.</p>",
        "id": 263796693,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1638748899
    },
    {
        "content": "<p>We could submit a patch to <a href=\"http://docs.rs\">docs.rs</a> to make it a <code>const fn</code>? You’ve been permitted to use <code>match</code> in a const context since 1.46, apparently.</p>",
        "id": 263797260,
        "sender_full_name": "Michael Howell",
        "timestamp": 1638749694
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/docs.rs/pull/1573\">https://github.com/rust-lang/docs.rs/pull/1573</a></p>",
        "id": 263799337,
        "sender_full_name": "Michael Howell",
        "timestamp": 1638752573
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"334713\">@Peter Jaszkowiak</span> just merged <span class=\"user-mention\" data-user-id=\"210053\">@Michael Howell</span> 's PR, you should be able to use it now :)</p>",
        "id": 263799522,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638752831
    },
    {
        "content": "<p>And I just released 0.2.0 with the changes in it <a href=\"https://crates.io/crates/font-awesome-as-a-crate\">https://crates.io/crates/font-awesome-as-a-crate</a></p>",
        "id": 263799760,
        "sender_full_name": "Michael Howell",
        "timestamp": 1638753169
    },
    {
        "content": "<p>Sounds like a good idea!</p>",
        "id": 263823890,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1638782054
    },
    {
        "content": "<p>Thanks <span class=\"user-mention\" data-user-id=\"210053\">@Michael Howell</span> and <span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> for that improvement. I think in at least one case <a href=\"https://github.com/rust-lang/rust/blob/3c857f48ce12d1f98f3ea6d48eb9e33d8d60c985/src/librustdoc/html/highlight.rs#L54\">here</a> there may not be access to root path and resource suffix information. This would make it very hard to replace that <code>ⓘ</code> with an SVG <code>&lt;img&gt;</code>.</p>\n<p>So I think that inlining the SVGs like <a href=\"http://docs.rs\">docs.rs</a> does, perhaps utilizing <a href=\"https://developer.mozilla.org/en-US/docs/Web/SVG/Element/use\"><code>&lt;svg use&gt;</code></a> to avoid duplication, would be a better strategy.</p>",
        "id": 264256702,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639025247
    },
    {
        "content": "<p>another approach we've used elsewhere: we can set a background-image using CSS. We write those into rustdoc.css at doc generation time in write_shared.css. See <a href=\"https://github.com/rust-lang/rust/pull/91062\">https://github.com/rust-lang/rust/pull/91062</a>. It's not my _favorite_ trick, and I'd like to find a way to get rid of it, but as long as we have it we might as well use it.</p>",
        "id": 264257614,
        "sender_full_name": "jsha",
        "timestamp": 1639026138
    },
    {
        "content": "<p>Yeah that might be the better approach here. Something like <code>&lt;span class=\"icon icon-info\"&gt;ⓘ&lt;/span&gt;</code></p>",
        "id": 264257855,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639026449
    },
    {
        "content": "<p>/better/easier/</p>",
        "id": 264257863,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639026460
    },
    {
        "content": "<p>Is there a trick to rebuild rustdoc and use the new one to generate docs?<br>\n<code>./x.py build &amp;&amp; ./x.py doc library/std</code> doesn't seem to be working</p>",
        "id": 264260467,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639029492
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"334713\">@Peter Jaszkowiak</span> x.py should be rebuilding automatically on changes - what files did you modify? Maybe cargo isn't noticing the changes for some reason?</p>",
        "id": 264304960,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639058503
    },
    {
        "content": "<p>Also, can you post your config.toml? I think <code>doc</code> uses stage 0 by default</p>",
        "id": 264305083,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639058542
    },
    {
        "content": "<p>I tried the default \"tools\" config (profile = tools), and I tried an empty config.toml (all defaults)</p>",
        "id": 264330351,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639068801
    },
    {
        "content": "<p>ok - when using the tools profile, try <code>--stage 2</code>, and when using the empty config.toml try <code>--stage 1</code>, that should pick up on your  changes</p>",
        "id": 264331148,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639069143
    },
    {
        "content": "<p>(making a PR changing the default now)</p>",
        "id": 264331165,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639069147
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/266220-rustdoc/topic/icon.20harmonization/near/264331165\">said</a>:</p>\n<blockquote>\n<p>(making a PR changing the default now)</p>\n</blockquote>\n<p><a href=\"https://github.com/rust-lang/rust/pull/91716\">https://github.com/rust-lang/rust/pull/91716</a></p>",
        "id": 264336606,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639071240
    },
    {
        "content": "<p>Stage 2 worked, thanks!</p>",
        "id": 264361690,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639081803
    },
    {
        "content": "<p>Maybe that should be added to the rustdoc portion of the contribution guide</p>",
        "id": 264361836,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639081881
    },
    {
        "content": "<p>Sounds useful - <span class=\"user-mention\" data-user-id=\"334713\">@Peter Jaszkowiak</span>  are you interested in making a PR? ;)</p>",
        "id": 264365265,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639083540
    },
    {
        "content": "<p>tidy is failing on \"invalid license <code>CC-BY-4.0 AND MIT</code> in <code>font-awesome-as-a-crate 0.2.0 (registry+https://github.com/rust-lang/crates.io-index)</code>\"</p>",
        "id": 264407105,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639116623
    },
    {
        "content": "<p>Seems weird, pretty sure the AND means you can choose only MIT</p>",
        "id": 264407379,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639117040
    },
    {
        "content": "<p>Looks like it needs to be added here <a href=\"https://github.com/rust-lang/rust/blob/19ecce332e56941ea0dd2a805270faa102acdb14/src/tools/tidy/src/deps.rs#L27\">https://github.com/rust-lang/rust/blob/19ecce332e56941ea0dd2a805270faa102acdb14/src/tools/tidy/src/deps.rs#L27</a></p>",
        "id": 264409936,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639120243
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/pull/91735\">https://github.com/rust-lang/rust/pull/91735</a></p>",
        "id": 264411106,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639121561
    },
    {
        "content": "<p>Prelimary PR is up. Has some pretty substantial hackery, let me know what yall think</p>",
        "id": 264411120,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639121591
    },
    {
        "content": "<p>\"OR\" means you can choose only MIT. \"AND\" means that the crate contains code under both licenses, so you need to comply with both.</p>",
        "id": 264480113,
        "sender_full_name": "Michael Howell",
        "timestamp": 1639157459
    },
    {
        "content": "<p>Also, and maybe this is crazy talk, but is there a reason why CC-BY-4.0 can't be added to the allowed license list? The FSF considers it compatible with the GPL &lt;<a href=\"https://www.gnu.org/licenses/license-list.en.html#ccby\">https://www.gnu.org/licenses/license-list.en.html#ccby</a>&gt;.</p>",
        "id": 264482211,
        "sender_full_name": "Michael Howell",
        "timestamp": 1639158452
    },
    {
        "content": "<p>The comment at the top of the exceptions list says that they \"should be considered bugs.\" If rustdoc pulls in font-awesome, that's not a bug, that's a deliberate choice. Also, it's perfectly reasonable to expect people, even proprietary software companies selling closed-source crates, to distribute rustdoc pages, which will definitely contain both font-awesome and the crate being documented, so if TRF lawyers have a problem with CC-BY-4.0, then we probably shouldn't be using font-awesome at all.</p>",
        "id": 264483113,
        "sender_full_name": "Michael Howell",
        "timestamp": 1639158844
    },
    {
        "content": "<p>Doesn't it need to be compatible with MIT / Apache?</p>",
        "id": 264490970,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639161969
    },
    {
        "content": "<p>I think the existing brush icon actually is the font awesome icon, so the license is being used already</p>",
        "id": 264491151,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639162064
    },
    {
        "content": "<p>The only requirements of CCBY4 are attribution and notice of changes made (none were), but I don't know where exactly that attribution needs to be displayed</p>",
        "id": 264491657,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639162300
    },
    {
        "content": "<p>Seems like if CCBY4 is added to LICENSES, that would mean it's compatible with the MIT / Apache license of the compiler, runtime, and all other crates. I thought this is actually what EXCEPTIONS was for, licenses compatible with tooling but not for the whole suite</p>",
        "id": 264492212,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639162528
    },
    {
        "content": "<p>these would normally be questions for core, but I don't have much hope of getting an answer back any time soon :/</p>",
        "id": 264507139,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639169903
    },
    {
        "content": "<p>The only reason why the MIT license is there is to be compatible with GPLv2, so GPL-compatibility is obviously something the Rust team wants from their license choices. That's also why the pure-Apache-2.0 items are required to be listed in the EXCEPTIONS list, while pure-MIT is in the LICENSES list.</p>",
        "id": 264516842,
        "sender_full_name": "Michael Howell",
        "timestamp": 1639174699
    },
    {
        "content": "<p>I think licensing stuff does come up in the compiler weekly meetings though - <span class=\"user-mention\" data-user-id=\"250987\">@apiraino</span> do you know the process for asking about legal issues?</p>",
        "id": 264516955,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639174783
    },
    {
        "content": "<p>correct, there is a reminder at each meeting exactly for these matters. <br>\n<a href=\"https://hackmd.io/0456JfXnQVeaKhiCxXNo2w\">https://hackmd.io/0456JfXnQVeaKhiCxXNo2w</a><br>\n(I think it's basically a forward to the core team, so your comment may apply)</p>",
        "id": 264517228,
        "sender_full_name": "apiraino",
        "timestamp": 1639174952
    },
    {
        "content": "<p><a href=\"https://prev.rust-lang.org/en-US/faq.html#why-a-dual-mit-asl2-license\">https://prev.rust-lang.org/en-US/faq.html#why-a-dual-mit-asl2-license</a></p>",
        "id": 264517237,
        "sender_full_name": "Michael Howell",
        "timestamp": 1639174959
    },
    {
        "content": "<p>The brush may look like the one used in fontawesome but I'm pretty sure I didn't get it from there to avoid license issues</p>",
        "id": 264517341,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175036
    },
    {
        "content": "<p>Where did you get it from?</p>",
        "id": 264517389,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639175048
    },
    {
        "content": "<p>iconfinder with filter \"no license\"</p>",
        "id": 264517406,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175063
    },
    {
        "content": "<p>(that's how I take all my icons)</p>",
        "id": 264517418,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175070
    },
    {
        "content": "<p>So if the icon was stolen, that's another problem and I definitely don't know how to solve this issue</p>",
        "id": 264517480,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175116
    },
    {
        "content": "<p>replacing it would fix it I guess</p>",
        "id": 264517489,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175121
    },
    {
        "content": "<p>I don't think there's such a thing as no license in US copyright law (by default I'm pretty sure only the author has copyright)</p>",
        "id": 264517491,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639175122
    },
    {
        "content": "<p>nor do I see that filter on the iconfinder website <a href=\"/user_uploads/4715/3wo6gfeb0mlIqSTQk1XXOwJP/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/3wo6gfeb0mlIqSTQk1XXOwJP/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/3wo6gfeb0mlIqSTQk1XXOwJP/image.png\"></a></div>",
        "id": 264517504,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639175138
    },
    {
        "content": "<p>\"no link back\" was the one</p>",
        "id": 264517925,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175411
    },
    {
        "content": "<p>Gotcha. This looks like it: <a href=\"https://www.iconfinder.com/icons/1608441/brush_paint_icon\">https://www.iconfinder.com/icons/1608441/brush_paint_icon</a>. That says \"Font Awesome\" on the second metadata tag so I think we are in fact already using that license.</p>",
        "id": 264518168,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639175580
    },
    {
        "content": "<p>(the website say it uses <a href=\"https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=OFL\">https://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&amp;id=OFL</a>; I don't know what that is but it seems unlikely to have already been vetted)</p>",
        "id": 264518223,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639175626
    },
    {
        "content": "<p>I don't remember seeing it listed into the tags. Generally I avoid things I heard of because I wanted to avoid their license</p>",
        "id": 264518331,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175680
    },
    {
        "content": "<p>so I think it was stolen and I simply took that stolen image... Not great</p>",
        "id": 264518369,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175704
    },
    {
        "content": "<p>Well, if we use fontawesome, that's one less issue</p>",
        "id": 264518400,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1639175724
    },
    {
        "content": "<p>Does anyone have thoughts on the css svg url filter hack?</p>",
        "id": 264542567,
        "sender_full_name": "Peter Jaszkowiak",
        "timestamp": 1639199964
    }
]
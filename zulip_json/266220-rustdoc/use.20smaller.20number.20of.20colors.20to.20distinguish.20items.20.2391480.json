[
    {
        "content": "<p>This is a discussion thread for <span class=\"user-mention\" data-user-id=\"315412\">@jsha</span>'s PR <a href=\"https://github.com/rust-lang/rust/issues/91480\">#91480</a>.</p>",
        "id": 263662531,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638570883
    },
    {
        "content": "<p>Quoting <a href=\"https://github.com/rust-lang/rust/pull/91480#issuecomment-985717544\">Joshua</a>:</p>\n<blockquote>\n<p>I think we should only have different colors for things that could be confused in the search page. Since the only things that can have the same name must be in different namespaces, that suggests that we should have one color per namespace (value namespace, type ns, macro ns).</p>\n<p>I like the idea of doing this with the symbols you'd see in the source (e.g. <code>!</code>) but I don't think it works because that only helps for function-like macros, not values, types, or derive macros.</p>\n</blockquote>",
        "id": 263662906,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638571142
    },
    {
        "content": "<p>I agree, though I also feel like distinguishing different kinds of <em>types</em> can be valuable too. Although, overall, I think reducing the number of colors is probably worth it.</p>",
        "id": 263663084,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638571287
    },
    {
        "content": "<p>I do feel like the trait color is a tad too dark; it doesn't stand out as much as the (concrete) type color.</p>",
        "id": 263663109,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638571313
    },
    {
        "content": "<p>I'm happy to take suggestions on an improved trait color. I enjoyed playing around with some related colors on <a href=\"https://color.adobe.com/\">https://color.adobe.com/</a> if you'd like to try that. Note that part of the goal in <a href=\"https://github.com/rust-lang/rust/issues/59845\">https://github.com/rust-lang/rust/issues/59845</a> is to make some colors stand out slightly _less_ so they aren't a jarring presence when reading a method signature.</p>",
        "id": 263663501,
        "sender_full_name": "jsha",
        "timestamp": 1638571612
    },
    {
        "content": "<p>Also I tried to take a semi-prinicpled approach to choosing the colors (<a href=\"https://github.com/rust-lang/rust/issues/59845#issuecomment-974867619\">https://github.com/rust-lang/rust/issues/59845#issuecomment-974867619</a>):</p>\n<blockquote>\n<p>I tweaked those colors a bit so everything has the same saturation and balance (in the HSB color space)</p>\n</blockquote>\n<p>But of course color perception is complicated!</p>",
        "id": 263663578,
        "sender_full_name": "jsha",
        "timestamp": 1638571695
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307537\">Noah Lev</span> <a href=\"#narrow/stream/266220-rustdoc/topic/use.20smaller.20number.20of.20colors.20to.20distinguish.20items.20.2391480/near/263663084\">said</a>:</p>\n<blockquote>\n<p>I agree, though I also feel like distinguishing different kinds of <em>types</em> can be valuable too. Although, overall, I think reducing the number of colors is probably worth it.</p>\n</blockquote>\n<p>For arguments, I think it's mostly fine to not know the type just with its color. And in other cases where it's important (like the search results), <span class=\"user-mention\" data-user-id=\"315412\">@jsha</span> suggested to instead add text instead of only relying on colors. This is especially good for people with vision (sight? eye?) issues</p>",
        "id": 263663621,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1638571760
    },
    {
        "content": "<p>(\"vision issues\" is a reasonable term here)</p>",
        "id": 263663668,
        "sender_full_name": "jsha",
        "timestamp": 1638571797
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315412\">jsha</span> <a href=\"#narrow/stream/266220-rustdoc/topic/use.20smaller.20number.20of.20colors.20to.20distinguish.20items.20.2391480/near/263663578\">said</a>:</p>\n<blockquote>\n<p>Also I tried to take a semi-prinicpled approach to choosing the colors (<a href=\"https://github.com/rust-lang/rust/issues/59845#issuecomment-974867619\">https://github.com/rust-lang/rust/issues/59845#issuecomment-974867619</a>):</p>\n<blockquote>\n<p>I tweaked those colors a bit so everything has the same saturation and balance (in the HSB color space)</p>\n</blockquote>\n<p>But of course color perception is complicated!</p>\n</blockquote>\n<p>What we can see now is the result of a lot of people (including me) trying to make it better. Quite the nightmare haha</p>",
        "id": 263663670,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1638571800
    },
    {
        "content": "<p>BTW here's a link to the current rustdoc colors as a palette: <a href=\"https://color.adobe.com/rustdoc%20current%20theme-color-theme-18992096\">https://color.adobe.com/rustdoc%20current%20theme-color-theme-18992096</a></p>",
        "id": 263663788,
        "sender_full_name": "jsha",
        "timestamp": 1638571862
    },
    {
        "content": "<p>You can click over to the LAB colorspace (which is evidently isomorphic to LCH; I'm still learning the details - <a href=\"https://lea.verou.me/2020/04/lch-colors-in-css-what-why-and-how/\">https://lea.verou.me/2020/04/lch-colors-in-css-what-why-and-how/</a>).</p>",
        "id": 263663954,
        "sender_full_name": "jsha",
        "timestamp": 1638571976
    },
    {
        "content": "<p>LAB and LCH are supposed to be \"perceptually uniform.\" And you can see the main colors have pretty similar \"L\" (lightness) values: 47, 50, 46, 50. We could experiment with making \"L\" the same instead of making \"B\" (in HSB) the same.</p>",
        "id": 263664017,
        "sender_full_name": "jsha",
        "timestamp": 1638572031
    },
    {
        "content": "<p>Hmm, so what's the difference between brightness (B) and lightness (L)? <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 263664308,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572200
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"315412\">jsha</span> <a href=\"#narrow/stream/266220-rustdoc/topic/use.20smaller.20number.20of.20colors.20to.20distinguish.20items.20.2391480/near/263663788\">said</a>:</p>\n<blockquote>\n<p>BTW here's a link to the current rustdoc colors as a palette: <a href=\"https://color.adobe.com/rustdoc%20current%20theme-color-theme-18992096\">https://color.adobe.com/rustdoc%20current%20theme-color-theme-18992096</a></p>\n</blockquote>\n<p>Does \"current\" mean before or after your PR?</p>",
        "id": 263664364,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572258
    },
    {
        "content": "<p>ah, good point! that is before my PR. I'll prep one that matches my PR</p>",
        "id": 263664853,
        "sender_full_name": "jsha",
        "timestamp": 1638572587
    },
    {
        "content": "<p>Thanks! That'll be helpful.</p>",
        "id": 263664864,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572600
    },
    {
        "content": "<p>here are the proposed (very similar) colors: <a href=\"https://color.adobe.com/rustdoc%20proposed%20theme-color-theme-19077217\">https://color.adobe.com/rustdoc%20proposed%20theme-color-theme-19077217</a></p>",
        "id": 263664978,
        "sender_full_name": "jsha",
        "timestamp": 1638572700
    },
    {
        "content": "<p>so for the proposed colors you can see the \"brightness\" (HSB) is all the same at 68. But if you click over to LAB, they have quite different \"lightness.\" In particular the trait color is darker according to LAB.</p>",
        "id": 263665091,
        "sender_full_name": "jsha",
        "timestamp": 1638572779
    },
    {
        "content": "<p>Is there any way to (locally) tweak the colors in the link you sent or do I have to create a new palette?</p>",
        "id": 263665121,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572813
    },
    {
        "content": "<blockquote>\n<p>Hmm, so what's the difference between brightness (B) and lightness (L)?</p>\n</blockquote>\n<p>As I understand it, brightness (HSB) is an objective measure of brightness, while lightness (LAB, LCH) is a perceptual measure based on how our eyes work.</p>",
        "id": 263665127,
        "sender_full_name": "jsha",
        "timestamp": 1638572818
    },
    {
        "content": "<p>Ah, interesting</p>",
        "id": 263665141,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572827
    },
    {
        "content": "<p>Yeah, I think we should use LAB to pick the colors.</p>",
        "id": 263665164,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572844
    },
    {
        "content": "<p>Click \"Create using Theme\" to locally tweak colors</p>",
        "id": 263665187,
        "sender_full_name": "jsha",
        "timestamp": 1638572880
    },
    {
        "content": "<p>Aha, thanks!</p>",
        "id": 263665242,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572901
    },
    {
        "content": "<p>What about using <code>#6E4FC9</code> for the trait color?</p>",
        "id": 263665306,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638572972
    },
    {
        "content": "<p>looks reasonable to me!</p>",
        "id": 263665384,
        "sender_full_name": "jsha",
        "timestamp": 1638573008
    },
    {
        "content": "<p>I set the lightness value to 43, which is the same lightness as for methods. It looks more like the other colors to me now.</p>",
        "id": 263665405,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573034
    },
    {
        "content": "<p>We can also tweak these later too.</p>",
        "id": 263665414,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573040
    },
    {
        "content": "<p>Ok, so I think the current plan is:</p>\n<ul>\n<li>hyperlinks: #3873AD</li>\n<li>value namespace: #AD7C37</li>\n<li>type namespace: #AD378A</li>\n<li>trait namespace: #6E4FC9</li>\n</ul>",
        "id": 263665595,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573159
    },
    {
        "content": "<p>(I'll post that on GitHub too)</p>",
        "id": 263665614,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573171
    },
    {
        "content": "<p>What's the beige color (#FFF5D6) for?</p>",
        "id": 263665644,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573198
    },
    {
        "content": "<p>that's the <code>experimental nightly-only feature</code> color. I threw it in because the tool insists on having five colors</p>",
        "id": 263665675,
        "sender_full_name": "jsha",
        "timestamp": 1638573224
    },
    {
        "content": "<p>Ah <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 263665684,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573232
    },
    {
        "content": "<p>That one's not being changed currently, right?</p>",
        "id": 263665689,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638573238
    },
    {
        "content": "<p>nope</p>",
        "id": 263665692,
        "sender_full_name": "jsha",
        "timestamp": 1638573241
    },
    {
        "content": "<p>If you want to read more about perceptual color spaces: <a href=\"https://en.wikipedia.org/wiki/CIELAB_color_space\">https://en.wikipedia.org/wiki/CIELAB_color_space</a></p>",
        "id": 263666466,
        "sender_full_name": "jsha",
        "timestamp": 1638573763
    },
    {
        "content": "<p>Also this is pretty interesting about why certain colors appear brighter than others: <a href=\"https://en.wikipedia.org/wiki/Helmholtz%E2%80%93Kohlrausch_effect\">https://en.wikipedia.org/wiki/Helmholtz%E2%80%93Kohlrausch_effect</a></p>",
        "id": 263666711,
        "sender_full_name": "jsha",
        "timestamp": 1638573965
    },
    {
        "content": "<p>Thanks, I'll took a look :)</p>",
        "id": 263667303,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638574518
    },
    {
        "content": "<p>another item of discussion: what color should associated types be?</p>\n<p>originally in <a href=\"https://github.com/rust-lang/rust/issues/59845#issuecomment-974757191\">https://github.com/rust-lang/rust/issues/59845#issuecomment-974757191</a> I proposed they should be the color of traits, because they are a sort of \"meta type\" that can be filled by various concrete types</p>\n<p>later on in that thread it was suggested that they should have the color of concrete types. I tried that and found it confusing; they're not concrete types. As a \"third way\" I decided to give them the link color, same as associated consts, modules, and a few other things. Thoughts?</p>",
        "id": 263668178,
        "sender_full_name": "jsha",
        "timestamp": 1638575208
    },
    {
        "content": "<p>(minor correction to the above - the beige color is the \"targeted anchor\" color we use when you've clicked an anchor to go directly to some item)</p>",
        "id": 263668403,
        "sender_full_name": "jsha",
        "timestamp": 1638575399
    },
    {
        "content": "<p>Another option: give them no color, just like generic parameters.</p>",
        "id": 263668957,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638575862
    },
    {
        "content": "<p>ah, great! yes, I'm in favor of that. I think I got some of the comments mixed up and thought you were opposed to it.</p>",
        "id": 263669794,
        "sender_full_name": "jsha",
        "timestamp": 1638576489
    },
    {
        "content": "<p>I was opposed to coloring them as traits; I don't <em>think</em> I was opposed to no color.</p>",
        "id": 263673623,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638580554
    },
    {
        "content": "<p>Although now I'm getting a recollection that the disadvantage of no color is that they don't look clickable. Perhaps I was opposed after all <span aria-label=\"laughing\" class=\"emoji emoji-1f606\" role=\"img\" title=\"laughing\">:laughing:</span></p>",
        "id": 263673855,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638580820
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"307537\">Noah Lev</span> <a href=\"#narrow/stream/266220-rustdoc/topic/use.20smaller.20number.20of.20colors.20to.20distinguish.20items.20.2391480/near/263663084\">said</a>:</p>\n<blockquote>\n<p>I agree, though I also feel like distinguishing different kinds of <em>types</em> can be valuable too. Although, overall, I think reducing the number of colors is probably worth it.</p>\n</blockquote>\n<p>FWIW, I think that the kinds of types are relatively unimportant to me.  I really don't care that <code>MaybeUninit</code> is technically a union, since I treat it the same as I would if it were actually a <code>struct</code>, for example.</p>\n<p>And -- going further than just colours -- I'd rather have <code>Terminator</code> and <code>TerminatorKind</code> next to each other in a type list, rather than two \"pages\" apart on &lt;<a href=\"https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/index.html\">https://doc.rust-lang.org/nightly/nightly-rustc/rustc_middle/mir/index.html</a>&gt; because one's an enum and one's a struct.</p>",
        "id": 263675223,
        "sender_full_name": "scottmcm",
        "timestamp": 1638582403
    },
    {
        "content": "<p>Yes, I agree that things like structs, enums, and unions are best grouped together; I was referring more to things like associated types vs structs.</p>",
        "id": 263675309,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638582530
    },
    {
        "content": "<p>I'm very down for a principled approach to color (and other things) in rustdoc</p>",
        "id": 263696379,
        "sender_full_name": "Manish Goregaokar",
        "timestamp": 1638611659
    },
    {
        "content": "<p>I clicked those links expected to find the new colors jarring (but like, all change is, jarring is <em>fine</em> as long as we manage it right), and was pleasantly surprised that I didn't notice any change at all</p>",
        "id": 263696406,
        "sender_full_name": "Manish Goregaokar",
        "timestamp": 1638611729
    },
    {
        "content": "<p>so i'm quite in favor of this</p>",
        "id": 263696412,
        "sender_full_name": "Manish Goregaokar",
        "timestamp": 1638611743
    },
    {
        "content": "<p>enums and structs being the same may annoy some people</p>",
        "id": 263696416,
        "sender_full_name": "Manish Goregaokar",
        "timestamp": 1638611750
    },
    {
        "content": "<p>but overall i feel like the conceptual split is _more_ between structs with private fields vs structs with public fields and enums (and i don't think <em>that</em> distinction needs to be marked in color)</p>",
        "id": 263696478,
        "sender_full_name": "Manish Goregaokar",
        "timestamp": 1638611794
    },
    {
        "content": "<p>any further thoughts on the color changes? seems like we've converged on a pretty good consensus. <a href=\"https://github.com/rust-lang/rust/pull/91480\">https://github.com/rust-lang/rust/pull/91480</a></p>",
        "id": 264206070,
        "sender_full_name": "jsha",
        "timestamp": 1638991131
    },
    {
        "content": "<p>I'm with <span class=\"user-mention silent\" data-user-id=\"307537\">Noah Lev</span>, I think it's confusing to have links without color</p>",
        "id": 264206804,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638991471
    },
    {
        "content": "<p><a href=\"/user_uploads/4715/BXC-cqhtcGNo7qiD59ytTig0/7b6aa144-5b12-4c66-9c10-62e62d0d32fe.png\">7b6aa144-5b12-4c66-9c10-62e62d0d32fe.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/BXC-cqhtcGNo7qiD59ytTig0/7b6aa144-5b12-4c66-9c10-62e62d0d32fe.png\" title=\"7b6aa144-5b12-4c66-9c10-62e62d0d32fe.png\"><img src=\"/user_uploads/4715/BXC-cqhtcGNo7qiD59ytTig0/7b6aa144-5b12-4c66-9c10-62e62d0d32fe.png\"></a></div>",
        "id": 264206809,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638991478
    },
    {
        "content": "<p>^ there's no indication here that you can click on <code>Self::Item</code></p>",
        "id": 264206840,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638991491
    },
    {
        "content": "<p>Everything else seems like a good change though :)</p>",
        "id": 264206967,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638991555
    },
    {
        "content": "<p>Agreed, although it's a shame to color these differently than generic params because they really have so much in common conceptually.</p>\n<p>Thoughts on what color they should be? I'd like to rule out ochre, since that would compete with the method name.  I think we've also previously ruled out dark blue (traits). That leaves maroon (concrete types) and steel blue (links, modules, keywords, statics).</p>",
        "id": 264207931,
        "sender_full_name": "jsha",
        "timestamp": 1638991982
    },
    {
        "content": "<p>Oh, I was going to suggest the same as the trait name. Why was that ruled out?</p>",
        "id": 264208130,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638992077
    },
    {
        "content": "<p>Steel blue seems fine too</p>",
        "id": 264208230,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638992121
    },
    {
        "content": "<p>Here's the issue thread where we discussed the color of associated types: </p>\n<p><span class=\"user-mention\" data-user-id=\"295632\">@Diggsey</span> said (<a href=\"https://github.com/rust-lang/rust/issues/59845#issuecomment-974824608\">https://github.com/rust-lang/rust/issues/59845#issuecomment-974824608</a>):</p>\n<blockquote>\n<p>I would probably colour \"associated types\" as either types or normal text, rather than as traits. Other than that the choices makes sense.</p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"307537\">@Noah Lev</span>  said (<a href=\"https://github.com/rust-lang/rust/issues/59845#issuecomment-974887115\">https://github.com/rust-lang/rust/issues/59845#issuecomment-974887115</a>):</p>\n<blockquote>\n<p>I agree with Diggsey that we shouldn't color associated types as traits; it seems confusing.</p>\n</blockquote>",
        "id": 264209841,
        "sender_full_name": "jsha",
        "timestamp": 1638992823
    },
    {
        "content": "<p>I'll go with slate blue.</p>",
        "id": 264211780,
        "sender_full_name": "jsha",
        "timestamp": 1638993605
    },
    {
        "content": "<p>I don't have strong feelings either way, but worth noting a couple of places where we do use links with no color: the breadcrumbs at the top of the page (all but the last item); the sidebar; headings.</p>",
        "id": 264213642,
        "sender_full_name": "jsha",
        "timestamp": 1638994448
    },
    {
        "content": "<p>The counterpoint is that _within method signatures_, everything clickable is colorful.</p>",
        "id": 264213738,
        "sender_full_name": "jsha",
        "timestamp": 1638994498
    },
    {
        "content": "<p>Hi, I'm sorry to intervene but I thought you would be interested in what I have to say. It's great to see the a reduction in the number of colors even though I never found it very distracting in pratice. However, when I looked at the page about <code>std::io::Write</code> I was disturbed by the lack of color differentiation especially around slices. I now find it very distracting, I have to pay more attention to see the type of slices which is a shame since I had no problem making the distinction before. To mitigate this while keeping the number of colors, I propose that the primitives have the same color as the keywords, modules, ... (ie #AD378A -&gt; #3873AD).</p>",
        "id": 267363420,
        "sender_full_name": "Urgau",
        "timestamp": 1641742603
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"315412\">@jsha</span> as the author of the PR I would like to get your opinion on my previous comment.</p>",
        "id": 267902613,
        "sender_full_name": "Urgau",
        "timestamp": 1642094958
    },
    {
        "content": "<p>hiya! Yeah, I see the issue you're talking about. My proposed solution was <a href=\"https://github.com/rust-lang/rust/pull/91778\">https://github.com/rust-lang/rust/pull/91778</a> - make slices plain colored so the inner type stands out better. Compare:</p>\n<p><a href=\"https://rustdoc.crud.net/jsha/no-slice-link/std/io/trait.Write.html\">https://rustdoc.crud.net/jsha/no-slice-link/std/io/trait.Write.html</a><br>\n<a href=\"https://doc.rust-lang.org/nightly/std/io/trait.Write.html\">https://doc.rust-lang.org/nightly/std/io/trait.Write.html</a></p>\n<p>I got some pushback on that because it's sometimes useful to have a clickable link to the slice page when looking at (for example) return types. I just haven't had time to try and interpolate between the two needs.</p>",
        "id": 267909127,
        "sender_full_name": "jsha",
        "timestamp": 1642097859
    },
    {
        "content": "<p>Part of the idea here is that color is used to emphasize certain things. We can't emphasize everything, and indeed the more things we emphasize with color, the less effective color is at emphasizing any one thing.</p>",
        "id": 267911771,
        "sender_full_name": "jsha",
        "timestamp": 1642099134
    }
]
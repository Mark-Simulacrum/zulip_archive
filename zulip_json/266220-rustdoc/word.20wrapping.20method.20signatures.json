[
    {
        "content": "<p>One thing that's bugged me for a while on our mobile UI is how awkwardly method signatures wrap on mobile:</p>\n<p><a href=\"/user_uploads/4715/CkjkshJliVL_bWmkI18g8ND9/image.png\">image.png</a> </p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/CkjkshJliVL_bWmkI18g8ND9/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/CkjkshJliVL_bWmkI18g8ND9/image.png\"></a></div><p>We have some code that \"manually\" wraps a method signature at 80 characters, but that's no help when the display is narrower than 80 characters. It would be great if we could convince the browser to break at more appropriate places.</p>\n<p>For instance, in that example we wrapped _between_ the <code>-</code> and <code>&gt;</code> of a return arrow, which is just awful. I think we can avoid that by inserting the Word Joiner character between them: <a href=\"https://en.wikipedia.org/wiki/Word_joiner\">https://en.wikipedia.org/wiki/Word_joiner</a>. And more generally, between punctuation that should stay grouped, like the <code>&amp;</code> and <code>[</code> in <code>&amp;[u16]</code>.</p>\n<p>Also, between a parameter name and the parameter type, we could insert an nbsp. So like <code>v:&amp;nbsp;&amp;[u16]</code>. That would hopefully convince the browser to preferentially break after the comma rather than between a parameter and its type.</p>",
        "id": 270140800,
        "sender_full_name": "jsha",
        "timestamp": 1643681895
    },
    {
        "content": "<p>(We need TeX boxes-and-glue in the browser <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span>)</p>",
        "id": 270145016,
        "sender_full_name": "scottmcm",
        "timestamp": 1643685339
    },
    {
        "content": "<p>I haven't been able to find any good resources on what the browser considers break, but I made a small test page to check some possibilities. It seems like most punctuation sandwiched between letters is not considered breakable, but <code>-</code> is, and <code>&amp;[</code> is. Interestingly, <code>foo(bar</code> is not! But that's one of the places we'd most like to be able to break, right at the beginning of a function. That's an easy win, placing a <code>&lt;wbr&gt;</code> there.</p>\n<p><a href=\"/user_uploads/4715/l_F2aqqdUECz8R8t4nm_zwjD/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/l_F2aqqdUECz8R8t4nm_zwjD/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/l_F2aqqdUECz8R8t4nm_zwjD/image.png\"></a></div>",
        "id": 270146357,
        "sender_full_name": "jsha",
        "timestamp": 1643686475
    },
    {
        "content": "<p>We can make <code>-&gt;</code> non-breakable by putting U+2060 between the characters. I tried this and it works wonderfully.</p>\n<p>Unfortunately I think realized we can't actually use it, because if you copy-paste it winds up in the paste buffer. Basically we'd have a repeat of <a href=\"https://github.com/rust-lang/rust/issues/16555\">https://github.com/rust-lang/rust/issues/16555</a>, but with U+2060 Word Joiner instead of U+200B Zero Width Space. For <a href=\"https://github.com/rust-lang/rust/issues/16555\">#16555</a> there was a nice HTML tag available that doesn't have the copy-paste problem. I think there's no HTML tag equivalent for Word Joiner but I'd love to find out I'm wrong.</p>",
        "id": 270163586,
        "sender_full_name": "jsha",
        "timestamp": 1643700939
    },
    {
        "content": "<p>Ooh! If we wrap <code>-&gt;</code> in a span, and give that span <code>white-space: nowrap</code>, it will work.</p>",
        "id": 270163830,
        "sender_full_name": "jsha",
        "timestamp": 1643701148
    },
    {
        "content": "<p>I was about to suggest putting <code>-&gt;</code> in a span but I arrived too late :p</p>",
        "id": 270233106,
        "sender_full_name": "GuillaumeGomez",
        "timestamp": 1643730576
    },
    {
        "content": "<p>Btw, have you tried your test page in multiple browsers? Some may have different rules</p>",
        "id": 270612085,
        "sender_full_name": "Noah Lev",
        "timestamp": 1643919860
    },
    {
        "content": "<p>I tried it in Firefox and Chrome, but yeah I should also try Safari</p>",
        "id": 270612268,
        "sender_full_name": "jsha",
        "timestamp": 1643919959
    },
    {
        "content": "<p>Also a friend pointed out that line breaking behavior is specified by Unicode: <a href=\"https://unicode.org/reports/tr14/#Hyphen\">https://unicode.org/reports/tr14/#Hyphen</a></p>\n<p>And Gecko uses this crate to figure it out: <a href=\"https://github.com/axelf4/unicode-linebreak/blob/master/LineBreak.txt#L67\">https://github.com/axelf4/unicode-linebreak/blob/master/LineBreak.txt#L67</a></p>",
        "id": 270612426,
        "sender_full_name": "jsha",
        "timestamp": 1643920015
    }
]
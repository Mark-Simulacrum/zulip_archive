[
    {
        "content": "<p>Should <code>#[repr(transparent)]</code> be hidden on structs where the field is non-public? My understanding of stability guarantees is that the attribute doesn't guarantee anything unless the field is public.</p>",
        "id": 259706755,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635563218
    },
    {
        "content": "<p>that seems reasonable to me, as long as <code>--document-private-items</code> wasn't passed</p>",
        "id": 259706772,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635563265
    },
    {
        "content": "<p>can you open an issue?</p>",
        "id": 259706934,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635563487
    },
    {
        "content": "<p>Yeah that bit was a given. I'll file an issue shortly.</p>",
        "id": 259708201,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635565388
    },
    {
        "content": "<p>Might be worth double-checking with T-lang, but sounds reasonable to me too.</p>",
        "id": 259708512,
        "sender_full_name": "Noah Lev",
        "timestamp": 1635565848
    },
    {
        "content": "<p>Per David Tolnay in a previous PR of mine: <a href=\"https://github.com/rust-lang/rust/pull/72841#pullrequestreview-429527831\">https://github.com/rust-lang/rust/pull/72841#pullrequestreview-429527831</a></p>",
        "id": 259708836,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635566355
    },
    {
        "content": "<blockquote>\n<p>Note that repr(transparent) is not the same as permission to inspect or manipulate the internal representation of a type. That permission only exists if the field is also exposed as pub.</p>\n</blockquote>",
        "id": 259708841,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635566368
    },
    {
        "content": "<p>The safe transmute work has had a bunch of conversation about how it should have a <code>derive</code> or similar to opt-in, as the <code>repr</code>s are internal.</p>\n<p>I'd be tempted to just <em>always</em> exclude <code>repr</code> from rustdoc -- if a user wants to rely on it it should be documented in text, and the <code>[src]</code> link is always there if you want to look at it anyway.</p>",
        "id": 259715877,
        "sender_full_name": "scottmcm",
        "timestamp": 1635578522
    },
    {
        "content": "<p>On the contrary, I specifically added <code>#[repr(u8)]</code> to the <code>Month</code> enum <a href=\"https://docs.rs/time/0.3.4/time/enum.Month.html\">here</a> so that I <em>wouldn't</em> have to say it elsewhere.</p>",
        "id": 259716221,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635579102
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"245610\">@Jacob Pratt</span> this is probably an explicit choice on your part, but you can autogenerate basically that whole file of impls with <code>strum</code><br>\n<a href=\"https://docs.rs/strum/0.22.0/strum/\">https://docs.rs/strum/0.22.0/strum/</a></p>",
        "id": 259716404,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635579406
    },
    {
        "content": "<p>And yeah I agree it would be weird to hide the repr completely, that seems to kind of defeat the point of adding it</p>",
        "id": 259716412,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635579430
    },
    {
        "content": "<p>Yeah, that's a conscious choice. Zero mandatory dependencies <span aria-label=\"+1\" class=\"emoji emoji-1f44d\" role=\"img\" title=\"+1\">:+1:</span></p>",
        "id": 259716413,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635579432
    },
    {
        "content": "<p>All I am suggesting is to hide it when it means nothing to the person viewing it, essentially.</p>",
        "id": 259716432,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635579480
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/266220-rustdoc/topic/.23.5Brepr.28transparent.29.5D.20with.20non-public.20field/near/259716412\">said</a>:</p>\n<blockquote>\n<p>And yeah I agree it would be weird to hide the repr completely, that seems to kind of defeat the point of adding it</p>\n</blockquote>\n<p>That depends greatly on what the repr is used for.  Once can also add it for internal <code>unsafe</code> use even through it should never matter to callers.</p>",
        "id": 259725773,
        "sender_full_name": "scottmcm",
        "timestamp": 1635593402
    },
    {
        "content": "<p>Filed as <a href=\"https://github.com/rust-lang/rust/issues/90435\">#90435</a>.</p>",
        "id": 259778842,
        "sender_full_name": "Jacob Pratt",
        "timestamp": 1635672273
    }
]
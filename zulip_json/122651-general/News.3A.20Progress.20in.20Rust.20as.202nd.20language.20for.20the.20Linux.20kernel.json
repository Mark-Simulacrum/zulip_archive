[
    {
        "content": "<p><a href=\"https://lkml.org/lkml/2021/12/6/461\">https://lkml.org/lkml/2021/12/6/461</a></p>",
        "id": 264095611,
        "sender_full_name": "Nick Dean (he/him)",
        "timestamp": 1638923392
    },
    {
        "content": "<p><a href=\"https://lkml.org/lkml/2021/12/6/461\">https://lkml.org/lkml/2021/12/6/461</a></p>",
        "id": 264095617,
        "sender_full_name": "Nick Dean (he/him)",
        "timestamp": 1638923401
    },
    {
        "content": "<blockquote>\n<p>Stable compiler &amp; Rust Edition 2021<br>\nCustomizing <code>core</code> and <code>alloc</code></p>\n</blockquote>\n<p>These seem mutually exclusive? Is the kernel using RUSTC_BOOTSTRAP or something?</p>",
        "id": 264100692,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638927846
    },
    {
        "content": "<blockquote>\n<p>a few unstable features we were using</p>\n</blockquote>\n<p>I'm going to guess so</p>",
        "id": 264101206,
        "sender_full_name": "Jake",
        "timestamp": 1638928344
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"382653\">@ojeda</span> what's the point of moving to stable if you're going to use RUSTC_BOOTSTRAP for unstable features?</p>",
        "id": 264101519,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1638928700
    },
    {
        "content": "<p>Version pinning</p>",
        "id": 264101999,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638929119
    },
    {
        "content": "<p>We couldn't pin to a nightly version because that's not available from distributions.</p>",
        "id": 264102161,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638929224
    },
    {
        "content": "<p>... Can people please stop using RUSTC_BOOTSTRAP unless they're rustc stdlib?</p>",
        "id": 264105772,
        "sender_full_name": "Connor Horman",
        "timestamp": 1638932620
    },
    {
        "content": "<p>What's your suggested alternative?</p>",
        "id": 264107720,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638934446
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303710\">Gary Guo</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264101999\">said</a>:</p>\n<blockquote>\n<p>Version pinning</p>\n</blockquote>\n<p>+, stable is the best nightly</p>",
        "id": 264107793,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1638934523
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303710\">Gary Guo</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264107720\">said</a>:</p>\n<blockquote>\n<p>What's your suggested alternative?</p>\n</blockquote>\n<p>Use nightly and work to stabilize the stuff you need.</p>",
        "id": 264108076,
        "sender_full_name": "cuviper",
        "timestamp": 1638934799
    },
    {
        "content": "<p>which means it's not feasible in distros until then, so be it</p>",
        "id": 264108139,
        "sender_full_name": "cuviper",
        "timestamp": 1638934855
    },
    {
        "content": "<p>I say this as the Fedora rustc maintainer -- I don't want kernel bug reports for unstable stuff</p>",
        "id": 264108171,
        "sender_full_name": "cuviper",
        "timestamp": 1638934901
    },
    {
        "content": "<p>Well, Rust usage in kernel will be staging (unstable) as well</p>",
        "id": 264111457,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938475
    },
    {
        "content": "<p>And you're basically suggesting that Rust shouldn't be used in the kernel unless everything we use is stable</p>",
        "id": 264111528,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938539
    },
    {
        "content": "<p>Given that we currently need to tailor liballoc (and want to tailor libcore) there's no way to not use RUSTC_BOOTSTRAP for now and near future.</p>",
        "id": 264111581,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938629
    },
    {
        "content": "<p>Or, use nightly.</p>",
        "id": 264111639,
        "sender_full_name": "Connor Horman",
        "timestamp": 1638938679
    },
    {
        "content": "<p>rustc stable w/ RUSTC_BOOTSTRAP is not stable.</p>",
        "id": 264111674,
        "sender_full_name": "Connor Horman",
        "timestamp": 1638938731
    },
    {
        "content": "<p>That's not an option unless you ask all distros to ship a specific nightly version</p>",
        "id": 264111675,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938731
    },
    {
        "content": "<p>Using unstable features is not an option unless they ship a specific nightly version anyways.</p>",
        "id": 264111730,
        "sender_full_name": "Connor Horman",
        "timestamp": 1638938767
    },
    {
        "content": "<p>Since those features can be changed, or cease to exist, on a whim.</p>",
        "id": 264111748,
        "sender_full_name": "Connor Horman",
        "timestamp": 1638938792
    },
    {
        "content": "<p>Rust-for-linux isn't pretending to be stable.</p>",
        "id": 264111761,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938822
    },
    {
        "content": "<p>Except, its relying on stable rustc.</p>",
        "id": 264111783,
        "sender_full_name": "Connor Horman",
        "timestamp": 1638938864
    },
    {
        "content": "<p>Version of stable compilers at least is something that can be anchored to.</p>",
        "id": 264111784,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938866
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"257758\">Connor Horman</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264111730\">said</a>:</p>\n<blockquote>\n<p>Using unstable features is not an option unless they ship a specific nightly version anyways.</p>\n</blockquote>\n<p>We do pin to a specific stable Rust version though.</p>",
        "id": 264111840,
        "sender_full_name": "Gary Guo",
        "timestamp": 1638938926
    },
    {
        "content": "<p>Are you assuming the distro rustc doesn't change its stable version? Because I also rebase Fedora all the time, and I can get away with that because stable features are compatible.</p>",
        "id": 264123992,
        "sender_full_name": "cuviper",
        "timestamp": 1638951564
    },
    {
        "content": "<p>wouldn't it be better for the kernel to use <code>rustup</code> so it can pin a specific toolchain?</p>",
        "id": 264126837,
        "sender_full_name": "Xavier Denis",
        "timestamp": 1638953602
    },
    {
        "content": "<p>is there really a need for the compiler <em>itself</em> to come from a distro package?</p>",
        "id": 264126961,
        "sender_full_name": "Xavier Denis",
        "timestamp": 1638953663
    },
    {
        "content": "<p>The kernel has to be buildable without internet AFAIK. Rustup requires internet access to get a toolchain.</p>",
        "id": 264141507,
        "sender_full_name": "bjorn3",
        "timestamp": 1638962445
    },
    {
        "content": "<p>One similarly \"requires\" internet access to obtain a C compiler, presumably? Specify eg <a href=\"https://static.rust-lang.org/dist/2021-12-06/rustc-nightly-x86_64-unknown-linux-gnu.tar.gz\">https://static.rust-lang.org/dist/2021-12-06/rustc-nightly-x86_64-unknown-linux-gnu.tar.gz</a> directly to bypass rustup, I guess.</p>",
        "id": 264143160,
        "sender_full_name": "FÃ©lix Saparelli",
        "timestamp": 1638963509
    },
    {
        "content": "<p>A C compiler is already part of the distribution build tools. Also the -gnu variant of rustc only works on glibc based distros, the -musl variant on musl based distros that dynamically link musl and none work at distros that statically link musl or use a different libc. For distros like nixos or guix it would require patching the dynamic linker location in the downloaded rustc version.</p>",
        "id": 264147489,
        "sender_full_name": "bjorn3",
        "timestamp": 1638966549
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"303710\">Gary Guo</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264111457\">said</a>:</p>\n<blockquote>\n<p>Well, Rust usage in kernel will be staging (unstable) as well</p>\n</blockquote>\n<p>That argument seems iffy since it apparently wants a greater level of stability than nightly provides? Working on inconsistent definitions of unstable.</p>",
        "id": 264151402,
        "sender_full_name": "The 8472",
        "timestamp": 1638968687
    },
    {
        "content": "<p>We're trying to convince the kernel community to allow Rust as a first-class language. Part of what we're doing is changing the build system to accept Rust and building a lot of Rust abstractions for kernel concepts currently only exposed with C interfaces. There is a lot of work involved here, as I'm sure you all realise.</p>\n<p>At the moment, we don't have enough people/cycles to work on that <em>and</em> \"work to stabilise the stuff we need\" from Rust. Rust is a tool for us.</p>\n<p>We would love suggestions from you on how to do things better. \"You can't do this with distros because I'm a maintainer of a distro\" is honestly not the sort of thing I was expecting/hoping to see <em>here</em>. I had been told the Rust community was very welcoming.</p>",
        "id": 264247465,
        "sender_full_name": "Wedson Almeida Filho",
        "timestamp": 1639015300
    },
    {
        "content": "<p>the way to do things better is to keep using nightly for now :/ using a stable compiler with RUSTC_BOOTSTRAP is not using a stable compiler.</p>\n<p>I'm sorry if this wasn't the reaction you expected, but the whole reason feature-gates exist is because crates have broken due to nightly updates in the past: <a href=\"https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802\">https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802</a></p>",
        "id": 264247834,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639015628
    },
    {
        "content": "<p>I'm sorry if I was too blunt about that, to the point of rudeness. At a high level, I really am excited about seeing Rust in the kernel! But as a maintainer, I'm trying to explain why I think pinning a stable version is not feasible.</p>",
        "id": 264253455,
        "sender_full_name": "cuviper",
        "timestamp": 1639021797
    },
    {
        "content": "<p>Even if I agreed for you to yolo <code>RUSTC_BOOTSTRAP</code>, I don't want to be stuck unable to update the distro compiler when (not if) an unstable feature breaks the kernel.</p>",
        "id": 264253604,
        "sender_full_name": "cuviper",
        "timestamp": 1639021962
    },
    {
        "content": "<blockquote>\n<p>At the moment, we don't have enough people/cycles to work on that <em>and</em> \"work to stabilise the stuff we need\" from Rust. Rust is a tool for us.</p>\n</blockquote>\n<p>That's understandable! However, you're asking that tool to learn new tricks, so <em>someone</em> has to do the work. Until that happens, nightly is the right way to use experimental stuff.</p>",
        "id": 264253840,
        "sender_full_name": "cuviper",
        "timestamp": 1639022255
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253604\">said</a>:</p>\n<blockquote>\n<p>Even if I agreed for you to yolo <code>RUSTC_BOOTSTRAP</code>, I don't want to be stuck unable to update the distro compiler when (not if) an unstable feature breaks the kernel.</p>\n</blockquote>\n<p>You can always provide a different toolchain for building the kernel, if you really want to start providing Rust-enabled kernels soon (it is experimental).</p>",
        "id": 264677303,
        "sender_full_name": "ojeda",
        "timestamp": 1639385739
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253840\">said</a>:</p>\n<blockquote>\n<p>That's understandable! However, you're asking that tool to learn new tricks, so <em>someone</em> has to do the work. Until that happens, nightly is the right way to use experimental stuff.</p>\n</blockquote>\n<p>No, it is not \"the right way\", sorry. A stable release is better for our purposes than any given nightly.</p>",
        "id": 264677908,
        "sender_full_name": "ojeda",
        "timestamp": 1639386058
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264247834\">said</a>:</p>\n<blockquote>\n<p>the way to do things better is to keep using nightly for now :/ using a stable compiler with RUSTC_BOOTSTRAP is not using a stable compiler.</p>\n<p>I'm sorry if this wasn't the reaction you expected, but the whole reason feature-gates exist is because crates have broken due to nightly updates in the past: <a href=\"https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802\">https://github.com/rust-lang/cargo/issues/6627#issuecomment-507789802</a></p>\n</blockquote>\n<p>We are aware we depend on unstable features, and that code may need to change in some cases -- this is fine for us. But that is orthogonal to using tagged releases. In any case, if you really think using nightlies would be better for us, then please, by all means, tell us why.</p>",
        "id": 264678404,
        "sender_full_name": "ojeda",
        "timestamp": 1639386378
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"382653\">@ojeda</span> What is your plan for informing distros that the kernel uses pinned versions and can't use the system toolchain? What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel? It's usually Rust that gets the hate mail when that happens.</p>",
        "id": 264678636,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639386550
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264678636\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"382653\">ojeda</span> What is your plan for informing distros that the kernel uses pinned versions and can't use the system toolchain? What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel? It's usually Rust that gets the hate mail when that happens.</p>\n</blockquote>\n<p>How does using nightlies change any of that?</p>",
        "id": 264678798,
        "sender_full_name": "ojeda",
        "timestamp": 1639386639
    },
    {
        "content": "<p>Using nightlies means that distros already know you're not using a toolchain packaged by the distro.</p>\n<p>(Or if the distro does package it, they're very aware this is a pinned version that can't be upgraded without breakage.)</p>",
        "id": 264678885,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1639386697
    },
    {
        "content": "<p>No, sorry, that is not how it works. Distros do not take \"kernels\" blindly from \"somewhere\". They configure and build them. They have to make a concious decision to whether they want to enable or not every feature, including Rust support.</p>",
        "id": 264679264,
        "sender_full_name": "ojeda",
        "timestamp": 1639386941
    },
    {
        "content": "<p>And, by the way, it is not true that \"you're not using a toolchain packaged by the distro\". Distros are the ones deciding which toolchain will be used. They provide it -- we have no say on that.</p>",
        "id": 264679461,
        "sender_full_name": "ojeda",
        "timestamp": 1639387070
    },
    {
        "content": "<p>Also, distros will build <code>rustc</code> themselves, and will probably not like to keep around a random nightly nightly only for the kernel parts. It's more likely that they have an older stable version around than some nightly.</p>",
        "id": 264679467,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639387075
    },
    {
        "content": "<p>But in practice I don't expect to see Rust support enabled in distros sooner than two years or so, hopefully more of the required <code>rustc</code> features will be stabilized by then</p>",
        "id": 264679817,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639387296
    },
    {
        "content": "<p>I'm not a distro maintainer but I've work with one of them and I'm pretty sure that he would not like to have a stable release around (that is hacked to be a nightly) for any software and more for kernel. The \"best\" way for you would in my opinion to simply have a <a href=\"https://rust-lang.github.io/rustup/overrides.html#the-toolchain-file\">rust-toolchain</a> in the repo that specified a pinned nightly, this way you (kernel) don't have to hack <code>rustc</code>, distro maintainers would know exactly which version you want (they can provide it or leave it to rustup) and the Rust maintainers will sleep peacefully knowing that their compiler was not intentionally misused by one of the biggest projects on the planet.</p>",
        "id": 264683509,
        "sender_full_name": "Urgau",
        "timestamp": 1639389525
    },
    {
        "content": "<p>Yeah, but distro maintainers will not package every nightly, while they're reasonably likely to package the stable releases, so there's a big chance they'll have <em>that</em> stable release the kernel needs already on hand. I doubt any of the major distros will use <code>rustup</code> for kernel builds.</p>",
        "id": 264684051,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639389792
    },
    {
        "content": "<blockquote>\n<p>What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel?</p>\n</blockquote>\n<p>That can happen regardless of whether you're using a stable or nightly version.</p>",
        "id": 264684443,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639390024
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"382653\">ojeda</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264677303\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264253604\">said</a>:</p>\n<blockquote>\n<p>Even if I agreed for you to yolo <code>RUSTC_BOOTSTRAP</code>, I don't want to be stuck unable to update the distro compiler when (not if) an unstable feature breaks the kernel.</p>\n</blockquote>\n<p>You can always provide a different toolchain for building the kernel, if you really want to start providing Rust-enabled kernels soon (it is experimental).</p>\n</blockquote>\n<p>This seems like an important point. Do we anticipate distros will start trying to build the kernel with Rust support enabled even if it's experimental? I would assume not, but perhaps \"experimental\" connotes a different meaning for the kernel than I'm used to. </p>\n<p>Assuming distros do not start enabling Rust in kernel support while it's still experimental, that would seem to resolve a lot of the concerns I've seen in this thread about <code>RUSTC_BOOSTRAP</code>...</p>",
        "id": 264686142,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1639391060
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264684051\">said</a>:</p>\n<blockquote>\n<p>Yeah, but distro maintainers will not package every nightly, while they're reasonably likely to package the stable releases, so there's a big chance they'll have <em>that</em> stable release the kernel needs already on hand. I doubt any of the major distros will use <code>rustup</code> for kernel builds.</p>\n</blockquote>\n<p>You're asking for a particular version of stable, right ? If that the case, you (the kernel) and distro will need to be perfectly align. This is asking for a lot. For example archlinux, always update the rust compiler toolchain the next day(s) after the stable release but in you're case they will need to keep the version of some time because the kernel is using it and the rust and kernel release are not synchronize, but the worse part isn't even the fact that they will need to keep an old stable version (how also probably requires an old llvm, ...) but the fact that the kernel is hacking it making it more \"stable\" than what it really is.</p>",
        "id": 264686160,
        "sender_full_name": "Urgau",
        "timestamp": 1639391070
    },
    {
        "content": "<p>Arch already keeps older versions of some packages for exactly that kind of thing. Off the top of my head: python2, openssl-1.0, postgresql-old-upgrade, js68, nodejs-lts-erbium, nodejs-lts-fermium. And I'm sure there are plenty others.</p>",
        "id": 264686332,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639391179
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264684443\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>What is your plan for when a distro inevitably doesn't get the message and uses the system toolchain anyway, then upgrades it and breaks the kernel?</p>\n</blockquote>\n<p>That can happen regardless of whether you're using a stable or nightly version.</p>\n</blockquote>\n<p>Stable implies no breaking changes and backwards compatibility. Nightly doesn't have these guaranties.</p>",
        "id": 264686391,
        "sender_full_name": "Urgau",
        "timestamp": 1639391220
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264686332\">said</a>:</p>\n<blockquote>\n<p>Arch already keeps older versions of some packages for exactly that kind of thing. Off the top of my head: python2, openssl-1.0, postgresql-old-upgrade.</p>\n</blockquote>\n<p>That doesn't mean that it a good thing or that it's okay to do it.</p>",
        "id": 264686465,
        "sender_full_name": "Urgau",
        "timestamp": 1639391273
    },
    {
        "content": "<blockquote>\n<p>That doesn't mean that it a good thing or that it's okay to do it.</p>\n</blockquote>\n<p>It's a good thing given that they need those packages in the repos. They don't have a choice. But it's far easier to add a suffix and keep an older version of a package than to either:</p>\n<ul>\n<li>run <code>rustup</code> on the build server</li>\n<li>package some random nightly Rust toolchain</li>\n</ul>",
        "id": 264686955,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639391525
    },
    {
        "content": "<p>But it probably doesn't matter too much. The Rust developers will do their thing, distro packages will do theirs, kernel developers will once again do theirs. Just like some distros don't like Rust very much, so will others do things that the Rust developers don't like.</p>",
        "id": 264687297,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639391744
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264686955\">said</a>:</p>\n<blockquote>\n<blockquote>\n<p>That doesn't mean that it a good thing or that it's okay to do it.</p>\n</blockquote>\n<p>It's a good thing given that they need those packages in the repos. They don't have a choice. </p>\n</blockquote>\n<p>Exactly \"they don't have a choice\" and by forcing a stable release you don't give them a choise. Using a <code>rust-toolchain</code> file would give them a choise to either use <code>rustup</code> with the correct nightly or do the hacky thing with a stable version.</p>",
        "id": 264687402,
        "sender_full_name": "Urgau",
        "timestamp": 1639391791
    },
    {
        "content": "<p>You can still put a stable version in <code>rust-toolchain</code>, right?</p>",
        "id": 264687423,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639391807
    },
    {
        "content": "<p>Yep</p>",
        "id": 264687441,
        "sender_full_name": "Urgau",
        "timestamp": 1639391824
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264687297\">said</a>:</p>\n<blockquote>\n<p>But it probably doesn't matter too much. The Rust developers will do their thing, distro packages will do theirs, kernel developers will once again do theirs. Just like some distros don't like Rust very much, so will others do things that the Rust developers don't like.</p>\n</blockquote>\n<p>It's very likely; but if you found a solution/compromise to the problem, it's very likely also that distro will use it. It will be better for everyone.</p>",
        "id": 264687704,
        "sender_full_name": "Urgau",
        "timestamp": 1639391985
    },
    {
        "content": "<blockquote>\n<p>Exactly \"they don't have a choice\" and by forcing a stable release you don't give them a choise.</p>\n</blockquote>\n<p>I'm not forcing anyway to do anything. Distro maintainers will still be free to ignore <code>rust-toolchain</code> and compile with a patched nightly of their own (for example).</p>",
        "id": 264687826,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639392034
    },
    {
        "content": "<p>Anyway, I have nothing to do with kernel development, but as a user I would rather run a kernel built using <code>RUSTC_BOOTSTRAP=1</code> than one built with a nightly compiler, simply because stable compilers are better tested.</p>",
        "id": 264687908,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639392089
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264687908\">said</a>:</p>\n<blockquote>\n<p>stable compilers are better tested.</p>\n</blockquote>\n<p>This also seems like an important point that was hinted at earlier. Nightlies don't get crater runs and they don't get targeted backports.</p>",
        "id": 264688166,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1639392241
    },
    {
        "content": "<blockquote>\n<p>if you found a solution/compromise to the problem</p>\n</blockquote>\n<p>The solution is to stabilize those features, but frankly I don't see it happening too soon (see e.g. <code>-Zbuild-std</code>). Asking kernel developers to work on stabilizing these themselves won't make things better.</p>",
        "id": 264688363,
        "sender_full_name": "LaurenÈiu",
        "timestamp": 1639392324
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">LaurenÈiu</span> <a href=\"#narrow/stream/122651-general/topic/News.3A.20Progress.20in.20Rust.20as.202nd.20language.20for.20the.20Linux.20kernel/near/264689882\">said</a>:</p>\n<blockquote>\n<p>It's done in a <code>Makefile</code>, but presumably nothing would prevent adding a <code>CONFIG_THIS_RUST_IS_1_57_PINKY_PROMISE</code> that needs to be set in order to enable the code. But keep in mind that building the kernel with a too-new GCC can fail just as well.</p>\n</blockquote>\n<p>In that case, if it's must always be opt-in by distro or everyone using a stable release, it's fine for me. Not great but better than being stuck.</p>",
        "id": 264690372,
        "sender_full_name": "Urgau",
        "timestamp": 1639393326
    }
]
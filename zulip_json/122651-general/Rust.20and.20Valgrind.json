[
    {
        "content": "<p>I just published a <a href=\"https://nnethercote.github.io/2022/01/05/rust-and-valgrind.html\">blog post</a> about Rust and Valgrind that may be of interest to people here.</p>",
        "id": 266868699,
        "sender_full_name": "nnethercote",
        "timestamp": 1641333021
    },
    {
        "content": "<p>Unfortunately this doesn't actually tell me how to use valgrind with rust. If I have a rust project, what special flags do I pass to cargo, or what environment variables do I set, or whatever, to make valgrind go? And how should I install valgrind to begin with?</p>",
        "id": 266949811,
        "sender_full_name": "Lokathor",
        "timestamp": 1641396876
    },
    {
        "content": "<p>You can run <code>valgrind /path/to/executable</code>. For example <code>valgrind target/debug/foo</code>. Installing valgrind on linux can be done through your package manager. I think you have to compile it from source for macOS. <a href=\"https://valgrind.org/downloads/current.html\">https://valgrind.org/downloads/current.html</a></p>",
        "id": 266951066,
        "sender_full_name": "bjorn3",
        "timestamp": 1641397449
    },
    {
        "content": "<p>macOS support tends to lag behind the current OS version. I almost always use it in a Linux VM.</p>",
        "id": 266951175,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641397507
    },
    {
        "content": "<p>And to specify which valgrind tool you want to use instead of memcheck you can pass for example <code>--tool=cachegrind</code> just after <code>valgrind</code>.</p>",
        "id": 266951205,
        "sender_full_name": "bjorn3",
        "timestamp": 1641397521
    },
    {
        "content": "<blockquote>\n<p>{x86,amd64}-darwin (Mac OS X 10.13).</p>\n</blockquote>\n<p>Yeah, not gonna work great on macOS aarch64 12.1 <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span></p>",
        "id": 266951349,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641397591
    },
    {
        "content": "<p>ah, so as a Windows user I can expect it'll never work for me at all then ;P</p>",
        "id": 266952733,
        "sender_full_name": "Lokathor",
        "timestamp": 1641398263
    },
    {
        "content": "<p>Linux is one bootable USB drive or WSL VM away</p>",
        "id": 266983780,
        "sender_full_name": "Laurențiu",
        "timestamp": 1641413016
    },
    {
        "content": "<p>last time i tried WSL it made my boot time 20 minutes and i have ptsd from that occurance</p>",
        "id": 266986022,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1641414125
    },
    {
        "content": "<p>Conversely, I use my Windows gaming machine for Rust performance tests via SSH / WSL<em>2</em> and it takes seconds to come out of sleep and be ready to go.</p>",
        "id": 266987372,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641414821
    },
    {
        "content": "<p>But I don't really want to make linux apps, my stuff starts by initializing WGL and then asking User32 to make me a window and gimme the HWND and I think you can tell where things go from there.</p>",
        "id": 266987592,
        "sender_full_name": "Lokathor",
        "timestamp": 1641414914
    },
    {
        "content": "<p>While I'm not a Windows developer, my understanding is that Windows has a robust set of developer tools already, sometimes outclassing what you can get elsewhere. I bet there's an equal or better alternative.</p>",
        "id": 266987804,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641414999
    },
    {
        "content": "<p>And if you can isolate subcrates to be non-platform-specific, you can always run those parts through Valgrind.</p>",
        "id": 266987907,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1641415077
    },
    {
        "content": "<p>Sure, and that's all fine. My initial comments were more editors notes than real questions for the wider world.</p>\n<p>I don't want <em>this thread</em> to say how to use Valgrind, I want <em>the blog post</em> to say how.</p>",
        "id": 266988038,
        "sender_full_name": "Lokathor",
        "timestamp": 1641415143
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"116155\">@Jake Goulding</span> the only thing i havent been able to find a replacement for is heaptrack</p>",
        "id": 266988731,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1641415529
    },
    {
        "content": "<p>i found an awesome profiler but nothing for memory :(</p>",
        "id": 266988747,
        "sender_full_name": "Riccardo D'Ambrosio",
        "timestamp": 1641415538
    },
    {
        "content": "<p>There's Application Verifier, but I didn't use it too much, and it's not quite Valgrind.</p>",
        "id": 267029164,
        "sender_full_name": "Laurențiu",
        "timestamp": 1641449663
    },
    {
        "content": "<p>And I've heard good things about <a href=\"https://drmemory.org/\">https://drmemory.org/</a></p>",
        "id": 267029180,
        "sender_full_name": "Laurențiu",
        "timestamp": 1641449690
    }
]
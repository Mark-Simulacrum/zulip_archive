[
    {
        "content": "<p>In a PR I submitted (<a href=\"https://github.com/rust-lang/rust/issues/88502\">#88502</a>) a bunch of changes for the llvm and rust-analyzer project got pulled in, and I can't seem to reset them. I tried <code>git submodule foreach git reset --hard</code>, and I tried manually resetting to the hash that master was on, but neither worked.</p>",
        "id": 256874756,
        "sender_full_name": "Ibraheem Ahmed",
        "timestamp": 1633790402
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"363998\">@Ibraheem Ahmed</span> Removing an accidental submodule is almost the same as removing any accidental file. There are multiple ways to do it, but for your case, here is an easy one:</p>\n<ol>\n<li>\n<p><code>git reset --soft HEAD^</code><br>\n   This will reset your working directory to just before your commit.</p>\n</li>\n<li>\n<p><code>git restore --staged src/llvm-project src/tools/rust-analyzer</code><br>\n   This will unstage those changes.</p>\n</li>\n<li>\n<p><code>git submodule update</code><br>\n   This will restore the submodules to the correct commit.</p>\n</li>\n<li>\n<p><code>git commit</code><br>\n   Re-enter your original commit message.</p>\n</li>\n<li>\n<p><code>git push -f</code><br>\n   You'll need to force push now that you've modified the original commit.</p>\n</li>\n</ol>",
        "id": 256875788,
        "sender_full_name": "Eric Huss",
        "timestamp": 1633791435
    }
]
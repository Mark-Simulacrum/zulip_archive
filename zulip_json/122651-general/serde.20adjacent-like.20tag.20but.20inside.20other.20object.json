[
    {
        "content": "<p>Hi all,<br>\nI'm trying to deserialize with <code>serde</code> a JSON file of the form:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">\"header\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"tag\"</span><span class=\"p\">:</span> <span class=\"s2\">\"...\"</span>\n    <span class=\"p\">},</span>\n    <span class=\"nt\">\"content\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"err\">...</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>where the fields of <code>content</code> vary depending on <code>tag</code>.</p>\n<p>If the <code>tag</code> field was on the top level, this would be trivial to implement using an adjacently tagged enum like:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#[serde(tag = </span><span class=\"s\">\"tag\"</span><span class=\"cp\">, content = </span><span class=\"s\">\"content\"</span><span class=\"cp\">)]</span><span class=\"w\"></span>\n<span class=\"k\">enum</span> <span class=\"nc\">Content</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>but I don't know how to indicate that <strong>the <code>tag</code> is inside <code>header</code></strong>.</p>\n<p>Any suggestions?</p>",
        "id": 239499642,
        "sender_full_name": "Sergio SÃ¡nchez",
        "timestamp": 1621460268
    }
]
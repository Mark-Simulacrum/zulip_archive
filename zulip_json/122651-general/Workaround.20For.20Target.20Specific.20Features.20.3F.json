[
    {
        "content": "<p>So, my understanding has been that enabling a feature just for one target wasn't really possible, at least not without a bunch of work (and an extra crate). That is, I couldn't say something like \"use the <code>foo</code> feature, but only on windows\" (I believe this is <a href=\"https://github.com/rust-lang/cargo/issues/1197\">https://github.com/rust-lang/cargo/issues/1197</a>).</p>\n<p>This has been a pain point, since often <code>-sys</code> crates use features for build configuration (whether to use a bundled/vendored copy of the C source, how to link, etc), but this configuration often needs to be different on different targets, which leads to things like <code>libsqlite3-sys</code>'s <code>bundled-windows</code> feature.</p>\n<p>That said, while brainstorming what the syntax for this would even look like, I realized that this... seems to work as-is:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[dependencies.foo]</span>\n<span class=\"n\">version</span> <span class=\"o\">=</span> <span class=\"s\">\"1\"</span>\n<span class=\"n\">features</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">\"a\"</span><span class=\"p\">,</span> <span class=\"s\">\"b\"</span><span class=\"p\">]</span>\n\n<span class=\"k\">[target.'cfg(windows)'.dependencies.foo]</span>\n<span class=\"n\">version</span> <span class=\"o\">=</span> <span class=\"s\">\"1\"</span>\n<span class=\"n\">features</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"s\">\"c\"</span><span class=\"p\">]</span>\n</code></pre></div>\n<p>Am I missing something? Is there a reason this doesn't solve (or at least work around with only minor pain) this issue: <a href=\"https://github.com/rust-lang/cargo/issues/1197\">https://github.com/rust-lang/cargo/issues/1197</a> ?</p>",
        "id": 266905491,
        "sender_full_name": "Thom Chiovoloni",
        "timestamp": 1641368038
    },
    {
        "content": "<p>I may be wrong, but IIRC one of the features of <code>resolver = \"2\"</code> is to support precisely this?</p>",
        "id": 266927231,
        "sender_full_name": "Daniel Henry-Mantilla",
        "timestamp": 1641384528
    },
    {
        "content": "<p>yea, <code>resolver=\"2\"</code> should work for that.  It does need to be specified in the root of a workspace, though.</p>",
        "id": 266949427,
        "sender_full_name": "Eric Huss",
        "timestamp": 1641396727
    }
]
[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"123856\">@Vadim Petrochenkov</span> Hey, a few macro-related questions if you don't mind...</p>",
        "id": 134601658,
        "sender_full_name": "Alexander Regueiro",
        "timestamp": 1537886884
    },
    {
        "content": "<p>the macro \"collection\" code is a bit cryptic to me<br>\nthis is where it gathers tokens into invocations right?<br>\nan unfortunate lack of comments<br>\nany clarification would be appreciated</p>",
        "id": 134601668,
        "sender_full_name": "Alexander Regueiro",
        "timestamp": 1537886892
    },
    {
        "content": "<p>Do you mean <code>InvocationCollector</code> in <a href=\"http://expand.rs\" target=\"_blank\" title=\"http://expand.rs\">expand.rs</a>?</p>",
        "id": 134632483,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1537915204
    },
    {
        "content": "<p>Yes, it visits an AST fragment and collects all macro invocations, of any form - <code>m!()</code>/<code>#[a]</code>/<code>#[derive(D)]</code></p>",
        "id": 134632530,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1537915298
    },
    {
        "content": "<p>It's a folder rather than visitor because it leaves stubs (placeholders) in place of macro invocations and also performs <code>cfg</code> expansion.</p>",
        "id": 134632722,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1537915565
    },
    {
        "content": "<p>Okay, thanks. I'll have a closer look shortly.</p>",
        "id": 134706365,
        "sender_full_name": "Alexander Regueiro",
        "timestamp": 1537999495
    }
]
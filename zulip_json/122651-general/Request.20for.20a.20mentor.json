[
    {
        "content": "<p>Hi, I would like to know if anyone would be willing to mentor me on <a href=\"https://github.com/rust-lang/rust/issues/95283\">https://github.com/rust-lang/rust/issues/95283</a> shall the need arises?</p>",
        "id": 276543451,
        "sender_full_name": "infrandomness",
        "timestamp": 1648158331
    },
    {
        "content": "<p>feel free to ping me on zulip if you need help with this PR</p>",
        "id": 276563941,
        "sender_full_name": "Michael Goulet (compiler-errors)",
        "timestamp": 1648174324
    },
    {
        "content": "<blockquote>\n<p>I'm used to commenting out blocks without worrying about what's inside of them which made this behaviour surprising.</p>\n</blockquote>\n<p>That's why most editors will insert <code>// </code>(space at the end) when commenting a block <span aria-label=\"sweat smile\" class=\"emoji emoji-1f605\" role=\"img\" title=\"sweat smile\">:sweat_smile:</span>. But yeah, a better error message would be nice.</p>",
        "id": 276594310,
        "sender_full_name": "Laurențiu",
        "timestamp": 1648200771
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"426609\">Michael Goulet (compiler-errors)</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276563941\">said</a>:</p>\n<blockquote>\n<p>feel free to ping me on zulip if you need help with this PR</p>\n</blockquote>\n<p>well here I am,<br>\nI've been looking around in <code>compiler/rustc_parse/src/parser/attr.rs</code> and in <code>unterminated-comment.stderr</code><br>\nI've come to realize I would probably need to change something in <a href=\"http://item.rs\">item.rs</a>, and based on the code given in the issue, I've figured that I could also leverage the fact <code>//*foo = 12</code> has <code>foo = 12</code> after the '*',<br>\nnow that I sort of know what I need to modify, I am not sure how to execute the action</p>",
        "id": 276740113,
        "sender_full_name": "infrandomness",
        "timestamp": 1648320772
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"459607\">@infrandomness</span> before you start modifying code - what do you expect the final diagnostic to look like after your change? I think ideally rustc could point to each opening block comment and each close, in addition to the current message where it points to the end of the file</p>",
        "id": 276741263,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648322326
    },
    {
        "content": "<p>And that should be much easier than special casing \"not followed by whitespace\"</p>",
        "id": 276741284,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648322360
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276741263\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"459607\">infrandomness</span> before you start modifying code - what do you expect the final diagnostic to look like after your change? I think ideally rustc could point to each opening block comment and each close, in addition to the current message where it points to the end of the file</p>\n</blockquote>\n<p>I think that the ideal diagnostic message would be a message that points to the \"wrong\" block (e.g, the <code>//*foo = 12</code>), and then tell the user that a whitespace may have been intended on that line (between the // and *foo..)</p>",
        "id": 276741451,
        "sender_full_name": "infrandomness",
        "timestamp": 1648322569
    },
    {
        "content": "<p>I'm trying to think about your suggestion and how it'd look like</p>",
        "id": 276741757,
        "sender_full_name": "infrandomness",
        "timestamp": 1648322976
    },
    {
        "content": "<p>is this what you meant ? </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">3</span>:<span class=\"mi\">5</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">3</span><span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\">     </span><span class=\"cm\">/* &lt;start comment&gt;</span>\n<span class=\"cm\">4  | |     //bland</span>\n<span class=\"cm\">5  | |     //weconwec'iwe</span>\n<span class=\"cm\">6  | |</span>\n<span class=\"cm\">...</span>\n<span class=\"cm\">15 | |      //*foo = 12 &lt;start comment&gt;</span>\n<span class=\"cm\">...  |</span>\n<span class=\"cm\">18 | |     */ &lt;end comment&gt;</span>\n<span class=\"cm\">19 | | } &lt;missing end comment&gt;</span>\n<span class=\"cm\">   | |_^</span>\n</code></pre></div>",
        "id": 276742119,
        "sender_full_name": "infrandomness",
        "timestamp": 1648323538
    },
    {
        "content": "<p>while I think this looks great and would be very useful, I am not sure which of the two solution I like the most</p>",
        "id": 276742252,
        "sender_full_name": "infrandomness",
        "timestamp": 1648323740
    },
    {
        "content": "<p>mine generalizes better, but yours points to the cause of the error more accurately. My worry with your idea is it will be hard to formalize and make work in cases other than <code>//*X</code> (what if it <em>is</em> intentional not to have whitespace there?)</p>",
        "id": 276742430,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648324020
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276742430\">said</a>:</p>\n<blockquote>\n<p>mine generalizes better, but yours points to the cause of the error more accurately. My worry with your idea is it will be hard to formalize and make work in cases other than <code>//*X</code> (what if it <em>is</em> intentional not to have whitespace there?)</p>\n</blockquote>\n<p>well yeah but what are the use cases not to have a whitespace ?</p>",
        "id": 276742686,
        "sender_full_name": "infrandomness",
        "timestamp": 1648324345
    },
    {
        "content": "<p>someone somewhere will not have whitespace haha</p>",
        "id": 276742705,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648324372
    },
    {
        "content": "<p>you run into all sorts of crazy code</p>",
        "id": 276742715,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648324381
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276742705\">said</a>:</p>\n<blockquote>\n<p>someone somewhere will not have whitespace haha</p>\n</blockquote>\n<p>ah yeah, I think your solution is better</p>",
        "id": 276742855,
        "sender_full_name": "infrandomness",
        "timestamp": 1648324579
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"459607\">infrandomness</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276742686\">said</a>:</p>\n<blockquote>\n<p>well yeah but what are the use cases not to have a whitespace ?</p>\n</blockquote>\n<p>I've occasionally used the trick of</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"c1\">//* &lt;-- remove a `/` here to disable the block</span>\n<span class=\"w\">    </span><span class=\"n\">code</span><span class=\"w\"> </span><span class=\"n\">here</span><span class=\"w\"></span>\n<span class=\"c1\">// */</span>\n</code></pre></div>",
        "id": 276742887,
        "sender_full_name": "scottmcm",
        "timestamp": 1648324670
    },
    {
        "content": "<p>(Admittedly that's slightly abusive, so a warning related to it wouldn't annoy me)</p>",
        "id": 276742952,
        "sender_full_name": "scottmcm",
        "timestamp": 1648324752
    },
    {
        "content": "<p>ah yeahh</p>",
        "id": 276743055,
        "sender_full_name": "infrandomness",
        "timestamp": 1648324830
    },
    {
        "content": "<p>I see</p>",
        "id": 276743060,
        "sender_full_name": "infrandomness",
        "timestamp": 1648324834
    },
    {
        "content": "<p>but I was also wondering if it would be fair to, in conjuction having this, and creating a lint to create a space between \"//\" and the rest of the comment as long as the rest of the comment is not equal to \"*\" (because then it would break the comment)</p>",
        "id": 276743148,
        "sender_full_name": "infrandomness",
        "timestamp": 1648324928
    },
    {
        "content": "<p>but that's for later, one thing at a time</p>",
        "id": 276743160,
        "sender_full_name": "infrandomness",
        "timestamp": 1648324944
    },
    {
        "content": "<p>FWIW lints have a higher bar than diagnostics, this one would probably be allow-by-default</p>",
        "id": 276743166,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648324976
    },
    {
        "content": "<p>TBH, it feels like a plausible warn-by-default lint <em>in clippy</em> to me.</p>",
        "id": 276743245,
        "sender_full_name": "scottmcm",
        "timestamp": 1648325120
    },
    {
        "content": "<p><a href=\"https://github.com/rust-lang/rust/blob/e489a94deef3d41513fe4254804d730f0fd6cbc0/compiler/rustc_parse/src/lexer/mod.rs#L173\">https://github.com/rust-lang/rust/blob/e489a94deef3d41513fe4254804d730f0fd6cbc0/compiler/rustc_parse/src/lexer/mod.rs#L173</a><br>\nhere is the line that checks for opened and terminated block comments</p>",
        "id": 276744206,
        "sender_full_name": "infrandomness",
        "timestamp": 1648326512
    },
    {
        "content": "<p>So I threw that together</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"cp\">$DIR</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">doc</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">1</span>:<span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"cm\">/*</span>\n<span class=\"cm\">   | -- opened block doc-comment</span>\n<span class=\"cm\">   |</span>\n<span class=\"cm\">LL | help: terminate opened block doc-comment</span>\n\n<span class=\"cm\">error: aborting due to previous error</span>\n\n<span class=\"cm\">For more information about this error, try `rustc --explain E0758`.</span>\n</code></pre></div>\n<p>but I have no idea how that format works</p>",
        "id": 276744720,
        "sender_full_name": "infrandomness",
        "timestamp": 1648327305
    },
    {
        "content": "<p>LGTM :)</p>",
        "id": 276744782,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648327368
    },
    {
        "content": "<p>or are you asking how to generate that output?</p>",
        "id": 276744784,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648327377
    },
    {
        "content": "<p>I am going build it and try what it does and I'll come back to you,<br>\nfor now I can't quite imagine how that looks like as an output</p>",
        "id": 276744949,
        "sender_full_name": "infrandomness",
        "timestamp": 1648327601
    },
    {
        "content": "<p>so as I was working around it, I ran into quite an issue where, <br>\nthe \"comment\" that causes an issue in that person's code, begins by //*,<br>\nthe thing is that both block doc-comment and block comments are /*,<br>\nthat had me a bit confused,<br>\nI'm not really sure where to go from here</p>",
        "id": 276779168,
        "sender_full_name": "infrandomness",
        "timestamp": 1648374519
    },
    {
        "content": "<p>So I have those changes :</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">   </span><span class=\"mi\">1</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">2</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\">   </span><span class=\"o\">-</span>-&gt; <span class=\"cp\">$DIR</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">1</span>:<span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"err\">│</span><span class=\"w\"> </span><span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"c1\">//*</span>\n<span class=\"w\">   </span><span class=\"mi\">4</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"err\">│</span><span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">5</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"err\">│</span><span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">6</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"w\"> </span><span class=\"err\">│</span><span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">7</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">~</span><span class=\"w\"> </span><span class=\"err\">│</span><span class=\"w\"> </span><span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">help</span>: <span class=\"nc\">terminate</span><span class=\"w\"> </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"mi\">9</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">10</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\"> </span><span class=\"n\">error</span>: <span class=\"nc\">aborting</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">11</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"mi\">12</span><span class=\"w\">   </span><span class=\"err\">│</span><span class=\"w\"> </span><span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0758</span><span class=\"err\">`</span><span class=\"p\">.</span><span class=\"w\"></span>\n\n\n<span class=\"w\">  </span><span class=\"n\">diff</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">git</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">ui</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">stderr</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">ui</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">stderr</span><span class=\"w\"></span>\n<span class=\"n\">index</span><span class=\"w\"> </span><span class=\"n\">c513fafeeb3</span><span class=\"o\">..</span><span class=\"mi\">10</span><span class=\"n\">dc7ac7610</span><span class=\"w\"> </span><span class=\"mi\">100644</span><span class=\"w\"></span>\n<span class=\"o\">---</span><span class=\"w\"> </span><span class=\"n\">a</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">ui</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">stderr</span><span class=\"w\"></span>\n<span class=\"o\">+++</span><span class=\"w\"> </span><span class=\"n\">b</span><span class=\"o\">/</span><span class=\"n\">src</span><span class=\"o\">/</span><span class=\"n\">test</span><span class=\"o\">/</span><span class=\"n\">ui</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">stderr</span><span class=\"w\"></span>\n<span class=\"o\">@@</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">8</span><span class=\"w\"> </span><span class=\"o\">+</span><span class=\"mi\">1</span><span class=\"p\">,</span><span class=\"mi\">11</span><span class=\"w\"> </span><span class=\"o\">@@</span><span class=\"w\"></span>\n<span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">-</span>-&gt; <span class=\"cp\">$DIR</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">1</span>:<span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"o\">+</span><span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"c1\">//*</span>\n<span class=\"o\">+</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"w\"></span>\n<span class=\"o\">+</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">+</span><span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"o\">-</span><span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"cm\">/*</span>\n<span class=\"cm\">-   | ^^^^^^^^^^^^^^^^^^^</span>\n<span class=\"cm\">+LL | help: terminate opened block comment</span>\n\n<span class=\"cm\"> error: aborting due to previous error</span>\n</code></pre></div>\n<p>but the error I'm being shown is </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">3</span>:<span class=\"mi\">5</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">3</span><span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\">     </span><span class=\"cm\">/*</span>\n<span class=\"cm\">4  | |     //bland</span>\n<span class=\"cm\">5  | |     //weconwec'iwe</span>\n<span class=\"cm\">6  | |</span>\n<span class=\"cm\">...  |</span>\n<span class=\"cm\">18 | |     */</span><span class=\"w\"></span>\n<span class=\"mi\">19</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">__</span><span class=\"o\">^</span><span class=\"w\"></span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0758</span><span class=\"err\">`</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">error</span>: <span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">test</span><span class=\"o\">-</span><span class=\"k\">crate</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"></span>\n</code></pre></div>\n<p>I was expecting something along the lines of </p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">main</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">3</span>:<span class=\"mi\">5</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">15</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">/</span><span class=\"w\">     </span><span class=\"c1\">//*eaaa</span>\n<span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">19</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"n\">__</span><span class=\"o\">^</span><span class=\"w\"></span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0758</span><span class=\"err\">`</span><span class=\"p\">.</span><span class=\"w\"></span>\n<span class=\"n\">error</span>: <span class=\"nc\">could</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">compile</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">test</span><span class=\"o\">-</span><span class=\"k\">crate</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 276780473,
        "sender_full_name": "infrandomness",
        "timestamp": 1648376438
    },
    {
        "content": "<p>and I'm also afraid my changes (if they worked), break the current diagnostic</p>",
        "id": 276780500,
        "sender_full_name": "infrandomness",
        "timestamp": 1648376520
    },
    {
        "content": "<p>I don't quite understand the diffs you're showing, but I would expect block comments to be treated the same as block doccomments here</p>",
        "id": 276788221,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648387394
    },
    {
        "content": "<p>This is the file right now</p>",
        "id": 276788679,
        "sender_full_name": "infrandomness",
        "timestamp": 1648388055
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">error</span><span class=\"p\">[</span><span class=\"n\">E0758</span><span class=\"p\">]</span>: <span class=\"nc\">unterminated</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">-</span>-&gt; <span class=\"cp\">$DIR</span><span class=\"o\">/</span><span class=\"n\">unterminated</span><span class=\"o\">-</span><span class=\"n\">comment</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">1</span>:<span class=\"mi\">1</span><span class=\"w\"></span>\n<span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"c1\">//*</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">help</span>: <span class=\"nc\">terminate</span><span class=\"w\"> </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n\n<span class=\"n\">error</span>: <span class=\"nc\">aborting</span><span class=\"w\"> </span><span class=\"n\">due</span><span class=\"w\"> </span><span class=\"n\">to</span><span class=\"w\"> </span><span class=\"n\">previous</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"w\"></span>\n\n<span class=\"n\">For</span><span class=\"w\"> </span><span class=\"n\">more</span><span class=\"w\"> </span><span class=\"n\">information</span><span class=\"w\"> </span><span class=\"n\">about</span><span class=\"w\"> </span><span class=\"n\">this</span><span class=\"w\"> </span><span class=\"n\">error</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"kr\">try</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"n\">rustc</span><span class=\"w\"> </span><span class=\"o\">--</span><span class=\"n\">explain</span><span class=\"w\"> </span><span class=\"n\">E0758</span><span class=\"err\">`</span><span class=\"p\">.</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 276788687,
        "sender_full_name": "infrandomness",
        "timestamp": 1648388063
    },
    {
        "content": "<p>I have changed the <code>/*</code> by a <code>//*</code>, but I don't think it is a very good idea because of the fact it might alter the current way rust detects unterminated /*s</p>",
        "id": 276788705,
        "sender_full_name": "infrandomness",
        "timestamp": 1648388097
    },
    {
        "content": "<p>I'm not sure what to do from there, is it better to create a new error ?</p>",
        "id": 276801658,
        "sender_full_name": "infrandomness",
        "timestamp": 1648406551
    },
    {
        "content": "<p>I’m trying to figure out if my changes work but /* and //* are treated the same or if they are not, I’m kind of confused because I would expect the error to also bring in the usage of //* in the original snippet from the issue</p>",
        "id": 276806727,
        "sender_full_name": "infrandomness",
        "timestamp": 1648413640
    },
    {
        "content": "<p>Hey, I’d like some help on this front, I’m not sure what’s going wrong</p>",
        "id": 276821421,
        "sender_full_name": "infrandomness",
        "timestamp": 1648435523
    },
    {
        "content": "<p>Isn't <code>//* . *//</code> a block doc-comment? (Not sure about that final slash, I only ever use line comments).</p>",
        "id": 276826869,
        "sender_full_name": "llogiq",
        "timestamp": 1648442707
    },
    {
        "content": "<p>The final slash is a syntax error. <code>//*</code> starts a block doc-comment and */ closes it. I am still kinda confused what <span class=\"user-mention silent\" data-user-id=\"459607\">infrandomness</span> is asking.</p>",
        "id": 276851392,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648462009
    },
    {
        "content": "<p>I thought that was <code>/**</code></p>",
        "id": 276896151,
        "sender_full_name": "cuviper",
        "timestamp": 1648483908
    },
    {
        "content": "<p>the playground accepts <code>//*</code> as a line comment, no termination</p>",
        "id": 276896604,
        "sender_full_name": "cuviper",
        "timestamp": 1648484095
    },
    {
        "content": "<p>ah good point, that's what I meant</p>",
        "id": 276899708,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1648485408
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276899708\">said</a>:</p>\n<blockquote>\n<p>ah good point, that's what I meant</p>\n</blockquote>\n<p>I kind of got confused in all of this<br>\nmaybe I should start all over again</p>",
        "id": 276917304,
        "sender_full_name": "infrandomness",
        "timestamp": 1648494200
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"w\">    </span><span class=\"c1\">//*foo = 12</span>\n</code></pre></div>\n<p>is treated as an error by the compiler currently, so my goal was to try and modify the unterminated block comment to cover that case, with the changes I tried to apply here : <a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;code=error%5BE0758%5D%3A%20unterminated%20block%20comment%0A%20%20--%3E%20%24DIR%2Funterminated-comment.rs%3A1%3A1%0ALL%20%7C%20%2F%2F*%0A%20%20%20%7C%20--%0A%20%20%20%7C%20%7C%0A%20%20%20%7C%20opened%20block%20comment%0A%20%20%20%7C%0ALL%20%7C%20help%3A%20terminate%20opened%20block%20comment%0A%0Aerror%3A%20aborting%20due%20to%20previous%20error%0A%0AFor%20more%20information%20about%20this%20error%2C%20try%20%60rustc%20--explain%20E0758%60.%0A\">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;code=error%5BE0758%5D%3A%20unterminated%20block%20comment%0A%20%20--%3E%20%24DIR%2Funterminated-comment.rs%3A1%3A1%0ALL%20%7C%20%2F%2F*%0A%20%20%20%7C%20--%0A%20%20%20%7C%20%7C%0A%20%20%20%7C%20opened%20block%20comment%0A%20%20%20%7C%0ALL%20%7C%20help%3A%20terminate%20opened%20block%20comment%0A%0Aerror%3A%20aborting%20due%20to%20previous%20error%0A%0AFor%20more%20information%20about%20this%20error%2C%20try%20%60rustc%20--explain%20E0758%60.%0A</a></p>",
        "id": 276917538,
        "sender_full_name": "infrandomness",
        "timestamp": 1648494317
    },
    {
        "content": "<p>If this happens to be the wrong approach then can anyone explain to me how to achieve this ?</p>",
        "id": 276917722,
        "sender_full_name": "infrandomness",
        "timestamp": 1648494399
    },
    {
        "content": "<p>you seem to have pasted the error as code there</p>",
        "id": 276917806,
        "sender_full_name": "cuviper",
        "timestamp": 1648494438
    },
    {
        "content": "<p>ok, I see -- <code>//*</code> doesn't start a block comment, but _within_ in a block comment, the line <code>//</code> does nothing, and then its <code>/*</code> does start a nested block comment</p>",
        "id": 276918226,
        "sender_full_name": "cuviper",
        "timestamp": 1648494629
    },
    {
        "content": "<p>how weird</p>",
        "id": 276918242,
        "sender_full_name": "cuviper",
        "timestamp": 1648494640
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"138448\">cuviper</span> <a href=\"#narrow/stream/122651-general/topic/Request.20for.20a.20mentor/near/276917806\">said</a>:</p>\n<blockquote>\n<p>you seem to have pasted the error as code there</p>\n</blockquote>\n<p>this is the modified content of the .stderr file</p>",
        "id": 276918314,
        "sender_full_name": "infrandomness",
        "timestamp": 1648494686
    },
    {
        "content": "<p>AIUI, you should be underlining the second and third character</p>",
        "id": 276918462,
        "sender_full_name": "cuviper",
        "timestamp": 1648494756
    },
    {
        "content": "<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"c1\">//*</span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">  </span><span class=\"o\">--</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\">  </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\">   </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"n\">LL</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">help</span>: <span class=\"nc\">terminate</span><span class=\"w\"> </span><span class=\"n\">opened</span><span class=\"w\"> </span><span class=\"n\">block</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n</code></pre></div>\n<p>something akin to this ?</p>",
        "id": 276918565,
        "sender_full_name": "infrandomness",
        "timestamp": 1648494837
    },
    {
        "content": "<p>yes</p>",
        "id": 276918615,
        "sender_full_name": "cuviper",
        "timestamp": 1648494846
    },
    {
        "content": "<p>and so I was  also worried about one other thing, this current file that I'm modifying, it currently cover errors for unterminated /*, so with those modifications, it will break that, will it ?</p>",
        "id": 276918671,
        "sender_full_name": "infrandomness",
        "timestamp": 1648494878
    }
]
[
    {
        "content": "<p>Has anyone seen this before?</p>\n<div class=\"codehilite\"><pre><span></span><code>  = note: &quot;cc&quot; &quot;-Wl,--as-needed&quot; &quot;-Wl,-z,noexecstack&quot; &quot;-m64&quot; &quot;-Wl,--eh-frame-hdr&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot/lib/rustlib/x86_64-unknown-linux-gnu/lib&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/rustc_main-e0f9c79163510d5e.2pxfjbknzoc0g7v9.rcgu.o&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/rustc_main-e0f9c79163510d5e.4d1c07jw2i9k9ak.rcgu.o&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/rustc_main-e0f9c79163510d5e.4jcmdgz1fesxw0gk.rcgu.o&quot; &quot;-o&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/rustc_main-e0f9c79163510d5e&quot; &quot;-Wl,--gc-sections&quot; &quot;-pie&quot; &quot;-Wl,-zrelro&quot; &quot;-Wl,-znow&quot; &quot;-Wl,-O1&quot; &quot;-nodefaultlibs&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/release/deps&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/build/psm-be6e39de58eb97a5/out&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/build/rustc_llvm-f693d55505b398f0/out&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/llvm/build/lib&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot/lib/rustlib/x86_64-unknown-linux-gnu/lib&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps&quot; &quot;-lrustc_driver-41cba2c91ed77a30&quot; &quot;-Wl,--start-group&quot; &quot;-L&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot/lib/rustlib/x86_64-unknown-linux-gnu/lib&quot; &quot;-lstd-405db6453f63ec58&quot; &quot;-Wl,--end-group&quot; &quot;-Wl,-Bstatic&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot/lib/rustlib/x86_64-unknown-linux-gnu/lib/libcompiler_builtins-7d530e56253efa5e.rlib&quot; &quot;-Wl,-Bdynamic&quot; &quot;-lz&quot; &quot;-lrt&quot; &quot;-ldl&quot; &quot;-lpthread&quot; &quot;-lm&quot; &quot;-lstdc++&quot; &quot;-lgcc_s&quot; &quot;-lutil&quot; &quot;-lrt&quot; &quot;-lpthread&quot; &quot;-lm&quot; &quot;-ldl&quot; &quot;-lc&quot; &quot;-Wl,-rpath,$ORIGIN/../lib&quot;\n  = note: /users/a52arora/.linuxbrew/bin/ld: /users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/librustc_driver-41cba2c91ed77a30.so: undefined reference to `std::thread::_M_start_thread(std::unique_ptr&lt;std::thread::_State, std::default_delete&lt;std::thread::_State&gt; &gt;, void (*)())&#39;\n          /users/a52arora/.linuxbrew/bin/ld: /users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/librustc_driver-41cba2c91ed77a30.so: undefined reference to `std::thread::_State::~_State()&#39;\n          collect2: error: ld returned 1 exit status\n\n\nerror: aborting due to previous error\n\n\nDid not run successfully: exit code: 1\n&quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0/bin/rustc&quot; &quot;--crate-name&quot; &quot;rustc_main&quot; &quot;--edition=2018&quot; &quot;compiler/rustc/src/main.rs&quot; &quot;--error-format=json&quot; &quot;--json=diagnostic-rendered-ansi&quot; &quot;--crate-type&quot; &quot;bin&quot; &quot;--emit=dep-info,link&quot; &quot;-C&quot; &quot;opt-level=3&quot; &quot;-C&quot; &quot;embed-bitcode=no&quot; &quot;-C&quot; &quot;codegen-units=64&quot; &quot;-C&quot; &quot;debuginfo=1&quot; &quot;-C&quot; &quot;debug-assertions=on&quot; &quot;-C&quot; &quot;overflow-checks=off&quot; &quot;--cfg&quot; &quot;feature=\\&quot;llvm\\&quot;&quot; &quot;-C&quot; &quot;metadata=e0f9c79163510d5e&quot; &quot;-C&quot; &quot;extra-filename=-e0f9c79163510d5e&quot; &quot;--out-dir&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps&quot; &quot;--target&quot; &quot;x86_64-unknown-linux-gnu&quot; &quot;-C&quot; &quot;incremental=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/incremental&quot; &quot;-L&quot; &quot;dependency=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps&quot; &quot;-L&quot; &quot;dependency=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/release/deps&quot; &quot;--extern&quot; &quot;rustc_codegen_ssa=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/librustc_codegen_ssa-d662c31d04179a2b.rlib&quot; &quot;--extern&quot; &quot;rustc_driver=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/deps/librustc_driver-41cba2c91ed77a30.so&quot; &quot;--cfg=bootstrap&quot; &quot;-Zmacro-backtrace&quot; &quot;-Clink-args=-Wl,-rpath,$ORIGIN/../lib&quot; &quot;-Zunstable-options&quot; &quot;-Wrustc::internal&quot; &quot;-Cprefer-dynamic&quot; &quot;-Cllvm-args=-import-instr-limit=10&quot; &quot;-Z&quot; &quot;binary-dep-depinfo&quot; &quot;-L&quot; &quot;native=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/build/psm-be6e39de58eb97a5/out&quot; &quot;-L&quot; &quot;native=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-rustc/x86_64-unknown-linux-gnu/release/build/rustc_llvm-f693d55505b398f0/out&quot; &quot;-L&quot; &quot;native=/users/a52arora/rust/build/x86_64-unknown-linux-gnu/llvm/build/lib&quot; &quot;-Wrust_2018_idioms&quot; &quot;-Wunused_lifetimes&quot; &quot;-Dwarnings&quot; &quot;--sysroot&quot; &quot;/users/a52arora/rust/build/x86_64-unknown-linux-gnu/stage0-sysroot&quot; &quot;-Z&quot; &quot;force-unstable-if-unmarked&quot;\n-------------\n</code></pre></div>",
        "id": 216177075,
        "sender_full_name": "Aman Arora",
        "timestamp": 1604990810
    },
    {
        "content": "<p>Happened after I recently rebased</p>",
        "id": 216177096,
        "sender_full_name": "Aman Arora",
        "timestamp": 1604990857
    },
    {
        "content": "<p>are you using incremental? If so, it's probably some caching issue and can be fixed by using <code>./x.py clean</code></p>",
        "id": 216181293,
        "sender_full_name": "lcnr",
        "timestamp": 1604996059
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"216206\">lcnr</span> <a href=\"#narrow/stream/122651-general/topic/bootstrap.20issues/near/216181293\">said</a>:</p>\n<blockquote>\n<p>are you using incremental? If so, it's probably some caching issue and can be fixed by using <code>./x.py clean</code></p>\n</blockquote>\n<p>I should've mentioned I tried that as well</p>",
        "id": 216194889,
        "sender_full_name": "Aman Arora",
        "timestamp": 1605005237
    },
    {
        "content": "<p>hmm, then I can't help you here. I think that every time i had an error like this doing a reset fixed it <span aria-label=\"thinking\" class=\"emoji emoji-1f914\" role=\"img\" title=\"thinking\">:thinking:</span></p>",
        "id": 216195209,
        "sender_full_name": "lcnr",
        "timestamp": 1605005483
    },
    {
        "content": "<p>That looks like C++ code -- maybe you updated your C/C++ compiler or standard library since the last LLVM compile?</p>",
        "id": 216222896,
        "sender_full_name": "simulacrum",
        "timestamp": 1605020155
    },
    {
        "content": "<p>It might help to do an rm -rf build or switch to downloading LLVM from CI since you're on linux</p>",
        "id": 216222976,
        "sender_full_name": "simulacrum",
        "timestamp": 1605020173
    },
    {
        "content": "<p>this is my main complaint about make (and make-based systems like cmake), you have to specify all the dependencies explicitly</p>",
        "id": 216224108,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020598
    },
    {
        "content": "<p>and no one ever remembers to specify the toolchain, not even llvm apparently</p>",
        "id": 216224135,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020612
    },
    {
        "content": "<p>Well, in this case it's not an LLVM problem, we don't even re-invoke LLVM</p>",
        "id": 216224284,
        "sender_full_name": "simulacrum",
        "timestamp": 1605020668
    },
    {
        "content": "<p>Also I think that's ... every build system? I don't know anything that solves that problem</p>",
        "id": 216224314,
        "sender_full_name": "simulacrum",
        "timestamp": 1605020687
    },
    {
        "content": "<p>cargo fixes it by having different build caches for each toolchain</p>",
        "id": 216224372,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020710
    },
    {
        "content": "<p>if you update to rust 1.47 from 1.46, you don't get weird incremental bugs, it just works</p>",
        "id": 216224414,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020727
    },
    {
        "content": "<p>right but that's still \"someone explicitly thought about this\" :)</p>",
        "id": 216224624,
        "sender_full_name": "simulacrum",
        "timestamp": 1605020814
    },
    {
        "content": "<p>well yes, but it's <em>one</em> person who thought about it (the cargo developers) instead of every person using the tool</p>",
        "id": 216224663,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020837
    },
    {
        "content": "<p>make puts the burden on you as the developer</p>",
        "id": 216224681,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020849
    },
    {
        "content": "<p>I think that meson also does the right thin. But I'm not sure if it was meson or another C++ build system. I tried too much of them.</p>",
        "id": 216224824,
        "sender_full_name": "Robin Moussu",
        "timestamp": 1605020913
    },
    {
        "content": "<p>meson sounds kind of cool - that's the one that's extensible and in python?</p>",
        "id": 216224883,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605020958
    },
    {
        "content": "<p>Yes</p>",
        "id": 216224896,
        "sender_full_name": "Robin Moussu",
        "timestamp": 1605020970
    },
    {
        "content": "<p>I think that I really didn't like was that you had to explicitly list all files. You couldn't just list the directories and use globbing.</p>",
        "id": 216225050,
        "sender_full_name": "Robin Moussu",
        "timestamp": 1605021036
    },
    {
        "content": "<p>But yes, <code>cargo</code> is just so much better, it's hard to believe.</p>",
        "id": 216225103,
        "sender_full_name": "Robin Moussu",
        "timestamp": 1605021063
    },
    {
        "content": "<p>Anyone knows about the cause<br>\n Compiling nb v1.0.0<br>\n     Running <code>rustc --crate-name nb --edition=2018 /home/oceanfish81/.cargo/registry/src/github.com-1285ae84e5963aae/nb-1.0.0/src/lib.rs --error-format=json --json=diagnostic-rendered-ansi,artifacts --crate-type lib --emit=dep-info,metadata,link -C embed-bitcode=no -C debuginfo=2 -C metadata=ff11b26417734117 -C extra-filename=-ff11b26417734117 --out-dir /home/oceanfish81/Desktop/rust-sipeed-longan-nano-master/target/riscv32imac-unknown-none-elf/debug/deps --target riscv32imac-unknown-none-elf -L dependency=/home/oceanfish81/Desktop/rust-sipeed-longan-nano-master/target/riscv32imac-unknown-none-elf/debug/deps -L dependency=/home/oceanfish81/Desktop/rust-sipeed-longan-nano-master/target/debug/deps --cap-lints allow -C link-arg=-Tlink.x</code><br>\nerror[E0463]: can't find crate for <code>core</code><br>\n  |<br>\n  = note: the <code>riscv32imac-unknown-none-elf</code> target may not be installed</p>\n<p>error: aborting due to previous error</p>\n<p>For more information about this error, try <code>rustc --explain E0463</code>.<br>\nerror: could not compile <code>nb</code><br>\n?</p>",
        "id": 216262247,
        "sender_full_name": "Ivan Serdyuk",
        "timestamp": 1605036724
    },
    {
        "content": "<p>didn't we debug this yesterday? :P</p>",
        "id": 216262445,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1605036811
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"116122\">simulacrum</span> <a href=\"#narrow/stream/122651-general/topic/bootstrap.20issues/near/216222976\">said</a>:</p>\n<blockquote>\n<p>It might help to do an rm -rf build or switch to downloading LLVM from CI since you're on linux</p>\n</blockquote>\n<p>that fixed my issue, thanks</p>",
        "id": 216262453,
        "sender_full_name": "Aman Arora",
        "timestamp": 1605036814
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/bootstrap.20issues/near/216262445\">said</a>:</p>\n<blockquote>\n<p>didn't we debug this yesterday? :P</p>\n</blockquote>\n<p>I think it was today, and with me ;) I had to install the rustup components <code>rustc-dev</code> and <code>llvm-tools-preview</code></p>",
        "id": 216266712,
        "sender_full_name": "Robin Moussu",
        "timestamp": 1605038857
    }
]
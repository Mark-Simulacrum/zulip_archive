[
    {
        "content": "<p>I am trying to test the <code>disallowed-types</code> lint provided by clippy. I have this <code>clippy.toml</code> file in the root of my project:</p>\n<div class=\"codehilite\"><pre><span></span><code>disallowed-types = [&quot;std::collections::HashMap&quot;]\n</code></pre></div>",
        "id": 261738026,
        "sender_full_name": "nnethercote",
        "timestamp": 1637117775
    },
    {
        "content": "<p>But it's not working. I think the <code>clippy.toml</code> file isn't even being read -- if I add deliberate syntax errors to it, <code>cargo clippy</code> runs without complaint.</p>",
        "id": 261738043,
        "sender_full_name": "nnethercote",
        "timestamp": 1637117798
    },
    {
        "content": "<p>I feel like I'm missing something obvious.</p>",
        "id": 261738048,
        "sender_full_name": "nnethercote",
        "timestamp": 1637117808
    },
    {
        "content": "<p>My <code>src/main.rs</code> just looks like this:</p>\n<div class=\"codehilite\"><pre><span></span><code>use std::collections::HashMap;\nfn main() {\n    let mut x: HashMap&lt;u32, u32&gt; = HashMap::new();\n    x.insert(0, 1);\n    println!(&quot;Hello, world!&quot;);\n}\n</code></pre></div>",
        "id": 261738075,
        "sender_full_name": "nnethercote",
        "timestamp": 1637117865
    },
    {
        "content": "<p>hi, i need info about thread library</p>",
        "id": 261738604,
        "sender_full_name": "Thomas Tapia",
        "timestamp": 1637118351
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120989\">@nnethercote</span> Two things:</p>\n<ol>\n<li><code>disallowed-type</code> is an allow-by-default lint (because it is in nursery status).  You need to add <code>#![warn(clippy::disallowed_type)]</code> to the top of <a href=\"http://main.rs\">main.rs</a>.</li>\n<li>Adding syntax errors probably means you are looking at cached output. Clippy does not rerun unless one of the source files changes. Unfortunately cargo does not know about clippy.toml.  It might be feasible to have clippy tell cargo to track that file (via dep-info), but I don't know how feasible that is.</li>\n</ol>",
        "id": 261741197,
        "sender_full_name": "Eric Huss",
        "timestamp": 1637121724
    },
    {
        "content": "<p>It works! Thank you <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 261741218,
        "sender_full_name": "nnethercote",
        "timestamp": 1637121776
    },
    {
        "content": "<p>Hmm, the lint name is <code>disallowed_type</code>, but the entry in the <code>clippy.toml</code> file is <code>disallowed-types</code>. A curious inconsistency</p>",
        "id": 261741424,
        "sender_full_name": "nnethercote",
        "timestamp": 1637122067
    },
    {
        "content": "<p>The lint name should be plural, that should be fixed in clippy</p>",
        "id": 261741873,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1637122605
    },
    {
        "content": "<p>\"should be\" as in \"needs to be\"?</p>",
        "id": 261742560,
        "sender_full_name": "nnethercote",
        "timestamp": 1637123494
    },
    {
        "content": "<p>(as opposed to \"has been\")</p>",
        "id": 261742568,
        "sender_full_name": "nnethercote",
        "timestamp": 1637123504
    },
    {
        "content": "<p>i.e. should I file an issue?</p>",
        "id": 261742749,
        "sender_full_name": "nnethercote",
        "timestamp": 1637123702
    },
    {
        "content": "<p>I'll ask in <a class=\"stream\" data-stream-id=\"257328\" href=\"/#narrow/stream/257328-clippy\">#clippy</a></p>",
        "id": 261742828,
        "sender_full_name": "nnethercote",
        "timestamp": 1637123772
    },
    {
        "content": "<p>\"should be\" as in \"it's inconsistent with the lint policy, which says lints should be plural\"</p>",
        "id": 261743151,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1637124210
    },
    {
        "content": "<p>But not as in \"it will break things if not fixed\"</p>",
        "id": 261743160,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1637124226
    }
]
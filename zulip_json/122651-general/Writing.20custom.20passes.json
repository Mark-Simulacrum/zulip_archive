[
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453933\">@Soham Dixit</span> What kind of pass? An AST lint pass, a HIR lint pass or a MIR optimization pass? Also you may want to ask in <a class=\"stream\" data-stream-id=\"182449\" href=\"/#narrow/stream/182449-t-compiler.2Fhelp\">#t-compiler/help</a> instead.</p>",
        "id": 259516381,
        "sender_full_name": "bjorn3",
        "timestamp": 1635510130
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"133247\">bjorn3</span> <a href=\"#narrow/stream/122651-general/topic/Writing.20custom.20passes/near/259516381\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"453933\">Soham Dixit</span> What kind of pass? An AST lint pass, a HIR lint pass or a MIR optimization pass? Also you may want to ask in <a class=\"stream\" data-stream-id=\"182449\" href=\"/#narrow/stream/182449-t-compiler.2Fhelp\">#t-compiler/help</a> instead.</p>\n</blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"133247\">bjorn3</span>  I have written in  LLVM IR. it converts call by value to call by reference, but where should I store it?</p>",
        "id": 259520632,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635512617
    },
    {
        "content": "<p>An LLVM pass will need to be added to LLVM (<code>src/llvm-project</code>). Or you need to write it as LLVM plugin and pass it to <code>-Zllvm-plugins</code>. This only works for rustc versions that dynamically link to LLVM though. I believe the Linux versions are but not the Windows versions.</p>",
        "id": 259526494,
        "sender_full_name": "bjorn3",
        "timestamp": 1635515375
    },
    {
        "content": "<p>Thankyou <span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span>  for valuable reply it really helped me</p>\n<p>There is one another problem</p>\n<p>I was building rust from here:-<br>\n<a href=\"https://github.com/rust-lang/rust\">https://github.com/rust-lang/rust</a></p>\n<p>Clone got successful, but while building it I was getting this error :-<br>\ninvalid checksum:<br>\n    found:    e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855<br>\n    expected: 7692b0b44eea139874fb8c6cbaca46b8f156ce392454ee4891daad532a5c6baa<br>\nTraceback (most recent call last):<br>\n  File \"x.py\", line 27, in &lt;module&gt;<br>\n    bootstrap.main()<br>\n RuntimeError(\"failed verification\")<br>\nRuntimeError: failed verification</p>\n<p>I have also tired from here:-<br>\n<a href=\"https://rustc-dev-guide.rust-lang.org/getting-started.html#cloning-and-building\">https://rustc-dev-guide.rust-lang.org/getting-started.html#cloning-and-building</a></p>\n<p>Can you please help me to solve the error</p>",
        "id": 259556490,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635528156
    },
    {
        "content": "<p>That seems to be a downloaded file getting corrupt.</p>",
        "id": 259556702,
        "sender_full_name": "bjorn3",
        "timestamp": 1635528262
    },
    {
        "content": "<p>The specific file that got corrupt is <code>rust-std-beta-x86_64-unknown-linux-gnu.tar.xz</code>.</p>",
        "id": 259556743,
        "sender_full_name": "bjorn3",
        "timestamp": 1635528289
    },
    {
        "content": "<p>You should be able to find it in <code>build/cache/2021-10-22</code>. Try removing it and then try building it again.</p>",
        "id": 259556848,
        "sender_full_name": "bjorn3",
        "timestamp": 1635528351
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"133247\">bjorn3</span> <a href=\"#narrow/stream/122651-general/topic/Writing.20custom.20passes/near/259556702\">said</a>:</p>\n<blockquote>\n<p>That seems to be a downloaded file getting corrupt.</p>\n</blockquote>\n<p>I tried removing it and re-build it but the same issue occurs<br>\nThe Error is:</p>\n<p>/rust$ ./x.py build <br>\nUpdating only changed submodules<br>\nSubmodules updated in 0.01 seconds<br>\ndownloading <a href=\"https://static.rust-lang.org/dist/2021-10-22/rust-std-beta-x86_64-unknown-linux-gnu.tar.xz\">https://static.rust-lang.org/dist/2021-10-22/rust-std-beta-x86_64-unknown-linux-gnu.tar.xz</a><br>\n######################################################################### 100.0%<br>\ninvalid checksum:<br>\n    found:    e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855<br>\n    expected: 7692b0b44eea139874fb8c6cbaca46b8f156ce392454ee4891daad532a5c6baa<br>\nTraceback (most recent call last):<br>\n  File \"./x.py\", line 27, in &lt;module&gt;<br>\n    bootstrap.main()<br>\n  File \"/home/soham/rust/src/bootstrap/bootstrap.py\", line 1252, in main<br>\n    bootstrap(help_triggered)<br>\n  File \"/home/soham/rust/src/bootstrap/bootstrap.py\", line 1218, in bootstrap<br>\n    build.download_toolchain()<br>\n  File \"/home/soham/rust/src/bootstrap/bootstrap.py\", line 412, in download_toolchain<br>\n    self._download_component_helper(filename, pattern, tarball_suffix, stage0)<br>\n  File \"/home/soham/rust/src/bootstrap/bootstrap.py\", line 553, in _download_component_helper<br>\n    get(<br>\n  File \"/home/soham/rust/src/bootstrap/bootstrap.py\", line 49, in get<br>\n    raise RuntimeError(\"failed verification\")<br>\nRuntimeError: failed verification</p>",
        "id": 259712016,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635571887
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span> Any idea what could be going on here?</p>",
        "id": 259713757,
        "sender_full_name": "bjorn3",
        "timestamp": 1635574995
    },
    {
        "content": "<p>wtf downloading the file on my computer gives the correct hash</p>",
        "id": 259717556,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1635581198
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453933\">@Soham Dixit</span> do you happen to have any software monitoring your network connection?</p>",
        "id": 259717565,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1635581232
    },
    {
        "content": "<p>otherwise, could you download that link and upload it somewhere so that we can analyze it?</p>",
        "id": 259717574,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1635581244
    },
    {
        "content": "<p>No I don't have any software monitoring</p>",
        "id": 259717833,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635581689
    },
    {
        "content": "<p>Where to upload?</p>",
        "id": 259717851,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635581735
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453933\">@Soham Dixit</span> dunno... just any place where you can upload a 25mb file</p>",
        "id": 259721336,
        "sender_full_name": "Pietro Albini",
        "timestamp": 1635587105
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"121055\">Pietro Albini</span> <a href=\"#narrow/stream/122651-general/topic/Writing.20custom.20passes/near/259721336\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"453933\">Soham Dixit</span> dunno... just any place where you can upload a 25mb file</p>\n</blockquote>\n<p>Sure I will upload it and share you the link<br>\nThank You</p>",
        "id": 259722638,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635588940
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"121055\">@Pietro Albini</span>  <span class=\"user-mention\" data-user-id=\"133247\">@bjorn3</span>  <br>\nIs there any example of How to write rust pass &amp; How to run the pass in rust compiler?</p>",
        "id": 259722730,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635589078
    },
    {
        "content": "<p><a href=\"https://llvm.org/docs/WritingAnLLVMPass.html#basic-code-required\">https://llvm.org/docs/WritingAnLLVMPass.html#basic-code-required</a> has documentation on how to write llvm passes in a way that works as an llvm plugin. It seems the actual registration of the pass at this page is with the legacy pass manager though, which rustc doesn't use anymore since recently.</p>",
        "id": 259726962,
        "sender_full_name": "bjorn3",
        "timestamp": 1635595207
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"133247\">bjorn3</span> <a href=\"#narrow/stream/122651-general/topic/Writing.20custom.20passes/near/259726962\">said</a>:</p>\n<blockquote>\n<p><a href=\"https://llvm.org/docs/WritingAnLLVMPass.html#basic-code-required\">https://llvm.org/docs/WritingAnLLVMPass.html#basic-code-required</a> has documentation on how to write llvm passes in a way that works as an llvm plugin. It seems the actual registration of the pass at this page is with the legacy pass manager though, which rustc doesn't use anymore since recently.</p>\n</blockquote>\n<p>Thanks</p>",
        "id": 259730508,
        "sender_full_name": "Soham Dixit",
        "timestamp": 1635599775
    }
]
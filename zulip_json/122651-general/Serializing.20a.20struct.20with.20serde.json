[
    {
        "content": "<p>Hi all. I'm creating my first project in Rust and facing some difficulties. This is my code and I will describe my problem below it.</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">reqwest</span>::<span class=\"n\">blocking</span>::<span class=\"n\">Client</span>::<span class=\"n\">new</span><span class=\"p\">();</span><span class=\"w\"></span>\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">res</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">client</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s\">\"http://myapi.com/account\"</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">.</span><span class=\"n\">bearer_auth</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"bp\">self</span><span class=\"p\">.</span><span class=\"n\">api_token</span><span class=\"p\">)</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">.</span><span class=\"n\">send</span><span class=\"p\">()</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">()</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">.</span><span class=\"n\">text</span><span class=\"p\">()</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">.</span><span class=\"n\">unwrap</span><span class=\"p\">();</span><span class=\"w\"></span>\n\n<span class=\"fm\">println!</span><span class=\"p\">(</span><span class=\"s\">\"raw: {}\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">res</span><span class=\"p\">);</span><span class=\"w\"></span>\n\n<span class=\"kd\">let</span><span class=\"w\"> </span><span class=\"n\">account</span>: <span class=\"nc\">Account</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">serde_json</span>::<span class=\"n\">from_str</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">res</span><span class=\"p\">).</span><span class=\"n\">unwrap</span><span class=\"p\">();</span><span class=\"w\"></span>\n\n<span class=\"cp\">#[derive(Deserialize, Debug)]</span><span class=\"w\"></span>\n<span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"nc\">Account</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">a</span>: <span class=\"kt\">u32</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">b</span>: <span class=\"kt\">u32</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">c</span>: <span class=\"nb\">String</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>I'm using reqwest to perform a get and than using serde to serialize it to a struct. This is basically failing because the response is something like this:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span>\n    <span class=\"nt\">\"account\"</span><span class=\"p\">:</span> <span class=\"p\">{</span>\n        <span class=\"nt\">\"a\"</span><span class=\"p\">:</span> <span class=\"mi\">10</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"b\"</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">,</span>\n        <span class=\"nt\">\"c\"</span><span class=\"p\">:</span> <span class=\"s2\">\"some text\"</span>\n    <span class=\"p\">}</span>\n<span class=\"p\">}</span>\n</code></pre></div>\n<p>Since this is a crate to be used by other people I would like it to expose a nice struct, like the one I declared. Is there any way to remove/ignore that \"account\" field in order to serde serialize the response directly to my struct? BTW, probably the code is not very good but I'm starting in Rust. Any comments are appreciated.</p>",
        "id": 231312202,
        "sender_full_name": "Nuno Martins",
        "timestamp": 1616420791
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"399668\">@Nuno Martins</span> you may get faster feedback on the official or community discord, or on <a href=\"http://users.rust-lang.org\">users.rust-lang.org</a>. Zulip is mostly used by contributors to rust-lang/rust itself - it's fine to ask for help here, it just may not be very fast</p>",
        "id": 231312507,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1616420905
    },
    {
        "content": "<p><a href=\"https://serde.rs/container-attrs.html#transparent\">https://serde.rs/container-attrs.html#transparent</a></p>",
        "id": 231313359,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1616421263
    },
    {
        "content": "<p>Either you use a wrapper or use <code>serde_json::Value</code> to access <code>value[\"account\"]</code> and then deserialize to a struct. There was an issue about an annotation that could strip a prefix like that but I don't that has been implemented.</p>",
        "id": 231317454,
        "sender_full_name": "The 8472",
        "timestamp": 1616422820
    }
]
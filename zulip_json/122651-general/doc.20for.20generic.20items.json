[
    {
        "content": "<p>Hi folks, I'm using const generics, and try to add docs for the const generic param, like:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"nc\">Foo</span><span class=\"o\">&lt;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"sd\">/// Some doc</span>\n<span class=\"w\">   </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">N</span>: <span class=\"kt\">usize</span>\n<span class=\"o\">&gt;</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n<p>But problems are that <code>cargo doc</code>does not display the doc for <code>N</code> in <code>Foo</code>.</p>\n<p>And the wrose thing is, when I use rustfmt to format the code, it becomes</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">pub</span><span class=\"w\"> </span><span class=\"k\">struct</span> <span class=\"nc\">Foo</span><span class=\"o\">&lt;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"sd\">/// Some doc</span>\n<span class=\"w\">    </span><span class=\"sd\">/// Some doc const N: usize</span>\n<span class=\"o\">&gt;</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n<p>which is really weird. </p>\n<p>I think this issue is related to rustdoc, const generics, and rustfmt, so I cannot select a specific zulip stream to talk about this, and thus I opened a topic in <a class=\"stream\" data-stream-id=\"122651\" href=\"/#narrow/stream/122651-general\">#general</a> .</p>",
        "id": 263533010,
        "sender_full_name": "Frank King",
        "timestamp": 1638503654
    },
    {
        "content": "<p>Docs are currently ignored on generic (type, lifetime, or const) parameters. It's a bug that there's no warning, but funnily enough it was fixed just a few days ago. So your example (on nightly) now emits this warning:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">warning</span>: <span class=\"nc\">unused</span><span class=\"w\"> </span><span class=\"n\">doc</span><span class=\"w\"> </span><span class=\"n\">comment</span><span class=\"w\"></span>\n<span class=\"w\"> </span><span class=\"o\">-</span>-&gt; <span class=\"nc\">src</span><span class=\"o\">/</span><span class=\"n\">lib</span><span class=\"p\">.</span><span class=\"n\">rs</span>:<span class=\"mi\">2</span>:<span class=\"mi\">5</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"mi\">2</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"sd\">/// Some doc</span>\n<span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\">     </span><span class=\"o\">^^^^^^^^^^^^</span><span class=\"w\"></span>\n<span class=\"mi\">3</span><span class=\"w\"> </span><span class=\"o\">|</span><span class=\"w\">    </span><span class=\"k\">const</span><span class=\"w\"> </span><span class=\"n\">N</span>: <span class=\"kt\">usize</span>\n  <span class=\"o\">|</span><span class=\"w\">          </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"n\">rustdoc</span><span class=\"w\"> </span><span class=\"n\">does</span><span class=\"w\"> </span><span class=\"n\">not</span><span class=\"w\"> </span><span class=\"n\">generate</span><span class=\"w\"> </span><span class=\"n\">documentation</span><span class=\"w\"> </span><span class=\"k\">for</span><span class=\"w\"> </span><span class=\"n\">generic</span><span class=\"w\"> </span><span class=\"n\">parameters</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">|</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">note</span>: <span class=\"err\">`</span><span class=\"cp\">#[warn(unused_doc_comments)]</span><span class=\"err\">`</span><span class=\"w\"> </span><span class=\"n\">on</span><span class=\"w\"> </span><span class=\"n\">by</span><span class=\"w\"> </span><span class=\"n\">default</span><span class=\"w\"></span>\n<span class=\"w\">  </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"n\">help</span>: <span class=\"nc\">use</span><span class=\"w\"> </span><span class=\"err\">`</span><span class=\"c1\">//` for a plain comment</span>\n</code></pre></div>",
        "id": 263534072,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638504896
    },
    {
        "content": "<p>However, the rustfmt behavior seems like a bug. I suggest opening an issue at rust-lang/rustfmt on GitHub.</p>",
        "id": 263534104,
        "sender_full_name": "Noah Lev",
        "timestamp": 1638504946
    },
    {
        "content": "<p>Thanks! I will open a bug later.</p>",
        "id": 263534227,
        "sender_full_name": "Frank King",
        "timestamp": 1638505053
    }
]
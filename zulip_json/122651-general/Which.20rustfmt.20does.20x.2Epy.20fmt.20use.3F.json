[
    {
        "content": "<p>I configured vscode in the rustc workspace to use <code>./build/x86_64-unknown-linux-gnu/stage0/bin/rustfmt</code> for formatting, in the hopes that that would mean it uses the same rustfmt as <code>x.py fmt</code> so everything is nicely in sync. However, this does not seem to be the case:<br>\n<code>./build/x86_64-unknown-linux-gnu/stage0/bin/rustfmt compiler/rustc_middle/src/mir/interpret/pointer.rs</code> <a href=\"https://github.com/rust-lang/rustfmt/issues/4348#issuecomment-921353702\">fails with a parse error </a>, but <code>x.py fmt</code> is able to format that same file just fine.<br>\nSo which rustfmt <em>does</em> <code>x.py</code> use, and what is that other rustfmt in stage0/bin about...?</p>",
        "id": 253671724,
        "sender_full_name": "RalfJ",
        "timestamp": 1631838753
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120791\">@RalfJ</span> This is the correct rustfmt.</p>",
        "id": 253672052,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631839004
    },
    {
        "content": "<p>I think you are missing <code>--edition=2018</code></p>",
        "id": 253672061,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631839011
    },
    {
        "content": "<p>That could probably be added to rustfmt.toml</p>",
        "id": 253672200,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631839112
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"120518\">Eric Huss</span> <a href=\"#narrow/stream/122651-general/topic/Which.20rustfmt.20does.20x.2Epy.20fmt.20use.3F/near/253672061\">said</a>:</p>\n<blockquote>\n<p>I think you are missing <code>--edition=2018</code></p>\n</blockquote>\n<p>oh, interesting. so vscode should add that flag?</p>",
        "id": 253672499,
        "sender_full_name": "RalfJ",
        "timestamp": 1631839348
    },
    {
        "content": "<p>Sorry, I don't use vscode, I'm not too familiar with its plugins.</p>",
        "id": 253672545,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631839404
    },
    {
        "content": "<p>I would assume there is a config option somewhere</p>",
        "id": 253672551,
        "sender_full_name": "Eric Huss",
        "timestamp": 1631839411
    },
    {
        "content": "<p>well it should know the edition from the cargo file. but this is helpful, I will take it back to the RA bug report. Thanks!</p>",
        "id": 253672755,
        "sender_full_name": "RalfJ",
        "timestamp": 1631839589
    },
    {
        "content": "<p>there are a few options used -- see <code>src/bootstrap/format.rs</code></p>",
        "id": 253672796,
        "sender_full_name": "cuviper",
        "timestamp": 1631839636
    },
    {
        "content": "<p>The issue is that the instructions at <a href=\"https://rustc-dev-guide.rust-lang.org/building/suggested.html?highlight=vscode#configuring-rust-analyzer-for-rustc\">https://rustc-dev-guide.rust-lang.org/building/suggested.html?highlight=vscode#configuring-rust-analyzer-for-rustc</a> are wrong^^</p>",
        "id": 253672892,
        "sender_full_name": "RalfJ",
        "timestamp": 1631839722
    },
    {
        "content": "<p>it should be</p>\n<div class=\"codehilite\"><pre><span></span><code>    &quot;rust-analyzer.rustfmt.overrideCommand&quot;: [\n        &quot;./build/x86_64-unknown-linux-gnu/stage0/bin/rustfmt&quot;,\n        &quot;--edition=2018&quot;\n    ],\n</code></pre></div>",
        "id": 253672905,
        "sender_full_name": "RalfJ",
        "timestamp": 1631839732
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"120791\">@RalfJ</span> are you interested in making a PR to that effect? ;)</p>",
        "id": 253682460,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1631847743
    },
    {
        "content": "<p>interested, yes. but my backlog is still quite long.^^ this is a sideshow of a sideshow of a rabbit hole I went down...</p>",
        "id": 253742211,
        "sender_full_name": "RalfJ",
        "timestamp": 1631885553
    },
    {
        "content": "<p>Made a PR so you don't have to <span aria-label=\"wink\" class=\"emoji emoji-1f609\" role=\"img\" title=\"wink\">:wink:</span>: <a href=\"https://github.com/rust-lang/rustc-dev-guide/pull/1207\">https://github.com/rust-lang/rustc-dev-guide/pull/1207</a></p>\n<p>cc <span class=\"user-mention\" data-user-id=\"232545\">@Joshua Nelson</span> <span class=\"user-mention\" data-user-id=\"120791\">@RalfJ</span></p>",
        "id": 253798400,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1631908352
    },
    {
        "content": "<p>amazing, thank you! <span aria-label=\"heart\" class=\"emoji emoji-2764\" role=\"img\" title=\"heart\">:heart:</span></p>",
        "id": 253798562,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1631908431
    },
    {
        "content": "<p>Adding the <code>&lt;!-.. date --&gt;</code> comment was a nice touch <span class=\"user-mention\" data-user-id=\"280891\">@Frank Steffahn</span> .</p>",
        "id": 253848176,
        "sender_full_name": "Tim McNamara",
        "timestamp": 1631950617
    },
    {
        "content": "<p>What's the comment for?</p>",
        "id": 253861689,
        "sender_full_name": "Laurențiu",
        "timestamp": 1631964581
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203546\">@Laurențiu</span> <a href=\"https://github.com/rust-lang/rustc-dev-guide/pull/1037\">https://github.com/rust-lang/rustc-dev-guide/pull/1037</a></p>",
        "id": 253863168,
        "sender_full_name": "Frank Steffahn",
        "timestamp": 1631966234
    },
    {
        "content": "<p>Ah, thanks</p>",
        "id": 253863763,
        "sender_full_name": "Laurențiu",
        "timestamp": 1631966765
    }
]
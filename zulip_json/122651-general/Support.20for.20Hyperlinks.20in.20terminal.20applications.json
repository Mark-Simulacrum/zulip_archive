[
    {
        "content": "<p>Hi, I'd like to know if this makes sense or not, but it's my understanding that console applications can add some escape characters to hint terminals that something can be clicked on as a hyperlink. In Ubuntu at least, this uses xdg-open to use the default application for a given file via mime-types.</p>\n<p>I use this a lot to open files right from the error messages in other compilers.</p>\n<p>It'd be rad if Rust compiler used these escape characters, I'd be happy to contribute this but would need some guidance to figure out different places where stdout gets a filename printed. How should I proceed? Thanks!</p>\n<p>Here is a short article about this feature in gnome terminal: <a href=\"https://purpleidea.com/blog/2018/06/29/hyperlinks-in-gnome-terminal/\">https://purpleidea.com/blog/2018/06/29/hyperlinks-in-gnome-terminal/</a></p>",
        "id": 259402398,
        "sender_full_name": "Francisco Tufro",
        "timestamp": 1635433438
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"453125\">@Francisco Tufro</span> almost all the diagnostics should go through the <code>Session</code> object, which I think delegates to some code in <code>rustc_errors</code>. I'd take a look around there :)</p>",
        "id": 259409578,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635436407
    },
    {
        "content": "<p>What happens if the terminal doesn't support those hyperlinks?</p>",
        "id": 259409652,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635436436
    },
    {
        "content": "<p>I think this is a feature of the shell you're using. Example, I use <code>kitty</code> and it automatically makes all hyperlinks clickable and opens them with the default browser:<br>\n<a href=\"https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks\">https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks</a></p>",
        "id": 259409905,
        "sender_full_name": "apiraino",
        "timestamp": 1635436523
    },
    {
        "content": "<p>not sure how <del>rustdoc</del> (the output of rustc) itself can (or should) handle this feature</p>",
        "id": 259409976,
        "sender_full_name": "apiraino",
        "timestamp": 1635436556
    },
    {
        "content": "<p>If the terminal doesn't support them it should ignore them. There are a couple of buggy terminals that don't, but I don't think they're very common.</p>",
        "id": 259410126,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1635436618
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"250987\">@apiraino</span> this isn't about rustdoc, it's for diagnostics</p>",
        "id": 259410154,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635436629
    },
    {
        "content": "<p>I think hyperlinking things like error codes would be great.</p>",
        "id": 259410212,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1635436651
    },
    {
        "content": "<p>(yes, sorry fixed!)</p>",
        "id": 259410215,
        "sender_full_name": "apiraino",
        "timestamp": 1635436653
    },
    {
        "content": "<p>Also the hyperlink support you're talking about looks different, that uses heuristics iiuc</p>",
        "id": 259410219,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635436655
    },
    {
        "content": "<p>/me wonders if the escape control characters would break machine parsing of the output</p>",
        "id": 259411505,
        "sender_full_name": "apiraino",
        "timestamp": 1635437143
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"250987\">apiraino</span> <a href=\"#narrow/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications/near/259409905\">said</a>:</p>\n<blockquote>\n<p>I think this is a feature of the shell you're using. Example, I use <code>kitty</code> and it automatically makes all hyperlinks clickable and opens them with the default browser:<br>\n<a href=\"https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks\">https://sw.kovidgoyal.net/kitty/conf/?highlight=link#opt-kitty.allow_hyperlinks</a></p>\n</blockquote>\n<p>Yes and no. It's the terminal emulator, not the shell that must supports it, and usually, HTTP URLS are automatically parsed, but not files.</p>\n<p>For example, using kitty, if you run <code>ls</code> you'll get a regular listing, but if you use <code>ls --hyperlink</code> you can now click on files to open them with the default application for the mime-type. That's a feature of <code>ls</code> relying on the terminal emulator support for hyperlinks, not a kitty-specific feature.</p>",
        "id": 259411909,
        "sender_full_name": "Francisco Tufro",
        "timestamp": 1635437280
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/Support.20for.20Hyperlinks.20in.20terminal.20applications/near/259409578\">said</a>:</p>\n<blockquote>\n<p><span class=\"user-mention silent\" data-user-id=\"453125\">Francisco Tufro</span> almost all the diagnostics should go through the <code>Session</code> object, which I think delegates to some code in <code>rustc_errors</code>. I'd take a look around there :)</p>\n</blockquote>\n<p>Thanks! IÂ´ll take a look!</p>",
        "id": 259411988,
        "sender_full_name": "Francisco Tufro",
        "timestamp": 1635437302
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"250987\">@apiraino</span> machine parsing should be using JSON, not the human readable format</p>",
        "id": 259412015,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635437312
    },
    {
        "content": "<p>oh right. Actually I chose the wrong wording: I was thinking to<code>grep</code>'ping stdout/stderr when bisecting an ICEs by reading the raw output (for example)</p>",
        "id": 259412334,
        "sender_full_name": "apiraino",
        "timestamp": 1635437461
    },
    {
        "content": "<p>That should still be using JSON though IMO</p>",
        "id": 259413386,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635437913
    },
    {
        "content": "<p>jq makes json parsing not too hard</p>",
        "id": 259413409,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635437926
    },
    {
        "content": "<p>And this wouldn't be substantially different from color control characters, which you'd already have to handle</p>",
        "id": 259413454,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1635437950
    },
    {
        "content": "<p>Doing it in shell with no extra deps makes parsing json annoying.</p>",
        "id": 259413470,
        "sender_full_name": "Connor Horman",
        "timestamp": 1635437959
    },
    {
        "content": "<p><code>rustc ... | grep</code> should be fine as long as any escape codes are conditional on <code>isatty</code> or similar</p>",
        "id": 259420535,
        "sender_full_name": "cuviper",
        "timestamp": 1635440660
    },
    {
        "content": "<p>like we do for color codes</p>",
        "id": 259420544,
        "sender_full_name": "cuviper",
        "timestamp": 1635440665
    }
]
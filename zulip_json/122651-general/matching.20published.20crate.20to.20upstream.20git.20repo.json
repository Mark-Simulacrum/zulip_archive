[
    {
        "content": "<p>Hi everyone!</p>\n<p>For the last few weeks I've been satisfying my own curiosity by investigating how easy or hard it is to match the published crate contents against the upstream git repo.  I had a lot of fun poking around and learned some interesting things... and I want to publish my commentary as a blog post, but I want to seek out some feedback first. I was wondering if anyone wanted to read the first draft and give me any feedback?</p>\n<p>In particular, I don't want this to come across as a cheap hit on the team. I would like to be constructive and I'm looking for ways I could contribute to improving things, so if anything in this draft comes across as being too negative, please let me know and I'll try to rewrite it in a more constructive way.</p>\n<p>I'm sure I'm far from the first person to wonder about this, but I haven't found much previous work in this area, so if anyone could give me pointers to past discussions or relevant issues I'd be happy to add links to those.</p>\n<p>The draft is here: <a href=\"https://github.com/ericseppanen/crates_io_analyzer/blob/main/README.md\">https://github.com/ericseppanen/crates_io_analyzer/blob/main/README.md</a></p>\n<p>Feel free to reply in a here or via private message (or send me an email).  Thanks again for the great work!</p>",
        "id": 255828694,
        "sender_full_name": "Eric Seppanen",
        "timestamp": 1633136827
    },
    {
        "content": "<blockquote>\n<p>The crate download doesn't contain a cryptographic signature;</p>\n</blockquote>\n<p>There is a hash stored in the index <a href=\"https://github.com/rust-lang/crates.io-index/blob/master/se/mv/semver#L42\">https://github.com/rust-lang/crates.io-index/blob/master/se/mv/semver#L42</a>, and Cargo will check it when it is used to download a torball.</p>",
        "id": 255834472,
        "sender_full_name": "Eh2406",
        "timestamp": 1633142620
    },
    {
        "content": "<blockquote>\n<p>What is interesting is that most crates</p>\n</blockquote>\n<p>This was added to Cargo, so it is all crates published with a at all up to date Cargo.</p>",
        "id": 255834632,
        "sender_full_name": "Eh2406",
        "timestamp": 1633142755
    },
    {
        "content": "<p>oops you are right, I forget <code>--allow-dirty</code></p>",
        "id": 255834822,
        "sender_full_name": "Eh2406",
        "timestamp": 1633142902
    },
    {
        "content": "<blockquote>\n<p>There is a hash stored in the index <a href=\"https://github.com/rust-lang/crates.io-index/blob/master/se/mv/semver#L42\">https://github.com/rust-lang/crates.io-index/blob/master/se/mv/semver#L42</a>, and Cargo will check it when it is used to download a torball.</p>\n</blockquote>\n<p>I didn't realize that, thanks!</p>",
        "id": 255835305,
        "sender_full_name": "Eric Seppanen",
        "timestamp": 1633143448
    },
    {
        "content": "<p>You may allso want to read <a href=\"https://internals.rust-lang.org/t/making-crates-io-verify-code-against-repository/14075\">https://internals.rust-lang.org/t/making-crates-io-verify-code-against-repository/14075</a></p>",
        "id": 255835652,
        "sender_full_name": "Eh2406",
        "timestamp": 1633143765
    },
    {
        "content": "<p>Over all I really like the blog post. Thank you for looking into the topic.</p>",
        "id": 255835686,
        "sender_full_name": "Eh2406",
        "timestamp": 1633143827
    },
    {
        "content": "<blockquote>\n<p>In particular, I don't want this to come across as a cheap hit on the team. </p>\n</blockquote>\n<p>I am only one person, and on the Cargo team not the <a href=\"http://Crates.io\">Crates.io</a> team, but it did not seam accusatory to me.</p>",
        "id": 255835781,
        "sender_full_name": "Eh2406",
        "timestamp": 1633143925
    },
    {
        "content": "<p>Thanks for the review and all the links, that's really useful information!</p>",
        "id": 255835837,
        "sender_full_name": "Eric Seppanen",
        "timestamp": 1633143964
    },
    {
        "content": "<p><del>What algorithm generated the <code>cksum</code> field in the crate index? After downloading semver-1.0.4.crate, I can't seem to reproduce that checksum?</del><br>\n(Never mind, got tripped up by the fact that <code>cargo download semver &gt; semver.crate</code> somehow results in a truncated file. Something like <code>wget &lt;download-url&gt;</code> gives me the right contents.)</p>\n<p>Is there an API endpoint to retrieve the hash of a particular crate/version? Is there an authoritative list of what API endpoints exist?</p>",
        "id": 255836184,
        "sender_full_name": "Eric Seppanen",
        "timestamp": 1633144390
    },
    {
        "content": "<p>Also, is there an accepted name for the tarball that <a href=\"http://crates.io\">crates.io</a> delivers? I've been calling it the \"code bundle\" or \"download package\", and I should probably use more consistent terminology...</p>",
        "id": 255836860,
        "sender_full_name": "Eric Seppanen",
        "timestamp": 1633145188
    },
    {
        "content": "<p>Sorry went to bed.</p>\n<blockquote>\n<p>Is there an API endpoint to retrieve the hash of a particular crate/version?</p>\n</blockquote>\n<p>At this time, I don't think so. I think the authoritative source is the git index. Like, that is what Cargo uses.</p>\n<blockquote>\n<p>Is there an authoritative list of what API endpoints exist?</p>\n</blockquote>\n<p>That is up to the <a href=\"http://crates.io\">crates.io</a> team, I don't off hand know. </p>\n<blockquote>\n<p>Also, is there an accepted name for the tarball that <a href=\"http://crates.io\">crates.io</a> delivers?</p>\n</blockquote>\n<p>I thin the Cargo docs call it a \"<code>.crate</code> file\" <a href=\"https://doc.rust-lang.org/cargo/commands/cargo-package.html\">here</a>, but <span class=\"user-mention\" data-user-id=\"120518\">@Eric Huss</span> would know if we have consistent terminology.</p>",
        "id": 255878035,
        "sender_full_name": "Eh2406",
        "timestamp": 1633188046
    },
    {
        "content": "<blockquote>\n<p>Is there an authoritative list of what API endpoints exist?</p>\n</blockquote>\n<p><a href=\"https://doc.rust-lang.org/cargo/reference/registries.html#web-api\">https://doc.rust-lang.org/cargo/reference/registries.html#web-api</a> is the only formal documentation for API endpoints. The rest are intentionally not documented, as they don't have a particular commitment to being publicly used.</p>\n<blockquote>\n<p>is there an accepted name for the tarball that <a href=\"http://crates.io\">crates.io</a> delivers?</p>\n</blockquote>\n<p>Yea, I just call it a <code>.crate</code> file.</p>",
        "id": 255879085,
        "sender_full_name": "Eric Huss",
        "timestamp": 1633189206
    },
    {
        "content": "<p>One minor issue, it's not super important, but I would consider maybe anonymizing the names of the packages you are highlighting.  People generally don't need to know specifically which packages have certain properties, and it could cause some unwanted headaches for those maintainers. If someone really wants to know, they can re-run your tool to analyze things.</p>",
        "id": 255879299,
        "sender_full_name": "Eric Huss",
        "timestamp": 1633189473
    },
    {
        "content": "<p>Article published! Thanks everyone for the feedback!<br>\n<a href=\"https://codeandbitters.com/published-crate-analysis/\">https://codeandbitters.com/published-crate-analysis/</a></p>",
        "id": 255977539,
        "sender_full_name": "Eric Seppanen",
        "timestamp": 1633292975
    }
]
[
    {
        "content": "<p>Soliciting reason(s) not to set [profile.test] opt-level = N &gt; 0?</p>\n<p>Cant help but think if this was a universally good idea it would be the default.</p>",
        "id": 267814186,
        "sender_full_name": "Joel Pedraza",
        "timestamp": 1642039063
    },
    {
        "content": "<p>It would cause recompiles if the non-test profile were <code>opt-level = 0</code>.</p>",
        "id": 267814451,
        "sender_full_name": "Noah Lev",
        "timestamp": 1642039217
    },
    {
        "content": "<p>It builds slower, and when you're testing you often want quicker feedback.</p>",
        "id": 268059066,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1642187728
    },
    {
        "content": "<p>If your crate benefits strongly from optimization, to the point that your tests will run much slower without optimization, it's worth setting opt-level in your test profile.</p>",
        "id": 268059145,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1642187767
    },
    {
        "content": "<p>I think it can be useful in the general case, though. At some point, even if the crate itself doesn't benefit much in terms of individual tests running slower, if you have a lot of tests, the total time for tests will eventually dominate over the compilation time.</p>",
        "id": 268061071,
        "sender_full_name": "Connor Horman",
        "timestamp": 1642188765
    },
    {
        "content": "<p>I believe you can also do <code>cargo test --release</code>. That may disable debug assertions though.</p>",
        "id": 268066736,
        "sender_full_name": "bjorn3",
        "timestamp": 1642191508
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"257758\">@Connor Horman</span> more tests would also mean more compiletime</p>",
        "id": 268068666,
        "sender_full_name": "The 8472",
        "timestamp": 1642192251
    },
    {
        "content": "<p>I doubt it would be significantly more, though. Or rather, I still think that execution time will exceed compile time for some large number of tests or more in general.</p>",
        "id": 268068769,
        "sender_full_name": "Connor Horman",
        "timestamp": 1642192315
    },
    {
        "content": "<p>But in that case you can just set <code>opt-level = 1</code> yourself</p>",
        "id": 268069345,
        "sender_full_name": "Noah Lev",
        "timestamp": 1642192599
    }
]
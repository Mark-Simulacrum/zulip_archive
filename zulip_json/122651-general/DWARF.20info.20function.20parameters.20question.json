[
    {
        "content": "<p>Not sure where I should ask this, so asking it here. I was trying to parse some DWARF info on a binary.</p>\n<div class=\"codehilite\" data-code-language=\"C\"><pre><span></span><code><span class=\"cp\">#include</span><span class=\"w\"> </span><span class=\"cpf\">&lt;stdio.h&gt;</span><span class=\"cp\"></span>\n\n<span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"nf\">fact</span><span class=\"p\">(</span><span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">if</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">&lt;</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">        </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">;</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"k\">return</span><span class=\"w\"> </span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">*</span><span class=\"w\"> </span><span class=\"n\">fact</span><span class=\"p\">(</span><span class=\"n\">x</span><span class=\"w\"> </span><span class=\"o\">-</span><span class=\"w\"> </span><span class=\"mi\">1</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"kt\">int</span><span class=\"w\"> </span><span class=\"nf\">main</span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">printf</span><span class=\"p\">(</span><span class=\"s\">\"%d\"</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"n\">fact</span><span class=\"p\">(</span><span class=\"mi\">10</span><span class=\"p\">));</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>this is the binary,</p>\n<p>The formal parameter info with readelf</p>\n<div class=\"codehilite\"><pre><span></span><code> &lt;2&gt;&lt;cc&gt;: Abbrev Number: 11 (DW_TAG_formal_parameter)\n    &lt;cd&gt;   DW_AT_name        : x\n    &lt;cf&gt;   DW_AT_decl_file   : 1\n    &lt;d0&gt;   DW_AT_decl_line   : 3\n    &lt;d1&gt;   DW_AT_decl_column : 14\n    &lt;d2&gt;   DW_AT_type        : &lt;0x58&gt;\n    &lt;d6&gt;   DW_AT_location    : 2 byte block: 91 6c      (DW_OP_fbreg: -20)\n</code></pre></div>\n<p>with <code>ddbug-parser</code> (<a href=\"https://docs.rs/ddbug_parser/0.3.0/ddbug_parser/struct.Parameter.html\">https://docs.rs/ddbug_parser/0.3.0/ddbug_parser/struct.Parameter.html</a>)</p>\n<div class=\"codehilite\"><pre><span></span><code>param.frame_location() = [FrameLocation { offset: -20, bit_size: Size() }]\nparam.registers() = []\n</code></pre></div>\n<p>But looking at the generated code, it definitely seems to be passed through <code>rdi</code></p>\n<div class=\"codehilite\"><pre><span></span><code>    1168:       bf 0a 00 00 00          mov    edi,0xa\n    116d:       e8 c7 ff ff ff          call   1139 &lt;fact&gt;\n</code></pre></div>\n<p>Am I misinterpreting the location here? How can I get where the variable is stored?</p>",
        "id": 253969021,
        "sender_full_name": "vn-ki",
        "timestamp": 1632082510
    },
    {
        "content": "<p>The <code>DW_AT_location</code> shows where the parameter will be stored by <code>fact</code> after the call. It doesn't show how it is passed as argument to <code>fact</code>.</p>",
        "id": 253974030,
        "sender_full_name": "bjorn3",
        "timestamp": 1632087936
    },
    {
        "content": "<p>I see. Is it possible to get the how the argument is passed somehow from the dwarf info?</p>",
        "id": 254025603,
        "sender_full_name": "vn-ki",
        "timestamp": 1632132414
    },
    {
        "content": "<p>Not sure.</p>",
        "id": 254041629,
        "sender_full_name": "bjorn3",
        "timestamp": 1632141230
    }
]
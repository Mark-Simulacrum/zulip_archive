[
    {
        "content": "<p>I'm trying to use Cargo's build-std feature to build a minimal staticlib. It works great for the most part except that it appears to include a lot of compiler_builtins, regardless of if they're used or not. For example, I'm seeing symbols for float operations but I'm not using any floats.</p>\n<p>Is there any way to exclude unused builtins?</p>",
        "id": 276433510,
        "sender_full_name": "Chris Denton",
        "timestamp": 1648098964
    },
    {
        "content": "<p>The following might help:</p>\n<div class=\"codehilite\" data-code-language=\"TOML\"><pre><span></span><code><span class=\"k\">[profile.release.package.compiler_builtins]</span><span class=\"w\"></span>\n<span class=\"n\">debug-assertions</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"w\"></span>\n<span class=\"n\">overflow-checks</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"w\"></span>\n<span class=\"n\">codegen-units</span><span class=\"w\"> </span><span class=\"o\">=</span><span class=\"w\"> </span><span class=\"mi\">10000</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 276435676,
        "sender_full_name": "tm",
        "timestamp": 1648101677
    },
    {
        "content": "<p>Hm, that did split up the compiler_builtins into separate object files but they all ended up getting linked into the final staticlib.</p>",
        "id": 276436573,
        "sender_full_name": "Chris Denton",
        "timestamp": 1648102836
    },
    {
        "content": "<p>That is fine. Archive members are only extracted if they are used in the first place.</p>",
        "id": 276437638,
        "sender_full_name": "bjorn3",
        "timestamp": 1648104248
    },
    {
        "content": "<p>That is indeed better. The unused bits do greatly increases the size of the lib. Though I gueas it's not a lot in the grand scheme of things.</p>",
        "id": 276437882,
        "sender_full_name": "Chris Denton",
        "timestamp": 1648104628
    }
]
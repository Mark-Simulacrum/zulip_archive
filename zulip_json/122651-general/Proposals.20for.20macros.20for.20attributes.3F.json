[
    {
        "content": "<p>Have there been any proposals for macros that expand to attributes that went anywhere?</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">macro_rules</span><span class=\"o\">!</span><span class=\"w\"> </span><span class=\"n\">Things</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"cp\">#[derive(Debug, Default)]</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"n\">Things</span><span class=\"o\">!</span><span class=\"p\">{}</span><span class=\"w\"></span>\n<span class=\"k\">struct</span> <span class=\"nc\">X</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>Or better, something like:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">macro_rules</span><span class=\"o\">!</span><span class=\"w\"> </span><span class=\"n\">Things2</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"p\">()</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"> </span><span class=\"n\">derive</span><span class=\"p\">(</span><span class=\"n\">Debug</span><span class=\"p\">,</span><span class=\"w\"> </span><span class=\"nb\">Default</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n\n<span class=\"cp\">#[Things2!{}]</span><span class=\"w\"></span>\n<span class=\"k\">struct</span> <span class=\"nc\">Y</span><span class=\"p\">;</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>My custom derive macros want to have some configuration, but I could see people wanting to use that configuration across all uses of the derive in their crate. It'd be nice to offer some way for them to DRY it up without them writing their <em>own</em> macros :-)</p>",
        "id": 212235358,
        "sender_full_name": "Jake Goulding",
        "timestamp": 1601836461
    },
    {
        "content": "<p>An alternative is to define the macro as:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"n\">macro_rules</span><span class=\"o\">!</span><span class=\"w\"> </span><span class=\"n\">MyDerives</span><span class=\"w\"> </span><span class=\"p\">{(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"cp\">$item</span>:<span class=\"nc\">item</span><span class=\"w\"></span>\n<span class=\"p\">)</span><span class=\"w\"> </span><span class=\"o\">=&gt;</span><span class=\"w\"> </span><span class=\"p\">(</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"cp\">#[derive(Debug, Default)]</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"cp\">$item</span><span class=\"w\"></span>\n<span class=\"p\">)}</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>And then use it with <a href=\"https://docs.rs/macro_rules_attribute\">https://docs.rs/macro_rules_attribute</a>:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#[macro_rules_attribute(MyDerives!)]</span><span class=\"w\"></span>\n<span class=\"cp\">#[...]</span><span class=\"w\"></span>\n<span class=\"sd\">/// ...</span>\n<span class=\"k\">struct</span> <span class=\"o\">..</span><span class=\"p\">.</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 212243073,
        "sender_full_name": "Daniel Henry-Mantilla",
        "timestamp": 1601847854
    },
    {
        "content": "<p>But a very desirable feature indeed would be to be able to alias <em>inner</em> attributes, as a shorthand for long lint lists (clippy, or default one):</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"cp\">#![my_inner_attrs!()]</span><span class=\"w\"></span>\n</code></pre></div>\n\n<p>or something like that</p>",
        "id": 212243285,
        "sender_full_name": "Daniel Henry-Mantilla",
        "timestamp": 1601848245
    }
]
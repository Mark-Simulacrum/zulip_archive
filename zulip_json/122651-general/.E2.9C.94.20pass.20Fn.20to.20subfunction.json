[
    {
        "content": "<p>Hi!<br>\nI have a problem with understanding why this code doesn't work:<br>\n<a href=\"https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=02a1b9d24fdfc782e09ae117a6518d13\">https://play.rust-lang.org/?version=stable&amp;mode=debug&amp;edition=2021&amp;gist=02a1b9d24fdfc782e09ae117a6518d13</a></p>\n<p>in function <code>map_ok</code> I just call <code>Fn</code> type directly. However, if I just try to delegate this call to another function, the compilation fails :-[</p>",
        "id": 278433566,
        "sender_full_name": "bemyak",
        "timestamp": 1649542168
    },
    {
        "content": "<p>In <code>map_ok</code> the closure  takes <code>f</code> by reference, as calling it only needs a reference. In <code>map_bad</code> you pass <code>f</code> to a <code>map</code> call by value, which requires moving it. You can do that there though since the outer closure is an <code>FnMut</code> that may be called multiple times, but you can only move <code>f</code> once.</p>",
        "id": 278434025,
        "sender_full_name": "Lukas Wirth",
        "timestamp": 1649542828
    },
    {
        "content": "<p>I got it now, thanks a lot!<br>\nchanging line 27 to</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"p\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"o\">|</span><span class=\"n\">s</span><span class=\"o\">|</span><span class=\"w\"> </span><span class=\"n\">s</span><span class=\"p\">.</span><span class=\"n\">map</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"n\">f</span><span class=\"p\">))</span><span class=\"w\"></span>\n</code></pre></div>\n<p>solved the issue!</p>",
        "id": 278434150,
        "sender_full_name": "bemyak",
        "timestamp": 1649543062
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"486009\">bemyak</span> has marked this topic as resolved.</p>",
        "id": 278434154,
        "sender_full_name": "Notification Bot",
        "timestamp": 1649543067
    },
    {
        "content": "<p>weird, I thought I added a diagnostic to suggest <code>&amp;f</code> if we try to move something that implements Fn... <a href=\"https://github.com/rust-lang/rust/issues/95257\">#95257</a></p>",
        "id": 278434242,
        "sender_full_name": "Michael Goulet (compiler-errors)",
        "timestamp": 1649543211
    },
    {
        "content": "<p>thanks for the example though, i'll try to fix it using your case :)</p>",
        "id": 278434251,
        "sender_full_name": "Michael Goulet (compiler-errors)",
        "timestamp": 1649543225
    }
]
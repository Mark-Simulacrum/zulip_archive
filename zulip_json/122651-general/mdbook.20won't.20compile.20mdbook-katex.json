[
    {
        "content": "<p>Hi, </p>\n<p>I installed mdbook-katex and mdbook. When compiling the book I get the following error:</p>\n<div class=\"codehilite\"><pre><span></span><code>% mdbook build\n [INFO] (mdbook::book): Book building has started\n [ERROR] (mdbook::utils): Error: The &quot;katex&quot; preprocessor exited unsuccessfully with signal: 11 status\n</code></pre></div>\n<p>I've tried uninstalling both of these and re-installing, but the error persists.</p>\n<p>If I do not use KaTex, the book compiles and if it use a different preprocessor, the book also compiles.</p>\n<p>This seems like a local error as the book compiles in the CI with katex.</p>\n<p>Has anyone encountered this before?</p>",
        "id": 254711357,
        "sender_full_name": "kev",
        "timestamp": 1632493019
    },
    {
        "content": "<p>Is that a SIGSEGV?</p>",
        "id": 254711679,
        "sender_full_name": "Laurențiu",
        "timestamp": 1632493144
    },
    {
        "content": "<p>Hmm I don't think so (?) Is there anyway to debug this further?</p>",
        "id": 254712179,
        "sender_full_name": "kev",
        "timestamp": 1632493330
    },
    {
        "content": "<p>Are you on Linux?</p>",
        "id": 254712404,
        "sender_full_name": "Laurențiu",
        "timestamp": 1632493429
    },
    {
        "content": "<p>The CI was running on ubuntu and I am running on MacOS</p>",
        "id": 254712485,
        "sender_full_name": "kev",
        "timestamp": 1632493445
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"203546\">@Laurențiu</span> it looks like a segfault to me, yeah</p>",
        "id": 254713116,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1632493702
    },
    {
        "content": "<p>Is KaTeX calling out to another binary maybe?</p>",
        "id": 254713167,
        "sender_full_name": "Joshua Nelson",
        "timestamp": 1632493723
    },
    {
        "content": "<p>It sounds like <code>katex</code> crashes</p>",
        "id": 254713312,
        "sender_full_name": "Laurențiu",
        "timestamp": 1632493785
    },
    {
        "content": "<p>I'd try to see what argument it gets. On Linux that's <code>strace -f -e trace=execve mdbook build</code>, but I don't know how the equivalent <code>dtrace</code> invocation would look like.</p>",
        "id": 254713338,
        "sender_full_name": "Laurențiu",
        "timestamp": 1632493796
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"232545\">Joshua Nelson</span> <a href=\"#narrow/stream/122651-general/topic/mdbook.20won't.20compile.20mdbook-katex/near/254713167\">said</a>:</p>\n<blockquote>\n<p>Is KaTeX calling out to another binary maybe?</p>\n</blockquote>\n<p>It doesn't seem to be from checking the code, hmm I guess the most likely place is <a href=\"https://github.com/lzanini/mdbook-katex/blob/master/src/main.rs#L56\">https://github.com/lzanini/mdbook-katex/blob/master/src/main.rs#L56</a></p>",
        "id": 254713575,
        "sender_full_name": "kev",
        "timestamp": 1632493869
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"203546\">Laurențiu</span> <a href=\"#narrow/stream/122651-general/topic/mdbook.20won't.20compile.20mdbook-katex/near/254713338\">said</a>:</p>\n<blockquote>\n<p>I'd try to see what argument it gets. On Linux that's <code>strace -f -e trace=execve mdbook build</code>, but I don't know how the equivalent <code>dtrace</code> invocation would look like.</p>\n</blockquote>\n<p>Yep, you were right. It was an invalid memory reference</p>",
        "id": 254718112,
        "sender_full_name": "kev",
        "timestamp": 1632495625
    },
    {
        "content": "<p>problem was in the katex dependency that mdbook-katex had. Katex has several backends and changing from quick-js to duktape solved the issue. I'm not sure if this is a MacOs issue or just my pc. Thanks for the help Josh and Laurențiu</p>",
        "id": 254745351,
        "sender_full_name": "kev",
        "timestamp": 1632506058
    }
]
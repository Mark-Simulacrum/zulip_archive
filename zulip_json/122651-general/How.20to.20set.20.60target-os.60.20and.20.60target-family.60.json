[
    {
        "content": "<p>Hello, I am using a custom target for my rust project and I want to make sure it forces <code>#[cfg(unix)] </code> and <code>target_os = \"linux\"</code> to be set as one.<br>\nHow do I do that?<br>\nThis is my target.json file:</p>\n<div class=\"codehilite\" data-code-language=\"JSON\"><pre><span></span><code><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"llvm-target\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"x86_64-unknown-none\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"target-endian\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"little\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"target-pointer-width\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"64\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"family \"</span><span class=\"w\"> </span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"unix\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"os\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"linux\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"arch\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"x86_64\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"data-layout\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"e-p:64:64:64-i1:8:8-i8:8:8-i16:16:16-i32:32:32-i64:64:64-f32:32:32-f64:64:64-v64:64:64-v128:128:128-a0:0:64-s0:64:64-f80:128:128-n8:16:32:64-S128\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"cpu\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"x86-64\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"features\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"s2\">\"-mmx,+sse,+sse2,+sse3,+ssse3,+sse4.1,+sse4.2,-3dnow,-3dnowa,-avx,-avx2\"</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"disable-redzone\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"eliminate-frame-pointer\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">false</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"linker-is-gnu\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"nt\">\"no-compiler-rt\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"p\">,</span><span class=\"nt\">\"executables\"</span><span class=\"p\">:</span><span class=\"w\"> </span><span class=\"kc\">true</span><span class=\"w\"> </span><span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>\n<p>Seems like family does not do anything</p>",
        "id": 273544772,
        "sender_full_name": "AF",
        "timestamp": 1646078184
    },
    {
        "content": "<p>Found a solution:<br>\ndefine target family as follows:</p>\n<div class=\"codehilite\"><pre><span></span><code>&quot;target-family&quot;: [\n        &quot;unix&quot;\n      ],\n</code></pre></div>",
        "id": 273546099,
        "sender_full_name": "AF",
        "timestamp": 1646078739
    },
    {
        "content": "<p>What's the nature of the target? Does it have an OS, or is it standalone?</p>",
        "id": 273552449,
        "sender_full_name": "Josh Triplett",
        "timestamp": 1646081786
    }
]
[
    {
        "content": "<p>I noticed that if I used the assist for adding <code>derive()</code>, then the cursor jumps to the \"first\" editor group, and not the current one. I've tried to look here to see what is deciding the next location of the cursor, but I don't see the choice of editor in here: <a href=\"https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_derive.rs#L9\">https://github.com/rust-analyzer/rust-analyzer/blob/master/crates/ide_assists/src/handlers/generate_derive.rs#L9</a></p>",
        "id": 269583130,
        "sender_full_name": "Mossa",
        "timestamp": 1643295067
    },
    {
        "content": "<p>I tried the following to showcase this:<br>\nNew project.<br>\nOpen <a href=\"http://main.rs\">main.rs</a>.<br>\nSplit into two windows.<br>\nThen add a struct and invoke the assist <code>derive</code>. <br>\nThis is the resulting panic:</p>\n<div class=\"codehilite\"><pre><span></span><code>Panic context:\n&gt;\nversion: db2a7087b 2021-12-13 stable\nrequest: codeLens/resolve CodeLens {\n    range: Range {\n        start: Position {\n            line: 6,\n            character: 7,\n        },\n        end: Position {\n            line: 6,\n            character: 13,\n        },\n    },\n    command: None,\n    data: Some(\n        Object({\n            &quot;impls&quot;: Object({\n                &quot;textDocument&quot;: Object({\n                    &quot;uri&quot;: String(\n                        &quot;file:///c:/Users/Tyler/AppData/Local/cargo-temp/tmp-YE34Vz/src/main.rs&quot;,\n                    ),\n                }),\n                &quot;position&quot;: Object({\n                    &quot;line&quot;: Number(\n                        6,\n                    ),\n                    &quot;character&quot;: Number(\n                        7,\n                    ),\n                }),\n            }),\n        }),\n    ),\n}\n\nthread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 6 but the index is 6&#39;, crates\\ide_db\\src\\line_index.rs:106:Panic context:\n&gt;\nversion: db2a7087b 2021-12-13 stable\nrequest: codeLens/resolve CodeLens {\n    range: Range {\n        start: Position {\n            line: 6,\n            character: 7,\n        },\n        end: Position {\n            line: 6,\n            character: 13,\n        },\n    },\n    command: None,\n    data: Some(\n        Object({\n            &quot;references&quot;: Object({\n                &quot;textDocument&quot;: Object({\n                    &quot;uri&quot;: String(\n                        &quot;file:///c:/Users/Tyler/AppData/Local/cargo-temp/tmp-YE34Vz/src/main.rs&quot;,\n                    ),\n                }),\n                &quot;position&quot;: Object({\n                    &quot;line&quot;: Number(\n                        6,\n                    ),\n                    &quot;character&quot;: Number(\n                        7,\n                    ),\n                }),\n            }),\n        }),\n    ),\n}\n\nthread &#39;&lt;unnamed&gt;&#39; panicked at &#39;index out of bounds: the len is 6 but the index is 6&#39;, crates\\ide_db\\src\\line_index.rs:9106\n:9stack backtrace:\n\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\nstack backtrace:\n[Error - 15.54.11] Request codeLens/resolve failed.\n  Message: server panicked: index out of bounds: the len is 6 but the index is 6\n  Code: -32603\nnote: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.\n[Error - 15.54.11] Request codeLens/resolve failed.\n  Message: server panicked: index out of bounds: the len is 6 but the index is 6\n  Code: -32603\n</code></pre></div>",
        "id": 269583735,
        "sender_full_name": "Mossa",
        "timestamp": 1643295315
    },
    {
        "content": "<p>This might be a proper issue. Let me know if I should post this on github.</p>",
        "id": 269583921,
        "sender_full_name": "Mossa",
        "timestamp": 1643295389
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"426680\">@Mossa</span> yes, please file an issue if you can</p>",
        "id": 271103311,
        "sender_full_name": "Lauren»õiu",
        "timestamp": 1644313764
    }
]
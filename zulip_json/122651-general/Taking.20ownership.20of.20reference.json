[
    {
        "content": "<p>I've got this bit of code where I would like to use the <code>function</code> variable to adjust some properties on it. To do so I _think_ I should be passing through the ownership of it but the <code>as_decl()</code> function returns me a reference instead. <a href=\"/user_uploads/4715/-MqN6DudxMsCaNPDZGV0hoxr/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/-MqN6DudxMsCaNPDZGV0hoxr/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/-MqN6DudxMsCaNPDZGV0hoxr/image.png\"></a></div><p>I found <a href=\"https://stackoverflow.com/a/28159407/1864167\">https://stackoverflow.com/a/28159407/1864167</a> which indicates it happens because <code>&amp;self</code> is being consumed but I'm struggling to figure out how to translate this to my scenario. Is anyone able to get me back on track here? Copyable code <a href=\"https://gist.github.com/Vannevelj/2021897f32cde3dbd603289b9cf76b95\">here</a></p>",
        "id": 275293997,
        "sender_full_name": "Jeroen Vannevel",
        "timestamp": 1647289876
    },
    {
        "content": "<p>You'll need to change your function arguments to take in <code>&amp;mut Type</code> mutable references in order to update their values</p>",
        "id": 275294877,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1647290400
    },
    {
        "content": "<p>Eg:</p>\n<div class=\"codehilite\" data-code-language=\"Rust\"><pre><span></span><code><span class=\"k\">fn</span> <span class=\"nf\">update_param</span><span class=\"p\">(</span><span class=\"n\">param</span>: <span class=\"kp\">&amp;</span><span class=\"nc\">mut</span><span class=\"w\"> </span><span class=\"n\">Param</span><span class=\"p\">)</span><span class=\"w\"> </span><span class=\"p\">{</span><span class=\"w\"></span>\n<span class=\"w\">    </span><span class=\"n\">update_pat</span><span class=\"p\">(</span><span class=\"o\">&amp;</span><span class=\"k\">mut</span><span class=\"w\"> </span><span class=\"n\">param</span><span class=\"p\">.</span><span class=\"n\">pat</span><span class=\"p\">);</span><span class=\"w\"></span>\n<span class=\"p\">}</span><span class=\"w\"></span>\n</code></pre></div>",
        "id": 275295042,
        "sender_full_name": "Conrad Ludgate",
        "timestamp": 1647290492
    },
    {
        "content": "<p>That brings me to this: <a href=\"/user_uploads/4715/_Ur-GChY2bAHuoAItbv3SFZM/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/_Ur-GChY2bAHuoAItbv3SFZM/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/_Ur-GChY2bAHuoAItbv3SFZM/image.png\"></a></div>",
        "id": 275295589,
        "sender_full_name": "Jeroen Vannevel",
        "timestamp": 1647290798
    },
    {
        "content": "<p>You have <code>in &amp;module.body</code>.  If you want to iterate to get <code>&amp;mut</code>s, you want <code>in &amp;mut module.body</code>.</p>",
        "id": 275300118,
        "sender_full_name": "scottmcm",
        "timestamp": 1647292891
    },
    {
        "content": "<p>I tried that as well but no dice: <a href=\"/user_uploads/4715/NDgTgajhpEVRhgR6VAo1GyP-/image.png\">image.png</a> <br>\nI feel as if I've tried every permutation of adding <code>&amp;</code> and <code>&amp;mut</code> by now <span aria-label=\"grimacing\" class=\"emoji emoji-1f62c\" role=\"img\" title=\"grimacing\">:grimacing:</span></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/NDgTgajhpEVRhgR6VAo1GyP-/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/NDgTgajhpEVRhgR6VAo1GyP-/image.png\"></a></div>",
        "id": 275300681,
        "sender_full_name": "Jeroen Vannevel",
        "timestamp": 1647293237
    },
    {
        "content": "<p>Probably needs an <code>ref</code> somewhere in the match. Hard to say for sure without being able to try it</p>",
        "id": 275301867,
        "sender_full_name": "mejrs",
        "timestamp": 1647293968
    },
    {
        "content": "<p>Like here: <a href=\"https://doc.rust-lang.org/stable/reference/patterns.html#binding-modes\">https://doc.rust-lang.org/stable/reference/patterns.html#binding-modes</a></p>",
        "id": 275301971,
        "sender_full_name": "mejrs",
        "timestamp": 1647294043
    },
    {
        "content": "<p>Ah interesting, thank you! I hadn't heard of <code>ref</code> yet so I'll look into that. <br>\nYou can play around with the code here in case you're interested: <a href=\"https://github.com/Vannevelj/type-rs/blob/master/src/parser.rs\">https://github.com/Vannevelj/type-rs/blob/master/src/parser.rs</a></p>",
        "id": 275306143,
        "sender_full_name": "Jeroen Vannevel",
        "timestamp": 1647296691
    },
    {
        "content": "<p>Managed to solve one build error by using <code>ref mut</code> and a restructuring of the <code>match</code>: <a href=\"https://github.com/Vannevelj/type-rs/commit/dddb216a1e2f8410049a43e83be0f535a6515a12\">https://github.com/Vannevelj/type-rs/commit/dddb216a1e2f8410049a43e83be0f535a6515a12</a><br>\nStill got a second build error elsewhere though:<br>\n<a href=\"/user_uploads/4715/GYl4pqTFvWSHXw4eXhitYM_E/image.png\">image.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/GYl4pqTFvWSHXw4eXhitYM_E/image.png\" title=\"image.png\"><img src=\"/user_uploads/4715/GYl4pqTFvWSHXw4eXhitYM_E/image.png\"></a></div>",
        "id": 275311488,
        "sender_full_name": "Jeroen Vannevel",
        "timestamp": 1647300300
    }
]
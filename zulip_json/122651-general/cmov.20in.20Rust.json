[
    {
        "content": "<p>Hey I saw this(<a href=\"https://github.com/xiadz/cmov\" target=\"_blank\" title=\"https://github.com/xiadz/cmov\">https://github.com/xiadz/cmov</a>) on my feed and wondered about Rust and then tested it on my pc to confirm</p>\n<p>i8700 3.2ghz<br>\n#probability;time_branch;time_branch_0;time_branch_1;time_cmov<br>\n0.000000;0.882511;0.484089;0.884556;0.338580<br>\n0.050000;1.099530;0.879728;1.094407;0.345329<br>\n0.100000;1.277492;1.035594;1.281278;0.344896<br>\n0.150000;1.506765;0.739541;1.445742;0.346880<br>\n0.200000;1.557517;1.604143;1.527989;0.345630<br>\n0.250000;1.762647;1.217720;1.491100;0.347277<br>\n0.300000;1.650616;1.634871;1.204373;0.348672<br>\n0.350000;1.773185;2.592491;2.411367;0.340889<br>\n0.400000;2.099715;2.366262;1.649492;0.346297<br>\n0.450000;2.197287;2.867265;2.177574;0.345645<br>\n0.500000;2.397491;2.726234;2.846761;0.345180<br>\n0.550000;2.727086;3.108073;2.590671;0.353667<br>\n0.600000;1.909413;2.566348;1.776441;0.342313<br>\n0.650000;1.714653;2.332316;1.615921;0.344723<br>\n0.700000;1.388782;1.879567;1.890638;0.346914<br>\n0.750000;1.536015;2.021682;1.744568;0.343886<br>\n0.800000;1.494247;1.983500;1.541455;0.344742<br>\n0.850000;1.252894;1.702029;1.304285;0.344089<br>\n0.900000;1.070088;1.554968;1.116774;0.343721<br>\n0.950000;0.653277;1.294580;0.656864;0.343529<br>\n1.000000;0.304066;1.095976;0.303170;0.339022</p>\n<p>so looks like on this types of benchmark the use of cmov is preferred on newer processors,  maybe there are benchmarks which produce different results but I'm thinking about improving the average case scenario<br>\nI then found this issue <a href=\"https://github.com/rust-lang/rust/issues/53823\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/issues/53823\">https://github.com/rust-lang/rust/issues/53823</a> and looks like disabling x86-cmov-converter is the way to 'force' cmov</p>\n<p>Is this some kind of new finding and worth reviving the issue, or I'm just wasting time :D?<br>\nshould we rewrite this benchmark in Rust to see the results are the same?</p>\n<p>EDIT:<br>\nafter more reading sounds like profile guided optimization should solve this? <a href=\"https://github.com/rust-lang/rust/pull/61268\" target=\"_blank\" title=\"https://github.com/rust-lang/rust/pull/61268\">https://github.com/rust-lang/rust/pull/61268</a></p>",
        "id": 172529876,
        "sender_full_name": "Vova",
        "timestamp": 1565032554
    }
]
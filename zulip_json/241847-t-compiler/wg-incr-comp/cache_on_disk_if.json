[
    {
        "content": "<p>cache_on_disk_if is sometimes called with <code>None</code>.When should I return <code>true</code> if that happens?</p>",
        "id": 258100318,
        "sender_full_name": "lcnr",
        "timestamp": 1634591210
    },
    {
        "content": "<p>cache_on_disk_if will be passed Some when trying to know whether to save a value, and it will be passed None when trying to know whether to load it. I think the two cases should be identical, otherwise we will attempt to save values that will never be read.</p>",
        "id": 258106176,
        "sender_full_name": "cjgillot",
        "timestamp": 1634593797
    },
    {
        "content": "<p>I am planning to remove the possibility to pass the query result to <code>cache_on_disk_if</code> for this reason. Do you have a use case in mind?</p>",
        "id": 258106289,
        "sender_full_name": "cjgillot",
        "timestamp": 1634593838
    },
    {
        "content": "<p>i want to change <code>specialization_graph_of</code> to return a <code>Result</code> and don't want to cache it when returing <code>Err</code> (which should only happen when failing compilation)</p>",
        "id": 258107018,
        "sender_full_name": "lcnr",
        "timestamp": 1634594193
    },
    {
        "content": "<p>though we probably don't cache stuff anyways in that case?</p>",
        "id": 258107050,
        "sender_full_name": "lcnr",
        "timestamp": 1634594206
    },
    {
        "content": "<p>Normally, the dep-graph and the on-disk query cache are discarded if errors have been emitted.</p>",
        "id": 258109401,
        "sender_full_name": "cjgillot",
        "timestamp": 1634595375
    },
    {
        "content": "<p>I mean, the old caches are left on the disk and are not overwritten by the session which produced errors.</p>",
        "id": 258109497,
        "sender_full_name": "cjgillot",
        "timestamp": 1634595426
    },
    {
        "content": "<p>thanks &lt;3</p>",
        "id": 258110827,
        "sender_full_name": "lcnr",
        "timestamp": 1634596190
    }
]
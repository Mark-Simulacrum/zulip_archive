[
    {
        "content": "<p>I started writing <a href=\"https://hackmd.io/AGWMGUvhTSiDVo5QGX-rHw\">a doc</a> on ideas for allowing users to continue working, even if they run into incremental ICEs, without requiring them to actually do anything. Right now I only added a \"big hammer\" approach, but I want to look into more fine-grained cache (in)validation, too.</p>\n<p>Opinions? Objections? Priorization requests?</p>",
        "id": 273144754,
        "sender_full_name": "oli",
        "timestamp": 1645734085
    },
    {
        "content": "<p>Running <code>cargo clean -p &lt;package&gt;</code> is a more fine-grained approach</p>",
        "id": 273149628,
        "sender_full_name": "Aaron Hill",
        "timestamp": 1645736755
    },
    {
        "content": "<p>We even suggest that in the nicer error message we emit for fingerprint ICEs</p>",
        "id": 273149685,
        "sender_full_name": "Aaron Hill",
        "timestamp": 1645736768
    },
    {
        "content": "<p>I think it might be good to have something in place that we can easily turn on. But we have to be careful. There might be bugs that cause ICEs in some situations (because of a bounds check) but silent data corruption in other cases.</p>",
        "id": 273207273,
        "sender_full_name": "mw",
        "timestamp": 1645782057
    },
    {
        "content": "<p>I looks like we're doing some verification on the data we read here: <a href=\"https://github.com/rust-lang/rust/blob/ece55d416e65256e4da274988651c20e5d5cb4ea/compiler/rustc_query_impl/src/on_disk_cache.rs#L529-L548\">https://github.com/rust-lang/rust/blob/ece55d416e65256e4da274988651c20e5d5cb4ea/compiler/rustc_query_impl/src/on_disk_cache.rs#L529-L548</a></p>\n<p>We might want to think about making that more robust, e.g. by adding a cheap checksum on the bytes -- if it's possible to make that cheap enough.</p>",
        "id": 273207888,
        "sender_full_name": "mw",
        "timestamp": 1645782413
    },
    {
        "content": "<p>Alternatively we could turn on fingerprint verification for everything whenever the mitigation is enabled.</p>",
        "id": 273208116,
        "sender_full_name": "mw",
        "timestamp": 1645782572
    }
]
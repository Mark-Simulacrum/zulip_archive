[
    {
        "content": "<p>FWIW, this is how incremental build of rustc looks on my machine (using windows 8.1 as OS). <a href=\"/user_uploads/4715/PxLAAI_UGrkzce6BtB9Fkqlh/incremental-windows.png\">incremental-windows.png</a></p>\n<div class=\"message_inline_image\"><a href=\"/user_uploads/4715/PxLAAI_UGrkzce6BtB9Fkqlh/incremental-windows.png\" title=\"incremental-windows.png\"><img src=\"/user_uploads/4715/PxLAAI_UGrkzce6BtB9Fkqlh/incremental-windows.png\"></a></div>",
        "id": 275437939,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1647379722
    },
    {
        "content": "<p>Apparently some filesystem races or something similar is happening during incremental compilation on Windows.</p>",
        "id": 275438046,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1647379777
    },
    {
        "content": "<p>I've seen these warnings on Windows 10 too, but they happen much more rarely.</p>",
        "id": 275438158,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1647379817
    },
    {
        "content": "<p>do you have an IDE like vscode open on the rustc folder by any chance ?</p>",
        "id": 275438206,
        "sender_full_name": "lqd",
        "timestamp": 1647379846
    },
    {
        "content": "<p>I do.</p>",
        "id": 275438499,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1647379988
    },
    {
        "content": "<p>I've also seen these happen in the same situation then, and the warnings disappeared when closing vscode. I'm wondering if it's its filewatching or something</p>",
        "id": 275438660,
        "sender_full_name": "lqd",
        "timestamp": 1647380049
    },
    {
        "content": "<p>(or maybe rust-analyzer's if you also have that ?)</p>",
        "id": 275439074,
        "sender_full_name": "lqd",
        "timestamp": 1647380254
    },
    {
        "content": "<p>I'm also using vscode but on Windows 11 and while I do occasionally see the \"Error finalizing incremental compilation session\" message (perhaps 1 out of 10 compiles), it's usually only one crate and I've never seen the other message.</p>",
        "id": 275440098,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1647380767
    },
    {
        "content": "<p>We stash diagnostics and replay them which doesn't help in this situation <span aria-label=\"smile\" class=\"emoji emoji-1f642\" role=\"img\" title=\"smile\">:smile:</span></p>",
        "id": 275440157,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1647380799
    },
    {
        "content": "<p>I've seen the \"Error finalizing incremental compilation session\" error too for a while now. <span class=\"user-mention\" data-user-id=\"224872\">@rylev</span> reported it back in July: <a href=\"https://github.com/rust-lang/rust/issues/86929\">https://github.com/rust-lang/rust/issues/86929</a></p>\n<p>I haven't seen the other issue yet. I'll assign the first one to me and see what I can do because that one I can reproduce pretty reliably.</p>",
        "id": 275482155,
        "sender_full_name": "mw",
        "timestamp": 1647421248
    },
    {
        "content": "<p>(FYI I'm still seeing the \"Error finalizing incremental compilation session\" error and I've also not seen the other issue)</p>",
        "id": 275482382,
        "sender_full_name": "rylev",
        "timestamp": 1647421366
    }
]
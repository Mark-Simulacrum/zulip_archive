[
    {
        "content": "<p>Is there a list of projects to make progress on incremental compilation during the year?<br>\nSome kind of roadmap for the wg?</p>",
        "id": 225902556,
        "sender_full_name": "cjgillot",
        "timestamp": 1612988998
    },
    {
        "content": "<p>yes: <a href=\"https://github.com/rust-lang/wg-incr-comp/issues/1\">https://github.com/rust-lang/wg-incr-comp/issues/1</a></p>",
        "id": 225904171,
        "sender_full_name": "oliver",
        "timestamp": 1612989656
    },
    {
        "content": "<p>This was just something I threw together so if you have input about what you think we should be working on, please feel free to share!</p>",
        "id": 225904614,
        "sender_full_name": "Wesley Wiser",
        "timestamp": 1612989852
    },
    {
        "content": "<p>The long-shots I have in mind:<br>\n1/ opportunistically drop the HIR;<br>\n2/ splitting the query system into several stages;<br>\n3/ incremental lowering, resolving and macro-expansion;<br>\n4/ transition HIR from a tree to ECS-like data structures.</p>\n<p>Those items will require a significant work before being proposable, and will probably take a few month just to reach a design.</p>",
        "id": 225908181,
        "sender_full_name": "cjgillot",
        "timestamp": 1612991314
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248906\">cjgillot</span> <a href=\"#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/Roadmap.20and.20projects.20for.20incr-comp/near/225908181\">said</a>:</p>\n<blockquote>\n<p>The long-shots I have in mind:<br>\n1/ opportunistically drop the HIR;<br>\n2/ splitting the query system into several stages;<br>\n3/ incremental lowering, resolving and macro-expansion;<br>\n4/ transition HIR from a tree to ECS-like data structures.</p>\n<p>Those items will require a significant work before being proposable, and will probably take a few month just to reach a design.</p>\n</blockquote>\n<p>wouldn't it be a good idea for the wg to start diving those big projects into actionable things and then maybe split the work?</p>",
        "id": 226191254,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1613161387
    },
    {
        "content": "<p>I am still in the brain-dump stage, not yet in the strategic planning <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span></p>",
        "id": 226191328,
        "sender_full_name": "cjgillot",
        "timestamp": 1613161433
    },
    {
        "content": "<p>:)</p>",
        "id": 226191418,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1613161463
    },
    {
        "content": "<p>I developed a bit more in the sprint hack-md, actually.<br>\n<a href=\"https://hackmd.io/Br1k5qy0QWuPdbMZMdyeqQ?view\">https://hackmd.io/Br1k5qy0QWuPdbMZMdyeqQ?view</a></p>",
        "id": 226191492,
        "sender_full_name": "cjgillot",
        "timestamp": 1613161505
    },
    {
        "content": "<p>cool</p>",
        "id": 226191508,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1613161511
    },
    {
        "content": "<p>yeah, I was kind of clapping and cheering for what you're doing and also asking if wouldn't make sense to try to work on more strategic things like the ones you're saying</p>",
        "id": 226191634,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1613161569
    },
    {
        "content": "<p>I would be happy to help with the design and implementation.</p>",
        "id": 226193041,
        "sender_full_name": "cjgillot",
        "timestamp": 1613162328
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248906\">cjgillot</span> <a href=\"#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/Roadmap.20and.20projects.20for.20incr-comp/near/226193041\">said</a>:</p>\n<blockquote>\n<p>I would be happy to help with the design and implementation.</p>\n</blockquote>\n<p>would be willing to help if you have ideas :)</p>",
        "id": 226193323,
        "sender_full_name": "Santiago Pastorino",
        "timestamp": 1613162488
    },
    {
        "content": "<p>Started a design document here. Looking for comments <a href=\"https://hackmd.io/@cjgillot/BJlE9Jw-u\">https://hackmd.io/@cjgillot/BJlE9Jw-u</a></p>",
        "id": 226320159,
        "sender_full_name": "cjgillot",
        "timestamp": 1613330359
    },
    {
        "content": "<p>I don't know if it fits here but I'd love to see (clean up/simplification/documentation) of the query system implementation on the agenda <code>:)</code></p>",
        "id": 226512203,
        "sender_full_name": "mw",
        "timestamp": 1613481978
    },
    {
        "content": "<p>This is still an early draft with unsanctioned proposals <span aria-label=\"big smile\" class=\"emoji emoji-1f604\" role=\"img\" title=\"big smile\">:big_smile:</span> <br>\nI added it as the first item.</p>",
        "id": 226547926,
        "sender_full_name": "cjgillot",
        "timestamp": 1613497124
    },
    {
        "content": "<p><span class=\"user-mention\" data-user-id=\"248906\">@cjgillot</span> Sure, I'm mostly commenting from the sidelines here anyway <code>:)</code></p>",
        "id": 226681094,
        "sender_full_name": "mw",
        "timestamp": 1613578371
    },
    {
        "content": "<p><span class=\"user-mention silent\" data-user-id=\"248906\">cjgillot</span> <a href=\"#narrow/stream/241847-t-compiler.2Fwg-incr-comp/topic/Roadmap.20and.20projects.20for.20incr-comp/near/226320159\">said</a>:</p>\n<blockquote>\n<p>Started a design document here. Looking for comments <a href=\"https://hackmd.io/@cjgillot/BJlE9Jw-u\">https://hackmd.io/@cjgillot/BJlE9Jw-u</a></p>\n</blockquote>\n<p><span class=\"user-mention\" data-user-id=\"123856\">@Vadim Petrochenkov</span>, I would like your input on the above HackMD.<br>\nYou are the most familiar with AST, expand and resolve, and I fear I am speculating wildly on some parts.</p>",
        "id": 227330634,
        "sender_full_name": "cjgillot",
        "timestamp": 1614025009
    },
    {
        "content": "<p>I have no idea honestly.<br>\nI have some vague understanding of how the query system and incremental compilation works from the dev guide, but I never tried to connect it to resolve and expansion.<br>\nYes, things can likely be restructured to work in incremental-friendly way to some extent, but I can't say how exactly this should be done without human-months of experiments and design work.</p>",
        "id": 227336207,
        "sender_full_name": "Vadim Petrochenkov",
        "timestamp": 1614027540
    },
    {
        "content": "<p>I might add that there are some plans for rust-analyzer to refactor how import resolution is performed to be easier to understand and model: <a href=\"https://github.com/rust-analyzer/rust-analyzer/issues/5922\">https://github.com/rust-analyzer/rust-analyzer/issues/5922</a></p>\n<p>It could also pave the way towards extracting \"early\" name resolution into a library.</p>",
        "id": 227338500,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1614028502
    },
    {
        "content": "<p>Also, rust-analyzer's crate-wide name resolution is a distinct query from name resolution inside of item bodies, which helps with incrementality. It does not solve the fundamental issue that it's a fixed-point algorithm that has to look at every single item-level macro invocation though.</p>",
        "id": 227338719,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1614028597
    },
    {
        "content": "<p>Maybe, once we have extracted the name resolution algorithm and made it use a simplified input instead of the full AST, that input could be stored in the incr. comp. cache, since it's probably quite small compared to all the macro expansions that go into nameres.</p>",
        "id": 227338991,
        "sender_full_name": "Jonas Schievink  [he/him]",
        "timestamp": 1614028732
    }
]